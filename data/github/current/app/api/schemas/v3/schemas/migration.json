{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/migration.json",
  "title": "Migration",
  "description": "A migration.",
  "type": "object",
  "definitions": {
    "migration_id": {
      "description": "The ID of the migration.",
      "type": "integer",
      "example": 42
    },
    "repo": {
      "description": "The name of the repository.",
      "type": "string"
    },
    "repository_id": {
      "description": "The ID of the repository.",
      "type": "integer",
      "example": 42
    },
    "org": {
      "description": "The name of the organization.",
      "type": "string"
    },
    "organization_id": {
      "description": "The ID of the organization.",
      "type": "integer"
    },
    "repository": {
      "description": "Repository path, owner and name",
      "example": "acme/widgets",
      "type": "string"
    },
    "repo_name": {
      "description": "The repo_name of the repository.",
      "type": "string"
    },
    "id": {
      "type": "integer",
      "example": 79
    },
    "node_id": {
      "type": "string"
    },
    "guid": {
      "type": "string",
      "example": "0b989ba4-242f-11e5-81e1-c7b6966d2516"
    },
    "state": {
      "type": "string",
      "example": "pending"
    },
    "lock_repositories": {
      "type": "boolean",
      "example": true
    },
    "exclude_metadata": {
      "type": "boolean"
    },
    "exclude_git_data": {
      "type": "boolean"
    },
    "exclude_attachments": {
      "type": "boolean"
    },
    "exclude_releases": {
      "type": "boolean"
    },
    "exclude_owner_projects": {
      "type": "boolean"
    },
    "exclude": {
      "type": "array"
    },
    "allowed_exclusions": {
      "description": "Allowed values that can be passed to the exclude param.",
      "enum": [
        "repositories"
      ],
      "example": "repositories",
      "type": "string"
    },
    "repositories": {
      "type": "array",
      "example": [

      ]
    },
    "url": {
      "type": "string",
      "format": "uri",
      "example": "https://api.github.com/orgs/octo-org/migrations/79"
    },
    "archive_url": {
      "type": "string",
      "format": "uri"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "example": "2015-07-06T15:33:38-07:00"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "example": "2015-07-06T15:33:38-07:00"
    }
  },
  "links": [
    {
      "href": "/organizations/{organization_id}/migrations",
      "method": "POST",
      "rel": "create-for-org",
      "schema": {
        "properties": {
          "lock_repositories": {
            "description": "Lock the repositories being migrated at the start of the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_metadata": {
            "description": "Do not include metadata, only include git source in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_git_data": {
            "description": "Do not include repository git data in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_attachments": {
            "description": "Do not include attachments in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_releases": {
            "description": "Do not include releases in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_owner_projects": {
            "description": "Do not include owner-level projects in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude": {
            "description": "Exclude attributes from the API response to improve performance",
            "example": [
              "repositories"
            ],
            "readOnly": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/allowed_exclusions"
            }
          },
          "repositories": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/repository"
            }
          }
        },
        "additionalProperties": false,
        "required": [
          "repositories"
        ],
        "type": "object"
      },
      "title": "Create and start a migration"
    },
    {
      "href": "/user/migrations",
      "method": "POST",
      "rel": "create-for-user",
      "schema": {
        "properties": {
          "lock_repositories": {
            "description": "Lock the repositories being migrated at the start of the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_metadata": {
            "description": "Do not include metadata, only include git source in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_git_data": {
            "description": "Do not include repository git data in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_attachments": {
            "description": "Do not include attachments in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_releases": {
            "description": "Do not include releases in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude_owner_projects": {
            "description": "Do not include owner-level projects in the migration",
            "example": true,
            "readOnly": false,
            "type": "boolean"
          },
          "exclude": {
            "description": "Exclude attributes from the API response to improve performance",
            "example": [
              "repositories"
            ],
            "readOnly": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/allowed_exclusions"
            }
          },
          "repositories": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/repository"
            }
          }
        },
        "additionalProperties": false,
        "required": [
          "repositories"
        ],
        "type": "object"
      },
      "title": "Start a user migration"
    },
    {
      "title": "Delete a user migration archive",
      "method": "DELETE",
      "rel": "delete-user-archive",
      "href": "/user/migrations/{migration_id}/archive",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Unlock a user repository",
      "method": "DELETE",
      "rel": "unlock",
      "href": "/user/migrations/{migration_id}/repos/{repo}/lock",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Delete an organization migration archive",
      "method": "DELETE",
      "rel": "delete-org-archive",
      "href": "/organizations/{organization_id}/migrations/{migration_id}/archive",
      "schema": {
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Unlock an organization repository",
      "method": "DELETE",
      "rel": "unlock-repo",
      "href": "/organizations/{organization_id}/migrations/{migration_id}/repos/{repo}/lock",
      "schema": {
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    }
  ],
  "properties": {
    "id": {
      "$ref": "#/definitions/id"
    },
    "node_id": {
      "$ref": "#/definitions/node_id"
    },
    "owner": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "https://schema.github.com/v3/simple-user.json#"
        }
      ]
    },
    "guid": {
      "$ref": "#/definitions/guid"
    },
    "state": {
      "$ref": "#/definitions/state"
    },
    "lock_repositories": {
      "$ref": "#/definitions/lock_repositories"
    },
    "exclude_metadata": {
      "$ref": "#/definitions/exclude_metadata"
    },
    "exclude_git_data": {
      "$ref": "#/definitions/exclude_git_data"
    },
    "exclude_attachments": {
      "$ref": "#/definitions/exclude_attachments"
    },
    "exclude_releases": {
      "$ref": "#/definitions/exclude_releases"
    },
    "exclude_owner_projects": {
      "$ref": "#/definitions/exclude_owner_projects"
    },
    "exclude": {
      "$ref": "#/definitions/exclude"
    },
    "repositories": {
      "$ref": "#/definitions/repositories"
    },
    "url": {
      "$ref": "#/definitions/url"
    },
    "archive_url": {
      "$ref": "#/definitions/archive_url"
    },
    "created_at": {
      "$ref": "#/definitions/created_at"
    },
    "updated_at": {
      "$ref": "#/definitions/updated_at"
    }
  },
  "additionalProperties": false,
  "required": [
    "id",
    "node_id",
    "owner",
    "guid",
    "state",
    "lock_repositories",
    "exclude_metadata",
    "exclude_git_data",
    "exclude_attachments",
    "exclude_releases",
    "exclude_owner_projects",
    "repositories",
    "url",
    "created_at",
    "updated_at"
  ]
}
