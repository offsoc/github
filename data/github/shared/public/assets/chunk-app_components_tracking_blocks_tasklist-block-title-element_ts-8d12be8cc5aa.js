"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_tracking_blocks_tasklist-block-title-element_ts"],{85385:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var o=i(39595),n=i(85971);function r(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function l(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function s(t,e){var i=l(t,e,"get");return i.get?i.get.call(t):i.value}function a(t,e,i){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return i}function u(t,e){r(t,e),e.add(t)}function c(t,e,i,o){var n,r=arguments.length,l=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(r<3?n(l):r>3?n(e,i,l):n(e,i))||l);return r>3&&l&&Object.defineProperty(e,i,l),l}var d=new WeakMap,p=new WeakSet,f=new WeakSet,h=new WeakSet,m=new WeakSet;let _=class TasklistBlockTitleElement extends HTMLElement{handleSubmit(t){t.preventDefault();let e=Array.from(t.currentTarget.querySelectorAll("input, button")),i=this.titleInput,o=this.titleText?.textContent?.trim()??"",n=new FormData(t.currentTarget).get("tasklist_title"),r=n?.toString().trim()??"";if(r!==o){for(let t of e)t.toggleAttribute("disabled",!0);if(i){let t=a(this,f,b).call(this,i,r);a(this,h,g).call(this,t)}a(this,m,v).call(this,r)}for(let t of(a(this,p,k).call(this),e))t.toggleAttribute("disabled",!1)}handleKeyDown(t){let{key:e}=t;if("Escape"===e&&(t.stopPropagation(),a(this,p,k).call(this)),("Meta"===e||"Control"===e)&&(s(this,d)[e]=!0),"Enter"===e&&(s(this,d).Control||s(this,d).Meta)){let t=this.titleEditMode?.querySelector("form");t&&t.dispatchEvent(new SubmitEvent("submit"))}}handleKeyUp(t){let{key:e}=t;("Meta"===e||"Control"===e)&&(s(this,d)[e]=!1)}constructor(...t){super(...t),u(this,p),u(this,f),u(this,h),u(this,m),function(t,e,i){r(t,e),e.set(t,i)}(this,d,{writable:!0,value:void 0}),function(t,e,i){var o=l(t,e,"set");!function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(t,o,i)}(this,d,{Control:!1,Meta:!1})}};function k(){this.titleEditMode?.toggleAttribute("hidden",!0),this.titleViewMode?.toggleAttribute("hidden",!1),this.titleText?.focus()}function b(t,e){let i=t.closest(".js-comment"),o=null;i?o=i.querySelector(".js-comment-update"):i=t.closest(".markdown-body");let n=t.closest("tracking-block");return{operation:"update_tasklist_title",position:Array.from(i.querySelectorAll("tracking-block")).findIndex(t=>t===n),name:e,formId:o?.id||""}}function g(t){this.dispatchEvent(new CustomEvent("tasklist-block-title-update",{bubbles:!0,detail:t}))}async function v(t){this.titleText&&(this.titleText.innerHTML=await (0,n.Oh)(t)||"Tasks")}c([o.aC],_.prototype,"titleEditMode",void 0),c([o.aC],_.prototype,"titleViewMode",void 0),c([o.aC],_.prototype,"titleInput",void 0),c([o.aC],_.prototype,"titleText",void 0),_=c([o.p_],_)},85971:(t,e,i)=>{async function o(t,e){let{appendItem:o,removeItem:n,removeTasklistBlock:r,updateItemPosition:l,updateItemState:s,updateItemTitle:a,updateTasklistTitle:u}=await Promise.all([i.e("vendors-node_modules_micromark_index_js-node_modules_remark-gfm_index_js-node_modules_remark_-2e1650"),i.e("ui_packages_tasklist-block-operations_operations_ts")]).then(i.bind(i,77914));if("append_item"===e.operation){if(!/^\s*(https?:|#)/.test(e.value))return o(t,e.position,e.value)}else if("update_item_title"===e.operation)return a(t,e.position,e.value);else if("update_item_state"===e.operation)return s(t,e.position,e.closed);else if("update_item_position"===e.operation)return l(t,e.src,e.dst);else if("remove_item"===e.operation)return n(t,e.position);else if("remove_tasklist_block"===e.operation)return r(t,e.position);else if("update_tasklist_title"===e.operation)return u(t,e.position,e.name);return null}async function n(t){let{transformToHTML:e}=await Promise.all([i.e("vendors-node_modules_micromark_index_js-node_modules_remark-gfm_index_js-node_modules_remark_-2e1650"),i.e("ui_packages_tasklist-block-operations_operations_ts")]).then(i.bind(i,77914));return e(t)}function r(t){return"append_item"===t.operation}i.d(e,{Oh:()=>n,hJ:()=>r,nj:()=>o})}}]);
//# sourceMappingURL=app_components_tracking_blocks_tasklist-block-title-element_ts-f27d1646964c.js.map