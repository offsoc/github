"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["single-sign-on-dropdown-partial"],{40846:(e,t,r)=>{var n=r(72245),i=r(9449),s=r(87726);function o(e){let t=e?.sso_organizations??[];if(0===t.length)return null;let r=t.map(e=>e.login).filter(e=>void 0!==e);return(0,i.jsx)(s.x,{sx:{flexDirection:["column","column","row"],alignItems:["flex-start","flex-start","center"],py:2},protectedOrgs:r})}try{o.displayName||(o.displayName="SingleSignOnDropdownPartial")}catch{}(0,n.k)("single-sign-on-dropdown-partial",{Component:o})},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new n),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let n=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>s,QJ:()=>o,w8:()=>i});var n=r(55293);function i(e){return((0,n.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function s(e){let t=(0,n.useRef)(e.__wrapperElement.anchor||null),[r,i]=(0,n.useState)(!1),s=(0,n.useCallback)(()=>{i(!r)},[r,i]);return(0,n.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),o(e,s),{ref:t,open:r,setOpen:i}}function o(e,t){let r=(0,n.useRef)(e.__wrapperElement.anchor);(0,n.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let n=new(r(92536)).R;var i=r(9449),s=r(39595),o=r(24508),a=r(23235);let l=class ReactPartialElement extends o.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,n.getRegistration(t)),s=this.closest("react-partial-anchor");return(0,i.jsx)(a.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:s})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){n.register(e,t)}l=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([s.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>a});let{getItem:n,setItem:i,removeItem:s}=(0,r(74572).A)("localStorage"),o="REACT_PROFILING_ENABLED",a={enable:()=>i(o,"true"),disable:()=>s(o),isEnabled:()=>!!n(o)}},23235:(e,t,r)=>{r.d(t,{c:()=>p});var n=r(9449),i=r(55293),s=r(36165),o=r(45588),a=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,s]=(0,i.useState)({location:t.location});return(0,c.m)(()=>t.listen(s),[t]),(0,n.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var h=r(17857),u=r(51261),m=r(75014);function p({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:p}){let _=i.useRef(),g=globalThis.window;_.current||(_.current=g?(0,u.z)({window:g}):(0,o.sC)({initialEntries:[{pathname:"/"}]}));let f=_.current,R=(0,m.w8)(p);return(0,n.jsx)(s.U,{appName:e,wasServerRendered:l,children:(0,n.jsx)(a.Q,{history:f,routes:[],children:(0,n.jsxs)(d,{history:f,children:[(0,n.jsx)(r,{...t.props,...R}),(0,n.jsx)(h.h,{ssrError:c})]})})})}try{p.displayName||(p.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var n=r(9449),i=r(39595),s=r(34613),o=r(55293),a=r(23581),l=r(79461),c=r(51528);function d(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}let h=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:s.createRoot,hydrateRoot:s.hydrateRoot};a.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,i=await this.getReactNode(t),l=(0,n.jsx)(o.StrictMode,{children:i});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=h.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87358,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:n,lineno:i,colno:s}=e,o=`${t} at ${r} (${n}:${i}:${s})`;return t=" ",o}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([i.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([i.aC],ReactBaseElement.prototype,"ssrError",void 0),d([i.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{h.displayName||(h.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}},87726:(e,t,r)=>{r.d(t,{x:()=>u});var n=r(9449),i=r(59857),s=r(75177),o=r(65481),a=r(30729),l=r(86519),c=r(281),d=r(17909),h=r(47767);function u({protectedOrgs:e,redirectURI:t,sx:r}){let c=(0,h.zy)();if(!e||0===e.length)return null;let d=(0,n.jsx)("b",{children:e.slice(0,3).join(", ")});return 2===e.length&&(d=(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:e[0]})," and ",(0,n.jsx)("b",{children:e[1]})]})),3===e.length&&(d=(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:e.slice(0,2).join(", ")}),", and ",(0,n.jsx)("b",{children:e[2]})]})),(0,n.jsx)(s.A,{sx:r,"data-testid":"sso-banner",children:(0,n.jsx)(s.A,{sx:{fontSize:1},children:(0,n.jsx)("section",{"aria-label":"Single sign on information",children:(0,n.jsx)(o.A,{sx:{p:3,borderRadius:2,borderWidth:1,borderStyle:"solid",borderColor:"accent.muted",fontSize:1},children:1===e.length?(0,n.jsxs)("div",{children:[(0,n.jsx)(a.A,{icon:i.ShieldLockIcon}),(0,n.jsx)(l.A,{inline:!0,href:`/orgs/${e[0]}/sso?return_to=${p({location:c,redirectURI:t})}`,children:"Single sign-on"}),"\xa0to see results in the ",(0,n.jsx)("b",{children:e[0]})," organization."]}):(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"baseline",flexWrap:"wrap",gap:2},children:[(0,n.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,n.jsx)(a.A,{icon:i.ShieldLockIcon}),"Single sign on to see results in the ",d," ",e.length>3?`and ${e.length-3} other `:"",e.length>1?"organizations":"organization","."]}),(0,n.jsx)(s.A,{sx:{mt:[2,2,0]},children:(0,n.jsx)(m,{protectedOrgs:e,redirectURI:t})})]})})})})})}function m({protectedOrgs:e,redirectURI:t}){let r=(0,h.zy)();return(0,n.jsxs)(c.W,{children:[(0,n.jsx)(c.W.Button,{size:"small",children:"Select an organization"}),(0,n.jsx)(c.W.Overlay,{children:(0,n.jsx)(d.l,{children:e.map(e=>(0,n.jsx)(d.l.Item,{onSelect:()=>window.location.href=`/orgs/${e}/sso?return_to=${p({location:r,redirectURI:t})}`,children:e},`org-${e}`))})})]})}function p({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{u.displayName||(u.displayName="SingleSignOnBanner")}catch{}try{m.displayName||(m.displayName="SingleSignOnButton")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-ef6903","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(40846)),e.O()}]);
//# sourceMappingURL=single-sign-on-dropdown-partial-3ed6c63eedc6.js.map