<html>
<head>
    <title>450.html</title>
    <link href="./example.css" rel="stylesheet" type="text/css">
</head>
<body>

  <div class="example prose-diff">
    <h2>should not time out</h2>

    <div class="before">
      <article class="markdown-body entry-content" itemprop="mainContentOfPage"><div>
      <div>
      <h1>
      <a name="environment-variables-and-ini-file-settings" class="anchor" href="#environment-variables-and-ini-file-settings"><span class="octicon octicon-link"></span></a>Environment Variables and <tt>.ini</tt> File Settings</h1>
      <p><a href="#id1">:app:`Pyramid`</a> behavior can be configured through a combination of
      operating system environment variables and <tt>.ini</tt> configuration file
      application section settings.  The meaning of the environment
      variables and the configuration file settings overlap.</p>
      <div>
      <p>Note</p>
      <p>Where a configuration file setting exists with the same
      meaning as an environment variable, and both are present at
      application startup time, the environment variable setting
      takes precedence.</p>
      </div>
      <p>The term "configuration file setting name" refers to a key in the
      <tt>.ini</tt> configuration for your application.  The configuration file
      setting names documented in this chapter are reserved for
      <a href="#id3">:app:`Pyramid`</a> use.  You should not use them to indicate
      application-specific configuration settings.</p>
      <div>
      <h2>
      <a name="reloading-templates" class="anchor" href="#reloading-templates"><span class="octicon octicon-link"></span></a>Reloading Templates</h2>
      <p>When this value is true, templates are automatically reloaded whenever
      they are modified without restarting the application, so you can see
      changes to templates take effect immediately during development.  This
      flag is meaningful to Chameleon and Mako templates, as well as most
      third-party template rendering extensions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_TEMPLATES</tt></td>
      <td><dl>
      <dt><tt>pyramid.reload_templates</tt></dt>
      <dd>or <tt>reload_templates</tt>
      </dd>
      </dl></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="reloading-assets" class="anchor" href="#reloading-assets"><span class="octicon octicon-link"></span></a>Reloading Assets</h2>
      <p>Don't cache any asset file data when this value is true.  See
      also <a href="#id5">:ref:`overriding_assets_section`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_ASSETS</tt></td>
      <td>
      <tt>pyramid.reload_assets</tt>
      or <tt>reload_assets</tt>
      </td>
      </tr></tbody>
      </table>
      <div>
      <p>Note</p>
      <p>For backwards compatibility purposes, aliases can be
      used for configurating asset reloading: <tt>PYRAMID_RELOAD_RESOURCES</tt> (envvar)
      and <tt>pyramid.reload_resources</tt> (config file).</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="debugging-authorization" class="anchor" href="#debugging-authorization"><span class="octicon octicon-link"></span></a>Debugging Authorization</h2>
      <p>Print view authorization failure and success information to stderr
      when this value is true.  See also <a href="#id7">:ref:`debug_authorization_section`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_AUTHORIZATION</tt></td>
      <td>
      <tt>pyramid.debug_authorization</tt>
      or <tt>debug_authorization</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-not-found-errors" class="anchor" href="#debugging-not-found-errors"><span class="octicon octicon-link"></span></a>Debugging Not Found Errors</h2>
      <p>Print view-related <tt>NotFound</tt> debug messages to stderr
      when this value is true.  See also <a href="#id9">:ref:`debug_notfound_section`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_NOTFOUND</tt></td>
      <td>
      <tt>pyramid.debug_notfound</tt>
      or <tt>debug_notfound</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-route-matching" class="anchor" href="#debugging-route-matching"><span class="octicon octicon-link"></span></a>Debugging Route Matching</h2>
      <p>Print debugging messages related to <a href="#id11">:term:`url dispatch`</a> route matching when
      this value is true.  See also <a href="#id13">:ref:`debug_routematch_section`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_ROUTEMATCH</tt></td>
      <td>
      <tt>pyramid.debug_routematch</tt>
      or <tt>debug_routematch</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="preventing-http-caching" class="anchor" href="#preventing-http-caching"><span class="octicon octicon-link"></span></a>Preventing HTTP Caching</h2>
      <p>Prevent the <tt>http_cache</tt> view configuration argument from having any effect
      globally in this process when this value is true.  No http caching-related
      response headers will be set by the Pyramid <tt>http_cache</tt> view configuration
      feature when this is true.  See also <a href="#id16">:ref:`influencing_http_caching`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_PREVENT_HTTP_CACHE</tt></td>
      <td>
      <tt>pyramid.prevent_http_cache</tt>
      or <tt>prevent_http_cache</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-all" class="anchor" href="#debugging-all"><span class="octicon octicon-link"></span></a>Debugging All</h2>
      <p>Turns on all <tt>debug*</tt> settings.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_ALL</tt></td>
      <td>
      <tt>pyramid.debug_all</tt>
      or <tt>debug_all</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="reloading-all" class="anchor" href="#reloading-all"><span class="octicon octicon-link"></span></a>Reloading All</h2>
      <p>Turns on all <tt>reload*</tt> settings.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_ALL</tt></td>
      <td>
      <tt>pyramid.reload_all</tt>
      or <tt>reload_all</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="default-locale-name" class="anchor" href="#default-locale-name"><span class="octicon octicon-link"></span></a>Default Locale Name</h2>
      <p>The value supplied here is used as the default locale name when a
      <a href="#id18">:term:`locale negotiator`</a> is not registered.  See also
      <a href="#id20">:ref:`localization_deployment_settings`</a>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEFAULT_LOCALE_NAME</tt></td>
      <td>
      <tt>pyramid.default_locale_name</tt>
      or <tt>default_locale_name</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="including-packages" class="anchor" href="#including-packages"><span class="octicon octicon-link"></span></a>Including Packages</h2>
      <p><tt>pyramid.includes</tt> instructs your application to include other packages.
      Using the setting is equivalent to using the
      <a href="#id23">:meth:`pyramid.config.Configurator.include`</a> method.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>pyramid.includes</tt></td>
      </tr></tbody>
      </table>
      <p>The value assigned to <tt>pyramid.includes</tt> should be a sequence.  The
      sequence can take several different forms.</p>
      <ol>
      <li>
      <p>It can be a string.</p>
      <p>If it is a string, the package names can be separated by spaces:</p>
      <pre>package1 package2 package3
      </pre>
      <p>The package names can also be separated by carriage returns:</p>
      <pre>package1
      package2
      package3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['package1', 'package2', 'package3']
      </pre>
      </li>
      </ol>
      <p>Each value in the sequence should be a <a href="#id25">:term:`dotted Python name`</a>.</p>
      <div>
      <h3>
      <a name="pyramidincludes-vs-methpyramidconfigconfiguratorinclude" class="anchor" href="#pyramidincludes-vs-methpyramidconfigconfiguratorinclude"><span class="octicon octicon-link"></span></a><tt>pyramid.includes</tt> vs. <a href="#id27">:meth:`pyramid.config.Configurator.include`</a>
      </h3>
      <p>Two methods exist for including packages: <tt>pyramid.includes</tt> and
      <a href="#id29">:meth:`pyramid.config.Configurator.include`</a>.  This section explains their
      equivalence.</p>
      <div>
      <h4>
      <a name="using-pastedeploy" class="anchor" href="#using-pastedeploy"><span class="octicon octicon-link"></span></a>Using PasteDeploy</h4>
      <p>Using the following <tt>pyramid.includes</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="na">pyramid.includes</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar</span>
      <span class="s">                   pyramid_tm</span>
      </pre></div>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      <div>
      <h4>
      <a name="plain-python" class="anchor" href="#plain-python"><span class="octicon octicon-link"></span></a>Plain Python</h4>
      <p>Using the following <tt>pyramid.includes</tt> setting in your plain-Python Pyramid
      application:</p>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      </div>
      </div>
      <div>
      <h2>
      <a name="explicit-tween-configuration" class="anchor" href="#explicit-tween-configuration"><span class="octicon octicon-link"></span></a>Explicit Tween Configuration</h2>
      <p>This value allows you to perform explicit <a href="#id31">:term:`tween`</a> ordering in your
      configuration.  Tweens are bits of code used by add-on authors to extend
      Pyramid.  They form a chain, and require ordering.</p>
      <p>Ideally, you won't need to use the <tt>pyramid.tweens</tt> setting at all.  Tweens
      are generally ordered and included "implicitly" when an add-on package which
      registers a tween is "included".  Packages are included when you name a
      <tt>pyramid.includes</tt> setting in your configuration or when you call
      <a href="#id33">:meth:`pyramid.config.Configurator.include`</a>.</p>
      <p>Authors of included add-ons provide "implicit" tween configuration ordering
      hints to Pyramid when their packages are included.  However, the implicit
      tween ordering is only best-effort.  Pyramid will attempt to provide an
      implicit order of tweens as best it can using hints provided by add-on
      authors, but because it's only best-effort, if very precise tween ordering is
      required, the only surefire way to get it is to use an explicit tween order.
      You may be required to inspect your tween ordering (see
      <a href="#id35">:ref:`displaying_tweens`</a>) and add a <tt>pyramid.tweens</tt> configuration value at
      the behest of an add-on author.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>pyramid.tweens</tt></td>
      </tr></tbody>
      </table>
      <p>The value assigned to <tt>pyramid.tweens</tt> should be a sequence.  The
      sequence can take several different forms.</p>
      <ol>
      <li>
      <p>It can be a string.</p>
      <p>If it is a string, the tween names can be separated by spaces:</p>
      <pre>  pkg.tween_factory1 pkg.tween_factory2 pkg.tween_factory3

      The tween names can also be separated by carriage returns::

         pkg.tween_factory1
         pkg.tween_factory2
         pkg.tween_factory3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['pkg.tween_factory1', 'pkg.tween_factory2', 'pkg.tween_factory3']
      </pre>
      </li>
      </ol>
      <p>Each value in the sequence should be a <a href="#id37">:term:`dotted Python name`</a>.</p>
      <div>
      <h3>
      <a name="pastedeploy-configuration-vs-plain-python-configuration" class="anchor" href="#pastedeploy-configuration-vs-plain-python-configuration"><span class="octicon octicon-link"></span></a>PasteDeploy Configuration vs. Plain-Python Configuration</h3>
      <p>Using the following <tt>pyramid.tweens</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="na">pyramid.tweens</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar.toolbar.tween_factory</span>
      <span class="s">                 pyramid.tweens.excview_tween_factory</span>
      <span class="s">                 pyramid_tm.tm_tween_factory</span>
      </pre></div>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="mako-template-render-settings" class="anchor" href="#mako-template-render-settings"><span class="octicon octicon-link"></span></a>Mako Template Render Settings</h2>
      <p>Mako derives additional settings to configure its template renderer that
      should be set when using it. Many of these settings are optional and only need
      to be set if they should be different from the default. The Mako Template
      Renderer uses a subclass of Mako's <a href="http://www.makotemplates.org/docs/usage.html#usage_lookup">template lookup</a> and accepts
      several arguments to configure it.</p>
      <div>
      <h3>
      <a name="mako-directories" class="anchor" href="#mako-directories"><span class="octicon octicon-link"></span></a>Mako Directories</h3>
      <p>The value(s) supplied here are passed in as the template directories. They
      should be in <a href="#id39">:term:`asset specification`</a> format, for example:
      <tt>my.package:templates</tt>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.directories</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-module-directory" class="anchor" href="#mako-module-directory"><span class="octicon octicon-link"></span></a>Mako Module Directory</h3>
      <p>The value supplied here tells Mako where to store compiled Mako templates. If
      omitted, compiled templates will be stored in memory. This value should be an
      absolute path, for example: <tt>%(here)s/data/templates</tt> would use a directory
      called <tt>data/templates</tt> in the same parent directory as the INI file.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.module_directory</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-input-encoding" class="anchor" href="#mako-input-encoding"><span class="octicon octicon-link"></span></a>Mako Input Encoding</h3>
      <p>The encoding that Mako templates are assumed to have. By default this is set
      to <tt>utf-8</tt>. If you wish to use a different template encoding, this value
      should be changed accordingly.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.input_encoding</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-error-handler" class="anchor" href="#mako-error-handler"><span class="octicon octicon-link"></span></a>Mako Error Handler</h3>
      <p>A callable (or a <a href="#id41">:term:`dotted Python name`</a> which names a callable) which is
      called whenever Mako compile or runtime exceptions occur. The callable is
      passed the current context as well as the exception. If the callable returns
      True, the exception is considered to be handled, else it is re-raised after
      the function completes. Is used to provide custom error-rendering functions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.error_handler</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-default-filters" class="anchor" href="#mako-default-filters"><span class="octicon octicon-link"></span></a>Mako Default Filters</h3>
      <p>List of string filter names that will be applied to all Mako expressions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.default_filters</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-import" class="anchor" href="#mako-import"><span class="octicon octicon-link"></span></a>Mako Import</h3>
      <p>String list of Python statements, typically individual "import" lines, which
      will be placed into the module level preamble of all generated Python modules.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.imports</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-strict-undefined" class="anchor" href="#mako-strict-undefined"><span class="octicon octicon-link"></span></a>Mako Strict Undefined</h3>
      <p><tt>true</tt> or <tt>false</tt>, representing the "strict undefined" behavior of Mako
      (see <a href="http://www.makotemplates.org/docs/runtime.html#context-variables">Mako Context Variables</a>).  By
      default, this is <tt>false</tt>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.strict_undefined</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-preprocessor" class="anchor" href="#mako-preprocessor"><span class="octicon octicon-link"></span></a>Mako Preprocessor</h3>
      <p>A callable (or a <a href="#id43">:term:`dotted Python name`</a> which names a callable) which is
      called to preprocess the source before the template is called.  The callable
      will be passed the full template source before it is parsed. The return
      result of the callable will be used as the template source code.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.preprocessor</tt></td>
      </tr></tbody>
      </table>
      </div>
      </div>
      <div>
      <h2>
      <a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>
      <p>Let's presume your configuration file is named <tt>MyProject.ini</tt>, and
      there is a section representing your application named <tt>[app:main]</tt>
      within the file that represents your <a href="#id45">:app:`Pyramid`</a> application.
      The configuration file settings documented in the above "Config File
      Setting Name" column would go in the <tt>[app:main]</tt> section.  Here's
      an example of such a section:</p>
      <p>You can also use environment variables to accomplish the same purpose
      for settings documented as such.  For example, you might start your
      <a href="#id47">:app:`Pyramid`</a> application using the following command line:</p>
      <div class="highlight highlight-text"><pre>$ PYRAMID_DEBUG_AUTHORIZATION=1 PYRAMID_RELOAD_TEMPLATES=1 \
             $VENV/bin/pserve MyProject.ini
      </pre></div>
      <p>If you started your application this way, your <a href="#id49">:app:`Pyramid`</a>
      application would behave in the same manner as if you had placed the
      respective settings in the <tt>[app:main]</tt> section of your
      application's <tt>.ini</tt> file.</p>
      <p>If you want to turn all <tt>debug</tt> settings (every setting that starts
      with <tt>pyramid.debug_</tt>). on in one fell swoop, you can use
      <tt>PYRAMID_DEBUG_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.debug_all=true</tt> in the config file.  Note that this does not affect
      settings that do not start with <tt>pyramid.debug_*</tt> such as
      <tt>pyramid.reload_templates</tt>.</p>
      <p>If you want to turn all <tt>pyramid.reload</tt> settings (every setting that starts
      with <tt>pyramid.reload_</tt>) on in one fell swoop, you can use
      <tt>PYRAMID_RELOAD_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.reload_all=true</tt> in the config file.  Note that this does not
      affect settings that do not start with <tt>pyramid.reload_*</tt> such as
      <tt>pyramid.debug_notfound</tt>.</p>
      <div>
      <p>Note</p>
      <p>Specifying configuration settings via environment variables is generally
      most useful during development, where you may wish to augment or
      override the more permanent settings in the configuration file.
      This is useful because many of the reload and debug settings may
      have performance or security (i.e., disclosure) implications
      that make them undesirable in a production environment.</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="understanding-the-distinction-between-reload_templates-and-reload_assets" class="anchor" href="#understanding-the-distinction-between-reload_templates-and-reload_assets"><span class="octicon octicon-link"></span></a>Understanding the Distinction Between <tt>reload_templates</tt> and <tt>reload_assets</tt>
      </h2>
      <p>The difference between <tt>pyramid.reload_assets</tt> and
      <tt>pyramid.reload_templates</tt> is a bit subtle. Templates are themselves also
      treated by <a href="#id51">:app:`Pyramid`</a> as asset files (along with other static files), so the
      distinction can be confusing.  It's helpful to read
      <a href="#id53">:ref:`overriding_assets_section`</a> for some context about assets in general.</p>
      <p>When <tt>pyramid.reload_templates</tt> is true, <a href="#id55">:app:`Pyramid`</a> takes advantage of the
      underlying templating systems' ability to check for file modifications to an
      individual template file.  When <tt>pyramid.reload_templates</tt> is true but
      <tt>pyramid.reload_assets</tt> is <em>not</em> true, the template filename returned by the
      <tt>pkg_resources</tt> package (used under the hood by asset resolution) is cached
      by <a href="#id57">:app:`Pyramid`</a> on the first request.  Subsequent requests for the same
      template file will return a cached template filename.  The underlying
      templating system checks for modifications to this particular file for every
      request.  Setting <tt>pyramid.reload_templates</tt> to <tt>True</tt> doesn't affect
      performance dramatically (although it should still not be used in production
      because it has some effect).</p>
      <p>However, when <tt>pyramid.reload_assets</tt> is true, <a href="#id59">:app:`Pyramid`</a> will not cache
      the template filename, meaning you can see the effect of changing the content
      of an overridden asset directory for templates without restarting the server
      after every change.  Subsequent requests for the same template file may
      return different filenames based on the current state of overridden asset
      directories. Setting <tt>pyramid.reload_assets</tt> to <tt>True</tt> affects performance
      <em>dramatically</em>, slowing things down by an order of magnitude for each
      template rendering.  However, it's convenient to enable when moving files
      around in overridden asset directories. <tt>pyramid.reload_assets</tt> makes the
      system <em>very slow</em> when templates are in use.  Never set
      <tt>pyramid.reload_assets</tt> to <tt>True</tt> on a production system.</p>
      </div>
      <div>
      <h2>
      <a name="adding-a-custom-setting" class="anchor" href="#adding-a-custom-setting"><span class="octicon octicon-link"></span></a>Adding A Custom Setting</h2>
      <p>From time to time, you may need to add a custom setting to your application.
      Here's how:</p>
      <ul>
      <li>
      <p>If you're using an <tt>.ini</tt> file, change the <tt>.ini</tt> file, adding the
      setting to the <tt>[app:foo]</tt> section representing your Pyramid application.
      For example:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="c1"># .. other settings</span>
      <span class="na">debug_frobnosticator</span> <span class="o">=</span> <span class="s">True</span>
      </pre></div>
      </li>
      <li>
      <p>In the <tt>main()</tt> function that represents the place that your Pyramid WSGI
      application is created, anticipate that you'll be getting this key/value
      pair as a setting and do any type conversion necessary.</p>
      <p>If you've done any type conversion of your custom value, reset the
      converted values into the <tt>settings</tt> dictionary <em>before</em> you pass the
      dictionary as <tt>settings</tt> to the <a href="#id62">:term:`Configurator`</a>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
          <span class="c"># ...</span>
          <span class="kn">from</span> <span class="nn">pyramid.settings</span> <span class="kn">import</span> <span class="n">asbool</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">asbool</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                     <span class="s">'debug_frobnosticator'</span><span class="p">,</span> <span class="s">'false'</span><span class="p">))</span>
          <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span> <span class="o">=</span> <span class="n">debug_frobnosticator</span>
          <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
      </pre></div>
      <div>
      <p>Note</p>
      <p>It's especially important that you mutate the <tt>settings</tt>
      dictionary with the converted version of the variable <em>before</em> passing
      it to the Configurator: the configurator makes a <em>copy</em> of <tt>settings</tt>,
      it doesn't use the one you pass directly.</p>
      </div>
      </li>
      <li>
      <p>When creating an <tt>includeme</tt> function that will be later added to your
      application's configuration you may access the <tt>settings</tt> dictionary
      through the instance of the <a href="#id64">:term:`Configurator`</a> that is passed into the
      function as its only argument.  For Example:</p>
      </li>
      </ul>
      <blockquote>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
          <span class="n">settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </blockquote>
      <ul>
      <li>
      <p>In the runtime code from where you need to access the new settings value,
      find the value in the <tt>registry.settings</tt> dictionary and use it.  In
      <a href="#id66">:term:`view`</a> code (or any other code that has access to the request), the
      easiest way to do this is via <tt>request.registry.settings</tt>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">settings</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      <p>If you wish to use the value in code that does not have access to the
      request and you wish to use the value, you'll need to use the
      <a href="#id68">:func:`pyramid.threadlocal.get_current_registry`</a> API to obtain the current
      registry, then ask for its <tt>settings</tt> attribute.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">registry</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">threadlocal</span><span class="o">.</span><span class="n">get_current_registry</span><span class="p">()</span>
      <span class="n">settings</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </li>
      </ul>
      </div>
      </div>
      </div></article>
    </div>

    <div class="after">
      <article class="markdown-body entry-content" itemprop="mainContentOfPage"><div>
      <div>
      <h1>
      <a name="environment-variables-and-ini-file-settings" class="anchor" href="#environment-variables-and-ini-file-settings"><span class="octicon octicon-link"></span></a>Environment Variables and <tt>.ini</tt> File Settings</h1>
      <p><a href="#id1">:app:`Pyramid`</a> behavior can be configured through a combination of
      operating system environment variables and <tt>.ini</tt> configuration file
      application section settings.  The meaning of the environment
      variables and the configuration file settings overlap.</p>
      <div>
      <p>Note</p>
      <p>Where a configuration file setting exists with the same
      meaning as an environment variable, and both are present at
      application startup time, the environment variable setting
      takes precedence.</p>
      </div>
      <p>The term "configuration file setting name" refers to a key in the
      <tt>.ini</tt> configuration for your application.  The configuration file
      setting names documented in this chapter are reserved for
      <a href="#id3">:app:`Pyramid`</a> use.  You should not use them to indicate
      application-specific configuration settings.</p>
      <div>
      <h2>
      <a name="reloading-templates" class="anchor" href="#reloading-templates"><span class="octicon octicon-link"></span></a>Reloading Templates</h2>
      <p>When this value is true, templates are automatically reloaded whenever
      they are modified without restarting the application, so you can see
      changes to templates take effect immediately during development.  This
      flag is meaningful to Chameleon and Mako templates, as well as most
      third-party template rendering extensions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_TEMPLATES</tt></td>
      <td><dl>
      <dt><tt>pyramid.reload_templates</tt></dt>
      <dd>or <tt>reload_templates</tt>
      </dd>
      </dl></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="reloading-assets" class="anchor" href="#reloading-assets"><span class="octicon octicon-link"></span></a>Reloading Assets</h2>
      <p>Don't cache any asset file data when this value is true.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_ASSETS</tt></td>
      <td>
      <tt>pyramid.reload_assets</tt>
      or <tt>reload_assets</tt>
      </td>
      </tr></tbody>
      </table>
      <div>
      <p>Note</p>
      <p>For backwards compatibility purposes, aliases can be
      used for configurating asset reloading: <tt>PYRAMID_RELOAD_RESOURCES</tt> (envvar)
      and <tt>pyramid.reload_resources</tt> (config file).</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="debugging-authorization" class="anchor" href="#debugging-authorization"><span class="octicon octicon-link"></span></a>Debugging Authorization</h2>
      <p>Print view authorization failure and success information to stderr
      when this value is true.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_AUTHORIZATION</tt></td>
      <td>
      <tt>pyramid.debug_authorization</tt>
      or <tt>debug_authorization</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-not-found-errors" class="anchor" href="#debugging-not-found-errors"><span class="octicon octicon-link"></span></a>Debugging Not Found Errors</h2>
      <p>Print view-related <tt>NotFound</tt> debug messages to stderr
      when this value is true.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_NOTFOUND</tt></td>
      <td>
      <tt>pyramid.debug_notfound</tt>
      or <tt>debug_notfound</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-route-matching" class="anchor" href="#debugging-route-matching"><span class="octicon octicon-link"></span></a>Debugging Route Matching</h2>
      <p>Print debugging messages related to <a href="#id5">:term:`url dispatch`</a> route matching when
      this value is true.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_ROUTEMATCH</tt></td>
      <td>
      <tt>pyramid.debug_routematch</tt>
      or <tt>debug_routematch</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="preventing-http-caching" class="anchor" href="#preventing-http-caching"><span class="octicon octicon-link"></span></a>Preventing HTTP Caching</h2>
      <p>Prevent the <tt>http_cache</tt> view configuration argument from having any effect
      globally in this process when this value is true.  No http caching-related
      response headers will be set by the Pyramid <tt>http_cache</tt> view configuration
      feature when this is true.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_PREVENT_HTTP_CACHE</tt></td>
      <td>
      <tt>pyramid.prevent_http_cache</tt>
      or <tt>prevent_http_cache</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="debugging-all" class="anchor" href="#debugging-all"><span class="octicon octicon-link"></span></a>Debugging All</h2>
      <p>Turns on all <tt>debug*</tt> settings.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEBUG_ALL</tt></td>
      <td>
      <tt>pyramid.debug_all</tt>
      or <tt>debug_all</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="reloading-all" class="anchor" href="#reloading-all"><span class="octicon octicon-link"></span></a>Reloading All</h2>
      <p>Turns on all <tt>reload*</tt> settings.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_RELOAD_ALL</tt></td>
      <td>
      <tt>pyramid.reload_all</tt>
      or <tt>reload_all</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="default-locale-name" class="anchor" href="#default-locale-name"><span class="octicon octicon-link"></span></a>Default Locale Name</h2>
      <p>The value supplied here is used as the default locale name when a
      <a href="#id8">:term:`locale negotiator`</a> is not registered.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>PYRAMID_DEFAULT_LOCALE_NAME</tt></td>
      <td>
      <tt>pyramid.default_locale_name</tt>
      or <tt>default_locale_name</tt>
      </td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h2>
      <a name="including-packages" class="anchor" href="#including-packages"><span class="octicon octicon-link"></span></a>Including Packages</h2>
      <p><tt>pyramid.includes</tt> instructs your application to include other packages.
      Using the setting is equivalent to using the
      <a href="#id11">:meth:`pyramid.config.Configurator.include`</a> method.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>pyramid.includes</tt></td>
      </tr></tbody>
      </table>
      <p>The value assigned to <tt>pyramid.includes</tt> should be a sequence.  The
      sequence can take several different forms.</p>
      <ol>
      <li>
      <p>It can be a string.</p>
      <p>If it is a string, the package names can be separated by spaces:</p>
      <pre>package1 package2 package3
      </pre>
      <p>The package names can also be separated by carriage returns:</p>
      <pre>package1
      package2
      package3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['package1', 'package2', 'package3']
      </pre>
      </li>
      </ol>
      <p>Each value in the sequence should be a <a href="#id13">:term:`dotted Python name`</a>.</p>
      <div>
      <h3>
      <a name="pyramidincludes-vs-methpyramidconfigconfiguratorinclude" class="anchor" href="#pyramidincludes-vs-methpyramidconfigconfiguratorinclude"><span class="octicon octicon-link"></span></a><tt>pyramid.includes</tt> vs. <a href="#id15">:meth:`pyramid.config.Configurator.include`</a>
      </h3>
      <p>Two methods exist for including packages: <tt>pyramid.includes</tt> and
      <a href="#id17">:meth:`pyramid.config.Configurator.include`</a>.  This section explains their
      equivalence.</p>
      <div>
      <h4>
      <a name="using-pastedeploy" class="anchor" href="#using-pastedeploy"><span class="octicon octicon-link"></span></a>Using PasteDeploy</h4>
      <p>Using the following <tt>pyramid.includes</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="na">pyramid.includes</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar</span>
      <span class="s">                   pyramid_tm</span>
      </pre></div>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      <div>
      <h4>
      <a name="plain-python" class="anchor" href="#plain-python"><span class="octicon octicon-link"></span></a>Plain Python</h4>
      <p>Using the following <tt>pyramid.includes</tt> setting in your plain-Python Pyramid
      application:</p>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      </div>
      </div>
      <div>
      <h2>
      <a name="explicit-tween-configuration" class="anchor" href="#explicit-tween-configuration"><span class="octicon octicon-link"></span></a>Explicit Tween Configuration</h2>
      <p>This value allows you to perform explicit <a href="#id19">:term:`tween`</a> ordering in your
      configuration.  Tweens are bits of code used by add-on authors to extend
      Pyramid.  They form a chain, and require ordering.</p>
      <p>Ideally, you won't need to use the <tt>pyramid.tweens</tt> setting at all.  Tweens
      are generally ordered and included "implicitly" when an add-on package which
      registers a tween is "included".  Packages are included when you name a
      <tt>pyramid.includes</tt> setting in your configuration or when you call
      <a href="#id21">:meth:`pyramid.config.Configurator.include`</a>.</p>
      <p>Authors of included add-ons provide "implicit" tween configuration ordering
      hints to Pyramid when their packages are included.  However, the implicit
      tween ordering is only best-effort.  Pyramid will attempt to provide an
      implicit order of tweens as best it can using hints provided by add-on
      authors, but because it's only best-effort, if very precise tween ordering is
      required, the only surefire way to get it is to use an explicit tween order.
      You may be required to inspect your tween ordering (see
      <a href="#id23">:ref:`displaying_tweens`</a>) and add a <tt>pyramid.tweens</tt> configuration value at
      the behest of an add-on author.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>pyramid.tweens</tt></td>
      </tr></tbody>
      </table>
      <p>The value assigned to <tt>pyramid.tweens</tt> should be a sequence.  The
      sequence can take several different forms.</p>
      <ol>
      <li>
      <p>It can be a string.</p>
      <p>If it is a string, the tween names can be separated by spaces:</p>
      <pre>  pkg.tween_factory1 pkg.tween_factory2 pkg.tween_factory3

      The tween names can also be separated by carriage returns::

         pkg.tween_factory1
         pkg.tween_factory2
         pkg.tween_factory3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['pkg.tween_factory1', 'pkg.tween_factory2', 'pkg.tween_factory3']
      </pre>
      </li>
      </ol>
      <p>Each value in the sequence should be a <a href="#id25">:term:`dotted Python name`</a>.</p>
      <div>
      <h3>
      <a name="pastedeploy-configuration-vs-plain-python-configuration" class="anchor" href="#pastedeploy-configuration-vs-plain-python-configuration"><span class="octicon octicon-link"></span></a>PasteDeploy Configuration vs. Plain-Python Configuration</h3>
      <p>Using the following <tt>pyramid.tweens</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="na">pyramid.tweens</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar.toolbar.tween_factory</span>
      <span class="s">                 pyramid.tweens.excview_tween_factory</span>
      <span class="s">                 pyramid_tm.tm_tween_factory</span>
      </pre></div>
      <p>Is equivalent to using the following statements in your configuration code:</p>
      <p>It is fine to use both or either form.</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="mako-template-render-settings" class="anchor" href="#mako-template-render-settings"><span class="octicon octicon-link"></span></a>Mako Template Render Settings</h2>
      <p>Mako derives additional settings to configure its template renderer that
      should be set when using it. Many of these settings are optional and only need
      to be set if they should be different from the default. The Mako Template
      Renderer uses a subclass of Mako's <a href="http://www.makotemplates.org/docs/usage.html#usage_lookup">template lookup</a> and accepts
      several arguments to configure it.</p>
      <div>
      <h3>
      <a name="mako-directories" class="anchor" href="#mako-directories"><span class="octicon octicon-link"></span></a>Mako Directories</h3>
      <p>The value(s) supplied here are passed in as the template directories. They
      should be in <a href="#id27">:term:`asset specification`</a> format, for example:
      <tt>my.package:templates</tt>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.directories</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-module-directory" class="anchor" href="#mako-module-directory"><span class="octicon octicon-link"></span></a>Mako Module Directory</h3>
      <p>The value supplied here tells Mako where to store compiled Mako templates. If
      omitted, compiled templates will be stored in memory. This value should be an
      absolute path, for example: <tt>%(here)s/data/templates</tt> would use a directory
      called <tt>data/templates</tt> in the same parent directory as the INI file.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.module_directory</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-input-encoding" class="anchor" href="#mako-input-encoding"><span class="octicon octicon-link"></span></a>Mako Input Encoding</h3>
      <p>The encoding that Mako templates are assumed to have. By default this is set
      to <tt>utf-8</tt>. If you wish to use a different template encoding, this value
      should be changed accordingly.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.input_encoding</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-error-handler" class="anchor" href="#mako-error-handler"><span class="octicon octicon-link"></span></a>Mako Error Handler</h3>
      <p>A callable (or a <a href="#id29">:term:`dotted Python name`</a> which names a callable) which is
      called whenever Mako compile or runtime exceptions occur. The callable is
      passed the current context as well as the exception. If the callable returns
      True, the exception is considered to be handled, else it is re-raised after
      the function completes. Is used to provide custom error-rendering functions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.error_handler</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-default-filters" class="anchor" href="#mako-default-filters"><span class="octicon octicon-link"></span></a>Mako Default Filters</h3>
      <p>List of string filter names that will be applied to all Mako expressions.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.default_filters</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-import" class="anchor" href="#mako-import"><span class="octicon octicon-link"></span></a>Mako Import</h3>
      <p>String list of Python statements, typically individual "import" lines, which
      will be placed into the module level preamble of all generated Python modules.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.imports</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-strict-undefined" class="anchor" href="#mako-strict-undefined"><span class="octicon octicon-link"></span></a>Mako Strict Undefined</h3>
      <p><tt>true</tt> or <tt>false</tt>, representing the "strict undefined" behavior of Mako
      (see <a href="http://www.makotemplates.org/docs/runtime.html#context-variables">Mako Context Variables</a>).  By
      default, this is <tt>false</tt>.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.strict_undefined</tt></td>
      </tr></tbody>
      </table>
      </div>
      <div>
      <h3>
      <a name="mako-preprocessor" class="anchor" href="#mako-preprocessor"><span class="octicon octicon-link"></span></a>Mako Preprocessor</h3>
      <p>A callable (or a <a href="#id31">:term:`dotted Python name`</a> which names a callable) which is
      called to preprocess the source before the template is called.  The callable
      will be passed the full template source before it is parsed. The return
      result of the callable will be used as the template source code.</p>
      <table>
      <thead valign="bottom"><tr>
      <th>Config File Setting Name</th>
      </tr></thead>
      <tbody valign="top"><tr>
      <td><tt>mako.preprocessor</tt></td>
      </tr></tbody>
      </table>
      </div>
      </div>
      <div>
      <h2>
      <a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>
      <p>Let's presume your configuration file is named <tt>MyProject.ini</tt>, and
      there is a section representing your application named <tt>[app:main]</tt>
      within the file that represents your <a href="#id33">:app:`Pyramid`</a> application.
      The configuration file settings documented in the above "Config File
      Setting Name" column would go in the <tt>[app:main]</tt> section.  Here's
      an example of such a section:</p>
      <p>You can also use environment variables to accomplish the same purpose
      for settings documented as such.  For example, you might start your
      <a href="#id35">:app:`Pyramid`</a> application using the following command line:</p>
      <div class="highlight highlight-text"><pre>$ PYRAMID_DEBUG_AUTHORIZATION=1 PYRAMID_RELOAD_TEMPLATES=1 \
             $VENV/bin/pserve MyProject.ini
      </pre></div>
      <p>If you started your application this way, your <a href="#id37">:app:`Pyramid`</a>
      application would behave in the same manner as if you had placed the
      respective settings in the <tt>[app:main]</tt> section of your
      application's <tt>.ini</tt> file.</p>
      <p>If you want to turn all <tt>debug</tt> settings (every setting that starts
      with <tt>pyramid.debug_</tt>). on in one fell swoop, you can use
      <tt>PYRAMID_DEBUG_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.debug_all=true</tt> in the config file.  Note that this does not affect
      settings that do not start with <tt>pyramid.debug_*</tt> such as
      <tt>pyramid.reload_templates</tt>.</p>
      <p>If you want to turn all <tt>pyramid.reload</tt> settings (every setting that starts
      with <tt>pyramid.reload_</tt>) on in one fell swoop, you can use
      <tt>PYRAMID_RELOAD_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.reload_all=true</tt> in the config file.  Note that this does not
      affect settings that do not start with <tt>pyramid.reload_*</tt> such as
      <tt>pyramid.debug_notfound</tt>.</p>
      <div>
      <p>Note</p>
      <p>Specifying configuration settings via environment variables is generally
      most useful during development, where you may wish to augment or
      override the more permanent settings in the configuration file.
      This is useful because many of the reload and debug settings may
      have performance or security (i.e., disclosure) implications
      that make them undesirable in a production environment.</p>
      </div>
      </div>
      <div>
      <h2>
      <a name="understanding-the-distinction-between-reload_templates-and-reload_assets" class="anchor" href="#understanding-the-distinction-between-reload_templates-and-reload_assets"><span class="octicon octicon-link"></span></a>Understanding the Distinction Between <tt>reload_templates</tt> and <tt>reload_assets</tt>
      </h2>
      <p>The difference between <tt>pyramid.reload_assets</tt> and
      <tt>pyramid.reload_templates</tt> is a bit subtle. Templates are themselves also
      treated by <a href="#id39">:app:`Pyramid`</a> as asset files (along with other static files), so the
      distinction can be confusing.  It's helpful to read
      <a href="#id41">:ref:`overriding_assets_section`</a> for some context about assets in general.</p>
      <p>When <tt>pyramid.reload_templates</tt> is true, <a href="#id43">:app:`Pyramid`</a> takes advantage of the
      underlying templating systems' ability to check for file modifications to an
      individual template file.  When <tt>pyramid.reload_templates</tt> is true but
      <tt>pyramid.reload_assets</tt> is <em>not</em> true, the template filename returned by the
      <tt>pkg_resources</tt> package (used under the hood by asset resolution) is cached
      by <a href="#id45">:app:`Pyramid`</a> on the first request.  Subsequent requests for the same
      template file will return a cached template filename.  The underlying
      templating system checks for modifications to this particular file for every
      request.  Setting <tt>pyramid.reload_templates</tt> to <tt>True</tt> doesn't affect
      performance dramatically (although it should still not be used in production
      because it has some effect).</p>
      <p>However, when <tt>pyramid.reload_assets</tt> is true, <a href="#id47">:app:`Pyramid`</a> will not cache
      the template filename, meaning you can see the effect of changing the content
      of an overridden asset directory for templates without restarting the server
      after every change.  Subsequent requests for the same template file may
      return different filenames based on the current state of overridden asset
      directories. Setting <tt>pyramid.reload_assets</tt> to <tt>True</tt> affects performance
      <em>dramatically</em>, slowing things down by an order of magnitude for each
      template rendering.  However, it's convenient to enable when moving files
      around in overridden asset directories. <tt>pyramid.reload_assets</tt> makes the
      system <em>very slow</em> when templates are in use.  Never set
      <tt>pyramid.reload_assets</tt> to <tt>True</tt> on a production system.</p>
      </div>
      <div>
      <h2>
      <a name="adding-a-custom-setting" class="anchor" href="#adding-a-custom-setting"><span class="octicon octicon-link"></span></a>Adding A Custom Setting</h2>
      <p>From time to time, you may need to add a custom setting to your application.
      Here's how:</p>
      <ul>
      <li>
      <p>If you're using an <tt>.ini</tt> file, change the <tt>.ini</tt> file, adding the
      setting to the <tt>[app:foo]</tt> section representing your Pyramid application.
      For example:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="c1"># .. other settings</span>
      <span class="na">debug_frobnosticator</span> <span class="o">=</span> <span class="s">True</span>
      </pre></div>
      </li>
      <li>
      <p>In the <tt>main()</tt> function that represents the place that your Pyramid WSGI
      application is created, anticipate that you'll be getting this key/value
      pair as a setting and do any type conversion necessary.</p>
      <p>If you've done any type conversion of your custom value, reset the
      converted values into the <tt>settings</tt> dictionary <em>before</em> you pass the
      dictionary as <tt>settings</tt> to the <a href="#id50">:term:`Configurator`</a>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
          <span class="c"># ...</span>
          <span class="kn">from</span> <span class="nn">pyramid.settings</span> <span class="kn">import</span> <span class="n">asbool</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">asbool</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                     <span class="s">'debug_frobnosticator'</span><span class="p">,</span> <span class="s">'false'</span><span class="p">))</span>
          <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span> <span class="o">=</span> <span class="n">debug_frobnosticator</span>
          <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
      </pre></div>
      <div>
      <p>Note</p>
      <p>It's especially important that you mutate the <tt>settings</tt>
      dictionary with the converted version of the variable <em>before</em> passing
      it to the Configurator: the configurator makes a <em>copy</em> of <tt>settings</tt>,
      it doesn't use the one you pass directly.</p>
      </div>
      </li>
      <li>
      <p>When creating an <tt>includeme</tt> function that will be later added to your
      application's configuration you may access the <tt>settings</tt> dictionary
      through the instance of the <a href="#id52">:term:`Configurator`</a> that is passed into the
      function as its only argument.  For Example:</p>
      </li>
      </ul>
      <blockquote>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
          <span class="n">settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </blockquote>
      <ul>
      <li>
      <p>In the runtime code from where you need to access the new settings value,
      find the value in the <tt>registry.settings</tt> dictionary and use it.  In
      <a href="#id54">:term:`view`</a> code (or any other code that has access to the request), the
      easiest way to do this is via <tt>request.registry.settings</tt>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">settings</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      <p>If you wish to use the value in code that does not have access to the
      request and you wish to use the value, you'll need to use the
      <a href="#id56">:func:`pyramid.threadlocal.get_current_registry`</a> API to obtain the current
      registry, then ask for its <tt>settings</tt> attribute.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">registry</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">threadlocal</span><span class="o">.</span><span class="n">get_current_registry</span><span class="p">()</span>
      <span class="n">settings</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </li>
      </ul>
      </div>
      </div>
      </div></article>
    </div>

    <div class="diff markdown-body">

<article class="markdown-body entry-content changed" itemprop="mainContentOfPage"><div class="expandable unchanged">
<h1>
      <a name="environment-variables-and-ini-file-settings" class="anchor" href="#environment-variables-and-ini-file-settings"><span class="octicon octicon-link"></span></a>Environment Variables and <tt>.ini</tt> File Settings</h1>
<p><a href="#id1">:app:`Pyramid`</a> behavior can be configured through a combination of
      operating system environment variables and <tt>.ini</tt> configuration file
      application section settings.  The meaning of the environment
      variables and the configuration file settings overlap.</p>
<p>Note</p>
<p>Where a configuration file setting exists with the same
      meaning as an environment variable, and both are present at
      application startup time, the environment variable setting
      takes precedence.</p>
<p>The term "configuration file setting name" refers to a key in the
      <tt>.ini</tt> configuration for your application.  The configuration file
      setting names documented in this chapter are reserved for
      <a href="#id3">:app:`Pyramid`</a> use.  You should not use them to indicate
      application-specific configuration settings.</p>
<h2>
      <a name="reloading-templates" class="anchor" href="#reloading-templates"><span class="octicon octicon-link"></span></a>Reloading Templates</h2>
<p>When this value is true, templates are automatically reloaded whenever
      they are modified without restarting the application, so you can see
      changes to templates take effect immediately during development.  This
      flag is meaningful to Chameleon and Mako templates, as well as most
      third-party template rendering extensions.</p>
<table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_RELOAD_TEMPLATES</tt></td>
      <td><dl>
<dt><tt>pyramid.reload_templates</tt></dt>
      <dd>or <tt>reload_templates</tt>
      </dd>
      </dl></td>
      </tr></tbody>
</table>
</div>
<h2 class="vicinity">
      <a name="reloading-assets" class="anchor" href="#reloading-assets"><span class="octicon octicon-link"></span></a>Reloading Assets</h2>
<div class="changed"><p>Don't cache any asset file data when this value is true.<del>See also </del><del><a href="#id5">:ref:`overriding_assets_section`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_RELOAD_ASSETS</tt></td> <td> <tt>pyramid.reload_assets</tt> or <tt>reload_assets</tt> </td> </tr></tbody>
</table></div>
<p class="vicinity">Note</p>
<div class="expandable unchanged"><p>For backwards compatibility purposes, aliases can be used for configurating asset reloading: <tt>PYRAMID_RELOAD_RESOURCES</tt> (envvar) and <tt>pyramid.reload_resources</tt> (config file).</p></div>
<h2 class="vicinity"> <a name="debugging-authorization" class="anchor" href="#debugging-authorization"><span class="octicon octicon-link"></span></a>Debugging Authorization</h2>
<div class="changed"><p>Print view authorization failure and success information to stderr when this value is true.<del>See also </del><del><a href="#id7">:ref:`debug_authorization_section`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_DEBUG_AUTHORIZATION</tt></td> <td> <tt>pyramid.debug_authorization</tt> or <tt>debug_authorization</tt> </td> </tr></tbody>
</table></div>
<h2 class="vicinity"> <a name="debugging-not-found-errors" class="anchor" href="#debugging-not-found-errors"><span class="octicon octicon-link"></span></a>Debugging Not Found Errors</h2>
<div class="changed"><p>Print view-related <tt>NotFound</tt> debug messages to stderr when this value is true.<del>See also </del><del><a href="#id9">:ref:`debug_notfound_section`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_DEBUG_NOTFOUND</tt></td> <td> <tt>pyramid.debug_notfound</tt> or <tt>debug_notfound</tt> </td> </tr></tbody>
</table></div>
<h2 class="vicinity"> <a name="debugging-route-matching" class="anchor" href="#debugging-route-matching"><span class="octicon octicon-link"></span></a>Debugging Route Matching</h2>
<div class="changed"><p>Print debugging messages related to <a href="#id5">:term:`url dispatch`</a> route matching when this value is true.<del>See also </del><del><a href="#id13">:ref:`debug_routematch_section`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_DEBUG_ROUTEMATCH</tt></td> <td> <tt>pyramid.debug_routematch</tt> or <tt>debug_routematch</tt> </td> </tr></tbody>
</table></div>
<h2 class="vicinity"> <a name="preventing-http-caching" class="anchor" href="#preventing-http-caching"><span class="octicon octicon-link"></span></a>Preventing HTTP Caching</h2>
<div class="changed"><p>Prevent the <tt>http_cache</tt> view configuration argument from having any effect globally in this process when this value is true. No http caching-related response headers will be set by the Pyramid <tt>http_cache</tt> view configuration feature when this is true.<del>See also </del><del><a href="#id16">:ref:`influencing_http_caching`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_PREVENT_HTTP_CACHE</tt></td> <td> <tt>pyramid.prevent_http_cache</tt> or <tt>prevent_http_cache</tt> </td> </tr></tbody>
</table></div>
<h2 class="vicinity"> <a name="debugging-all" class="anchor" href="#debugging-all"><span class="octicon octicon-link"></span></a>Debugging All</h2>
<div class="expandable unchanged">
<p>Turns on all <tt>debug*</tt> settings.</p>
<table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_DEBUG_ALL</tt></td> <td> <tt>pyramid.debug_all</tt> or <tt>debug_all</tt> </td> </tr></tbody>
</table>
<h2> <a name="reloading-all" class="anchor" href="#reloading-all"><span class="octicon octicon-link"></span></a>Reloading All</h2>
<p>Turns on all <tt>reload*</tt> settings.</p>
<table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th> <th>Config File Setting Name</th> </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_RELOAD_ALL</tt></td> <td> <tt>pyramid.reload_all</tt> or <tt>reload_all</tt> </td> </tr></tbody>
</table>
</div>
<h2 class="vicinity"> <a name="default-locale-name" class="anchor" href="#default-locale-name"><span class="octicon octicon-link"></span></a>Default Locale Name</h2>
<div class="changed"><p>The value supplied here is used as the default locale name when a <a href="#id8">:term:`locale negotiator`</a> is not registered.<del>See also </del><del><a href="#id20">:ref:`localization_deployment_settings`</a></del><del>.</del></p></div>
<div class="expandable unchanged"><table>
<thead valign="bottom"><tr>
<th>Environment Variable Name</th>
      <th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>PYRAMID_DEFAULT_LOCALE_NAME</tt></td>
      <td>
      <tt>pyramid.default_locale_name</tt>
      or <tt>default_locale_name</tt>
      </td>
      </tr></tbody>
</table></div>
<h2 class="vicinity">
      <a name="including-packages" class="anchor" href="#including-packages"><span class="octicon octicon-link"></span></a>Including Packages</h2>
<div class="expandable unchanged">
<p><tt>pyramid.includes</tt> instructs your application to include other packages.
      Using the setting is equivalent to using the
      <a href="#id11">:meth:`pyramid.config.Configurator.include`</a> method.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>pyramid.includes</tt></td>
      </tr></tbody>
</table>
<p>The value assigned to <tt>pyramid.includes</tt> should be a sequence.  The
      sequence can take several different forms.</p>
<ol>
<li>
      <p>It can be a string.</p>
      <p>If it is a string, the package names can be separated by spaces:</p>
      <pre>package1 package2 package3
      </pre>
      <p>The package names can also be separated by carriage returns:</p>
      <pre>package1
      package2
      package3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['package1', 'package2', 'package3']
      </pre>
      </li>
      </ol>
<p>Each value in the sequence should be a <a href="#id13">:term:`dotted Python name`</a>.</p>
<h3>
      <a name="pyramidincludes-vs-methpyramidconfigconfiguratorinclude" class="anchor" href="#pyramidincludes-vs-methpyramidconfigconfiguratorinclude"><span class="octicon octicon-link"></span></a><tt>pyramid.includes</tt> vs. <a href="#id15">:meth:`pyramid.config.Configurator.include`</a>
      </h3>
<p>Two methods exist for including packages: <tt>pyramid.includes</tt> and
      <a href="#id17">:meth:`pyramid.config.Configurator.include`</a>.  This section explains their
      equivalence.</p>
<h4>
      <a name="using-pastedeploy" class="anchor" href="#using-pastedeploy"><span class="octicon octicon-link"></span></a>Using PasteDeploy</h4>
<p>Using the following <tt>pyramid.includes</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
<pre><span class="k">[app:main]</span>
      <span class="na">pyramid.includes</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar</span>
      <span class="s">                   pyramid_tm</span>
      </pre>
<p>Is equivalent to using the following statements in your configuration code:</p>
<p>It is fine to use both or either form.</p>
<h4>
      <a name="plain-python" class="anchor" href="#plain-python"><span class="octicon octicon-link"></span></a>Plain Python</h4>
<p>Using the following <tt>pyramid.includes</tt> setting in your plain-Python Pyramid
      application:</p>
<p>Is equivalent to using the following statements in your configuration code:</p>
<p>It is fine to use both or either form.</p>
<h2>
      <a name="explicit-tween-configuration" class="anchor" href="#explicit-tween-configuration"><span class="octicon octicon-link"></span></a>Explicit Tween Configuration</h2>
<p>This value allows you to perform explicit <a href="#id19">:term:`tween`</a> ordering in your
      configuration.  Tweens are bits of code used by add-on authors to extend
      Pyramid.  They form a chain, and require ordering.</p>
<p>Ideally, you won't need to use the <tt>pyramid.tweens</tt> setting at all.  Tweens
      are generally ordered and included "implicitly" when an add-on package which
      registers a tween is "included".  Packages are included when you name a
      <tt>pyramid.includes</tt> setting in your configuration or when you call
      <a href="#id21">:meth:`pyramid.config.Configurator.include`</a>.</p>
<p>Authors of included add-ons provide "implicit" tween configuration ordering
      hints to Pyramid when their packages are included.  However, the implicit
      tween ordering is only best-effort.  Pyramid will attempt to provide an
      implicit order of tweens as best it can using hints provided by add-on
      authors, but because it's only best-effort, if very precise tween ordering is
      required, the only surefire way to get it is to use an explicit tween order.
      You may be required to inspect your tween ordering (see
      <a href="#id23">:ref:`displaying_tweens`</a>) and add a <tt>pyramid.tweens</tt> configuration value at
      the behest of an add-on author.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>pyramid.tweens</tt></td>
      </tr></tbody>
</table>
<p>The value assigned to <tt>pyramid.tweens</tt> should be a sequence.  The
      sequence can take several different forms.</p>
<ol>
<li>
      <p>It can be a string.</p>
      <p>If it is a string, the tween names can be separated by spaces:</p>
      <pre>  pkg.tween_factory1 pkg.tween_factory2 pkg.tween_factory3

      The tween names can also be separated by carriage returns::

         pkg.tween_factory1
         pkg.tween_factory2
         pkg.tween_factory3
      </pre>
      </li>
      <li>
      <p>It can be a Python list, where the values are strings:</p>
      <pre>['pkg.tween_factory1', 'pkg.tween_factory2', 'pkg.tween_factory3']
      </pre>
      </li>
      </ol>
<p>Each value in the sequence should be a <a href="#id25">:term:`dotted Python name`</a>.</p>
<h3>
      <a name="pastedeploy-configuration-vs-plain-python-configuration" class="anchor" href="#pastedeploy-configuration-vs-plain-python-configuration"><span class="octicon octicon-link"></span></a>PasteDeploy Configuration vs. Plain-Python Configuration</h3>
<p>Using the following <tt>pyramid.tweens</tt> setting in the PasteDeploy <tt>.ini</tt>
      file in your application:</p>
<pre><span class="k">[app:main]</span>
      <span class="na">pyramid.tweens</span> <span class="o">=</span> <span class="s">pyramid_debugtoolbar.toolbar.tween_factory</span>
      <span class="s">                 pyramid.tweens.excview_tween_factory</span>
      <span class="s">                 pyramid_tm.tm_tween_factory</span>
      </pre>
<p>Is equivalent to using the following statements in your configuration code:</p>
<p>It is fine to use both or either form.</p>
<h2>
      <a name="mako-template-render-settings" class="anchor" href="#mako-template-render-settings"><span class="octicon octicon-link"></span></a>Mako Template Render Settings</h2>
<p>Mako derives additional settings to configure its template renderer that
      should be set when using it. Many of these settings are optional and only need
      to be set if they should be different from the default. The Mako Template
      Renderer uses a subclass of Mako's <a href="http://www.makotemplates.org/docs/usage.html#usage_lookup">template lookup</a> and accepts
      several arguments to configure it.</p>
<h3>
      <a name="mako-directories" class="anchor" href="#mako-directories"><span class="octicon octicon-link"></span></a>Mako Directories</h3>
<p>The value(s) supplied here are passed in as the template directories. They
      should be in <a href="#id27">:term:`asset specification`</a> format, for example:
      <tt>my.package:templates</tt>.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.directories</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-module-directory" class="anchor" href="#mako-module-directory"><span class="octicon octicon-link"></span></a>Mako Module Directory</h3>
<p>The value supplied here tells Mako where to store compiled Mako templates. If
      omitted, compiled templates will be stored in memory. This value should be an
      absolute path, for example: <tt>%(here)s/data/templates</tt> would use a directory
      called <tt>data/templates</tt> in the same parent directory as the INI file.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.module_directory</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-input-encoding" class="anchor" href="#mako-input-encoding"><span class="octicon octicon-link"></span></a>Mako Input Encoding</h3>
<p>The encoding that Mako templates are assumed to have. By default this is set
      to <tt>utf-8</tt>. If you wish to use a different template encoding, this value
      should be changed accordingly.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.input_encoding</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-error-handler" class="anchor" href="#mako-error-handler"><span class="octicon octicon-link"></span></a>Mako Error Handler</h3>
<p>A callable (or a <a href="#id29">:term:`dotted Python name`</a> which names a callable) which is
      called whenever Mako compile or runtime exceptions occur. The callable is
      passed the current context as well as the exception. If the callable returns
      True, the exception is considered to be handled, else it is re-raised after
      the function completes. Is used to provide custom error-rendering functions.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.error_handler</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-default-filters" class="anchor" href="#mako-default-filters"><span class="octicon octicon-link"></span></a>Mako Default Filters</h3>
<p>List of string filter names that will be applied to all Mako expressions.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.default_filters</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-import" class="anchor" href="#mako-import"><span class="octicon octicon-link"></span></a>Mako Import</h3>
<p>String list of Python statements, typically individual "import" lines, which
      will be placed into the module level preamble of all generated Python modules.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.imports</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-strict-undefined" class="anchor" href="#mako-strict-undefined"><span class="octicon octicon-link"></span></a>Mako Strict Undefined</h3>
<p><tt>true</tt> or <tt>false</tt>, representing the "strict undefined" behavior of Mako
      (see <a href="http://www.makotemplates.org/docs/runtime.html#context-variables">Mako Context Variables</a>).  By
      default, this is <tt>false</tt>.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.strict_undefined</tt></td>
      </tr></tbody>
</table>
<h3>
      <a name="mako-preprocessor" class="anchor" href="#mako-preprocessor"><span class="octicon octicon-link"></span></a>Mako Preprocessor</h3>
<p>A callable (or a <a href="#id31">:term:`dotted Python name`</a> which names a callable) which is
      called to preprocess the source before the template is called.  The callable
      will be passed the full template source before it is parsed. The return
      result of the callable will be used as the template source code.</p>
<table>
<thead valign="bottom"><tr>
<th>Config File Setting Name</th>
      </tr></thead>
<tbody valign="top"><tr>
<td><tt>mako.preprocessor</tt></td>
      </tr></tbody>
</table>
<h2>
      <a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>
<p>Let's presume your configuration file is named <tt>MyProject.ini</tt>, and
      there is a section representing your application named <tt>[app:main]</tt>
      within the file that represents your <a href="#id33">:app:`Pyramid`</a> application.
      The configuration file settings documented in the above "Config File
      Setting Name" column would go in the <tt>[app:main]</tt> section.  Here's
      an example of such a section:</p>
<p>You can also use environment variables to accomplish the same purpose
      for settings documented as such.  For example, you might start your
      <a href="#id35">:app:`Pyramid`</a> application using the following command line:</p>
<pre>$ PYRAMID_DEBUG_AUTHORIZATION=1 PYRAMID_RELOAD_TEMPLATES=1 \
             $VENV/bin/pserve MyProject.ini
      </pre>
<p>If you started your application this way, your <a href="#id37">:app:`Pyramid`</a>
      application would behave in the same manner as if you had placed the
      respective settings in the <tt>[app:main]</tt> section of your
      application's <tt>.ini</tt> file.</p>
<p>If you want to turn all <tt>debug</tt> settings (every setting that starts
      with <tt>pyramid.debug_</tt>). on in one fell swoop, you can use
      <tt>PYRAMID_DEBUG_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.debug_all=true</tt> in the config file.  Note that this does not affect
      settings that do not start with <tt>pyramid.debug_*</tt> such as
      <tt>pyramid.reload_templates</tt>.</p>
<p>If you want to turn all <tt>pyramid.reload</tt> settings (every setting that starts
      with <tt>pyramid.reload_</tt>) on in one fell swoop, you can use
      <tt>PYRAMID_RELOAD_ALL=1</tt> as an environment variable setting or you may use
      <tt>pyramid.reload_all=true</tt> in the config file.  Note that this does not
      affect settings that do not start with <tt>pyramid.reload_*</tt> such as
      <tt>pyramid.debug_notfound</tt>.</p>
<p>Note</p>
<p>Specifying configuration settings via environment variables is generally
      most useful during development, where you may wish to augment or
      override the more permanent settings in the configuration file.
      This is useful because many of the reload and debug settings may
      have performance or security (i.e., disclosure) implications
      that make them undesirable in a production environment.</p>
<h2>
      <a name="understanding-the-distinction-between-reload_templates-and-reload_assets" class="anchor" href="#understanding-the-distinction-between-reload_templates-and-reload_assets"><span class="octicon octicon-link"></span></a>Understanding the Distinction Between <tt>reload_templates</tt> and <tt>reload_assets</tt>
      </h2>
<p>The difference between <tt>pyramid.reload_assets</tt> and
      <tt>pyramid.reload_templates</tt> is a bit subtle. Templates are themselves also
      treated by <a href="#id39">:app:`Pyramid`</a> as asset files (along with other static files), so the
      distinction can be confusing.  It's helpful to read
      <a href="#id41">:ref:`overriding_assets_section`</a> for some context about assets in general.</p>
<p>When <tt>pyramid.reload_templates</tt> is true, <a href="#id43">:app:`Pyramid`</a> takes advantage of the
      underlying templating systems' ability to check for file modifications to an
      individual template file.  When <tt>pyramid.reload_templates</tt> is true but
      <tt>pyramid.reload_assets</tt> is <em>not</em> true, the template filename returned by the
      <tt>pkg_resources</tt> package (used under the hood by asset resolution) is cached
      by <a href="#id45">:app:`Pyramid`</a> on the first request.  Subsequent requests for the same
      template file will return a cached template filename.  The underlying
      templating system checks for modifications to this particular file for every
      request.  Setting <tt>pyramid.reload_templates</tt> to <tt>True</tt> doesn't affect
      performance dramatically (although it should still not be used in production
      because it has some effect).</p>
<p>However, when <tt>pyramid.reload_assets</tt> is true, <a href="#id47">:app:`Pyramid`</a> will not cache
      the template filename, meaning you can see the effect of changing the content
      of an overridden asset directory for templates without restarting the server
      after every change.  Subsequent requests for the same template file may
      return different filenames based on the current state of overridden asset
      directories. Setting <tt>pyramid.reload_assets</tt> to <tt>True</tt> affects performance
      <em>dramatically</em>, slowing things down by an order of magnitude for each
      template rendering.  However, it's convenient to enable when moving files
      around in overridden asset directories. <tt>pyramid.reload_assets</tt> makes the
      system <em>very slow</em> when templates are in use.  Never set
      <tt>pyramid.reload_assets</tt> to <tt>True</tt> on a production system.</p>
<h2>
      <a name="adding-a-custom-setting" class="anchor" href="#adding-a-custom-setting"><span class="octicon octicon-link"></span></a>Adding A Custom Setting</h2>
<p>From time to time, you may need to add a custom setting to your application.
      Here's how:</p>
<ul>
<li>
      <p>If you're using an <tt>.ini</tt> file, change the <tt>.ini</tt> file, adding the
      setting to the <tt>[app:foo]</tt> section representing your Pyramid application.
      For example:</p>
      <div class="highlight highlight-ini"><pre><span class="k">[app:main]</span>
      <span class="c1"># .. other settings</span>
      <span class="na">debug_frobnosticator</span> <span class="o">=</span> <span class="s">True</span>
      </pre></div>
      </li>
      <li>
      <p>In the <tt>main()</tt> function that represents the place that your Pyramid WSGI
      application is created, anticipate that you'll be getting this key/value
      pair as a setting and do any type conversion necessary.</p>
      <p>If you've done any type conversion of your custom value, reset the
      converted values into the <tt>settings</tt> dictionary <em>before</em> you pass the
      dictionary as <tt>settings</tt> to the <a href="#id50">:term:`Configurator`</a>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
          <span class="c"># ...</span>
          <span class="kn">from</span> <span class="nn">pyramid.settings</span> <span class="kn">import</span> <span class="n">asbool</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">asbool</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                     <span class="s">'debug_frobnosticator'</span><span class="p">,</span> <span class="s">'false'</span><span class="p">))</span>
          <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span> <span class="o">=</span> <span class="n">debug_frobnosticator</span>
          <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
      </pre></div>
      <div>
      <p>Note</p>
      <p>It's especially important that you mutate the <tt>settings</tt>
      dictionary with the converted version of the variable <em>before</em> passing
      it to the Configurator: the configurator makes a <em>copy</em> of <tt>settings</tt>,
      it doesn't use the one you pass directly.</p>
      </div>
      </li>
      <li>
      <p>When creating an <tt>includeme</tt> function that will be later added to your
      application's configuration you may access the <tt>settings</tt> dictionary
      through the instance of the <a href="#id52">:term:`Configurator`</a> that is passed into the
      function as its only argument.  For Example:</p>
      </li>
      </ul>
<blockquote>
      <div class="highlight highlight-python"><pre><span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
          <span class="n">settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
          <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </blockquote>
<ul>
<li>
      <p>In the runtime code from where you need to access the new settings value,
      find the value in the <tt>registry.settings</tt> dictionary and use it.  In
      <a href="#id54">:term:`view`</a> code (or any other code that has access to the request), the
      easiest way to do this is via <tt>request.registry.settings</tt>.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">settings</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      <p>If you wish to use the value in code that does not have access to the
      request and you wish to use the value, you'll need to use the
      <a href="#id56">:func:`pyramid.threadlocal.get_current_registry`</a> API to obtain the current
      registry, then ask for its <tt>settings</tt> attribute.  For example:</p>
      <div class="highlight highlight-python"><pre><span class="n">registry</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">threadlocal</span><span class="o">.</span><span class="n">get_current_registry</span><span class="p">()</span>
      <span class="n">settings</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">settings</span>
      <span class="n">debug_frobnosticator</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">'debug_frobnosticator'</span><span class="p">]</span>
      </pre></div>
      </li>
      </ul>
</div></article>

    </div>
  </div>

</body>
</html>
