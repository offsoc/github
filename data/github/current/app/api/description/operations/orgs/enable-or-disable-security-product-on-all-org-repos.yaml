---
summary: 'Enable or disable a security feature for an organization'
description: |-
  Enables or disables the specified security feature for all eligible repositories in an organization. For more information, see "[Managing security managers in your organization](${externalDocsUrl}/organizations/managing-peoples-access-to-your-organization-with-roles/managing-security-managers-in-your-organization)."

  The authenticated user must be an organization owner or be member of a team with the security manager role to use this endpoint.

  OAuth app tokens and personal access tokens (classic) need the `write:org` scope to use this endpoint.
tags:
  - orgs
operationId: orgs/enable-or-disable-security-product-on-all-org-repos

externalDocs:
  description: API method documentation
  url: '${externalDocsUrl}/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization'

x-github-internal:
  path: /orgs/{org}/{security_product}/{enablement}
  http-method: post
  published: true
  owner: '@github/security-center-reviewers'

x-github-releases:
  - ghec
  - api.github.com
  - ghes: '>= 3.7'

parameters:
  - $ref: '../../components/parameters/org.yaml'
  - $ref: '../../components/parameters/security-product.yaml'
  - $ref: '../../components/parameters/org-security-product-enablement.yaml'

requestBody:
  required: false
  content:
    application/json:
      schema:
        properties:
          query_suite:
            description: CodeQL query suite to be used. If you specify the `query_suite` parameter, the default setup
              will be configured with this query suite only on all repositories that didn't have default setup already configured. It will not change the query suite on repositories that already have default setup configured.

              If you don't specify any `query_suite` in your request, the preferred query suite of the organization will be applied.
            type: string
            enum:
              - default
              - extended
      examples:
        default:
          value:

responses:
  '204':
    description: Action started
  '422':
    description: The action could not be taken due to an in progress enablement,
      or a policy is preventing enablement

x-githubEnterpriseOverlays:
  '< 3.11':
    requestBody:

x-github-overlays:
- releases:
  - api.github.com
  - ghec
  - ghes: "3.14"
  overlay:
    deprecated: true
    x-github:
      deprecationDate: "2024-07-22"
      removalDate: "2025-07-22"
    description: |-
      > [!WARNING]
      > **Deprecation notice:** The ability to enable or disable a security feature for all eligible repositories in an organization is deprecated. Please use [code security configurations](${externalDocsUrl}/rest/code-security/configurations) instead. For more information, see the [changelog](https://github.blog/changelog/2024-07-22-deprecation-of-api-endpoint-to-enable-or-disable-a-security-feature-for-an-organization/).

      Enables or disables the specified security feature for all eligible repositories in an organization. For more information, see "[Managing security managers in your organization](${externalDocsUrl}/organizations/managing-peoples-access-to-your-organization-with-roles/managing-security-managers-in-your-organization)."

      The authenticated user must be an organization owner or be member of a team with the security manager role to use this endpoint.

      OAuth app tokens and personal access tokens (classic) need the `write:org` scope to use this endpoint.

x-github:
  githubCloudOnly: false
  enabledForGitHubApps: true
  previews: []
  category: orgs
  subcategory: orgs

x-github-breaking-changes:
  - changeset: remove_enable_or_disable_security_product_on_all_org_repos
    patch:
      x-github-internal:
        published: false
