{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/organization-hook.json",
  "title": "Organization Hook",
  "description": "Webhooks for an organization.",
  "type": "object",
  "definitions": {
    "org": {
      "description": "The name of the organization.",
      "type": "string"
    },
    "organization_id": {
      "description": "The ID of the organization.",
      "type": "integer"
    },
    "hook_id": {
      "description": "The ID of the hook.",
      "type": "integer"
    },
    "config": {
      "description": "Key/value pairs to provide settings for this webhook.",
      "type": "object"
    },
    "url": {
      "description": "The URL to which the payloads will be delivered.",
      "type": "string",
      "example": "https://example.com/webhook-receiver"
    },
    "content_type": {
      "description": "The media type used to serialize the payloads.",
      "type": "string",
      "enum": [
        "json",
        "form"
      ],
      "default": "form",
      "example": "json"
    },
    "secret": {
      "description": "The secret used to generate the HMAC hex digest value in the X-Hub-Signature header.",
      "type": "string"
    },
    "insecure_ssl": {
      "description": "Whether or not to verify the SSL certificate for the host for 'url'.",
      "type": "string",
      "enum": [
        "0",
        "1"
      ],
      "default": "0",
      "example": "1"
    },
    "events": {
      "description": "The events the hook is triggered for.",
      "default": [
        "push"
      ],
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "active": {
      "description": "Whether the webhook should be triggered when the configured events occur.",
      "default": true,
      "type": "boolean"
    },
    "name": {
      "description": "The name of the webhook.",
      "type": "string",
      "enum": [
        "web"
      ],
      "example": "Team Environment"
    }
  },
  "links": [
    {
      "title": "Edit a hook",
      "method": "PATCH",
      "rel": "update",
      "href": "/organizations/{organization_id}/hooks/{hook_id}",
      "schema": {
        "properties": {
          "config": {
            "type": "object",
            "properties": {
              "url": {
                "$ref": "#/definitions/url"
              },
              "content_type": {
                "$ref": "#/definitions/content_type"
              },
              "secret": {
                "$ref": "#/definitions/secret"
              },
              "insecure_ssl": {
                "$ref": "#/definitions/insecure_ssl"
              }
            },
            "required": [
              "url"
            ]
          },
          "events": {
            "$ref": "#/definitions/events"
          },
          "active": {
            "$ref": "#/definitions/active"
          }
        },
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Create a hook",
      "method": "POST",
      "rel": "create",
      "href": "/organizations/{organization_id}/hooks",
      "schema": {
        "properties": {
          "name": {
            "$ref": "#/definitions/name"
          },
          "config": {
            "type": "object",
            "properties": {
              "url": {
                "$ref": "#/definitions/url"
              },
              "content_type": {
                "$ref": "#/definitions/content_type"
              },
              "secret": {
                "$ref": "#/definitions/secret"
              },
              "insecure_ssl": {
                "$ref": "#/definitions/insecure_ssl"
              }
            },
            "required": [
              "url"
            ]
          },
          "events": {
            "$ref": "#/definitions/events"
          },
          "active": {
            "$ref": "#/definitions/active"
          }
        },
        "additionalProperties": false,
        "required": [
          "name",
          "config"
        ],
        "type": "object"
      }
    },
    {
      "title": "Ping a hook",
      "method": "POST",
      "rel": "ping",
      "href": "/organizations/{organization_id}/hooks/{hook_id}/pings",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Edit a hook",
      "method": "POST",
      "rel": "update",
      "href": "/organizations/{organization_id}/hooks/{hook_id}",
      "schema": {
        "properties": {
          "config": {
            "type": "object",
            "properties": {
              "url": {
                "$ref": "#/definitions/url"
              },
              "content_type": {
                "$ref": "#/definitions/content_type"
              },
              "secret": {
                "$ref": "#/definitions/secret"
              },
              "insecure_ssl": {
                "$ref": "#/definitions/insecure_ssl"
              }
            },
            "required": [
              "url"
            ]
          },
          "events": {
            "$ref": "#/definitions/events"
          },
          "active": {
            "$ref": "#/definitions/active"
          }
        },
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Delete a hook",
      "method": "DELETE",
      "rel": "delete",
      "href": "/organizations/{organization_id}/hooks/{hook_id}",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Fetch deliveries for hook",
      "method": "GET",
      "rel": "deliveries",
      "href": "/organizations/{organization_id}/hooks/{hook_id}/deliveries",
      "schema": {
        "properties": {
          "since": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "string",
                "format": "date"
              }
            ]
          },
          "until": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "string",
                "format": "date"
              }
            ]
          },
          "per_page": {
            "type": "string",
            "pattern": "^\\d+$"
          },
          "status": {
            "type": "string",
            "enum": [
              "failure",
              "success"
            ]
          },
          "status_code": {
            "type": "string",
            "pattern": "^[1-5][0-9]{2}$"
          },
          "events": {
            "type": "string",
            "pattern": "^([a-z_]+(\\.[a-z_]+)?,?)+[^,]$"
          },
          "redelivery": {
            "type": "string",
            "enum": [
              "true",
              "false"
            ]
          },
          "guid": {
            "type": "string",
            "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
          },
          "repo_id": {
            "type": "string",
            "pattern": "^\\d+$"
          },
          "cursor": {
            "type": "string",
            "pattern": "^[A-Za-z0-9_]+$"
          }
        },
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Fetch delivery for hook",
      "method": "GET",
      "rel": "delivery",
      "href": "/organizations/{organization_id}/hooks/{hook_id}/deliveries/{delivery_id}",
      "schema": {
        "properties": {
          "include_payload": {
            "type": "string",
            "enum": [
              "true"
            ]
          }
        },
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Create redelivery for hook",
      "method": "POST",
      "href": "/organizations/{organization_id}/hooks/{hook_id}/deliveries/{delivery_id}/attempts",
      "rel": "redelivery",
      "schema": {
        "properties": {
        },
        "type": [
          "object",
          "null"
        ],
        "additionalProperties": false
      }
    }
  ]
}
