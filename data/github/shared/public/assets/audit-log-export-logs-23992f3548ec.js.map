{"version":3,"file":"audit-log-export-logs-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/audit-log-export-logs/ExportButton.tsx","ui/packages/audit-log-export-logs/ExportDownloadButton.tsx","ui/packages/audit-log-export-logs/AuditLogExportLogs.tsx","ui/packages/audit-log-export-logs/audit-log-export-logs.ts","ui/packages/get-os/get-os.ts","ui/packages/react-core/deferred-registry.ts","ui/packages/react-core/react-partial-anchor.ts","ui/packages/react-core/react-partial-registry.ts","ui/packages/react-core/ReactPartialElement.tsx","ui/packages/react-core/register-partial.ts","ui/packages/react-profiling-mode/src/index.ts","ui/packages/test-id-props/test-id-props.ts","ui/packages/use-layout-effect/use-layout-effect.ts","ui/packages/verified-fetch/verified-fetch.ts","ui/packages/keyboard-key/KeyboardKey.tsx","ui/packages/react-core/PartialRouter.tsx","ui/packages/react-core/PartialEntry.tsx","ui/packages/react-core/ReactBaseElement.tsx"],"sourcesContent":["import {DatePicker} from '@github-ui/date-picker'\nimport type {RangeSelection} from '@github-ui/date-picker'\nimport {SearchIcon} from '@primer/octicons-react'\nimport {useState, useRef} from 'react'\nimport {Box, Button, Dialog, Flash, FormControl, Heading, Radio, RadioGroup, Text, TextInput} from '@primer/react'\nimport {verifiedFetch} from '@github-ui/verified-fetch'\nimport {formatISO} from 'date-fns'\nimport type {AuditLogExport} from './AuditLogExport'\n\nexport enum ExportType {\n  Web = 1,\n  Git,\n}\n\nexport type RadioRange = readonly [string, string, string]\n\nexport interface ExportSubmitResponse {\n  errors: string[]\n  exports: AuditLogExport[]\n}\n\nexport interface ExportButtonProps {\n  exportUrl: string\n  exportType: ExportType\n  radioRange: RadioRange\n  onSubmit: (response: ExportSubmitResponse) => void\n}\n\nexport function ExportButton({exportUrl, exportType, radioRange, onSubmit}: ExportButtonProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const buttonRef = useRef<HTMLButtonElement>(null)\n  const returnFocusRef = useRef(null)\n  const [visibleErrorMessage, setVisibleErrorMessage] = useState<string>('')\n  const [formatType, setFormatType] = useState('json')\n  const [queryPhrase, setPhrase] = useState('')\n  const [first, second, third] = radioRange\n  const [exportRange, setExportRange] = useState(first)\n\n  const calculateDate = (value: number) => {\n    const d = new Date()\n    d.setDate(d.getDate() - value)\n    return d\n  }\n\n  const formatDateQuery = (value: number) => {\n    return `created:>${formatISO(calculateDate(value), {representation: 'date'})}`\n  }\n\n  const formatDateRangeQuery = (startDate: string, endDate: string) => {\n    return `created:${startDate}..${endDate}`\n  }\n\n  const [dateQuery, setDateQuery] = useState(formatDateQuery(Number(first)))\n\n  const handleFormatChange = (selectedValue: string | null) => {\n    if (selectedValue === null) {\n      setFormatType('json')\n    } else {\n      setFormatType(selectedValue)\n    }\n  }\n\n  const handleDateQueryChange = (selectedValue: string | null) => {\n    if (selectedValue === null) {\n      setDateQuery('')\n    } else if (selectedValue !== 'custom') {\n      setExportRange(selectedValue)\n      setDateQuery(formatDateQuery(parseInt(selectedValue)))\n    }\n  }\n\n  const handleDatePicker = (range: RangeSelection | null) => {\n    if (!range) return\n    setExportRange('custom')\n    const startDate = formatISO(range.from, {representation: 'date'})\n    const endDate = formatISO(range.to, {representation: 'date'})\n    setDateQuery(formatDateRangeQuery(startDate, endDate))\n  }\n\n  const handleClose = () => {\n    setVisibleErrorMessage('')\n    setIsOpen(false)\n  }\n\n  const extractDateRangeFromQuery = (dq: string) => {\n    let start\n    let end\n    const prefix = 'created:'\n    if (dq.startsWith(prefix)) {\n      dq = dq.substring(prefix.length)\n      if (dq.startsWith('>')) {\n        start = dq.substring(1).trim()\n        end = formatISO(Date.now(), {representation: 'date'})\n      } else {\n        const r = dq.split('..')\n        if (r.length > 1) {\n          start = r[0]\n          end = r[1]\n        }\n      }\n    }\n    return {start, end}\n  }\n\n  const handleSubmit = async () => {\n    setVisibleErrorMessage('')\n    const formData = new FormData()\n    if (exportType === ExportType.Git) {\n      const {start, end} = extractDateRangeFromQuery(dateQuery)\n      if (start && end) {\n        formData.append('start', start.toString())\n        formData.append('end', end.toString())\n      }\n    } else {\n      const q = queryPhrase === '' ? dateQuery : `${dateQuery} ${queryPhrase}`\n      formData.append('q', q)\n      formData.append('export_format', formatType)\n    }\n    const response = await verifiedFetch(exportUrl, {\n      method: 'POST',\n      body: formData,\n      headers: {Accept: 'application/json'},\n    })\n    const jsonData = await response.json()\n    if (jsonData && jsonData.errors.length > 0) {\n      setVisibleErrorMessage(jsonData.errors.join(','))\n    } else {\n      setIsOpen(false)\n      onSubmit(jsonData)\n    }\n    return jsonData\n  }\n\n  let dialogTestId = ''\n  let buttonTestId = ''\n  let buttonTitle = ''\n  let dialogTitle = ''\n  let dialogSubtitle = ''\n  let isWebExport = false\n  let dateRangePadding = 0\n  switch (exportType) {\n    case ExportType.Git:\n      buttonTitle = 'Configure Git Export'\n      dialogTitle = 'Export Git Activity'\n      dialogSubtitle = 'Git activity data is limited to activity from the last 7 days'\n      dialogTestId = 'git-export-dialog-button'\n      buttonTestId = 'git-export-button'\n      dateRangePadding = 3\n      break\n    case ExportType.Web:\n    default:\n      buttonTitle = 'Configure App Export'\n      dialogTitle = 'Export Application Events'\n      dialogSubtitle = 'App events data is limited to activity from the last 180 days'\n      isWebExport = true\n      dialogTestId = 'web-export-dialog-button'\n      buttonTestId = 'web-export-button'\n      dateRangePadding = 0\n      break\n  }\n\n  return (\n    <>\n      <Button ref={buttonRef} onClick={() => setIsOpen(true)} data-testid={dialogTestId}>\n        {buttonTitle}\n      </Button>\n      <Dialog\n        title=\"Start export\"\n        onDismiss={handleClose}\n        returnFocusRef={returnFocusRef}\n        isOpen={isOpen}\n        area-labelledby=\"header\"\n        sx={{overflow: 'hidden'}}\n      >\n        <div>\n          <Dialog.Header id=\"header\">\n            <Box sx={{display: 'flex', flexDirection: 'column'}}>\n              <Heading as=\"h3\" sx={{fontSize: 2, fontWeight: 'bold'}}>\n                {dialogTitle}\n              </Heading>\n              <span>{dialogSubtitle}</span>\n            </Box>\n          </Dialog.Header>\n          {isWebExport && (\n            <Box sx={{padding: 3}}>\n              <FormControl>\n                <FormControl.Label>Filter events to export</FormControl.Label>\n                <TextInput\n                  sx={{width: '100%'}}\n                  placeholder=\"Search the audit logs\"\n                  leadingVisual={SearchIcon}\n                  onChange={e => setPhrase(e.target.value)}\n                  data-testid=\"search-bar\"\n                />\n              </FormControl>\n            </Box>\n          )}\n          <Box\n            sx={{\n              paddingLeft: 3,\n              paddingRight: 3,\n              paddingBottom: 3,\n              borderBottomWidth: 1,\n              borderBottomStyle: 'solid',\n              borderBottomColor: 'border.default',\n            }}\n          >\n            {isWebExport && (\n              <RadioGroup name=\"exportFormat\" onChange={handleFormatChange} sx={{paddingBottom: 2}}>\n                <RadioGroup.Label>Select an export format</RadioGroup.Label>\n                <FormControl>\n                  <Radio value=\"json\" defaultChecked />\n                  <FormControl.Label>JSON</FormControl.Label>\n                </FormControl>\n                <FormControl>\n                  <Radio value=\"csv\" data-testid=\"csv-radio\" />\n                  <FormControl.Label>CSV</FormControl.Label>\n                </FormControl>\n              </RadioGroup>\n            )}\n            <RadioGroup name=\"exportRange\" onChange={handleDateQueryChange}>\n              <RadioGroup.Label sx={{paddingTop: dateRangePadding}}>Select an export range</RadioGroup.Label>\n              <FormControl>\n                <Radio value={first} checked={exportRange === first} />\n                <FormControl.Label>\n                  Last {first} day{first === '1' ? '' : 's'}\n                </FormControl.Label>\n              </FormControl>\n              <FormControl>\n                <Radio value={second} checked={exportRange === second} data-testid=\"second-radio\" />\n                <FormControl.Label>Last {second} days</FormControl.Label>\n              </FormControl>\n              <FormControl>\n                <Radio value={third} checked={exportRange === third} />\n                <FormControl.Label>Last {third} days</FormControl.Label>\n              </FormControl>\n              <FormControl>\n                <Radio value=\"custom\" checked={exportRange === 'custom'} />\n                <FormControl.Label>\n                  <Box sx={{display: 'flex', flexDirection: 'column'}}>\n                    <Text sx={{paddingBottom: 1}}>Custom range...</Text>\n                    <DatePicker\n                      variant=\"range\"\n                      maxDate={new Date()}\n                      minDate={calculateDate(Number(third))}\n                      showTodayButton={true}\n                      showClearButton={true}\n                      value={null}\n                      onChange={range => handleDatePicker(range)}\n                    />\n                  </Box>\n                </FormControl.Label>\n              </FormControl>\n            </RadioGroup>\n          </Box>\n          <Box sx={{display: 'flex', justifyContent: 'flex-end', margin: 3}}>\n            <Button onClick={handleClose}>Cancel</Button>\n            <Button variant=\"primary\" sx={{marginLeft: 2}} onClick={handleSubmit} data-testid={buttonTestId}>\n              Start export\n            </Button>\n          </Box>\n          {visibleErrorMessage && (\n            <Box sx={{color: 'red', mt: '2px', fontSize: '12px', alignSelf: 'flex-start', alignItems: 'flex-start'}}>\n              <Flash variant=\"danger\">{visibleErrorMessage}</Flash>\n            </Box>\n          )}\n        </div>\n      </Dialog>\n    </>\n  )\n}\n\ntry{ ExportButton.displayName ||= 'ExportButton' } catch {}","import {useState} from 'react'\nimport {TriangleDownIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu} from '@primer/react'\nimport type {AuditLogExport} from './AuditLogExport'\n\nexport interface ExportDownloadButtonProps {\n  item: AuditLogExport\n  chunksPerDownload: number\n  downloadWebExportUrl: string\n  downloadGitExportUrl: string\n}\n\nexport function ExportDownloadButton({\n  item,\n  chunksPerDownload,\n  downloadWebExportUrl,\n  downloadGitExportUrl,\n}: ExportDownloadButtonProps) {\n  const [isDownloadMenuOpen, setDownloadMenuOpen] = useState(false)\n  if (item.completed) {\n    if (item.expired) {\n      return <span data-testid=\"expired-complete\">Expired</span>\n    } else {\n      const message = item.format_type ? `Download ${item.format_type}` : `Download`\n\n      const defaultParams = {length: chunksPerDownload.toString(), export_id: '', token: ''}\n      const isWebExport = item.export_type === 'web export'\n      if (isWebExport) {\n        defaultParams['export_id'] = item.export_id\n      } else {\n        defaultParams['token'] = item.export_id\n      }\n      const urlBuilder = downloadUrlBuilder(isWebExport ? downloadWebExportUrl : downloadGitExportUrl, defaultParams)\n\n      // step through the chunks chunksPerDownload at a time\n      // save off the starting index of each step\n      const steps = []\n      const totalChunks = item.total_chunks\n      for (let i = 0; i < totalChunks; i += chunksPerDownload) {\n        steps.push(i)\n      }\n\n      const handleOpenChange = () => {\n        if (totalChunks > chunksPerDownload) {\n          // there multiple parts to this download, show the menu\n          setDownloadMenuOpen(!isDownloadMenuOpen)\n        } else {\n          // this export only has a single part, download it when the button is clicked\n          window.location.assign(urlBuilder({start: '0'}))\n        }\n      }\n\n      return (\n        <ActionMenu open={isDownloadMenuOpen} onOpenChange={handleOpenChange}>\n          <ActionMenu.Button\n            data-testid=\"download-button\"\n            trailingAction={item.total_chunks > chunksPerDownload ? TriangleDownIcon : null}\n          >\n            {message}\n          </ActionMenu.Button>\n          <ActionMenu.Overlay>\n            <ActionList selectionVariant=\"single\">\n              {steps.map((chunkIndex, index) => (\n                <ActionList.Item key={index} data-testid={`download-item-${index.toString()}`}>\n                  <a className=\"\" role=\"menuitem\" href={urlBuilder({start: chunkIndex.toString()})}>\n                    Part {index + 1}\n                  </a>\n                </ActionList.Item>\n              ))}\n            </ActionList>\n          </ActionMenu.Overlay>\n        </ActionMenu>\n      )\n    }\n  } else {\n    if (item.pending) {\n      return <span data-testid=\"preparing-export\">Preparing export</span>\n    } else {\n      return <span data-testid=\"expired-pending\">Expired</span>\n    }\n  }\n}\n\n// Given a baseUrl this returns a function that can be used to create variants of the baseUrl with different params\nexport function downloadUrlBuilder(\n  baseUrl: string,\n  defaultParams: Record<string, string>,\n): (params: Record<string, string>) => string {\n  return function (params: Record<string, string>): string {\n    const mergedParams = {...defaultParams, ...params}\n    const isBrowser = typeof window !== `undefined`\n    const url = new URL(baseUrl, isBrowser ? window.location.origin : '')\n    for (const [key, value] of Object.entries(mergedParams)) {\n      url.searchParams.append(key, value)\n    }\n    return url.toString()\n  }\n}\n\ntry{ ExportDownloadButton.displayName ||= 'ExportDownloadButton' } catch {}","import {useState} from 'react'\nimport {Box, Heading, Link, Text, RelativeTime} from '@primer/react'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {ExportButton, ExportType} from './ExportButton'\nimport type {ExportSubmitResponse, RadioRange} from './ExportButton'\nimport {ExportDownloadButton} from './ExportDownloadButton'\nimport type {AuditLogExport} from './AuditLogExport'\n\nexport interface AuditLogExportLogsProps {\n  exports: AuditLogExport[]\n  webExportUrl: string\n  gitExportUrl: string\n  chunksPerDownload: number\n  downloadWebExportUrl: string\n  downloadGitExportUrl: string\n  showGitExportButton: boolean\n}\n\nexport function AuditLogExportLogs({\n  exports,\n  webExportUrl,\n  gitExportUrl,\n  chunksPerDownload,\n  downloadWebExportUrl,\n  downloadGitExportUrl,\n  showGitExportButton,\n}: AuditLogExportLogsProps) {\n  const [getExports, setExports] = useState((): AuditLogExport[] => exports)\n\n  const handleSubmit = (response: ExportSubmitResponse) => {\n    if (response.errors.length < 1) {\n      if (Array.isArray(response.exports) && response.exports.length > 0) {\n        setExports(previous => {\n          return [...response.exports, ...previous]\n        })\n      }\n    }\n  }\n\n  const gitButtonProps = {\n    exportUrl: gitExportUrl,\n    exportType: ExportType.Git,\n    radioRange: ['1', '3', '7'] as RadioRange,\n    onSubmit: handleSubmit,\n  }\n  const webButtonProps = {\n    exportUrl: webExportUrl,\n    exportType: ExportType.Web,\n    radioRange: ['7', '30', '180'] as RadioRange,\n    onSubmit: handleSubmit,\n  }\n\n  return (\n    <div>\n      <Box\n        className=\"export-buttons\"\n        sx={{\n          borderWidth: 1,\n          borderStyle: 'solid',\n          borderColor: 'border.default',\n          borderRadius: 2,\n          marginBottom: 4,\n        }}\n      >\n        {showGitExportButton && (\n          <Box\n            sx={{\n              borderBottomWidth: 1,\n              borderBottomStyle: 'solid',\n              borderBottomColor: 'border.default',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              padding: 2,\n              paddingRight: 3,\n              paddingLeft: 3,\n            }}\n          >\n            <Box sx={{display: 'flex', flexDirection: 'column'}}>\n              <Heading as=\"h3\" sx={{fontSize: 2, fontWeight: 'bold'}}>\n                Export Git activity\n              </Heading>\n              <span>Download Git activity limited to the last 7 days</span>\n            </Box>\n            <div>\n              <ExportButton {...gitButtonProps} />\n            </div>\n          </Box>\n        )}\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            padding: 2,\n            paddingRight: 3,\n            paddingLeft: 3,\n          }}\n        >\n          <Box sx={{display: 'flex', flexDirection: 'column'}}>\n            <Heading as=\"h3\" sx={{fontSize: 2, fontWeight: 'bold'}}>\n              Export application events\n            </Heading>\n            <span>Download application event data up to the last 180 days in CSV or JSON</span>\n          </Box>\n          <div>\n            <ExportButton {...webButtonProps} />\n          </div>\n        </Box>\n      </Box>\n      <Heading\n        as=\"h3\"\n        sx={{\n          fontSize: 3,\n          borderBottomWidth: 1,\n          borderBottomStyle: 'solid',\n          borderColor: 'border.subtle',\n          marginBottom: 4,\n        }}\n      >\n        Export history\n        <p className=\"f6 lh-condensed\">Last 30 Days</p>\n      </Heading>\n      <Box\n        className=\"export-history-container\"\n        sx={{\n          borderWidth: 1,\n          borderStyle: 'solid',\n          borderColor: 'border.default',\n          borderRadius: 2,\n          marginBottom: 2,\n        }}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            height: 48,\n            fontSize: 2,\n            backgroundColor: 'canvas.subtle',\n            borderBottomWidth: 1,\n            borderBottomStyle: 'solid',\n            borderBottomColor: 'border.default',\n          }}\n        >\n          <Text sx={{paddingLeft: 3}}>{getExports.length} items</Text>\n        </Box>\n        {exportList(getExports, chunksPerDownload, downloadWebExportUrl, downloadGitExportUrl)}\n      </Box>\n    </div>\n  )\n}\n\nfunction exportList(\n  list: AuditLogExport[],\n  chunksPerDownload: number,\n  downloadWebExportUrl: string,\n  downloadGitExportUrl: string,\n) {\n  if (list.length === 0) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          paddingTop: 2,\n          paddingBottom: 2,\n        }}\n      >\n        <Heading as=\"h4\" sx={{fontSize: 3}} data-testid=\"missing-exports-message\">\n          We couldn&apos;t find any exports.\n        </Heading>\n      </Box>\n    )\n  } else {\n    return list.map((item, idx) => {\n      const props = {item, chunksPerDownload, downloadWebExportUrl, downloadGitExportUrl}\n      return (\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n          }}\n          data-testid={`export-${idx}`}\n          key={idx}\n        >\n          <Link href={`/${item.actor_name}`}>\n            <GitHubAvatar\n              sx={{marginLeft: 3, marginRight: 3}}\n              src={item.actor_url}\n              alt={`${item.actor_name} profile`}\n            />\n          </Link>\n          <Box\n            sx={{\n              borderTopWidth: idx === 0 ? 0 : 1,\n              borderTopStyle: 'solid',\n              borderTopColor: 'border.default',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              width: '100%',\n              paddingTop: 2,\n              paddingBottom: 2,\n              paddingRight: 2,\n            }}\n          >\n            <Box sx={{display: 'flex', flexDirection: 'column'}}>\n              <Heading as=\"h4\" sx={{fontSize: 2, fontWeight: 'normal'}}>\n                <strong>{item.actor_name}</strong> — {item.export_type}\n              </Heading>\n              <span>\n                Requested <RelativeTime datetime={item.created_at} /> · {item.query_phrase}\n              </span>\n            </Box>\n            <ExportDownloadButton {...props} />\n          </Box>\n        </Box>\n      )\n    })\n  }\n}\n\ntry{ AuditLogExportLogs.displayName ||= 'AuditLogExportLogs' } catch {}","import {registerReactPartial} from '@github-ui/react-core/register-partial'\nimport {AuditLogExportLogs} from './AuditLogExportLogs'\n\nregisterReactPartial('audit-log-export-logs', {\n  Component: AuditLogExportLogs,\n})\n","import type {NavigatorUA} from './@types/user-agent-data'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\n\nexport type NavigatorUserAgent = NavigatorUA\n\nexport const OS = {\n  Android: 'Android',\n  iOS: 'iOS',\n  macOS: 'macOS',\n  Windows: 'Windows',\n  Linux: 'Linux',\n  Unknown: 'Unknown',\n}\nexport type OS = (typeof OS)[keyof typeof OS]\n\nexport type OSInformation = {\n  os: OS\n  isAndroid: boolean\n  isIOS: boolean\n  isLinux: boolean\n  isMacOS: boolean\n  isWindows: boolean\n  isDesktop: boolean\n  isMobile: boolean\n}\n\nexport function getOS(): OSInformation {\n  let os: OS = OS.Unknown\n  let isMobileOS = false\n  if (ssrSafeWindow) {\n    // TypeScript doesn't 'know' about userAgentData yet\n    const navigator = ssrSafeWindow.navigator as Navigator & NavigatorUA\n    const userAgent = navigator.userAgent\n    const platform = navigator?.userAgentData?.platform || navigator.platform\n    const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K', 'macOS']\n    const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE']\n    const iosPlatforms = ['iPhone', 'iPad', 'iPod']\n\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      os = OS.macOS\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      os = OS.iOS\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      os = OS.Windows\n    } else if (/Android/.test(userAgent)) {\n      os = OS.Android\n    } else if (/Linux/.test(platform)) {\n      os = OS.Linux\n    }\n    isMobileOS = navigator?.userAgentData?.mobile ?? (os === OS.Android || os === OS.iOS)\n  }\n\n  return {\n    os,\n    isAndroid: os === OS.Android,\n    isIOS: os === OS.iOS,\n    isMacOS: os === OS.macOS,\n    isWindows: os === OS.Windows,\n    isLinux: os === OS.Linux,\n    isDesktop: os === OS.macOS || os === OS.Windows || os === OS.Linux,\n    isMobile: isMobileOS,\n  }\n}\n\nexport function isMobile(): boolean {\n  return getOS().isMobile\n}\n\nexport function isDesktop(): boolean {\n  return getOS().isDesktop\n}\n\nexport function isAndroid(): boolean {\n  return getOS().isAndroid\n}\n\nexport function isIOS(): boolean {\n  return getOS().isIOS\n}\n\nexport function isMacOS(): boolean {\n  return getOS().isMacOS\n}\n\nexport function isWindows(): boolean {\n  return getOS().isWindows\n}\n\nexport function isLinux(): boolean {\n  return getOS().isLinux\n}\n","export class DeferredRegistry<T> {\n  private registrationEntries: Record<\n    string,\n    {\n      promise: Promise<T>\n      resolve?: (r: T) => void\n    }\n  > = {}\n\n  public register(name: string, registration: T) {\n    const entry = this.registrationEntries[name]\n    if (entry) {\n      entry.resolve?.(registration)\n    } else {\n      this.registrationEntries[name] = {\n        promise: Promise.resolve(registration),\n      }\n    }\n  }\n\n  public getRegistration(name: string): Promise<T> {\n    this.registrationEntries[name] ||= new Deferred()\n    return this.registrationEntries[name].promise\n  }\n}\n\nclass Deferred<T> {\n  declare promise\n  declare resolve: (r: T) => void\n\n  constructor() {\n    this.promise = new Promise<T>(resolve => {\n      this.resolve = resolve\n    })\n  }\n}\n","import type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\ninterface ReactPartialAnchor {\n  /**\n   * DO NOT USE THIS PROPERTY DIRECTLY. It is meant to be used with useExternalAnchor and useOnAnchorClick\n   */\n  __wrapperElement: ReactPartialAnchorElement\n}\n\nexport interface ReactPartialAnchorProps {\n  reactPartialAnchor?: ReactPartialAnchor\n}\n\nexport function usePartialAnchorProps(\n  anchorElement: ReactPartialAnchorElement | undefined | null,\n): ReactPartialAnchorProps {\n  useEffect(() => {\n    const anchor = anchorElement?.anchor\n\n    if (!anchor) {\n      return\n    }\n\n    if ('disabled' in anchor) {\n      anchor.disabled = false\n    }\n    anchor.classList.remove('cursor-wait')\n  }, [anchorElement])\n\n  if (!anchorElement) {\n    return {}\n  }\n\n  return {\n    reactPartialAnchor: {\n      __wrapperElement: anchorElement,\n    },\n  }\n}\n\nexport function useExternalAnchor(reactPartialAnchor: ReactPartialAnchor) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor || null)\n  const [open, setOpen] = useState(false)\n\n  const onClick = useCallback(() => {\n    // toggle the open state when clicked\n    setOpen(!open)\n  }, [open, setOpen])\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    ref.current.setAttribute('aria-expanded', open.toString())\n    ref.current.setAttribute('aria-haspopup', 'true')\n  }, [ref, open])\n\n  useOnAnchorClick(reactPartialAnchor, onClick)\n\n  return {\n    ref,\n    open,\n    setOpen,\n  }\n}\n\nexport function useOnAnchorClick(reactPartialAnchor: ReactPartialAnchor, onClick: (event: MouseEvent) => void) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor)\n\n  useEffect(() => {\n    const element = ref.current\n    if (!element) {\n      return\n    }\n\n    element.addEventListener('click', onClick)\n    return () => element.removeEventListener('click', onClick)\n  }, [ref, onClick])\n}\n\nexport type PropsWithPartialAnchor<T> = T & Required<ReactPartialAnchorProps>\n","import {DeferredRegistry} from './deferred-registry'\n\nexport interface PartialRegistration {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Component: React.ComponentType<any>\n}\n\nexport const partialRegistry = new DeferredRegistry<PartialRegistration>()\n\nexport function getReactPartial(appName: string) {\n  return partialRegistry.getRegistration(appName)\n}\n","import {controller} from '@github/catalyst'\nimport {getReactPartial} from './react-partial-registry'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {ReactBaseElement} from './ReactBaseElement'\nimport {PartialEntry} from './PartialEntry'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\n\n// What is this silliness? Is it react or a web component?!\n// It's a web component we use to bootstrap react partials within the monolith.\n@controller\nclass ReactPartialElement extends ReactBaseElement<EmbeddedPartialData> {\n  nameAttribute = 'partial-name'\n\n  async getReactNode(embeddedData: EmbeddedPartialData) {\n    const {Component} = await getReactPartial(this.name)\n\n    // Some React Partials will be wrapped in a react-partial-anchor, which is used to conditionally render the Partial\n    const anchorElement = this.closest<ReactPartialAnchorElement>('react-partial-anchor')\n\n    return (\n      <PartialEntry\n        partialName={this.name}\n        embeddedData={embeddedData}\n        Component={Component}\n        wasServerRendered={this.hasSSRContent}\n        ssrError={this.ssrError}\n        anchorElement={anchorElement}\n      />\n    )\n  }\n}\n","import {partialRegistry, type PartialRegistration} from './react-partial-registry'\n// Import the web component to get it registered on the window\nimport './ReactPartialElement'\n\n// NOTE: if the signature of this method changes, also update the react-partial-name ESLint rule\n// /workspaces/github/ui/packages/eslint-plugin-github-monorepo/rules/react-partial-name.js\nexport function registerReactPartial(name: string, registration: PartialRegistration) {\n  partialRegistry.register(name, registration)\n}\n","import safeStorage from '@github-ui/safe-storage'\n\nconst {getItem, setItem, removeItem} = safeStorage('localStorage')\nconst REACT_PROFILING_ENABLED = 'REACT_PROFILING_ENABLED'\n\ninterface ReactProfilingModeMethods {\n  enable: () => void\n  disable: () => void\n  isEnabled: () => boolean\n}\n\nconst ReactProfilingMode: ReactProfilingModeMethods = {\n  enable: () => setItem(REACT_PROFILING_ENABLED, 'true'),\n  disable: () => removeItem(REACT_PROFILING_ENABLED),\n  isEnabled: () => !!getItem(REACT_PROFILING_ENABLED),\n}\n\nexport default ReactProfilingMode\n","export interface TestIdProps {\n  /** Test ID to be queried by automated testing suites */\n  'data-testid'?: string\n}\n\nexport const testIdProps = (value: string): TestIdProps => {\n  return {'data-testid': value}\n}\n","import {ssrSafeWindow} from '@github-ui/ssr-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {useEffect, useLayoutEffect as unsafe_useLayoutEffect} from 'react'\n\n/**\n * Provides a safe version of `useLayoutEffect` that calls to `useEffect` on the server.\n * This is useful for components that use `useLayoutEffect` but are rendered on the server,\n * since useLayoutEffect cannot run on the server and warns in that environment\n */\nexport const useLayoutEffect =\n  typeof ssrSafeWindow?.document?.createElement !== 'undefined' ? unsafe_useLayoutEffect : useEffect\n","/**\n * A Fetch function which will automatically add the correct headers for\n * making requests to GitHub application servers as long as the associated controller methods allow it.\n * Track down the associated controller method and confirm the controller includes\n * ApplicationController::VerifiedFetchDependency as well as `allow_verified_fetch only:`\n * to the relevant controller methods.\n *\n * ## Example\n *\n *     const onClick = async () => {\n *       const resp = await verifiedFetch('/foo', {method: 'POST'})\n *       if (resp.ok) console.log('The response was', await resp.text())\ntest.\n *     }\n */\nexport function verifiedFetch(path: string, init: RequestInit = {}): Promise<Response> {\n  assertRelativePathOrSameOrigin(path)\n\n  const headers: HeadersInit = {\n    ...init.headers,\n    'GitHub-Verified-Fetch': 'true',\n    'X-Requested-With': 'XMLHttpRequest',\n  }\n\n  return fetch(path, {...init, headers})\n}\n\nexport interface JSONRequestInit extends Omit<RequestInit, 'body'> {\n  body?: unknown\n}\n\nfunction assertRelativePathOrSameOrigin(path: string) {\n  if (process.env.NODE_ENV === 'test' && !window.location.origin) return\n  const url = new URL(path, window.location.origin)\n  if (url.origin !== window.location.origin) {\n    throw new Error('Can not make cross-origin requests from verifiedFetch')\n  }\n}\n\n/**\n * A Fetch function which will automatically add the correct headers for\n * making JSON requests\n *\n * Will also `JSON.stringify` the request body if provided.\n\n * ## Example\n *\n *     const onClick = async () => {\n *       const resp = await verifiedFetchJSON('/foo', {body: {foo: 'bar'}, method: 'POST'})\n *       if (resp.ok) console.log('The response was', await resp.json())\n *     }\n */\nexport function verifiedFetchJSON(path: string, init?: JSONRequestInit): Promise<Response> {\n  const initHeaders: HeadersInit = init?.headers ?? {}\n\n  const headers: HeadersInit = {\n    ...initHeaders,\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  }\n\n  const body = init?.body ? JSON.stringify(init.body) : undefined\n\n  return verifiedFetch(path, {...init, body, headers})\n}\n\n/**\n * A Fetch function which will automatically add the GitHub-Is-React header for\n * making JSON requests. It will in turn call verifiedFetchJSON.\n *\n * Using this in React components to fetch data enables us to track these\n * requests in Datadog in the request.dist.referrer metric.\n */\nexport function reactFetch(path: string, init: RequestInit = {}): Promise<Response> {\n  const headers: HeadersInit = {\n    ...init.headers,\n    'GitHub-Is-React': 'true',\n  }\n\n  return verifiedFetch(path, {...init, headers})\n}\n\n/**\n * A Fetch function which will automatically add the GitHub-Is-React header for\n * making JSON requests. It will in turn call verifiedFetchJSON.\n *\n * Using this in React components to fetch data enables us to track these\n * requests in Datadog in the request.dist.referrer metric.\n */\nexport function reactFetchJSON(path: string, init?: JSONRequestInit): Promise<Response> {\n  const initHeaders: HeadersInit = init?.headers ?? {}\n\n  const headers: HeadersInit = {\n    ...initHeaders,\n    'GitHub-Is-React': 'true',\n  }\n\n  return verifiedFetchJSON(path, {...init, headers})\n}\n","import {Text} from '@primer/react'\nimport capitalize from 'lodash-es/capitalize'\nimport type {ReactNode} from 'react'\nimport {Fragment, memo} from 'react'\n\nimport {isMacOS} from '@github-ui/get-os'\n\nexport interface KeyboardKeyProps {\n  /**\n   * The keys involved in this shortcut. These should be the full names of the keys as would\n   * be returned by `KeyboardEvent.key` (e.g. \"Control\", \"Shift\", \"ArrowUp\", \"a\", etc.).\n   *\n   * Combine keys with the \"+\" character to form chords. To represent the \"+\" key, use \"Plus\".\n   *\n   * Combine chords/keys with \" \" to form sequences that should be pressed one after the other. For example, \"a b\"\n   * represents \"a then b\". To represent the \" \" key, use \"Space\".\n   *\n   * The fake key name \"Mod\" can be used to represent \"Command\" on macOS and \"Control\" on other platforms.\n   *\n   * See https://github.com/github/hotkey for format details.\n   */\n  keys: string\n  /**\n   * Control the display format. Condensed is most useful in menus and tooltips, while\n   * the full form is better for prose.\n   */\n  format?: KeyboardKeyFormat\n  /**\n   * Set to `onEmphasis` for display on emphasis colors.\n   */\n  variant?: KeyboardKeyVariant\n}\n\ntype KeyboardKeyFormat = 'condensed' | 'full'\n\ntype KeyboardKeyVariant = 'normal' | 'onEmphasis'\n\n// In the below records, we don't intend to cover every single possible key - only those that\n// would be realistically used in shortcuts. For example, the Pause/Break key is not necessary\n// because it is not found on many keyboards.\n\n/**\n * Short-form iconic versions of keys. These should be intuitive and match icons on keyboards.\n */\nconst condensedKeys: Record<string, string> = {\n  alt: isMacOS() ? '⌥' : 'Alt', // the alt key _is_ the option key on MacOS - in the browser there is no \"option\" key\n  control: '⌃',\n  shift: '⇧',\n  meta: isMacOS() ? '⌘' : 'Win',\n  mod: isMacOS() ? '⌘' : '⌃',\n  pageup: 'PgUp',\n  pagedown: 'PgDn',\n  arrowup: '↑',\n  arrowdown: '↓',\n  arrowleft: '←',\n  arrowright: '→',\n  plus: '+', // needed to allow +-separated key names\n  backspace: '⌫',\n  delete: 'Del',\n  space: '␣', // allow consumers to use the word \"Space\" even though it's not the browser key name, because it's more readable in props\n  tab: '⇥',\n  enter: '⏎',\n  escape: 'Esc',\n  function: 'Fn',\n  capslock: 'CapsLock',\n  insert: 'Ins',\n  printscreen: 'PrtScn',\n}\n\n/**\n * Specific key displays for 'full' format. We still do show some icons (ie punctuation)\n * because that's more intuitive, but for the rest of keys we show the standard key name.\n */\nconst fullKeys: Record<string, string> = {\n  alt: isMacOS() ? 'Option' : 'Alt',\n  mod: isMacOS() ? 'Command' : 'Control',\n  '+': 'Plus',\n  pageup: 'Page Up',\n  pagedown: 'Page Down',\n  arrowup: 'Up Arrow',\n  arrowdown: 'Down Arrow',\n  arrowleft: 'Left Arrow',\n  arrowright: 'Right Arrow',\n  capslock: 'Caps Lock',\n  printscreen: 'Print Screen',\n}\n\n/**\n * Accessible key names intended to be read by a screen reader. This prevents screen\n * readers from expressing punctuation in speech, ie, reading a long pause instead of the\n * word \"period\".\n */\nconst keyDescriptions: Record<string, string> = {\n  alt: isMacOS() ? 'option' : 'alt',\n  meta: isMacOS() ? 'command' : 'Windows',\n  mod: isMacOS() ? 'command' : 'control',\n  // Screen readers may not be able to pronounce concatenated words - this provides a better experience\n  pageup: 'page up',\n  pagedown: 'page down',\n  arrowup: 'up arrow',\n  arrowdown: 'down arrow',\n  arrowleft: 'left arrow',\n  arrowright: 'right arrow',\n  capslock: 'caps lock',\n  printscreen: 'print screen',\n  // We don't need to represent _every_ symbol - only those found on standard keyboards.\n  // Other symbols should be avoided as keyboard shortcuts anyway.\n  // These should match the colloqiual names of the keys, not the names of the symbols. Ie,\n  // \"Equals\" not \"Equal Sign\", \"Dash\" not \"Minus\", \"Period\" not \"Dot\", etc.\n  '`': 'backtick',\n  '~': 'tilde',\n  '!': 'exclamation point',\n  '@': 'at',\n  '#': 'hash',\n  $: 'dollar sign',\n  '%': 'percent',\n  '^': 'caret',\n  '&': 'ampersand',\n  '*': 'asterisk',\n  '(': 'left parenthesis',\n  ')': 'right parenthesis',\n  _: 'underscore',\n  '-': 'dash',\n  '+': 'plus',\n  '=': 'equals',\n  '[': 'left bracket',\n  '{': 'left curly brace',\n  ']': 'right bracket',\n  '}': 'right curly brace',\n  '\\\\': 'backslash',\n  '|': 'pipe',\n  ';': 'semicolon',\n  ':': 'colon',\n  \"'\": 'single quote',\n  '\"': 'double quote',\n  ',': 'comma',\n  '<': 'left angle bracket',\n  '.': 'period',\n  '>': 'right angle bracket',\n  '/': 'forward slash',\n  '?': 'question mark',\n  ' ': 'space',\n}\n\n/**\n * Consistent sort order for modifier keys. There should never be more than one non-modifier\n * key in a shortcut, so we don't need to worry about sorting those - we just put them at\n * the end.\n */\nconst keySortPriorities = {\n  control: 1,\n  meta: 2,\n  alt: 3,\n  option: 4,\n  shift: 5,\n  function: 6,\n  /** Maximum value for pushing other keys to end. */\n  DEFAULT: 7,\n} as const\n\nfunction isValidKeySortPriority(priority: string): priority is keyof typeof keySortPriorities {\n  return priority in keySortPriorities\n}\n\nfunction getKeySortPriorityValue(priority: string) {\n  if (isValidKeySortPriority(priority)) {\n    return keySortPriorities[priority]\n  }\n  return keySortPriorities.DEFAULT\n}\n\n/** `kbd` element with style resets. */\nconst Kbd = ({children}: {children: ReactNode}) => (\n  <Text\n    as=\"kbd\"\n    sx={{\n      color: 'inherit',\n      fontFamily: 'inherit',\n      fontSize: 'inherit',\n      border: 'none',\n      background: 'none',\n      boxShadow: 'none',\n      p: 0,\n      lineHeight: 'unset',\n      position: 'relative',\n      overflow: 'visible',\n      verticalAlign: 'baseline',\n    }}\n  >\n    {children}\n  </Text>\n)\n\ninterface KeyProps {\n  name: string\n  format: KeyboardKeyFormat\n}\n\nconst keyToAccessibleString = (name: string) => keyDescriptions[name] || name\n\n/** A single key in a shortcut. */\nconst Key = ({name, format}: KeyProps) => (\n  // We represent each individual key as a <kbd> inside a single container <kbd> element.\n  // This requires a bit more styling to override the defaults but is the most semantic way\n  // to do it:\n  //\n  //  > To describe an input comprised of multiple keystrokes, you can nest multiple <kbd>\n  //  > elements, with an outer <kbd> element representing the overall input and each\n  //  > individual keystroke or component of the input enclosed within its own <kbd>.\n  //  > (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/kbd#representing_keystrokes_within_an_input)\n  <>\n    <span className=\"sr-only\">{keyToAccessibleString(name)}</span>\n    <span aria-hidden>{(format === 'condensed' ? condensedKeys[name] : fullKeys[name]) ?? capitalize(name)}</span>\n  </>\n)\n\n/** Split and sort the chord keys in standard order. */\nconst splitChord = (chord: string) =>\n  chord\n    .split('+')\n    .map(k => k.toLowerCase())\n    .sort(compareLowercaseKeys)\n\nconst compareLowercaseKeys = (a: string, b: string) => getKeySortPriorityValue(a) - getKeySortPriorityValue(b)\n\nconst chordToAccessibleString = (chord: string) => splitChord(chord).map(keyToAccessibleString).join(' ')\n\nconst Chord = ({keys, format = 'condensed', variant = 'normal'}: KeyboardKeyProps) => (\n  <Text\n    sx={{\n      display: 'inline-flex',\n      bg: variant === 'onEmphasis' ? 'transparent' : 'canvas.default',\n      color: variant === 'onEmphasis' ? 'fg.onEmphasis' : 'fg.muted',\n      border: '1px solid',\n      borderColor: 'border.default',\n      borderRadius: 2,\n      fontWeight: 'normal',\n      fontFamily: 'normal',\n      fontSize: 0,\n      p: 1,\n      gap: '0.5ch',\n      boxShadow: 'none',\n      verticalAlign: 'baseline',\n      overflow: 'hidden',\n      lineHeight: '10px',\n    }}\n  >\n    {splitChord(keys).map((k, i) => (\n      <Fragment key={i}>\n        {i > 0 && format === 'full' ? (\n          <span aria-hidden> + </span> // hiding the plus sign helps screen readers be more concise\n        ) : (\n          ' ' // space is nonvisual due to flex layout but critical for labelling / screen readers\n        )}\n\n        <Key name={k} format={format} />\n      </Fragment>\n    ))}\n  </Text>\n)\n\nconst splitSequence = (sequence: string) => sequence.split(' ')\n\nconst sequenceToAccessibleString = (sequence: string) =>\n  splitSequence(sequence).map(chordToAccessibleString).join(', then ')\n\n/**\n * A consistent and accessible keyboard shortcut representation.\n */\n// KeyboardKey is a good candidate for memoizing since props will almost never change\nexport const KeyboardKey = memo(({keys, format = 'condensed', variant}: KeyboardKeyProps) => (\n  <Kbd>\n    {splitSequence(keys).map((c, i) => (\n      <Fragment key={i}>\n        {\n          //  Since we audibly separate individual keys in chord with space, we need some other separator for chords in a sequence\n          i > 0 && (\n            <>\n              <span className=\"sr-only\">, then</span>{' '}\n            </>\n          )\n        }\n        <Chord keys={c} format={format} variant={variant} />\n      </Fragment>\n    ))}\n  </Kbd>\n))\nKeyboardKey.displayName = 'KeyboardKey'\n\n/**\n * AVOID: `KeyboardKey` is nearly always sufficient for providing both visible and accessible keyboard hints, and will\n * result in a good screen reader experience when used as the target for `aria-describedby` and `aria-labelledby`.\n * However, there may be cases where we need a plain string version, such as when building `aria-label` or\n * `aria-description`. In that case, this plain string builder can be used instead.\n *\n * NOTE that this string should _only_ be used when building `aria-label` or `aria-description` props (never rendered\n * to the visible DOM!) and should nearly always also be paired with a visible hint for sighted users. The only\n * exception is in cases where keyboard shortcuts exist solely to provide accessible alternatives to inaccessible\n * visible UI.\n */\nexport const getAccessibleKeyboardKeyString = (keys: string) => sequenceToAccessibleString(keys)\n\ntry{ Kbd.displayName ||= 'Kbd' } catch {}\ntry{ Chord.displayName ||= 'Chord' } catch {}","import {useState} from 'react'\nimport type {BrowserHistory, MemoryHistory} from '@remix-run/router'\nimport {Router} from 'react-router-dom'\n// eslint-disable-next-line no-restricted-imports\nimport {useHydratedEffect} from '@github-ui/use-hydrated-effect'\n\ntype Props = {\n  children: React.ReactNode\n  history: BrowserHistory | MemoryHistory\n}\n\nexport function PartialRouter({children, history}: Props) {\n  const [state, setState] = useState({\n    location: history.location,\n  })\n\n  useHydratedEffect(() => history.listen(setState), [history])\n\n  return (\n    <Router location={state.location} navigator={history}>\n      {children}\n    </Router>\n  )\n}\n\ntry{ PartialRouter.displayName ||= 'PartialRouter' } catch {}","// Think of this as the entry point into the framework\nimport React from 'react'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {BaseProviders} from './BaseProviders'\nimport type {BrowserHistory} from '@remix-run/router'\nimport {createMemoryHistory} from '@remix-run/router'\nimport {AppContextProvider} from './AppContextProvider'\nimport {PartialRouter} from './PartialRouter'\nimport {CommonElements} from './CommonElements'\nimport {createBrowserHistory} from './create-browser-history'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {usePartialAnchorProps} from './react-partial-anchor'\n\ninterface Props {\n  partialName: string\n  embeddedData: EmbeddedPartialData\n  Component: React.ComponentType\n  wasServerRendered: boolean\n  ssrError?: HTMLScriptElement\n  anchorElement?: ReactPartialAnchorElement | null\n}\n\nexport function PartialEntry({\n  partialName,\n  embeddedData,\n  Component,\n  wasServerRendered,\n  ssrError,\n  anchorElement,\n}: Props) {\n  // Create a ref to track the browser history:\n  const historyRef = React.useRef<BrowserHistory>()\n  const window = globalThis.window as Window | undefined\n\n  // For linking to work, we can just pass a dummy pathname here. We may consider plumbing the actual path in\n  if (!historyRef.current) {\n    historyRef.current = !window\n      ? createMemoryHistory({initialEntries: [{pathname: '/'}]})\n      : createBrowserHistory({window})\n  }\n  const history = historyRef.current\n  const partialAnchorProps = usePartialAnchorProps(anchorElement)\n\n  // Wrap the partial in an AppContextProvider and static Router so that react-core links\n  // will be functional.\n  return (\n    <BaseProviders appName={partialName} wasServerRendered={wasServerRendered}>\n      <AppContextProvider history={history} routes={[]}>\n        <PartialRouter history={history}>\n          <Component {...embeddedData.props} {...(partialAnchorProps as object)} />\n          <CommonElements ssrError={ssrError} />\n        </PartialRouter>\n      </AppContextProvider>\n    </BaseProviders>\n  )\n}\n\ntry{ PartialEntry.displayName ||= 'PartialEntry' } catch {}","import {target} from '@github/catalyst'\nimport {createRoot, hydrateRoot} from 'react-dom/client'\nimport type {createRoot as createRootType, hydrateRoot as hydrateRootType, Root} from 'react-dom/client'\nimport React from 'react'\nimport ReactProfilingMode from '@github-ui/react-profiling-mode'\nimport {EXPECTED_ERRORS} from './expected-errors'\nimport {sendStats} from '@github-ui/stats'\n\ntype ReactDOM = {\n  createRoot: typeof createRootType\n  hydrateRoot: typeof hydrateRootType\n}\n\nconst REACT_INVARIANT_ERROR_REGEX = /Minified React error #(?<invariant>\\d+)/\n\nexport abstract class ReactBaseElement<T> extends HTMLElement {\n  @target embeddedData: HTMLScriptElement | undefined\n  @target ssrError: HTMLScriptElement | undefined\n  @target reactRoot: HTMLElement | undefined\n  private root: Root | undefined\n\n  abstract nameAttribute: string\n  abstract getReactNode(embeddedData: T): Promise<React.ReactNode>\n\n  protected get name() {\n    return this.getAttribute(this.nameAttribute) as string\n  }\n\n  private get embeddedDataText() {\n    const text = this.embeddedData?.textContent\n\n    if (!text) {\n      throw new Error(`No embedded data provided for react element ${this.name}`)\n    }\n\n    return text\n  }\n\n  get hasSSRContent() {\n    return this.getAttribute('data-ssr') === 'true'\n  }\n\n  connectedCallback() {\n    this.renderReact()\n  }\n\n  disconnectedCallback() {\n    this.root?.unmount()\n    this.root = undefined\n  }\n\n  private async renderReact() {\n    if (!this.reactRoot) throw new Error('No react root provided')\n    let reactDom: ReactDOM = {\n      createRoot,\n      hydrateRoot,\n    }\n\n    // Override the react-dom import if we're in profiling mode\n    if (ReactProfilingMode.isEnabled()) {\n      reactDom = await this.getReactDomWithProfiling()\n    }\n\n    const embeddedData = JSON.parse(this.embeddedDataText) as T\n    const ssrErrorText = this.ssrError?.textContent\n    const node = await this.getReactNode(embeddedData)\n    const baseNode = <React.StrictMode>{node}</React.StrictMode>\n\n    if (ssrErrorText) {\n      this.logSSRError(ssrErrorText)\n    }\n\n    if (this.hasSSRContent) {\n      /**\n       * Styled-components automatically looks for style tags to hydrate on first page load, but will not detect them\n       * if they are added after the initial page load. This causes a hydration error because React isn't expecting\n       * a style tag within the app. To work around this, we need to manually move the style tags to the head before\n       * hydrating the app.\n       *\n       * During hydration, styled-components will create a new style tag which matches the one we moved to the head.\n       * This means that after hydration, we can safely remove the style tag we manually moved to the head.\n       */\n      const styles = this.querySelector('style[data-styled=\"true\"]')\n      if (styles) document.head.appendChild(styles)\n\n      // Hydrate the react app\n      // onRecoverableError is disabled until we have a react version with this fix in:\n      // https://github.com/facebook/react/pull/25692\n      this.root = reactDom.hydrateRoot(this.reactRoot, baseNode, {\n        onRecoverableError: error => {\n          if (!(error instanceof Error)) return\n\n          const match = REACT_INVARIANT_ERROR_REGEX.exec(error.message)\n          const invariant = String(match?.groups?.invariant)\n\n          sendStats({\n            incrementKey: 'REACT_HYDRATION_ERROR',\n            incrementTags: {\n              appName: this.name,\n              invariant,\n            },\n          })\n        },\n      })\n\n      // Remove the manually moved style tag after hydration\n      if (styles) {\n        // Wait until things are idle to remove the style tag. If we do it immediately, we can cause a flash of unstyled content.\n        requestIdleCallback(() => {\n          // styles could have already been removed by Turbo if a navigation happens quickly. Only remove it from the DOM if it's still there.\n          styles.parentElement?.removeChild(styles)\n        })\n      }\n    } else {\n      this.root = reactDom.createRoot(this.reactRoot)\n      this.root.render(baseNode)\n    }\n\n    this.classList.add('loaded')\n  }\n\n  private getReactDomWithProfiling() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return import('react-dom/profiling') as any as Promise<ReactDOM>\n  }\n\n  private logSSRError(ssrErrorText: string) {\n    if (EXPECTED_ERRORS[ssrErrorText]) {\n      // eslint-disable-next-line no-console\n      return console.error('SSR failed with an expected error:', EXPECTED_ERRORS[ssrErrorText])\n    }\n\n    try {\n      const error = JSON.parse(ssrErrorText) as PlatformJavascriptError\n      const stacktrace = parseFailbotStacktrace(error)\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', `${error.type}: ${error.value}\\n`, error, stacktrace)\n    } catch {\n      /**\n       * In the event we couldn't log the error, we should not break the application\n       */\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', ssrErrorText, 'unable to parse as json')\n    }\n  }\n}\n\nfunction parseFailbotStacktrace(error: PlatformJavascriptError) {\n  if (!error.stacktrace) return ''\n  let prefix = '\\n '\n  const stack = error.stacktrace.map((frame: PlatformStackframe) => {\n    const {function: func, filename, lineno, colno} = frame\n    const line = `${prefix} at ${func} (${filename}:${lineno}:${colno})`\n    prefix = ' '\n    return line\n  })\n  return stack.join('\\n')\n}\n\ntry{ REACT_INVARIANT_ERROR_REGEX.displayName ||= 'REACT_INVARIANT_ERROR_REGEX' } catch {}"],"names":["ExportButton","exportUrl","exportType","radioRange","onSubmit","isOpen","setIsOpen","useState","buttonRef","useRef","returnFocusRef","visibleErrorMessage","setVisibleErrorMessage","formatType","setFormatType","queryPhrase","setPhrase","first","second","third","exportRange","setExportRange","calculateDate","d","Date","setDate","getDate","value","formatDateQuery","formatISO","representation","formatDateRangeQuery","startDate","endDate","dateQuery","setDateQuery","Number","handleDatePicker","range","from","to","handleClose","extractDateRangeFromQuery","start","end","prefix","dq","startsWith","substring","length","trim","now","r","split","handleSubmit","formData","FormData","append","toString","q","response","verifiedFetch","method","body","headers","Accept","jsonData","json","errors","join","dialogTestId","buttonTestId","buttonTitle","dialogTitle","dialogSubtitle","isWebExport","dateRangePadding","Button","ref","onClick","data-testid","Dialog","title","onDismiss","area-labelledby","sx","overflow","div","Header","id","Box","display","flexDirection","Heading","as","fontSize","fontWeight","span","padding","FormControl","Label","TextInput","width","placeholder","leadingVisual","SearchIcon","onChange","e","target","paddingLeft","paddingRight","paddingBottom","borderBottomWidth","borderBottomStyle","borderBottomColor","RadioGroup","name","selectedValue","Radio","defaultChecked","parseInt","paddingTop","checked","Text","DatePicker","variant","maxDate","minDate","showTodayButton","showClearButton","justifyContent","margin","marginLeft","color","mt","alignSelf","alignItems","Flash","ExportType","displayName","ExportDownloadButton","item","chunksPerDownload","downloadWebExportUrl","downloadGitExportUrl","isDownloadMenuOpen","setDownloadMenuOpen","completed","expired","baseUrl","message","format_type","defaultParams","export_id","token","export_type","urlBuilder","params","mergedParams","url","URL","isBrowser","window","location","origin","key","Object","entries","searchParams","steps","totalChunks","total_chunks","i","push","ActionMenu","open","onOpenChange","assign","trailingAction","TriangleDownIcon","Overlay","ActionList","selectionVariant","map","chunkIndex","index","Item","a","className","role","href","pending","AuditLogExportLogs","exports","webExportUrl","gitExportUrl","showGitExportButton","getExports","setExports","Array","isArray","previous","gitButtonProps","Git","webButtonProps","Web","borderWidth","borderStyle","borderColor","borderRadius","marginBottom","p","height","backgroundColor","list","idx","Link","actor_name","GitHubAvatar","marginRight","src","actor_url","alt","borderTopWidth","borderTopStyle","borderTopColor","strong","RelativeTime","datetime","created_at","query_phrase","registerReactPartial","Component","OS","Android","iOS","macOS","Windows","Linux","Unknown","isMacOS","getOS","os","isMobileOS","ssrSafeWindow","navigator","userAgent","platform","userAgentData","macosPlatforms","indexOf","iosPlatforms","windowsPlatforms","test","mobile","isAndroid","isIOS","isWindows","isLinux","isDesktop","isMobile","DeferredRegistry","register","registration","entry","registrationEntries","resolve","promise","Promise","getRegistration","Deferred","constructor","usePartialAnchorProps","anchorElement","useEffect","anchor","disabled","classList","remove","reactPartialAnchor","__wrapperElement","useExternalAnchor","setOpen","useCallback","current","setAttribute","useOnAnchorClick","element","addEventListener","removeEventListener","partialRegistry","ReactPartialElement","ReactBaseElement","getReactNode","embeddedData","appName","closest","PartialEntry","partialName","wasServerRendered","hasSSRContent","ssrError","nameAttribute","controller","getItem","setItem","removeItem","safeStorage","REACT_PROFILING_ENABLED","enable","disable","isEnabled","testIdProps","useLayoutEffect","document","createElement","unsafe_useLayoutEffect","path","init","assertRelativePathOrSameOrigin","fetch","verifiedFetchJSON","JSON","stringify","undefined","reactFetch","reactFetchJSON","condensedKeys","control","shift","meta","mod","pageup","pagedown","arrowup","arrowdown","arrowleft","arrowright","plus","backspace","delete","space","tab","enter","escape","function","capslock","insert","printscreen","fullKeys","keyDescriptions","$","_","keySortPriorities","option","DEFAULT","getKeySortPriorityValue","priority","Kbd","children","fontFamily","border","background","boxShadow","lineHeight","position","verticalAlign","keyToAccessibleString","Key","format","aria-hidden","capitalize","splitChord","chord","k","toLowerCase","sort","compareLowercaseKeys","b","Chord","keys","bg","gap","Fragment","splitSequence","sequence","KeyboardKey","memo","c","PartialRouter","history","state","setState","useHydratedEffect","listen","Router","historyRef","React","globalThis","createBrowserHistory","createMemoryHistory","initialEntries","pathname","partialAnchorProps","BaseProviders","AppContextProvider","routes","props","CommonElements","REACT_INVARIANT_ERROR_REGEX","HTMLElement","getAttribute","embeddedDataText","text","textContent","connectedCallback","renderReact","disconnectedCallback","root","unmount","reactRoot","reactDom","createRoot","hydrateRoot","ReactProfilingMode","getReactDomWithProfiling","parse","ssrErrorText","node","baseNode","logSSRError","styles","querySelector","head","appendChild","onRecoverableError","error","Error","match","exec","invariant","String","groups","sendStats","incrementKey","incrementTags","requestIdleCallback","parentElement","removeChild","render","add","EXPECTED_ERRORS","console","stacktrace","parseFailbotStacktrace","stack","func","filename","lineno","colno","frame","line","type"],"sourceRoot":""}