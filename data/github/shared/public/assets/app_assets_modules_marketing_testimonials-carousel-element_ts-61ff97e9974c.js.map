{"version":3,"file":"chunk-app_assets_modules_marketing_testimonials-carousel-element_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/marketing/helpers.ts","app/assets/modules/marketing/testimonials-carousel-element.ts"],"sourcesContent":["// Breakpoints from https://primer.style/css/support/breakpoints\nconst sm = 544\nconst md = 768\nconst lg = 1012\nconst xl = 1280\nconst breakpoints = {sm, md, lg, xl}\ntype Breakpoints = keyof typeof breakpoints\n\nexport const isGtBreakpoint = (breakpoint: Breakpoints) => {\n  switch (breakpoint) {\n    case 'sm':\n      return window.innerWidth >= sm\n    case 'md':\n      return window.innerWidth >= md\n    case 'lg':\n      return window.innerWidth >= lg\n    case 'xl':\n      return window.innerWidth >= xl\n    default:\n      return false\n  }\n}\n\nexport const isTouchEnabled = () => {\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0\n}\n\nexport const getCookie = (name: string) => {\n  const matches = document.cookie.match(new RegExp(`(?:^|;\\\\s*)${name}\\\\s*=\\\\s*([^;]+)`))\n  return matches ? matches[1] : null\n}\n\nexport const cookieExpiration = (days: number) => {\n  const date = new Date()\n  date.setTime(date.getTime() + days * 24 * 60 * 60 * 1e3)\n  return date.toUTCString()\n}\n\nexport const setCookie = (name: string, value: string, days: number) => {\n  document.cookie = `${name}=${value}; path=/; expires=${cookieExpiration(days)}`\n}\n","import {controller, target, targets} from '@github/catalyst'\nimport {isGtBreakpoint, isTouchEnabled} from '../../modules/marketing/helpers'\n\n@controller\nexport class TestimonialsCarouselElement extends HTMLElement {\n  @target container: HTMLElement\n  @target nextButton: HTMLButtonElement\n  @target prevButton: HTMLButtonElement\n  @target currentDisplay: HTMLSpanElement\n  @target currentAnnounce: HTMLSpanElement\n  @target carousel: HTMLDivElement\n  @targets carouselItems: HTMLElement[]\n  touchStart = 0\n  touchEnd = 0\n  activeIndex = 0\n  canMoveNext = false\n  canMovePrev = false\n\n  connectedCallback() {\n    if (isTouchEnabled()) {\n      this.container.classList.add('testimonials-touch')\n    }\n    // Adjust carousel on window resize\n    new ResizeObserver(() => {\n      this.setCurrentItem(this.activeIndex)\n      this.setCarouselDirections()\n    }).observe(this.carousel as Element)\n  }\n\n  setCarouselDirections = () => {\n    this.canMovePrev = this.activeIndex !== 0\n    // In mobile we only show one item at a time instead of two:\n    this.canMoveNext = isGtBreakpoint('sm') // Hide \"next\" button if last two items are active\n      ? this.activeIndex !== this.carouselItems.length - 2 && this.activeIndex !== this.carouselItems.length - 1\n      : this.activeIndex !== this.carouselItems.length - 1 // Hide \"next\" button if last item is active\n\n    if (this.canMovePrev) {\n      this.prevButton.disabled = false\n    } else {\n      this.prevButton.disabled = true\n    }\n\n    if (this.canMoveNext) {\n      this.nextButton.disabled = false\n    } else {\n      this.nextButton.disabled = true\n    }\n  }\n\n  setCurrentItem = (index: number) => {\n    if (this.carouselItems.length === 0) {\n      return\n    }\n    let transformAmount = 0\n    this.carouselItems[this.activeIndex]!.toggleAttribute('data-testimonial-active')\n    this.carouselItems[index]!.toggleAttribute('data-testimonial-active')\n    this.activeIndex = index\n\n    if (index > 0) {\n      // In conjunction with app/assets/stylesheets/marketing/customer-stories.scss\n      const constant = isGtBreakpoint('sm') ? 48 : 80 // width of each carousel item\n      const gap = isGtBreakpoint('sm') ? 4 : 8 // gap between each carousel item\n      transformAmount = this.activeIndex * constant + gap\n    }\n\n    this.carousel.setAttribute('style', `transform: translateX(-${transformAmount}%);`)\n    this.currentDisplay.textContent = `${this.activeIndex + 1} / ${this.carouselItems.length}`\n    this.currentAnnounce.textContent = `${this.activeIndex + 1} of ${this.carouselItems.length}`\n  }\n\n  moveToPrev = (ev: Event) => {\n    ev.preventDefault()\n    this.setCurrentItem(this.activeIndex - 1)\n    this.setCarouselDirections()\n  }\n\n  moveToNext = (ev: Event) => {\n    ev.preventDefault()\n    this.setCurrentItem(this.activeIndex + 1)\n    this.setCarouselDirections()\n  }\n\n  onTouchStart = (ev: TouchEvent) => {\n    this.touchStart = ev.changedTouches[0]!.screenX\n  }\n\n  onTouchEnd = (ev: TouchEvent) => {\n    const minSwipe = 20\n    this.touchEnd = ev.changedTouches[0]!.screenX\n\n    if (this.touchEnd < this.touchStart - minSwipe && this.canMoveNext) {\n      this.moveToNext(ev)\n    }\n\n    if (this.touchEnd > this.touchStart + minSwipe && this.canMovePrev) {\n      this.moveToPrev(ev)\n    }\n  }\n}\n"],"names":["isGtBreakpoint","breakpoint","window","innerWidth","isTouchEnabled","navigator","maxTouchPoints","getCookie","matches","document","cookie","match","name","cookieExpiration","date","Date","setTime","getTime","days","toUTCString","setCookie","value","TestimonialsCarouselElement","HTMLElement","connectedCallback","container","classList","add","ResizeObserver","setCurrentItem","activeIndex","setCarouselDirections","observe","carousel","touchStart","touchEnd","canMoveNext","canMovePrev","carouselItems","length","prevButton","disabled","nextButton","transformAmount","toggleAttribute","index","constant","gap","setAttribute","currentDisplay","textContent","currentAnnounce","moveToPrev","ev","preventDefault","moveToNext","onTouchStart","changedTouches","screenX","onTouchEnd","target","targets","controller"],"sourceRoot":""}