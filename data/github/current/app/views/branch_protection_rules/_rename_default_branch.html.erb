<%= form_tag gh_branch_path(current_repository, branch), method: :put, class: "js-rename-branch-form" do %>
  <%= render Primer::Alpha::Dialog.new(title: "Rename this branch", size: :medium_portrait, test_selector: "rename-default-branch-dialog") do |d| %>
    <% d.with_show_button(icon: "pencil", "aria-label": "Rename branch") %>
    <% d.with_header(show_divider: true) %>
    <%= d.with_body(m: 1) do %>
      <include-fragment loading="lazy" src="<%=gh_branch_rename_form_path(current_repository, branch)%>">
        <%= render(Primer::Beta::Spinner.new(my: 3, mx: :auto, display: :block)) %>
      </include-fragment>
    <% end %>
    <%= d.with_footer(show_divider: true) do %>
      <%= render Primer::Beta::Button.new(
          type: :submit,
          scheme: :primary,
          "data-disable-with": "Savingâ€¦",
          "data-disable-invalid": "",
          disabled: true
        ) do %>
          Rename branch
      <% end %>
    <% end %>
  <% end %>
<% end %>

