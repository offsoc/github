---
summary: Create a codespace for the authenticated user
description: |-
  Creates a new codespace, owned by the authenticated user.

  This endpoint requires either a `repository_id` OR a `pull_request` but not both.

  OAuth app tokens and personal access tokens (classic) need the `codespace` scope to use this endpoint.
tags:
  - codespaces
operationId: codespaces/create-for-authenticated-user
externalDocs:
  description: API method documentation
  url: '${externalDocsUrl}/rest/codespaces/codespaces#create-a-codespace-for-the-authenticated-user'
requestBody:
  required: true
  content:
    application/json:
      schema:
        oneOf:
          - type: object
            required:
              - repository_id
            properties:
              repository_id:
                description: Repository id for this codespace
                type: integer
              ref:
                description: Git ref (typically a branch name) for this codespace
                type: string
              location:
                description: The requested location for a new codespace. Best efforts are made to respect this upon creation. Assigned by IP if not provided.
                type: string
              geo:
                description: The geographic area for this codespace. If not specified, the value is assigned by IP. This property replaces `location`, which is being deprecated.
                type: string
                enum:
                  - EuropeWest
                  - SoutheastAsia
                  - UsEast
                  - UsWest
              client_ip:
                description: IP for location auto-detection when proxying a request
                type: string
              machine:
                description: Machine type to use for this codespace
                type: string
              devcontainer_path:
                description: Path to devcontainer.json config to use for this codespace
                type: string
              multi_repo_permissions_opt_out:
                description: Whether to authorize requested permissions from devcontainer.json
                type: boolean
              working_directory:
                description: Working directory for this codespace
                type: string
              idle_timeout_minutes:
                description: Time in minutes before codespace stops from inactivity
                type: integer
              display_name:
                description: Display name for this codespace
                type: string
              retention_period_minutes:
                description: Duration in minutes after codespace has gone idle in which
                  it will be deleted. Must be integer minutes between 0 and 43200 (30
                  days).
                type: integer
          - type: object
            required:
              - pull_request
            properties:
              pull_request:
                required:
                  - pull_request_number
                  - repository_id
                description: Pull request number for this codespace
                type: object
                properties:
                  pull_request_number:
                    description: Pull request number
                    type: integer
                  repository_id:
                    description: Repository id for this codespace
                    type: integer
              location:
                description: The requested location for a new codespace. Best efforts are made to respect this upon creation. Assigned by IP if not provided.
                type: string
              geo:
                description: The geographic area for this codespace. If not specified, the value is assigned by IP. This property replaces `location`, which is being deprecated.
                type: string
                enum:
                  - EuropeWest
                  - SoutheastAsia
                  - UsEast
                  - UsWest
              machine:
                description: Machine type to use for this codespace
                type: string
              devcontainer_path:
                description: Path to devcontainer.json config to use for this codespace
                type: string
              working_directory:
                description: Working directory for this codespace
                type: string
              idle_timeout_minutes:
                description: Time in minutes before codespace stops from inactivity
                type: integer
      examples:
        default:
          value:
            repository_id: 1
            ref: main
            geo: UsWest
responses:
  '201':
    description: Response when the codespace was successfully created
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/codespace.yaml'
        examples:
          default:
            $ref: '../../components/examples/codespace.yaml'
  '202':
    description: Response when the codespace creation partially failed but is being
      retried in the background
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/codespace.yaml'
        examples:
          default:
            $ref: '../../components/examples/codespace.yaml'
  '401':
    $ref: '../../components/responses/requires_authentication.yaml'
  '403':
    $ref: '../../components/responses/forbidden.yaml'
  '404':
    $ref: '../../components/responses/not_found.yaml'
  '503':
    $ref: '../../components/responses/service_unavailable.yaml'
x-github-internal:
  path: '/user/codespaces'
  http-method: post
  published: true
  owner: '@github/codespaces-team'
x-github-releases:
  - ghec
  - api.github.com
x-github:
  githubCloudOnly: false
  enabledForGitHubApps: false
  category: codespaces
  subcategory: codespaces
