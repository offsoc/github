#!/usr/bin/env ruby
#/ Usage: create-hard-bounce-email <address>
#/
#/ Marks an email address as hard bouncing, preventing further emails to this
#/ address from being generated by the rails app.

exec "grep ^#/ < '#{__FILE__}' | cut -c4-" if ARGV.empty? || ARGV.include?("--help")
require File.expand_path("../../config/environment", __FILE__)

email_address = ARGV.shift

user_email = UserEmail.find_by_email(email_address)

if user_email.nil?
  abort "ERROR: #{email_address} was not found in the database"
end

user_email.mark_as_bouncing!
