<react-partial-anchor
  <%= test_selector("global-user-nav-drawer") %>
>
  <%= render Primer::Beta::Button.new(
      scheme: :invisible,
      bg: :transparent,
      p: 0,
      classes: 'cursor-wait',
      data: {
        target: "react-partial-anchor.anchor",
        login: display_login,
      },
      aria: { label: "Open user navigation menu" }) do %>
    <%= render Primer::Beta::Avatar.new(
      src: primary_avatar_url,
      size: 32,
      alt: ""
    ) %>
  <% end %>
  <template data-target="react-partial-anchor.template">
    <%= render_react_partial(
      name: "global-user-nav-drawer",
      props: {
        owner: {
          login: display_login,
          name: name,
          avatarUrl: primary_avatar_url
        },
        drawerId: "global-user-nav-drawer",
        lazyLoadItemDataFetchUrl: side_panels_path(panel: :user, format: :json),
        canAddAccount: can_add_accounts,
        addAccountPath: add_account_path,
        switchAccountPath: switch_account_path,
        loginAccountPath: login_path(add_account: 1),
        projectsPath: projects_path,
        gistsUrl: your_gists_url,
        docsUrl: GitHub.help_url,
        yourEnterpriseUrl: your_enterprise_url,
        enterpriseSettingsUrl: enterprise_settings_url,
        supportUrl: GitHub.support_url,
        showAccountSwitcher: show_account_switcher?,
        showCopilot: !GitHub.enterprise?,
        showEnterprises: show_your_enterprises_link?,
        showEnterprise: show_your_enterprise_link?,
        showGists: show_your_gists_url?,
        showSponsors: show_your_sponsors_url?,
        showUpgrade: !GitHub.enterprise?,
        showFeaturesPreviews: show_feature_preview_url?,
        showEnterpriseSettings: show_enterprise_settings_link?,
        createMenuProps: create_menu_props
      },
      ssr: false
    ) %>
  </template>
</react-partial-anchor>
