"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_primer_action_menu_experimental-action-menu-element_ts"],{80373:(t,e,i)=>{i.d(e,{u:()=>o});let n={"outside-top":["outside-bottom","outside-right","outside-left","outside-bottom"],"outside-bottom":["outside-top","outside-right","outside-left","outside-bottom"],"outside-left":["outside-right","outside-bottom","outside-top","outside-bottom"],"outside-right":["outside-left","outside-bottom","outside-top","outside-bottom"]},s={start:["end","center"],end:["start","center"],center:["end","start"]};function o(t,e,i={}){let o=function(t){if(function(t){var e;if("DIALOG"===t.tagName)return!0;try{if(t.matches(":popover-open")&&/native code/.test(null===(e=document.body.showPopover)||void 0===e?void 0:e.toString()))return!0}catch(t){}return!1}(t))return document.body;let e=t.parentNode;for(;null!==e;){if(e instanceof HTMLElement&&"static"!==getComputedStyle(e).position)return e;e=e.parentNode}return document.body}(t),u=function(t){let e=t;for(;null!==e&&e instanceof Element&&"visible"===getComputedStyle(e).overflow;)e=e.parentNode;let i=e!==document.body&&e instanceof HTMLElement?e:document.body,n=i.getBoundingClientRect(),s=getComputedStyle(i),[o,r,h,u]=[s.borderTopWidth,s.borderLeftWidth,s.borderRightWidth,s.borderBottomWidth].map(t=>parseInt(t,10)||0);return{top:n.top+o,left:n.left+r,width:n.width-h-r,height:Math.max(n.height-o-u,i===document.body?window.innerHeight:-1/0)}}(o),l=getComputedStyle(o),a=o.getBoundingClientRect(),[d,c]=[l.borderTopWidth,l.borderLeftWidth].map(t=>parseInt(t,10)||0);return function(t,e,i,o,{side:r,align:u,allowOutOfBounds:l,anchorOffset:a,alignmentOffset:d}){let c={top:t.top-e.top,left:t.left-e.left,width:t.width,height:t.height},m=h(i,o,r,u,a,d),f=r,g=u;if(m.top-=e.top,m.left-=e.left,!l){var p,b,w,v;let l=n[r],y=0;if(l){let t=r;for(;y<l.length&&(p=t,b=m,"outside-top"===p||"outside-bottom"===p?b.top<c.top||b.top+i.height>c.height+c.top:b.left<c.left||b.left+i.width>c.width+c.left);){let n=l[y++];t=n,m=h(i,o,n,u,a,d),m.top-=e.top,m.left-=e.left,f=n}}let I=s[u],k=0;if(I){let t=u;for(;k<I.length&&(w=t,v=m,"end"===w?v.left<c.left:"start"===w||"center"===w?v.left+i.width>c.left+c.width||v.left<c.left:void 0);){let n=I[k++];t=n,m=h(i,o,f,n,a,d),m.top-=e.top,m.left-=e.left,g=n}}m.top<c.top&&(m.top=c.top),m.left<c.left&&(m.left=c.left),m.left+i.width>t.width+c.left&&(m.left=t.width+c.left-i.width),l&&y<l.length&&m.top+i.height>t.height+c.top&&(m.top=Math.max(t.height+c.top-i.height,0))}return Object.assign(Object.assign({},m),{anchorSide:f,anchorAlign:g})}(u,{top:a.top+d,left:a.left+c},t.getBoundingClientRect(),e instanceof Element?e.getBoundingClientRect():e,function(t={}){var e,i,n,s,o;let h=null!==(e=t.side)&&void 0!==e?e:r.side,u=null!==(i=t.align)&&void 0!==i?i:r.align;return{side:h,align:u,anchorOffset:null!==(n=t.anchorOffset)&&void 0!==n?n:"inside-center"===h?0:r.anchorOffset,alignmentOffset:null!==(s=t.alignmentOffset)&&void 0!==s?s:"center"!==u&&h.startsWith("inside")?r.alignmentOffset:0,allowOutOfBounds:null!==(o=t.allowOutOfBounds)&&void 0!==o?o:r.allowOutOfBounds}}(i))}let r={side:"outside-bottom",align:"start",anchorOffset:4,alignmentOffset:4,allowOutOfBounds:!1};function h(t,e,i,n,s,o){let r=e.left+e.width,h=e.top+e.height,u=-1,l=-1;return"outside-top"===i?u=e.top-s-t.height:"outside-bottom"===i?u=h+s:"outside-left"===i?l=e.left-s-t.width:"outside-right"===i&&(l=r+s),("outside-top"===i||"outside-bottom"===i)&&(l="start"===n?e.left+o:"center"===n?e.left-(t.width-e.width)/2+o:r-t.width-o),("outside-left"===i||"outside-right"===i)&&(u="start"===n?e.top+o:"center"===n?e.top-(t.height-e.height)/2+o:h-t.height-o),"inside-top"===i?u=e.top+s:"inside-bottom"===i?u=h-s-t.height:"inside-left"===i?l=e.left+s:"inside-right"===i?l=r-s-t.width:"inside-center"===i&&(l=(r+e.left)/2-t.width/2+s),"inside-top"===i||"inside-bottom"===i?l="start"===n?e.left+o:"center"===n?e.left-(t.width-e.width)/2+o:r-t.width-o:("inside-left"===i||"inside-right"===i||"inside-center"===i)&&(u="start"===n?e.top+o:"center"===n?e.top-(t.height-e.height)/2+o:h-t.height-o),{top:u,left:l}}},18746:(t,e,i)=>{i.r(e),i.d(e,{default:()=>M});var n=i(80373);function s(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function o(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function r(t,e){var i=o(t,e,"get");return i.get?i.get.call(t):i.value}function h(t,e,i){s(t,e),e.set(t,i)}function u(t,e,i){var n=o(t,e,"set");return!function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(t,n,i),i}function l(t,e,i){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return i}function a(t,e){s(t,e),e.add(t)}var d=new WeakMap,c=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,p=new WeakSet,b=new WeakSet,w=new WeakSet;let v=class ExperimentalActionMenuElement extends HTMLElement{get anchorAlign(){return this.getAttribute("data-anchor-align")||"start"}get anchorSide(){return this.getAttribute("data-anchor-side")||"outside-bottom"}get menu(){return this.querySelector('[role="menu"],[role="listbox"]')}get isListBox(){return!!this.menu&&"listbox"===this.menu.getAttribute("role")}get trigger(){return this.querySelector("button")}get overlay(){return this.querySelector(".Overlay")}get menuItems(){return this.menu?this.isListBox?Array.from(this.menu.querySelectorAll('[role="option"]')):Array.from(this.menu.querySelectorAll('[role="menuitem"],[role="menuitemcheckbox"],[role="menuitemradio"]')):null}get includeFragment(){return this.querySelector('[data-target~="action-menu.includeFragment"]')}get includeFragmentLoadingItem(){return this.querySelector('[data-target~="action-menu.includeFragmentLoadingItem"]')}get open(){return this.hasAttribute("open")}set open(t){let e=document.body.clientWidth,i=new ResizeObserver(t=>{for(let i of t)e!==i.contentRect.width&&this.open&&l(this,w,k).call(this)});if(t){if(this.open||!this.trigger||!this.menu)return;this.setAttribute("open",""),this.trigger.setAttribute("aria-expanded","true"),this.overlay?.removeAttribute("hidden"),this.menu.style.visibility="hidden",l(this,w,k).call(this),i.observe(document.body),this.menu.style.visibility="visible",this.includeFragmentLoadingItem&&(this.includeFragmentLoadingItem.tabIndex=0,this.includeFragmentLoadingItem.focus())}else{if(!this.open)return;this.removeAttribute("open"),this.trigger?.setAttribute("aria-expanded","false"),this.overlay&&this.overlay.setAttribute("hidden","true"),i.unobserve(document.body),setTimeout(()=>{document.activeElement===document.body&&this.trigger?.focus()},1)}}connectedCallback(){this.trigger&&l(this,p,y).call(this)}disconnectedCallback(){r(this,d).abort()}show(){this.open=!0}hide(){this.open=!1}setFocusToMenuItem(t){if(this.menuItems)for(let e of this.menuItems)e===t?(e.tabIndex=0,t.focus()):e.tabIndex=-1}setFocusToPreviousMenuItem(t){if(!this.menuItems)return;let e=null,i=null;return t===r(this,m)?e=r(this,f):(i=this.menuItems.indexOf(t),e=this.menuItems[i-1]),this.setFocusToMenuItem(e),e}setFocusToNextMenuItem(t){if(!this.menuItems)return;let e=null,i=null;return t===r(this,f)?e=r(this,m):(i=this.menuItems.indexOf(t),e=this.menuItems[i+1]),this.setFocusToMenuItem(e),e}setFocusByFirstCharacter(t,e){if(!this.menuItems)return;let i=null,n=null;!(e.length>1)&&(e=e.toLowerCase(),(i=this.menuItems.indexOf(t)+1)>=this.menuItems.length&&(i=0),-1===(n=r(this,c).indexOf(e,i))&&(n=r(this,c).indexOf(e,0)),n>-1&&this.setFocusToMenuItem(this.menuItems[n]))}buttonKeydown(t){let e=t.key,i=!1;switch(e){case" ":case"Enter":case"ArrowDown":case"Down":this.show(),this.setFocusToMenuItem(r(this,m)),i=!0;break;case"Esc":case"Escape":this.hide(),i=!0;break;case"Up":case"ArrowUp":this.show(),this.setFocusToMenuItem(r(this,f)),i=!0}i&&(t.stopPropagation(),t.preventDefault())}buttonClick(t){this.open?this.hide():(this.show(),this.setFocusToMenuItem(r(this,m))),t.stopPropagation(),t.preventDefault()}menuItemKeydown(t){let e=t.currentTarget,i=t.key,n=!1;function s(t){return 1===t.length&&t.match(/\S/)}if(!t.ctrlKey&&!t.altKey&&!t.metaKey){if(t.shiftKey)s(i)&&(this.setFocusByFirstCharacter(e,i),n=!0),"Tab"===t.key&&(this.trigger?.focus(),this.hide(),n=!0);else switch(i){case"Enter":case"Tab":this.selectMenuItem(e);break;case"Esc":case"Escape":this.hide(),n=!0;break;case"Up":case"ArrowUp":this.setFocusToPreviousMenuItem(e),n=!0;break;case"ArrowDown":case"Down":this.setFocusToNextMenuItem(e),n=!0;break;case"Home":case"PageUp":this.setFocusToMenuItem(r(this,m)),n=!0;break;case"End":case"PageDown":this.setFocusToMenuItem(r(this,f)),n=!0;break;default:s(i)&&(this.setFocusByFirstCharacter(e,i),n=!0)}n&&(t.stopPropagation(),t.preventDefault())}}menuItemClick(t){let e=t.currentTarget;if(this.isListBox&&this.menuItems&&e){for(let t of this.menuItems)if(t.contains(e)){this.selectMenuItem(t);return}}this.hide()}menuItemMouseover(t){t.currentTarget.focus()}backgroundMousedown(t){this&&!this.contains(t.target)&&this.open&&this.hide()}handleIncludeFragmentLoaded(){let{signal:t}=r(this,d);l(this,b,I).call(this,t),this.open&&this.setFocusToMenuItem(r(this,m))}async loadHTMLFragment(){if(r(this,g)){u(this,g,!1);try{return await this.includeFragment?.load()}catch(t){u(this,g,!0);return}}}selectMenuItem(t){if(this.isListBox&&this.menuItems)for(let e of this.menuItems){let i=e===t;if(e.setAttribute("aria-selected",i.toString()),i){let t=e.querySelector("input[type=radio]");null!==t&&(t.checked=i);let n=e.getAttribute("aria-label"),s=this.menu?.getAttribute("aria-labelledby"),o=s&&document.getElementById(s);o&&null!==n&&(o.textContent=n)}}this.hide()}constructor(...t){super(...t),a(this,p),a(this,b),a(this,w),h(this,d,{writable:!0,value:void 0}),h(this,c,{writable:!0,value:void 0}),h(this,m,{writable:!0,value:void 0}),h(this,f,{writable:!0,value:void 0}),h(this,g,{writable:!0,value:void 0}),u(this,g,!0)}};function y(){u(this,d,new AbortController);let{signal:t}=r(this,d);this.trigger&&this.menu&&(this.trigger.addEventListener("keydown",this.buttonKeydown.bind(this),{signal:t}),this.trigger.addEventListener("click",this.buttonClick.bind(this),{signal:t}),this.hasAttribute("preload")&&(this.trigger.addEventListener("mouseenter",this.loadHTMLFragment.bind(this),{signal:t}),this.trigger.addEventListener("focus",this.loadHTMLFragment.bind(this),{signal:t})),u(this,c,[]),l(this,b,I).call(this,t),this.includeFragment&&this.includeFragment.addEventListener("load",this.handleIncludeFragmentLoaded.bind(this)),window.addEventListener("mousedown",this.backgroundMousedown.bind(this),!0))}function I(t){if(this.menuItems)for(let e of this.menuItems)e.textContent&&r(this,c).push(e.textContent.trim()[0].toLowerCase()),e.addEventListener("keydown",this.menuItemKeydown.bind(this),{signal:t}),e.addEventListener("click",this.menuItemClick.bind(this),{signal:t}),e.addEventListener("mouseover",this.menuItemMouseover.bind(this),{signal:t}),r(this,m)||u(this,m,e),u(this,f,e)}function k(){if(!this.trigger||!this.menu)return;let t=this.querySelector("[data-menu-overlay]")||this.menu,e=this.trigger,{top:i,left:s}=(0,n.u)(t,e,{side:this.anchorSide,align:this.anchorAlign});t.style.top=`${i}px`,t.style.left=`${s}px`}window.customElements.get("experimental-action-menu")||(window.ExperimentalActionMenuElement=v,window.customElements.define("experimental-action-menu",v));let M=v}}]);
//# sourceMappingURL=app_components_primer_action_menu_experimental-action-menu-element_ts-f29f1eb446de.js.map