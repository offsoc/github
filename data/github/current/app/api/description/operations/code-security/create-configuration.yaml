---
summary: 'Create a code security configuration'
description: |-
  Creates a code security configuration in an organization.

  The authenticated user must be an administrator or security manager for the organization to use this endpoint.

  OAuth app tokens and personal access tokens (classic) need the `write:org` scope to use this endpoint.
tags:
  - code-security
operationId: code-security/create-configuration

externalDocs:
  description: API method documentation
  url: '${externalDocsUrl}/rest/code-security/configurations#create-a-code-security-configuration'

x-github-internal:
  path: /orgs/{org}/code-security/configurations
  http-method: post
  published: true
  owner: '@github/security-products-growth-reviewers'

x-github-releases:
  - api.github.com
  - ghec
  - ghes: '>= 3.15'

parameters:
  - $ref: '../../components/parameters/org.yaml'

requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        additionalProperties: false
        properties:
          name:
            type: string
            description: The name of the code security configuration. Must be unique within the organization.
          description:
            type: string
            description: A description of the code security configuration
            maxLength: 255
          advanced_security:
            type: string
            description: The enablement status of GitHub Advanced Security
            enum:
              - enabled
              - disabled
            default: disabled
          dependency_graph:
            type: string
            description: The enablement status of Dependency Graph
            enum:
              - enabled
              - disabled
              - not_set
            default: enabled
          dependency_graph_autosubmit_action:
            type: string
            description: The enablement status of Automatic dependency submission
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          dependency_graph_autosubmit_action_options:
            type: object
            description: Feature options for Automatic dependency submission
            properties:
              labeled_runners:
                type: boolean
                description: Whether to use runners labeled with 'dependency-submission' or standard GitHub runners.
                default: false
          dependabot_alerts:
            type: string
            description: The enablement status of Dependabot alerts
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          dependabot_security_updates:
            type: string
            description: The enablement status of Dependabot security updates
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          code_scanning_default_setup:
            type: string
            description: The enablement status of code scanning default setup
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          secret_scanning:
            type: string
            description: The enablement status of secret scanning
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          secret_scanning_push_protection:
            type: string
            description: The enablement status of secret scanning push protection
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          secret_scanning_validity_checks:
            type: string
            description: The enablement status of secret scanning validity checks
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          secret_scanning_non_provider_patterns:
            type: string
            description: The enablement status of secret scanning non provider patterns
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          private_vulnerability_reporting:
            type: string
            description: The enablement status of private vulnerability reporting
            enum:
              - enabled
              - disabled
              - not_set
            default: disabled
          enforcement:
            type: string
            description: The enforcement status for a security configuration
            enum:
              - enforced
              - unenforced
            default: enforced
        required:
          - name
          - description
      examples:
        default:
          summary: Example for a code security configuration
          value:
            name: octo-org recommended settings
            description: This is a code security configuration for octo-org
            advanced_security: enabled
            dependabot_alerts: enabled
            dependabot_security_updates: not_set
            secret_scanning: enabled

responses:
  '201':
    description: Successfully created code security configuration
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/code-security-configuration.yaml'
        examples:
          default:
            $ref: '../../components/examples/code-security-configuration.yaml'

x-github:
  githubCloudOnly: false
  enabledForGitHubApps: true
  category: code-security
  subcategory: configurations

x-githubEnterpriseOverlays:
  '>= 3.15':
    description: |-
      Creates a code security configuration in an organization.

      The authenticated user must be an administrator or security manager for the organization to use this endpoint.

      OAuth app tokens and personal access tokens (classic) need the `write:org` scope to use this endpoint.

      > [!NOTE]
      > Only installed security products may be specified in the request body. Specifying an uninstalled security product will result in a validation error.
    requestBody:
      content:
        application/json:
          schema:
            properties:
              dependency_graph_autosubmit_action:
              dependency_graph_autosubmit_action_options:
              dependency_graph:
                description: The enablement status of Dependency Graph. Dependency Graph is not configurable in GitHub Enterprise Server.
