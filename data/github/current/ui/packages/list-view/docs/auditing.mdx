import {Meta} from '@storybook/blocks'

<Meta title="Recipes/ListView/Documentation/Auditing" />

## ListView accessibility auditing script

This document can be used to help evaluate the accessibility of [the ListView component](https://ui.githubapp.com/storybook/?path=%2Fdocs%2Frecipes-list-view--readme).

## Context

ListView is an interactive list. Interactive lists are less common on the web, and are typically found on a desktop/laptop Operating System instead.

[The ARIA Authoring Practices Guide (APG)](https://www.w3.org/WAI/ARIA/apg/patterns/) does not include guidance for an interactive list pattern. However, this does not mean that an interactive list can’t be used on the web. Because of this lack of guidance from the APG, it is helpful to have a script to reference when evaluating the ListView component’s accessibility.

Certain behaviors might be different from what an auditor is familiar with in their regular evaluation workflows. This does not mean that it is inaccessible. The following script will help verify intended, accessible behavior.

### Note about output

**Navigation behavior is more important than verbatim output**.

Certain qualities such as the heading level, list item number, and presence of interactivity may or may not be announced depending on [NVDA](https://www.nvaccess.org/download/)’s settings and navigation technique used.

## Example

ListView used to list issues for a GitHub repository:

![A list of 5 issues for a made-up repository. Each issue has a selection checkbox, a status icon, a title, associated metadata, labels, a tally for comments, and avatar for issue participants. There are also controls to select all issues, filter by open or closed status, sort order, and a toggle for display density. Screenshot.](https://github.com/primer/design/assets/634191/477ee683-ec15-431d-ad22-cf1c58a1cfb4)

## 1.0 ListView title

The ListView title provides the ListView with a heading to help identify and navigate to it with assistive technology. ListView titles are set to be visually hidden by default.

![The top portion of a ListView, showing filter controls and two issues. Above it is the phrase, 'ListView title (visually hidden)' with an arrow labeling an invisible content area. Annotated screenshot.](https://github.com/primer/design/assets/634191/132bd739-5061-4944-a8ce-7bba424080fa)

### 1.1 Navigating to a ListView title in NVDA

The ListView is announced as a heading.

* Press <kbd>Down Arrow</kbd> to navigate by next item until the ListView title is announced.
* Press <kbd>h</kbd> to navigate by heading until ListView title is announced.

#### Sample ListView title output

```text
Repositories Issues Dashboard. Heading level 2.
```

* Name: Repositories Issues Dashboard.
* Role: Heading.
* Level 2: Indicates heading level.

The name part of the announcement will depend on the text used for the ListView title. The level part of the announcement will depend on the level used for the ListView title. The heading level should be 2, 3, 4, 5, or 6.

## 2.0 ListView filter controls

The ListView filter controls allows a user to modify attributes of all ListView ListItems. There are no special considerations for auditing for this content.

ListView filter controls are author-supplied. Examples are display density toggles, sorting controls, and the ability to select all ListView ListItems.

![The top portion of a ListView, showing filter controls and two issues. The filter controls area has had a box drawn around it to highlight it, and is labeled, 'ListView filter controls'. Annotated screenshot.](https://github.com/primer/design/assets/634191/0feb926a-fac1-43f1-9ae2-5ed653ca719d)

## 3.0 ListView container

The ListView container contains ListItems.

### 3.1 Navigating to a ListView container in NVDA

The ListView is announced as an interactive list with a title.

* Press <kbd>Down Arrow</kbd> to navigate by next item until the ListView title and role is announced.
* Press <kbd>l</kbd> to navigate by list until the ListView title and role is announced.
* Press <kbd>i</kbd> to navigate by list item until the first ListView ListItem is announced. The ListView title and role is announced before the first ListItem’s content.
* Press <kbd>h</kbd> to navigate by heading until the first ListView ListItem is announced. The ListView title and role is announced before the first ListItem’s content.
* Press <kbd>Tab</kbd> to navigate by interactive item until the first ListView ListItem is announced. The ListView title and role is announced before the first ListItem’s content. NVDA should also enter into Focus Mode when navigated to in this way.

The ListView container will announce the title string, then indicate it is a list and that it is interactive.

#### Sample ListView container output

Repositories Issues Dashboard. List. Clickable.

* Name: Repositories Issues Dashboard.
* Role: List.
* Clickable: Indicates interactive list.

The name part of the announcement will depend on the text used for [the ListView title](#10-list-view-title). This should be the same as the ListView title.

## 4.0 ListView ListItems

ListView ListItems have specific assistive technology announcement expectations depending on how they are interacted with.

![A single ListView ListItem. It has a selection checkbox, a status icon, a title, associated metadata, labels, a tally for comments, and avatar for issue participants. The status icon is labeled, 'Status' and represents an open issue. The title is labeled 'Title'. The labels, comment tally, and participant avatar are all labeled, 'Info and actions'. Annotated screenshot.](https://github.com/primer/design/assets/634191/b16187d5-c2ed-44d8-b5e1-b13ae6ed1c19)

### 4.1 Navigating through ListItems in Focus Mode in NVDA

* Press <kbd>Tab</kbd> to navigate by interactive element. Tabbing to the first Listitem should trigger Focus Mode.
* Press <kbd>Down Arrow</kbd> to navigate to the next ListItem.
* Press <kbd>Up Arrow</kbd> to navigate to the previous ListItem.
* Press <kbd>End</kbd> to navigate to the last ListItem in the ListView.
* Press <kbd>Home</kbd> to navigate to the first ListItem in the ListView.

#### Example ListItem announcement when navigating in Focus Mode

Each ListItem should announce:

* Title.
* Status (if present).
* Info and actions (if present).

Not every ListItem will have a status or info and actions. If they are not present in the visual design they should not be announced. Note that ListItem metadata is not announced in Focus Mode.

#### Sample ListItem output when navigated in Focus Mode

```text
Undocumented size limit for PDF rendering. Status: Closed, completed. More info and actions available.
```

* Name: Repositories Undocumented size limit for PDF rendering.
* Status: Status: Closed, completed.
* Info and actions: More info and actions available.

The name part of the announcement will depend on the text used for the ListItem title. The status part of the announcement will depend on the icon used for the ListItem status. The “More info and actions” part of the announcement will depend on if info and actions are present in the design.

### 4.2 Navigating through ListItems titles by heading in NVDA

* Press <kbd>h</kbd> to navigate to the next ListItem title.
* Press <kbd>Shift</kbd> + <kbd>h</kbd> to navigate to the previous ListItem title.

Each ListItem title should be a heading.

#### Sample ListItem output when navigated by heading

```text
Clickable. Undocumented size limit for PDF rendering. Heading, level 3.
```

* Clickable. Indicates interactivity.
* Name: Undocumented size limit for PDF rendering.
* Role: Heading.
* Level 3: Indicates heading level.

The name part of the announcement will depend on the text used for the ListItem title. The heading level should be one level lower than the heading level used for [the ListView title](#10-list-view-title).

### 4.3 Navigating through ListItems titles by list item in NVDA

* Press <kbd>i</kbd> to navigate by list item until the first ListView ListItem is announced. The ListView title and role is announced before the first ListItem’s content.
* Press <kbd>i</kbd> to navigate to the next ListItem.
* Press <kbd>Shift</kbd> + <kbd>i</kbd> to navigate to the previous ListItem.

#### Sample ListItem output when navigated by list item

```text
Clickable. ListView Add storybook stories to mirror the various ways ListView is used around GitHub. Heading, level 3.
```

* Clickable. Indicates interactivity.
* Name: ListView Add storybook stories to mirror the various ways ListView is used around GitHub.
* Role: Heading.
* Level 3: Indicates heading level.

The name part of the announcement will depend on the text used for the ListItem title. The heading level should be one level lower than the heading level used for [the ListView title](#10-list-view-title).

### 4.3 Selecting and activating ListItems in NVDA when in focus mode

ListItems can be selected or activated for navigation when the ListView is being [navigated as an interactive list](#41-navigating-through-listitems-in-focus-mode-in-nvda). This behavior is slightly different than a traditional button or link.

![A ListView ListItem. The selection checkbox is labeled, 'ListItem select checkbox'. The title is labeled, 'ListItem title link'. Annotated screenshot.](https://github.com/primer/design/assets/634191/f568cb68-25df-4def-b3f2-b2780bce3027)

When navigating through a ListView in focus mode, <kbd>Enter</kbd> and <kbd>Space</kbd> have two specific, dedicated behaviors:

* Press <kbd>Space</kbd> to activate the ListItem’s select checkbox and select or unselect it.
* Press <kbd>Enter</kbd> to navigate to the link that the ListItem title navigates to.

## 5.0 ListView focus management

ListViews have custom focus management to help users navigate quickly and efficiently. This is slightly different than regular web content.

### 5.1 Tabbing through a ListView

Using <kbd>Tab</kbd> keypresses to navigate through a ListView will move focus:

1. Through any interactive elements in [the ListView filter controls content](#20-list-view-filter-controls), then
2. **The first [ListItem](#40-list-view-listitems)**. This will trigger Focus Mode in NVDA. Pressing <kbd>Tab</kbd> again will then move focus to the
3. **ListItem select checkbox**. Pressing <kbd>Tab</kbd> again will then move focus to the
4. **ListItem title link**. Pressing <kbd>Tab</kbd> again will then move focus to the
5. **First interactive item placed in the ListItem metadata area**. Pressing <kbd>Tab</kbd> again will then move focus to the next interactive item in the metadata area. If there are no more interactive items in the metadata area, pressing <kbd>Tab</kbd> will instead move focus to
6. **The first interactive item placed in the ListItem info and actions area**. Pressing <kbd>Tab</kbd> again will then move focus to the next interactive item in the info and actions area. If there are no more interactive items in the info and actions area, pressing <kbd>Tab</kbd> will instead move focus to
7. **The first interactive item placed outside the ListView**. Focus **should not** move to the next ListItem in sequence.

![A ListView with annotations showing how focus moves to the first ListItem's container, then every interactive element within the ListItem, then to the first interactive element outside the ListView component. Each focusable element is numbered to communicate focus order. Annotated screenshot.](https://github.com/primer/design/assets/634191/78732df3-19f4-4e25-887a-eb2fab0e0873)

## 5.2 Pressing Esc when an interactive item inside a ListItem has focus

Pressing <kbd>Esc</kbd> when an interactive item inside a ListItem has focus will move focus back to [the Listitem](#40-list-view-listitems). This will switch NVDA back to focus mode.
