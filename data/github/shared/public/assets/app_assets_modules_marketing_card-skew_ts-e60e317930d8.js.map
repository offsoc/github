{"version":3,"file":"chunk-app_assets_modules_marketing_card-skew_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/marketing/card-skew.ts"],"sourcesContent":["import {shouldReduceMotion} from './animate-on-scroll'\nimport {attr, controller, target} from '@github/catalyst'\n\n@controller\nclass CardSkewElement extends HTMLElement {\n  skewSpeed = 0.15 // How fast the skew moves towards the mouse, 1 = instantly\n  moveSpeed = 0.9 // How fast the shine moves towards the mouse, 1 = instantly\n  snapThreshold = 0.005 // How close a value to be to the target before it snaps to it (prevents endless animations)\n  isMobileDevice = /Mobi/i.test(window.navigator.userAgent)\n  rect = {} as DOMRect\n  boundingElement = this as HTMLElement\n\n  animationTargets = {\n    x: 0,\n    y: 0,\n    skewX: 0,\n    skewY: 0,\n    shouldAnimate: false,\n  }\n\n  currentState = {\n    x: 0,\n    y: 0,\n    skewX: 0,\n    skewY: 0,\n    isAnimating: false,\n  }\n\n  @attr perspective = 700\n  @attr disableSkew = false\n\n  @target bounding: HTMLElement\n  @target shine: HTMLElement\n\n  // Use `connectedCallback` instead of the constructor and initialize whatever you like. Invoked each time the custom element is appended into a document-connected element. This will happen each time the node is moved, and may happen before the element's contents have been fully parsed.\n  // https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#using_the_lifecycle_callbacks\n  connectedCallback() {\n    if (!this.isConnected) return\n    if (shouldReduceMotion(this) || this.isMobileDevice) return\n\n    this.boundingElement = this.bounding || this\n    this.rect = this.boundingElement.getBoundingClientRect()\n\n    this.addEventListener('mousemove', this.mousemove)\n    this.addEventListener('mouseleave', this.mouseleave)\n  }\n\n  mousemove(e: MouseEvent) {\n    if (this.animationTargets.shouldAnimate === false) {\n      this.rect = this.boundingElement.getBoundingClientRect()\n    }\n\n    this.animationTargets.shouldAnimate = true\n    // Calculate mouse position relative to the card\n    this.animationTargets.x = this.shine\n      ? this.rect.width - (e.clientX - this.rect.left) - this.shine.offsetWidth / 2\n      : 0\n    this.animationTargets.y = this.shine\n      ? this.rect.height - (e.clientY - this.rect.top) - this.shine.offsetHeight / 2\n      : 0\n    this.animationTargets.skewY = !this.disableSkew\n      ? -((e.clientX - this.rect.left - this.rect.width / 2) / this.rect.width) * 3\n      : 0\n    this.animationTargets.skewX = !this.disableSkew\n      ? ((e.clientY - this.rect.top - this.rect.height / 2) / this.rect.height) * 2\n      : 0\n    // Handle if the mouseenter event never fired\n    if (this.currentState.isAnimating === false) {\n      this.currentState.isAnimating = true\n      this.animationTargets.shouldAnimate = true\n      window.requestAnimationFrame(this.animateTowardsTarget.bind(this))\n    }\n  }\n\n  mouseleave() {\n    this.animationTargets.skewX = 0\n    this.animationTargets.skewY = 0\n    this.animationTargets.shouldAnimate = false\n  }\n\n  animateTowardsTarget() {\n    // Set the shine element's position through top and left CSS properties\n    // Create a slight delay by going *towards* the target, rather than snapping to it\n    this.currentState.x = this.shine\n      ? this.goTowardsValue(this.currentState.x, this.animationTargets.x, this.moveSpeed)\n      : 0\n    this.currentState.y = this.shine\n      ? this.goTowardsValue(this.currentState.y, this.animationTargets.y, this.moveSpeed)\n      : 0\n    this.currentState.skewX = !this.disableSkew\n      ? this.goTowardsValue(this.currentState.skewX, this.animationTargets.skewX, this.skewSpeed)\n      : 0\n    this.currentState.skewY = !this.disableSkew\n      ? this.goTowardsValue(this.currentState.skewY, this.animationTargets.skewY, this.skewSpeed)\n      : 0\n\n    // Stop if we're really close to all targets\n    if (\n      Math.abs(this.animationTargets.x - this.currentState.x) < this.snapThreshold &&\n      Math.abs(this.animationTargets.y - this.currentState.y) < this.snapThreshold &&\n      Math.abs(this.animationTargets.skewX - this.currentState.skewX) < this.snapThreshold &&\n      Math.abs(this.animationTargets.skewY - this.currentState.skewY) < this.snapThreshold &&\n      this.animationTargets.shouldAnimate === false\n    ) {\n      this.currentState.isAnimating = false\n      return\n    }\n\n    if (this.shine)\n      this.shine.style.setProperty('transform', `translate(${-this.currentState.x}px, ${-this.currentState.y / 2}px)`)\n    if (!this.disableSkew)\n      this.style.setProperty(\n        'transform',\n        `perspective(${this.perspective}px) rotateX(${Math.round(this.currentState.skewX * 100) / 100}deg) rotateY(${\n          Math.round(this.currentState.skewY * 100) / 100\n        }deg)`,\n      )\n\n    window.requestAnimationFrame(this.animateTowardsTarget.bind(this))\n  }\n\n  goTowardsValue(current: number, to: number, speed: number) {\n    return Math.round((current + (to - current) * speed) * 100) / 100\n  }\n}\n"],"names":["CardSkewElement","HTMLElement","connectedCallback","isConnected","shouldReduceMotion","isMobileDevice","boundingElement","bounding","rect","getBoundingClientRect","addEventListener","mousemove","mouseleave","e","animationTargets","shouldAnimate","x","shine","width","clientX","left","offsetWidth","y","height","clientY","top","offsetHeight","skewY","disableSkew","skewX","currentState","isAnimating","window","requestAnimationFrame","animateTowardsTarget","bind","goTowardsValue","moveSpeed","skewSpeed","Math","abs","snapThreshold","style","setProperty","perspective","round","current","to","speed","test","navigator","userAgent","attr","target","controller"],"sourceRoot":""}