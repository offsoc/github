{"version":3,"file":"react-code-view-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/blob-anchor.ts","app/assets/modules/github/command-palette/copy.ts","app/assets/modules/react-code-view/components/blob/BlobContent/Code/Blame.tsx","app/assets/modules/react-code-view/components/headers/FileNameStickyHeader.tsx","app/assets/modules/react-code-view/components/directory/TreeOverflowMenu.tsx","app/assets/modules/react-code-view/App.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/SymbolIndicator.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavSymbolTree.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/JumpToItem.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/JumpToItemList.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/SymbolZeroState.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavSymbolNavigation.tsx","app/assets/modules/react-code-view/worker-jobs/find-in-file.ts","app/assets/modules/react-code-view/hooks/use-update-panel-expand-preferences.ts","app/assets/modules/react-code-view/contexts/FindInFileOpenContext.tsx","app/assets/modules/react-code-view/hooks/use-blob-renderer-type.ts","app/assets/modules/react-code-view/utilities/assert-never.ts","app/assets/modules/react-code-view/components/MarkdownContent.tsx","app/assets/modules/react-code-view/contexts/SplitCodeownersErrorsContext.tsx","app/assets/modules/react-shared/Repos/blameUtils.ts","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeLinesSSR.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeLinesSSRNoVirtualization.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/NavigationCursor.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/TextAreaHelpDialog.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/TextArea.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeBlob.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/hooks/use-code-lines.ts","app/assets/modules/react-code-view/hooks/use-symbol-under-pointer.ts","app/assets/modules/react-code-view/hooks/use-sticky-lines.ts","app/assets/modules/react-code-view/components/blob/BlobContent/Renderable/ImageBlob.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Renderable/YamlTemplateContent.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/BlobContent.tsx","app/assets/modules/react-shared/hooks/use-alert-tooltip.tsx","app/assets/modules/react-code-view/components/AccessibleIconButton.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/FindInFilePopover.tsx","app/assets/modules/react-code-view/components/Contributors.tsx","app/assets/modules/react-code-view/components/headers/ReposHeaderBreadcrumb.tsx","app/assets/modules/react-code-view/components/headers/header-components/BlameAgeLegend.tsx","app/assets/modules/react-code-view/components/headers/header-components/BlobTabButtons.tsx","app/assets/modules/react-code-view/components/headers/header-components/CodeSizeDetails.tsx","app/assets/modules/react-code-view/components/headers/header-components/OpenWithActionItems.tsx","app/assets/modules/react-code-view/components/headers/header-components/EditMenuActionItems.tsx","app/assets/modules/react-code-view/utilities/KeyboardVisual.tsx","app/assets/modules/react-code-view/components/blob/BlobNavigationButtons.tsx","app/assets/modules/react-code-view/components/headers/header-components/DeleteHeaderButtons.tsx","app/assets/modules/react-code-view/components/headers/header-components/SettingsMenuItems.tsx","app/assets/modules/react-code-view/components/headers/CodeViewHeader.tsx","app/assets/modules/react-code-view/components/headers/header-components/CopilotMenuItems.tsx","app/assets/modules/react-code-view/components/headers/header-components/RawMenuActionItems.tsx","app/assets/modules/react-code-view/components/headers/header-components/NavigationMenu.tsx","app/assets/modules/react-code-view/components/headers/header-components/TableOfContents.tsx","app/assets/modules/react-code-view/components/headers/StickyLinesHeader.tsx","app/assets/modules/react-code-view/components/headers/BlobViewHeader.tsx","app/assets/modules/react-code-view/hooks/use-code-nav.ts","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavCell.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavFileInformation.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavInfoPanelData.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavSymbolDetails.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/CodeNavInfoPanel.tsx","app/assets/modules/react-code-view/components/PanelContent.tsx","app/assets/modules/react-code-view/components/BlobViewContent.tsx","app/assets/modules/react-code-view/hooks/use-code-navigation.ts","app/assets/modules/react-code-view/hooks/use-in-file-search-results.ts","app/assets/modules/react-code-view/components/blob/BlobContent/index.ts","app/assets/modules/react-code-view/components/blob/Banners/BlameBanners.tsx","app/assets/modules/react-code-view/components/blob/Banners/DiscussionTemplateBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/IssueTemplateBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/BlobLowerBanners.tsx","app/assets/modules/react-code-view/components/headers/SpoofedCommitWarning.tsx","app/assets/modules/react-code-view/components/blob/Banners/BlobLicenseBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/InvalidCitationWarning.tsx","app/assets/modules/react-code-view/components/blob/Banners/OverridingGlobalFundingFileWarning.tsx","app/assets/modules/react-code-view/components/blob/Banners/BlobMidBanners.tsx","app/assets/modules/react-code-view/components/blob/Banners/DependabotConfigurationBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/OrgOnboardingTip.tsx","app/assets/modules/react-code-view/components/blob/Banners/PlanSupportBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/BlobTopBanners.tsx","app/assets/modules/react-code-view/components/CodeViewBanners.tsx","app/assets/modules/react-code-view/components/delete/DeleteViewEntry.tsx","app/assets/modules/react-code-view/components/delete/DeleteViewContent.tsx","app/assets/modules/react-code-view/components/directory/DirectoryContent/DirectoryReadmePreview.tsx","app/assets/modules/react-code-view/components/headers/FolderViewHeader.tsx","app/assets/modules/react-code-view/components/FileTreeViewContent.tsx","app/assets/modules/react-code-view/pages/CodeView.tsx","ui/packages/use-disable-user-content-scrolling/use-disable-user-content-scrolling.ts","app/assets/modules/react-code-view/index.ts","app/assets/modules/react-code-view/hooks/use-code-line-observer.ts","app/assets/modules/react-code-view/hooks/use-copy-raw-blob-contents.ts","app/assets/modules/react-code-view/hooks/use-current-line-height.ts","app/assets/modules/react-code-view/hooks/use-cursor-navigation.ts","app/assets/modules/react-code-view/hooks/use-focus-symbol-pane.ts","app/assets/modules/react-code-view/hooks/use-highlighted-line-menu-options.ts","app/assets/modules/react-code-view/hooks/use-is-safari.ts","app/assets/modules/react-code-view/hooks/use-manual-render.ts","app/assets/modules/react-code-view/hooks/use-scroll-line-into-view.ts","app/assets/modules/react-code-view/hooks/use-sticky-header-height.ts","app/assets/modules/react-code-view/hooks/use-sticky-observer.ts","app/assets/modules/react-code-view/utilities/lines.ts","ui/packages/allow-user-content-scrolling/allow-user-content-scrolling.ts","ui/packages/code-nav/code-navigation-info.ts","ui/packages/code-nav/code-symbol.ts","ui/packages/code-nav/get-match.ts","ui/packages/code-nav/symbol-result-converter.ts","ui/packages/code-view-shared/worker-jobs/debounced-worker-manager.ts","ui/packages/copilot-chat/utils/copilot-chat-events.ts","ui/packages/copilot-chat/utils/copilot-chat-types.ts","ui/packages/filter-sort/filter-sort.ts","ui/packages/filter-sort/filter-map.ts","ui/packages/fuzzy-filter/fuzzy-filter.ts","ui/packages/observable/observable.ts","ui/packages/react-observable/react-observable.ts","ui/packages/ref-utils/ref-utils.ts","ui/packages/test-id-props/test-id-props.ts","ui/packages/use-contributors/use-contributors.ts","ui/packages/use-hide-footer/use-hide-footer.ts","ui/packages/use-virtual/use-virtual-dynamic.ts","ui/packages/use-virtual/use-virtual-window.ts","app/assets/modules/react-code-view/components/Panel.tsx","app/assets/modules/react-code-view/components/SuspenseFallback.tsx","app/assets/modules/react-code-view/components/blob-edit/EditIssues.tsx","app/assets/modules/react-code-view/components/blob-edit/banners/EditingForkBanner.tsx","app/assets/modules/react-code-view/components/blob/Banners/Bidi.tsx","app/assets/modules/react-code-view/components/blob/Banners/CodeownerFileBanner.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeFoldingEllipsisOverlay.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeLine.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/hooks/use-virtual-code-blob.ts","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeLines.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/StickyLineObserverOverlay.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/CodeLinesNoVirtualization.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/HighlightedLineProvider.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/HighlightedLinesOverlay.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/HighlightedSymbolsOverlay.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/LineNumber.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/LineNumberNoVirtualization.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/SearchResultsProvider.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/Code/SyntaxHighlightedLine.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CodeNav/ScrollMarksContainer.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/CopilotButton.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/HighlightedLineMenu.tsx","app/assets/modules/react-code-view/components/blob/BlobContent/HighlightedOverlay.tsx","app/assets/modules/react-code-view/contexts/DeferredASTContext.tsx","app/assets/modules/react-code-view/contexts/DeferredMetadataContext.tsx","app/assets/modules/react-code-view/hooks/CurrentBlame.tsx","app/assets/modules/react-code-view/hooks/CurrentBlob.tsx","app/assets/modules/react-code-view/hooks/CurrentLineRefMap.tsx","app/assets/modules/react-code-view/utilities/Copy.tsx","app/assets/modules/react-code-view/utilities/SelectAllShortcutButton.tsx","app/assets/modules/react-shared/Breadcrumb.tsx","ui/packages/copilot-code-chat/AskCopilotButton.module.css","ui/packages/copilot-code-chat/AskCopilotButton.tsx","ui/packages/copilot-code-chat/code-view/CopilotCodeLinesMenu.module.css","ui/packages/copilot-code-chat/code-view/CopilotCodeLinesMenu.tsx","ui/packages/copilot-popover/CopilotPopover.tsx"],"sourcesContent":["export interface BlobOffset {\n  // Line number\n  // Lines start at 1.\n  line: number\n\n  // Optional column number.\n  // Like lines, columns are 1-indexed.\n  column: number | null\n}\n\nexport interface BlobRange {\n  // Starting offset of range.\n  start: BlobOffset\n\n  // End offset of range.\n  // End offset may be the same as the start. This indicates a collapsed range.\n  // Should always be initialized to a value that is equal or greater than the\n  // start range such the range is always in ascending order. Reversed ranges\n  // have undefined behavior.\n  end: BlobOffset\n}\n\n// Inverse of `formatBlobRange`.\n//\n// Examples\n//\n//   parseBlobRange(\"#L3\")\n//   // => {start: {line: 3}}\n//\n//   parseBlobRange(\"L3-L5\")\n//   // => {start: {line: 3}, end: {line: 5}}\n//\n//   parseBlobRange(\"\")\n//   // => null\nexport function parseBlobRange(str: string): BlobRange | undefined {\n  const lines = str.match(/#?(?:L)(\\d+)((?:C)(\\d+))?/g)\n  if (!lines) {\n    return\n  } else if (lines.length === 1) {\n    const offset = parseBlobOffset(lines[0])\n    if (!offset) return\n    return Object.freeze({start: offset, end: offset})\n  } else if (lines.length === 2) {\n    const startOffset = parseBlobOffset(lines[0])\n    const endOffset = parseBlobOffset(lines[1]!)\n    if (!startOffset || !endOffset) return\n\n    return ascendingBlobRange(\n      Object.freeze({\n        start: startOffset,\n        end: endOffset,\n      }),\n    )\n  } else {\n    return\n  }\n}\n\n// Inverse of `parseBlobRange`.\n//\n// Examples\n//\n//   formatBlobRange({start: {line: 3}})\n//   // => \"L3\"\n//\n//   formatBlobRange({start: {line: 3}, end: {line: 5}})\n//   // => \"L3-L5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5, column: 5}})\n//   // => \"L3C1-L5C5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5,}})\n//   // => \"L3C1-L5\"\nexport function formatBlobRange(blobRange: BlobRange): string {\n  const {start, end} = ascendingBlobRange(blobRange)\n\n  if (start.column != null && end.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}C${end.column}`\n  } else if (start.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}`\n  } else if (end.column != null) {\n    return `L${start.line}-L${end.line}C${end.column}`\n  } else if (start.line === end.line) {\n    return `L${start.line}`\n  } else {\n    return `L${start.line}-L${end.line}`\n  }\n}\n\n// Returns a String containing the file prefix with trailing dash.\n//\n// Examples\n//\n//   parseAnchorPrefix(\"#file-zshrc-L3\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"file-zshrc-L3-L5\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"\")\n//   // => \"\"\nfunction parseAnchorPrefix(str: string): string {\n  const match = str.length < 5000 && str.match(/(file-.+?-)L\\d+?/i)\n  return match ? match[1]! : ''\n}\n\nexport type AnchorInfo = {\n  blobRange: BlobRange\n  anchorPrefix: string\n}\n\n// Examples\n//\n//   parseFileAnchor(\"#file-zshrc-L3\")\n//   // => { blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"file-zshrc-L3-L5\")\n//   // => { blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"\")\n//   // => { blobRange: null, anchorPrefix: undefined }\nexport function parseFileAnchor(str: string): AnchorInfo {\n  const blobRange = parseBlobRange(str)!\n  const anchorPrefix = parseAnchorPrefix(str)\n  return {blobRange, anchorPrefix}\n}\n\n// Formats line number range pair as an anchor String.\n//\n// Examples\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"\"})\n//   // => \"#L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3, column: 1}, end: {line: 5, column: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3C1-L5C5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"\"})\n//   // => \"#\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#\"\nexport function formatBlobRangeAnchor({anchorPrefix, blobRange}: AnchorInfo): string {\n  if (!blobRange) return '#'\n  return `#${anchorPrefix}${formatBlobRange(blobRange)}`\n}\n\nfunction parseBlobOffset(str: string): BlobOffset | null {\n  const lineMatch = str.match(/L(\\d+)/)\n  const columnMatch = str.match(/C(\\d+)/)\n  if (lineMatch) {\n    return Object.freeze({\n      line: parseInt(lineMatch[1]!),\n      column: columnMatch ? parseInt(columnMatch[1]!) : null,\n    })\n  } else {\n    return null\n  }\n}\n\nexport function DOMRangeFromBlob(\n  blobRange: BlobRange,\n  getLineElement: (line: number) => Node | null,\n): Range | undefined {\n  const [startContainer, _startOffset] = findRangeOffset(blobRange.start, true, getLineElement)\n  const [endContainer, _endOffset] = findRangeOffset(blobRange.end, false, getLineElement)\n  if (!startContainer || !endContainer) return\n\n  // Treat -1 as full line selection\n  let startOffset = _startOffset\n  let endOffset = _endOffset\n  if (startOffset === -1) startOffset = 0\n  if (endOffset === -1) endOffset = endContainer.childNodes.length\n  if (!startContainer.ownerDocument) throw new Error(`DOMRange needs to be inside document`)\n\n  const range = startContainer.ownerDocument.createRange()\n  range.setStart(startContainer, startOffset)\n  range.setEnd(endContainer, endOffset)\n  return range\n}\n\nfunction findRangeOffset(\n  offset: BlobOffset,\n  lookAhead: boolean,\n  getLineElement: (n: number) => Node | null,\n): [Node | null, number] {\n  const error: [null, number] = [null, 0]\n\n  const lineElement = getLineElement(offset.line)\n  if (!lineElement) return error\n\n  if (offset.column == null) {\n    return [lineElement, -1]\n  }\n\n  let column = offset.column - 1\n\n  const textNodes = getAllTextNodes(lineElement)\n  for (let i = 0; i < textNodes.length; i++) {\n    const textNode = textNodes[i]!\n\n    // TODO: length might be buggy with emoji\n    const nextC = column - (textNode.textContent || '').length\n\n    if (nextC === 0) {\n      const nextTextNode = textNodes[i + 1]\n      if (lookAhead && nextTextNode) {\n        return [nextTextNode, 0]\n      } else {\n        return [textNode, column]\n      }\n    } else if (nextC < 0) {\n      return [textNode, column]\n    }\n\n    column = nextC\n  }\n\n  return error\n}\n\n// Get a flat list of text nodes in depth first order.\nfunction getAllTextNodes(el: Node): Node[] {\n  if (el.nodeType === Node.TEXT_NODE) {\n    return [el]\n  }\n  if (!el.childNodes || !el.childNodes.length) return []\n  let list: Node[] = []\n  for (const node of el.childNodes) {\n    list = list.concat(getAllTextNodes(node))\n  }\n  return list\n}\n\n// Sorts range start and end offsets to be in ascending order.\nfunction ascendingBlobRange(range: BlobRange): BlobRange {\n  const offsets = [range.start, range.end]\n  offsets.sort(compareBlobOffsets)\n\n  if (offsets[0] === range.start && offsets[1] === range.end) {\n    return range\n  } else {\n    return Object.freeze({\n      start: offsets[0]!,\n      end: offsets[1]!,\n    })\n  }\n}\n\n// Compare line offsets. May be used with Array.sort\nfunction compareBlobOffsets(a: BlobOffset, b: BlobOffset): number {\n  if (a.line === b.line && a.column === b.column) {\n    return 0\n  } else if (a.line === b.line && typeof a.column === 'number' && typeof b.column === 'number') {\n    return a.column - b.column\n  } else {\n    return a.line - b.line\n  }\n}\n","function createNode(text: string): Element {\n  const node = document.createElement('pre')\n  node.style.width = '1px'\n  node.style.height = '1px'\n  node.style.position = 'fixed'\n  node.style.top = '5px'\n  node.textContent = text\n  return node\n}\n\nfunction copyNode(node: Element): Promise<void> {\n  if ('clipboard' in navigator) {\n    return navigator.clipboard.writeText(node.textContent || '')\n  }\n\n  const selection = getSelection()\n  if (selection == null) {\n    return Promise.reject(new Error())\n  }\n\n  selection.removeAllRanges()\n\n  const range = document.createRange()\n  range.selectNodeContents(node)\n  selection.addRange(range)\n\n  document.execCommand('copy')\n  selection.removeAllRanges()\n  return Promise.resolve()\n}\n\nexport function copyText(text: string): Promise<void> {\n  if ('clipboard' in navigator) {\n    return navigator.clipboard.writeText(text)\n  }\n\n  const body = document.body\n  if (!body) {\n    return Promise.reject(new Error())\n  }\n\n  const node = createNode(text)\n  body.appendChild(node)\n  copyNode(node)\n  body.removeChild(node)\n  return Promise.resolve()\n}\n","import type {Blame, BlameCommit, BlameRange} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {blamePath, commitHovercardPath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {SafeHTMLText} from '@github-ui/safe-html'\nimport {ScreenSize, useScreenSize} from '@github-ui/screen-size'\nimport {useVirtualWindow} from '@github-ui/use-virtual'\nimport {VersionsIcon} from '@primer/octicons-react'\nimport {Box, RelativeTime} from '@primer/react'\nimport {Tooltip} from '@primer/react/next'\nimport React, {useCallback, useImperativeHandle, useRef} from 'react'\n\nimport {useBlameAgeColor} from '../../../../../react-shared/Repos/blameUtils'\nimport {useCurrentBlame} from '../../../../hooks/CurrentBlame'\nimport {isLineInViewport} from '../../../../utilities/lines'\nimport type {CodeLinesHandle} from './code-lines-handle'\nimport {CodeLine} from './CodeLine'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {LineNumber} from './LineNumber'\n\nconst codeRowHeightInPixels = 20\nconst singleBlameLineHeightWide = 31 // 20px line height + 10px vertical padding + 1px border\nconst singleBlameLineHeightNarrow = 41 // 20px line height + 20px vertical padding + 1px border\nconst defaultOverscanAmount = 100\n\ninterface BlameLinesProps {\n  linesData: readonly CodeLineData[]\n  tabSize: number\n  materializeAllLines?: boolean\n  copilotAccessAllowed: boolean\n  onLineNumberClick?: React.MouseEventHandler<HTMLDivElement>\n}\nexport const BlameLines = React.forwardRef(BlameLinesWithRef)\n\nexport function BlameLinesSSR({copilotAccessAllowed, linesData, tabSize, onLineNumberClick}: BlameLinesProps) {\n  const parentRef = useRef<HTMLTableElement>(null)\n\n  const blame = useCurrentBlame()\n  const blameSegments = extractBlameSegments(blame, linesData)\n  return (\n    <div className=\"d-flex flex-column\" style={{tabSize}} ref={parentRef} data-hpc>\n      {blameSegments.map((segment, index) => (\n        <BlameSegment\n          key={`blame-for-segment-${segment.range?.start ?? segment.linesData[0]!.lineNumber}`}\n          {...segment}\n          index={index}\n          copilotAccessAllowed={copilotAccessAllowed}\n          onLineNumberClick={onLineNumberClick}\n        />\n      ))}\n    </div>\n  )\n}\nfunction BlameLinesWithRef(\n  {copilotAccessAllowed, linesData, tabSize, materializeAllLines, onLineNumberClick}: BlameLinesProps,\n  ref: React.ForwardedRef<CodeLinesHandle>,\n) {\n  const parentRef = useRef<HTMLTableElement>(null)\n  const blame = useCurrentBlame()\n  const {screenSize} = useScreenSize()\n\n  useImperativeHandle(ref, () => ({\n    scrollToTop: () => {\n      if (isLineInViewport(0)) return\n      virtualizer.scrollToIndex(0, {align: 'start'})\n    },\n    scrollToLine: lineNumber => {\n      if (isLineInViewport(lineNumber)) return\n      virtualizer.scrollToIndex(lineNumber, {align: 'center'})\n    },\n  }))\n\n  /**\n   * This size estimation function is used by the virtualizer to guess which elements should appear in the window.\n   * It doesn't need to be perfect - it just needs to get close.\n   */\n  const estimateSize = useCallback(\n    (index: number) => {\n      const line = linesData[index]!\n      const range = blame?.ranges[line.lineNumber]\n      if (range && range.end === range.start) {\n        //using window.innerWidth means this estimate won't be udpated if a user resizes their window. It's just\n        //a guess though, so it probably will be fine?\n        return window.innerWidth > ScreenSize.medium ? singleBlameLineHeightWide : singleBlameLineHeightNarrow\n      }\n\n      return codeRowHeightInPixels\n    },\n    [linesData, blame],\n  )\n\n  const virtualizer = useVirtualWindow({\n    parentRef,\n    size: linesData.length,\n    overscan: materializeAllLines ? Number.MAX_SAFE_INTEGER : defaultOverscanAmount,\n    estimateSize,\n  })\n\n  const virtualLinesData = virtualizer.virtualItems.map(virtualItem => ({\n    ...linesData[virtualItem.index]!,\n    virtualOffset: virtualItem.start,\n  }))\n\n  const blameSegments = extractBlameSegments(blame, virtualLinesData)\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        isolation: 'isolate',\n        position: 'relative',\n        tabSize,\n        height: [\n          // If the screen size is < 768px, we show the blame lines as a column. This means the height calculation\n          // Will be wrong\n          `${virtualizer.totalSize + blameSegments.length * singleBlameLineHeightNarrow}px`,\n          `${virtualizer.totalSize + blameSegments.length * singleBlameLineHeightNarrow}px`,\n          `${virtualizer.totalSize}px`,\n        ],\n      }}\n      ref={parentRef}\n      data-hpc\n    >\n      {blameSegments.map((segment, index) => {\n        let virtualOffset = segment.linesData[0]!.virtualOffset ?? 0\n\n        if (screenSize < ScreenSize.large) {\n          virtualOffset += (index ?? 0) * singleBlameLineHeightNarrow\n        }\n\n        return (\n          <BlameSegment\n            key={`blame-for-segment-${segment.range?.start ?? segment.linesData[0]!.lineNumber}`}\n            range={segment.range}\n            commit={segment.commit}\n            linesData={segment.linesData}\n            index={index}\n            copilotAccessAllowed={copilotAccessAllowed}\n            onLineNumberClick={onLineNumberClick}\n            virtualOffset={virtualOffset}\n          />\n        )\n      })}\n    </Box>\n  )\n}\n\ninterface BlameSegmentProps extends BlameSegmentData, VirtualLineData {\n  copilotAccessAllowed: boolean\n  onLineNumberClick?: React.MouseEventHandler<HTMLDivElement>\n}\n\nfunction BlameSegment({\n  range,\n  commit,\n  linesData,\n  virtualOffset,\n  copilotAccessAllowed,\n  onLineNumberClick,\n}: BlameSegmentProps) {\n  function BlameSegmentContent() {\n    return (\n      <>\n        {range && commit ? <BlameForRange range={range} commit={commit} /> : <div className=\"height-full\" />}\n        <div className=\"d-flex flex-row\">\n          <div className={`react-line-numbers ${linesData.length > 1 ? '' : 'react-blame-no-line-data'}`}>\n            {linesData.map(lineData => (\n              <LineNumber\n                key={`line-number-${lineData.lineNumber}-content-${lineData.rawText?.substring(0, 100)}`}\n                codeLineData={lineData}\n                onClick={onLineNumberClick}\n              />\n            ))}\n          </div>\n          <div className={`react-code-lines ${linesData.length > 1 ? '' : 'react-blame-no-line-data'}`}>\n            {linesData.map(lineData => (\n              <CodeLine\n                stylingDirectivesLine={lineData.stylingDirectivesLine}\n                key={`code-line=${lineData.lineNumber}-content-${lineData.rawText?.substring(0, 100)}`}\n                id={`LC${lineData.lineNumber}`}\n                codeLineData={lineData}\n                copilotAccessAllowed={copilotAccessAllowed}\n                shouldUseInert={false}\n              />\n            ))}\n          </div>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <div\n      className=\"react-blame-segment-wrapper\"\n      style={\n        virtualOffset !== undefined\n          ? {\n              transform: `translateY(${virtualOffset}px)`,\n              position: 'absolute',\n              top: 0,\n            }\n          : undefined\n      }\n    >\n      {BlameSegmentContent()}\n    </div>\n  )\n}\n\ninterface VirtualLineData {\n  virtualOffset?: number\n}\n\ninterface VirtualCodeLineData extends CodeLineData, VirtualLineData {}\n\ninterface BlameSegmentData {\n  commit?: BlameCommit\n  range?: BlameRange\n  linesData: readonly VirtualCodeLineData[]\n  virtualOffset?: number\n  index?: number\n}\n\ninterface InProgressBlameSegmentData extends BlameSegmentData {\n  linesData: VirtualCodeLineData[]\n}\n\nfunction extractBlameSegments(blame: Blame | undefined, linesData: readonly VirtualCodeLineData[]): BlameSegmentData[] {\n  if (!blame) return [{linesData}]\n\n  const segments: InProgressBlameSegmentData[] = []\n\n  let current: InProgressBlameSegmentData | null = null\n  let isFirst = true\n  for (const lineData of linesData) {\n    if (!current) {\n      current = {linesData: []}\n    }\n\n    const range = isFirst\n      ? Object.values(blame?.ranges ?? {}).find(r => r.start <= lineData.lineNumber && r.end >= lineData.lineNumber)\n      : blame?.ranges[lineData.lineNumber]\n    if (range) {\n      current.range = range\n      current.commit = blame.commits[range.commitOid]\n    }\n\n    current.linesData.push(lineData)\n\n    if (current.range?.end === lineData.lineNumber) {\n      segments.push(current)\n      current = null\n    }\n\n    isFirst = false\n  }\n\n  if (current) {\n    segments.push(current)\n    current = null\n  }\n\n  return segments\n}\n\nconst BlameForRange = React.memo(BlameForRangeUnmemoized)\n\nfunction BlameForRangeUnmemoized({range, commit}: {range: BlameRange; commit: BlameCommit}) {\n  const repo = useCurrentRepository()\n  const commitDate = new Date(commit.committedDate)\n  const repoCreationDate = new Date(repo.createdAt)\n\n  const timestampAgoElement = (\n    <div className=\"timestamp-ago\">\n      <RelativeTime\n        date={commitDate}\n        tense=\"past\"\n        sx={{color: 'fg.muted', whiteSpace: 'nowrap', fontSize: 'smaller'}}\n      />\n    </div>\n  )\n\n  return (\n    <div className=\"react-blame-for-range d-flex\">\n      <div aria-hidden className=\"age-indicator\">\n        <BlameAgeIndicator commitDate={commitDate} repoCreationDate={repoCreationDate} />\n      </div>\n      <div className=\"pt-1 timestamp-wrapper-desktop\">{timestampAgoElement}</div>\n      <div className=\"author-avatar-wrapper\">\n        {commit.authorAvatarUrl && <GitHubAvatar src={commit.authorAvatarUrl} size={18} />}\n      </div>\n      <Box\n        sx={{\n          verticalAlign: 'top',\n          pt: [2, 2, '6px'],\n          pb: [2, 2, 0],\n          // Screens < 768px, let the commit message grow to fill the space\n          minWidth: [0, 0, 170],\n          flexGrow: [1, 1, 1],\n        }}\n      >\n        <div className=\"d-flex\">\n          <SafeHTMLText\n            html={commit.shortMessageHtmlLink}\n            sx={{\n              whiteSpace: 'nowrap',\n              ml: 2,\n              overflowX: 'hidden',\n              textOverflow: 'ellipsis',\n              maxWidth: '100%',\n              fontSize: [1, 1, 0],\n            }}\n            data-hovercard-url={commitHovercardPath({owner: repo.ownerLogin, repo: repo.name, commitish: commit.oid})}\n          />\n        </div>\n      </Box>\n      <Box\n        sx={{\n          display: 'flex',\n          alignContent: 'flex-start',\n          justifySelf: 'flex-end',\n          verticalAlign: 'top',\n          pl: 2,\n          pt: ['2px', '2px', '1px'],\n          pb: [1, 1, 0],\n          width: [150, 150, 34],\n          pr: [2, 2, 0],\n        }}\n      >\n        <div className=\"pt-1 pr-3 timestamp-wrapper-mobile\">{timestampAgoElement}</div>\n        <ReblameButton range={range} commit={commit} />\n      </Box>\n    </div>\n  )\n}\n\nfunction ReblameButton({range, commit}: {range: BlameRange; commit: BlameCommit}) {\n  const repo = useCurrentRepository()\n  if (!range.reblamePath) return null\n\n  const href = blamePath({\n    owner: repo.ownerLogin,\n    repo: repo.name,\n    commitish: commit.firstParentOid,\n    filePath: range.reblamePath,\n  })\n\n  const longDateFormatter = new Intl.DateTimeFormat(undefined, {year: 'numeric', month: 'short', day: 'numeric'})\n  const shortSHA = commit.oid.slice(0, 7)\n  const formattedDate = longDateFormatter.format(new Date(commit.committedDate))\n  const blameLabel = `Blame prior to change ${shortSHA}, made on ${formattedDate}`\n  const reblameId = `reblame-${shortSHA}`\n\n  return (\n    <Tooltip text={blameLabel} type=\"label\" id={reblameId}>\n      <Link aria-labelledby={reblameId} to={href} className=\"Button Button--iconOnly Button--invisible Button--small\">\n        <VersionsIcon />\n      </Link>\n    </Tooltip>\n  )\n}\n\nfunction BlameAgeIndicator({commitDate, repoCreationDate}: {commitDate: Date; repoCreationDate: Date}) {\n  const color = useBlameAgeColor(commitDate, repoCreationDate)\n  return <div className=\"blame-age-indicator\" style={{backgroundColor: color}} />\n}\n\ntry{ BlameLines.displayName ||= 'BlameLines' } catch {}\ntry{ BlameLinesSSR.displayName ||= 'BlameLinesSSR' } catch {}\ntry{ BlameLinesWithRef.displayName ||= 'BlameLinesWithRef' } catch {}\ntry{ BlameSegment.displayName ||= 'BlameSegment' } catch {}\ntry{ BlameSegmentContent.displayName ||= 'BlameSegmentContent' } catch {}\ntry{ BlameForRange.displayName ||= 'BlameForRange' } catch {}\ntry{ BlameForRangeUnmemoized.displayName ||= 'BlameForRangeUnmemoized' } catch {}\ntry{ ReblameButton.displayName ||= 'ReblameButton' } catch {}\ntry{ BlameAgeIndicator.displayName ||= 'BlameAgeIndicator' } catch {}","import {ReposHeaderRefSelector} from '@github-ui/code-view-shared/components/ReposHeaderRefSelector'\nimport {ArrowUpIcon} from '@primer/octicons-react'\nimport {Box, Button, type ButtonProps} from '@primer/react'\n\nimport {ReposHeaderBreadcrumb} from './ReposHeaderBreadcrumb'\n\nexport default function FileNameStickyHeader({\n  isStickied,\n  showTree,\n  treeToggleElement,\n}: {\n  isStickied: boolean\n  showTree: boolean\n  treeToggleElement: JSX.Element | null\n}) {\n  const stickySx = isStickied\n    ? {\n        backgroundColor: 'canvas.subtle',\n        borderLeft: '1px solid var(--borderColor-default, var(--color-border-default))',\n        borderRight: '1px solid var(--borderColor-default, var(--color-border-default))',\n      }\n    : {}\n\n  const StickyReposHeaderBreadcrumb = () => {\n    // additional ids to create unique ids for axe\n    return <ReposHeaderBreadcrumb id=\"sticky-breadcrumb\" fileNameId=\"sticky-file-name-id\" fontSize={1} />\n  }\n\n  const GoToTopButton = ({sx}: {sx?: ButtonProps['sx']}) => {\n    return (\n      <Button\n        leadingVisual={ArrowUpIcon}\n        variant=\"invisible\"\n        size=\"small\"\n        sx={{color: 'fg.default', ...sx}}\n        onClick={event => {\n          event.preventDefault()\n          window.scrollTo({top: 0, behavior: 'smooth'})\n        }}\n      >\n        Top\n      </Button>\n    )\n  }\n\n  return (\n    <Box\n      sx={{\n        display: isStickied ? 'flex' : 'none',\n        minWidth: 0,\n        py: 2,\n        ...stickySx,\n      }}\n    >\n      {!showTree ? (\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            overflow: 'hidden',\n            mx: 2,\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            width: '100%',\n          }}\n        >\n          <Box sx={{display: 'flex', alignItems: 'center'}}>\n            {isStickied && treeToggleElement}\n            <Box sx={{ml: 1, mr: 2}}>\n              <ReposHeaderRefSelector buttonClassName=\"ref-selector-class\" />\n            </Box>\n            <Box\n              sx={{\n                textOverflow: 'ellipsis',\n                overflow: 'hidden',\n                display: 'flex',\n              }}\n            >\n              <StickyReposHeaderBreadcrumb />\n            </Box>\n          </Box>\n          <GoToTopButton sx={{ml: 2}} />\n        </Box>\n      ) : (\n        <Box\n          sx={{\n            mr: 2,\n            ml: 3,\n            textOverflow: 'ellipsis',\n            overflow: 'hidden',\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            width: '100%',\n          }}\n        >\n          <StickyReposHeaderBreadcrumb />\n          <GoToTopButton sx={{ml: 2}} />\n        </Box>\n      )}\n    </Box>\n  )\n}\n\ntry{ FileNameStickyHeader.displayName ||= 'FileNameStickyHeader' } catch {}\ntry{ StickyReposHeaderBreadcrumb.displayName ||= 'StickyReposHeaderBreadcrumb' } catch {}\ntry{ GoToTopButton.displayName ||= 'GoToTopButton' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {KebabHorizontalIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, IconButton, Text} from '@primer/react'\n\nexport function TreeOverflowMenu() {\n  const {refInfo} = useFilesPageInfo()\n  if (!refInfo.canEdit) {\n    return null\n  }\n\n  return (\n    <ActionMenu>\n      <ActionMenu.Anchor>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          icon={KebabHorizontalIcon}\n          aria-label=\"More folder actions\"\n          title=\"More folder actions\"\n        />\n      </ActionMenu.Anchor>\n\n      <ActionMenu.Overlay>\n        <ActionList>\n          <DeleteDirectoryItem />\n        </ActionList>\n      </ActionMenu.Overlay>\n    </ActionMenu>\n  )\n}\n\nexport function DeleteDirectoryItem() {\n  const repo = useCurrentRepository()\n  const {path, refInfo} = useFilesPageInfo()\n\n  if (!refInfo.canEdit) {\n    return null\n  }\n  return (\n    <ActionList.LinkItem\n      as={Link}\n      to={repositoryTreePath({repo, path, commitish: refInfo.name, action: 'tree/delete'})}\n    >\n      <Text sx={{color: 'danger.fg'}}>Delete directory</Text>\n    </ActionList.LinkItem>\n  )\n}\n\ntry{ TreeOverflowMenu.displayName ||= 'TreeOverflowMenu' } catch {}\ntry{ DeleteDirectoryItem.displayName ||= 'DeleteDirectoryItem' } catch {}","import {AnalyticsProvider} from '@github-ui/analytics-provider'\nimport type {FileBlobPagePayload, FileTreePagePayload} from '@github-ui/code-view-types'\nimport {CurrentRepositoryProvider} from '@github-ui/current-repository'\nimport {CurrentUserProvider} from '@github-ui/current-user'\nimport {FocusHintContextProvider} from '@github-ui/focus-hint-context'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {ScreenSize, ScreenSizeProvider} from '@github-ui/screen-size'\nimport {CodeViewOptionsProvider} from '@github-ui/use-code-view-options'\nimport React, {useEffect, useMemo} from 'react'\n\nexport function App({children}: {children?: React.ReactNode}) {\n  const payload = useRoutePayload<FileBlobPagePayload | FileTreePagePayload>()\n  const [repo] = React.useState(payload?.repo)\n  const [user] = React.useState(payload?.currentUser)\n  const appName = 'react-code-view'\n  const category = ''\n  const metadata = useMemo(() => ({}), [])\n\n  useEffect(() => {\n    const footer = document.querySelector('.footer')\n    if (footer) {\n      footer.querySelector('.mt-6')?.classList.replace('mt-6', 'mt-0')\n      footer.querySelector('.border-top')?.classList.remove('border-top')\n    }\n  }, [])\n\n  return (\n    <>\n      {/* While this meta tag is often in the <head>, in the case where we turbo nav from a page that didn't have this\n          meta tag in the <head>, it won't get placed in the <head>, so we render it here ourselves so that it exists\n          _somewhere_.\n          We must keep the one in the <head> though, because some vitals are sent before react renders so having the\n          meta tag here alone is insufficient. */}\n      <meta data-hydrostats=\"publish\" />\n      <ScreenSizeProvider initialValue={ScreenSize.xxxlarge}>\n        <AnalyticsProvider appName={appName} category={category} metadata={metadata}>\n          <CurrentUserProvider user={user}>\n            <CurrentRepositoryProvider repository={repo}>\n              <CodeViewOptionsProvider>\n                <FocusHintContextProvider>{children}</FocusHintContextProvider>\n              </CodeViewOptionsProvider>\n            </CurrentRepositoryProvider>\n          </CurrentUserProvider>\n        </AnalyticsProvider>\n      </ScreenSizeProvider>\n    </>\n  )\n}\n\ntry{ App.displayName ||= 'App' } catch {}","import type {SymbolKind} from '@github-ui/code-nav'\nimport {Box} from '@primer/react'\n\nexport function SymbolIndicator({symbolKind, showFullSymbol}: {symbolKind: SymbolKind; showFullSymbol?: boolean}) {\n  const smallSx = {fontSize: 'smaller', px: 1, py: '1px'}\n  const mediumSx = {fontSize: 'small', px: 2, py: '1px', mt: '2px'}\n  const symbolSx = showFullSymbol ? mediumSx : smallSx\n  const sx = showFullSymbol ? {} : {mr: 2}\n\n  if (!symbolKind) {\n    return null\n  }\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'row', position: 'relative', ...sx}}>\n      <Box\n        sx={{\n          backgroundColor: symbolKind.plColor,\n          opacity: 0.1,\n          position: 'absolute',\n          borderRadius: 5,\n          alignItems: 'stretch',\n          display: 'flex',\n          width: '100%',\n          height: '100%',\n        }}\n      />\n      <Box\n        sx={{\n          color: symbolKind.plColor,\n          borderRadius: 5,\n          fontWeight: 600,\n          ...symbolSx,\n        }}\n      >\n        {showFullSymbol ? symbolKind.fullName : symbolKind.shortName}\n      </Box>\n    </Box>\n  )\n}\n\ntry{ SymbolIndicator.displayName ||= 'SymbolIndicator' } catch {}","import type {CodeSymbol, TreeNode} from '@github-ui/code-nav'\nimport {Box, TreeView, Truncate} from '@primer/react'\nimport React, {useState} from 'react'\n\nimport {SymbolIndicator} from './SymbolIndicator'\n\nexport const CodeNavSymbolTree = React.memo(function CodeNavSymTree({\n  treeSymbols,\n  onTreeSymbolSelect,\n}: {\n  treeSymbols: TreeNode[]\n  onTreeSymbolSelect: (sym: CodeSymbol) => void\n}) {\n  const isFlatTree = !treeSymbols.some(node => node.isParent || node.children.length > 0)\n\n  return (\n    <Box id=\"filter-results\" sx={{mb: -2, overflowY: 'auto', maxHeight: 'calc(100vh - 237px)', pl: 3, pb: 2, pt: 1}}>\n      <TreeView aria-label=\"Code Navigation\" flat={isFlatTree}>\n        {treeSymbols.map((s, idx) => (\n          <CodeNavTreeItem\n            key={`${idx}${s.symbol.name}`}\n            id={`${idx}${s.symbol.name}`}\n            symbol={s}\n            depth={s.isParent ? 1 : 2}\n            onSelect={onTreeSymbolSelect}\n          />\n        ))}\n      </TreeView>\n    </Box>\n  )\n})\n\nfunction CodeNavTreeContent({symbol}: {symbol: TreeNode}) {\n  return (\n    <Box sx={{display: 'flex'}}>\n      <SymbolIndicator symbolKind={symbol.symbol.kind} />\n      {\n        // space for screen reader to read out text correctly\n        '  '\n      }\n      <Truncate title={symbol.symbol.name} sx={{maxWidth: 180, display: 'block'}}>\n        <span>{symbol.symbol.name}</span>\n      </Truncate>\n    </Box>\n  )\n}\nfunction CodeNavTreeItem({\n  symbol,\n  depth,\n  onSelect,\n  id,\n}: {\n  symbol: TreeNode\n  depth: number\n  onSelect: (sym: CodeSymbol) => void\n  id: string\n}) {\n  //Only expanding the first few levels of the tree by default, we add 2 each time to the depth because it pushes\n  //the elements further to the right in the UI, hence using 7 here as the depth check\n  const [isExpanded, setIsExpanded] = useState(depth <= 7)\n\n  return (\n    <TreeView.Item\n      onSelect={() => onSelect(symbol.symbol)}\n      expanded={isExpanded}\n      onExpandedChange={() => setIsExpanded(!isExpanded)}\n      id={id}\n    >\n      <CodeNavTreeContent symbol={symbol} />\n\n      {symbol.isParent && symbol.children.length > 0 && (\n        <TreeView.SubTree>\n          {symbol.children.map((childSymbol, index) => {\n            return (\n              <CodeNavTreeItem\n                symbol={childSymbol}\n                depth={childSymbol.isParent ? depth + 1 : depth}\n                onSelect={onSelect}\n                key={`${index}${childSymbol.symbol.name}`}\n                id={`${index}${childSymbol.symbol.name}`}\n              />\n            )\n          })}\n        </TreeView.SubTree>\n      )}\n    </TreeView.Item>\n  )\n}\n\ntry{ CodeNavSymbolTree.displayName ||= 'CodeNavSymbolTree' } catch {}\ntry{ CodeNavTreeContent.displayName ||= 'CodeNavTreeContent' } catch {}\ntry{ CodeNavTreeItem.displayName ||= 'CodeNavTreeItem' } catch {}","import type {CodeSymbol} from '@github-ui/code-nav'\nimport {HighlightedText} from '@github-ui/ref-selector/highlighted-text'\nimport {ActionList, Link} from '@primer/react'\nimport React from 'react'\n\nimport {SymbolIndicator} from './SymbolIndicator'\n\ninterface JumpToItemProps {\n  symbol: CodeSymbol\n  filterText: string\n  onSelect: (symbol: CodeSymbol) => void\n  focused: boolean\n  index: number\n}\nexport const JumpToItem = React.memo(function JumpToItemInner({\n  symbol,\n  filterText,\n  onSelect,\n  focused,\n  index,\n}: JumpToItemProps) {\n  const extraSx = focused ? {backgroundColor: 'var(--bgColor-muted, var(--color-canvas-subtle)) !important'} : {}\n\n  return (\n    <ActionList.Item\n      role=\"option\"\n      id={`jump-to-item-${index}`}\n      aria-selected={focused}\n      sx={{minWidth: 0, ...extraSx}}\n      onSelect={() => onSelect(symbol)}\n    >\n      <Link\n        href={symbol.href()}\n        sx={{\n          ':hover': {\n            textDecoration: 'none',\n          },\n        }}\n      >\n        <div style={{display: 'flex'}}>\n          <SymbolIndicator symbolKind={symbol.kind} />\n          {\n            '  ' // space for screen reader to read out text correctly\n          }\n          <div style={{display: 'flex', minWidth: 0, alignItems: 'flex-end'}}>\n            <HighlightedText\n              key={symbol.fullyQualifiedName}\n              search={filterText}\n              text={symbol.name}\n              overflowWidth={175}\n              hideOverflow={true}\n            />\n          </div>\n        </div>\n      </Link>\n    </ActionList.Item>\n  )\n})\n\ntry{ JumpToItem.displayName ||= 'JumpToItem' } catch {}","import {announce} from '@github-ui/aria-live'\nimport type {CodeSymbol} from '@github-ui/code-nav'\nimport {FocusKeys} from '@primer/behaviors'\nimport {ActionList, useFocusZone} from '@primer/react'\nimport type React from 'react'\nimport {useEffect, useRef} from 'react'\n\nimport {JumpToItem} from './JumpToItem'\n\ninterface JumpToItemListProps {\n  filterText: string\n  codeSymbols: CodeSymbol[]\n  onSelect: (element: CodeSymbol) => void\n  focusedIndex: number\n}\n\nconst maxHeight = '68vh'\n/**\n * A list of symbols that can be filtered by a search string\n */\nexport function JumpToItemList(props: JumpToItemListProps) {\n  return <FullJumpToItemList {...props} />\n}\n\nfunction FullJumpToItemList({codeSymbols, filterText, onSelect, focusedIndex}: JumpToItemListProps) {\n  const codeSymbolsLength = useRef(codeSymbols.length)\n  // Use this ref to append a zero-width space to the end of the message to force aria to reread messages\n  const codeSymbolMessageAriaHack = useRef('')\n  const {containerRef} = useFocusZone({\n    bindKeys: FocusKeys.ArrowVertical | FocusKeys.HomeAndEnd,\n  })\n\n  useEffect(() => {\n    if (codeSymbols.length === codeSymbolsLength.current) {\n      codeSymbolMessageAriaHack.current += '\\u200B'\n    }\n    const codeSymbolText = codeSymbols.length === 1 ? 'symbol' : 'symbols'\n    announce(`${codeSymbols.length} ${codeSymbolText} found${codeSymbolMessageAriaHack.current}`)\n    codeSymbolsLength.current = codeSymbols.length\n  }, [codeSymbols])\n  return (\n    <ActionList\n      ref={containerRef as React.Ref<HTMLUListElement>}\n      role=\"listbox\"\n      id=\"filter-results\"\n      aria-orientation=\"vertical\"\n      sx={{maxHeight, overflowY: 'auto'}}\n    >\n      {codeSymbols.map((sym, index) => {\n        const {name, lineNumber} = sym\n        return (\n          <JumpToItem\n            key={`${name}_${lineNumber}`}\n            symbol={sym}\n            filterText={filterText}\n            onSelect={onSelect}\n            focused={index === focusedIndex}\n            index={index}\n          />\n        )\n      })}\n    </ActionList>\n  )\n}\n\ntry{ JumpToItemList.displayName ||= 'JumpToItemList' } catch {}\ntry{ FullJumpToItemList.displayName ||= 'FullJumpToItemList' } catch {}","import {useCurrentRepository} from '@github-ui/current-repository'\nimport {codeNavGeneralSearchPath, codeNavSearchPath} from '@github-ui/paths'\nimport {SearchIcon} from '@primer/octicons-react'\nimport {Box, Heading, Link, Octicon, Text} from '@primer/react'\nimport {useEffect, useRef, useState} from 'react'\n\nexport function SymbolZeroState({filterText, isFindInFile}: {filterText?: string; isFindInFile?: boolean}) {\n  const [message, setMessage] = useState(isFindInFile ? 'No matches found' : 'No symbols found')\n  const repo = useCurrentRepository()\n\n  const firstUpdate = useRef(true)\n\n  useEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false\n      return\n    }\n\n    // This is a hack because aria-live doesn't re-announce updates with the same content\n    // But we don't need to do this on the first render or else aria-live will announce twice\n    setMessage(`${message}\\u200B`) // 0 width space\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filterText])\n\n  return (\n    <Box sx={{justifyContent: 'center', alignItems: 'center', display: 'flex', flexDirection: 'column', pb: 2}}>\n      {filterText === '' && (\n        <>\n          <Box sx={{bg: 'canvas.subtle', borderRadius: 6, p: '16px'}}>\n            <Box sx={{textAlign: 'center'}}>\n              <Heading as=\"h3\" sx={{fontSize: 0, marginBottom: '4px'}}>\n                Symbol outline not available for this file\n              </Heading>\n\n              <Box\n                sx={{\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  display: 'flex',\n                  fontSize: '12px',\n                  color: 'fg.muted',\n                }}\n              >\n                To inspect a symbol, try clicking on the symbol directly in the code view.\n              </Box>\n            </Box>\n          </Box>\n          <Box sx={{mt: '8px', fontSize: 0, textAlign: 'center', color: 'fg.muted'}}>\n            {' '}\n            Code navigation supports a limited number of languages.{' '}\n            <Link\n              inline\n              href=\"https://docs.github.com/repositories/working-with-files/using-files/navigating-code-on-github\"\n            >\n              See which languages are supported.\n            </Link>\n          </Box>\n        </>\n      )}\n      {filterText && (\n        <>\n          <Octicon icon={SearchIcon} size={24} />\n          <Text\n            as=\"h3\"\n            sx={{textAlign: 'center', fontWeight: 600, fontSize: 3, py: 2}}\n            role=\"alert\"\n            aria-relevant=\"all\"\n          >\n            {message}\n          </Text>\n        </>\n      )}\n      {filterText && (\n        <Text id=\"filter-zero-state\" sx={{textAlign: 'center', px: 3, mt: 2, fontSize: 0, color: 'fg.subtle'}}>\n          No lines in this file contain that string.\n          <br />\n          Search in{' '}\n          <Link\n            href={codeNavSearchPath({\n              owner: repo.ownerLogin,\n              repo: repo.name,\n              searchTerm: filterText,\n            })}\n            inline\n          >\n            {repo.ownerLogin}/{repo.name}\n          </Link>{' '}\n          or{' '}\n          <Link href={codeNavGeneralSearchPath({searchTerm: filterText})} inline>\n            all of GitHub\n          </Link>\n        </Text>\n      )}\n    </Box>\n  )\n}\n\ntry{ SymbolZeroState.displayName ||= 'SymbolZeroState' } catch {}","import {debounce} from '@github/mini-throttle'\nimport type {CodeSymbol, TreeNode} from '@github-ui/code-nav'\nimport {AllShortcutsEnabled} from '@github-ui/code-view-shared/components/AllShortcutsEnabled'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {filterSort} from '@github-ui/filter-sort'\nimport {compare, fuzzyScore} from '@github-ui/fuzzy-filter'\nimport {FilterIcon, XCircleFillIcon, XIcon} from '@primer/octicons-react'\nimport {Box, IconButton, Octicon, Text, TextInput} from '@primer/react'\nimport {useEffect, useMemo, useRef, useState} from 'react'\n\nimport {useFocusSymbolPane} from '../../../../hooks/use-focus-symbol-pane'\nimport {CodeNavSymbolTree} from './CodeNavSymbolTree'\nimport {JumpToItemList} from './JumpToItemList'\nimport {SymbolZeroState} from './SymbolZeroState'\n\nexport const symbolsHeaderId = 'symbols-pane-header'\n/**\n * An action menu that allows the user to navigate to certain sections of a given\n * file.\n *\n * This was modeled after RefSelector, but couldn't be shoehorned into a generic\n * ActionMenu component because it needs to have different functionality and specific\n * visual rendering. It could potentially be made into a generic ActionMenu component\n * where RefSelector and this component could both use it, but it didn't seem worth the\n * effort.\n *\n */\nexport function CodeNavSymbolNavigation({\n  codeSymbols,\n  onSymbolSelect,\n  treeSymbols,\n  autoFocusSearch,\n  onClose,\n}: {\n  codeSymbols: CodeSymbol[]\n  onSymbolSelect: (sym: CodeSymbol) => void\n  treeSymbols: TreeNode[]\n  autoFocusSearch: boolean\n  onClose: () => void\n}) {\n  const [filterText, setFilterText] = useState('')\n  const [filteredCodeSymbols, setFilteredCodeSymbols] = useState(codeSymbols)\n  useEffect(() => {\n    if (filterText === '') {\n      setFilteredCodeSymbols(codeSymbols)\n      return\n    }\n    const filteredResult = getFilteredCodeSymbols(filterText, codeSymbols)\n    setFilteredCodeSymbols(filteredResult)\n  }, [filterText, codeSymbols])\n  return (\n    <JumpToActionList\n      treeSymbols={treeSymbols}\n      codeSymbols={filteredCodeSymbols}\n      filterText={filterText}\n      setFilterText={setFilterText}\n      onSymbolSelect={onSymbolSelect}\n      autoFocusSearch={autoFocusSearch}\n      onClose={onClose}\n    />\n  )\n}\n\nexport function JumpToActionList({\n  codeSymbols,\n  setFilterText,\n  filterText,\n  onSymbolSelect,\n  treeSymbols,\n  autoFocusSearch,\n  onClose,\n}: {\n  codeSymbols: CodeSymbol[]\n  setFilterText: (filterText: string) => void\n  filterText: string\n  onSymbolSelect: (sym: CodeSymbol) => void\n  treeSymbols: TreeNode[]\n  autoFocusSearch: boolean\n  onClose: () => void\n}) {\n  const hasCodeSymbols = codeSymbols?.length > 0\n  const hasLocalCodeSymbols = treeSymbols.length > 0\n  const hasAnySymbols = hasCodeSymbols || hasLocalCodeSymbols\n  const [focusedIndex, setFocusedIndex] = useState<number>(-1)\n  const {sendRepoKeyDownEvent} = useReposAnalytics()\n  const filterSymbolsRef = useRef<HTMLInputElement>(null)\n  const listIsFilteredOrEmpty = !hasLocalCodeSymbols || filterText !== ''\n\n  useEffect(() => {\n    if (autoFocusSearch) {\n      filterSymbolsRef.current?.focus()\n    }\n  }, [autoFocusSearch])\n\n  useFocusSymbolPane(() => {\n    filterSymbolsRef.current?.focus()\n  })\n\n  //TODO: this debounce does NOT cancel all outstanding debounce events for some reason, look into why that is the case\n  //for the case of this event, it will send a keydown event for every key pressed in the filter, which is obviously\n  //not what we care about. In the meantime, using a timeout that is declared globally (becuase it is reset on every\n  // render) to cancel the timeout and only send the event when the user stops typing\n  const debouncedSendStats = useMemo(\n    () =>\n      debounce(() => {\n        sendRepoKeyDownEvent('BLOB_SYMBOLS_MENU.FILTER_SYMBOLS')\n      }, 400),\n    [sendRepoKeyDownEvent],\n  )\n  return (\n    // eslint-disable-next-line github/a11y-role-supports-aria-props\n    <Box sx={{py: 2, px: 3}} aria-labelledby={symbolsHeaderId}>\n      <Box sx={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\n        <Box\n          as={'h2'}\n          sx={{\n            fontSize: 1,\n            order: 1,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignItems: 'center',\n            fontWeight: 600,\n          }}\n          id={symbolsHeaderId}\n          tabIndex={-1}\n        >\n          Symbols\n        </Box>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          aria-label=\"Close symbols\"\n          data-hotkey=\"Escape\"\n          icon={XIcon}\n          sx={{\n            order: 3,\n            color: 'fg.default',\n            mr: -2,\n          }}\n          onClick={onClose}\n          variant=\"invisible\"\n        />\n      </Box>\n      {hasAnySymbols && (\n        <Box sx={{fontSize: 0, color: 'fg.muted', pt: 2}}>\n          Find definitions and references for functions and other symbols in this file by clicking a symbol below or in\n          the code.\n        </Box>\n      )}\n      {(hasCodeSymbols || filterText !== '') && (\n        <TextInput\n          block\n          leadingVisual={() => <Octicon aria-hidden=\"true\" icon={FilterIcon} />}\n          ref={filterSymbolsRef}\n          trailingAction={\n            filterText ? (\n              <TextInput.Action\n                onClick={() => {\n                  setFilterText('')\n                  setFocusedIndex(-1)\n                }}\n                icon={XCircleFillIcon}\n                aria-label=\"Clear input\"\n                data-testid=\"clear-search\"\n                sx={{color: 'fg.subtle'}}\n              />\n            ) : (\n              <></>\n            )\n          }\n          trailingVisual={\n            filterText\n              ? undefined\n              : () => (\n                  <AllShortcutsEnabled>\n                    <Box sx={{mr: '6px'}}>\n                      <kbd>r</kbd>\n                    </Box>\n                  </AllShortcutsEnabled>\n                )\n          }\n          sx={{mt: 2, borderRadius: 2}}\n          placeholder=\"Filter symbols\"\n          value={filterText}\n          name=\"Filter symbols\"\n          aria-label=\"Filter symbols\"\n          aria-controls={!hasCodeSymbols && listIsFilteredOrEmpty ? 'filter-zero-state' : 'filter-results'}\n          aria-expanded=\"true\"\n          aria-autocomplete=\"list\"\n          aria-activedescendant={focusedIndex === -1 ? undefined : `jump-to-item-${focusedIndex}`}\n          onKeyDown={e => {\n            // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n            if (e.key === 'ArrowDown' || ((e.key === 'N' || e.key === 'n') && e.ctrlKey)) {\n              const nextIndex = Math.min(focusedIndex + 1, codeSymbols.length - 1)\n              setFocusedIndex(nextIndex)\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n            } else if (e.key === 'ArrowUp' || ((e.key === 'P' || e.key === 'p') && e.ctrlKey)) {\n              const nextIndex = Math.max(focusedIndex - 1, 0)\n              setFocusedIndex(nextIndex)\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n            } else if (e.key === 'Enter' && codeSymbols[focusedIndex]) {\n              onSymbolSelect(codeSymbols[focusedIndex])\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n            } else if (e.key === 'Escape') {\n              onClose()\n            }\n          }}\n          role=\"combobox\"\n          onChange={e => {\n            const target = e.target\n            setFilterText(target.value)\n\n            debouncedSendStats()\n            setFocusedIndex(-1)\n          }}\n        />\n      )}\n      {!listIsFilteredOrEmpty && (\n        // The underlying Tree component has a padding built into it with no sx available (due to it being a raw ul element).\n        // In order to \"trim\" the padding off, we use negative margin. In a perfect world, either the wrapping component defines\n        // the padding of its children or an sx override is provided. We may want to follow up with this relatively soon.\n        <Box sx={{ml: -3, mb: -2}}>\n          <CodeNavSymbolTree treeSymbols={treeSymbols} onTreeSymbolSelect={onSymbolSelect} />\n        </Box>\n      )}\n      {hasCodeSymbols && listIsFilteredOrEmpty && (\n        <JumpToItemList\n          codeSymbols={codeSymbols}\n          filterText={filterText}\n          onSelect={onSymbolSelect}\n          focusedIndex={focusedIndex}\n        />\n      )}\n      {!hasCodeSymbols && listIsFilteredOrEmpty && (\n        <Text sx={{display: 'flex', alignItems: 'center', justifyContent: 'center', mt: 2}}>\n          <SymbolZeroState filterText={filterText} />\n        </Text>\n      )}\n    </Box>\n  )\n}\n\nfunction getFilteredCodeSymbols(searchTerm: string, codeSymbols: CodeSymbol[]): CodeSymbol[] {\n  const fuzzyQuery = searchTerm.replace(/\\s/g, '')\n  const key = (r: CodeSymbol) => {\n    const score = fuzzyScore(r.name, fuzzyQuery)\n    return score > 0 ? {score, text: r.name} : null\n  }\n  return filterSort(codeSymbols, key, compare)\n}\n\ntry{ CodeNavSymbolNavigation.displayName ||= 'CodeNavSymbolNavigation' } catch {}\ntry{ JumpToActionList.displayName ||= 'JumpToActionList' } catch {}","import {type Range, searchInBlobContent, searchInBlobIncrementally, textMatchable} from '@github-ui/code-nav'\n\nimport type {FindInFileRequest, FindInFileResponse} from '../hooks/use-in-file-search-results'\n\nexport function findInFileWorkerJob({data}: {data: FindInFileRequest}): FindInFileResponse {\n  const {query, lines, currentCodeReferences} = data\n  let output: Range[] = []\n\n  // incremental search\n  if (currentCodeReferences) {\n    output = searchInBlobIncrementally(currentCodeReferences, lines, textMatchable(query))\n  } else {\n    output = searchInBlobContent(lines, textMatchable(query))\n  }\n\n  return {ranges: output, query}\n}\n","import {verifiedFetch} from '@github-ui/verified-fetch'\n\nconst UPDATE_EXPAND_PREFERENCES_URL = '/repos/preferences'\n\nexport function useUpdatePanelExpandPreferences() {\n  async function updateExpandPreferences(\n    treeValue: boolean | null,\n    symbolsValue: boolean | null,\n    lineWrapValue: boolean | null,\n  ) {\n    const formData = new FormData()\n    formData.set('tree_view_expanded_preference', treeValue === null ? '' : treeValue ? 'true' : 'false')\n    formData.set('symbols_view_expanded_preference', symbolsValue === null ? '' : symbolsValue ? 'true' : 'false')\n    formData.set('code_line_wrap_enabled', lineWrapValue === null ? '' : lineWrapValue ? 'true' : 'false')\n    verifiedFetch(UPDATE_EXPAND_PREFERENCES_URL, {\n      method: 'PUT',\n      body: formData,\n      headers: {Accept: 'application/json'},\n    })\n  }\n\n  return updateExpandPreferences\n}\n","import type React from 'react'\nimport {createContext, useCallback, useContext, useMemo, useRef, useState} from 'react'\n\nimport {useIsCursorEnabled} from '../hooks/use-cursor-navigation'\n\ntype FindInFileOpenContextType = {\n  findInFileOpen: boolean\n  setFindInFileOpen: (open: boolean) => void\n}\n\nconst FindInFileOpenContext = createContext<FindInFileOpenContextType>({\n  findInFileOpen: false,\n  setFindInFileOpen: () => undefined,\n})\n\n/**\n * This is equivalent to a simple setState, except we save the search state of the find in file panel when it's closed\n * so we can reopen with the last used value\n */\nexport function FindInFileOpenProvider({\n  children,\n  searchTerm,\n  setSearchTerm,\n  isBlame,\n}: {\n  children: React.ReactNode\n  searchTerm: string\n  setSearchTerm: (term: string) => void\n  isBlame: boolean\n}) {\n  const cursorEnabled = useIsCursorEnabled(isBlame)\n  const lastSearchTerm = useRef<string>('')\n  const [findInFileOpen, setRawFindInFileOpen] = useState<boolean>(false)\n  const setFindInFileOpen = useCallback(\n    (open: boolean) => {\n      if (open && searchTerm === '' && lastSearchTerm.current !== '') {\n        setSearchTerm(lastSearchTerm.current)\n      } else if (!open && searchTerm !== '') {\n        lastSearchTerm.current = searchTerm\n        setSearchTerm('')\n      }\n\n      setRawFindInFileOpen(open)\n    },\n    [searchTerm, setSearchTerm],\n  )\n\n  const contextValue: FindInFileOpenContextType = useMemo(() => {\n    return {\n      findInFileOpen: cursorEnabled ? false : findInFileOpen,\n      setFindInFileOpen,\n    }\n  }, [findInFileOpen, setFindInFileOpen, cursorEnabled])\n\n  return <FindInFileOpenContext.Provider value={contextValue}>{children}</FindInFileOpenContext.Provider>\n}\n\nexport function useFindInFileOpen() {\n  return useContext(FindInFileOpenContext)\n}\n\ntry{ FindInFileOpenContext.displayName ||= 'FindInFileOpenContext' } catch {}\ntry{ FindInFileOpenProvider.displayName ||= 'FindInFileOpenProvider' } catch {}","import {useCurrentBlame} from './CurrentBlame'\nimport {useCurrentBlob} from './CurrentBlob'\n\nexport enum BlobDisplayType {\n  FileRenderer = 'FileRenderer',\n  Image = 'Image',\n  TooLargeError = 'TooLargeError',\n  CSV = 'CSV',\n  Markdown = 'Markdown',\n  IssueTemplate = 'IssueTemplate',\n  Code = 'Code',\n}\n\nexport function useBlobRendererType(): BlobDisplayType {\n  const payload = useCurrentBlob()\n  const blame = useCurrentBlame()\n\n  if (payload.renderedFileInfo && !payload.shortPath && !blame) {\n    return BlobDisplayType.FileRenderer\n  } else if (payload.renderImageOrRaw) {\n    if (payload.image) {\n      return BlobDisplayType.Image\n    } else {\n      return BlobDisplayType.TooLargeError\n    }\n  } else if (payload.csv && !blame) {\n    return BlobDisplayType.CSV\n  } else if (payload.richText && !blame) {\n    return BlobDisplayType.Markdown\n  } else if (\n    ((payload.issueTemplate?.structured && payload.issueTemplate.valid) ||\n      (payload.discussionTemplate && payload.discussionTemplate.valid)) &&\n    !blame &&\n    !payload.isPlain\n  ) {\n    return BlobDisplayType.IssueTemplate\n  } else {\n    return BlobDisplayType.Code\n  }\n}\n","/**\n * Helper function for exhaustive checks of discriminated unions.\n *\n * @example\n * ```\n *    type A = {type: 'a'};\n *    type B = {type: 'b'};\n *    type Union = A | B;\n *\n *    function doSomething(arg: Union) {\n *      if (arg.type === 'a') {\n *        return something;\n *      }\n *\n *      if (arg.type === 'b') {\n *        return somethingElse;\n *      }\n *\n *      // TS will error if there are other types in the union\n *      // Will throw an Error when called at runtime.\n *      return assertNever(arg);\n *    }\n * ```\n */\nexport function assertNever(x: never): never {\n  throw new Error(`Unexpected object: ${x}`)\n}\n","import type {SharedMarkdownContentProps} from '@github-ui/code-view-shared/components/SharedMarkdownContent'\nimport {SharedMarkdownContent} from '@github-ui/code-view-shared/components/SharedMarkdownContent'\nimport {useRef} from 'react'\n\nimport SelectAllShortcutButton from '../utilities/SelectAllShortcutButton'\n\nexport function MarkdownContent(props: SharedMarkdownContentProps) {\n  const markdownContainer = useRef<HTMLDivElement>(null)\n  return (\n    <>\n      <SharedMarkdownContent {...props} ref={markdownContainer} />\n      <SelectAllShortcutButton containerRef={markdownContainer} />\n    </>\n  )\n}\n\ntry{ MarkdownContent.displayName ||= 'MarkdownContent' } catch {}","import type {SplitCodeownersError} from '@github-ui/code-view-types'\nimport {createContext, useContext} from 'react'\n\nconst SplitCodeownersErrorsContext = createContext<SplitCodeownersError[]>([])\n\nexport default SplitCodeownersErrorsContext\n\nexport function useSplitCodeownersErrorsContext() {\n  return useContext(SplitCodeownersErrorsContext)\n}\n\ntry{ SplitCodeownersErrorsContext.displayName ||= 'SplitCodeownersErrorsContext' } catch {}","import {useTheme} from '@primer/react'\n\nconst recencyTimeRange = 2 * 365 * 24 * 60 * 60 * 1000 // 2 years\n\n// See app/view_models/blob/blame_view.rb for breakpoints\nconst blameAgeProportionBreakpoints = [0.007, 0.014, 0.03, 0.049, 0.084, 0.14, 0.23, 0.38, 0.62, Number.MAX_VALUE]\n\n// See https://primer.style/primitives/colors for the color scale\n// TODO: we can avoid this lookup once the sx prop supports `scale` colors\nconst rawColors: Record<string, string> = {\n  'scale.orange.0': '#ffdfb6',\n  'scale.orange.1': '#ffc680',\n  'scale.orange.2': '#f0883e',\n  'scale.orange.3': '#f0883e',\n  'scale.orange.4': '#db6d28',\n  'scale.orange.5': '#bd561d',\n  'scale.orange.6': '#9b4215',\n  'scale.orange.7': '#762d0a',\n  'scale.orange.8': '#5a1e02',\n  'scale.orange.9': '#3d1300',\n}\n\nexport function useBlameAgeColors() {\n  const {resolvedColorScheme} = useTheme()\n  const isDark = resolvedColorScheme?.startsWith('dark')\n\n  if (isDark) {\n    return new Array(10).fill(null).map((_, i) => rawColors[`scale.orange.${9 - i}`])\n  } else {\n    return new Array(10).fill(null).map((_, i) => rawColors[`scale.orange.${i}`])\n  }\n}\n\nexport function useBlameAgeColor(commitDate: Date, repoCreationDate: Date) {\n  const {resolvedColorScheme} = useTheme()\n  const isDark = resolvedColorScheme?.startsWith('dark')\n  const defaultColor = isDark ? rawColors['scale.orange.9'] : rawColors['scale.orange.0']\n\n  if (commitDate < repoCreationDate) {\n    // This is a silly edge case, but it can happen in test data\n    return defaultColor\n  }\n\n  const now = Date.now()\n  const timeRange = Math.min(now - repoCreationDate.getTime(), recencyTimeRange)\n  const commitAge = now - commitDate.getTime()\n\n  const proportion = commitAge / timeRange\n\n  let i = 0\n  for (const breakpoint of blameAgeProportionBreakpoints) {\n    if (proportion < breakpoint) {\n      return isDark ? rawColors[`scale.orange.${i}`] : rawColors[`scale.orange.${9 - i}`]\n    }\n    ++i\n  }\n\n  return defaultColor\n}\n","import type {CodeSection} from '@github-ui/code-nav'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box, Link} from '@primer/react'\nimport React from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {CodeLine} from './CodeLine'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {LineNumber} from './LineNumber'\n\ninterface CodeLinesSSRProps {\n  linesData: CodeLineData[]\n  tabSize: number\n  onCollapseToggle: () => void\n\n  codeSections?: Map<number, CodeSection[]>\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n  contentWidth?: number\n  copilotAccessAllowed: boolean\n  onLineNumberClick?: React.MouseEventHandler<HTMLDivElement>\n  onLineStickOrUnstick?: SetStickyLinesType\n}\n\nexport const CodeLinesSSR = React.memo(CodeLinesSSRUnmemoized)\n\nfunction CodeLinesSSRUnmemoized({\n  linesData,\n  onLineNumberClick,\n  codeSections,\n  codeLineToSectionMap,\n  onLineStickOrUnstick,\n  tabSize,\n  contentWidth,\n  copilotAccessAllowed,\n  onCollapseToggle,\n}: CodeLinesSSRProps) {\n  const wrapOptionEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const {rawBlobUrl} = useCurrentBlob()\n\n  return (\n    <>\n      <Box\n        className=\"react-code-file-contents\"\n        role=\"presentation\"\n        aria-hidden={true}\n        data-tab-size={tabSize}\n        data-paste-markdown-skip\n        sx={{\n          tabSize,\n          isolation: 'isolate',\n          position: 'relative',\n          width: contentWidth,\n          overflow: 'auto',\n          maxWidth: wrapOptionEnabled ? '100%' : 'unset',\n        }}\n        data-hpc\n      >\n        <div className=\"react-line-numbers\" style={{pointerEvents: 'auto'}}>\n          {linesData.map(lineData => {\n            return (\n              <LineNumber\n                codeLineData={lineData}\n                key={`line-number-${lineData.lineNumber}-content:${lineData.rawText?.substring(0, 100)}`}\n                onClick={onLineNumberClick}\n                ownedCodeSections={codeSections}\n                onLineStickOrUnstick={onLineStickOrUnstick}\n                onCollapseToggle={onCollapseToggle}\n              />\n            )\n          })}\n        </div>\n        <div className=\"react-code-lines\">\n          {linesData.map(lineData => {\n            return (\n              <CodeLine\n                codeLineData={lineData}\n                codeLineClassName={lineData.codeLineClassName}\n                stylingDirectivesLine={lineData.stylingDirectivesLine}\n                key={`line-data-${lineData.lineNumber}-content:${lineData.rawText?.substring(0, 100)}`}\n                id={`LC${lineData.lineNumber}`}\n                onLineStickOrUnstick={onLineStickOrUnstick}\n                setIsCollapsed={onCollapseToggle}\n                codeLineToSectionMap={codeLineToSectionMap}\n                copilotAccessAllowed={copilotAccessAllowed}\n                measureRef={undefined}\n                shouldUseInert={false}\n              />\n            )\n          })}\n        </div>\n      </Box>\n      {linesData.length === 1000 && (\n        <Box sx={{justifyContent: 'center', display: 'flex'}}>\n          <Link href={rawBlobUrl}>View remainder of file in raw view</Link>\n        </Box>\n      )}\n    </>\n  )\n}\n\ntry{ CodeLinesSSR.displayName ||= 'CodeLinesSSR' } catch {}\ntry{ CodeLinesSSRUnmemoized.displayName ||= 'CodeLinesSSRUnmemoized' } catch {}","import type {CodeSection} from '@github-ui/code-nav'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box, Link} from '@primer/react'\nimport React from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {numberOfLinesPerContentVisibility} from './CodeLinesNoVirtualization'\nimport {HighlightedLinesOverlay} from './HighlightedLinesOverlay'\nimport {HighlightedSymbolsOverlay} from './HighlightedSymbolsOverlay'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {LineNumberNoVirtualziation} from './LineNumberNoVirtualization'\nimport {SyntaxHighlightedOverlay} from './SyntaxHighlightedLine'\n\ninterface CodeLinesSSRNoVirtualizationProps {\n  linesData: CodeLineData[]\n  tabSize: number\n  onCollapseToggle: () => void\n  colorizedLines: SafeHTMLString[] | null\n  nonTruncatedLinesData: CodeLineData[]\n  codeSections?: Map<number, CodeSection[]>\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n  contentWidth?: number\n  copilotAccessAllowed: boolean\n  onLineNumberClick?: React.MouseEventHandler<HTMLDivElement>\n  onLineStickOrUnstick?: SetStickyLinesType\n}\n\nexport const CodeLinesSSRNoVirtualization = React.memo(CodeLinesSSRNoVirtualizationUnmemoized)\n\nfunction CodeLinesSSRNoVirtualizationUnmemoized({\n  linesData,\n  onLineNumberClick,\n  codeSections,\n  nonTruncatedLinesData,\n  colorizedLines,\n  onLineStickOrUnstick,\n  tabSize,\n  contentWidth,\n  copilotAccessAllowed,\n  onCollapseToggle,\n}: CodeLinesSSRNoVirtualizationProps) {\n  const wrapOptionEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const {rawBlobUrl} = useCurrentBlob()\n  //we want to wrap every 60 lines in a data-visibility wrapper, so we need\n  //to make this array to map over down below\n  const lineArrayMap = [...Array(Math.floor(linesData.length / numberOfLinesPerContentVisibility) + 1).keys()]\n\n  return (\n    <>\n      <Box\n        className=\"react-code-file-contents\"\n        role=\"presentation\"\n        aria-hidden={true}\n        data-tab-size={tabSize}\n        data-paste-markdown-skip\n        sx={{\n          tabSize,\n          isolation: 'isolate',\n          position: 'relative',\n          width: contentWidth,\n          overflow: 'auto',\n          maxWidth: wrapOptionEnabled ? '100%' : 'unset',\n        }}\n        data-hpc\n      >\n        <div\n          className=\"react-line-numbers-no-virtualization\"\n          style={{\n            pointerEvents: 'auto',\n            position: 'relative',\n            zIndex: 2,\n          }}\n        >\n          {lineArrayMap.map(segmentCount => {\n            const tempLines = linesData.slice(\n              segmentCount * numberOfLinesPerContentVisibility,\n              Math.min(\n                segmentCount * numberOfLinesPerContentVisibility + numberOfLinesPerContentVisibility,\n                linesData.length,\n              ),\n            )\n            return (\n              <div key={`line-number-wrapper-${segmentCount}`} className=\"react-no-virtualization-wrapper-lines\">\n                {tempLines.map(lineData => {\n                  return (\n                    <LineNumberNoVirtualziation\n                      codeLineData={lineData}\n                      key={`line-number-${lineData.lineNumber}`}\n                      onClick={onLineNumberClick}\n                      ownedCodeSections={codeSections}\n                      onLineStickOrUnstick={onLineStickOrUnstick}\n                      onCollapseToggle={onCollapseToggle}\n                    />\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n        <div className=\"react-code-lines react-code-lines-no-virtualization\">\n          <HighlightedSymbolsOverlay linesData={linesData} />\n          <HighlightedLinesOverlay linesData={linesData} copilotAccessAllowed={copilotAccessAllowed} />\n          <SyntaxHighlightedOverlay linesData={nonTruncatedLinesData} colorizedLines={colorizedLines} />\n          {linesData.length === 1000 && (\n            <Box sx={{justifyContent: 'center', display: 'flex'}}>\n              <Link href={rawBlobUrl}>View remainder of file in raw view</Link>\n            </Box>\n          )}\n        </div>\n      </Box>\n    </>\n  )\n}\n\ntry{ CodeLinesSSRNoVirtualization.displayName ||= 'CodeLinesSSRNoVirtualization' } catch {}\ntry{ CodeLinesSSRNoVirtualizationUnmemoized.displayName ||= 'CodeLinesSSRNoVirtualizationUnmemoized' } catch {}","/* eslint eslint-comments/no-use: off */\nimport {appendAndFocusSearchBar} from '@github-ui/append-and-focus-search-bar'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {editBlobPath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {Box, Text} from '@primer/react'\nimport {useEffect, useRef, useState} from 'react'\n// useLocation is safe for files not rendered in a partial on the overview.\n// eslint-disable-next-line no-restricted-imports\nimport {useLocation} from 'react-router-dom'\n\n// eslint-disable-next-line no-restricted-imports\nimport {formatBlobRange} from '../../../../../github/blob-anchor'\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {minLeftOffsetBlame, minLeftOffsetBlob, useCursorNavigation} from '../../../../hooks/use-cursor-navigation'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {getActualLineNumberBinarySearch, textAreaId} from '../../../../utilities/lines'\nimport type {CodeNavData} from '../BlobContent'\nimport HighlightedLineMenu, {firstOptionId, type HighlightedLineMenuHandle} from '../HighlightedLineMenu'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\nexport function NavigationCursor({\n  linesData,\n  onCodeNavTokenSelected,\n  onLineNumberClick,\n  isBlame,\n  isCursorVisible,\n  isVirtualized,\n  textAreaRef,\n  shouldRenderOverlay,\n  tabSize,\n  optionalTestLeftOffsetFunction,\n  textSelection,\n  onCollapseToggle,\n  onLineStickOrUnstick,\n  optionalTestTopOffsetFunction,\n  additionalTextAreaInstructions,\n}: {\n  linesData: readonly CodeLineData[]\n  onCodeNavTokenSelected?: (symbol: CodeNavData) => void\n  cursorClickPosition?: {startX: number; startY: number; endX: number; endY: number} | undefined\n  onLineNumberClick?: React.MouseEventHandler<HTMLElement>\n  isBlame: boolean\n  isCursorVisible: boolean\n  isVirtualized: boolean\n  textAreaRef: React.RefObject<HTMLTextAreaElement> | undefined\n  shouldRenderOverlay: boolean\n  tabSize: number\n  textSelection?: {start: number; end: number; keyboard: boolean; displayStart: boolean}\n  additionalTextAreaInstructions: string\n  onCollapseToggle: () => void\n  onLineStickOrUnstick?: SetStickyLinesType\n  optionalTestLeftOffsetFunction?: (leftOffset: number) => void\n  optionalTestTopOffsetFunction?: (leftOffset: number) => void\n}) {\n  const [leftOffset, setLeftOffset] = useState(0)\n  const [topOffset, setTopOffset] = useState(0)\n  const [shouldShowHighlightMenu, setShouldShowHighlightMenu] = useState(false)\n  const lastKeyPressed = useRef('')\n  const menuRef = useRef<HighlightedLineMenuHandle>(null)\n  const repo = useCurrentRepository()\n  const {refInfo, path} = useFilesPageInfo()\n\n  const {\n    cursorNavigationHighlightLine,\n    expandAndFocusLineContextMenu,\n    cursorNavigationEnter,\n    searchShortcut,\n    cursorNavigationPageDown,\n    cursorNavigationPageUp,\n  } = useShortcut()\n\n  //TODO: implement wrapping\n  //const wrapOption = useCodeViewOptions().codeWrappingOption\n\n  //wasExpandCollapseCodeSection will default to false for every call except the call from expand and collapse\n  function onLineMenuClose(value: boolean, wasExpandCollapseCodeSection: boolean) {\n    setShouldShowHighlightMenu(value)\n    setTimeout(() => {\n      //only if it was an expand/collapse event do we want to set the text area cursor position to be kinda near where\n      //it should be. It's not exact, but I don't really think it's worth worrying over, becuase the alternative is\n      //that the cursor is at the very end of the file (because the contents of the text area changed, that is the\n      //default behavior)\n      if (wasExpandCollapseCodeSection) determineAndSetTextAreaCursorPosition()\n      textAreaRef?.current?.focus()\n      //300ms timeout so that there is enough time for screen readers to read off their stuff before text area\n      //screen reading takes over\n    }, 300)\n  }\n\n  function showLineMenu(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    event.preventDefault()\n    event.stopPropagation()\n    setShouldShowHighlightMenu(true)\n    setTimeout(() => {\n      //need to do it with a timeout so that the line menu is rendered when we are setting the anchor\n      menuRef.current?.setAnchor(cursorRef.current)\n    }, 0)\n    return false\n  }\n\n  const location = useLocation()\n  useEffect(() => {\n    setLeftOffset(0)\n    setTopOffset(0)\n  }, [location.key])\n\n  useEffect(() => {\n    function keydownKeyChecking(event: KeyboardEvent) {\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      lastKeyPressed.current = event.key\n    }\n    function contextMenuCheckDoNotTriggerBasicMenu(event: MouseEvent) {\n      if (\n        lastKeyPressed.current === 'ContextMenu' &&\n        //-1 means it was the contextmenu hotkey button\n        event.button === -1 &&\n        (document.activeElement as Element)?.className.indexOf(firstOptionId) !== -1\n      ) {\n        lastKeyPressed.current = ''\n        event?.preventDefault()\n        event?.stopPropagation()\n        return false\n      }\n    }\n\n    window.oncontextmenu = contextMenuCheckDoNotTriggerBasicMenu\n    window.addEventListener('keydown', keydownKeyChecking)\n\n    return () => {\n      window.removeEventListener('keydown', keydownKeyChecking)\n      //setting the context menu to null resets it to just be the browser default\n      window.oncontextmenu = null\n    }\n  }, [])\n\n  const minLeftOffset = isBlame ? minLeftOffsetBlame : minLeftOffsetBlob\n  const cursorRef = useRef<HTMLDivElement>(null)\n\n  const {\n    onEnter,\n    updateUrlForLineNumber,\n    onPageUp,\n    onPageDown,\n    currentStartLine,\n    currentStartChar,\n    currentEndLine,\n    currentEndChar,\n    determineAndSetTextAreaCursorPosition,\n    getCorrectLineNumberWithCollapsedSections,\n  } = useCursorNavigation(\n    cursorRef,\n    onCodeNavTokenSelected,\n    optionalTestLeftOffsetFunction ?? setLeftOffset,\n    optionalTestTopOffsetFunction ?? setTopOffset,\n    linesData,\n    isVirtualized,\n    isBlame,\n    onLineNumberClick,\n    textAreaRef,\n    tabSize,\n    additionalTextAreaInstructions,\n    textSelection,\n  )\n  const isMobile = useRef(false)\n\n  function determineClosestParentCodeSection() {\n    if (currentStartLine.current !== currentEndLine.current) {\n      return null\n    }\n    const currentLineData = linesData[currentStartLine.current]\n    if (!currentLineData) return null\n    //if the current line is a start line, we don't have to do any extra work\n    if (currentLineData.isStartLine) return currentLineData\n    if (currentLineData.codeLineClassName === '') {\n      //return null because there isn't a code section for this line\n      return null\n    }\n    const lineCodeSections = currentLineData.codeLineClassName?.split('child-of-line-')\n    if (!lineCodeSections || currentLineData.codeLineClassName?.indexOf('child-of-line-') === -1) {\n      return null\n    }\n    //making this undefined if it can't find the lineCodeSection so that it doesn't pass the isNaN check\n    const closestParentCodeSection = parseInt(lineCodeSections[lineCodeSections.length - 1]?.trim() ?? 'undefined')\n    if (closestParentCodeSection && !Number.isNaN(closestParentCodeSection)) {\n      if (\n        linesData[closestParentCodeSection - 1] &&\n        linesData[closestParentCodeSection - 1]?.lineNumber === closestParentCodeSection\n      ) {\n        //save the time of doing the binary search\n        return linesData[closestParentCodeSection - 1]\n      }\n      //if any lines have been collapsed, we need to actually find the index in the linesData array\n      //where the closestParentCodeSection is\n      return linesData[getActualLineNumberBinarySearch(closestParentCodeSection, linesData)]\n    }\n\n    return null\n  }\n\n  useEffect(() => {\n    isMobile.current = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n  }, [])\n\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  const cursorSx = isCursorVisible\n    ? {\n        height: `${lineHeight}px`,\n        width: '1.5px',\n        backgroundColor: 'fg.default',\n        position: 'absolute',\n        visibility: isMobile.current ? 'hidden' : 'visible',\n        zIndex: 2,\n      }\n    : {}\n\n  let editorLinkHash\n  if (currentStartLine.current === currentEndLine.current && currentStartChar.current === currentEndChar.current) {\n    editorLinkHash = `#L${currentStartLine.current + 1}C${currentStartChar.current}`\n  } else {\n    editorLinkHash = `#${formatBlobRange({\n      start: {line: currentStartLine.current + 1, column: currentStartChar.current},\n      end: {line: currentEndLine.current + 1, column: currentEndChar.current},\n    })}`\n  }\n\n  return (\n    <>\n      <Box\n        aria-hidden={true}\n        style={{\n          top: topOffset,\n          left: minLeftOffset + leftOffset,\n        }}\n        sx={cursorSx}\n        ref={cursorRef}\n        data-testid=\"navigation-cursor\"\n        className=\"code-navigation-cursor\"\n      >\n        {' '}\n      </Box>\n      {shouldRenderOverlay && (\n        <div\n          style={{\n            top: topOffset + lineHeight,\n            left: minLeftOffset + leftOffset,\n            zIndex: 2,\n          }}\n          className=\"position-absolute border rounded-2 color-bg-subtle px-3 py-2\"\n        >\n          <Text sx={{pointerEvents: 'auto'}}>\n            Code view is read-only.{' '}\n            {refInfo.canEdit && (\n              <Link\n                to={editBlobPath({\n                  owner: repo.ownerLogin,\n                  repo: repo.name,\n                  filePath: path,\n                  commitish: refInfo.name,\n                  hash: editorLinkHash,\n                })}\n              >\n                Switch to the editor.\n              </Link>\n            )}\n          </Text>\n        </div>\n      )}\n      {shouldShowHighlightMenu && (\n        <HighlightedLineMenu\n          ref={menuRef}\n          rowBeginId={`LG${getCorrectLineNumberWithCollapsedSections(currentStartLine.current)}`}\n          rowBeginNumber={getCorrectLineNumberWithCollapsedSections(currentStartLine.current)}\n          rowEndNumber={getCorrectLineNumberWithCollapsedSections(currentEndLine.current)}\n          rowEndId={`LG${getCorrectLineNumberWithCollapsedSections(currentEndLine.current)}`}\n          openOnLoad={true}\n          cursorRef={cursorRef}\n          onCollapseToggle={onCollapseToggle}\n          onLineStickOrUnstick={onLineStickOrUnstick}\n          lineData={determineClosestParentCodeSection()}\n          onMenuClose={onLineMenuClose}\n        />\n      )}\n      <button\n        hidden={true}\n        data-testid={'NavigationCursorEnter'}\n        data-hotkey={cursorNavigationEnter.hotkey}\n        onClick={onEnter}\n        data-hotkey-scope={textAreaId}\n      />\n      <button\n        hidden={true}\n        data-testid={'NavigationCursorSetHighlightedLine'}\n        data-hotkey={cursorNavigationHighlightLine.hotkey}\n        onClick={updateUrlForLineNumber}\n        data-hotkey-scope={textAreaId}\n      />\n      <button\n        hidden={true}\n        data-testid={'NavigationCursorSetHighlightAndExpandMenu'}\n        data-hotkey={expandAndFocusLineContextMenu.hotkey}\n        onClick={event => showLineMenu(event)}\n        data-hotkey-scope={textAreaId}\n      />\n      <button\n        hidden={true}\n        data-testid={'NavigationCursorPageDown'}\n        data-hotkey={cursorNavigationPageDown.hotkey}\n        onClick={onPageDown}\n        data-hotkey-scope={textAreaId}\n      />\n      <button\n        hidden={true}\n        data-testid={'NavigationCursorPageUp'}\n        data-hotkey={cursorNavigationPageUp.hotkey}\n        onClick={onPageUp}\n        data-hotkey-scope={textAreaId}\n      />\n\n      {/* hotkeys which are only necessary for use while the text area has focus which don't have a logical home*/}\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={searchShortcut.hotkey}\n        onButtonClick={() => {\n          appendAndFocusSearchBar({\n            retainScrollPosition: true,\n            returnTarget: textAreaRef?.current ?? undefined,\n          })\n        }}\n        onlyAddHotkeyScopeButton={true}\n      />\n    </>\n  )\n}\n\ntry{ NavigationCursor.displayName ||= 'NavigationCursor' } catch {}","import {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {Dialog} from '@primer/react/experimental'\nimport {createPortal} from 'react-dom'\n\nexport function TextAreaHelpDialog({onDismiss}: {onDismiss: () => void}) {\n  const {expandAndFocusLineContextMenu, cursorNavigationEnter, cursorNavigationHighlightLine} = useShortcut()\n  return createPortal(\n    <Dialog width=\"large\" aria-label=\"Code Blob Focused Hotkeys\" onClose={onDismiss} title=\"Code Blob Focused Hotkeys\">\n      <div>\n        <div>\n          <div className=\"p-1\">\n            Select the line the cursor is on <kbd>{cursorNavigationHighlightLine.text}</kbd>\n          </div>\n          <div className=\"p-1\">\n            Select the symbol under the cursor <kbd>{cursorNavigationEnter.text}</kbd>\n          </div>\n          <div className=\"p-1\">\n            Move focus to the highlighted line menu <kbd>{expandAndFocusLineContextMenu.text}</kbd>\n          </div>\n        </div>\n      </div>\n    </Dialog>,\n    document.body,\n  )\n}\n\ntry{ TextAreaHelpDialog.displayName ||= 'TextAreaHelpDialog' } catch {}","import {announce} from '@github-ui/aria-live'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {\n  useBlobFocusedModifierShortcuts,\n  useBlobFocusedShortcuts,\n  useShortcut,\n} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {getCurrentSize, ScreenSize} from '@github-ui/screen-size'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useTheme} from '@primer/react'\nimport {useState} from 'react'\n\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {minLeftOffsetBlob, scrollRightOffset, useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport {calculateLineNumberFromOffset, textAreaId} from '../../../../utilities/lines'\nimport {TextAreaHelpDialog} from './TextAreaHelpDialog'\n\n//this is the height of the content that exists above where the code lines begin. This is also the\n//approximation for users that do not have the staff bar enabled, which I think is the better choice to use\n//it also highly likely will never be needed, but in the off chance something goes wrong this fallback is here\n//to help approximate the correct offset\nconst approximateBlobYOffsetDesktop = 354\nconst approximateBlobYOffsetMobile = 423\n\nexport function TextArea({\n  textAreaRef,\n  setTextOverlayShouldBeVisible,\n  setTextSelection,\n  setAdditionalTextAreaInstructions,\n  cursorClickStartRef,\n  parentRef,\n  tabSize,\n  plainTextLinesAsString,\n  numLines,\n  setIsTextAreaFocused,\n}: {\n  textAreaRef: React.RefObject<HTMLTextAreaElement>\n  setTextOverlayShouldBeVisible: (shouldRender: boolean) => void\n  setTextSelection: ({\n    start,\n    end,\n    keyboard,\n  }: {\n    start: number\n    end: number\n    keyboard: boolean\n    displayStart: boolean\n  }) => void\n  setAdditionalTextAreaInstructions: (instructions: string) => void\n  cursorClickStartRef: React.MutableRefObject<{startX: number; startY: number}> | undefined\n  parentRef: React.RefObject<HTMLDivElement>\n  tabSize: number\n  plainTextLinesAsString: string\n  numLines: number\n  setIsTextAreaFocused: (value: React.SetStateAction<boolean>) => void\n}) {\n  const shouldUseCursor = useIsCursorEnabled()\n  const wrapOption = useCodeViewOptions().codeWrappingOption\n  const blobFocusShortcuts = useBlobFocusedShortcuts()\n  const blobFocusModifierShortcuts = useBlobFocusedModifierShortcuts()\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n\n  const textAreaHeight = lineHeight * (numLines + 1)\n  const [helpDialogOpen, setHelpDialogOpen] = useState(false)\n  const {cursorNavigationOpenHelpDialog} = useShortcut()\n  const theme = useTheme()\n\n  //we wonly want an exact regex match of a single character, not a substring match\n  function exactRegexMatch(regex: RegExp, text: string) {\n    const match = regex.exec(text)\n    return match && match[0] === text\n  }\n\n  function handleKeydownWithinTextArea(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n    // we need to use the e.key syntax here because we need to know when to preventDefault and when not to\n    if (\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      blobFocusShortcuts.includes(e.key) ||\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      (blobFocusModifierShortcuts.includes(e.key) &&\n        (e.getModifierState('Control') ||\n          e.getModifierState('Alt') ||\n          e.getModifierState('Shift') ||\n          e.getModifierState('Meta')))\n    ) {\n      //handle the scrolling for space and shift space (can't do it with data-hotkey because space is not a usable hotkey)\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (e.key === ' ') {\n        e.preventDefault()\n        if (e.shiftKey) {\n          //appending the date.now to the end so that pressing the same key multiple times in a row still triggers\n          //a sate update\n          setAdditionalTextAreaInstructions(`PageUp${Date.now()}`)\n        } else {\n          setAdditionalTextAreaInstructions(`PageDown${Date.now()}`)\n        }\n      }\n\n      //need to explicitly call out the dot hotkey because data-hotkey doesn't work with the dot character, like space\n      //and because macs are weird, when you press option + a letter, it changes it to be some weird symbol by defualt\n      //instead of just showing up as alt + the letter\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (e.altKey && e.ctrlKey && e.key === '') {\n        setHelpDialogOpen(true)\n      }\n      setTextOverlayShouldBeVisible(false)\n      setTimeout(() => {\n        if (textAreaRef.current) {\n          setTextSelection({\n            start: textAreaRef.current.selectionStart,\n            end: textAreaRef.current.selectionEnd,\n            keyboard: true,\n            displayStart: false,\n          })\n        }\n      }, 5)\n      //don't do anything because we want the hotkey behavior to be handled by the data-hotkey handlers\n      //max line length requiring the eslint disable to be used multiple times\n    } else if (\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      !e.ctrlKey &&\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      !e.metaKey &&\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      !e.altKey &&\n      !e.shiftKey &&\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      (exactRegexMatch(/[a-zA-Z0-9-_ ]{1,1}/, e.key) || e.key === 'Backspace' || e.key === 'Enter')\n    ) {\n      //add the you can't edit this popup\n      announce('Code view is read only.')\n      setTextOverlayShouldBeVisible(true)\n      e.preventDefault()\n    } else {\n      //don't do anything because we want the regular key press to work (tab, etc)\n    }\n  }\n\n  return (\n    <>\n      <textarea\n        id={textAreaId}\n        data-testid={textAreaId}\n        ref={textAreaRef}\n        onMouseUp={event =>\n          mouseUpHandler(\n            event,\n            textAreaRef,\n            setTextOverlayShouldBeVisible,\n            setTextSelection,\n            cursorClickStartRef,\n            shouldUseCursor,\n            parentRef,\n            lineHeight,\n          )\n        }\n        onMouseDown={event => mouseDownHandler(event, parentRef, shouldUseCursor, cursorClickStartRef, lineHeight)}\n        aria-label={'file content'}\n        aria-readonly={true}\n        //this prevents the virtual keyboard from being popped up when a user is on mobile\n        inputMode={'none'}\n        tabIndex={0}\n        aria-multiline={true}\n        aria-haspopup={false}\n        //needed to disable grammarly so that random code snippets don't get highlighted as grammar errors\n        data-gramm=\"false\"\n        data-gramm_editor=\"false\"\n        data-enable-grammarly=\"false\"\n        style={{\n          resize: 'none',\n          marginTop: -2,\n          paddingLeft: minLeftOffsetBlob,\n          paddingRight: scrollRightOffset,\n          display: 'hidden',\n          width: '100%',\n          backgroundColor: 'unset',\n          boxSizing: 'border-box',\n          color: 'transparent',\n          position: 'absolute',\n          border: 'none',\n          tabSize,\n          outline: 'none',\n          overflowX: 'auto',\n          height: textAreaHeight,\n          fontSize: '12px',\n          lineHeight: '20px',\n          overflowY: 'hidden',\n          overflowWrap: wrapOption.enabled ? 'anywhere' : 'normal',\n          overscrollBehaviorX: 'none',\n          whiteSpace: wrapOption.enabled ? 'pre-wrap' : 'pre',\n          zIndex: 1,\n        }}\n        value={plainTextLinesAsString}\n        onKeyDown={handleKeydownWithinTextArea}\n        spellCheck={false}\n        autoCorrect=\"off\"\n        autoCapitalize=\"off\"\n        autoComplete=\"off\"\n        data-ms-editor=\"false\"\n        onDrop={e => {\n          //if a user dropped a URL on the text area, open it in a new tab like it normally would instead of eating it\n          const text = e.dataTransfer.getData('Text')\n          try {\n            // eslint-disable-next-line no-restricted-syntax\n            const url = new URL(text)\n            window.open(url, '_blank')?.focus()\n          } catch (error) {\n            //the thing dropped was not a URL, catch but don't do anything\n          }\n          return false\n        }}\n        onPaste={e => {\n          e.preventDefault()\n          return false\n        }}\n        onChange={() => {\n          //need an empty on change handler to prevent react from complaining about a controlled component\n          //we don't actually want to change the value on the textarea because it's readonly\n          //but we can't put the readonly attribute on the textarea because then it won't be focusable\n        }}\n        className={`react-blob-textarea react-blob-print-hide${\n          theme.resolvedColorScheme?.endsWith('contrast') ? ' select-contrast' : ''\n        }`}\n        onFocus={() => {\n          setIsTextAreaFocused(true)\n        }}\n      />\n      {helpDialogOpen && (\n        <TextAreaHelpDialog\n          onDismiss={() => {\n            setHelpDialogOpen(false)\n          }}\n        />\n      )}\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={cursorNavigationOpenHelpDialog.hotkey}\n        onButtonClick={() => {\n          setHelpDialogOpen(true)\n        }}\n        onlyAddHotkeyScopeButton={true}\n      />\n    </>\n  )\n}\n\n//mouseUpHandler will always fire before the onClick handler, so we will reset the information in the click handler\n//if the user did a double or triple click\nfunction mouseUpHandler(\n  event: React.MouseEvent,\n  textAreaRef: React.RefObject<HTMLTextAreaElement> | undefined,\n  setTextOverlayShouldBeVisible: (shouldRender: boolean) => void,\n  setTextSelection: ({\n    start,\n    end,\n    keyboard,\n  }: {\n    start: number\n    end: number\n    keyboard: boolean\n    displayStart: boolean\n  }) => void,\n  cursorClickStartRef: React.MutableRefObject<{startX: number; startY: number}> | undefined,\n  shouldUseCursor: boolean,\n  parentRef: React.RefObject<HTMLDivElement>,\n  lineHeight: number,\n) {\n  if (!shouldUseCursor || event.defaultPrevented || !cursorClickStartRef) return\n\n  if (event.button === 2) {\n    event.preventDefault()\n    event.stopPropagation()\n    //it was a right click\n  } else if (event.button === 0) {\n    setTextOverlayShouldBeVisible(false)\n\n    const screenSize = getCurrentSize(window.innerWidth)\n\n    const isSmallScreen = screenSize < ScreenSize.medium\n    const scrollTopOffset = parentRef.current?.getBoundingClientRect().top\n      ? window.scrollY + parentRef.current?.getBoundingClientRect().top\n      : isSmallScreen\n        ? approximateBlobYOffsetMobile\n        : approximateBlobYOffsetDesktop\n    // Check if it the click is in the lines excluding the scroll bar\n    if (parentRef.current && event.pageY > scrollTopOffset + parentRef.current?.clientHeight) {\n      cursorClickStartRef.current = {startX: -2, startY: -2}\n      return\n    }\n    const lineNumberOfClick = calculateLineNumberFromOffset(event.pageY, scrollTopOffset, lineHeight)\n    const leftClickOffset = parentRef.current?.getBoundingClientRect().left || 0\n    const xOffset = event.clientX - leftClickOffset - minLeftOffsetBlob\n\n    let displayAtStart = false\n    if (\n      lineNumberOfClick < cursorClickStartRef.current.startY ||\n      (lineNumberOfClick === cursorClickStartRef.current.startY && xOffset < cursorClickStartRef.current.startX)\n    ) {\n      displayAtStart = true\n    }\n    setTimeout(() => {\n      if (textAreaRef && textAreaRef.current) {\n        setTextSelection({\n          start: textAreaRef.current.selectionStart,\n          end: textAreaRef.current.selectionEnd,\n          keyboard: false,\n          displayStart: displayAtStart,\n        })\n      }\n    }, 0)\n  }\n}\nfunction mouseDownHandler(\n  event: React.MouseEvent,\n  parentRef: React.RefObject<HTMLDivElement>,\n  shouldUseCursor: boolean,\n  cursorClickStartRef: React.MutableRefObject<{startX: number; startY: number}> | undefined,\n  lineHeight: number,\n) {\n  if (!shouldUseCursor || event.defaultPrevented || !cursorClickStartRef) return\n  if (event.button === 2) {\n    event.preventDefault()\n    event.stopPropagation()\n    return\n    //it was a right click\n  } else if (event.button === 0) {\n    //it was a left click\n\n    // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n    if (event.ctrlKey) {\n      //it was a right click essentially\n      event.preventDefault()\n      event.stopPropagation()\n      return\n    }\n\n    const screenSize = getCurrentSize(window.innerWidth)\n\n    const isSmallScreen = screenSize < ScreenSize.medium\n    const scrollTopOffset = parentRef.current?.getBoundingClientRect().top\n      ? window.scrollY + parentRef.current?.getBoundingClientRect().top\n      : isSmallScreen\n        ? approximateBlobYOffsetMobile\n        : approximateBlobYOffsetDesktop\n    // Check if it the click is in the lines excluding the scroll bar\n    if (parentRef.current && event.pageY > scrollTopOffset + parentRef.current?.clientHeight) {\n      cursorClickStartRef.current = {startX: -2, startY: -2}\n      return\n    }\n    const lineNumberOfClick = calculateLineNumberFromOffset(event.pageY, scrollTopOffset, lineHeight)\n    const leftClickOffset = parentRef.current?.getBoundingClientRect().left || 0\n    const xOffset = event.clientX - leftClickOffset - minLeftOffsetBlob\n    cursorClickStartRef.current = {startX: xOffset, startY: lineNumberOfClick}\n  }\n}\n\ntry{ TextArea.displayName ||= 'TextArea' } catch {}","import type {CodeSection, DefinitionOrReference} from '@github-ui/code-nav'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport safeStorage from '@github-ui/safe-storage'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box} from '@primer/react'\nimport type React from 'react'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n// useLocation is safe for files not rendered in a partial on the overview.\n// eslint-disable-next-line no-restricted-imports\nimport {useLocation} from 'react-router-dom'\n\n// eslint-disable-next-line no-restricted-imports\nimport {type BlobRange, parseFileAnchor} from '../../../../../github/blob-anchor'\nimport {useFindInFileOpen} from '../../../../contexts/FindInFileOpenContext'\nimport {useSplitCodeownersErrorsContext} from '../../../../contexts/SplitCodeownersErrorsContext'\nimport {useCurrentBlame} from '../../../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useLineElementMap} from '../../../../hooks/CurrentLineRefMap'\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport {useManualRender} from '../../../../hooks/use-manual-render'\nimport {type ScrollRequestPayload, useScrollLineIntoView} from '../../../../hooks/use-scroll-line-into-view'\nimport {DELETE_STICKY_LINES_VALUE, type SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {type SymbolUnderPointer, useSymbolUnderPointer} from '../../../../hooks/use-symbol-under-pointer'\nimport {useUpdatePanelExpandPreferences} from '../../../../hooks/use-update-panel-expand-preferences'\nimport {\n  applyStickyToParentStartLines,\n  expandAllRows,\n  expandRow,\n  forceAnnouncementToScreenReaders,\n  getActualLineNumberBinarySearch,\n  isLineInViewport,\n} from '../../../../utilities/lines'\nimport {BidiAlert} from '../../Banners/Bidi'\nimport type {CodeNavData} from '../BlobContent'\nimport {CopilotButtonContainer} from '../CopilotButton'\nimport {HighlightedLineMenuContainer} from '../HighlightedLineMenu'\nimport {BlameLines, BlameLinesSSR} from './Blame'\nimport type {CodeLinesHandle} from './code-lines-handle'\nimport {CodeLines} from './CodeLines'\nimport {CodeLinesNoVirtualization, useShouldDoNoVirtualization} from './CodeLinesNoVirtualization'\nimport {CodeLinesSSR} from './CodeLinesSSR'\nimport {CodeLinesSSRNoVirtualization} from './CodeLinesSSRNoVirtualization'\nimport {HighlightedLinesProvider} from './HighlightedLineProvider'\nimport {type CodeLineData, useCodeLines} from './hooks/use-code-lines'\nimport {NavigationCursor} from './NavigationCursor'\nimport {SearchResultsProvider} from './SearchResultsProvider'\nimport {TextArea} from './TextArea'\n\nconst safeLocalStorage = safeStorage('localStorage')\n\nexport function CodeBlob({\n  blobLinesHandle,\n  onCodeNavTokenSelected,\n  codeSections,\n  codeLineToSectionMap,\n  validCodeNav,\n  onLineStickOrUnstick,\n  searchResults,\n  focusedSearchResult,\n}: {\n  blobLinesHandle: React.RefObject<CodeLinesHandle>\n  onCodeNavTokenSelected: (symbol: CodeNavData) => void\n  codeSections?: Map<number, CodeSection[]>\n  codeLineToSectionMap: Map<number, CodeSection[]> | undefined\n  validCodeNav: boolean\n  onLineStickOrUnstick: SetStickyLinesType\n  searchResults: DefinitionOrReference[]\n  focusedSearchResult: number | undefined\n}) {\n  const {rawLines, colorizedLines, stylingDirectives, tabSize} = useCurrentBlob()\n  const hasBlame = !!useCurrentBlame()\n  const [shouldMaterializeAllLines, setShouldMaterializeAllLines] = useState(false)\n  const shouldUseCursor = useIsCursorEnabled()\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  const [highlightedLines, setHighlightedLines] = useState<BlobRange | undefined>(undefined)\n  //defaulting to true for keyboard so that a symbol is not initially selected\n  const [textSelection, setTextSelection] = useState({start: -1, end: -1, keyboard: true, displayStart: false})\n  const [additionalTextAreaInstructions, setAdditionalTextAreaInstructions] = useState('')\n  const [isTextAreaFocused, setIsTextAreaFocused] = useState(false)\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [textOverlayShouldBeVisible, setTextOverlayShouldBeVisible] = useState(false)\n  const cursorClickStartRef = useRef({startX: 0, startY: 0})\n  const {hash} = useLocation()\n  const {refInfo, path, copilotAccessAllowed} = useFilesPageInfo()\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n  const [contentWidth, setContentWidth] = useState<number | undefined>(undefined)\n  const [isSSR] = useClientValue(() => false, true, [])\n  const cursorContainerRef = useRef<HTMLDivElement>(null)\n  const wordWrapEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const updateExpandPreferences = useUpdatePanelExpandPreferences()\n\n  const reRender = useManualRender()\n  const currentLineRefMap = useLineElementMap()\n  const onLineNumberClick = useCallback(() => {\n    setHighlightedLines(parseFileAnchor(window.location.hash)?.blobRange)\n  }, [])\n  const {findInFileOpen, setFindInFileOpen} = useFindInFileOpen()\n\n  const splitCodeownersErrors = useSplitCodeownersErrorsContext()\n  const {lines, plainTextLinesAsString, nonTruncatedLinesData} = useCodeLines(\n    rawLines ?? [],\n    stylingDirectives ?? null,\n    codeSections ?? null,\n    splitCodeownersErrors,\n    codeLineToSectionMap,\n  )\n  const doOverlay =\n    useShouldDoNoVirtualization(nonTruncatedLinesData.length) && colorizedLines && colorizedLines.length !== 0\n\n  //we need this linesRef for a situation where a user clicks on a symbol that exists within a collapsed section.\n  //we set a 0ms timeout for moving the screen to the appropriate scroll position, which then allows the component\n  //to re-render and generate a new value for which lines should be present, but the timeout was set when only\n  //the out of date set of lines was present. Using this ref instead of just 'lines' allows the line calculation\n  //to have the up to date values for figuring out where the line is on the screen\n  const linesRef = useRef<CodeLineData[]>(lines)\n  linesRef.current = lines\n  //this is used to clear all styling programmatically added to the page for collapsed/expanded lines. It is only\n  //run if a new file is soft-navigated to.\n  useEffect(() => {\n    expandAllRows()\n  }, [refInfo.currentOid, path])\n\n  useEffect(() => {\n    window.onbeforeprint = () => setShouldMaterializeAllLines(true)\n    window.onafterprint = () => setShouldMaterializeAllLines(false)\n  }, [])\n\n  useEffect(() => {\n    updateExpandPreferences(null, null, wordWrapEnabled)\n\n    //before we actually use the setting, we want to collect all users word wrap preferences for a while so we don't\n    //accidentally unwrap their lines when they have line wrap selected\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    // Do the announcement of the help menu to each user exactly one time. Hopefully they hear it!\n    if (!(safeLocalStorage.getItem('heardHelpAnnouncement') === 'true')) {\n      forceAnnouncementToScreenReaders('While the code is focused, press Alt+F1 for a menu of operations.', 2000)\n      safeLocalStorage.setItem('heardHelpAnnouncement', 'true')\n    }\n  }, [])\n  /**\n   *  This useCallback is present to handle when the user hovers over a symbol\n   *  and we add an on click event to that particular symbol. We add an attribute at\n   *  the same time which we then later check for on future hovers to make sure we do\n   *  not add the same event listener multiple times.\n   *\n   *  SymbolUnderPointer is changed constantly, basically whenever you move the mouse, so\n   *  removing the event listener on a useEffect return does not work in this instance.\n   *\n   *  It is possible the entire thing can be refactored in some way to be able to remove\n   *  the event listener on a useEffect return, but the only way this is a significant\n   *  performance degredation is if a user systematically hovers over every symbol on the page, whereas\n   *  this version saves us a lot of time on repeated hovers of the same symbol as well as time saved on\n   *  moving the cursor around the page.\n   */\n  useSymbolUnderPointer(\n    useCallback(\n      (symbolUnderPointer: SymbolUnderPointer) => {\n        function onTokenClick(e: Event) {\n          const text = (e.target as Element).textContent ? (e.target as Element).textContent : ''\n          if (onCodeNavTokenSelected && symbolUnderPointer) {\n            onCodeNavTokenSelected({\n              selectedText: text!,\n              lineNumber: symbolUnderPointer.lineNumber,\n              offset: symbolUnderPointer.offset,\n            })\n            if (findInFileOpen) {\n              setFindInFileOpen(false)\n            }\n          }\n        }\n        if (symbolUnderPointer && symbolUnderPointer?.node && !hasBlame) {\n          if (!symbolUnderPointer.node.textContent || symbolUnderPointer.node.textContent.length < 3) return\n          const element = symbolUnderPointer.node as Element\n          if (!element || !element.hasAttribute || element.hasAttribute('clickadded')) {\n            return\n          }\n          element.classList.add('pl-token')\n          element.setAttribute('clickadded', 'true')\n          element.addEventListener('click', onTokenClick)\n        }\n      },\n      [findInFileOpen, hasBlame, setFindInFileOpen, onCodeNavTokenSelected],\n    ),\n    validCodeNav,\n  )\n\n  const scrollSelectedLineIntoView = ({line, column}: ScrollRequestPayload) => {\n    if (line < 10) {\n      blobLinesHandle.current?.scrollToTop()\n    } else if (blobLinesHandle.current) {\n      //necessary because scrollToLine just scrolls to the X line visible on the page, which normally is\n      //the same as the line number, but once a line has collapsed sections above it it is no longer equivalent\n      const lineAccountingForCollapsedSections = getActualLineNumberBinarySearch(line, lines)\n      if (lineAccountingForCollapsedSections === -1) {\n        // the line was a part of a collapsed section\n        const sectionArray = codeLineToSectionMap?.get(line)\n\n        for (const section of sectionArray ?? []) {\n          if (section && section.collapsed) {\n            //expand every collapsed section that this code line is part of\n            section.collapsed = false\n            expandRow(section?.startLine)\n          }\n        }\n        reRender()\n      }\n      setTimeout(() => {\n        //we want to use the linesRef because otherwise it will just use the lines from when the sections were collapsed,\n        //making the lines incomplete for finding where it should actually get scrolled to\n        const updatedLineAccountingForCollapsedSections = getActualLineNumberBinarySearch(line, linesRef.current)\n        blobLinesHandle.current?.scrollToLine(updatedLineAccountingForCollapsedSections, column)\n      }, 0)\n\n      if (currentLineRefMap && !isLineInViewport(line)) {\n        // -1 in 'set sticky lines' for the line number clears out all current sticky lines\n        onLineStickOrUnstick(DELETE_STICKY_LINES_VALUE, true)\n        applyStickyToParentStartLines(currentLineRefMap, line, codeLineToSectionMap, onLineStickOrUnstick)\n      }\n    }\n  }\n\n  // Update highlight on hash path change\n  useEffect(() => {\n    const anchInfo = parseFileAnchor(hash)\n\n    if (!anchInfo.blobRange?.start?.line) {\n      setHighlightedLines(undefined)\n      return\n    }\n\n    setHighlightedLines(anchInfo.blobRange)\n  }, [path, hash, lines.length])\n\n  // Update scrolling position on path change\n  useEffect(() => {\n    const anchInfo = parseFileAnchor(hash)\n    if (!anchInfo.blobRange?.start?.line) {\n      return\n    }\n    //this needs to be a timeout because of SSR\n    setTimeout(() => scrollSelectedLineIntoView({line: anchInfo.blobRange.start.line}), 0)\n    // need to suppress this eslint warning because other parts of the code need to update the hash to trigger this effect\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [path, hasBlame])\n\n  useEffect(() => {\n    const currentTextArea = textAreaRef.current\n\n    if (!currentTextArea || !shouldUseCursor) {\n      setContentWidth(undefined)\n      return\n    }\n\n    // Only set width when the scrollable content is larger than the provided width\n    // Account for the copilot button by adding 70px\n    setContentWidth(currentTextArea.scrollWidth > currentTextArea.clientWidth ? currentTextArea.scrollWidth : undefined)\n\n    const observer = new ResizeObserver(entries => {\n      for (const {target} of entries) {\n        setContentWidth(target.scrollWidth > target.clientWidth ? target.scrollWidth : undefined)\n      }\n    })\n    observer.observe(currentTextArea)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [shouldUseCursor, path])\n\n  // NOTE: This is a primary way to trigger scrolling the currently selected line into view. Without this mechanism,\n  // the line can't be scrolled into view if it's already in the URL hash.\n  useScrollLineIntoView(scrollSelectedLineIntoView)\n\n  return (\n    <SearchResultsProvider searchResults={searchResults} focusedSearchResult={focusedSearchResult}>\n      <HighlightedLinesProvider highlightedLines={highlightedLines}>\n        {lines.some(line => line.bidi) && <BidiAlert />}\n        <Box\n          sx={{\n            display: 'flex',\n            flex: 1,\n            py: hasBlame ? 0 : 2,\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n            minWidth: 0,\n            position: 'relative',\n          }}\n        >\n          <HighlightedLineMenuContainer>\n            <CopilotButtonContainer>\n              <Box\n                sx={{\n                  flex: 1,\n                  position: 'relative',\n                  minWidth: 0,\n                  overflowX: hasBlame ? 'auto' : undefined,\n                  overflowY: hasBlame ? 'hidden' : undefined,\n                }}\n                ref={parentRef}\n                onBlur={e => {\n                  //only count the focus loss if it isn't a child\n                  if (e.currentTarget.contains(e.relatedTarget)) {\n                    return\n                  }\n                  setIsTextAreaFocused(false)\n                }}\n              >\n                {shouldUseCursor && (\n                  <>\n                    <Box\n                      ref={cursorContainerRef}\n                      sx={{\n                        position: 'absolute',\n                        width: '100%',\n                        overflow: 'hidden',\n                      }}\n                    >\n                      <Box\n                        sx={{\n                          width: contentWidth,\n                          height: lineHeight * lines.length,\n                        }}\n                      >\n                        <NavigationCursor\n                          linesData={lines}\n                          isBlame={false}\n                          onCodeNavTokenSelected={onCodeNavTokenSelected}\n                          onLineNumberClick={onLineNumberClick}\n                          isCursorVisible={!!isTextAreaFocused}\n                          isVirtualized={true}\n                          textAreaRef={textAreaRef}\n                          onCollapseToggle={reRender}\n                          onLineStickOrUnstick={onLineStickOrUnstick}\n                          tabSize={tabSize}\n                          textSelection={textSelection}\n                          shouldRenderOverlay={!!textOverlayShouldBeVisible}\n                          additionalTextAreaInstructions={additionalTextAreaInstructions ?? ''}\n                        />\n                      </Box>\n                    </Box>\n                  </>\n                )}\n                {shouldUseCursor && (\n                  <TextArea\n                    textAreaRef={textAreaRef}\n                    setTextOverlayShouldBeVisible={setTextOverlayShouldBeVisible}\n                    setTextSelection={setTextSelection}\n                    setAdditionalTextAreaInstructions={setAdditionalTextAreaInstructions}\n                    cursorClickStartRef={cursorClickStartRef}\n                    parentRef={parentRef}\n                    tabSize={tabSize}\n                    plainTextLinesAsString={plainTextLinesAsString}\n                    numLines={lines.length}\n                    setIsTextAreaFocused={setIsTextAreaFocused}\n                  />\n                )}\n                {hasBlame ? (\n                  !isSSR ? (\n                    <BlameLines\n                      ref={blobLinesHandle}\n                      linesData={lines}\n                      tabSize={tabSize}\n                      copilotAccessAllowed={copilotAccessAllowed}\n                      onLineNumberClick={onLineNumberClick}\n                    />\n                  ) : (\n                    <BlameLinesSSR\n                      linesData={lines}\n                      tabSize={tabSize}\n                      copilotAccessAllowed={copilotAccessAllowed}\n                      onLineNumberClick={onLineNumberClick}\n                    />\n                  )\n                ) : !isSSR ? (\n                  doOverlay ? (\n                    <CodeLinesNoVirtualization\n                      ref={blobLinesHandle}\n                      linesData={lines}\n                      nonTruncatedLinesData={nonTruncatedLinesData}\n                      onLineNumberClick={onLineNumberClick}\n                      colorizedLines={colorizedLines}\n                      codeSections={codeSections}\n                      codeLineToSectionMap={codeLineToSectionMap}\n                      onLineStickOrUnstick={onLineStickOrUnstick}\n                      tabSize={tabSize}\n                      textAreaRef={textAreaRef}\n                      cursorContainerRef={cursorContainerRef}\n                      contentWidth={contentWidth ?? textAreaRef.current?.clientWidth}\n                      onCollapseToggle={reRender}\n                      materializeAllLines={shouldMaterializeAllLines}\n                      copilotAccessAllowed={copilotAccessAllowed}\n                    />\n                  ) : (\n                    <CodeLines\n                      ref={blobLinesHandle}\n                      linesData={lines}\n                      onLineNumberClick={onLineNumberClick}\n                      codeSections={codeSections}\n                      codeLineToSectionMap={codeLineToSectionMap}\n                      onLineStickOrUnstick={onLineStickOrUnstick}\n                      tabSize={tabSize}\n                      contentWidth={contentWidth}\n                      cursorContainerRef={cursorContainerRef}\n                      onCollapseToggle={reRender}\n                      textAreaRef={textAreaRef}\n                      materializeAllLines={shouldMaterializeAllLines}\n                      copilotAccessAllowed={copilotAccessAllowed}\n                    />\n                  )\n                ) : doOverlay ? (\n                  <CodeLinesSSRNoVirtualization\n                    linesData={lines}\n                    nonTruncatedLinesData={nonTruncatedLinesData}\n                    onLineNumberClick={onLineNumberClick}\n                    colorizedLines={colorizedLines}\n                    codeSections={codeSections}\n                    codeLineToSectionMap={codeLineToSectionMap}\n                    onLineStickOrUnstick={onLineStickOrUnstick}\n                    tabSize={tabSize}\n                    contentWidth={contentWidth}\n                    copilotAccessAllowed={copilotAccessAllowed}\n                    onCollapseToggle={reRender}\n                  />\n                ) : (\n                  <CodeLinesSSR\n                    linesData={lines}\n                    onLineNumberClick={onLineNumberClick}\n                    codeSections={codeSections}\n                    codeLineToSectionMap={codeLineToSectionMap}\n                    onLineStickOrUnstick={onLineStickOrUnstick}\n                    tabSize={tabSize}\n                    contentWidth={contentWidth}\n                    copilotAccessAllowed={copilotAccessAllowed}\n                    onCollapseToggle={reRender}\n                  />\n                )}\n              </Box>\n            </CopilotButtonContainer>\n          </HighlightedLineMenuContainer>\n        </Box>\n      </HighlightedLinesProvider>\n    </SearchResultsProvider>\n  )\n}\n\ntry{ CodeBlob.displayName ||= 'CodeBlob' } catch {}","import type {CodeSection} from '@github-ui/code-nav'\nimport type {SplitCodeownersError, StylingDirectivesDocument, StylingDirectivesLine} from '@github-ui/code-view-types'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {useMemo, useRef} from 'react'\n\nimport {buildRowClass, useLinesSubscription} from '../../../../../utilities/lines'\nimport {hasBidiCharacters, isBidiShown, showBidiCharactersRaw} from '../../../Banners/Bidi'\n\nexport interface CodeLineData {\n  stylingDirectivesLine?: StylingDirectivesLine\n  rawText?: string\n  lineNumber: number\n  codeLineClassName?: string\n  isStartLine?: boolean\n  isEndLine?: boolean\n  ownedSection?: CodeSection\n  bidi?: boolean\n  codeownersLineError?: SplitCodeownersError\n}\ninterface CodeLines {\n  lines: CodeLineData[]\n  plainTextLinesAsString: string\n  nonTruncatedLinesData: CodeLineData[]\n}\n\nexport function useCodeLines(\n  rawLines: string[],\n  stylingDirectives: StylingDirectivesDocument | null,\n  codeSections: Map<number, CodeSection[]> | null,\n  splitCodeownersErrors: SplitCodeownersError[],\n  codeLineToSectionMap: Map<number, CodeSection[]> | undefined,\n): CodeLines {\n  const nonTruncatedLinesData = useLinesData(\n    rawLines,\n    stylingDirectives,\n    codeSections,\n    splitCodeownersErrors,\n    codeLineToSectionMap,\n  )\n  const exposeBIDICharacters = isBidiShown()\n  const collapsedLinesDependancy = useRef('')\n  useLinesSubscription(\n    collapsedSections => (collapsedLinesDependancy.current = createCollapsedLinesString(collapsedSections)),\n  )\n\n  const lines = useMemo(\n    () => getLinesDataWithCollapsedSectionsExcluded(nonTruncatedLinesData, codeSections),\n    //we only want to re-run this function if the set of collapsed lines changes, which the ref will track\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [nonTruncatedLinesData, codeSections, collapsedLinesDependancy.current],\n  )\n\n  //need to build the plain text lines as a singular string to be able to use the textArea\n  const plainTextLinesAsString = lines\n    .map(line => (exposeBIDICharacters && line.rawText ? showBidiCharactersRaw(line.rawText) : line.rawText))\n    .join('\\n')\n  return {lines, plainTextLinesAsString, nonTruncatedLinesData}\n}\n\nfunction useLinesData(\n  rawLines: string[],\n  stylingDirectives: StylingDirectivesDocument | null,\n  codeSections: Map<number, CodeSection[]> | null,\n  splitCodeownersErrors: SplitCodeownersError[],\n  codeLineToSectionMap: Map<number, CodeSection[]> | undefined,\n): CodeLineData[] {\n  const [linesToRender] = useClientValue(() => rawLines.length, Math.min(rawLines.length, 1000), [rawLines])\n  return useMemo(() => {\n    const lineNumbers = new Array(linesToRender).fill(null).map((_, i) => i + 1)\n    return lineNumbers.map(lineNumber => {\n      const stylingDirectivesLine = stylingDirectives?.[lineNumber - 1]\n\n      let ownedSection = undefined\n\n      let isStartLine = false\n      let isEndLine = false\n      for (const section of codeSections?.get(lineNumber) ?? []) {\n        if (section.startLine === lineNumber) {\n          isStartLine = true\n          ownedSection = section\n        }\n        if (section.endLine === lineNumber) {\n          isEndLine = true\n        }\n      }\n\n      //we want to remove any newlines from the raw text so it doesn't throw off the character count\n      const rawText: string = rawLines[lineNumber - 1]?.replace(/[\\n\\r]/g, '') ?? ''\n      const codeSectionArray = codeLineToSectionMap ? codeLineToSectionMap.get(lineNumber) || [] : []\n      const codeLineClassName = buildRowClass(codeSectionArray, lineNumber, isEndLine, codeSections)\n\n      return {\n        stylingDirectivesLine,\n        lineNumber,\n        codeLineClassName,\n        isStartLine,\n        isEndLine,\n        ownedSection,\n        rawText,\n        bidi: hasBidiCharacters(rawText),\n        codeownersLineError: splitCodeownersErrors?.find(error => error.line === lineNumber),\n      }\n    })\n  }, [linesToRender, stylingDirectives, rawLines, codeLineToSectionMap, codeSections, splitCodeownersErrors])\n}\n\n// This function is more performant operating under the assumption that the start line of a collapsed code section\n// will be the first line encountered of a given collapsed section every time, which since it is looking at the lines\n// from top down I believe is a safe assumption. If there is some scenario where this is not true, it will still\n// work, but it will be less performant.\nexport function getLinesDataWithCollapsedSectionsExcluded(\n  fullLinesData: CodeLineData[],\n  codeSections: Map<number, CodeSection[]> | null,\n): CodeLineData[] {\n  const excludedLines = new Set<number>()\n  for (let i = 0; i < fullLinesData.length; i++) {\n    //if we already are excluding this line, there is no need to do any additional work because that means it is\n    //a child of a collapsed section. Even if it is the start of a different collapsed section, because it is a\n    //child of an already collapsed/excluded section there is no need to keep doing that work\n    if (excludedLines.has(i)) continue\n    const sections = codeSections?.get(i) ?? []\n    for (let j = 0; j < sections.length; j++) {\n      if (sections[j]!.collapsed) {\n        //startline + 1 because we don't want to remove the start line itself\n        for (let k = sections[j]!.startLine + 1; k <= sections[j]!.endLine; k++) {\n          excludedLines.add(k)\n        }\n        //skip the work of iterating over the rest of the lines in the section which was just collapsed\n        if (sections[j]!.startLine === i) {\n          i = sections[j]!.endLine\n        }\n        //for this line specifically there is no need to keep iterating through the sections\n        break\n      }\n    }\n  }\n\n  return fullLinesData.filter(lineData => !excludedLines.has(lineData.lineNumber))\n}\n\nfunction createCollapsedLinesString(collapsedLines: Set<number>): string {\n  const setArray = [...collapsedLines]\n  setArray.sort()\n  return setArray.join(',')\n}\n","import {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {reportError} from '@github-ui/failbot'\nimport {useEffect} from 'react'\n\nimport {useCurrentBlame} from './CurrentBlame'\nimport {useIsCursorEnabled} from './use-cursor-navigation'\n\nexport interface SymbolUnderPointer {\n  node: Node\n  lineNumber: number\n  offset: number\n}\n\nexport function useSymbolUnderPointer(\n  onSymbolChanged: (symbolUnderPointer: SymbolUnderPointer) => void,\n  validCodeNav: boolean,\n): void {\n  const hasBlame = !!useCurrentBlame()\n  const cursorEnabled = useIsCursorEnabled()\n\n  useEffect(() => {\n    // We don't show the symbols pane on the blame page, so we don't need to add these event listeners.\n    if (hasBlame || !validCodeNav || cursorEnabled) return\n\n    let timer: ReturnType<typeof setTimeout>\n\n    const debouncedMouseMove = debounce((event: MouseEvent) => {\n      clearTimeout(timer)\n      timer = setTimeout(() => {\n        handleMouseMove(event, onSymbolChanged)\n      }, 15)\n    }, 5)\n    window.addEventListener('mousemove', debouncedMouseMove)\n    return () => {\n      window.removeEventListener('mousemove', debouncedMouseMove)\n    }\n  }, [onSymbolChanged, hasBlame, validCodeNav, cursorEnabled])\n}\n\nfunction handleMouseMove(event: MouseEvent, onSymbolChanged: (value: SymbolUnderPointer) => void) {\n  const range = matchFromPoint(/\\w+[!?]?/g, event.clientX, event.clientY)\n  if (!range) {\n    return null\n  }\n\n  const rangeElement: HTMLElement | null = range.commonAncestorContainer.parentElement\n  if (!rangeElement) return\n  for (const className of rangeElement.classList) {\n    // pl-token: class added when a symbol is highlighted (has a definition)\n    // pl-c: comment\n    // pl-s: string\n    // pl-k: constant\n    if (['pl-token', 'pl-c', 'pl-s', 'pl-k'].includes(className)) {\n      return null\n    }\n\n    const text = range.toString()\n    if (!text || text.match(/\\n|\\s|[();&.=\",]/)) {\n      return null\n    }\n\n    const {lineNumber, offset, node} = getRowColumnNode(range)\n    if (lineNumber === 0 && offset === 0) {\n      return null\n    }\n\n    if (!node) {\n      return null\n    }\n\n    return onSymbolChanged({lineNumber, offset, node})\n  }\n}\n\n// Returns a zero-indexed position of the range in utf16 code units and the node that matched.\nfunction getRowColumnNode(range: Range): {lineNumber: number; offset: number; node: Node | null} {\n  let node = range.startContainer\n  let offset: number = range.startOffset\n\n  for (;;) {\n    let prev = node.previousSibling\n    while (prev) {\n      offset += (prev.textContent || '').length\n      prev = prev.previousSibling\n    }\n    const parent = node.parentElement\n    if (parent) {\n      if (parent.classList.contains('react-file-line')) {\n        const row = parseInt((parent as Element).getAttribute('data-line-number') || '1', 10)\n        return {\n          lineNumber: row,\n          offset,\n          node,\n        }\n      } else {\n        node = parent\n      }\n    } else {\n      return {\n        lineNumber: 0,\n        offset: 0,\n        node: null,\n      }\n    }\n  }\n}\n\ninterface CaretPosition {\n  offsetNode: Node\n  offset: number\n}\ndeclare global {\n  interface Document {\n    caretPositionFromPoint(x: number, y: number): CaretPosition | null\n  }\n}\n\n/**\n * Returns matching text range given screen offsets.\n * Examples\n *\n * Find nearest word under mouse cursor\n * matchFromPoint(/\\w+/g, event.clientX, event.clientY)\n *\n * Returns Range or null if nothing matches position.\n */\nexport function matchFromPoint(regexp: RegExp, x: number, y: number): Range | undefined | null {\n  let textNode: Node | undefined = undefined\n  let offset: number | undefined = undefined\n\n  if (document.caretPositionFromPoint) {\n    const caret = document.caretPositionFromPoint(x, y)\n    if (caret) {\n      textNode = caret.offsetNode\n      offset = caret.offset\n    }\n  } else if (document.caretRangeFromPoint) {\n    const range = document.caretRangeFromPoint(x, y)\n    if (range) {\n      textNode = range.startContainer\n      offset = range.startOffset\n    }\n  }\n\n  if (!textNode || typeof offset !== 'number' || textNode.nodeType !== Node.TEXT_NODE || !textNode.textContent) {\n    return null\n  }\n\n  const match = findNearestMatch(textNode.textContent, regexp, offset)\n  if (!match) {\n    return null\n  }\n\n  const matchedRange = document.createRange()\n  matchedRange.setStart(textNode, match[1])\n  matchedRange.setEnd(textNode, match[2])\n\n  return matchedRange\n}\n\n/**\n * Find nearest match in string given a starting offset.\n *\n * Similar to String#scan, but only returns one result around the given offset.\n *\n * Examples\n *\n * findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 1)\n * [\"The\", 0, 3]\n *\n * findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 18)\n * [\"fox\", 16, 19]\n *\n * Return matching string, start and end offsets. Otherwise returns null for no match.\n */\nfunction findNearestMatch(str: string, regexp: RegExp, offset: number): [string, number, number] | null {\n  let m\n  let lastIndex = null\n  while ((m = regexp.exec(str))) {\n    // Prevent infinite loop from zero-length matches\n    if (regexp.lastIndex === lastIndex) {\n      reportError(new Error('regexp did not advance in findNearestMatch()'))\n      return null\n    }\n    lastIndex = regexp.lastIndex\n    const len = m.index + m[0].length\n    if (m.index <= offset && offset <= len) {\n      return [m[0], m.index, len]\n    }\n  }\n  return null\n}\n","import {useCallback, useState} from 'react'\n\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\n\nexport const DELETE_STICKY_LINES_VALUE = null\n\nexport type SetStickyLinesType = (codeLineData: CodeLineData | null, removeStickyLine: boolean) => void\n\nexport function useStickyLines() {\n  const [currentStickyLines, setCurrentStickyLines] = useState<Map<number, CodeLineData>>(new Map())\n  const setStickyLines = useCallback(\n    (codeLineData: CodeLineData | null, removeStickyLine: boolean) => {\n      let modifiedLines = false\n\n      //if current sticky lines are already empty and we are trying to delete, no work to do\n      if (codeLineData === DELETE_STICKY_LINES_VALUE && currentStickyLines.size === 0) {\n        return\n      }\n\n      //if lineNumber is -1, that's the signal to clear out the entire map\n      if (codeLineData === DELETE_STICKY_LINES_VALUE && removeStickyLine) {\n        currentStickyLines.clear()\n        setCurrentStickyLines(new Map(currentStickyLines))\n        return\n      }\n\n      if (!codeLineData) return\n\n      const lineNumber = codeLineData.lineNumber\n\n      if (removeStickyLine && currentStickyLines.has(lineNumber)) {\n        //remove the line from the map\n        currentStickyLines.delete(lineNumber)\n        modifiedLines = true\n      } else if (!removeStickyLine && !currentStickyLines.has(lineNumber)) {\n        //add the line to the map\n        currentStickyLines.set(lineNumber, codeLineData)\n        modifiedLines = true\n      }\n\n      if (currentStickyLines.has(lineNumber)) {\n        for (const [otherStickyLineNumber] of currentStickyLines) {\n          const otherStickyLine = currentStickyLines.get(otherStickyLineNumber)!\n          if (\n            !otherStickyLine.ownedSection ||\n            otherStickyLine.ownedSection.endLine < lineNumber ||\n            lineNumber < otherStickyLine.lineNumber\n          ) {\n            currentStickyLines.delete(otherStickyLineNumber)\n            modifiedLines = true\n          }\n        }\n      }\n\n      if (modifiedLines) {\n        setCurrentStickyLines(new Map(currentStickyLines))\n      }\n    },\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  )\n  return {currentStickyLines, setStickyLines}\n}\n","import {Box} from '@primer/react'\n\nexport function ImageBlob({displayName, displayUrl}: {displayName: string; displayUrl: string}) {\n  return (\n    <Box sx={{display: 'flex', justifyContent: 'center', width: '100%'}}>\n      <Box as=\"img\" alt={displayName} src={displayUrl} data-hpc sx={{maxWidth: '100%'}} />\n    </Box>\n  )\n}\n\ntry{ ImageBlob.displayName ||= 'ImageBlob' } catch {}","import type {TemplateFormInput, YamlTemplate} from '@github-ui/code-view-types'\nimport {SafeHTMLBox} from '@github-ui/safe-html'\nimport {\n  ActionList,\n  ActionMenu,\n  Box,\n  Checkbox,\n  CheckboxGroup,\n  FormControl,\n  type SxProp,\n  Textarea,\n  TextInput,\n} from '@primer/react'\nimport type {PropsWithChildren} from 'react'\n\nexport enum YamlTemplateType {\n  Issue = 'issue',\n  Discussion = 'discussion',\n}\n\nexport function YamlTemplateContent({issueTemplate, type}: {issueTemplate: YamlTemplate; type: YamlTemplateType}) {\n  return (\n    <Box sx={{borderBottomLeftRadius: '6px', borderBottomRightRadius: '6px', p: 5}}>\n      <Box as=\"table\" sx={{mb: 3}}>\n        <thead>\n          <tr>\n            {type === YamlTemplateType.Issue ? (\n              <>\n                <MarkdownTableCell header>Name</MarkdownTableCell>\n                <MarkdownTableCell header>About</MarkdownTableCell>\n              </>\n            ) : (\n              <MarkdownTableCell header>Title</MarkdownTableCell>\n            )}\n            {issueTemplate.type && <MarkdownTableCell header>Type</MarkdownTableCell>}\n            <MarkdownTableCell header>Labels</MarkdownTableCell>\n            {issueTemplate.projects && <MarkdownTableCell header>Projects</MarkdownTableCell>}\n\n            {type === YamlTemplateType.Issue && <MarkdownTableCell header>Assignees</MarkdownTableCell>}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {type === YamlTemplateType.Issue ? (\n              <>\n                <MarkdownTableCell>{issueTemplate.name}</MarkdownTableCell>\n                <MarkdownTableCell>{issueTemplate.about}</MarkdownTableCell>\n              </>\n            ) : (\n              <MarkdownTableCell>{issueTemplate.title}</MarkdownTableCell>\n            )}\n            {issueTemplate.type && <MarkdownTableCell>{issueTemplate.type}</MarkdownTableCell>}\n            <MarkdownTableCell>{issueTemplate.labels}</MarkdownTableCell>\n            {issueTemplate.projects && <MarkdownTableCell>{issueTemplate.projects}</MarkdownTableCell>}\n\n            {type === YamlTemplateType.Issue && <MarkdownTableCell>{issueTemplate.assignees}</MarkdownTableCell>}\n          </tr>\n        </tbody>\n      </Box>\n      {issueTemplate.inputs.map((input, index) => (\n        <TemplateInput key={index} input={input} />\n      ))}\n    </Box>\n  )\n}\n\nfunction MarkdownTableCell({children, header}: PropsWithChildren<{header?: boolean}>) {\n  return (\n    <Box\n      as={header ? 'th' : 'td'}\n      sx={{\n        p: '6px 13px',\n        border: '1px solid var(--borderColor-default, var(--color-border-default))',\n      }}\n    >\n      {children}\n    </Box>\n  )\n}\n\nfunction TemplateInput({input}: {input: TemplateFormInput}): JSX.Element | null {\n  switch (input.type) {\n    case 'markdown':\n      return <MarkdownInput input={input} />\n    case 'dropdown':\n      return <DropdownInput input={input} />\n    case 'input':\n      return <InputInput input={input} />\n    case 'textarea':\n      return <TextareaInput input={input} />\n    case 'checkboxes':\n      return <CheckboxesInput input={input} />\n    default:\n      return null\n  }\n}\n\n// TODO: Get html from markdown\nfunction MarkdownInput({input}: {input: TemplateFormInput}) {\n  if (!input.value) return null\n  return <SafeHTMLBox html={input.value} />\n}\n\nfunction DropdownInput({input}: {input: TemplateFormInput}) {\n  const options = input.options?.slice()\n\n  if (!input.required) {\n    options?.unshift('None')\n  }\n\n  let buttonText = input.multiple ? 'Selections: ' : 'Selection: '\n\n  if (input.value) {\n    buttonText += input.value\n  }\n\n  return (\n    <InputWrapper input={input} sx={{alignItems: 'start'}}>\n      <ActionMenu>\n        <ActionMenu.Button>{buttonText}</ActionMenu.Button>\n        <ActionMenu.Overlay width=\"medium\">\n          <ActionList selectionVariant={input.multiple ? 'multiple' : 'single'}>\n            {options?.map((option, index) => (\n              <ActionList.Item key={index} selected={option === input.value} disabled={true}>\n                {option}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </InputWrapper>\n  )\n}\n\nfunction InputInput({input}: {input: TemplateFormInput}) {\n  return (\n    <InputWrapper input={input}>\n      <TextInput placeholder={input.placeholder} value={input.value ?? ''} />\n    </InputWrapper>\n  )\n}\n\n/**\n * Since the blob viewer version is read only, we don't need the functionality to preserve content\n * when switching to preview and on navigation.\n */\nfunction TextareaInput({input}: {input: TemplateFormInput}) {\n  return (\n    <InputWrapper input={input}>\n      <Textarea\n        placeholder={input.placeholder}\n        value={input.value ?? ''}\n        sx={input.render ? {fontFamily: 'mono'} : {}}\n      />\n    </InputWrapper>\n  )\n}\n\nfunction CheckboxesInput({input}: {input: TemplateFormInput}) {\n  if (!input.checkboxes) {\n    return null\n  }\n\n  return (\n    <CheckboxGroup\n      disabled={true}\n      sx={{\n        color: 'var(--fgColor-default, var(--color-fg-default)) !important',\n        my: '15px',\n      }}\n    >\n      <CheckboxGroup.Label\n        sx={{\n          color: 'var(--fgColor-default, var(--color-fg-default))',\n          fontSize: ['18px', '18x', '20px'],\n          fontWeight: 600,\n        }}\n      >\n        {input.label}\n      </CheckboxGroup.Label>\n      {input.description && (\n        <CheckboxGroup.Caption sx={{color: 'var(--fgColor-muted, var(--color-fg-subtle))', fontSize: '12px'}}>\n          <SafeHTMLBox html={input.description} />\n        </CheckboxGroup.Caption>\n      )}\n      {input.checkboxes.map((checkbox, index) => (\n        <FormControl disabled={true} key={index} required={checkbox.required}>\n          <Checkbox />\n          <FormControl.Label>{checkbox.label}</FormControl.Label>\n        </FormControl>\n      ))}\n    </CheckboxGroup>\n  )\n}\n\nfunction InputWrapper({children, input, sx}: PropsWithChildren<{input: TemplateFormInput}> & SxProp) {\n  return (\n    <FormControl\n      disabled\n      required={input.required}\n      sx={{\n        my: '15px',\n        ...sx,\n      }}\n    >\n      <FormControl.Label\n        sx={{\n          color: 'var(--fgColor-default, var(--color-fg-default))',\n          fontSize: ['18px', '18x', '20px'],\n          // Color the required asterisk\n          '> span > span:last-of-type': {color: 'var(--fgColor-danger, var(--color-danger-fg))'},\n        }}\n      >\n        {input.label}\n      </FormControl.Label>\n      {input.description && (\n        <FormControl.Caption>\n          <SafeHTMLBox html={input.description} />\n        </FormControl.Caption>\n      )}\n      {children}\n    </FormControl>\n  )\n}\n\ntry{ YamlTemplateContent.displayName ||= 'YamlTemplateContent' } catch {}\ntry{ MarkdownTableCell.displayName ||= 'MarkdownTableCell' } catch {}\ntry{ TemplateInput.displayName ||= 'TemplateInput' } catch {}\ntry{ MarkdownInput.displayName ||= 'MarkdownInput' } catch {}\ntry{ DropdownInput.displayName ||= 'DropdownInput' } catch {}\ntry{ InputInput.displayName ||= 'InputInput' } catch {}\ntry{ TextareaInput.displayName ||= 'TextareaInput' } catch {}\ntry{ CheckboxesInput.displayName ||= 'CheckboxesInput' } catch {}\ntry{ InputWrapper.displayName ||= 'InputWrapper' } catch {}","import type {CodeNavigationInfo, CodeSection, DefinitionOrReference} from '@github-ui/code-nav'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport type {PanelType} from '@github-ui/code-view-types'\nimport {Box, Link} from '@primer/react'\nimport React, {lazy, Suspense, useEffect} from 'react'\n\nimport {useFindInFileOpen} from '../../../contexts/FindInFileOpenContext'\nimport {useCurrentBlame} from '../../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {BlobDisplayType, useBlobRendererType} from '../../../hooks/use-blob-renderer-type'\nimport {useIsCursorEnabled} from '../../../hooks/use-cursor-navigation'\nimport type {SetStickyLinesType} from '../../../hooks/use-sticky-lines'\nimport {assertNever} from '../../../utilities/assert-never'\nimport {textAreaId} from '../../../utilities/lines'\nimport {MarkdownContent} from '../../MarkdownContent'\nimport {LoadingFallback} from '../../SuspenseFallback'\nimport type {CodeLinesHandle} from './Code/code-lines-handle'\nimport {CodeBlob} from './Code/CodeBlob'\nimport {ImageBlob} from './Renderable/ImageBlob'\nimport {YamlTemplateContent, YamlTemplateType} from './Renderable/YamlTemplateContent'\n\nconst CSVBlob = lazy(() => import('./CSV/CSVBlob'))\nconst FileRendererBlob = lazy(() => import('@github-ui/file-renderer-blob'))\n\nexport interface CodeNavData {\n  selectedText: string\n  lineNumber: number\n  offset: number\n}\n\nexport function BlobContent({\n  setOpenPanel,\n  codeNavInfo,\n  validCodeNav,\n  onCodeNavTokenSelected,\n  onLineStickOrUnstick,\n  searchResults,\n  setSearchTerm,\n  blobLinesHandle,\n  focusedSearchResult,\n}: {\n  setOpenPanel: (panel: PanelType | undefined) => void\n  codeNavInfo: CodeNavigationInfo | undefined\n  validCodeNav: boolean\n  onCodeNavTokenSelected: (codeNavData: CodeNavData) => void\n  onLineStickOrUnstick: SetStickyLinesType\n  searchResults: DefinitionOrReference[]\n  setSearchTerm: (term: string) => void\n  blobLinesHandle: React.RefObject<CodeLinesHandle>\n  focusedSearchResult: number | undefined\n}) {\n  const hasBlame = !!useCurrentBlame()\n  const {rawLines} = useCurrentBlob()\n  const {sendRepoKeyDownEvent} = useReposAnalytics()\n  const {findInFileShortcut} = useShortcut()\n\n  const blobRendererType = useBlobRendererType()\n  const {setFindInFileOpen} = useFindInFileOpen()\n  const isRenderingCode = blobRendererType === BlobDisplayType.Code\n\n  // Find in file\n  const findInFileHotkey = isRenderingCode && rawLines != null && validCodeNav ? findInFileShortcut.hotkey : ''\n  const cursorEnabled = useIsCursorEnabled()\n\n  useEffect(() => {\n    if (!isRenderingCode) {\n      setOpenPanel(undefined)\n    }\n  }, [isRenderingCode, setOpenPanel])\n\n  function onHotkeyPressed() {\n    setFindInFileOpen(true)\n    sendRepoKeyDownEvent('BLOB_FIND_IN_FILE_MENU.OPEN')\n    const selection = window.getSelection()?.toString()\n    if (selection) {\n      setSearchTerm(selection)\n    }\n  }\n  // We can't have the overflow classes for these types because it interferes with the HighlightedLineMenu\n  // For markdown, overflow: auto causes lag with code blocks\n  const extraSx =\n    isRenderingCode || blobRendererType === BlobDisplayType.CSV || blobRendererType === BlobDisplayType.Markdown\n      ? {}\n      : {overflow: 'auto'}\n  const markdownSx = blobRendererType === BlobDisplayType.Markdown ? {justifyContent: 'center'} : {}\n\n  return (\n    <Box\n      as=\"section\"\n      aria-labelledby=\"file-name-id-wide file-name-id-mobile\"\n      sx={{\n        backgroundColor: 'var(--bgColor-default, var(--color-canvas-default))',\n        border: '0px',\n        borderWidth: 0,\n        borderRadius: '0px 0px 6px 6px',\n        p: 0,\n        minWidth: 0,\n        // 46px is the height of the header, and to fix the weirdness of the header pushing all content down, we need\n        // to add padding to the body content of a given view. Otherwise the header covers up the first few lines of\n        // any given view. 92px is the height of the blame header because there is an extra line with the color scheme\n        mt: hasBlame ? '92px' : '46px',\n        ...markdownSx,\n        ...extraSx,\n      }}\n    >\n      <Blob\n        blobLinesHandle={blobLinesHandle}\n        onCodeNavTokenSelected={onCodeNavTokenSelected}\n        codeSections={hasBlame ? undefined : codeNavInfo?.codeSections}\n        codeLineToSectionMap={codeNavInfo ? codeNavInfo.lineToSectionMap : undefined}\n        validCodeNav={validCodeNav}\n        onLineStickOrUnstick={onLineStickOrUnstick}\n        searchResults={searchResults}\n        focusedSearchResult={focusedSearchResult}\n      />\n      {isRenderingCode && !cursorEnabled && (\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={findInFileHotkey}\n          onButtonClick={onHotkeyPressed}\n          buttonTestLabel={'hotkey-button'}\n        />\n      )}\n    </Box>\n  )\n}\n\nconst Blob = React.memo(function Blob({\n  onCodeNavTokenSelected,\n  codeSections,\n  codeLineToSectionMap,\n  validCodeNav,\n  onLineStickOrUnstick,\n  searchResults,\n  blobLinesHandle,\n  focusedSearchResult,\n}: {\n  onCodeNavTokenSelected: (codeNavData: CodeNavData) => void\n  codeSections?: Map<number, CodeSection[]>\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n  validCodeNav: boolean\n  onLineStickOrUnstick: SetStickyLinesType\n  searchResults: DefinitionOrReference[]\n  blobLinesHandle: React.RefObject<CodeLinesHandle>\n  focusedSearchResult: number | undefined\n}) {\n  const payload = useCurrentBlob()\n\n  const displayType = useBlobRendererType()\n\n  switch (displayType) {\n    case BlobDisplayType.TooLargeError:\n      return (\n        <Box sx={{textAlign: 'center'}} data-hpc>\n          <Link href={payload.rawBlobUrl}>View raw</Link>\n          {payload.large && <p>(Sorry about that, but we cant show files that are this big right now.)</p>}\n        </Box>\n      )\n    case BlobDisplayType.Code:\n      return (\n        <CodeBlob\n          blobLinesHandle={blobLinesHandle}\n          onCodeNavTokenSelected={onCodeNavTokenSelected}\n          codeSections={codeSections}\n          codeLineToSectionMap={codeLineToSectionMap}\n          validCodeNav={validCodeNav}\n          onLineStickOrUnstick={onLineStickOrUnstick}\n          searchResults={searchResults}\n          focusedSearchResult={focusedSearchResult}\n        />\n      )\n    case BlobDisplayType.Markdown:\n      return (\n        <MarkdownContent\n          richText={payload.richText!}\n          sx={{\n            borderBottomLeftRadius: '6px',\n            borderBottomRightRadius: '6px',\n            p: 5,\n            minWidth: 0,\n          }}\n        />\n      )\n    case BlobDisplayType.CSV:\n      return (\n        <Suspense fallback={<LoadingFallback />}>\n          <CSVBlob csv={payload.csv!} />\n        </Suspense>\n      )\n    case BlobDisplayType.FileRenderer:\n      return (\n        <Suspense fallback={<LoadingFallback />}>\n          <FileRendererBlob\n            identityUuid={payload.renderedFileInfo!.identityUUID}\n            size={payload.renderedFileInfo!.size}\n            type={payload.renderedFileInfo!.renderFileType}\n            url={payload.displayUrl}\n          />\n        </Suspense>\n      )\n    case BlobDisplayType.Image:\n      return <ImageBlob displayName={payload.displayName} displayUrl={payload.displayUrl} />\n    case BlobDisplayType.IssueTemplate:\n      return (\n        <YamlTemplateContent\n          issueTemplate={payload.issueTemplate ? payload.issueTemplate : payload.discussionTemplate!}\n          type={payload.issueTemplate ? YamlTemplateType.Issue : YamlTemplateType.Discussion}\n          data-hpc\n        />\n      )\n    default:\n      assertNever(displayType)\n  }\n})\n\ntry{ CSVBlob.displayName ||= 'CSVBlob' } catch {}\ntry{ FileRendererBlob.displayName ||= 'FileRendererBlob' } catch {}\ntry{ BlobContent.displayName ||= 'BlobContent' } catch {}\ntry{ Blob.displayName ||= 'Blob' } catch {}","import {PortalTooltip, type PortalTooltipProps} from '@github-ui/portal-tooltip/portalled'\nimport {useCallback, useState} from 'react'\n\nexport function useAlertTooltip(\n  id: string,\n  contentRef: React.RefObject<HTMLElement>,\n  portalTooltipProps?: Partial<PortalTooltipProps>,\n): [(newMessage: string) => void, () => void, JSX.Element] {\n  const [message, setMessage] = useState('')\n\n  const clearMessage = useCallback(() => {\n    setMessage('')\n  }, [])\n\n  const updateMessage = useCallback(\n    (newMessage: string) => {\n      setMessage(newMessage)\n      if (contentRef.current !== document.activeElement) {\n        setTimeout(clearMessage, 3000)\n      }\n    },\n    [clearMessage, contentRef],\n  )\n\n  return [\n    updateMessage,\n    clearMessage,\n    <AlertTooltip\n      key={id}\n      message={message}\n      id={id}\n      contentRef={contentRef}\n      clearMessage={clearMessage}\n      portalTooltipProps={portalTooltipProps}\n    />,\n  ]\n}\n\nfunction AlertTooltip({\n  message,\n  id,\n  contentRef,\n  clearMessage,\n  portalTooltipProps,\n}: {\n  message: string\n  id: string\n  contentRef: React.RefObject<HTMLElement>\n  clearMessage: () => void\n  portalTooltipProps?: Partial<PortalTooltipProps>\n}) {\n  return message ? (\n    <PortalTooltip\n      id={id}\n      contentRef={contentRef}\n      aria-label={message}\n      open={!!message}\n      onMouseLeave={clearMessage}\n      aria-live=\"assertive\"\n      {...portalTooltipProps}\n    />\n  ) : null\n}\n\ntry{ AlertTooltip.displayName ||= 'AlertTooltip' } catch {}","import {IconButton, type IconButtonProps} from '@primer/react'\n\n/**\n * An icon button that can handle disabled accessibility\n * This component does not support polymorphic forwarding refs (aka \"as\" prop) at this time\n */\nexport default function AccessibleIconButton({disabled, ...props}: IconButtonProps) {\n  // the btn className is needed from Primer to trigger the btn[aria-disabled] visual styles\n  const ariaDisabledProps: Pick<IconButtonProps, 'className' | 'onClick' | 'aria-disabled'> = disabled\n    ? {className: 'btn', 'aria-disabled': true, onClick: e => e.preventDefault()}\n    : {}\n\n  // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip\n  return <IconButton unsafeDisableTooltip={true} size=\"small\" {...props} {...ariaDisabledProps} />\n}\n\ntry{ AccessibleIconButton.displayName ||= 'AccessibleIconButton' } catch {}","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {ChevronDownIcon, ChevronUpIcon, SearchIcon, XIcon} from '@primer/octicons-react'\nimport {Box, IconButton, Label, Octicon, Text, TextInput} from '@primer/react'\nimport {lazy, Suspense, useEffect, useRef, useState} from 'react'\n\nimport {useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport {scrollLineIntoView} from '../../../../hooks/use-scroll-line-into-view'\nimport {textAreaId} from '../../../../utilities/lines'\n\nconst ScrollMarks = lazy(() => import('./ScrollMarks'))\n\nexport default function FindInFilePopover({\n  stickied,\n  searchTerm,\n  searchResults,\n  setSearchTerm,\n  focusedSearchResult,\n  setFocusedSearchResult,\n  onClose,\n}: {\n  stickied?: boolean\n  searchTerm: string\n  setSearchTerm: (searchTerm: string) => void\n  focusedSearchResult: number | undefined\n  setFocusedSearchResult: (idx: number | undefined) => void\n  searchResults: DefinitionOrReference[]\n  onClose: () => void\n}) {\n  const cursorEnabled = useIsCursorEnabled()\n  const inputContainer = useRef<HTMLInputElement>(null)\n\n  const {findInFileShortcut, findSelectionShortcut, findNextShortcut, findPrevShortcut} = useShortcut()\n  const [escapeToBrowserOnNextKeyPress, setEscapeToBrowserOnNextKeyPress] = useState(true)\n  const clearSearch = () => {\n    setSearchTerm('')\n    setFocusedSearchResult(0)\n  }\n  const {sendRepoKeyDownEvent} = useReposAnalytics()\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.value) {\n      setEscapeToBrowserOnNextKeyPress(false)\n      setSearchTerm(event.target.value)\n\n      if (focusedSearchResult === undefined) {\n        setFocusedSearchResult(0)\n      }\n    } else {\n      setEscapeToBrowserOnNextKeyPress(true)\n      clearSearch()\n    }\n  }\n\n  const jumpToResult = (direction: number) => {\n    if (focusedSearchResult === undefined) {\n      setFocusedSearchResult(0)\n      return\n    }\n\n    if (direction === 1) {\n      setFocusedSearchResult(focusedSearchResult === searchResults.length - 1 ? 0 : focusedSearchResult + 1)\n    } else {\n      setFocusedSearchResult(focusedSearchResult === 0 ? searchResults.length - 1 : focusedSearchResult - 1)\n    }\n  }\n\n  useEffect(() => {\n    inputContainer.current?.focus()\n    inputContainer.current?.select()\n  }, [])\n\n  const onHotkey = () => {\n    const selected = window.getSelection()?.toString()\n    if (selected?.length) {\n      setSearchTerm(selected)\n      setFocusedSearchResult(0)\n      sendRepoKeyDownEvent('BLOB_FIND_IN_FILE_MENU.FIND_IN_FILE_FROM_SELECTION')\n    }\n    inputContainer.current?.focus()\n    inputContainer.current?.select()\n  }\n\n  useEffect(() => {\n    if (searchResults.length > 0 && focusedSearchResult !== undefined) {\n      scrollLineIntoView({\n        line: searchResults[focusedSearchResult]!.lineNumber,\n        column: searchResults[focusedSearchResult]!.ident.start.column,\n      })\n    }\n  }, [searchResults, focusedSearchResult])\n\n  if (cursorEnabled) return null\n\n  return (\n    <div\n      className={`find-in-file-popover ${\n        stickied ? 'find-in-file-popover-stickied' : 'find-in-file-popover-not-stickied'\n      }`}\n    >\n      <Box\n        sx={{\n          fontSize: 0,\n          py: 2,\n          pl: 3,\n          pr: 2,\n          borderBottom: '1px solid var(--borderColor-default, var(--color-border-default))',\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Box sx={{display: 'flex', flexDirection: 'row', alignItems: 'baseline'}}>\n          <Text as=\"h5\" sx={{color: 'fg.default', pr: 2, fontWeight: 'bold'}}>\n            Find\n          </Text>\n          <Text\n            className={'find-text-help-tooltip'}\n            sx={{color: 'fg.subtle', visibility: escapeToBrowserOnNextKeyPress ? 'visible' : 'hidden'}}\n          >\n            Press <Label>{findInFileShortcut.text}</Label> again to open the browser&apos;s find menu\n          </Text>\n        </Box>\n        <Box sx={{flex: 1}} />\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          variant=\"invisible\"\n          size=\"small\"\n          onClick={onClose}\n          icon={XIcon}\n          sx={{color: 'fg.subtle'}}\n          aria-label=\"Close find in file\"\n        />\n      </Box>\n      <Box sx={{px: 2, py: '6px'}}>\n        <TextInput\n          ref={inputContainer}\n          sx={{pl: 1, border: 'none', boxShadow: 'none'}}\n          validationStatus={searchResults.length > 1000 ? 'error' : undefined}\n          type=\"text\"\n          leadingVisual={() => <Octicon icon={SearchIcon} aria-hidden=\"true\" />}\n          aria-labelledby=\"find-in-file-label\"\n          aria-expanded=\"true\"\n          autoComplete=\"off\"\n          name=\"Find in file input\"\n          placeholder=\"Search this file\"\n          value={searchTerm}\n          block\n          onChange={onChange}\n          trailingAction={\n            <Box sx={{display: 'flex', flexDirection: 'row', justifyContent: 'center', alignItems: 'center'}}>\n              <Text className=\"text-small\" sx={{textAlign: 'center', color: 'fg.subtle', m: 2}}>\n                {searchResults.length === 0 || focusedSearchResult === undefined ? 0 : focusedSearchResult + 1}/\n                {searchResults.length}\n              </Text>\n              {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n              <IconButton\n                unsafeDisableTooltip={true}\n                size=\"small\"\n                variant=\"invisible\"\n                onClick={() => {\n                  jumpToResult(-1)\n                }}\n                icon={ChevronUpIcon}\n                aria-label=\"Up\"\n                data-testid=\"up-search\"\n                sx={{color: 'fg.subtle'}}\n              />\n              {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n              <IconButton\n                unsafeDisableTooltip={true}\n                size=\"small\"\n                variant=\"invisible\"\n                onClick={() => {\n                  jumpToResult(1)\n                }}\n                icon={ChevronDownIcon}\n                aria-label=\"Down\"\n                data-testid=\"down-search\"\n                sx={{color: 'fg.subtle'}}\n              />\n            </Box>\n          }\n          onKeyDown={(keyboardEvent: React.KeyboardEvent) => {\n            if (keyboardEvent.code === 'Enter' || keyboardEvent.code === 'NumpadEnter') {\n              if (keyboardEvent.shiftKey) {\n                jumpToResult(-1)\n              } else {\n                jumpToResult(1)\n              }\n            } else if (\n              (keyboardEvent.metaKey || keyboardEvent.ctrlKey) &&\n              (keyboardEvent.key === 'g' || keyboardEvent.key === 'G')\n            ) {\n              keyboardEvent.preventDefault()\n              keyboardEvent.shiftKey ? jumpToResult(-1) : jumpToResult(1)\n            } else if (\n              (keyboardEvent.metaKey || keyboardEvent.ctrlKey) &&\n              (keyboardEvent.key === 'f' || keyboardEvent.key === 'F')\n            ) {\n              if (escapeToBrowserOnNextKeyPress) {\n                // The user wants to use the browser's find in page functionality.\n                // So just close this pane and get it out of their way.\n                sendRepoKeyDownEvent('BLOB_FIND_IN_FILE_MENU.FALLBACK_TO_BROWSER_SEARCH')\n                onClose()\n              } else {\n                setEscapeToBrowserOnNextKeyPress(true)\n                keyboardEvent.preventDefault()\n                inputContainer.current?.focus()\n                inputContainer.current?.select()\n              }\n            } else if (keyboardEvent.key === 'Escape') {\n              onClose()\n            }\n          }}\n        />\n\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={findInFileShortcut.hotkey}\n          onButtonClick={onHotkey}\n          buttonTestLabel={'hotkey-button'}\n        />\n        <button\n          hidden={true}\n          data-hotkey={findSelectionShortcut.hotkey}\n          onClick={onHotkey}\n          data-testid=\"selection-hotkey\"\n        />\n        <button\n          hidden={true}\n          data-hotkey={findNextShortcut.hotkey}\n          onClick={() => jumpToResult(1)}\n          data-testid=\"find-next-button\"\n        />\n        <button\n          hidden={true}\n          data-hotkey={findPrevShortcut.hotkey}\n          onClick={() => jumpToResult(-1)}\n          data-testid=\"find-prev-button\"\n        />\n        <Suspense fallback={null}>\n          <ScrollMarks definitionsOrReferences={searchResults} />\n        </Suspense>\n      </Box>\n    </div>\n  )\n}\n\ntry{ ScrollMarks.displayName ||= 'ScrollMarks' } catch {}\ntry{ FindInFilePopover.displayName ||= 'FindInFilePopover' } catch {}","import {SkeletonText} from '@github-ui/code-view-shared/components/Skeleton'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {commitsPathByAuthor, userHovercardPath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport type {ContributorUser} from '@github-ui/repos-types'\nimport {useContributors} from '@github-ui/use-contributors'\nimport {AlertFillIcon, PeopleIcon} from '@primer/octicons-react'\nimport {ActionList, AvatarStack, Box, CounterLabel, Link as PrimerLink, Octicon, Text, Truncate} from '@primer/react'\nimport {Dialog} from '@primer/react/experimental'\nimport {useState} from 'react'\n\nexport function ContributorAvatars({showTitle = true}: {showTitle?: boolean}) {\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const [isDialogOpen, setDialogOpen] = useState(false)\n  const repo = useCurrentRepository()\n  const {refInfo, path} = useFilesPageInfo()\n  const {contributors, loading, error} = useContributors(repo.ownerLogin, repo.name, refInfo.name, path)\n\n  const maxAvatarCount = 10\n  if (error) {\n    return <ContributorsError />\n  }\n\n  if (loading) {\n    return <SkeletonText width={100} data-testid=\"contributors-skeleton\" />\n  }\n\n  if (!contributors || !contributors?.users.length) {\n    return null\n  }\n\n  const {users, totalCount} = contributors\n  const countTitle = getCountWithUnit(totalCount, ' contributor', 'contributors')\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'row', alignItems: 'center'}}>\n      <Box sx={{display: 'flex', flexDirection: 'row'}}>\n        <AvatarStack>\n          {users.slice(0, maxAvatarCount).map((user, index) => (\n            <GitHubAvatar\n              className={index > 5 ? 'AvatarShowLarge' : 'AvatarShowMedium'}\n              key={user.login}\n              src={user.primaryAvatarUrl}\n              alt={user.login}\n              data-testid=\"contributor-avatar\"\n              data-hovercard-url={userHovercardPath({owner: user.login})}\n            />\n          ))}\n        </AvatarStack>\n      </Box>\n\n      <PrimerLink\n        as=\"button\"\n        aria-label={`Show ${countTitle}\"`}\n        onClick={() => {\n          setDialogOpen(true)\n          sendRepoClickEvent('CONTRIBUTORS.LIST.OPEN')\n        }}\n        data-testid=\"contributors-count-button\"\n        sx={{ml: 2, color: 'fg.default'}}\n      >\n        <Octicon icon={PeopleIcon} />\n        {showTitle && (\n          <Text className=\"react-contributors-title\" sx={{mx: 1, fontSize: 0}}>\n            Contributors\n          </Text>\n        )}\n        <CounterLabel sx={{mx: 1, px: 2, py: 1}}>{totalCount}</CounterLabel>\n      </PrimerLink>\n\n      {isDialogOpen && (\n        <Dialog\n          title={countTitle}\n          onClose={() => setDialogOpen(false)}\n          width=\"medium\"\n          height={contributors.totalCount >= 12 ? 'small' : 'auto'}\n          renderBody={() => {\n            return (\n              <ActionList sx={{overflowY: 'auto', py: 2}} data-testid=\"contributor-dialog-list\">\n                {users.map(user => (\n                  <ContributorRow key={user.login} user={user} />\n                ))}\n              </ActionList>\n            )\n          }}\n        />\n      )}\n    </Box>\n  )\n}\n\nfunction ContributorRow({user}: {user: ContributorUser}) {\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {path, refInfo} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n\n  return (\n    <ActionList.Item\n      sx={{\n        display: 'flex',\n        flexDirection: 'row',\n        fontSize: 1,\n        py: 2,\n        color: 'fg.default',\n        '&:hover': {backgroundColor: 'canvas.subtle'},\n      }}\n      data-testid=\"contributor-dialog-row\"\n      onSelect={() => sendRepoClickEvent('CONTRIBUTORS.LIST.USER')}\n    >\n      <PrimerLink\n        as={Link}\n        sx={{flex: 1}}\n        muted\n        to={user.profileLink}\n        onClick={() => sendRepoClickEvent('CONTRIBUTORS.LIST.USER')}\n      >\n        <GitHubAvatar src={user.primaryAvatarUrl} alt={user.login} sx={{mr: 2}} aria-hidden=\"true\" />\n        <Truncate inline title={user.login}>\n          {user.login}\n        </Truncate>\n      </PrimerLink>\n      <ActionList.TrailingVisual>\n        <PrimerLink\n          as={Link}\n          muted\n          to={commitsPathByAuthor({repo, branch: refInfo.name, path, author: user.login})}\n          onClick={() => sendRepoClickEvent('CONTRIBUTORS.LIST.COMMITS')}\n          aria-label={`${getCountWithUnit(user.commitsCount, 'commit', 'commits')} by ${user.login}`}\n          data-testid=\"commit-link\"\n        >\n          {getCountWithUnit(user.commitsCount, 'commit', 'commits')}\n        </PrimerLink>\n      </ActionList.TrailingVisual>\n    </ActionList.Item>\n  )\n}\n\nfunction getCountWithUnit(count: number, singular: string, plural: string) {\n  return `${count} ${count === 1 ? singular : plural}`\n}\n\nfunction ContributorsError() {\n  return (\n    <Text sx={{color: 'danger.fg'}}>\n      <Octicon icon={AlertFillIcon} />\n      &nbsp;Cannot retrieve contributors info at this time.\n    </Text>\n  )\n}\n\ntry{ ContributorAvatars.displayName ||= 'ContributorAvatars' } catch {}\ntry{ ContributorRow.displayName ||= 'ContributorRow' } catch {}\ntry{ ContributorsError.displayName ||= 'ContributorsError' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useCurrentRepository} from '@github-ui/current-repository'\n\nimport {Breadcrumb} from '../../../react-shared/Breadcrumb'\n\nexport function ReposHeaderBreadcrumb({\n  fileNameId = 'file-name-id',\n  id,\n  fontSize,\n  showCopyPathButton,\n}: {\n  fileNameId?: string\n  id?: string\n  fontSize?: number\n  showCopyPathButton?: boolean\n}) {\n  const repo = useCurrentRepository()\n  const {refInfo, path, action} = useFilesPageInfo()\n\n  return (\n    <>\n      <Breadcrumb\n        path={path}\n        repo={repo}\n        commitish={refInfo.name}\n        isFolder={action === 'tree'}\n        fileNameId={fileNameId}\n        id={id}\n        fontSize={fontSize}\n        showCopyPathButton={showCopyPathButton && path !== '' && path !== '/'}\n      />\n    </>\n  )\n}\n\ntry{ ReposHeaderBreadcrumb.displayName ||= 'ReposHeaderBreadcrumb' } catch {}","import {Box, Text} from '@primer/react'\nimport React from 'react'\n\nimport {useBlameAgeColors} from '../../../../react-shared/Repos/blameUtils'\n\nexport default React.memo(BlameAgeLegend)\n\nfunction BlameAgeLegend() {\n  const colors = useBlameAgeColors()\n  return (\n    <Box aria-hidden sx={{display: 'flex', color: 'fg.muted', alignItems: 'center', gap: '2px', fontSize: 0}}>\n      <Text sx={{mr: 2}}>Older</Text>\n      {colors.map((color, i) => (\n        <Box key={`blame-recency-color-${i}`} sx={{height: '0.5rem', width: '0.5rem', backgroundColor: color}} />\n      ))}\n      <Text sx={{ml: 2}}>Newer</Text>\n    </Box>\n  )\n}\n\ntry{ BlameAgeLegend.displayName ||= 'BlameAgeLegend' } catch {}","import {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {useNavigate, useSearchParams} from '@github-ui/use-navigate'\nimport {SegmentedControl} from '@primer/react'\nimport {startTransition, useState} from 'react'\n\nimport {useCurrentBlame} from '../../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {textAreaId} from '../../../utilities/lines'\n\nexport default function BlobTabButtons() {\n  const {\n    headerInfo: {isCSV, isRichtext, shortPath},\n    renderedFileInfo,\n    image,\n    issueTemplate,\n    discussionTemplate,\n    viewable,\n  } = useCurrentBlob()\n  const blame = useCurrentBlame()\n  const [urlParams] = useSearchParams()\n\n  const isPlain = urlParams.get('plain') === '1' || !!urlParams.get('short_path')?.length\n  const isOnlyPreviewable = (renderedFileInfo && !viewable) || image\n  const isPreviewable = isRichtext || issueTemplate || discussionTemplate || isCSV || renderedFileInfo\n  const plainParams = renderedFileInfo ? `short_path=${shortPath}` : 'plain=1'\n\n  const {getUrl} = useUrlCreator()\n\n  const initialSelectedTab = isPreviewable && !isPlain && !blame ? 0 : blame ? 2 : 1\n  const [selectedTab, setSelectedTab] = useState(initialSelectedTab)\n\n  // Reset the tab if previewability changes\n  useLayoutEffect(() => {\n    setSelectedTab(initialSelectedTab)\n  }, [initialSelectedTab])\n\n  const navigate = useNavigate()\n\n  const {viewCodeShortcut, viewPreviewShortcut, viewBlameShortcut} = useShortcut()\n\n  const handleSegmentChange = (selectedTabIndex: number) => {\n    if (!isPreviewable) {\n      selectedTabIndex += 1\n    }\n    setSelectedTab(selectedTabIndex)\n    if (selectedTab !== selectedTabIndex) {\n      switch (selectedTabIndex) {\n        case 0:\n          navigate(getUrl({action: 'blob', params: '', hash: ''}))\n          break\n        case 1: {\n          // location.hash includes the #\n          const hash = location.hash?.substring(1) ?? undefined\n          navigate(getUrl({action: 'blob', params: isPreviewable ? plainParams : '', hash}))\n          break\n        }\n        case 2: {\n          // location.hash includes the #\n          const hash = location.hash?.substring(1) ?? undefined\n          navigate(getUrl({action: 'blame', params: '', hash}))\n          break\n        }\n      }\n    }\n  }\n\n  if (isOnlyPreviewable) {\n    return null\n  }\n\n  const defaultButtons = [\n    <SegmentedControl.Button selected={selectedTab === 1} key=\"raw\" data-hotkey={viewCodeShortcut.hotkey}>\n      Code\n    </SegmentedControl.Button>,\n    <SegmentedControl.Button selected={selectedTab === 2} key=\"blame\" data-hotkey={viewBlameShortcut.hotkey}>\n      Blame\n    </SegmentedControl.Button>,\n  ]\n\n  const previewButton = (\n    <SegmentedControl.Button selected={selectedTab === 0} key=\"preview'\" data-hotkey={viewPreviewShortcut.hotkey}>\n      Preview\n    </SegmentedControl.Button>\n  )\n  const invisibleFocusButtons = (\n    <>\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={viewCodeShortcut.hotkey}\n        onlyAddHotkeyScopeButton={true}\n        onButtonClick={() => startTransition(() => handleSegmentChange(isPreviewable ? 1 : 0))}\n      />\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={viewBlameShortcut.hotkey}\n        onlyAddHotkeyScopeButton={true}\n        onButtonClick={() => startTransition(() => handleSegmentChange(isPreviewable ? 2 : 1))}\n      />\n      {isPreviewable && (\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={viewPreviewShortcut.hotkey}\n          onlyAddHotkeyScopeButton={true}\n          onButtonClick={() => startTransition(() => handleSegmentChange(0))}\n        />\n      )}\n    </>\n  )\n\n  const buttons = isPreviewable\n    ? isOnlyPreviewable\n      ? // If the file is a rendered type ie. pdf, image, etc, we only want to show \"Preview\" tab\n        [previewButton]\n      : [previewButton, ...defaultButtons]\n    : [...defaultButtons]\n  return (\n    <>\n      <SegmentedControl aria-label=\"File view\" size=\"small\" onChange={handleSegmentChange} sx={{fontSize: 1}}>\n        {buttons}\n      </SegmentedControl>\n      {invisibleFocusButtons}\n    </>\n  )\n}\n\ntry{ BlobTabButtons.displayName ||= 'BlobTabButtons' } catch {}","import {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {Blame, CodeOwnerInfo} from '@github-ui/code-view-types'\nimport {type Repository, useCurrentRepository} from '@github-ui/current-repository'\nimport {blamePath, blobPath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport {QuestionIcon, ShieldLockIcon} from '@primer/octicons-react'\nimport {Box, Link as PrimerLink, Octicon, Text, Tooltip, Truncate} from '@primer/react'\n\nimport {useDeferredMetadata} from '../../../contexts/DeferredMetadataContext'\nimport {useCurrentBlame} from '../../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\n\nexport default function CodeSizeDetails({className}: {className?: string}) {\n  const {codeownerInfo} = useDeferredMetadata()\n  const {helpUrl} = useReposAppPayload()\n  const payload = useCurrentBlob()\n  const {path, refInfo} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n  const blame = useCurrentBlame()\n\n  const {\n    headerInfo: {\n      blobSize,\n      isGitLfs,\n      lineInfo: {truncatedLoc, truncatedSloc},\n      mode,\n    },\n    viewable,\n    rawLines,\n  } = payload\n\n  const symlinkUrl = mode === 'symbolic link' ? getSymlinkUrl({rawLines, blame, repo, refInfo, path}) : undefined\n\n  return (\n    <Box className={className} sx={{alignItems: 'center'}}>\n      <Box sx={{fontSize: 0, flex: 'auto', pr: 3, color: 'fg.muted', minWidth: 0}} className=\"text-mono\">\n        {mode !== 'file' && !symlinkUrl && (\n          <>\n            <Truncate title={mode} inline sx={{ml: 1, mr: 2, textTransform: 'capitalize'}}>\n              <span>{mode}</span>\n            </Truncate>\n            {viewable && <Text sx={{color: 'fg.muted', mr: 1}}></Text>}\n          </>\n        )}\n        {viewable ? (\n          <>\n            {symlinkUrl && (\n              <>\n                <PrimerLink as={Link} muted to={symlinkUrl} sx={{ml: 1, mr: 2}}>\n                  Symbolic Link\n                </PrimerLink>\n                <Text sx={{color: 'fg.muted', mr: 1}}></Text>\n              </>\n            )}\n            <Truncate title={blobSize} inline sx={{maxWidth: '100%'}} data-testid=\"blob-size\">\n              <span>{`${truncatedLoc} lines (${truncatedSloc} loc)  ${blobSize}`}</span>\n            </Truncate>\n          </>\n        ) : (\n          <span>{blobSize}</span>\n        )}\n        {codeownerInfo && <CodeOwnersBadge codeownerInfo={codeownerInfo} />}\n        {isGitLfs && (\n          <>\n            <span className=\"file-info-divider\" />\n            <PrimerLink\n              muted\n              href={`${helpUrl}/articles/versioning-large-files/`}\n              aria-label=\"Learn more about Git LFS\"\n              sx={{ml: 2}}\n            >\n              <Octicon icon={QuestionIcon} />\n            </PrimerLink>\n            <span> Stored with Git LFS</span>\n          </>\n        )}\n      </Box>\n    </Box>\n  )\n}\n\nfunction CodeOwnersBadge({\n  codeownerInfo: {codeownerPath, ownedByCurrentUser, ownersForFile, ruleForPathLine},\n}: {\n  codeownerInfo: CodeOwnerInfo\n}) {\n  if (!(ownedByCurrentUser || ownersForFile)) {\n    return null\n  }\n  const tooltipAriaLabel = getCodeownersText(ownedByCurrentUser, ownersForFile, ruleForPathLine)\n  const sx = ownedByCurrentUser ? {color: 'var(--fgColor-accent, var(--color-accent-fg))'} : {}\n\n  return (\n    <>\n      <Text sx={{color: 'fg.muted'}}>  </Text>\n      <Tooltip id=\"codeowners-tooltip\" aria-label={tooltipAriaLabel} wrap={true} sx={{mr: 2}}>\n        {codeownerPath ? (\n          <PrimerLink aria-labelledby=\"codeowners-tooltip\" href={codeownerPath} muted={!ownedByCurrentUser} sx={sx}>\n            <Octicon icon={ShieldLockIcon} />\n          </PrimerLink>\n        ) : (\n          <Octicon icon={ShieldLockIcon} sx={sx} />\n        )}\n      </Tooltip>\n    </>\n  )\n}\n\nfunction getCodeownersText(\n  ownedByCurrentUser: boolean | null,\n  ownersForFile: string | null,\n  ruleForPathLine: string | null,\n) {\n  let tooltipAriaLabel = 'Owned by '\n  if (ownedByCurrentUser) {\n    tooltipAriaLabel += 'you'\n    if (ownersForFile) {\n      tooltipAriaLabel += ' along with '\n    }\n  }\n  tooltipAriaLabel += ownersForFile\n  if (ruleForPathLine) {\n    tooltipAriaLabel += ` (from CODEOWNERS line ${ruleForPathLine})`\n  }\n\n  return tooltipAriaLabel\n}\n\nfunction getSymlinkUrl({\n  rawLines,\n  blame,\n  repo,\n  refInfo,\n  path: currentPath,\n}: {\n  rawLines: string[] | null\n  blame: Blame | undefined\n  repo: Repository\n  refInfo: RefInfo\n  path: string\n}) {\n  if (!rawLines || !rawLines[0]) {\n    return null\n  }\n\n  // if the symlink is absolute, we just use it from the root of the repo (ie - `foo/bar`)\n  // if the symlink is relative, we need to combine it with the current path to build the right path to the linked file\n  // e.g. if the symlink is `../foo/bar` and the current path is `baz/current_file`, the url should be `baz/../foo/bar`\n  // this logic makes sure that we don't relative path out of base blob `[nwo]/[blob]/[ref]` url\n  let filePath = rawLines[0]\n\n  if (filePath.startsWith('../') || filePath.startsWith('./')) {\n    // needs an extra ../ to get to the current file's directory where the symlink was created\n    filePath = `${currentPath}/../${filePath}`\n  }\n\n  const params = {\n    owner: repo.ownerLogin,\n    repo: repo.name,\n    commitish: refInfo.name,\n    filePath,\n  }\n\n  return blame ? blamePath(params) : blobPath(params)\n}\n\ntry{ CodeSizeDetails.displayName ||= 'CodeSizeDetails' } catch {}\ntry{ CodeOwnersBadge.displayName ||= 'CodeOwnersBadge' } catch {}","import {AllShortcutsEnabled} from '@github-ui/code-view-shared/components/AllShortcutsEnabled'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useIsPlatform} from '@github-ui/use-is-platform'\nimport {ActionList} from '@primer/react'\n\nexport default function OpenWithActionItems({\n  editEnabled,\n  githubDevUrl,\n  ghDesktopPath,\n  onBranch,\n}: {\n  editEnabled: boolean\n  githubDevUrl: string | null\n  ghDesktopPath: string | null\n  onBranch: boolean\n}) {\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const isMacOrWindows = useIsPlatform(['windows', 'mac'])\n  const {openWithGitHubDevShortcut} = useShortcut()\n  return (\n    <ActionList.Group>\n      <ActionList.GroupHeading>Open with...</ActionList.GroupHeading>\n      {\n        // TODO: add support for codespaces here\n      }\n      {githubDevUrl ? (\n        <ActionList.LinkItem\n          onClick={() =>\n            sendRepoClickEvent('BLOB_EDIT_DROPDOWN.DEV_LINK', {\n              ['edit_enabled']: editEnabled,\n            })\n          }\n          className=\"js-blob-dropdown-click js-github-dev-shortcut\"\n          href={githubDevUrl}\n          data-hotkey={openWithGitHubDevShortcut.hotkey}\n        >\n          github.dev\n          <ActionList.TrailingVisual aria-hidden=\"true\">\n            <AllShortcutsEnabled>\n              <kbd>.</kbd>\n            </AllShortcutsEnabled>\n          </ActionList.TrailingVisual>\n        </ActionList.LinkItem>\n      ) : null}\n      {onBranch && isMacOrWindows && ghDesktopPath ? (\n        <ActionList.LinkItem onClick={() => sendRepoClickEvent('BLOB_EDIT_DROPDOWN.DESKTOP')} href={ghDesktopPath}>\n          GitHub Desktop\n        </ActionList.LinkItem>\n      ) : null}\n    </ActionList.Group>\n  )\n}\n\nexport function useHasOpenWithItems(githubDevUrl: string | null, onBranch: boolean, ghDesktopPath: string | null) {\n  const isMacOrWindows = useIsPlatform(['windows', 'mac'])\n  return !!(githubDevUrl || (onBranch && isMacOrWindows && ghDesktopPath))\n}\n\ntry{ OpenWithActionItems.displayName ||= 'OpenWithActionItems' } catch {}","import {AllShortcutsEnabled} from '@github-ui/code-view-shared/components/AllShortcutsEnabled'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {Link} from '@github-ui/react-core/link'\nimport {ActionList, Box} from '@primer/react'\n\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport OpenWithActionItems from './OpenWithActionItems'\n\nexport default function EditMenuActionItems({\n  editAllowed,\n  hasOpenWithItem,\n}: {\n  editAllowed: boolean\n  hasOpenWithItem: boolean\n}) {\n  const payload = useCurrentBlob()\n  const {\n    refInfo: {canEdit},\n  } = useFilesPageInfo()\n  const {githubDevUrl} = useReposAppPayload()\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {getUrl} = useUrlCreator()\n\n  const {\n    headerInfo: {ghDesktopPath, onBranch},\n  } = payload\n\n  return (\n    <>\n      {editAllowed && (\n        <ActionList.Group>\n          <ActionList.GroupHeading>Edit file</ActionList.GroupHeading>\n          <ActionList.Item\n            as={Link}\n            onSelect={() => sendRepoClickEvent('BLOB_EDIT_DROPDOWN.IN_PLACE')}\n            to={getUrl({action: 'edit'})}\n            aria-keyshortcuts=\"e\"\n          >\n            <Box sx={{display: 'flex'}}>Edit in place</Box>\n            <ActionList.TrailingVisual aria-hidden=\"true\">\n              <AllShortcutsEnabled>\n                <kbd>e</kbd>\n              </AllShortcutsEnabled>\n            </ActionList.TrailingVisual>\n          </ActionList.Item>\n        </ActionList.Group>\n      )}\n      {editAllowed && hasOpenWithItem && <ActionList.Divider />}\n      {hasOpenWithItem && (\n        <OpenWithActionItems\n          editEnabled={canEdit}\n          githubDevUrl={githubDevUrl}\n          ghDesktopPath={ghDesktopPath}\n          onBranch={onBranch}\n        />\n      )}\n    </>\n  )\n}\n\ntry{ EditMenuActionItems.displayName ||= 'EditMenuActionItems' } catch {}","import type {Shortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {Fragment} from 'react'\n\nexport function KeyboardVisual({shortcut}: {shortcut: Shortcut}) {\n  return (\n    <>\n      {shortcut.text?.split(' ').map(keyValue => {\n        return (\n          <Fragment key={keyValue}>\n            <kbd>{keyValue}</kbd>{' '}\n          </Fragment>\n        )\n      })}\n    </>\n  )\n}\n\ntry{ KeyboardVisual.displayName ||= 'KeyboardVisual' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {linkButtonSx} from '@github-ui/code-view-shared/utilities/styles'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {blamePath, blobPath} from '@github-ui/paths'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {Box, Dialog, LinkButton, TextInput} from '@primer/react'\nimport {useEffect, useRef, useState} from 'react'\nimport {createPortal} from 'react-dom'\n\n// eslint-disable-next-line no-restricted-imports\nimport {parseFileAnchor} from '../../../github/blob-anchor'\nimport {useCurrentBlob} from '../../hooks/CurrentBlob'\nimport {useCursorEndLineNumber, useCursorStartLineNumber, useIsCursorEnabled} from '../../hooks/use-cursor-navigation'\nimport {scrollLineIntoView} from '../../hooks/use-scroll-line-into-view'\n\nexport function useWorkflowRedirectUrl() {\n  const blobPayload = useCurrentBlob()\n  return blobPayload.workflowRedirectUrl\n}\n\nexport function GoToLineDialog({\n  onBlamePage,\n  onDismiss,\n  maxLineNumber,\n}: {\n  onBlamePage: boolean\n  onDismiss: () => void\n  maxLineNumber?: number\n}) {\n  const navigate = useNavigate()\n  const shouldUseCursor = useIsCursorEnabled()\n  const startLineNum = useCursorStartLineNumber()\n  const endLineNum = useCursorEndLineNumber()\n  const lineNumber = useRef(shouldUseCursor ? startLineNum : 1)\n  const valid = useRef(true)\n  const [changeDescribeBy, setChangeDescribeBy] = useState(true)\n  const secondLineNumber = useRef(startLineNum !== endLineNum && shouldUseCursor ? endLineNum : null)\n  const {refInfo, path} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n  const inputBoxRef = useRef<HTMLInputElement>(null)\n\n  const hash = useRef(\n    lineNumber.current\n      ? `#L${lineNumber.current}${secondLineNumber.current ? `-L${secondLineNumber.current}` : ''}`\n      : '',\n  )\n  const href = onBlamePage\n    ? blamePath({\n        repo: repo.name,\n        owner: repo.ownerLogin,\n        filePath: path,\n        commitish: refInfo.name,\n      })\n    : blobPath({\n        repo: repo.name,\n        owner: repo.ownerLogin,\n        filePath: path,\n        commitish: refInfo.name,\n      })\n\n  useEffect(() => {\n    if (inputBoxRef && inputBoxRef.current) {\n      inputBoxRef.current.value = shouldUseCursor\n        ? `${startLineNum}${endLineNum !== startLineNum ? `-${endLineNum}` : ''}`\n        : '1'\n\n      inputBoxRef.current.focus()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  function handleInputChange(inputValue: string) {\n    let isValid = true\n    if (inputValue.trim() === '') {\n      lineNumber.current = 1\n    }\n    if (inputValue.startsWith('-') && maxLineNumber) {\n      const intValue = parseInt(inputValue, 10)\n      if (!Number.isNaN(intValue) && intValue < 0) {\n        let numberToGoTo = maxLineNumber + intValue + 1\n        if (numberToGoTo <= 0) {\n          numberToGoTo = 1\n          isValid = false\n        }\n        lineNumber.current = numberToGoTo\n      }\n    } else if (inputValue.includes('-')) {\n      const [firstLine, secondLine] = inputValue.split('-')\n      const firstIntValue = parseInt(firstLine!, 10)\n      const secondIntvalue = parseInt(secondLine!, 10)\n      if (!Number.isNaN(firstIntValue) && firstIntValue > 0) {\n        lineNumber.current = maxLineNumber ? Math.min(firstIntValue, maxLineNumber) : firstIntValue\n        isValid = maxLineNumber !== undefined && firstIntValue <= maxLineNumber\n      }\n      if (!Number.isNaN(secondIntvalue) && secondIntvalue > 0) {\n        secondLineNumber.current = maxLineNumber ? Math.min(secondIntvalue, maxLineNumber) : secondIntvalue\n        isValid = isValid && maxLineNumber !== undefined && secondIntvalue <= maxLineNumber\n      }\n    } else {\n      const intValue = parseInt(inputValue, 10)\n      if (!Number.isNaN(intValue) && intValue > 0) {\n        lineNumber.current = maxLineNumber ? Math.min(intValue, maxLineNumber) : intValue\n        isValid = maxLineNumber !== undefined && intValue <= maxLineNumber\n      } else {\n        isValid = inputValue !== '' ? false : true\n      }\n    }\n    valid.current = isValid\n    if (isValid && !changeDescribeBy) {\n      setChangeDescribeBy(true)\n    }\n    //fix hitting enter on the input box updating even if it isn't valid\n    hash.current = `#L${lineNumber.current}${secondLineNumber.current ? `-L${secondLineNumber.current}` : ''}`\n  }\n\n  const handleGoToLine = (newHash: string) => {\n    const anchInfo = parseFileAnchor(newHash)\n    if (!anchInfo.blobRange?.start?.line || !valid.current) {\n      setChangeDescribeBy(valid.current)\n      setTimeout(() => {\n        inputBoxRef.current?.focus()\n      }, 25)\n      return\n    }\n    scrollLineIntoView({line: anchInfo.blobRange.start.line})\n\n    onDismiss()\n  }\n\n  //creating a portal because there were z-index conflicts which are resolved by creating a portal for the dialog\n  //TODO: change the 'Go' linkbutton below back to a button with 'as=\"a\"' once the primer react bug is fixed\n  return createPortal(\n    <Dialog isOpen onDismiss={onDismiss}>\n      <Dialog.Header>Jump to line</Dialog.Header>\n      <Box sx={{display: 'flex', pl: 3, pr: 3, pt: 3, pb: changeDescribeBy ? 3 : 0}}>\n        <Box sx={{display: 'flex', flexGrow: 1, mr: 2}}>\n          <TextInput\n            ref={inputBoxRef}\n            aria-invalid={!changeDescribeBy}\n            aria-describedby={changeDescribeBy ? '' : 'goToLineErrorValidation'}\n            sx={{flexGrow: 1, pr: 2}}\n            placeholder=\"Jump to line...\"\n            onChange={e => {\n              const value = e.target.value\n              if (inputBoxRef && inputBoxRef.current) {\n                inputBoxRef.current.value = value\n              }\n              handleInputChange(value)\n            }}\n            onFocus={() => {\n              if (inputBoxRef && inputBoxRef.current) {\n                inputBoxRef.current.select()\n              }\n            }}\n            onKeyDown={e => {\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n              if (e.key !== 'Enter') return\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n              if (e.key === 'Enter' && !valid.current) {\n                setChangeDescribeBy(valid.current)\n                setTimeout(() => {\n                  inputBoxRef.current?.focus()\n                }, 25)\n                return\n              }\n              // update our url and trigger any necessary changes on path/hash change (namely highlighting)\n              navigate(href + hash.current)\n              // hash changes don't automatically scroll to the line as of #252468\n              handleGoToLine(hash.current)\n            }}\n          />\n        </Box>\n        <LinkButton\n          href={changeDescribeBy ? href + hash.current : undefined}\n          onClick={() => handleGoToLine(hash.current)}\n          sx={linkButtonSx}\n        >\n          Go\n        </LinkButton>\n      </Box>\n      {!changeDescribeBy && (\n        <Box\n          role=\"alert\"\n          id=\"goToLineErrorValidation\"\n          sx={{display: 'flex', p: 2, justifyContent: 'center', color: 'red'}}\n        >\n          Invalid line number\n        </Box>\n      )}\n    </Dialog>,\n    document.body,\n  )\n}\n\ntry{ GoToLineDialog.displayName ||= 'GoToLineDialog' } catch {}","import {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {WebCommitInfo} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport type {WebCommitDialogState} from '@github-ui/web-commit-dialog'\nimport {Box, Button} from '@primer/react'\nimport {lazy, startTransition, Suspense, useRef, useState} from 'react'\n\nconst WebCommitDialog = lazy(() => import('../../blob-edit/WebCommitDialog'))\n\nexport function DeleteHeaderButtons({webCommitInfo, isBlob}: {webCommitInfo: WebCommitInfo; isBlob: boolean}) {\n  const [webCommitDialogState, setWebCommitDialogState] = useState<WebCommitDialogState>('closed')\n  const commitChangesOpen = webCommitDialogState === 'pending' || webCommitDialogState === 'saving'\n\n  const returnFocusRef = useRef<HTMLButtonElement>(null)\n  const repo = useCurrentRepository()\n  const {refInfo, path} = useFilesPageInfo()\n  const {helpUrl} = useReposAppPayload()\n\n  const cancelUrl = repositoryTreePath({repo, commitish: refInfo.name, action: isBlob ? 'blob' : 'tree', path})\n\n  if (webCommitInfo.shouldFork || webCommitInfo.shouldUpdate || webCommitInfo.lockedOnMigration) {\n    return null\n  }\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'row', gap: 2, flexWrap: 'wrap-reverse', justifyContent: 'flex-end'}}>\n      <Button as={Link} to={cancelUrl}>\n        Cancel changes\n      </Button>\n      <Button\n        variant=\"primary\"\n        ref={returnFocusRef}\n        onClick={() => {\n          startTransition(() => {\n            setWebCommitDialogState('pending')\n          })\n        }}\n      >\n        Commit changes...\n      </Button>\n      {commitChangesOpen && (\n        <Suspense fallback={null}>\n          <WebCommitDialog\n            isNewFile={false}\n            isDelete={true}\n            helpUrl={helpUrl}\n            ownerName={repo.ownerLogin}\n            dialogState={webCommitDialogState}\n            setDialogState={setWebCommitDialogState}\n            refName={refInfo.name}\n            placeholderMessage={`Delete ${path}${isBlob ? '' : ' directory'}`}\n            webCommitInfo={webCommitInfo}\n            returnFocusRef={returnFocusRef}\n          />\n        </Suspense>\n      )}\n    </Box>\n  )\n}\n\ntry{ WebCommitDialog.displayName ||= 'WebCommitDialog' } catch {}\ntry{ DeleteHeaderButtons.displayName ||= 'DeleteHeaderButtons' } catch {}","import safeStorage from '@github-ui/safe-storage'\nimport {type CodeViewOption, codeWrappingName, useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {CheckIcon} from '@primer/octicons-react'\nimport {ActionList} from '@primer/react'\nimport {startTransition, useCallback} from 'react'\n\nimport {useUpdatePanelExpandPreferences} from '../../../hooks/use-update-panel-expand-preferences'\n\nconst safeLocalStorage = safeStorage('localStorage')\n\nexport default function SettingsMenuItems({symbolsEnabled}: {symbolsEnabled: boolean}) {\n  const {codeFoldingOption, codeWrappingOption, codeCenterOption, openSymbolsOption} = useCodeViewOptions()\n\n  return (\n    <>\n      <OptionsElement option={codeFoldingOption} />\n      <OptionsElement option={codeWrappingOption} />\n      <OptionsElement option={codeCenterOption} />\n      {symbolsEnabled && <OptionsElement option={openSymbolsOption} />}\n    </>\n  )\n}\n\nexport function OptionsElement({option}: {option: CodeViewOption}) {\n  const setPrefs = useUpdatePanelExpandPreferences()\n  const onSelect = useCallback(() => {\n    //need to start the transition because we might be swapping between no virtualization/virtualized versions,\n    //and we lazy load components in either approach\n    startTransition(() => option.setEnabled(!option.enabled))\n    safeLocalStorage.setItem(option.name, String(!option.enabled))\n    if (option.name === codeWrappingName) setPrefs(null, null, !option.enabled)\n  }, [option, setPrefs])\n\n  return (\n    <ActionList.Item key={option.name} onSelect={onSelect}>\n      <ActionList.LeadingVisual>{option.enabled && <CheckIcon />}</ActionList.LeadingVisual>\n      {option.label}\n    </ActionList.Item>\n  )\n}\n\ntry{ SettingsMenuItems.displayName ||= 'SettingsMenuItems' } catch {}\ntry{ OptionsElement.displayName ||= 'OptionsElement' } catch {}","import {AddFileDropdownButton} from '@github-ui/code-view-shared/components/AddFileDropdownButton'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport FileResultsList from '@github-ui/code-view-shared/components/files-search/FileResultsList'\nimport {ReposHeaderRefSelector} from '@github-ui/code-view-shared/components/ReposHeaderRefSelector'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {type FilePagePayload, isBlobPayload, isDeletePayload, isTreePayload} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {FindFilesShortcut} from '@github-ui/repos-file-tree-view'\nimport {ScreenReaderHeading} from '@github-ui/screen-reader-heading'\n// eslint-disable-next-line no-restricted-imports\nimport {useToastContext} from '@github-ui/toast/ToastContext'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {KebabHorizontalIcon, PlusIcon, UploadIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, Box, Button, IconButton, Link as PrimerLink} from '@primer/react'\nimport {useRef} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {copyText} from '../../../github/command-palette/copy'\nimport {useAlertTooltip} from '../../../react-shared/hooks/use-alert-tooltip'\nimport {CurrentBlobProvider} from '../../hooks/CurrentBlob'\nimport {useCopyRawBlobContents} from '../../hooks/use-copy-raw-blob-contents'\nimport {KeyboardVisual} from '../../utilities/KeyboardVisual'\nimport {textAreaId} from '../../utilities/lines'\nimport {useWorkflowRedirectUrl} from '../blob/BlobNavigationButtons'\nimport {DeleteDirectoryItem} from '../directory/TreeOverflowMenu'\nimport {DeleteHeaderButtons} from './header-components/DeleteHeaderButtons'\nimport NavigationMenu from './header-components/NavigationMenu'\nimport {OptionsElement} from './header-components/SettingsMenuItems'\nimport {ReposHeaderBreadcrumb} from './ReposHeaderBreadcrumb'\n\nexport default function CodeViewHeader({\n  payload,\n  showTree,\n  treeToggleElement,\n  validCodeNav,\n  onFindFilesShortcut,\n}: {\n  payload: FilePagePayload\n  showTree: boolean\n  treeToggleElement: JSX.Element\n  validCodeNav: boolean\n  onFindFilesShortcut?: () => void\n}) {\n  const {codeCenterOption} = useCodeViewOptions()\n\n  return (\n    <Box className=\"container\" sx={{width: '100%'}}>\n      <div className=\"px-3 pt-3 pb-0\" id=\"StickyHeader\">\n        <Box sx={{display: 'flex', gap: 2, flexDirection: 'column', width: '100%'}}>\n          <Box sx={{display: 'flex', alignItems: 'start', justifyContent: 'space-between', gap: 2}}>\n            {!showTree ? (\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'start',\n                  minWidth: 0,\n                }}\n                className=\"react-code-view-header-wrap--narrow\"\n              >\n                <Box\n                  sx={{\n                    display: 'block',\n                    '@media screen and (min-width: 1360px)': {\n                      display: codeCenterOption.enabled ? 'none' : 'block',\n                    },\n                    mr: 2,\n                  }}\n                >\n                  {treeToggleElement}\n                </Box>\n                <div className=\"react-code-view-header-mb--narrow mr-2\">\n                  <ReposHeaderRefSelector\n                    buttonClassName=\"ref-selector-class\"\n                    idEnding=\"repos-header-ref-selector-wide\"\n                  />\n                </div>\n                <Box\n                  sx={{alignSelf: 'center', display: 'flex', px: 2, minWidth: 0}}\n                  className=\"react-code-view-header-mb--narrow\"\n                >\n                  <ReposHeaderBreadcrumb\n                    id=\"repos-header-breadcrumb\"\n                    fileNameId=\"file-name-id\"\n                    showCopyPathButton={true}\n                  />\n                </Box>\n              </Box>\n            ) : (\n              <Box\n                sx={{\n                  alignSelf: 'center',\n                  display: 'flex',\n                  pr: 2,\n                  minWidth: 0,\n                }}\n              >\n                <ReposHeaderBreadcrumb\n                  id=\"repos-header-breadcrumb--wide\"\n                  fileNameId=\"file-name-id-wide\"\n                  showCopyPathButton={true}\n                />\n              </Box>\n            )}\n            <div className=\"react-code-view-header-element--wide\">\n              <PageActions\n                payload={payload}\n                onFindFilesShortcut={onFindFilesShortcut}\n                narrow={false}\n                showTree={showTree}\n                validCodeNav={validCodeNav}\n              />\n            </div>\n            <div className=\"react-code-view-header-element--narrow\">\n              <PageActions\n                payload={payload}\n                onFindFilesShortcut={onFindFilesShortcut}\n                narrow\n                showTree={showTree}\n                validCodeNav={validCodeNav}\n              />\n            </div>\n          </Box>\n        </Box>\n      </div>\n    </Box>\n  )\n}\n\nfunction PageActions({\n  payload,\n  onFindFilesShortcut,\n  narrow,\n  showTree,\n  validCodeNav,\n}: {\n  payload: FilePagePayload\n  onFindFilesShortcut?: () => void\n  narrow: boolean\n  showTree: boolean\n  validCodeNav: boolean\n}) {\n  const onCopy = useCopyRawBlobContents()\n  const {findFileWorkerPath, githubDevUrl} = useReposAppPayload()\n  const {refInfo} = useFilesPageInfo()\n  const {openWithGitHubDevShortcut, openWithGitHubDevInNewWindowShortcut} = useShortcut()\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  const goToFileInput = !showTree && (\n    <div>\n      <FileResultsList\n        commitOid={refInfo.currentOid}\n        findFileWorkerPath={findFileWorkerPath}\n        searchBoxRef={inputRef}\n        config={{useOverlay: true}}\n        sx={{mr: 1, ml: 1}}\n      />\n      <FindFilesShortcut inputRef={inputRef} onFindFilesShortcut={onFindFilesShortcut} textAreaId={textAreaId} />\n    </div>\n  )\n\n  return (\n    <Box sx={{minHeight: '32px', display: 'flex', alignItems: 'start'}}>\n      <div className=\"d-flex gap-2\">\n        {isBlobPayload(payload) && (\n          <CurrentBlobProvider blob={payload.blob}>\n            {!narrow && (\n              <>\n                <ViewRunsButton />\n                {goToFileInput}\n              </>\n            )}\n            <NavigationMenu\n              onCopy={onCopy}\n              narrow={narrow}\n              validCodeNav={validCodeNav}\n              copilotAccessAllowed={payload.copilotAccessAllowed ?? false}\n            />\n          </CurrentBlobProvider>\n        )}\n        {isTreePayload(payload) && (\n          <>\n            <ScreenReaderHeading as=\"h2\" text=\"Directory actions\" />\n            {!narrow && (\n              <>\n                {goToFileInput}\n                <AddFileDropdownButton />\n              </>\n            )}\n            <TreeOverflowMenu narrow={narrow} />\n            <PrimerLink\n              className=\"js-github-dev-shortcut d-none\"\n              data-hotkey={openWithGitHubDevShortcut.hotkey}\n              href={githubDevUrl}\n            />\n            <PrimerLink\n              className=\"js-github-dev-new-tab-shortcut d-none\"\n              data-hotkey={openWithGitHubDevInNewWindowShortcut.hotkey}\n              href={githubDevUrl}\n              target=\"_blank\"\n            />\n          </>\n        )}\n        {isDeletePayload(payload) && (\n          <DeleteHeaderButtons webCommitInfo={payload.webCommitInfo} isBlob={payload.deleteInfo.isBlob} />\n        )}\n      </div>\n    </Box>\n  )\n}\n\nfunction TreeOverflowMenu({narrow}: {narrow?: boolean}) {\n  const {refInfo, path} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {addToast} = useToastContext()\n  const {createPermalink} = useUrlCreator()\n  const {copyFilePathShortcut, copyPermalinkShortcut} = useShortcut()\n  const {codeCenterOption} = useCodeViewOptions()\n  const moreOptionsButtonRef = useRef(null)\n  const [updateMessage, clearMessage, portalTooltip] = useAlertTooltip(\n    'raw-copy-message-tooltip',\n    moreOptionsButtonRef,\n    {direction: 'nw'},\n  )\n\n  return (\n    <>\n      {/* Copy link and permalink shortcut */}\n      {copyFilePathShortcut.hotkey && (\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={copyFilePathShortcut.hotkey}\n          onButtonClick={() => {\n            copyText(path)\n            // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n            addToast({\n              type: 'success',\n              message: 'Path copied!',\n            })\n          }}\n        />\n      )}\n      {copyPermalinkShortcut.hotkey && (\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={copyPermalinkShortcut.hotkey}\n          onButtonClick={() => {\n            copyText(createPermalink({absolute: true}))\n            // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n            addToast({\n              type: 'success',\n              message: 'Permalink copied!',\n            })\n          }}\n        />\n      )}\n      <ScreenReaderHeading as=\"h2\" text=\"More options\" />\n      {portalTooltip}\n      <ActionMenu\n        onOpenChange={open => open && sendRepoClickEvent('MORE_OPTIONS_DROPDOWN')}\n        anchorRef={moreOptionsButtonRef}\n      >\n        <ActionMenu.Anchor>\n          {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n          <IconButton\n            unsafeDisableTooltip={true}\n            icon={KebabHorizontalIcon}\n            aria-label=\"More options\"\n            size=\"medium\"\n            sx={{color: 'fg.muted'}}\n            title=\"More options\"\n            data-testid=\"tree-overflow-menu-anchor\"\n            onBlur={clearMessage}\n          />\n        </ActionMenu.Anchor>\n\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList>\n            {narrow && refInfo.canEdit && (\n              <>\n                <ActionList.LinkItem\n                  as={Link}\n                  onClick={() => sendRepoClickEvent('NEW_FILE_BUTTON')}\n                  to={repositoryTreePath({repo, path, commitish: refInfo.name, action: 'new'})}\n                >\n                  <ActionList.LeadingVisual>\n                    <PlusIcon />\n                  </ActionList.LeadingVisual>\n                  Create new file\n                </ActionList.LinkItem>\n                <ActionList.LinkItem\n                  onClick={() => sendRepoClickEvent('UPLOAD_FILES_BUTTON')}\n                  href={repositoryTreePath({repo, path, commitish: refInfo.name, action: 'upload'})}\n                >\n                  <ActionList.LeadingVisual>\n                    <UploadIcon />\n                  </ActionList.LeadingVisual>\n                  Upload files\n                </ActionList.LinkItem>\n                <ActionList.Divider />\n              </>\n            )}\n            <CopyPathsActionItems path={path} updateTooltipMessage={updateMessage} />\n            {refInfo.canEdit && <ActionList.Divider />}\n            <DeleteDirectoryItem />\n            <ActionList.Divider />\n            <ActionList.Group>\n              <ActionList.GroupHeading>View options</ActionList.GroupHeading>\n              <OptionsElement option={codeCenterOption} />\n            </ActionList.Group>\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </>\n  )\n}\n\nexport function CopyPathsActionItems({\n  path,\n  updateTooltipMessage,\n}: {\n  path: string\n  updateTooltipMessage: (message: string) => void\n}) {\n  const {copyFilePathShortcut} = useShortcut()\n  const {copyPermalinkShortcut} = useShortcut()\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {createPermalink} = useUrlCreator()\n  return (\n    <>\n      <ActionList.Item\n        onSelect={() => {\n          sendRepoClickEvent('MORE_OPTIONS_DROPDOWN.COPY_PATH')\n          copyText(path)\n          updateTooltipMessage('Path copied!')\n        }}\n      >\n        Copy path\n        {copyFilePathShortcut.hotkey && (\n          <ActionList.TrailingVisual aria-hidden=\"true\">\n            <KeyboardVisual shortcut={copyFilePathShortcut} />\n          </ActionList.TrailingVisual>\n        )}\n      </ActionList.Item>\n      <ActionList.Item\n        onSelect={() => {\n          sendRepoClickEvent('MORE_OPTIONS_DROPDOWN.COPY_PERMALINK')\n          copyText(createPermalink({absolute: true}))\n          updateTooltipMessage('Permalink copied!')\n        }}\n      >\n        Copy permalink\n        {copyPermalinkShortcut.hotkey && (\n          <ActionList.TrailingVisual aria-hidden=\"true\">\n            <KeyboardVisual shortcut={copyPermalinkShortcut} />\n          </ActionList.TrailingVisual>\n        )}\n      </ActionList.Item>\n    </>\n  )\n}\n\nfunction ViewRunsButton() {\n  const redirectUrl = useWorkflowRedirectUrl()\n\n  if (!redirectUrl) {\n    return null\n  }\n\n  return (\n    <Button as={Link} to={redirectUrl}>\n      View Runs\n    </Button>\n  )\n}\n\ntry{ CodeViewHeader.displayName ||= 'CodeViewHeader' } catch {}\ntry{ PageActions.displayName ||= 'PageActions' } catch {}\ntry{ TreeOverflowMenu.displayName ||= 'TreeOverflowMenu' } catch {}\ntry{ CopyPathsActionItems.displayName ||= 'CopyPathsActionItems' } catch {}\ntry{ ViewRunsButton.displayName ||= 'ViewRunsButton' } catch {}","import type {CopilotChatReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {handleAddReference} from '@github-ui/copilot-code-chat/CopilotCodeLinesMenu'\nimport {ActionList} from '@primer/react'\n\nexport default function CopilotMenuItems({fileReference}: {fileReference: CopilotChatReference}) {\n  return (\n    <>\n      <ActionList.Item data-testid=\"copilot-menu-items\" onSelect={() => handleAddReference(fileReference)}>\n        Ask about this file\n      </ActionList.Item>\n    </>\n  )\n}\n\ntry{ CopilotMenuItems.displayName ||= 'CopilotMenuItems' } catch {}","import {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {ActionList} from '@primer/react'\nimport {useCallback} from 'react'\n\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {type CopyState, getCopyStateUI} from '../../../utilities/Copy'\nimport {KeyboardVisual} from '../../../utilities/KeyboardVisual'\n\nexport default function RawMenuActionItems({\n  viewable,\n  onCopy,\n  name,\n  updateTooltipMessage,\n  all,\n}: {\n  viewable: boolean\n  onCopy: () => Promise<CopyState>\n  name: string\n  updateTooltipMessage: (message: string) => void\n  all?: boolean\n}) {\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {rawBlobUrl} = useCurrentBlob()\n  const {downloadRawContentShortcut} = useShortcut()\n  const downloadFileCallback = useCallback(async () => await downloadFile(rawBlobUrl, name), [name, rawBlobUrl])\n\n  return (\n    <ActionList.Group>\n      <ActionList.GroupHeading>Raw file content</ActionList.GroupHeading>\n      {all && <CopyActionItem viewable={viewable} onCopy={onCopy} updateTooltipMessage={updateTooltipMessage} />}\n      {all && <RawActionItem onClick={() => sendRepoClickEvent('BLOB_RAW_DROPDOWN.VIEW')} rawHref={rawBlobUrl} />}\n      <ActionList.LinkItem onClick={downloadFileCallback}>\n        Download\n        {downloadRawContentShortcut.text && (\n          <ActionList.TrailingVisual aria-hidden=\"true\">\n            <KeyboardVisual shortcut={downloadRawContentShortcut} />\n          </ActionList.TrailingVisual>\n        )}\n      </ActionList.LinkItem>\n    </ActionList.Group>\n  )\n}\n\nexport async function downloadFile(rawHref: string, name: string) {\n  const result = await fetch(rawHref, {method: 'get'})\n  const blob = await result.blob()\n  const aElement = document.createElement('a')\n  aElement.setAttribute('download', name)\n  const href = URL.createObjectURL(blob)\n  aElement.href = href\n  aElement.setAttribute('target', '_blank')\n  aElement.click()\n  URL.revokeObjectURL(href)\n}\n\nfunction CopyActionItem({\n  viewable,\n  onCopy,\n  updateTooltipMessage,\n}: {\n  viewable: boolean\n  onCopy: () => Promise<CopyState>\n  updateTooltipMessage: (message: string) => void\n}): JSX.Element | null {\n  const {copyRawContentShortcut} = useShortcut()\n  return viewable ? (\n    <ActionList.Item\n      onSelect={async () => {\n        const result = await onCopy()\n        const {ariaLabel} = getCopyStateUI(result)\n        updateTooltipMessage(ariaLabel)\n      }}\n    >\n      Copy\n      {copyRawContentShortcut.text && (\n        <ActionList.TrailingVisual aria-hidden=\"true\">\n          <KeyboardVisual shortcut={copyRawContentShortcut} />\n        </ActionList.TrailingVisual>\n      )}\n    </ActionList.Item>\n  ) : null\n}\n\nfunction RawActionItem({onClick, rawHref}: {onClick?: () => void; rawHref: string}) {\n  const {viewRawContentShortcut} = useShortcut()\n  return (\n    <ActionList.LinkItem onClick={onClick} href={rawHref}>\n      View\n      {viewRawContentShortcut.text && (\n        <ActionList.TrailingVisual aria-hidden=\"true\">\n          <KeyboardVisual shortcut={viewRawContentShortcut} />\n        </ActionList.TrailingVisual>\n      )}\n    </ActionList.LinkItem>\n  )\n}\n\ntry{ RawMenuActionItems.displayName ||= 'RawMenuActionItems' } catch {}\ntry{ CopyActionItem.displayName ||= 'CopyActionItem' } catch {}\ntry{ RawActionItem.displayName ||= 'RawActionItem' } catch {}","import {AllShortcutsEnabled} from '@github-ui/code-view-shared/components/AllShortcutsEnabled'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport type {FileReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {useCurrentUser} from '@github-ui/current-user'\nimport {Link} from '@github-ui/react-core/link'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {KebabHorizontalIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, Button, IconButton} from '@primer/react'\nimport {useEffect, useMemo, useRef, useState} from 'react'\n// useLocation is safe for files not rendered in a partial on the overview.\n// eslint-disable-next-line no-restricted-imports\nimport {useLinkClickHandler, useLocation} from 'react-router-dom'\n\nimport {useAlertTooltip} from '../../../../react-shared/hooks/use-alert-tooltip'\nimport {useFindInFileOpen} from '../../../contexts/FindInFileOpenContext'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {BlobDisplayType, useBlobRendererType} from '../../../hooks/use-blob-renderer-type'\nimport {useIsCursorEnabled} from '../../../hooks/use-cursor-navigation'\nimport type {CopyState} from '../../../utilities/Copy'\nimport {KeyboardVisual} from '../../../utilities/KeyboardVisual'\nimport {textAreaId} from '../../../utilities/lines'\nimport {GoToLineDialog, useWorkflowRedirectUrl} from '../../blob/BlobNavigationButtons'\nimport {CopyPathsActionItems} from './../CodeViewHeader'\nimport CopilotMenuItems from './CopilotMenuItems'\nimport RawMenuActionItems from './RawMenuActionItems'\nimport SettingsMenuItems from './SettingsMenuItems'\n\nexport default function NavigationMenu({\n  onCopy,\n  validCodeNav,\n  narrow,\n  copilotAccessAllowed,\n}: {\n  onCopy: () => Promise<CopyState>\n  validCodeNav: boolean\n  narrow?: boolean\n  copilotAccessAllowed: boolean\n}) {\n  const payload = useCurrentBlob()\n  const symbolsEnabled = payload.symbolsEnabled\n  const {\n    action,\n    path,\n    refInfo: {canEdit, currentOid, name, refType},\n  } = useFilesPageInfo()\n  const {githubDevUrl} = useReposAppPayload()\n  const {sendRepoClickEvent} = useReposAnalytics()\n\n  const [isGoToLineDialogOpen, setGoToLineDialogOpen] = useState(false)\n\n  const redirectUrl = useWorkflowRedirectUrl()\n  const shouldDisplayViewRuns = redirectUrl !== null\n  const {search} = useLocation()\n  const urlParams = new URLSearchParams(search)\n\n  const {setFindInFileOpen} = useFindInFileOpen()\n  const cursorEnabled = useIsCursorEnabled()\n\n  const shouldDisplayGoToLine = !(\n    (payload.richText && !(urlParams.get('plain') === '1')) ||\n    payload.renderImageOrRaw ||\n    (payload.renderedFileInfo && !urlParams.get('short_path')) ||\n    (payload.issueTemplate?.structured && payload.issueTemplate.valid)\n  )\n  const {\n    headerInfo: {\n      deleteTooltip,\n      onBranch,\n      siteNavLoginPath,\n      lineInfo: {truncatedLoc},\n    },\n    viewable,\n  } = payload\n\n  const currentUser = useCurrentUser()\n  const loggedIn = !!currentUser\n\n  const {getUrl} = useUrlCreator()\n  const displayType = useBlobRendererType()\n  const blameUrl = useRef('')\n\n  useEffect(() => {\n    blameUrl.current = getUrl({action: 'blame'})\n  }, [getUrl])\n  const {goToLineShortcut, findInFileShortcut, alternativeGoToLineShortcut} = useShortcut()\n  const moreButtonRef = useRef(null)\n  const [updateTooltipMessage, clearTooltipMessage, portalTooltip] = useAlertTooltip(\n    'raw-copy-message-tooltip',\n    moreButtonRef,\n    {direction: 'nw'},\n  )\n  const repository = useCurrentRepository()\n  const blobUrl = getUrl()\n  const [fileUrl] = useClientValue(() => window.location.origin + blobUrl, blobUrl)\n  const fileReference: FileReference = useMemo(\n    () => ({\n      type: 'file',\n      url: fileUrl,\n      path,\n      repoID: repository.id,\n      repoOwner: repository.ownerLogin,\n      repoName: repository.name,\n      ref: qualifyRef(name, refType ?? 'branch'),\n      commitOID: currentOid,\n    }),\n    [fileUrl, path, repository.id, repository.ownerLogin, repository.name, name, refType, currentOid],\n  )\n\n  return (\n    <>\n      {shouldDisplayGoToLine && (\n        <>\n          <DuplicateOnKeydownButton\n            buttonFocusId={textAreaId}\n            buttonHotkey={goToLineShortcut.hotkey}\n            onButtonClick={() => setGoToLineDialogOpen(true)}\n          />\n          <DuplicateOnKeydownButton\n            buttonFocusId={textAreaId}\n            buttonHotkey={alternativeGoToLineShortcut.hotkey}\n            onButtonClick={() => setGoToLineDialogOpen(true)}\n          />\n        </>\n      )}\n      <BlameButton blameUrl={blameUrl.current} viewable={viewable} hidden />\n      {portalTooltip}\n      <ActionMenu\n        onOpenChange={open =>\n          open &&\n          sendRepoClickEvent('MORE_OPTIONS_DROPDOWN', {\n            ['edit_enabled']: canEdit,\n            ['github_dev_enabled']: !!githubDevUrl,\n          })\n        }\n        anchorRef={moreButtonRef}\n      >\n        <ActionMenu.Anchor>\n          {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n          <IconButton\n            unsafeDisableTooltip={true}\n            icon={KebabHorizontalIcon}\n            aria-label=\"More file actions\"\n            className=\"js-blob-dropdown-click\"\n            size={'medium'}\n            sx={{color: 'fg.muted'}}\n            title=\"More file actions\"\n            variant={'default'}\n            data-testid={`more-file-actions-button-nav-menu-${narrow ? 'narrow' : 'wide'}`}\n            onBlur={clearTooltipMessage}\n          />\n        </ActionMenu.Anchor>\n\n        <ActionMenu.Overlay width=\"small\" sx={{maxHeight: '55vh', overflowY: 'auto'}}>\n          <ActionList>\n            {narrow && shouldDisplayViewRuns && (\n              <>\n                <ActionList.LinkItem href={redirectUrl}>View Runs</ActionList.LinkItem>\n                <ActionList.Divider />\n              </>\n            )}\n\n            <>\n              <RawMenuActionItems\n                viewable={viewable}\n                onCopy={onCopy}\n                name={payload.displayName}\n                updateTooltipMessage={updateTooltipMessage}\n              />\n              <ActionList.Divider />\n            </>\n\n            <ActionList.Group>\n              {shouldDisplayGoToLine && (\n                <ActionList.Item\n                  onSelect={() => {\n                    sendRepoClickEvent('MORE_OPTIONS_DROPDOWN.GO_TO_LINE')\n                    setGoToLineDialogOpen(true)\n                  }}\n                  aria-keyshortcuts={goToLineShortcut.hotkey}\n                >\n                  Jump to line\n                  <ActionList.TrailingVisual aria-hidden=\"true\">\n                    <AllShortcutsEnabled>\n                      <kbd>{goToLineShortcut.text}</kbd>\n                    </AllShortcutsEnabled>\n                  </ActionList.TrailingVisual>\n                </ActionList.Item>\n              )}\n              {displayType === BlobDisplayType.Code && payload.rawLines !== null && validCodeNav && !cursorEnabled && (\n                <ActionList.Item\n                  onSelect={() => {\n                    sendRepoClickEvent('BLOB_FIND_IN_FILE_MENU.OPEN')\n                    setFindInFileOpen(true)\n                  }}\n                  aria-keyshortcuts={findInFileShortcut.ariaKeyShortcuts}\n                >\n                  Find in file\n                  <ActionList.TrailingVisual aria-hidden=\"true\">\n                    <KeyboardVisual shortcut={findInFileShortcut} />\n                  </ActionList.TrailingVisual>\n                </ActionList.Item>\n              )}\n            </ActionList.Group>\n            {(shouldDisplayGoToLine ||\n              (displayType === BlobDisplayType.Code && payload.rawLines !== null && validCodeNav)) && (\n              <ActionList.Divider />\n            )}\n            <CopyPathsActionItems path={path} updateTooltipMessage={updateTooltipMessage} />\n            <ActionList.Divider />\n            {copilotAccessAllowed && (\n              <>\n                <ActionList.Group>\n                  <ActionList.GroupHeading>Copilot</ActionList.GroupHeading>\n                  <CopilotMenuItems fileReference={fileReference} />\n                </ActionList.Group>\n                <ActionList.Divider />\n              </>\n            )}\n            <ActionList.Group>\n              <ActionList.GroupHeading>View options</ActionList.GroupHeading>\n              <SettingsMenuItems symbolsEnabled={symbolsEnabled} />\n            </ActionList.Group>\n            {((canEdit && onBranch) || (!viewable && onBranch)) && (\n              <>\n                <ActionList.Divider />\n                <DeleteActionItem\n                  deleteTooltip={deleteTooltip}\n                  loggedIn={loggedIn}\n                  siteNavLoginPath={siteNavLoginPath}\n                />\n              </>\n            )}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      {isGoToLineDialogOpen && (\n        <GoToLineDialog\n          onBlamePage={action === 'blame'}\n          onDismiss={() => {\n            setGoToLineDialogOpen(false)\n            //focus the text area so the cursor is visible at the start of the given line\n            setTimeout(() => {\n              const textAreaRef = document.getElementById(textAreaId)\n              textAreaRef?.focus()\n            }, 0)\n          }}\n          maxLineNumber={parseInt(truncatedLoc, 10) ?? undefined}\n        />\n      )}\n    </>\n  )\n}\n\nfunction BlameButton({blameUrl, viewable, hidden}: {blameUrl: string; viewable: boolean; hidden?: boolean}) {\n  const {hash} = useLocation()\n  const href = blameUrl + hash\n  const onClick = useLinkClickHandler<HTMLButtonElement>(href)\n  const hiddenSx = hidden ? {display: 'none'} : undefined\n  const {viewBlameShortcut} = useShortcut()\n  return viewable ? (\n    <>\n      <Button\n        data-hotkey={viewBlameShortcut.hotkey}\n        sx={{borderTopLeftRadius: 0, borderBottomLeftRadius: 0, ...hiddenSx}}\n        onClick={onClick}\n      >\n        Blame\n      </Button>\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={viewBlameShortcut.hotkey}\n        onButtonClick={onClick}\n        onlyAddHotkeyScopeButton={true}\n      />\n    </>\n  ) : null\n}\n\nfunction DeleteActionItem({\n  deleteTooltip,\n  loggedIn,\n  siteNavLoginPath,\n}: {\n  deleteTooltip: string\n  loggedIn: boolean\n  siteNavLoginPath: string\n}) {\n  const {getUrl} = useUrlCreator()\n\n  return (\n    <ActionList.LinkItem\n      as={Link}\n      sx={{padding: 2, color: 'danger.fg', ':hover': {color: 'danger.fg'}}}\n      aria-label={deleteTooltip}\n      to={loggedIn ? getUrl({action: 'delete'}) : siteNavLoginPath}\n    >\n      Delete file\n    </ActionList.LinkItem>\n  )\n}\nexport const qualifyRef = (ref: string, refType: 'branch' | 'tag' | 'tree') => {\n  if (refType === 'branch') return `refs/heads/${ref}`\n  if (refType === 'tag') return `refs/tags/${ref}`\n  return ref\n}\n\ntry{ NavigationMenu.displayName ||= 'NavigationMenu' } catch {}\ntry{ BlameButton.displayName ||= 'BlameButton' } catch {}\ntry{ DeleteActionItem.displayName ||= 'DeleteActionItem' } catch {}","import type {SetPanelOpenType} from '@github-ui/code-view-shared/contexts/OpenPanelContext'\nimport type {PanelType, TocEntry} from '@github-ui/code-view-types'\nimport {ListUnorderedIcon} from '@primer/octicons-react'\nimport {IconButton} from '@primer/react'\nimport React from 'react'\n\nexport default function TableOfContents({\n  toc,\n  openPanel,\n  setOpenPanel,\n  isDirectoryReadme,\n}: {\n  toc: TocEntry[] | null\n  openPanel?: PanelType | undefined\n  setOpenPanel?: SetPanelOpenType\n  isDirectoryReadme?: boolean\n}) {\n  const ref = React.useRef<HTMLButtonElement>(null)\n  return showToc(toc) ? (\n    // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip\n    <IconButton\n      unsafeDisableTooltip={true}\n      ref={ref}\n      sx={{color: 'var(--fgColor-muted, var(--color-fg-muted))', mr: isDirectoryReadme ? 0 : 2}}\n      icon={ListUnorderedIcon}\n      variant=\"invisible\"\n      aria-label=\"Outline\"\n      aria-pressed={openPanel === 'toc'}\n      onClick={() => {\n        setOpenPanel && setOpenPanel(openPanel === 'toc' ? undefined : 'toc', ref.current)\n      }}\n      size=\"small\"\n    />\n  ) : null\n}\n\nfunction showToc(toc: TocEntry[] | null) {\n  return toc && toc.length >= 2\n}\n\ntry{ TableOfContents.displayName ||= 'TableOfContents' } catch {}","import {SafeHTMLDiv, type SafeHTMLString} from '@github-ui/safe-html'\nimport {Box} from '@primer/react'\n\nimport {scrollLineIntoView} from '../../hooks/use-scroll-line-into-view'\nimport {CodeLine} from '../blob/BlobContent/Code/CodeLine'\nimport type {CodeLineData} from '../blob/BlobContent/Code/hooks/use-code-lines'\nimport {LineNumber} from '../blob/BlobContent/Code/LineNumber'\n\nexport function StickyLinesHeader({\n  currentStickyLines,\n  colorizedLines,\n}: {\n  currentStickyLines: Map<number, CodeLineData>\n  colorizedLines?: SafeHTMLString[] | null\n}) {\n  const stickyLines = Array.from(currentStickyLines.values())\n\n  return (\n    <Box sx={{overflow: 'hidden', display: 'flex'}}>\n      <Box className=\"react-line-numbers\" sx={{marginLeft: '2px'}}>\n        {stickyLines.map(stickyLine => {\n          return <LineNumber key={`sticky-header-line-number-${stickyLine.lineNumber}`} codeLineData={stickyLine} />\n        })}\n      </Box>\n      <div className=\"react-code-lines\">\n        {stickyLines.map(stickyLine => {\n          if (colorizedLines && colorizedLines[stickyLine.lineNumber - 1]) {\n            return (\n              <SafeHTMLDiv\n                className=\"react-code-text react-code-line-contents-no-virtualization react-file-line html-div\"\n                key={`sticky-header-line-${stickyLine.lineNumber}`}\n                style={{paddingLeft: '18px'}}\n                html={colorizedLines[stickyLine.lineNumber - 1]!}\n                onClick={() => scrollLineIntoView({line: stickyLine.lineNumber})}\n              />\n            )\n          }\n          return (\n            <CodeLine\n              key={`sticky-header-line-${stickyLine.lineNumber}`}\n              codeLineData={stickyLine}\n              stylingDirectivesLine={stickyLine.stylingDirectivesLine}\n              codeLineToSectionMap={undefined}\n              copilotAccessAllowed={false} // we're not going to show copilot buttons in the sticky lines\n              onClick={() => scrollLineIntoView({line: stickyLine.lineNumber})}\n              shouldUseInert={false}\n            />\n          )\n        })}\n      </div>\n    </Box>\n  )\n}\n\ntry{ StickyLinesHeader.displayName ||= 'StickyLinesHeader' } catch {}","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {linkButtonSx} from '@github-ui/code-view-shared/utilities/styles'\nimport type {PanelType} from '@github-ui/code-view-types'\nimport type {FileReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport CopilotChatButton from '@github-ui/copilot-code-chat/CopilotCodeLinesMenu'\nimport type {CopilotInfo} from '@github-ui/copilot-common-types'\nimport {CopilotPopover} from '@github-ui/copilot-popover'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {Link} from '@github-ui/react-core/link'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport {ScreenReaderHeading} from '@github-ui/screen-reader-heading'\nimport {ssrSafeLocation} from '@github-ui/ssr-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {useToastContext} from '@github-ui/toast/ToastContext'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {\n  CodeSquareIcon,\n  CopyIcon,\n  DownloadIcon,\n  KebabHorizontalIcon,\n  PencilIcon,\n  TriangleDownIcon,\n} from '@primer/octicons-react'\nimport {\n  ActionList,\n  ActionMenu,\n  Box,\n  ButtonGroup,\n  type ButtonProps,\n  IconButton,\n  Link as PrimerLink,\n  LinkButton,\n  Tooltip,\n} from '@primer/react'\nimport {useMemo, useRef} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {copyText} from '../../../github/command-palette/copy'\nimport {useAlertTooltip} from '../../../react-shared/hooks/use-alert-tooltip'\nimport {useFindInFileOpen} from '../../contexts/FindInFileOpenContext'\nimport {useCurrentBlame} from '../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../hooks/CurrentBlob'\nimport {BlobDisplayType, useBlobRendererType} from '../../hooks/use-blob-renderer-type'\nimport {useCopyRawBlobContents} from '../../hooks/use-copy-raw-blob-contents'\nimport {setKeyboardNavUsed} from '../../hooks/use-cursor-navigation'\nimport {trackStickyHeader, useStickyHeaderHeight} from '../../hooks/use-sticky-header-height'\nimport {useStickyObserver} from '../../hooks/use-sticky-observer'\nimport {useUpdatePanelExpandPreferences} from '../../hooks/use-update-panel-expand-preferences'\nimport {type CopyState, getCopyStateUI} from '../../utilities/Copy'\nimport {textAreaId} from '../../utilities/lines'\nimport AccessibleIconButton from '../AccessibleIconButton'\nimport type {CodeNavData} from '../blob/BlobContent/BlobContent'\nimport type {CodeLineData} from '../blob/BlobContent/Code/hooks/use-code-lines'\nimport FindInFilePopover from '../blob/BlobContent/CodeNav/FindInFilePopover'\nimport {ContributorAvatars} from '../Contributors'\nimport FileNameStickyHeader from './FileNameStickyHeader'\nimport BlameAgeLegend from './header-components/BlameAgeLegend'\nimport BlobTabButtons from './header-components/BlobTabButtons'\nimport CodeSizeDetails from './header-components/CodeSizeDetails'\nimport EditMenuActionItems from './header-components/EditMenuActionItems'\nimport {qualifyRef} from './header-components/NavigationMenu'\nimport {useHasOpenWithItems} from './header-components/OpenWithActionItems'\nimport RawMenuActionItems, {downloadFile} from './header-components/RawMenuActionItems'\nimport TableOfContents from './header-components/TableOfContents'\nimport {StickyLinesHeader} from './StickyLinesHeader'\n\nexport default function BlobViewHeader({\n  openPanel,\n  setOpenPanel,\n  showTree,\n  validCodeNav,\n  treeToggleElement,\n  searchTerm,\n  setSearchTerm,\n  currentStickyLines,\n  focusedSearchResult,\n  setFocusedSearchResult,\n  searchResults,\n  searchingText,\n  stickyHeaderRef,\n  copilotInfo,\n  colorizedLines,\n}: {\n  openPanel: PanelType | undefined\n  setOpenPanel: (panel: PanelType | undefined) => void\n  showTree: boolean\n  validCodeNav: boolean\n  treeToggleElement: JSX.Element\n  currentStickyLines: Map<number, CodeLineData>\n  searchTerm: string\n  setSearchTerm: (searchTerm: string) => void\n  focusedSearchResult: number | undefined\n  setFocusedSearchResult: (idx: number | undefined) => void\n  searchResults: DefinitionOrReference[]\n  searchingText: CodeNavData\n  stickyHeaderRef: React.RefObject<HTMLDivElement>\n  copilotInfo?: CopilotInfo\n  colorizedLines?: SafeHTMLString[] | null\n}) {\n  const payload = useCurrentBlob()\n  const symbolsEnabled = payload.symbolsEnabled\n  const isStickied = useStickyObserver(stickyHeaderRef)\n  const {copilotAccessAllowed, refInfo, path} = useFilesPageInfo()\n  const displayType = useBlobRendererType()\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const stickyHeaderHeight = useStickyHeaderHeight()\n  const {copyFilePathShortcut} = useShortcut()\n  const {copyPermalinkShortcut} = useShortcut()\n  const repository = useCurrentRepository()\n\n  const {githubDevUrl} = useReposAppPayload()\n  const {\n    headerInfo: {toc, onBranch, ghDesktopPath},\n    viewable,\n  } = payload\n  const hasOpenWithItem = useHasOpenWithItems(githubDevUrl, onBranch, ghDesktopPath)\n\n  const blame = useCurrentBlame()\n\n  const onCopy = useCopyRawBlobContents()\n  const {createPermalink} = useUrlCreator()\n  const {addToast} = useToastContext()\n\n  const {findInFileOpen, setFindInFileOpen} = useFindInFileOpen()\n  const rawActionsButtonRef = useRef(null)\n  const [updateTooltipMessage, clearTooltipMessage, portalTooltip] = useAlertTooltip(\n    'raw-actions-message-tooltip',\n    rawActionsButtonRef,\n    {direction: 'nw'},\n  )\n  const updateExpandPreferences = useUpdatePanelExpandPreferences()\n  const {getUrl} = useUrlCreator()\n  const blobUrl = getUrl()\n  const [fileUrl] = useClientValue(() => window.location.origin + blobUrl, blobUrl)\n  const fileReference: FileReference = useMemo(\n    () => ({\n      type: 'file',\n      url: fileUrl,\n      path,\n      repoID: repository.id,\n      repoOwner: repository.ownerLogin,\n      repoName: repository.name,\n      ref: qualifyRef(refInfo.name, refInfo.refType ?? 'branch'),\n      commitOID: refInfo.currentOid,\n    }),\n    [\n      fileUrl,\n      path,\n      repository.id,\n      repository.ownerLogin,\n      repository.name,\n      refInfo.name,\n      refInfo.refType,\n      refInfo.currentOid,\n    ],\n  )\n\n  return (\n    <>\n      <Box\n        ref={trackStickyHeader}\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          width: '100%',\n          position: 'absolute',\n        }}\n      >\n        <div className=\"react-blob-sticky-header\">\n          <FileNameStickyHeader isStickied={isStickied} showTree={showTree} treeToggleElement={treeToggleElement} />\n        </div>\n        <Box\n          sx={{\n            pl: 2,\n            py: 2,\n            display: 'flex',\n            flex: 1,\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            backgroundColor: 'canvas.subtle',\n            border: '1px solid var(--borderColor-default, var(--color-border-default))',\n            borderRadius: isStickied ? '0px' : '6px 6px 0px 0px',\n          }}\n        >\n          <ScreenReaderHeading as=\"h2\" text=\"File metadata and controls\" />\n          <Box sx={{display: 'flex', alignItems: 'center', gap: 2, minWidth: 0}}>\n            <BlobTabButtons />\n            <CodeSizeDetails className=\"react-code-size-details-in-header\" />\n            <CopilotPopover\n              copilotInfo={copilotInfo}\n              className=\"react-code-size-details-in-header\"\n              view={blame ? 'blame' : 'preview'}\n            />\n          </Box>\n\n          <Box sx={{display: 'flex', alignItems: 'center', gap: 2, mr: 2}}>\n            {/* Copy link and permalink shortcut */}\n            {copyFilePathShortcut.hotkey && (\n              <KeyboardShortcut\n                hotkey={copyFilePathShortcut.hotkey}\n                onActivate={() => {\n                  copyText(path)\n                  // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n                  addToast({\n                    type: 'success',\n                    message: 'Path copied!',\n                  })\n                }}\n              />\n            )}\n            {copyPermalinkShortcut.hotkey && (\n              <KeyboardShortcut\n                hotkey={copyPermalinkShortcut.hotkey}\n                onActivate={() => {\n                  copyText(createPermalink({absolute: true}))\n                  // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n                  addToast({\n                    type: 'success',\n                    message: 'Permalink copied!',\n                  })\n                }}\n              />\n            )}\n\n            <CopilotChatButton\n              copilotAccessAllowed={copilotAccessAllowed}\n              messageReference={fileReference}\n              hideDropdown={true}\n              id=\"blob-view-header-copilot-icon\"\n            />\n\n            <Box className=\"react-blob-header-edit-and-raw-actions\" sx={{gap: 2}}>\n              <RawGroup onCopy={onCopy} fileName={payload.displayName} />\n              <EditMenu />\n            </Box>\n            {displayType === BlobDisplayType.Code && !blame && validCodeNav && symbolsEnabled && (\n              <SymbolsButton\n                isCodeNavOpen={openPanel === 'codeNav'}\n                setCodeNavOpen={open => {\n                  if (open) {\n                    sendRepoClickEvent('BLOB_SYMBOLS_MENU.OPEN')\n                  }\n                  localStorage.setItem('codeNavOpen', open ? 'codeNav' : '')\n                  updateExpandPreferences(null, open, null)\n                  setOpenPanel(open ? 'codeNav' : undefined)\n                }}\n                size=\"small\"\n                searchingText={searchingText.selectedText}\n              />\n            )}\n            {!blame && <TableOfContents toc={toc} openPanel={openPanel} setOpenPanel={setOpenPanel} />}\n\n            <div className=\"react-blob-header-edit-and-raw-actions-combined\">\n              {portalTooltip}\n              <ActionMenu anchorRef={rawActionsButtonRef}>\n                <ActionMenu.Anchor>\n                  {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n                  <IconButton\n                    unsafeDisableTooltip={true}\n                    icon={KebabHorizontalIcon}\n                    aria-label=\"Edit and raw actions\"\n                    className=\"js-blob-dropdown-click\"\n                    size={'small'}\n                    sx={{color: 'fg.muted'}}\n                    title=\"More file actions\"\n                    variant={'invisible'}\n                    data-testid=\"more-file-actions-button\"\n                    onBlur={clearTooltipMessage}\n                  />\n                </ActionMenu.Anchor>\n                <ActionMenu.Overlay\n                  className=\"react-blob-header-edit-and-raw-actions-combined\"\n                  width=\"small\"\n                  sx={{maxHeight: '55vh', overflowY: 'auto'}}\n                >\n                  <ActionList>\n                    {((refInfo.canEdit && viewable) || hasOpenWithItem) && (\n                      <div className=\"react-navigation-menu-edit-and-raw-actions\">\n                        <EditMenuActionItems\n                          editAllowed={refInfo.canEdit && viewable}\n                          hasOpenWithItem={hasOpenWithItem}\n                        />\n                        <ActionList.Divider />\n                      </div>\n                    )}\n                    <>\n                      <RawMenuActionItems\n                        viewable={viewable}\n                        onCopy={onCopy}\n                        name={payload.displayName}\n                        updateTooltipMessage={updateTooltipMessage}\n                        all\n                      />\n                    </>\n                  </ActionList>\n                </ActionMenu.Overlay>\n              </ActionMenu>\n            </div>\n          </Box>\n        </Box>\n        {blame && (\n          <Box\n            sx={{\n              px: '12px',\n              py: 2,\n              height: '44px',\n              display: 'flex',\n              flexShrink: 0,\n              alignItems: 'center',\n              border: '1px solid',\n              borderColor: 'border.default',\n              borderTop: 0,\n              justifyContent: 'space-between',\n              backgroundColor: 'canvas.default',\n            }}\n          >\n            <BlameAgeLegend />\n            <ContributorAvatars />\n          </Box>\n        )}\n      </Box>\n      {findInFileOpen && (\n        <FindInFilePopover\n          stickied={isStickied}\n          searchTerm={searchTerm}\n          focusedSearchResult={focusedSearchResult}\n          setFocusedSearchResult={setFocusedSearchResult}\n          setSearchTerm={setSearchTerm}\n          searchResults={searchResults}\n          onClose={() => {\n            setFindInFileOpen(false)\n            if (openPanel === 'codeNav') {\n              setSearchTerm(searchingText.selectedText)\n            }\n          }}\n        />\n      )}\n      <div>\n        {!blame && currentStickyLines.size > 0 && (\n          <Box\n            sx={{\n              zIndex: 1,\n              background: 'var(--bgColor-default, var(--color-canvas-default))',\n              top: stickyHeaderHeight,\n              position: 'absolute',\n              width: '100%',\n              border: '1px solid var(--borderColor-default, var(--color-border-default))',\n              borderBottom: 'none',\n              borderTop: 'none',\n              boxShadow: '0 1px 0 var(--borderColor-default, var(--color-border-default))',\n              tableLayout: 'fixed',\n            }}\n          >\n            <StickyLinesHeader currentStickyLines={currentStickyLines} colorizedLines={colorizedLines} />\n          </Box>\n        )}\n      </div>\n    </>\n  )\n}\n\nfunction EditMenu() {\n  const payload = useCurrentBlob()\n  const {getUrl} = useUrlCreator()\n  const {\n    refInfo: {canEdit},\n  } = useFilesPageInfo()\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {githubDevUrl} = useReposAppPayload()\n  const navigate = useNavigate()\n  const {editFileShortcut, openWithGitHubDevShortcut, openWithGitHubDevInNewWindowShortcut} = useShortcut()\n\n  const {\n    headerInfo: {editTooltip, ghDesktopPath, onBranch},\n  } = payload\n\n  const hasOpenWithItem = useHasOpenWithItems(githubDevUrl, onBranch, ghDesktopPath)\n  if (!canEdit && !hasOpenWithItem) {\n    return null\n  }\n  const onEditClick = () => {\n    navigate(getUrl({action: 'edit'}))\n  }\n  const openGitHubDevInNewWindow = () => {\n    window.open(githubDevUrl, '_blank')\n  }\n  const openInGitHubDev = () => {\n    //need the pathname because the githubDevUrl is just the root, and cut off the first '/'\n    navigate(githubDevUrl + window.location.pathname.substring(1))\n  }\n\n  return (\n    <>\n      {githubDevUrl && (\n        <>\n          <PrimerLink\n            className=\"js-github-dev-shortcut d-none\"\n            data-hotkey={openWithGitHubDevShortcut.hotkey}\n            href={githubDevUrl}\n          />\n          <DuplicateOnKeydownButton\n            buttonFocusId={textAreaId}\n            buttonHotkey={openWithGitHubDevShortcut.hotkey}\n            onlyAddHotkeyScopeButton={true}\n            onButtonClick={openInGitHubDev}\n          />\n          <PrimerLink\n            className=\"js-github-dev-new-tab-shortcut d-none\"\n            data-hotkey={openWithGitHubDevInNewWindowShortcut.hotkey}\n            href={githubDevUrl}\n            target=\"_blank\"\n          />\n          <DuplicateOnKeydownButton\n            buttonFocusId={textAreaId}\n            buttonHotkey={openWithGitHubDevInNewWindowShortcut.hotkey}\n            onlyAddHotkeyScopeButton={true}\n            onButtonClick={openGitHubDevInNewWindow}\n          />\n        </>\n      )}\n      <ButtonGroup>\n        <Tooltip direction=\"nw\" text={editTooltip}>\n          {canEdit ? (\n            // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip\n            <IconButton\n              unsafeDisableTooltip={true}\n              as={Link}\n              aria-label=\"Edit file\"\n              data-hotkey={editFileShortcut.hotkey}\n              icon={PencilIcon}\n              to={getUrl({action: 'edit'})}\n              size=\"small\"\n              // wrapping in tooltip breaks button group styles, manually override borders for now\n              sx={{...linkButtonSx, borderTopRightRadius: 0, borderBottomRightRadius: 0, borderRightWidth: 0}}\n              data-testid=\"edit-button\"\n            />\n          ) : (\n            <AccessibleIconButton\n              icon={PencilIcon}\n              // wrapping in tooltip breaks button group styles, manually override borders for now\n              sx={{borderTopRightRadius: 0, borderBottomRightRadius: 0, borderRightWidth: 0}}\n              aria-label=\"Edit file\"\n              disabled\n            />\n          )}\n        </Tooltip>\n\n        <ActionMenu onOpenChange={open => open && sendRepoClickEvent('BLOB_EDIT_DROPDOWN')}>\n          <ActionMenu.Anchor>\n            {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n            <IconButton\n              unsafeDisableTooltip={true}\n              icon={TriangleDownIcon}\n              size=\"small\"\n              aria-label=\"More edit options\"\n              data-testid=\"more-edit-button\"\n            />\n          </ActionMenu.Anchor>\n\n          <ActionMenu.Overlay align=\"end\">\n            <ActionList>\n              <EditMenuActionItems editAllowed={canEdit} hasOpenWithItem={hasOpenWithItem} />\n            </ActionList>\n          </ActionMenu.Overlay>\n        </ActionMenu>\n      </ButtonGroup>\n      {canEdit && (\n        <DuplicateOnKeydownButton\n          buttonFocusId={textAreaId}\n          buttonHotkey={'e,Shift+E'}\n          onlyAddHotkeyScopeButton={true}\n          onButtonClick={onEditClick}\n        />\n      )}\n    </>\n  )\n}\n\nfunction RawGroup({onCopy, fileName}: {onCopy: () => Promise<CopyState>; fileName: string}) {\n  const {viewRawContentShortcut, copyRawContentShortcut, downloadRawContentShortcut} = useShortcut()\n  const {\n    renderImageOrRaw,\n    renderedFileInfo,\n    viewable,\n    image,\n    rawBlobUrl,\n    headerInfo: {isGitLfs: isLfs},\n  } = useCurrentBlob()\n  const navigate = useNavigate()\n  const {addToast} = useToastContext()\n  const copyButtonRef = useRef(null)\n  const [updateTooltipMessage, clearTooltipMessage, portalTooltip] = useAlertTooltip(\n    'raw-copy-message-tooltip',\n    copyButtonRef,\n  )\n  const isOnlyPreviewable = !isLfs && ((renderedFileInfo && !viewable) || image)\n\n  const downloadRawFile = async () => {\n    await downloadFile(rawBlobUrl, fileName)\n  }\n  const navToRaw = () => navigate(rawBlobUrl)\n  const copyFile = async () => {\n    const result = await onCopy()\n    const {ariaLabel} = getCopyStateUI(result)\n    updateTooltipMessage(ariaLabel)\n  }\n\n  const lfsDownloadUrl = new URL(rawBlobUrl, ssrSafeLocation.origin)\n  lfsDownloadUrl.searchParams.set('download', '')\n  const downloadButtonProps = {\n    ['aria-label']: 'Download raw content',\n    icon: DownloadIcon,\n    size: 'small',\n    onClick: async () => {\n      if (!isLfs) {\n        await downloadFile(rawBlobUrl, fileName)\n      }\n    },\n    ['data-testid']: 'download-raw-button',\n    ['data-hotkey']: downloadRawContentShortcut.hotkey,\n    // wrapping in tooltip breaks button group styles, manually override borders for now\n    sx: {borderTopLeftRadius: 0, borderBottomLeftRadius: 0},\n  } as const\n\n  return isOnlyPreviewable ? (\n    <>\n      <Tooltip aria-label=\"Download raw file\">\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          aria-label=\"Download raw content\"\n          icon={DownloadIcon}\n          size=\"small\"\n          onClick={downloadRawFile}\n          data-testid=\"download-raw-button\"\n          data-hotkey={downloadRawContentShortcut.hotkey}\n        />\n      </Tooltip>\n      <DuplicateOnKeydownButton\n        buttonTestLabel=\"download-raw-button-shortcut\"\n        buttonFocusId={textAreaId}\n        buttonHotkey={downloadRawContentShortcut.hotkey}\n        onlyAddHotkeyScopeButton={true}\n        onButtonClick={downloadRawFile}\n      />\n    </>\n  ) : (\n    <>\n      <ButtonGroup>\n        <LinkButton\n          href={rawBlobUrl}\n          download={renderImageOrRaw ? 'true' : undefined}\n          size=\"small\"\n          sx={{linkButtonSx, px: 2}}\n          data-testid=\"raw-button\"\n          data-hotkey={viewRawContentShortcut.hotkey}\n        >\n          Raw\n        </LinkButton>\n        {!isLfs && (\n          <>\n            {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n            <IconButton\n              unsafeDisableTooltip={true}\n              ref={copyButtonRef}\n              aria-label=\"Copy raw content\"\n              icon={CopyIcon}\n              size=\"small\"\n              onFocus={() => updateTooltipMessage('Copy raw file')}\n              onMouseEnter={() => updateTooltipMessage('Copy raw file')}\n              onMouseLeave={clearTooltipMessage}\n              onClick={copyFile}\n              data-testid=\"copy-raw-button\"\n              data-hotkey={copyRawContentShortcut.hotkey}\n              onBlur={clearTooltipMessage}\n            />\n            {portalTooltip}\n          </>\n        )}\n        <Tooltip aria-label=\"Download raw file\">\n          {isLfs ? (\n            // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip\n            <IconButton\n              unsafeDisableTooltip={true}\n              as=\"a\"\n              data-turbo=\"false\"\n              href={lfsDownloadUrl.toString()}\n              {...downloadButtonProps}\n            />\n          ) : (\n            // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip\n            <IconButton unsafeDisableTooltip={true} {...downloadButtonProps} />\n          )}\n        </Tooltip>\n      </ButtonGroup>\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={viewRawContentShortcut.hotkey}\n        buttonTestLabel=\"raw-button-shortcut\"\n        onlyAddHotkeyScopeButton={true}\n        onButtonClick={navToRaw}\n      />\n      {!isLfs && (\n        <>\n          <DuplicateOnKeydownButton\n            buttonTestLabel=\"copy-raw-button-shortcut\"\n            buttonFocusId={textAreaId}\n            buttonHotkey={copyRawContentShortcut.hotkey}\n            onlyAddHotkeyScopeButton={true}\n            onButtonClick={async () => {\n              const result = await onCopy()\n              const {ariaLabel, content} = getCopyStateUI(result)\n              // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n              addToast({\n                message: ariaLabel,\n                icon: content,\n              })\n            }}\n          />\n          <DuplicateOnKeydownButton\n            buttonTestLabel=\"download-raw-button-shortcut\"\n            buttonFocusId={textAreaId}\n            buttonHotkey={downloadRawContentShortcut.hotkey}\n            onlyAddHotkeyScopeButton={true}\n            onButtonClick={async () => {\n              await downloadFile(rawBlobUrl, fileName)\n            }}\n          />\n        </>\n      )}\n    </>\n  )\n}\n\nfunction SymbolsButton({\n  isCodeNavOpen,\n  setCodeNavOpen,\n  size,\n  searchingText,\n}: {\n  isCodeNavOpen: boolean\n  setCodeNavOpen: (isOpen: boolean) => void\n  size?: ButtonProps['size']\n  searchingText: string\n}) {\n  const {toggleSymbolsShortcut} = useShortcut()\n  const shouldShowIndicator = !useCodeViewOptions().openSymbolsOption.enabled && !isCodeNavOpen\n  const toggleCodeNav = () => {\n    setKeyboardNavUsed(true)\n    setCodeNavOpen(!isCodeNavOpen)\n  }\n\n  return (\n    <Tooltip direction=\"nw\" text={isCodeNavOpen ? 'Close symbols panel' : 'Open symbols panel'}>\n      {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n      <IconButton\n        unsafeDisableTooltip={true}\n        aria-label=\"Symbols\"\n        aria-pressed={isCodeNavOpen}\n        aria-expanded={isCodeNavOpen}\n        aria-controls=\"symbols-pane\"\n        icon={CodeSquareIcon}\n        className={shouldShowIndicator && searchingText ? 'react-button-with-indicator' : ''}\n        data-hotkey={toggleSymbolsShortcut.hotkey}\n        onClick={toggleCodeNav}\n        variant=\"invisible\"\n        sx={{color: 'fg.muted', position: 'relative'}}\n        data-testid=\"symbols-button\"\n        id=\"symbols-button\"\n        size={size}\n      />\n    </Tooltip>\n  )\n}\n\nfunction KeyboardShortcut({hotkey, onActivate}: {hotkey: string; onActivate: () => void}) {\n  return <DuplicateOnKeydownButton buttonFocusId={textAreaId} buttonHotkey={hotkey} onButtonClick={onActivate} />\n}\n\ntry{ BlobViewHeader.displayName ||= 'BlobViewHeader' } catch {}\ntry{ EditMenu.displayName ||= 'EditMenu' } catch {}\ntry{ RawGroup.displayName ||= 'RawGroup' } catch {}\ntry{ SymbolsButton.displayName ||= 'SymbolsButton' } catch {}\ntry{ KeyboardShortcut.displayName ||= 'KeyboardShortcut' } catch {}","import type {CodeNavigationInfo, DefinitionsResult, ReferencesResult} from '@github-ui/code-nav'\nimport {useEffect, useState} from 'react'\n\ninterface CodeNavResults {\n  definitions: DefinitionsResult | undefined\n  localReferences: ReferencesResult | undefined\n  crossReferences: ReferencesResult | undefined\n  error: boolean | undefined\n}\n\nconst emptyResults: CodeNavResults = {\n  definitions: undefined,\n  localReferences: undefined,\n  crossReferences: undefined,\n  error: false,\n}\n\nexport function useCodeNav(codeNavInfo: CodeNavigationInfo, text: string, row: number, column: number): CodeNavResults {\n  const [results, setResults] = useState<CodeNavResults>(emptyResults)\n\n  useEffect(() => {\n    ;(async () => {\n      // Do not send a request if we are not pointing to a valid location\n      if (row < 0 || column < 0) return\n\n      // Fetch defs, local refs, and cross refs in parallel.\n      // Don't mark loading complete until all 3 have returned.\n      const {definitions, localReferences, crossReferences, setLoading} = codeNavInfo.getDefinitionsAndReferences(\n        text,\n        row,\n        column,\n      )\n\n      setResults(emptyResults)\n      try {\n        // Load and show defs first\n        const defs = await definitions\n        setResults({definitions: defs, localReferences: undefined, crossReferences: undefined, error: false})\n        setLoading(false)\n\n        // Then await the others\n        const [localRefs, crossRefs] = await Promise.all([localReferences, crossReferences])\n        setResults({definitions: defs, localReferences: localRefs, crossReferences: crossRefs, error: false})\n      } catch (e) {\n        setResults({...emptyResults, error: true})\n      } finally {\n        setLoading(false)\n      }\n    })()\n  }, [codeNavInfo, text, row, column])\n\n  return results\n}\n","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {Link} from '@github-ui/react-core/link'\nimport {SafeHTMLText} from '@github-ui/safe-html'\nimport {Box, Link as PrimerLink} from '@primer/react'\nimport {useEffect, useState} from 'react'\n\nimport {useCodeHTML} from '../Code/SyntaxHighlightedLine'\nimport {HighlightedOverlay} from '../HighlightedOverlay'\n\nexport function CodeNavCell({\n  reference,\n  isHighlighted,\n  href,\n  onClick,\n  role,\n  ariaLevel,\n  symbol,\n  index,\n  focusElement,\n}: {\n  reference: DefinitionOrReference\n  isHighlighted: boolean\n  href: string\n  onClick?: () => void\n  role?: string\n  ariaLevel?: number\n  symbol: string\n  index?: number\n  focusElement?: boolean\n}) {\n  const [offsetWidth, setOffsetWidth] = useState<number | null>(null)\n  const sx = isHighlighted\n    ? {\n        background: 'var(--bgColor-attention-muted, var(--color-attention-subtle))',\n        boxShadow: 'inset 2px 0 0 var(--bgColor-attention-emphasis, var(--color-attention-fg))',\n      }\n    : {}\n\n  useEffect(() => {\n    if (focusElement) {\n      const element = document.getElementById(`find-in-file-item-${index}`)\n      if (element) {\n        element.focus()\n      }\n    }\n  }, [focusElement, index])\n\n  const codeHtml = useCodeHTML(reference.highlightedText, reference.stylingDirectives, reference.bodyText)\n\n  return (\n    <PrimerLink\n      as={Link}\n      className=\"blob-code blob-code-inner\"\n      to={href}\n      role={role}\n      sx={{\n        display: 'block',\n        p: 0,\n        fontWeight: 400,\n        fontSize: '12px',\n        ':hover:not([disabled])': {bg: 'canvas.default'},\n        ':hover': {textDecoration: 'none'},\n        '[data-component=\"text\"]': {gridArea: 'auto'},\n        gridTemplateAreas: 'text',\n        whiteSpace: 'break-spaces',\n      }}\n      onClick={ev => {\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n        if (!ev.ctrlKey && !ev.metaKey) {\n          onClick?.()\n        }\n      }}\n      onSelect={onClick}\n      id={`find-in-file-item-${index}`}\n      aria-current={isHighlighted ? 'location' : undefined}\n      aria-level={ariaLevel}\n      onKeyDown={e => {\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n        if (e.key === 'ArrowDown') {\n          focusSibling('nextElementSibling')\n          e.preventDefault()\n          // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n        } else if (e.key === 'ArrowUp') {\n          focusSibling('previousElementSibling')\n          e.preventDefault()\n        }\n      }}\n    >\n      <Box\n        sx={{\n          p: 1,\n          py: '5px',\n          ...sx,\n        }}\n      >\n        <div className=\"d-flex\">\n          <Box className=\"text-small blob-num color-fg-muted\" sx={{width: 'auto', minWidth: 'auto'}}>\n            {reference.lineNumber}\n          </Box>\n          <Box sx={{overflow: 'hidden', whiteSpace: 'pre', position: 'relative'}}>\n            {offsetWidth !== null && (\n              <div id={`offset-${reference.href(false)}`} style={{marginLeft: -offsetWidth}}>\n                {symbol.length > 0 && (\n                  <HighlightedOverlay\n                    symbols={[reference]}\n                    lineNumber={reference.lineNumber}\n                    sx={{overflow: 'initial'}}\n                    isNotUsingWhitespace={true}\n                  />\n                )}\n                <SafeHTMLText\n                  sx={{\n                    position: 'relative',\n                    width: '100%',\n                    overflow: 'hidden',\n                  }}\n                  html={codeHtml}\n                  aria-current={isHighlighted ? 'location' : undefined}\n                />\n              </div>\n            )}\n            {/* This element is used to measure precise offset in px, as it inherits same text styles as the main content */}\n            <span\n              ref={el => setOffsetWidth(el?.offsetWidth ?? null)}\n              style={{visibility: 'hidden', position: 'absolute', whiteSpace: 'pre'}}\n            >\n              {getOffsetString(symbol, reference)}\n            </span>\n          </Box>\n        </div>\n      </Box>\n    </PrimerLink>\n  )\n}\n\nconst TOTAL_ALLOWED_CHARS = 34\nexport function getOffsetString(searchTerm: string, reference: DefinitionOrReference) {\n  let canFitLength = TOTAL_ALLOWED_CHARS - searchTerm.length\n  const substringBeforeMatch = reference.bodyText.slice(0, reference.ident.start.column)\n  if (canFitLength <= 0) {\n    // Fully offset to fit the match\n    return substringBeforeMatch\n  }\n\n  // Maximize spacing based on the string after match\n  const substringAfterMatch = reference.bodyText.slice(reference.ident.start.column + searchTerm.length).trimEnd()\n  canFitLength = Math.max(canFitLength / 2, canFitLength - substringAfterMatch.length)\n  const wordsOffset = substringBeforeMatch.split(' ')\n  const fit: string[] = []\n\n  for (let index = wordsOffset.length - 1; index >= 0; index--) {\n    const word = wordsOffset[index]!\n    fit.unshift(word)\n\n    if (fit.join(' ').length <= canFitLength) {\n      wordsOffset.pop()\n    } else {\n      break\n    }\n  }\n\n  const offset = wordsOffset.join(' ')\n  // If fitting strings starts from the whitespace(s) or tabs, add these characters to the offset as well.\n  const whitespaceOffset = (substringBeforeMatch.slice(offset.length).match(/^[ \\t]*/) || [])[0] ?? ''\n\n  return `${wordsOffset.join(' ')}${whitespaceOffset}`\n}\n\nexport function focusSibling(key: 'nextElementSibling' | 'previousElementSibling') {\n  const {activeElement} = document\n  const elementSibling = activeElement?.[key] as HTMLInputElement | null\n  if (elementSibling) {\n    if (elementSibling.role !== 'treeitem' && key === 'nextElementSibling') {\n      // There is a group element that we don't want to focus between\n      // the first level (expandable) and the second level\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n      const treeItem = elementSibling.querySelector('[role=\"treeitem\"]') as HTMLElement | null\n      treeItem?.focus()\n    } else {\n      elementSibling.focus()\n    }\n  }\n}\n\ntry{ CodeNavCell.displayName ||= 'CodeNavCell' } catch {}","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {type Repository, useCurrentRepository} from '@github-ui/current-repository'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {ChevronDownIcon, ChevronRightIcon, FoldIcon, UnfoldIcon} from '@primer/octicons-react'\nimport {Box, Button, CounterLabel, Octicon, Truncate} from '@primer/react'\nimport React, {useCallback, useEffect, useState} from 'react'\n\nimport {useCurrentBlame} from '../../../../hooks/CurrentBlame'\nimport {useKeyboardNavUsed} from '../../../../hooks/use-cursor-navigation'\nimport {textAreaId} from '../../../../utilities/lines'\nimport {CodeNavCell, focusSibling} from './CodeNavCell'\n\nconst MaxReferences = 10\n\nexport interface CodeNavFileInformationProps {\n  results: DefinitionOrReference[]\n  repo: Repository\n  filePath: string\n  highlightedIndex?: number\n  isDefinition?: boolean\n  onClick?: (index: number) => void\n  offset: number\n  initiallyExpanded: boolean\n  enableExpandCollapse: boolean\n  symbol: string\n  setFocusOnFile?: boolean\n}\n\nexport function CodeNavFileInformation({\n  results,\n  repo,\n  filePath,\n  highlightedIndex,\n  isDefinition,\n  onClick,\n  // The offset counts how many references are above this one\n  offset,\n  initiallyExpanded,\n  enableExpandCollapse,\n  symbol,\n  setFocusOnFile,\n}: CodeNavFileInformationProps) {\n  const hasBlame = !!useCurrentBlame()\n  const [isExpanded, setIsExpanded] = useState(initiallyExpanded)\n  const currentRepo = useCurrentRepository()\n  const {path: currentPath} = useFilesPageInfo()\n  const firstFileRef = React.useRef<HTMLDivElement>(null)\n\n  const [showAllRefs, setShowAllRefs] = useState(false)\n\n  const keyboardNavUsed = useKeyboardNavUsed()\n\n  const initialVisibleRefs = results.slice(0, MaxReferences)\n  const hiddenRefs = results.length > MaxReferences ? results.slice(MaxReferences) : []\n\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const isFromCurrentRepo = currentRepo.ownerLogin === repo.ownerLogin && currentRepo.name === repo.name\n\n  const onKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLAnchorElement | HTMLButtonElement | HTMLDivElement>) => {\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (e.key === 'Enter' || e.key === ' ') {\n        setIsExpanded(!isExpanded)\n        e.preventDefault()\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      } else if (e.key === 'ArrowLeft') {\n        setIsExpanded(false)\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      } else if (e.key === 'ArrowRight') {\n        setIsExpanded(true)\n        if (isExpanded) {\n          firstFileRef.current?.focus()\n        }\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      } else if (e.key === 'ArrowDown') {\n        focusSibling('nextElementSibling')\n        e.preventDefault()\n        // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      } else if (e.key === 'ArrowUp') {\n        focusSibling('previousElementSibling')\n        e.preventDefault()\n      }\n    },\n    [isExpanded],\n  )\n\n  useEffect(() => {\n    if (highlightedIndex && highlightedIndex >= MaxReferences + offset) {\n      setShowAllRefs(true)\n    }\n  }, [highlightedIndex, offset])\n\n  useEffect(() => {\n    if (setFocusOnFile && keyboardNavUsed) {\n      firstFileRef.current?.focus()\n    }\n  }, [setFocusOnFile, keyboardNavUsed])\n\n  useEffect(() => {\n    //this effect will always run after the above one, so we will focus back to the text area if necessary\n    if (!keyboardNavUsed) {\n      document.getElementById(textAreaId)?.focus()\n    }\n  }, [keyboardNavUsed])\n\n  const groupId = `${filePath}-${isDefinition ? 'definition' : 'reference'}-group`\n\n  return (\n    <div key={filePath}>\n      <Box\n        sx={{\n          fontSize: 0,\n          px: 3,\n          py: 2,\n          display: 'flex',\n          justifyContent: 'space-between',\n          borderTop: '1px solid',\n          borderColor: 'border.muted',\n          cursor: enableExpandCollapse ? 'pointer' : 'auto',\n        }}\n        onClick={enableExpandCollapse ? () => setIsExpanded(!isExpanded) : undefined}\n        onKeyDown={onKeyDown}\n        ref={firstFileRef}\n      >\n        <Box sx={{display: 'flex'}}>\n          {isDefinition && currentRepo.id !== repo.id && (\n            <>\n              <GitHubAvatar square src={repo.ownerAvatar} sx={{mr: 2, backgroundColor: '#FFFFFF'}} size={16} />\n              <Box sx={{fontWeight: '600', mr: 1}}>{repo.name}</Box>\n            </>\n          )}\n          <Box\n            as=\"button\"\n            aria-expanded={isExpanded}\n            aria-controls={groupId}\n            sx={{\n              fontWeight: '400',\n              color: 'fg.muted',\n              display: 'flex',\n              flexDirection: 'row',\n              backgroundColor: 'canvas.default',\n              border: 'none',\n              padding: 0,\n            }}\n          >\n            {enableExpandCollapse && (\n              <Octicon aria-hidden=\"true\" icon={isExpanded ? ChevronDownIcon : ChevronRightIcon} />\n            )}\n            {/* display table to fill and fix to 100% content - needed for display table-cell */}\n            <Box sx={{display: 'table', width: '100%', tableLayout: 'fixed'}}>\n              <Truncate\n                aria-label={`${isDefinition ? 'Definitions' : 'References'} in ${\n                  filePath !== currentPath ? filePath : 'this file'\n                }`}\n                title={filePath}\n                sx={{\n                  // Truncate the start of the path instead of the end\n                  direction: 'rtl',\n                  maxWidth: '100%',\n                  pl: 2,\n                  // used to allow for responsive truncation so we dont horizontal overflow\n                  display: 'table-cell',\n                  // display table + rtl will text align left, force left alignment\n                  textAlign: 'left',\n                }}\n              >\n                &lrm;{!isFromCurrentRepo || filePath !== currentPath ? filePath : 'In this file'}&lrm;\n              </Truncate>\n            </Box>\n          </Box>\n        </Box>\n        {results && !isExpanded && <CounterLabel sx={{ml: 2}}>{results.length}</CounterLabel>}\n      </Box>\n      {isExpanded && (\n        <Box\n          aria-label={`Results in ${filePath !== currentPath ? filePath : 'this file'}`}\n          id={groupId}\n          sx={{overflowX: 'hidden'}}\n          role=\"group\"\n          className={'code-nav-file-information'}\n        >\n          {initialVisibleRefs.map((reference, i) => {\n            return (\n              <CodeNavCell\n                key={`codeNavigation${i + offset}`}\n                reference={reference}\n                isHighlighted={highlightedIndex === i + offset}\n                href={reference.href(hasBlame)}\n                onClick={() => {\n                  if (onClick) onClick(i + offset)\n                  sendRepoClickEvent('BLOB_SYMBOLS_MENU.SYMBOL_DEFINITION_CLICK')\n                }}\n                symbol={symbol}\n                index={i + offset}\n              />\n            )\n          })}\n\n          {showAllRefs &&\n            hiddenRefs.map((reference, i) => {\n              return (\n                <CodeNavCell\n                  key={`codeNavigation${i + offset + MaxReferences}`}\n                  reference={reference}\n                  isHighlighted={highlightedIndex === i + offset + MaxReferences}\n                  href={reference.href(hasBlame)}\n                  onClick={() => {\n                    if (onClick) onClick(i + offset + MaxReferences)\n                    sendRepoClickEvent('BLOB_SYMBOLS_MENU.SYMBOL_DEFINITION_CLICK')\n                  }}\n                  symbol={symbol}\n                  index={i + offset + MaxReferences}\n                  focusElement={i === 0}\n                />\n              )\n            })}\n\n          {hiddenRefs.length > 0 && (\n            <Box sx={{px: 3, pt: 1, pb: 2, fontSize: 0, color: 'fg.muted', borderColor: 'border.muted'}}>\n              <Button\n                leadingVisual={showAllRefs ? FoldIcon : UnfoldIcon}\n                onClick={() => setShowAllRefs(!showAllRefs)}\n                sx={{color: 'fg.default'}}\n                variant=\"invisible\"\n                size=\"small\"\n                aria-selected={false}\n              >\n                {showAllRefs ? 'Show less' : 'Show more'}\n              </Button>\n            </Box>\n          )}\n        </Box>\n      )}\n    </div>\n  )\n}\n\ntry{ CodeNavFileInformation.displayName ||= 'CodeNavFileInformation' } catch {}","import type {CodeReference, CodeSymbol, DefinitionOrReference} from '@github-ui/code-nav'\nimport {useMemo} from 'react'\n\nimport {CodeNavFileInformation, type CodeNavFileInformationProps} from './CodeNavFileInformation'\n\nexport function CodeNavInfoPanelData({\n  definitions,\n  references,\n  highlightedIndex,\n  initiallyExpanded,\n  enableExpandCollapse,\n  onClick,\n  symbol,\n  setFocusOnFile,\n}: {\n  definitions?: CodeSymbol[]\n  references?: CodeReference[]\n  highlightedIndex?: CodeNavFileInformationProps['highlightedIndex']\n  isDefinition?: boolean\n  initiallyExpanded: CodeNavFileInformationProps['initiallyExpanded']\n  enableExpandCollapse: CodeNavFileInformationProps['enableExpandCollapse']\n  onClick?: CodeNavFileInformationProps['onClick']\n  symbol: CodeNavFileInformationProps['symbol']\n  setFocusOnFile?: CodeNavFileInformationProps['setFocusOnFile']\n}) {\n  const pathGrouped = useMemo(() => {\n    const grouped: {[key: string]: DefinitionOrReference[]} = {}\n\n    if (definitions) {\n      for (const def of definitions) {\n        const key = def.pathKey()\n        if (!grouped[key]) {\n          grouped[key] = []\n        }\n        grouped[key].push(def)\n      }\n    } else if (references) {\n      for (const ref of references) {\n        const key = ref.pathKey()\n        if (!grouped[key]) {\n          grouped[key] = []\n        }\n        grouped[key].push(ref)\n      }\n    }\n\n    return grouped\n  }, [definitions, references])\n\n  let offset = 0\n\n  return (\n    <>\n      {Object.keys(pathGrouped).map((key, i) => {\n        const results = pathGrouped[key]!\n        const info = (\n          <CodeNavFileInformation\n            repo={results[0]!.repo}\n            filePath={results[0]!.path}\n            results={results}\n            key={key}\n            highlightedIndex={highlightedIndex}\n            isDefinition={definitions !== undefined && definitions.length > 0}\n            onClick={onClick}\n            offset={offset}\n            initiallyExpanded={initiallyExpanded}\n            enableExpandCollapse={enableExpandCollapse}\n            symbol={symbol}\n            setFocusOnFile={i === 0 && setFocusOnFile}\n          />\n        )\n        offset += results.length\n        return info\n      })}\n    </>\n  )\n}\n\ntry{ CodeNavInfoPanelData.displayName ||= 'CodeNavInfoPanelData' } catch {}","import type {CodeNavigationInfo, CodeSymbol, DefinitionOrReference} from '@github-ui/code-nav'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {SymbolChangedEvent} from '@github-ui/copilot-chat/utils/copilot-chat-events'\nimport type {CopilotChatReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport CopilotChatButton from '@github-ui/copilot-code-chat/CopilotCodeLinesMenu'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {codeNavSearchPath} from '@github-ui/paths'\nimport {qualifyRef} from '@github-ui/ref-utils'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {\n  ArrowLeftIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n  FoldIcon,\n  SearchIcon,\n  UnfoldIcon,\n  XIcon,\n} from '@primer/octicons-react'\nimport {\n  Box,\n  type BoxProps,\n  Button,\n  Heading,\n  IconButton,\n  Link as PrimerLink,\n  Octicon,\n  Spinner,\n  Text,\n  Truncate,\n} from '@primer/react'\nimport {lazy, type PropsWithChildren, Suspense, useEffect, useMemo, useRef, useState} from 'react'\n\nimport {useCurrentBlame} from '../../../../hooks/CurrentBlame'\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useCodeNav} from '../../../../hooks/use-code-nav'\nimport {useFocusSymbolPane} from '../../../../hooks/use-focus-symbol-pane'\nimport {scrollLineIntoView} from '../../../../hooks/use-scroll-line-into-view'\nimport {CodeNavInfoPanelData} from './CodeNavInfoPanelData'\nimport {SymbolIndicator} from './SymbolIndicator'\n\nconst MaxCrossReferenceFiles = 5\nconst ScrollMarks = lazy(() => import('./ScrollMarks'))\n\nexport function CodeNavSymbolDetails({\n  codeNavInfo,\n  selectedText,\n  lineNumber,\n  offset,\n  onClose,\n  onBackToSymbol,\n  onSymbolSelect,\n  isLoading,\n  setSearchResults,\n  setFocusedSearchResult,\n}: {\n  codeNavInfo: CodeNavigationInfo\n  selectedText: string\n  lineNumber: number\n  offset: number\n  onClose: () => void\n  onBackToSymbol: () => void\n  onSymbolSelect: (sym: CodeSymbol) => void\n  isLoading: boolean\n  setSearchResults: (results: DefinitionOrReference[]) => void\n  setFocusedSearchResult: (idx: number | undefined) => void\n}) {\n  const {findNextShortcut, findPrevShortcut} = useShortcut()\n  const hasBlame = !!useCurrentBlame()\n  const {\n    definitions: defsResponse,\n    localReferences: localRefsResponse,\n    crossReferences: crossRefsResponse,\n    error,\n  } = useCodeNav(codeNavInfo, selectedText, lineNumber, offset)\n  const {copilotAccessAllowed} = useFilesPageInfo()\n  const [highlightedIndex, setHighlightedIndex] = useState(-1)\n  const [showAllCrossRefs, setShowAllCrossRefs] = useState(false)\n  const repo = useCurrentRepository()\n  const definitions = useMemo(() => defsResponse?.definitions || [], [defsResponse?.definitions])\n  const references = useMemo(() => localRefsResponse?.references || [], [localRefsResponse])\n  const crossReferences = useMemo(() => crossRefsResponse?.references || [], [crossRefsResponse?.references])\n  const startReferenceIndex = definitions.length\n  const allReferencesCount = references.length + crossReferences.length\n  const nav = useNavigate()\n\n  const currentSymbol = definitions.length > 0 ? definitions[0] : undefined\n\n  // limit cross references to 5 files\n  const crossRefFiles = crossReferences.map(r => r.path).filter((v, i, a) => a.indexOf(v) === i)\n  const shownReferences = showAllCrossRefs ? allReferencesCount : references.length\n\n  const backToSymbolsRef = useRef<HTMLButtonElement>(null)\n\n  const {language, languageID} = useCurrentBlob()\n  const messageReference: CopilotChatReference = useMemo(\n    () => ({\n      type: 'symbol',\n      kind: 'codeNavSymbol',\n      name: selectedText,\n      languageID,\n      languageName: language,\n      codeNavDefinitions: definitions.map(d => ({\n        ident: d.ident,\n        extent: d.extent,\n        kind: d.kind.fullName,\n        fullyQualifiedName: d.fullyQualifiedName,\n        ref: getRefName(d.refInfo),\n        commitOID: d.refInfo.currentOid,\n        repoID: d.repo.id,\n        repoName: d.repo.name,\n        repoOwner: d.repo.ownerLogin,\n        path: d.path,\n      })),\n      codeNavReferences: [\n        ...references.map(r => ({\n          ident: r.ident,\n          path: r.path,\n          ref: getRefName(r.refInfo),\n          commitOID: r.refInfo.currentOid,\n          repoID: r.repo.id,\n          repoName: r.repo.name,\n          repoOwner: r.repo.ownerLogin,\n        })),\n        ...crossReferences.map(c => ({\n          ident: c.ident,\n          path: c.path,\n          ref: getRefName(c.refInfo),\n          commitOID: c.refInfo.currentOid,\n          repoID: c.repo.id,\n          repoName: c.repo.name,\n          repoOwner: c.repo.ownerLogin,\n        })),\n      ],\n    }),\n    [crossReferences, definitions, language, languageID, references, selectedText],\n  )\n\n  useEffect(() => {\n    // only include definition if its in the same file\n    if (currentSymbol && currentSymbol.repo.name === codeNavInfo.repo.name && currentSymbol.path === codeNavInfo.path) {\n      setSearchResults([currentSymbol, ...references])\n    } else {\n      setSearchResults(references)\n    }\n    setFocusedSearchResult(undefined)\n    window.dispatchEvent(new SymbolChangedEvent(messageReference))\n  }, [\n    codeNavInfo.path,\n    codeNavInfo.repo.name,\n    currentSymbol,\n    references,\n    selectedText,\n    setSearchResults,\n    setFocusedSearchResult,\n    messageReference,\n  ])\n\n  useFocusSymbolPane(focusSymbolSearch => {\n    if (!focusSymbolSearch) {\n      backToSymbolsRef.current?.focus()\n    }\n  })\n\n  // When the selected symbol changes, reset the highlighted index\n  useEffect(() => {\n    setHighlightedIndex(-1)\n  }, [selectedText])\n\n  useEffect(() => {\n    setShowAllCrossRefs(crossRefFiles.length > 0 && crossRefFiles.length <= MaxCrossReferenceFiles)\n  }, [crossRefFiles.length])\n\n  // We should not use navigation on the links.\n  // Using href and programmatic navigation breaks nav history on Firefox: https://github.com/github/repos/issues/3462\n  const onHighlight = ({index, direction, navigate}: {index?: number; direction?: number; navigate?: boolean}) => {\n    // If we are directly setting the index, just do that\n    if (index !== undefined) {\n      const currentRef = index >= startReferenceIndex ? references[index - startReferenceIndex]! : definitions[index]!\n      setHighlightedIndex(index)\n      if (navigate) {\n        nav(currentRef.href(hasBlame))\n      }\n\n      // Note: we need this \"backdoor\" mechanism of scrolling to the selected line, since\n      // just setting the URL won't scroll the line into view unless the URL actually changes.\n      scrollLineIntoView({line: currentRef.lineNumber, column: currentRef.ident.start.column})\n    }\n\n    if (direction !== undefined) {\n      // Account for the fact that the definitions are at the top of the list\n      const newIndex = Math.max(startReferenceIndex, highlightedIndex + direction)\n      const highlightedSymbol = references[newIndex - startReferenceIndex]\n      if (newIndex < references.length + definitions.length && highlightedSymbol) {\n        setHighlightedIndex(newIndex)\n        if (navigate) {\n          nav(highlightedSymbol.href(hasBlame))\n        }\n        scrollLineIntoView({line: highlightedSymbol.lineNumber, column: highlightedSymbol.ident.start.column})\n      }\n    }\n  }\n\n  return (\n    <div>\n      <Box\n        as=\"h2\"\n        sx={{\n          fontSize: '12px',\n          py: 2,\n          px: 3,\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n        role=\"group\"\n        aria-roledescription=\"Symbol Navigation Details\"\n      >\n        <Button\n          onClick={onBackToSymbol}\n          onSelect={onBackToSymbol}\n          id=\"back-to-all-symbols\"\n          aria-label=\"Back to All Symbols\"\n          ref={backToSymbolsRef}\n          variant=\"invisible\"\n          sx={{\n            order: 1,\n            pr: 3,\n            pl: 0,\n            px: 0,\n            ':hover:not([disabled])': {bg: 'canvas.default'},\n          }}\n        >\n          <Box sx={{display: 'flex', flexDirection: 'row', justifyContent: 'center', alignItems: 'center'}}>\n            <Octicon icon={ArrowLeftIcon} sx={{pr: 1, fontWeight: 600, color: 'fg.muted'}} size={20} />\n            <Box sx={{fontSize: 0, color: 'fg.subtle', fontWeight: 400}}>All Symbols</Box>\n          </Box>\n        </Button>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          aria-label=\"Close symbols\"\n          data-hotkey=\"Escape\"\n          icon={XIcon}\n          sx={{\n            order: 3,\n            mr: -2,\n            color: 'fg.default',\n          }}\n          onClick={onClose}\n          variant=\"invisible\"\n        />\n      </Box>\n      <Box sx={{alignItems: 'center', display: 'flex', justifyContent: 'space-between', pb: 3}}>\n        <CodeNavSymbolDefinitionHeader\n          currentSymbol={currentSymbol}\n          selectedText={selectedText}\n          codeNavInfo={codeNavInfo}\n          onSymbolSelect={onSymbolSelect}\n        >\n          {definitions.length === 1 ? (\n            <CopilotChatButton copilotAccessAllowed={copilotAccessAllowed} messageReference={messageReference} />\n          ) : undefined}\n        </CodeNavSymbolDefinitionHeader>\n      </Box>\n      {isLoading && (\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            p: 3,\n            justifyContent: 'center',\n          }}\n        >\n          <Spinner size=\"small\" />\n        </Box>\n      )}\n      {!error && !isLoading && definitions && definitions.length > 0 ? (\n        <>\n          <CodeNavSymbolSectionHeader\n            headerText={definitions.length > 1 ? 'Definitions' : 'Definition'}\n            searchType={defsResponse?.backend === 'precise' ? 'Precise' : 'Search'}\n          />\n          <div>\n            {definitions && (\n              <CodeNavInfoPanelData\n                key={'definitions'}\n                definitions={definitions}\n                onClick={(index: number) => {\n                  onHighlight({index})\n                }}\n                highlightedIndex={highlightedIndex}\n                initiallyExpanded={true}\n                enableExpandCollapse={definitions.length > 1}\n                symbol={selectedText}\n                setFocusOnFile={true}\n              />\n            )}\n          </div>\n        </>\n      ) : null}\n      {!isLoading && (references.length > 0 || crossReferences.length > 0) && (\n        <CodeNavSymbolSectionHeader\n          headerText={`${shownReferences} ${shownReferences > 1 ? 'References' : 'Reference'}`}\n          searchType=\"Search\"\n          sx={{justifyContent: 'space-between'}}\n        >\n          <Box sx={{display: 'float', float: 'right', mr: '-6px'}}>\n            {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n            <IconButton\n              unsafeDisableTooltip={true}\n              aria-label=\"Previous reference\"\n              data-hotkey={findPrevShortcut.hotkey}\n              onClick={() => onHighlight({direction: -1, navigate: true})}\n              sx={{mr: 2, cursor: 'pointer', color: 'fg.muted'}}\n              disabled={highlightedIndex <= definitions.length}\n              icon={ChevronUpIcon}\n              variant=\"invisible\"\n              size=\"small\"\n            />\n            {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n            <IconButton\n              unsafeDisableTooltip={true}\n              aria-label=\"Next reference\"\n              data-hotkey={findNextShortcut.hotkey}\n              onClick={() => onHighlight({direction: 1, navigate: true})}\n              sx={{cursor: 'pointer', color: 'fg.muted'}}\n              disabled={highlightedIndex >= references.length + definitions.length - 1}\n              icon={ChevronDownIcon}\n              variant=\"invisible\"\n              size=\"small\"\n            />\n            <button\n              hidden={true}\n              data-hotkey={findNextShortcut.hotkey}\n              onClick={() => onHighlight({direction: 1, navigate: true})}\n              data-testid=\"find-next-button\"\n            />\n            <button\n              hidden={true}\n              data-hotkey={findPrevShortcut.hotkey}\n              onClick={() => onHighlight({direction: -1, navigate: true})}\n              data-testid=\"find-prev-button\"\n            />\n          </Box>\n        </CodeNavSymbolSectionHeader>\n      )}\n      {error && <Box sx={{p: 3, fontWeight: '400', color: 'fg.muted'}}>No references found</Box>}\n      {!isLoading && references.length > 0 && (\n        <CodeNavInfoPanelData\n          initiallyExpanded={true}\n          enableExpandCollapse={true}\n          references={references}\n          highlightedIndex={highlightedIndex - startReferenceIndex}\n          onClick={(index: number) => {\n            onHighlight({index: startReferenceIndex + index})\n          }}\n          key={'referencesInfoBox'}\n          symbol={selectedText}\n          setFocusOnFile={!(definitions && definitions.length > 0)}\n        />\n      )}\n      {!isLoading && showAllCrossRefs && (\n        <CodeNavInfoPanelData\n          initiallyExpanded={false}\n          enableExpandCollapse={true}\n          references={crossReferences}\n          key={'crossReferencesInfoBox'}\n          symbol={selectedText}\n        />\n      )}\n      {references.length === 0 && definitions.length === 0 && !error && !isLoading && (\n        <Box sx={{p: 3, fontWeight: '400', color: 'fg.muted'}}>No definitions or references found</Box>\n      )}\n      <Box sx={{px: 2, py: 2, fontSize: 0, color: 'fg.muted', borderTop: '1px solid', borderColor: 'border.muted'}}>\n        {crossRefFiles.length > MaxCrossReferenceFiles && (\n          // If there are more than refs than shown, show toggle to more/less references\n          <Button\n            leadingVisual={showAllCrossRefs ? FoldIcon : UnfoldIcon}\n            sx={{color: 'fg.default', mb: 2}}\n            variant=\"invisible\"\n            size=\"small\"\n            onClick={() => setShowAllCrossRefs(!showAllCrossRefs)}\n          >\n            {showAllCrossRefs ? 'Show less' : 'Show more'}\n          </Button>\n        )}\n\n        <Button\n          as={PrimerLink}\n          leadingVisual={SearchIcon}\n          sx={{color: 'fg.default'}}\n          variant=\"invisible\"\n          size=\"small\"\n          href={codeNavSearchPath({owner: repo.ownerLogin, repo: repo.name, searchTerm: selectedText})}\n        >\n          Search for this symbol\n        </Button>\n      </Box>\n      <Suspense fallback={null}>\n        <ScrollMarks definitionsOrReferences={[...definitions, ...references]} />\n      </Suspense>\n    </div>\n  )\n}\n\nfunction CodeNavSymbolSectionHeader({\n  headerText,\n  searchType,\n  sx,\n  children,\n}: PropsWithChildren<{headerText: string; searchType: 'Precise' | 'Search'; sx?: BoxProps['sx']}>) {\n  return (\n    <Box\n      sx={{\n        fontSize: '14px',\n        px: 3,\n        py: 2,\n        fontWeight: '600',\n        backgroundColor: 'canvas.subtle',\n        borderTop: '1px solid',\n        borderColor: 'border.muted',\n        height: '36px',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        ...sx,\n      }}\n    >\n      <Heading\n        as=\"h3\"\n        sx={{\n          fontSize: '12px',\n          fontWeight: 'semibold',\n          color: 'fg.muted',\n        }}\n      >\n        {headerText}\n        <Text sx={{ml: 2, fontWeight: 'light'}}>{searchType}</Text>\n      </Heading>\n      {children}\n    </Box>\n  )\n}\n\nfunction CodeNavSymbolDefinitionHeader({\n  currentSymbol,\n  selectedText,\n  codeNavInfo,\n  onSymbolSelect,\n  children,\n}: {\n  currentSymbol?: CodeSymbol\n  selectedText: string\n  codeNavInfo: CodeNavigationInfo\n  onSymbolSelect: (symbol: CodeSymbol) => void\n  children?: JSX.Element\n}) {\n  const fullSymbolText = currentSymbol?.fullyQualifiedName ?? selectedText\n  const segmentNames = fullSymbolText.split(/(\\W+)/)\n\n  const symbolSegments = segmentNames.map(segment => {\n    const isSeparator = /^\\W+$/.test(segment)\n    const foundDefinitions = !isSeparator ? codeNavInfo.getLocalDefinitions(segment, true) : []\n    const foundSymbol = foundDefinitions.length === 1 ? foundDefinitions[0] : undefined\n    const symbolColor = foundSymbol?.kind.plColor\n\n    return {text: segment, symbol: foundSymbol, symbolColor, isSeparator}\n  })\n\n  return (\n    <Box\n      as=\"h3\"\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        flexGrow: 1,\n        alignContent: 'start',\n        fontWeight: 400,\n        fontSize: 1,\n        fontFamily: 'mono',\n        flexWrap: 'wrap',\n        minWidth: 0,\n        verticalAlign: 'center',\n        gap: 2,\n        px: 3,\n      }}\n      aria-label={`${currentSymbol?.kind.fullName || ''} ${fullSymbolText}`.trimStart()}\n    >\n      {currentSymbol && (\n        <Box sx={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexGrow: 1, width: '100%'}}>\n          <SymbolIndicator symbolKind={currentSymbol.kind} showFullSymbol />\n          {children}\n        </Box>\n      )}\n      <Truncate title={fullSymbolText} sx={{maxWidth: 290, mt: '3px', direction: 'rtl', alignSelf: 'start'}} inline>\n        &lrm;\n        {symbolSegments.map((segment, index) => {\n          const symbolSx = segment.symbol\n            ? {all: 'unset', cursor: 'pointer', '&:hover': {backgroundColor: 'attention.muted'}}\n            : {}\n\n          // under normal circumstances - use a button and dont do what we are doing below\n          // we need a span to allow the truncation to not truncate the entire button element when overflowing\n          // the below code makes each non-separator span behave like a button\n          return (\n            <Box\n              as=\"span\"\n              role=\"button\"\n              tabIndex={segment.isSeparator ? -1 : 0}\n              sx={{...symbolSx, color: segment.symbolColor, direction: 'ltr'}}\n              key={`${segment.text}-${index}`}\n              onClick={() => (segment.symbol ? onSymbolSelect(segment.symbol) : undefined)}\n              onKeyDown={(keyboardEvent: React.KeyboardEvent) => {\n                if (segment.symbol && ['Enter', 'Space'].includes(keyboardEvent.code)) {\n                  onSymbolSelect(segment.symbol)\n                }\n              }}\n            >\n              {segment.text}\n            </Box>\n          )\n        })}\n        &lrm;\n      </Truncate>\n    </Box>\n  )\n}\n\nfunction getRefName(refInfo: RefInfo) {\n  return refInfo.name === refInfo.currentOid\n    ? refInfo.currentOid\n    : refInfo.refType === 'tree'\n      ? `refs/heads/${refInfo.name}`\n      : qualifyRef(refInfo.name, refInfo.refType ?? 'branch')\n}\n\ntry{ ScrollMarks.displayName ||= 'ScrollMarks' } catch {}\ntry{ CodeNavSymbolDetails.displayName ||= 'CodeNavSymbolDetails' } catch {}\ntry{ CodeNavSymbolSectionHeader.displayName ||= 'CodeNavSymbolSectionHeader' } catch {}\ntry{ CodeNavSymbolDefinitionHeader.displayName ||= 'CodeNavSymbolDefinitionHeader' } catch {}","import type {CodeNavigationInfo, CodeSymbol, DefinitionOrReference} from '@github-ui/code-nav'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {SymbolChangedEvent} from '@github-ui/copilot-chat/utils/copilot-chat-events'\nimport type {CopilotChatReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {qualifyRef, type RefType} from '@github-ui/ref-utils'\nimport {useEffect, useMemo, useState} from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useFocusSymbolPane} from '../../../../hooks/use-focus-symbol-pane'\nimport {CodeNavSymbolDetails} from './CodeNavSymbolDetails'\nimport {CodeNavSymbolNavigation} from './CodeNavSymbolNavigation'\n\nexport function CodeNavInfoPanel({\n  selectedText,\n  showCodeNavWithSymbol,\n  lineNumber,\n  offset,\n  onClose,\n  onClear,\n  codeNavInfo,\n  isLoading,\n  setSearchResults,\n  setFocusedSearchResult,\n  autoFocusSearch,\n}: {\n  selectedText: string\n  lineNumber: number\n  offset: number\n  onClose: () => void\n  onClear: () => void\n  showCodeNavWithSymbol: (symbolData: CodeSymbol) => void\n  codeNavInfo: CodeNavigationInfo\n  isLoading: boolean\n  setSearchTerm: (term: string) => void\n  setSearchResults: (results: DefinitionOrReference[]) => void\n  setFocusedSearchResult: (idx: number | undefined) => void\n  autoFocusSearch: boolean\n}) {\n  function onSymbolSelect(sym: CodeSymbol) {\n    showCodeNavWithSymbol(sym)\n    setShowSymbolTree(false)\n  }\n\n  const [showSymbolTree, setShowSymbolTree] = useState(selectedText ? false : true)\n  useFocusSymbolPane(focusSymbolSearch => {\n    if (focusSymbolSearch) {\n      onClear()\n      setShowSymbolTree(true)\n      setSearchResults([])\n    }\n  })\n\n  const {refInfo, path} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n  const {language, languageID, displayUrl} = useCurrentBlob()\n  const fileReference: CopilotChatReference = useMemo(\n    () => ({\n      type: 'file',\n      languageID,\n      languageName: language,\n      path,\n      ref: qualifyRef(refInfo.name, refInfo.refType as RefType),\n      commitOID: refInfo.currentOid,\n      repoID: repo.id,\n      repoName: repo.name,\n      repoOwner: repo.ownerLogin,\n      url: displayUrl,\n    }),\n    [\n      languageID,\n      language,\n      path,\n      refInfo.name,\n      refInfo.refType,\n      refInfo.currentOid,\n      repo.id,\n      repo.name,\n      repo.ownerLogin,\n      displayUrl,\n    ],\n  )\n\n  useEffect(() => {\n    if (selectedText) {\n      setShowSymbolTree(false)\n    } else if (!showSymbolTree) {\n      window.dispatchEvent(new SymbolChangedEvent(fileReference))\n      setShowSymbolTree(true)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedText, codeNavInfo])\n\n  return (\n    <div id=\"symbols-pane\">\n      {showSymbolTree ? (\n        codeNavInfo ? (\n          <CodeNavSymbolNavigation\n            treeSymbols={codeNavInfo.symbolTree}\n            onSymbolSelect={onSymbolSelect}\n            codeSymbols={codeNavInfo.symbols}\n            onClose={onClose}\n            autoFocusSearch={autoFocusSearch}\n          />\n        ) : (\n          // TODO: Add zero state for when there is no code nav\n          <div>Click on a symbol to see code navigation data</div>\n        )\n      ) : (\n        <CodeNavSymbolDetails\n          codeNavInfo={codeNavInfo}\n          selectedText={selectedText}\n          lineNumber={lineNumber}\n          offset={offset}\n          onBackToSymbol={() => {\n            onClear()\n            setShowSymbolTree(true)\n            setSearchResults([])\n            window.dispatchEvent(new SymbolChangedEvent(fileReference))\n          }}\n          onClose={() => {\n            onClose()\n            onClear()\n            setSearchResults([])\n            window.dispatchEvent(new SymbolChangedEvent(fileReference))\n          }}\n          onSymbolSelect={onSymbolSelect}\n          isLoading={isLoading}\n          setSearchResults={setSearchResults}\n          setFocusedSearchResult={setFocusedSearchResult}\n        />\n      )}\n    </div>\n  )\n}\n\ntry{ CodeNavInfoPanel.displayName ||= 'CodeNavInfoPanel' } catch {}","import type {CodeNavigationInfo, CodeSymbol, DefinitionOrReference} from '@github-ui/code-nav'\nimport TableOfContentsPanel from '@github-ui/code-view-shared/components/TableOfContentsPanel'\nimport type {PanelType} from '@github-ui/code-view-types'\nimport {ScreenSize, useScreenSize} from '@github-ui/screen-size'\nimport {Dialog} from '@primer/react/experimental'\nimport React from 'react'\n\nimport {useCurrentBlob} from '../hooks/CurrentBlob'\nimport type {SearchInFileStatus} from '../hooks/use-in-file-search-results'\nimport {useStickyObserver} from '../hooks/use-sticky-observer'\nimport {useUpdatePanelExpandPreferences} from '../hooks/use-update-panel-expand-preferences'\nimport type {CodeNavData} from './blob/BlobContent/BlobContent'\nimport {CodeNavInfoPanel} from './blob/BlobContent/CodeNav/CodeNavInfoPanel'\nimport {Panel} from './Panel'\n\ninterface InnerPanelContentProps {\n  stickySx: Record<string, unknown> | undefined\n  stickyHeaderRef: React.RefObject<HTMLDivElement>\n  openPanel: PanelType\n  isCodeNavLoading: boolean\n  codeNavInfo: CodeNavigationInfo\n  setOpenPanel: (panel: PanelType | undefined) => void\n  showCodeNavWithSymbol: (symbol: CodeSymbol) => void\n  searchingText: CodeNavData\n  setSearchingText: React.Dispatch<React.SetStateAction<CodeNavData>>\n  searchTerm: string\n  searchStatus: SearchInFileStatus\n  searchResults: DefinitionOrReference[]\n  setSearchTerm: (term: string) => void\n  setSearchResults: (results: DefinitionOrReference[]) => void\n  setFocusedSearchResult: (index: number | undefined) => void\n  autoFocusSearch: boolean\n  className?: string\n}\n\ninterface OuterPanelContentProps extends Omit<InnerPanelContentProps, 'isNarrow'> {\n  setOpenPanel: (panel: PanelType | undefined) => void\n}\n\nexport const PanelContent = React.memo(PanelContentUnmemoized)\n\nfunction PanelContentUnmemoized(props: OuterPanelContentProps) {\n  const {...innerProps} = props\n  const [isNarrow, setIsNarrow] = React.useState(false)\n  const {screenSize} = useScreenSize()\n\n  React.useEffect(() => {\n    setIsNarrow(screenSize < ScreenSize.large)\n  }, [screenSize])\n\n  return (\n    <>\n      {!isNarrow && <InnerPanelContent className={'inner-panel-content-not-narrow'} {...props} />}\n      {isNarrow && (\n        <Dialog\n          onClose={() => innerProps.setOpenPanel(undefined)}\n          renderHeader={() => null}\n          renderBody={() => InnerPanelContent({...innerProps})}\n        />\n      )}\n    </>\n  )\n}\n\nfunction InnerPanelContent({\n  stickySx,\n  stickyHeaderRef,\n  openPanel,\n  isCodeNavLoading,\n  codeNavInfo,\n  setOpenPanel,\n  showCodeNavWithSymbol,\n  searchingText,\n  setSearchingText,\n  setSearchTerm,\n  setSearchResults,\n  setFocusedSearchResult,\n  autoFocusSearch,\n  className,\n}: InnerPanelContentProps) {\n  const {\n    headerInfo: {toc},\n  } = useCurrentBlob()\n\n  const isStickied = useStickyObserver(stickyHeaderRef)\n  const borderSx = isStickied ? {borderRadius: '0px 0px 6px 6px', borderTop: 0} : {}\n  const updateExpandPreferences = useUpdatePanelExpandPreferences()\n\n  return (\n    <Panel sx={{...stickySx, ...borderSx}} className={`panel-content-narrow-styles ${className ? className : ''}`}>\n      {openPanel === 'toc' ? (\n        <TableOfContentsPanel\n          toc={toc}\n          onClose={() => {\n            setOpenPanel(undefined)\n          }}\n        />\n      ) : (\n        openPanel === 'codeNav' && (\n          <CodeNavInfoPanel\n            codeNavInfo={codeNavInfo}\n            showCodeNavWithSymbol={showCodeNavWithSymbol}\n            selectedText={searchingText.selectedText}\n            lineNumber={searchingText.lineNumber - 1}\n            offset={searchingText.offset}\n            onClose={() => {\n              setOpenPanel(undefined)\n              localStorage.setItem('codeNavOpen', '')\n              updateExpandPreferences(null, false, null)\n              // return focus to symbols button\n              document.getElementById('symbols-button')?.focus()\n            }}\n            isLoading={isCodeNavLoading}\n            onClear={() => setSearchingText({selectedText: '', lineNumber: 0, offset: -1})}\n            setSearchTerm={setSearchTerm}\n            setSearchResults={setSearchResults}\n            setFocusedSearchResult={setFocusedSearchResult}\n            autoFocusSearch={autoFocusSearch}\n          />\n        )\n      )}\n    </Panel>\n  )\n}\n\ntry{ PanelContent.displayName ||= 'PanelContent' } catch {}\ntry{ PanelContentUnmemoized.displayName ||= 'PanelContentUnmemoized' } catch {}\ntry{ InnerPanelContent.displayName ||= 'InnerPanelContent' } catch {}","import type {CodeNavigationInfo} from '@github-ui/code-nav'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {LatestCommitSingleLine} from '@github-ui/code-view-shared/components/LatestCommit'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useOpenPanel} from '@github-ui/code-view-shared/contexts/OpenPanelContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport type {Blame, BlobPayload} from '@github-ui/code-view-types'\nimport type {CopilotInfo} from '@github-ui/copilot-common-types'\nimport {CopilotPopover} from '@github-ui/copilot-popover'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {ScreenSize, useScreenSize} from '@github-ui/screen-size'\nimport {ssrSafeLocation} from '@github-ui/ssr-utils'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box} from '@primer/react'\nimport {useCallback, useEffect, useMemo, useRef, useState} from 'react'\n\nimport {CurrentBlameProvider, useCurrentBlame} from '../hooks/CurrentBlame'\nimport {CurrentBlobProvider} from '../hooks/CurrentBlob'\nimport {CurrentLineRefMapProvider} from '../hooks/CurrentLineRefMap'\nimport {useCodeNavigation} from '../hooks/use-code-navigation'\nimport {focusSymbolSearch, useFocusSymbolPane} from '../hooks/use-focus-symbol-pane'\nimport {useInFileSearchResults} from '../hooks/use-in-file-search-results'\nimport {stickyHeaderId} from '../hooks/use-sticky-header-height'\nimport {DELETE_STICKY_LINES_VALUE, useStickyLines} from '../hooks/use-sticky-lines'\nimport {useStickyHeaderSx} from '../hooks/use-sticky-observer'\nimport {useUpdatePanelExpandPreferences} from '../hooks/use-update-panel-expand-preferences'\nimport {textAreaId} from '../utilities/lines'\nimport BlobContent from './blob/BlobContent'\nimport type {CodeLinesHandle} from './blob/BlobContent/Code/code-lines-handle'\nimport BlobViewHeader from './headers/BlobViewHeader'\nimport CodeSizeDetails from './headers/header-components/CodeSizeDetails'\nimport {PanelContent} from './PanelContent'\n\nexport function BlobViewContent({\n  blame,\n  blob,\n  searchTerm,\n  setSearchTerm,\n  symbolsExpanded,\n  setValidCodeNav,\n  showTree,\n  treeToggleElement,\n  validCodeNav,\n  copilotInfo,\n}: {\n  blame: Blame | undefined\n  blob: BlobPayload\n  searchTerm: string\n  symbolsExpanded: boolean\n  setSearchTerm: (term: string) => void\n  setValidCodeNav: (show: boolean) => void\n  showTree: boolean\n  treeToggleElement: JSX.Element\n  validCodeNav: boolean\n  copilotInfo?: CopilotInfo\n}) {\n  const {path} = useFilesPageInfo()\n  const symbolsEnabled = blob.symbolsEnabled\n  const stickyHeaderRef = useRef(null)\n  const stickySx = useStickyHeaderSx()\n  const borderSx = {\n    border: '1px solid',\n    borderTop: 'none',\n    borderColor: 'border.default',\n  }\n\n  const [autoFocusSearch, setAutoFocusSearch] = useState(false)\n  const {openPanel, setOpenPanel} = useOpenPanel()\n  const codeLinesHandle = useRef<CodeLinesHandle>(null)\n  const shouldOpenPanel = useCodeViewOptions().openSymbolsOption.enabled && symbolsEnabled\n\n  // if narrow, the code symbols panel is a dialog instead of a panel\n  const {screenSize} = useScreenSize()\n\n  useFocusSymbolPane(focusSearch => {\n    if (focusSearch) {\n      setAutoFocusSearch(true)\n    }\n  })\n\n  const {sendRepoClickEvent} = useReposAnalytics()\n\n  const isFirstRender = useRef(true)\n\n  useEffect(() => {\n    if (!isFirstRender.current) {\n      //remove sticky lines when navigating to a new file\n      setStickyLines(DELETE_STICKY_LINES_VALUE, true)\n\n      //reset panel when navigating to new file\n      setSearchTerm('')\n\n      // Don't autofocus search when navigating\n      setAutoFocusSearch(false)\n\n      setSearchingText({selectedText: '', lineNumber: -1, offset: 0})\n    } else {\n      isFirstRender.current = false\n      // If this is the first render, open the panel if we have text selected from the hash\n      if (searchingText.selectedText && !openPanel && shouldOpenPanel && symbolsExpanded) {\n        openCodeNav()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [path])\n\n  function scrollEventListenerFunction() {\n    if (window.scrollY < 300) {\n      //if the user scrolled to the top, we want to make sure all sticky lines are cleared out in that situation\n      setStickyLines(DELETE_STICKY_LINES_VALUE, true)\n    }\n  }\n  useEffect(() => {\n    // rather than set up an intersection observer on a particular element, we only want to know if the user has scrolled\n    // to the very top of the page. The element would never really intersect because it is sticky, so this is the only\n    // realistic way for us to determine if the user has scrolled to the top of the page.\n    // eslint-disable-next-line github/prefer-observers\n    window.addEventListener('scroll', scrollEventListenerFunction)\n\n    return () => {\n      window.removeEventListener('scroll', scrollEventListenerFunction)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const hasBlame = !!useCurrentBlame()\n  const updateExpandPreferences = useUpdatePanelExpandPreferences()\n\n  const {currentStickyLines, setStickyLines} = useStickyLines()\n  const openCodeNav = useCallback(() => {\n    if (!hasBlame && shouldOpenPanel) {\n      setOpenPanel('codeNav')\n      sendRepoClickEvent('BLOB_SYMBOLS_MENU.OPEN_WITH_SYMBOL')\n      localStorage.setItem('codeNavOpen', 'codeNav')\n      updateExpandPreferences(null, true, null)\n    }\n  }, [hasBlame, shouldOpenPanel, setOpenPanel, sendRepoClickEvent, updateExpandPreferences])\n\n  const {isCodeNavLoading, codeNavInfo, showCodeNavWithSymbol, showCodeNavForToken, searchingText, setSearchingText} =\n    useCodeNavigation(blob, openCodeNav, setValidCodeNav, ssrSafeLocation.hash, hasBlame)\n\n  const {searchStatus, searchResults, setSearchResults, focusedSearchResult, setFocusedSearchResult} =\n    useInFileSearchResults(codeNavInfo, searchTerm)\n\n  const {\n    headerInfo: {toc},\n  } = blob\n\n  // store if we've rendered with no openPanel\n  // think of this like a useRef that resets when codeNavInfo changes (which happens when the user navigates to a new file)\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const hasRenderedWithNoOpenPanel = useMemo(() => ({value: false}), [codeNavInfo])\n  hasRenderedWithNoOpenPanel.value = !openPanel || hasRenderedWithNoOpenPanel.value\n\n  const showPanel =\n    openPanel !== undefined &&\n    codeNavInfo &&\n    validCodeNav &&\n    // we show the symbol panel by default, but if there are no symbols, we shouldn't open the symbol panel. if\n    // hasRenderedWithNoOpenPanel.value is true, that implies the user has deliberately requested the symbols panel\n    !(codeNavInfo.symbols.length === 0 && openPanel === 'codeNav' && !hasRenderedWithNoOpenPanel.value) &&\n    // if we don't have a toc, don't show the toc\n    !(!toc && openPanel === 'toc') &&\n    !(openPanel === 'edit') &&\n    // don't show the symbol panel if it's disabled\n    !(!symbolsEnabled && openPanel === 'codeNav')\n  const actualOpenPanel = showPanel ? openPanel : undefined\n\n  // if we're not showing the panel, setOpenPanel to maintain consistency\n  useEffect(() => {\n    if (openPanel && !showPanel) {\n      setOpenPanel(undefined)\n    }\n  }, [openPanel, setOpenPanel, showPanel])\n\n  useEffect(() => {\n    try {\n      sendEvent('blob-size', {\n        // for files over the size limit, lines will be 0\n        lines: blob.stylingDirectives?.length,\n        // for files over the size limit, truncatedSloc will not be reported\n        truncatedSloc: blob.headerInfo?.lineInfo.truncatedSloc,\n        // for files over the size limit, truncatedLoc will not be reported\n        truncatedLoc: blob.headerInfo?.lineInfo.truncatedLoc,\n        // for files over the size limit length will be 0\n        length: blob.rawLines?.reduce((total, line) => total + line.length, 0) ?? 0,\n        // for files over the size limit, humanLength will be reported\n        humanLength: blob.headerInfo?.blobSize,\n      })\n    } catch (e) {\n      // don't want to crash the page just for analytics\n    }\n  }, [blob])\n\n  return (\n    <CurrentBlobProvider blob={blob}>\n      <CurrentBlameProvider blame={blame}>\n        <CurrentLineRefMapProvider>\n          {codeNavInfo && <FindSymbolShortcut codeNavInfo={codeNavInfo} />}\n          <LatestCommitSingleLine />\n          <Box sx={{display: 'flex', flexDirection: 'row'}}>\n            <Box\n              className=\"container\"\n              sx={{\n                width: '100%',\n                height: 'fit-content',\n                minWidth: 0,\n                mr: actualOpenPanel && codeNavInfo && screenSize > ScreenSize.medium ? 3 : 0,\n              }}\n            >\n              <Box sx={{height: '40px', pl: 1, pb: 3}} className=\"react-code-size-details-banner\">\n                <CodeSizeDetails className=\"react-code-size-details-banner\" />\n                <CopilotPopover\n                  copilotInfo={copilotInfo}\n                  className=\"react-code-size-details-banner\"\n                  view={blame ? 'blame' : 'preview'}\n                />\n              </Box>\n              <Box className=\"react-blob-view-header-sticky\" sx={stickySx} id={stickyHeaderId} ref={stickyHeaderRef}>\n                <BlobViewHeader\n                  currentStickyLines={currentStickyLines}\n                  focusedSearchResult={focusedSearchResult}\n                  openPanel={actualOpenPanel}\n                  searchingText={searchingText}\n                  searchResults={searchResults}\n                  searchTerm={searchTerm}\n                  setFocusedSearchResult={setFocusedSearchResult}\n                  setOpenPanel={setOpenPanel}\n                  setSearchTerm={setSearchTerm}\n                  showTree={showTree}\n                  stickyHeaderRef={stickyHeaderRef}\n                  treeToggleElement={treeToggleElement}\n                  validCodeNav={validCodeNav}\n                  copilotInfo={copilotInfo}\n                  colorizedLines={blob.colorizedLines}\n                />\n              </Box>\n\n              <Box\n                sx={{\n                  ...borderSx,\n                  borderRadius: '0px 0px 6px 6px',\n                  // Min width is set to 273px to prevent the blob content from being too narrow.\n                  // Supports a min screen size of 320px without introducing any horizontal scrollbars.\n                  minWidth: '273px',\n                }}\n              >\n                <BlobContent\n                  blobLinesHandle={codeLinesHandle}\n                  setOpenPanel={setOpenPanel}\n                  validCodeNav={validCodeNav}\n                  codeNavInfo={codeNavInfo}\n                  onCodeNavTokenSelected={showCodeNavForToken}\n                  onLineStickOrUnstick={setStickyLines}\n                  searchResults={searchResults}\n                  setSearchTerm={setSearchTerm}\n                  focusedSearchResult={focusedSearchResult}\n                />\n              </Box>\n            </Box>\n            {actualOpenPanel && codeNavInfo ? (\n              <>\n                <Box\n                  // This is a bit of a hack for SSR - we want the symbols panel to be shifted down when the\n                  // Code size details are rendered above the blob (instead of in the blob header)\n                  // Because that item needs to be inside the container above for the container query to work\n                  // We need to shift the symbols panel oursleves when the content size is right\n                  sx={{pb: '33px'}}\n                />\n                <PanelContent\n                  stickySx={stickySx}\n                  stickyHeaderRef={stickyHeaderRef}\n                  openPanel={actualOpenPanel}\n                  isCodeNavLoading={isCodeNavLoading}\n                  codeNavInfo={codeNavInfo}\n                  setOpenPanel={setOpenPanel}\n                  showCodeNavWithSymbol={showCodeNavWithSymbol}\n                  searchingText={searchingText}\n                  setSearchingText={setSearchingText}\n                  searchTerm={searchTerm}\n                  searchResults={searchResults}\n                  searchStatus={searchStatus}\n                  setSearchResults={setSearchResults}\n                  setSearchTerm={setSearchTerm}\n                  setFocusedSearchResult={setFocusedSearchResult}\n                  autoFocusSearch={autoFocusSearch}\n                />\n              </>\n            ) : null}\n          </Box>\n        </CurrentLineRefMapProvider>\n      </CurrentBlameProvider>\n    </CurrentBlobProvider>\n  )\n}\n\nfunction FindSymbolShortcut({codeNavInfo}: {codeNavInfo: CodeNavigationInfo}) {\n  const {sendRepoKeyDownEvent} = useReposAnalytics()\n  const {findSymbolShortcut} = useShortcut()\n  const {setOpenPanel} = useOpenPanel()\n\n  // Don't support `r` hotkey if no symbols exist for the document\n  if (codeNavInfo.symbols.length === 0) {\n    return null\n  }\n\n  return (\n    <DuplicateOnKeydownButton\n      buttonFocusId={textAreaId}\n      buttonHotkey={findSymbolShortcut.hotkey}\n      onButtonClick={() => {\n        setOpenPanel('codeNav')\n        focusSymbolSearch()\n        sendRepoKeyDownEvent('FIND_SYMBOL')\n      }}\n    />\n  )\n}\n\ntry{ BlobViewContent.displayName ||= 'BlobViewContent' } catch {}\ntry{ FindSymbolShortcut.displayName ||= 'FindSymbolShortcut' } catch {}","import {CodeNavigationInfo, type CodeSymbol} from '@github-ui/code-nav'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {BlobPayload} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {useCurrentUser} from '@github-ui/current-user'\nimport {useNavigate, useSearchParams} from '@github-ui/use-navigate'\nimport {useCallback, useMemo, useState} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {parseFileAnchor} from '../../github/blob-anchor'\nimport type {CodeNavData} from '../components/blob/BlobContent/BlobContent'\nimport {isSymbol} from '../utilities/lines'\nimport {scrollLineIntoView} from './use-scroll-line-into-view'\n\nexport function useCodeNavigation(\n  blob: BlobPayload,\n  onCodeNavActivated: () => void,\n  setValidCodeNav: (show: boolean) => void,\n  hash: string,\n  hasBlame: boolean,\n) {\n  const nav = useNavigate()\n  const repo = useCurrentRepository()\n  const user = useCurrentUser()\n  const {refInfo, path} = useFilesPageInfo()\n\n  const [isCodeNavLoading, setCodeNavLoading] = useState(false)\n\n  const [urlParams] = useSearchParams()\n  const isPlain = urlParams.get('plain') === '1'\n\n  const codeNavInfo = useMemo(() => {\n    setValidCodeNav(true)\n    try {\n      return new CodeNavigationInfo(\n        repo,\n        refInfo,\n        path,\n        !!user,\n        blob.rawLines || [],\n        blob.symbols?.symbols ?? [],\n        blob.stylingDirectives,\n        blob.language,\n        isPlain,\n        setCodeNavLoading,\n      )\n    } catch (e) {\n      setValidCodeNav(false)\n    }\n  }, [repo, refInfo, path, blob, setValidCodeNav, isPlain, user])\n\n  const [searchingText, setSearchingText] = useState<CodeNavData>(() => {\n    const anchInfo = parseFileAnchor(hash)\n    if (!anchInfo.blobRange?.start?.line) {\n      return {selectedText: '', lineNumber: -1, offset: 0}\n    }\n\n    const isTextRangeOnSingleLineHighlighted =\n      !hasBlame &&\n      anchInfo.blobRange.start.line === anchInfo.blobRange.end.line &&\n      anchInfo.blobRange.start.column !== null &&\n      anchInfo.blobRange.end.column !== null &&\n      anchInfo.blobRange.end.column - anchInfo.blobRange.start.column > 2 &&\n      blob.stylingDirectives &&\n      blob.stylingDirectives[anchInfo.blobRange.start.line - 1]?.length &&\n      codeNavInfo?.blobLines[anchInfo.blobRange.start.line - 1]\n\n    if (isTextRangeOnSingleLineHighlighted) {\n      const highlightedText = codeNavInfo.blobLines[anchInfo.blobRange.start.line - 1]?.substring(\n        anchInfo.blobRange.start.column! - 1,\n        anchInfo.blobRange.end.column! - 1,\n      )\n\n      const stylingDirective = blob.stylingDirectives![anchInfo.blobRange.start.line - 1]?.find(\n        directive =>\n          directive.s === anchInfo.blobRange.start.column! - 1 && directive.e === anchInfo.blobRange.end.column! - 1,\n      )\n\n      if (highlightedText && stylingDirective && isSymbol(highlightedText, stylingDirective.c)) {\n        return {\n          selectedText: highlightedText,\n          lineNumber: anchInfo.blobRange.start.line,\n          offset: anchInfo.blobRange.start.column!,\n        }\n      } else {\n        return {selectedText: '', lineNumber: -1, offset: 0}\n      }\n    } else if (hash && codeNavInfo && !hasBlame) {\n      const sym = codeNavInfo.getSymbolOnLine(Number(hash.substring(2)))\n      if (!sym) {\n        return {selectedText: '', lineNumber: -1, offset: 0}\n      }\n\n      return {selectedText: sym.name, lineNumber: sym.lineNumber, offset: sym.ident.start.column}\n    } else {\n      return {selectedText: '', lineNumber: -1, offset: 0}\n    }\n  })\n\n  const showCodeNavWithSymbol = useCallback(\n    (sym: CodeSymbol) => {\n      setSearchingText({selectedText: sym.name, lineNumber: sym.lineNumber, offset: sym.ident.start.column})\n      onCodeNavActivated()\n\n      nav(sym.href())\n      scrollLineIntoView({line: sym.lineNumber})\n    },\n    [onCodeNavActivated, nav],\n  )\n\n  const showCodeNavForToken = useCallback(\n    (codeNavData: CodeNavData) => {\n      setSearchingText(codeNavData)\n      onCodeNavActivated()\n    },\n    //TODO: this is causing a lot of re-renders for a rare edge case\n    //figure out how to have the callback get updated properly without relying on this\n    //dependency array\n    [onCodeNavActivated],\n  )\n\n  return {\n    isCodeNavLoading,\n    codeNavInfo,\n    showCodeNavWithSymbol,\n    showCodeNavForToken,\n    setSearchingText,\n    searchingText,\n  }\n}\n","import type {CodeNavigationInfo, DefinitionOrReference, Range} from '@github-ui/code-nav'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {WebWorker} from '@github-ui/code-view-shared/utilities/web-worker'\nimport {DebouncedWorkerManager} from '@github-ui/code-view-shared/worker-jobs/debounced-worker-manager'\nimport React, {useEffect, useRef, useState} from 'react'\n\nimport {findInFileWorkerJob} from '../worker-jobs/find-in-file'\n\nexport interface FindInFileRequest {\n  query: string\n  lines: string[]\n  currentCodeReferences: DefinitionOrReference[] | undefined\n}\n\nexport interface FindInFileResponse {\n  ranges: Range[]\n  query: string\n}\n\nexport type SearchInFileStatus = 'pending' | 'done'\n\nexport function useInFileSearchResults(codeNavInfo: CodeNavigationInfo | undefined, searchTerm: string) {\n  const {findInFileWorkerPath} = useReposAppPayload()\n  const [searchResults, setSearchResults] = useState<DefinitionOrReference[]>([])\n  const [focusedSearchResult, setFocusedSearchResult] = useState<number | undefined>(undefined)\n  const [searchStatus, setSearchStatus] = useState<SearchInFileStatus>('done')\n  const workerManagerRef = React.useRef<DebouncedWorkerManager<FindInFileRequest, FindInFileResponse>>()\n  const {refInfo, path} = useFilesPageInfo()\n\n  if (!workerManagerRef.current && searchTerm) {\n    workerManagerRef.current = new DebouncedWorkerManager<FindInFileRequest, FindInFileResponse>(\n      new WebWorker(findInFileWorkerPath, findInFileWorkerJob),\n      200, // Disable debounce, since we do incremental searching anyway so it's ultra fast\n      (req: FindInFileRequest) => req.query.length !== 1,\n    )\n  }\n\n  // Search term ref is used in the worker `onResponse` callback to avoid changing callback on every search term change.\n  const searchTermRef = useRef(searchTerm)\n  searchTermRef.current = searchTerm\n  const lastSearchTerm = useRef('')\n\n  useEffect(() => {\n    return function destroy() {\n      workerManagerRef.current?.terminate()\n    }\n  }, [])\n\n  const lastCodeNavInfo = useRef<CodeNavigationInfo>()\n  if (workerManagerRef.current && codeNavInfo !== lastCodeNavInfo.current) {\n    workerManagerRef.current.onResponse = (data: FindInFileResponse) => {\n      if (data.query === searchTermRef.current) {\n        // TODO: Try to retain the focused search result (if possible) even as results change\n        setFocusedSearchResult(0)\n        setSearchResults(codeNavInfo?.createReferences(data.ranges) || [])\n        setSearchStatus('done')\n        lastSearchTerm.current = searchTermRef.current\n      }\n    }\n\n    lastCodeNavInfo.current = codeNavInfo\n  }\n\n  //this effect re-searches for the previous search term when the ref changes - it wipes out all saved progress because\n  //anything could have changed durring the swap between refs\n  useEffect(() => {\n    if (!codeNavInfo || !workerManagerRef.current || !lastSearchTerm.current || lastSearchTerm.current === '') {\n      //reset everything because we changed refs\n      setSearchResults([])\n      setFocusedSearchResult(0)\n      setSearchStatus('done')\n      return\n    }\n    setSearchResults([])\n    setFocusedSearchResult(0)\n    setSearchStatus('pending')\n    workerManagerRef.current.post({\n      query: lastSearchTerm.current,\n      lines: codeNavInfo.blobLines,\n      currentCodeReferences: undefined,\n    })\n    // We only want to trigger an update when the ref changes, aka the user is on a new branch or commit, or when\n    //they navigate to a new file (path). If they are navigating using the symbols navigation, we want to redo the\n    //search for that symbol within the new file as well\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [refInfo.name, path])\n\n  useEffect(() => {\n    if (!codeNavInfo || !workerManagerRef.current) {\n      return\n    }\n    if (searchTerm === '') {\n      setSearchResults([])\n      setFocusedSearchResult(0)\n      setSearchStatus('done')\n      lastSearchTerm.current = ''\n    } else if (lastSearchTerm.current === searchTerm || !validSearchTerm(searchTerm)) {\n      return\n    } else {\n      setSearchStatus('pending')\n      const canDoIncrementalSearch = lastSearchTerm.current.length > 0 && searchTerm.startsWith(lastSearchTerm.current)\n      workerManagerRef.current.post({\n        query: searchTerm,\n        lines: codeNavInfo.blobLines,\n        currentCodeReferences: canDoIncrementalSearch ? searchResults : undefined,\n      })\n    }\n\n    // We only want to trigger an update when the search term changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchTerm])\n\n  return {\n    focusedSearchResult,\n    setFocusedSearchResult,\n    searchResults,\n    setSearchResults,\n    searchStatus,\n  }\n}\n\nfunction validSearchTerm(searchTerm: string) {\n  return searchTerm.length > 0 && searchTerm.length <= 1000\n}\n","import {BlobContent} from './BlobContent'\n\nexport default BlobContent\n","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {Blame, FileBlobPagePayload, FilePagePayload} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {blobPath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {InfoIcon, XIcon} from '@primer/octicons-react'\nimport {Box, Flash, Octicon} from '@primer/react'\nimport React from 'react'\n\nimport {CurrentBlameProvider, useCurrentBlame} from '../../../hooks/CurrentBlame'\nimport {assertNever} from '../../../utilities/assert-never'\n\nexport function BlameBanners() {\n  const payload = useRoutePayload<FilePagePayload>()\n  const blame = 'blame' in payload ? (payload as FileBlobPagePayload).blame : undefined\n  return (\n    <CurrentBlameProvider blame={blame}>\n      <BlameErrorBanner />\n      <IgnoreRevsBanner />\n    </CurrentBlameProvider>\n  )\n}\n\nfunction BlameErrorBanner() {\n  const repo = useCurrentRepository()\n  const refName = useFilesPageInfo().refInfo.name\n  const blame = useCurrentBlame()\n  const [shouldDisplay, setShouldDisplay] = React.useState(true)\n\n  if (!blame) return null\n\n  const ignoreRefsInfo = blame?.ignoreRevs\n  const blameErrorType = blame?.errorType\n  if (!blameErrorType) return null\n\n  const renderIgnoreRefsLink = () => (\n    <Link\n      to={blobPath({\n        repo: repo.name,\n        owner: repo.ownerLogin,\n        commitish: refName,\n        filePath: ignoreRefsInfo.path,\n      })}\n    >\n      {ignoreRefsInfo.path}\n    </Link>\n  )\n\n  return (\n    <>\n      {shouldDisplay && (\n        <Flash variant=\"warning\" sx={{mt: 3}}>\n          <Octicon icon={InfoIcon} />\n          <BlameErrorText blameErrorType={blameErrorType} renderIgnoreRefsLink={renderIgnoreRefsLink} />\n          <Box sx={{float: 'right', cursor: 'pointer'}} onClick={() => setShouldDisplay(false)}>\n            <Octicon icon={XIcon} />\n          </Box>\n        </Flash>\n      )}\n    </>\n  )\n}\n\nfunction BlameErrorText({\n  blameErrorType,\n  renderIgnoreRefsLink,\n}: {\n  blameErrorType: NonNullable<Blame['errorType']>\n  renderIgnoreRefsLink: () => JSX.Element\n}) {\n  switch (blameErrorType) {\n    case 'invalid_ignore_revs':\n      return <span>Your {renderIgnoreRefsLink()} file is invalid.</span>\n    case 'ignore_revs_too_big':\n      return <span>Your {renderIgnoreRefsLink()} file is too large.</span>\n    case 'symlink_disallowed':\n      return <span>Symlinks are not supported.</span>\n    case 'blame_timeout':\n      return <span>Your blame took too long to compute.</span>\n    default:\n      assertNever(blameErrorType)\n  }\n}\n\nfunction IgnoreRevsBanner() {\n  const repo = useCurrentRepository()\n  const refName = useFilesPageInfo().refInfo.name\n  const ignoreRefsInfo = useCurrentBlame()?.ignoreRevs\n  const [shouldDisplay, setShouldDisplay] = React.useState(true)\n\n  if (!ignoreRefsInfo?.present) return null\n\n  const ignoreRefsLink = (\n    <Link\n      to={blobPath({\n        repo: repo.name,\n        owner: repo.ownerLogin,\n        commitish: refName,\n        filePath: ignoreRefsInfo.path,\n      })}\n    >\n      {ignoreRefsInfo.path}\n    </Link>\n  )\n\n  return (\n    <>\n      {shouldDisplay && (\n        <Flash sx={{mt: 3}}>\n          <Octicon icon={InfoIcon} />\n          {ignoreRefsInfo.timedOut ? (\n            <span>Failed to ignore revisions in {ignoreRefsLink}.</span>\n          ) : (\n            <span>Ignoring revisions in {ignoreRefsLink}.</span>\n          )}\n          <Box sx={{float: 'right', cursor: 'pointer'}} onClick={() => setShouldDisplay(false)}>\n            <Octicon icon={XIcon} />\n          </Box>\n        </Flash>\n      )}\n    </>\n  )\n}\n\ntry{ BlameBanners.displayName ||= 'BlameBanners' } catch {}\ntry{ BlameErrorBanner.displayName ||= 'BlameErrorBanner' } catch {}\ntry{ BlameErrorText.displayName ||= 'BlameErrorText' } catch {}\ntry{ IgnoreRevsBanner.displayName ||= 'IgnoreRevsBanner' } catch {}","import type {YamlTemplate} from '@github-ui/code-view-types'\nimport {SafeHTMLText} from '@github-ui/safe-html'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {Flash, Link, Octicon} from '@primer/react'\n\nexport function DiscussionTemplateBanner({errors}: YamlTemplate) {\n  if (!errors || errors.length === 0) {\n    return null\n  }\n\n  const errorMessageLinkText: string[] = []\n  if (errors.length === 1) {\n    errorMessageLinkText.push('Learn more about this error.')\n  } else {\n    errors.map((error, index) => {\n      errorMessageLinkText.push(`Learn more about error ${index + 1}.`)\n    })\n  }\n\n  return (\n    <Flash variant={'danger'} sx={{mt: 3}}>\n      <p>\n        <Octicon icon={AlertIcon} />\n        <strong>There {errors.length === 1 ? 'is a problem' : 'are some problems'} with this template</strong>\n      </p>\n      {errors.map((error, index) => {\n        return (\n          <p key={`error-${index}`}>\n            <SafeHTMLText html={error.message} />\n            {'. '}\n            <Link href={error.link} target=\"_blank\">\n              {errorMessageLinkText[index]}\n            </Link>\n          </p>\n        )\n      })}\n    </Flash>\n  )\n}\n\ntry{ DiscussionTemplateBanner.displayName ||= 'DiscussionTemplateBanner' } catch {}","import {SafeHTMLText} from '@github-ui/safe-html'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {Flash, Label, Link, Octicon} from '@primer/react'\nimport type React from 'react'\n\nimport type {useCurrentBlob} from '../../../hooks/CurrentBlob'\n\ntype IssueTemplateBannerProps = Pick<\n  ReturnType<typeof useCurrentBlob>,\n  'issueTemplate' | 'showIssueFormWarning' | 'isValidLegacyIssueTemplate'\n> & {\n  isLoggedIn: boolean\n  helpUrl: string\n}\n\nexport function IssueTemplateBanner(props: IssueTemplateBannerProps) {\n  const {issueTemplate, showIssueFormWarning, isValidLegacyIssueTemplate, helpUrl, isLoggedIn} = props\n\n  if (!isLoggedIn || (!issueTemplate && !isValidLegacyIssueTemplate && !showIssueFormWarning)) {\n    return null\n  }\n\n  let content: React.ReactNode = null\n\n  let flashType: 'success' | 'danger' | 'default' | 'warning' | undefined = undefined\n  const errorMessageLinkText: string[] = []\n\n  if (issueTemplate) {\n    if (issueTemplate.valid === false) {\n      flashType = 'danger'\n      if (issueTemplate.errors) {\n        if (issueTemplate.errors.length === 1) {\n          errorMessageLinkText.push('Learn more about this error.')\n        } else {\n          issueTemplate.errors.map((error, index) => {\n            errorMessageLinkText.push(`Learn more about error ${index + 1}.`)\n          })\n        }\n      }\n\n      content = (\n        <>\n          <p>\n            <Octicon icon={AlertIcon} />\n            <strong>\n              There {issueTemplate.errors?.length === 1 ? 'is a problem' : 'are some problems'} with this template\n            </strong>\n          </p>\n\n          {issueTemplate.errors?.map((error, index) => {\n            return (\n              <p key={`error-${index}`}>\n                <SafeHTMLText html={error.message} />\n                {'. '}\n                <Link href={error.link} target=\"_blank\">\n                  {errorMessageLinkText[index]}\n                </Link>\n              </p>\n            )\n          })}\n        </>\n      )\n    } else {\n      if (issueTemplate.structured) {\n        content = (\n          <>\n            <Label sx={{mr: 2}} variant=\"success\">\n              Beta\n            </Label>\n            This file is used as an Issue Form template.{' '}\n            <a href=\"https://github.com/orgs/community/discussions/categories/projects-and-issues\">Give Feedback.</a>\n          </>\n        )\n      } else {\n        content = 'This file is used as a markdown issue template.'\n      }\n    }\n  } else if (showIssueFormWarning) {\n    content = 'Issue form templates are not supported on private repositories.'\n    flashType = 'warning'\n  }\n\n  return (\n    <>\n      {(issueTemplate || showIssueFormWarning) && (\n        <Flash variant={flashType} sx={{mt: 3}}>\n          {content}\n        </Flash>\n      )}\n      {isValidLegacyIssueTemplate && <LegacyIssueTemplateBanner helpUrl={helpUrl} />}\n    </>\n  )\n}\n\nfunction LegacyIssueTemplateBanner({helpUrl}: {helpUrl: string}) {\n  return (\n    <Flash variant=\"warning\" sx={{mt: 3}}>\n      You are using an old version of issue templates. Please update to the new issue template workflow.{' '}\n      <Link href={`${helpUrl}/articles/about-issue-and-pull-request-templates`} target=\"_blank\" inline>\n        Learn more about issue templates.\n      </Link>\n    </Flash>\n  )\n}\n\ntry{ IssueTemplateBanner.displayName ||= 'IssueTemplateBanner' } catch {}\ntry{ LegacyIssueTemplateBanner.displayName ||= 'LegacyIssueTemplateBanner' } catch {}","import PublishBanners from '@github-ui/code-view-shared/components/PublishBanners'\nimport {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {CodeownersError, SplitCodeownersError} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {useCurrentUser} from '@github-ui/current-user'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport {Flash, Link} from '@primer/react'\nimport {useEffect, useRef, useState} from 'react'\n\nimport SplitCodeownersErrorsContext from '../../../contexts/SplitCodeownersErrorsContext'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {\n  CodeownerFileBanner,\n  CodeOwnerValidationState,\n  fetchCodeownersValidity,\n  splitCodeownersError,\n} from './CodeownerFileBanner'\nimport {DiscussionTemplateBanner} from './DiscussionTemplateBanner'\nimport {IssueTemplateBanner} from './IssueTemplateBanner'\n\nexport default function BlobLowerBanners() {\n  const repo = useCurrentRepository()\n  const currentUser = useCurrentUser()\n  const {refInfo, path} = useFilesPageInfo()\n  const {helpUrl} = useReposAppPayload()\n  const {\n    csvError,\n    isCodeownersFile,\n    publishBannersInfo: {showPublishActionBanner, releasePath, dismissActionNoticePath},\n    discussionTemplate,\n    issueTemplate,\n    showIssueFormWarning,\n    isValidLegacyIssueTemplate,\n  } = useCurrentBlob()\n\n  const [splitCodeownersErrors, setSplitCodeownersErrors] = useState<SplitCodeownersError[]>([])\n  const [codeownersValidationState, setCodeownersValidationState] = useState<CodeOwnerValidationState>(\n    CodeOwnerValidationState.LOADING,\n  )\n\n  // Counter used to track the number of times we send off this request so if anything changes while we are waiting\n  // we can throw away the old result\n  const counterRef = useRef(0)\n  useEffect(() => {\n    counterRef.current++\n    const loadCodeownersErrors = async () => {\n      try {\n        const currentVal = counterRef.current\n        const result = await fetchCodeownersValidity(repo, refInfo, path)\n\n        // The results are from a previous request so we can ignore them\n        if (currentVal < counterRef.current) {\n          return\n        }\n\n        if (result.ok) {\n          const data = await result.json()\n          setSplitCodeownersErrors(data.map((error: CodeownersError) => splitCodeownersError(error)))\n          setCodeownersValidationState(CodeOwnerValidationState.VALIDATED)\n        } else {\n          setCodeownersValidationState(CodeOwnerValidationState.ERROR)\n        }\n      } catch (e) {\n        setCodeownersValidationState(CodeOwnerValidationState.ERROR)\n      }\n    }\n    if (isCodeownersFile) {\n      loadCodeownersErrors()\n    }\n  }, [isCodeownersFile, repo, refInfo, path])\n\n  return (\n    <>\n      <PublishBanners\n        showPublishActionBanner={showPublishActionBanner}\n        releasePath={releasePath}\n        dismissActionNoticePath={dismissActionNoticePath}\n      />\n      <IssueTemplateBanner\n        issueTemplate={issueTemplate}\n        showIssueFormWarning={showIssueFormWarning}\n        isValidLegacyIssueTemplate={isValidLegacyIssueTemplate}\n        isLoggedIn={!!currentUser}\n        helpUrl={helpUrl}\n      />\n      {discussionTemplate?.errors && discussionTemplate.errors.length > 0 && (\n        <DiscussionTemplateBanner {...discussionTemplate} />\n      )}\n      <TruncatedBanner />\n      {isCodeownersFile && (\n        <SplitCodeownersErrorsContext.Provider value={splitCodeownersErrors}>\n          <CodeownerFileBanner errors={splitCodeownersErrors} state={codeownersValidationState} />\n        </SplitCodeownersErrorsContext.Provider>\n      )}\n      {csvError && <CSVErrorBanner csvError={csvError} />}\n    </>\n  )\n}\n\nfunction TruncatedBanner() {\n  const {truncated, large, image, renderedFileInfo, rawBlobUrl} = useCurrentBlob()\n\n  return truncated && !large && !(image || renderedFileInfo) ? (\n    <Flash sx={{mt: 3}}>\n      This file has been truncated, but you can{' '}\n      <Link inline href={rawBlobUrl}>\n        view the full file\n      </Link>\n      .\n    </Flash>\n  ) : null\n}\n\nfunction CSVErrorBanner({csvError}: {csvError: SafeHTMLString}) {\n  return (\n    <Flash sx={{mt: 3}} variant=\"warning\">\n      <SafeHTMLBox html={csvError} />\n    </Flash>\n  )\n}\n\ntry{ BlobLowerBanners.displayName ||= 'BlobLowerBanners' } catch {}\ntry{ TruncatedBanner.displayName ||= 'TruncatedBanner' } catch {}\ntry{ CSVErrorBanner.displayName ||= 'CSVErrorBanner' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {useLatestCommit} from '@github-ui/use-latest-commit'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {Flash, Octicon} from '@primer/react'\n\nexport function SpoofedCommitWarning() {\n  const repo = useCurrentRepository()\n  const {refInfo, path} = useFilesPageInfo()\n  const [latestCommit] = useLatestCommit(repo.ownerLogin, repo.name, refInfo.name, path)\n  if (!latestCommit?.isSpoofed) {\n    return null\n  }\n\n  return (\n    <Flash variant=\"warning\" sx={{mt: 3}}>\n      <Octicon icon={AlertIcon} />\n      <span>\n        This commit does not belong to any branch on this repository, and may belong to a fork outside of the\n        repository.\n      </span>\n    </Flash>\n  )\n}\n\ntry{ SpoofedCommitWarning.displayName ||= 'SpoofedCommitWarning' } catch {}","import {useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {SafeHTMLBox} from '@github-ui/safe-html'\nimport {CheckIcon, type Icon, InfoIcon, LawIcon, XIcon} from '@primer/octicons-react'\nimport {Box, Link, Octicon} from '@primer/react'\n\nimport {useDeferredMetadata} from '../../../contexts/DeferredMetadataContext'\n\nexport function BlobLicenseBanner() {\n  const {license} = useDeferredMetadata()\n  const repo = useCurrentRepository()\n  const {helpUrl} = useReposAppPayload()\n\n  const iconMap: {[group: string]: {icon: Icon; color: string}} = {\n    permissions: {icon: CheckIcon, color: 'success.fg'},\n    limitations: {icon: XIcon, color: 'danger.fg'},\n    conditions: {icon: InfoIcon, color: 'accent.fg'},\n  }\n\n  if (!license) return null\n\n  return (\n    <Box sx={{borderColor: 'border.default', borderStyle: 'solid', borderWidth: 1, borderRadius: '6px', mt: 3}}>\n      <Box\n        sx={{\n          display: 'grid',\n          px: 3,\n          py: 1,\n          gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))',\n          gap: 2,\n        }}\n        className={'blob-license-banner-outer'}\n      >\n        <Box sx={{display: 'flex', flex: '1', flexDirection: 'column', pr: 3}}>\n          <Box sx={{display: 'flex', alignItems: 'center'}}>\n            <Octicon icon={LawIcon} size={32} />\n            <Box sx={{display: 'flex', flexDirection: 'column', ml: 2}}>\n              <Box sx={{fontSize: 0, color: 'fg.muted'}}>\n                {`${repo.ownerLogin}/${repo.name} is licensed under`}{' '}\n                {license.name.toLowerCase().startsWith('the ') ? `` : ` the`}\n              </Box>\n              <h3>{license.name}</h3>\n            </Box>\n          </Box>\n          <SafeHTMLBox html={license.description} sx={{fontSize: 0, color: 'fg.muted', mt: 2, flexWrap: 'wrap'}} />\n        </Box>\n        <Box sx={{display: 'flex', flex: '1'}}>\n          {Object.keys(license.rules).map((group, index) => {\n            return (\n              <Box sx={{display: 'flex', flexDirection: 'column', flex: '1', pb: 3}} key={index}>\n                <Box sx={{display: 'flex', mb: 2}} as=\"h5\">\n                  {group.charAt(0).toUpperCase() + group.substring(1)}\n                </Box>\n                {license.rules[group]!.map(rule => (\n                  <Box key={rule.tag} sx={{fontSize: 0}}>\n                    <Octicon icon={iconMap[group]!.icon} size={13} sx={{color: iconMap[group]!.color, mr: 1}} />\n                    {rule.label}\n                  </Box>\n                ))}\n              </Box>\n            )\n          })}\n        </Box>\n      </Box>\n      <Box\n        sx={{\n          borderTop: '1px solid',\n          borderColor: 'border.default',\n          fontSize: 0,\n          px: 3,\n          py: 2,\n        }}\n      >\n        This is not legal advice.&nbsp;\n        <Link inline href={`${helpUrl}/articles/licensing-a-repository/#disclaimer`}>\n          Learn more about repository licenses\n        </Link>\n      </Box>\n    </Box>\n  )\n}\n\ntry{ BlobLicenseBanner.displayName ||= 'BlobLicenseBanner' } catch {}","import {Flash, Link} from '@primer/react'\n\nexport function InvalidCitationWarning({citationHelpUrl}: {citationHelpUrl: string}) {\n  return (\n    <Flash variant=\"warning\" sx={{mt: 3}}>\n      Your <strong>CITATION.cff</strong> file cannot be parsed. Make sure the formatting is correct.{' '}\n      <Link inline href={citationHelpUrl}>\n        Learn more about CITATION files.\n      </Link>\n    </Flash>\n  )\n}\n\ntry{ InvalidCitationWarning.displayName ||= 'InvalidCitationWarning' } catch {}","import {Flash, Link} from '@primer/react'\n\nexport function OverridingGlobalFundingFileWarning({\n  globalPreferredFundingPath,\n}: {\n  globalPreferredFundingPath: string | null\n}) {\n  return (\n    <Flash sx={{mt: 3}}>\n      This file is overriding the organization-wide <code>FUNDING.yml</code> file. Removing <code>FUNDING.yml</code> in\n      this repository will use the organization default.\n      <Link inline href={globalPreferredFundingPath ?? undefined}>\n        {' '}\n        View organization funding file.\n      </Link>\n    </Flash>\n  )\n}\n\ntry{ OverridingGlobalFundingFileWarning.displayName ||= 'OverridingGlobalFundingFileWarning' } catch {}","import {useDeferredMetadata} from '../../../contexts/DeferredMetadataContext'\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {SpoofedCommitWarning} from '../../headers/SpoofedCommitWarning'\nimport {BlobLicenseBanner} from './BlobLicenseBanner'\nimport {InvalidCitationWarning} from './InvalidCitationWarning'\nimport {OverridingGlobalFundingFileWarning} from './OverridingGlobalFundingFileWarning'\n\nexport default function BlobMidBanners() {\n  const {\n    topBannersInfo: {\n      overridingGlobalFundingFile,\n      globalPreferredFundingPath,\n      showInvalidCitationWarning,\n      citationHelpUrl,\n    },\n  } = useCurrentBlob()\n\n  const {showLicenseMeta} = useDeferredMetadata()\n\n  return (\n    <>\n      {showLicenseMeta && <BlobLicenseBanner />}\n      {showInvalidCitationWarning && <InvalidCitationWarning citationHelpUrl={citationHelpUrl} />}\n      <SpoofedCommitWarning />\n      {overridingGlobalFundingFile && (\n        <OverridingGlobalFundingFileWarning globalPreferredFundingPath={globalPreferredFundingPath} />\n      )}\n    </>\n  )\n}\n\ntry{ BlobMidBanners.displayName ||= 'BlobMidBanners' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {blobPath} from '@github-ui/paths'\nimport {verifiedFetch} from '@github-ui/verified-fetch'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {Box, Button, Flash, Link, Octicon, PointerBox, Text} from '@primer/react'\nimport {useCallback} from 'react'\n\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\n\nexport function DependabotConfigurationBanner() {\n  const {defaultBranch} = useCurrentRepository()\n  const {\n    refInfo: {name: currentRef},\n  } = useFilesPageInfo()\n  const {\n    dependabotInfo: {showConfigurationBanner},\n  } = useCurrentBlob()\n\n  if (!showConfigurationBanner) return null\n\n  const isDefaultBranch = defaultBranch === currentRef\n\n  return isDefaultBranch ? <DefaultBranchDependabotConfigurationBanner /> : <DirectionsForNonDefaultBranch />\n}\n\nfunction DefaultBranchDependabotConfigurationBanner() {\n  const {\n    dependabotInfo: {\n      configFilePath,\n      networkDependabotPath,\n      dismissConfigurationNoticePath,\n      configurationNoticeDismissed,\n    },\n  } = useCurrentBlob()\n\n  const dismissNotice = useCallback(\n    () => verifiedFetch(dismissConfigurationNoticePath, {method: 'POST'}),\n    [dismissConfigurationNoticePath],\n  )\n\n  if (configurationNoticeDismissed) return null\n\n  return (\n    <Box sx={{position: 'absolute', zIndex: 2, left: '50%', transform: 'translate(-50%, 0)'}}>\n      <PointerBox caret=\"top\" sx={{backgroundColor: 'canvas.overlay', width: 300, p: 3}}>\n        <Text as=\"h5\" sx={{mb: 1}}>\n          Dependabot\n        </Text>\n        <Text as=\"p\" sx={{mb: 3}}>\n          Dependabot creates pull requests to keep your dependencies secure and up-to-date.\n        </Text>\n        <Text as=\"p\" sx={{mb: 3}}>\n          You can opt out at any time by removing the <code>{configFilePath}</code> config file.\n        </Text>\n        <Box sx={{display: 'flex'}}>\n          <Button as=\"a\" href={networkDependabotPath}>\n            View update status\n          </Button>\n          <Button variant=\"invisible\" sx={{color: 'fg.muted', ml: 2}} onClick={dismissNotice}>\n            Dismiss\n          </Button>\n        </Box>\n      </PointerBox>\n    </Box>\n  )\n}\n\nfunction DirectionsForNonDefaultBranch() {\n  const {defaultBranch, name, ownerLogin} = useCurrentRepository()\n  const {path} = useFilesPageInfo()\n  const defaultBranchPath = blobPath({owner: ownerLogin, repo: name, commitish: defaultBranch, filePath: path})\n  return (\n    <Flash variant=\"warning\">\n      <h5>\n        <Octicon icon={AlertIcon} />\n        Cannot configure Dependabot\n      </h5>\n      <p>\n        To configure Dependabot, you must use{' '}\n        <Link inline href={defaultBranchPath}>\n          this repository&apos;s default branch\n        </Link>\n      </p>\n    </Flash>\n  )\n}\n\ntry{ DependabotConfigurationBanner.displayName ||= 'DependabotConfigurationBanner' } catch {}\ntry{ DefaultBranchDependabotConfigurationBanner.displayName ||= 'DefaultBranchDependabotConfigurationBanner' } catch {}\ntry{ DirectionsForNonDefaultBranch.displayName ||= 'DirectionsForNonDefaultBranch' } catch {}","import {linkButtonSx} from '@github-ui/code-view-shared/utilities/styles'\nimport {ownerPath, repositoryPath} from '@github-ui/paths'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport {ScreenSize} from '@github-ui/screen-size'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\nimport {FileIcon} from '@primer/octicons-react'\nimport {Box, Breadcrumbs, Link, LinkButton, Octicon, Text} from '@primer/react'\nimport type {PropsWithChildren} from 'react'\n\ninterface OrgOnboardingTipProps {\n  mediaUrl?: string\n  mediaPreviewSrc?: string\n  iconSvg: SafeHTMLString\n  taskTitle: string\n  taskPath: string\n  org: string\n}\n\nexport function OrgOnboardingTip({\n  children,\n  mediaUrl,\n  mediaPreviewSrc,\n  iconSvg,\n  taskTitle,\n  taskPath,\n  org,\n}: PropsWithChildren<OrgOnboardingTipProps>) {\n  return (\n    <Box\n      as=\"section\"\n      sx={{\n        position: 'relative',\n        display: 'flex',\n        borderColor: 'border.muted',\n        borderStyle: 'solid',\n        borderWidth: 1,\n        borderRadius: '6px',\n        backgroundColor: 'canvas.subtle',\n        p: 3,\n        mt: 3,\n      }}\n    >\n      <Box sx={{display: 'flex'}}>\n        <SuggestIcon iconSvg={iconSvg} />\n\n        <Box sx={{display: 'flex', flexDirection: 'column', ml: 3}}>\n          <Breadcrumbs>\n            <Breadcrumbs.Item href={ownerPath({owner: org})}>Tasks</Breadcrumbs.Item>\n            <Breadcrumbs.Item href={taskPath} sx={{color: 'fg.default'}}>\n              {taskTitle}\n            </Breadcrumbs.Item>\n          </Breadcrumbs>\n          {children}\n        </Box>\n      </Box>\n      <Media mediaPreviewSrc={mediaPreviewSrc} mediaUrl={mediaUrl} />\n    </Box>\n  )\n}\n\nfunction SuggestIcon({iconSvg}: {iconSvg: SafeHTMLString}) {\n  return (\n    <Box sx={{position: 'relative', maxHeight: 48}}>\n      <SafeHTMLBox\n        html={iconSvg}\n        sx={{\n          width: 48,\n          height: 48,\n          background:\n            'radial-gradient(circle, rgba(141, 123, 255, 1) 0%, rgba(123, 133, 255, 1) 48%, rgba(141, 123, 255, 1) 85%, rgba(141, 123, 255, 1) 98%)',\n          borderRadius: 2,\n          p: 1,\n          '& path': {fill: '#fff'},\n        }}\n      />\n      <Bubble size={6} color=\"#6c84e9\" bottom={-7} left={-7} />\n      <Bubble size={4} color=\"#9e7bff\" top={-4} right={4} />\n      <Bubble size={6} color=\"#6c84e9\" top={-7} right={-8} />\n    </Box>\n  )\n}\n\nfunction Bubble({\n  size,\n  color,\n  left,\n  right,\n  top,\n  bottom,\n}: {\n  size: number\n  color: string\n  left?: number\n  right?: number\n  top?: number\n  bottom?: number\n}) {\n  return (\n    <Box\n      sx={{\n        position: 'absolute',\n        width: size,\n        height: size,\n        borderRadius: '50%',\n        left: `${left}px`,\n        right: `${right}px`,\n        top: `${top}px`,\n        bottom: `${bottom}px`,\n        backgroundColor: color,\n      }}\n    />\n  )\n}\n\nfunction Media({mediaUrl, mediaPreviewSrc}: Pick<OrgOnboardingTipProps, 'mediaUrl' | 'mediaPreviewSrc'>) {\n  //on the server assume we are on mobile where an image rendering then disappearing would be far more annoying\n  //than an image popping in on a desktop browser\n  if ((ssrSafeWindow?.innerWidth ?? 0) < ScreenSize.xlarge || !mediaUrl || !mediaPreviewSrc) return null\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        background: 'center / contain no-repeat url(/images/modules/dashboard/onboarding/glow-1.png)',\n        minWidth: 500,\n      }}\n      className={'org-onboarding-tip-media'}\n    >\n      <Link href={mediaUrl} sx={{display: 'flex', justifyContent: 'center'}}>\n        <img src={mediaPreviewSrc} alt=\"Guidance\" loading=\"lazy\" style={{width: '50%', height: '50%'}} />\n      </Link>\n    </Box>\n  )\n}\n\ninterface ActionsOnboardingPromptProps {\n  repo: string\n  owner: string\n}\nexport function ActionsOnboardingPrompt({repo, owner}: ActionsOnboardingPromptProps) {\n  return (\n    <div>\n      <Text as=\"h3\" sx={{mb: 1}}>\n        Auto-assign new issue with GitHub Actions\n      </Text>\n      <Box sx={{color: 'fg.muted'}}>\n        <p>\n          The <Text sx={{fontWeight: 600, fontFamily: 'monospace'}}>auto-assign.yml</Text> file below lives inside your{' '}\n          <Text sx={{fontWeight: 600, fontFamily: 'monospace'}}>demo-repository</Text> and defines when and how its\n          automatically triggered. This{' '}\n          <a href=\"https://github.com/marketplace/actions/auto-assign-issues-prs\" target=\"_blank\" rel=\"noreferrer\">\n            Auto Assign workflow\n          </a>{' '}\n          happens to add reviewers and assignees to issues and pull requests when theyre opened in this repository.\n        </p>\n\n        <p>\n          You can see the results of this workflow in any{' '}\n          <a href={repositoryPath({owner, repo, action: 'issues'})}>issue</a> or{' '}\n          <a href={repositoryPath({owner, repo, action: 'pulls'})}>pull request</a> that you create in this repository,\n          as itll assign them to the specified members. And you can see a log of any workflows you run in{' '}\n          <a href={repositoryPath({owner, repo, action: 'actions'})}>your repositorys Actions tab.</a>\n        </p>\n\n        <Box sx={{display: 'flex', alignItems: 'center', mt: 3}}>\n          <LinkButton variant=\"primary\" href={repositoryPath({owner, repo, action: 'issues/new'})} sx={linkButtonSx}>\n            Create new issue to see results\n          </LinkButton>\n\n          <Link sx={{ml: 4}} href=\"https://docs.github.com/actions\" target=\"_blank\">\n            <Octicon icon={FileIcon} sx={{mr: 1}} />\n            Learn how automation works on GitHub\n          </Link>\n        </Box>\n      </Box>\n    </div>\n  )\n}\n\ntry{ OrgOnboardingTip.displayName ||= 'OrgOnboardingTip' } catch {}\ntry{ SuggestIcon.displayName ||= 'SuggestIcon' } catch {}\ntry{ Bubble.displayName ||= 'Bubble' } catch {}\ntry{ Media.displayName ||= 'Media' } catch {}\ntry{ ActionsOnboardingPrompt.displayName ||= 'ActionsOnboardingPrompt' } catch {}","import type {PlanSupportInfo} from '@github-ui/code-view-types'\nimport {Box, Button, Flash, Text} from '@primer/react'\n\nexport interface PlanSupportBannerProps extends PlanSupportInfo {\n  feature?: string\n  featureName?: string\n}\n\nexport function PlanSupportBanner({\n  feature,\n  featureName,\n  repoIsFork,\n  repoOwnedByCurrentUser,\n  requestFullPath,\n  showFreeOrgGatedFeatureMessage,\n  showPlanSupportBanner,\n  upgradeDataAttributes,\n  upgradePath,\n}: PlanSupportBannerProps) {\n  const dataAttributes: {[key: string]: string} = {}\n  if (upgradeDataAttributes) {\n    for (const key in upgradeDataAttributes) {\n      dataAttributes[`data-${key}`] = upgradeDataAttributes[key]!\n    }\n  }\n  return showPlanSupportBanner ? (\n    <Flash variant=\"warning\" sx={{mt: 3}}>\n      {repoOwnedByCurrentUser ? (\n        repoIsFork ? (\n          `This repository is a fork, and inherits the features of the parent repository. Contact the owner of the root repository to enable ${\n            featureName || 'this feature'\n          }`\n        ) : (\n          <Box sx={{display: 'flex', alignItems: 'center'}}>\n            <Text sx={{flexGrow: 1}}>{`Upgrade to GitHub Pro or make this repository public to enable ${\n              featureName || 'this feature'\n            }.`}</Text>\n            <UpgradeButton\n              dataAttributes={dataAttributes}\n              individual={true}\n              requestFullPath={requestFullPath}\n              feature={feature}\n              upgradePath={upgradePath}\n            />\n          </Box>\n        )\n      ) : showFreeOrgGatedFeatureMessage ? (\n        <Box sx={{display: 'flex', alignItems: 'center'}}>\n          <Text sx={{flexGrow: 1}}>{`Upgrade to GitHub Team or make this repository public to enable ${\n            featureName || 'this feature'\n          }.`}</Text>\n          <UpgradeButton\n            dataAttributes={dataAttributes}\n            individual={false}\n            requestFullPath={requestFullPath}\n            feature={feature}\n            upgradePath={upgradePath}\n          />\n        </Box>\n      ) : (\n        `Contact the owner of the repository to enable ${featureName || 'this feature'}.`\n      )}\n    </Flash>\n  ) : null\n}\n\nfunction UpgradeButton({\n  dataAttributes,\n  individual,\n  requestFullPath,\n  feature,\n  upgradePath,\n}: {\n  dataAttributes: {[key: string]: string}\n  individual: boolean\n  requestFullPath: string\n  feature?: string\n  upgradePath: string\n}) {\n  return (\n    <Button\n      {...dataAttributes}\n      data-ga-click={`Change ${\n        individual ? 'individual' : 'organization'\n      }, click to upgrade, ref_page:${requestFullPath};ref_cta:Upgrade now;ref_loc:${feature};location:${feature};text:Upgrade now`}\n      onClick={() => {\n        location.href = upgradePath\n      }}\n    >\n      Upgrade now\n    </Button>\n  )\n}\n\ntry{ PlanSupportBanner.displayName ||= 'PlanSupportBanner' } catch {}\ntry{ UpgradeButton.displayName ||= 'UpgradeButton' } catch {}","import {useCurrentRepository} from '@github-ui/current-repository'\nimport {Box} from '@primer/react'\n\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {DependabotConfigurationBanner} from './DependabotConfigurationBanner'\nimport {ActionsOnboardingPrompt, OrgOnboardingTip} from './OrgOnboardingTip'\nimport {PlanSupportBanner} from './PlanSupportBanner'\n\nexport default function BlobTopBanners() {\n  const {planSupportInfo, topBannersInfo} = useCurrentBlob()\n  const {actionsOnboardingTip} = topBannersInfo\n  const repo = useCurrentRepository()\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'column'}}>\n      <PlanSupportBanner {...planSupportInfo} feature=\"codeowners\" featureName=\"CODEOWNERS\" />\n      <DependabotConfigurationBanner />\n      {actionsOnboardingTip && (\n        <OrgOnboardingTip\n          iconSvg={actionsOnboardingTip.iconSvg}\n          mediaPreviewSrc={actionsOnboardingTip.mediaPreviewSrc}\n          mediaUrl={actionsOnboardingTip.mediaUrl}\n          taskTitle={actionsOnboardingTip.taskTitle}\n          taskPath={actionsOnboardingTip.taskPath}\n          org={actionsOnboardingTip.orgName}\n        >\n          <ActionsOnboardingPrompt owner={repo.ownerLogin} repo={repo.name} />\n        </OrgOnboardingTip>\n      )}\n    </Box>\n  )\n}\n\ntry{ BlobTopBanners.displayName ||= 'BlobTopBanners' } catch {}","import {useCodeViewBanners} from '@github-ui/code-view-shared/contexts/CodeViewBannersContext'\nimport {CurrentTreeProvider, useCurrentTree} from '@github-ui/code-view-shared/contexts/CurrentTreeContext'\nimport {\n  type BlobPayload,\n  type FilePagePayload,\n  isBlobPayload,\n  isTreePayload,\n  type TreePayload,\n} from '@github-ui/code-view-types'\nimport {Flash} from '@primer/react'\n\nimport {CurrentBlobProvider} from '../hooks/CurrentBlob'\nimport {forceAnnouncementToScreenReaders} from '../utilities/lines'\nimport {BlameBanners} from './blob/Banners/BlameBanners'\nimport BlobLowerBanners from './blob/Banners/BlobLowerBanners'\nimport BlobMidBanners from './blob/Banners/BlobMidBanners'\nimport BlobTopBanners from './blob/Banners/BlobTopBanners'\nimport {SpoofedCommitWarning} from './headers/SpoofedCommitWarning'\n\nexport default function CodeViewBanners({payload}: {payload: FilePagePayload}) {\n  if (isTreePayload(payload)) {\n    return <TreeBanners tree={payload.tree} />\n  } else if (isBlobPayload(payload)) {\n    return <BlobBanners blob={payload.blob} />\n  }\n\n  return null\n}\n\nfunction TreeBanners({tree}: {tree: TreePayload}) {\n  return (\n    <CurrentTreeProvider payload={tree}>\n      <SpoofedCommitWarning />\n      <TruncatedTreeBanner />\n      <CodeViewContextBanners />\n    </CurrentTreeProvider>\n  )\n}\n\nfunction BlobBanners({blob}: {blob: BlobPayload}) {\n  return (\n    <CurrentBlobProvider blob={blob}>\n      <BlobTopBanners />\n      <BlobMidBanners />\n      <BlobLowerBanners />\n      <BlameBanners />\n      <CodeViewContextBanners />\n    </CurrentBlobProvider>\n  )\n}\n\nfunction TruncatedTreeBanner() {\n  const {items, totalCount} = useCurrentTree()\n  const omittedCount = totalCount - items.length\n  return omittedCount > 0 ? (\n    <Flash variant=\"warning\" data-testid=\"repo-truncation-warning\" sx={{mt: 3}}>\n      Sorry, we had to truncate this directory to {items.length.toLocaleString()} files. {omittedCount.toLocaleString()}{' '}\n      {omittedCount === 1 ? 'entry was' : 'entries were'} omitted from the list. Latest commit info may be omitted.\n    </Flash>\n  ) : null\n}\n\nfunction CodeViewContextBanners() {\n  const banners = useCodeViewBanners()\n  let messageToAnnounce = ''\n  for (const b of banners) {\n    messageToAnnounce += b.message\n  }\n  forceAnnouncementToScreenReaders(messageToAnnounce)\n  return (\n    <>\n      {banners.map((b, i) => (\n        <Flash key={i} variant={b.variant} sx={{mt: 3}}>\n          {b.message}\n        </Flash>\n      ))}\n    </>\n  )\n}\n\ntry{ CodeViewBanners.displayName ||= 'CodeViewBanners' } catch {}\ntry{ TreeBanners.displayName ||= 'TreeBanners' } catch {}\ntry{ BlobBanners.displayName ||= 'BlobBanners' } catch {}\ntry{ TruncatedTreeBanner.displayName ||= 'TruncatedTreeBanner' } catch {}\ntry{ CodeViewContextBanners.displayName ||= 'CodeViewContextBanners' } catch {}","import type {DeletedDiff} from '@github-ui/code-view-types'\nimport {CopyToClipboardButton} from '@github-ui/copy-to-clipboard'\nimport {DiffSquares} from '@github-ui/diffs/DiffParts'\nimport {SafeHTMLBox} from '@github-ui/safe-html'\nimport {ChevronDownIcon, ChevronRightIcon} from '@primer/octicons-react'\nimport {Box, IconButton, Link as PrimerLink, Spinner, Text} from '@primer/react'\nimport {useState} from 'react'\n\nexport function DiffEntry({diff, index}: {diff: DeletedDiff; index: number}) {\n  const [collapsed, setCollapsed] = useState(false)\n  const [showDiff, setShowDiff] = useState(false)\n  const [diffLoaded, setDiffLoaded] = useState(false)\n\n  const squares: Array<'addition' | 'deletion' | 'neutral'> = []\n  for (let i = 0; i < 5; i++) {\n    if (diff.deletions > i) {\n      squares.push('deletion')\n    } else {\n      squares.push('neutral')\n    }\n  }\n  if (diff.diffHTML) {\n    return (\n      <div id=\"readme\" className=\"readme prose-diff html-blob blob\">\n        <SafeHTMLBox html={diff.diffHTML} className=\"markdown-body container-lg\" />\n      </div>\n    )\n  }\n\n  return (\n    <Box\n      sx={{border: '1px solid', borderColor: 'border.default', borderRadius: '6px', mt: 3}}\n      id={`diff-entry-${index}`}\n    >\n      <Box\n        sx={{\n          backgroundColor: 'canvas.subtle',\n          borderBottom: '1px solid',\n          borderColor: 'border.default',\n          display: 'flex',\n          py: 1,\n          px: 2,\n          alignItems: 'center',\n          gap: 2,\n        }}\n      >\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          aria-label=\"Search\"\n          icon={collapsed ? ChevronRightIcon : ChevronDownIcon}\n          size=\"small\"\n          variant=\"invisible\"\n          onClick={() => setCollapsed(!collapsed)}\n        />\n        <Text sx={{color: 'fg.muted'}}>{diff.deletions}</Text>\n        <DiffSquares squares={squares} />\n        <PrimerLink sx={{color: 'fg.default', cursor: 'pointer'}} underline={false} href={`#diff-entry-${index}`}>\n          {diff.path}\n        </PrimerLink>\n        <CopyToClipboardButton textToCopy={diff.path} ariaLabel={'Copy path to clipboard'} />\n      </Box>\n      {collapsed ? null : (\n        <Box sx={{px: showDiff ? 0 : 3, py: showDiff ? 0 : 4, position: 'relative'}} tabIndex={-1}>\n          {showDiff ? (\n            <include-fragment\n              data-testid=\"delete-diff-fragment\"\n              src={diff.loadDiffPath}\n              onLoad={() => setDiffLoaded(true)}\n            >\n              {!diffLoaded && (\n                // The height of the placeholder is 137px\n                <Box sx={{display: 'flex', alignItems: 'center', justifyContent: 'center', height: '137px'}}>\n                  <Spinner />\n                </Box>\n              )}\n            </include-fragment>\n          ) : (\n            <>\n              <DiffPlaceholderSvg />\n              <Box\n                sx={{\n                  position: 'absolute',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  top: 0,\n                  left: 0,\n                  height: '100%',\n                  width: '100%',\n                }}\n              >\n                <PrimerLink onClick={() => setShowDiff(true)} sx={{cursor: 'pointer'}}>\n                  Load diff\n                </PrimerLink>\n                This file was deleted.\n              </Box>\n            </>\n          )}\n        </Box>\n      )}\n    </Box>\n  )\n}\n\nfunction DiffPlaceholderSvg() {\n  return (\n    <Box\n      as=\"svg\"\n      aria-hidden=\"true\"\n      className=\"width-full\"\n      viewBox=\"0 0 340 84\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      sx={{height: '84', maxWidth: '340px'}}\n    >\n      <Box\n        as=\"path\"\n        className=\"js-diff-placeholder\"\n        clipPath=\"url(#diff-placeholder)\"\n        d=\"M0 0h340v84H0z\"\n        fillRule=\"evenodd\"\n        sx={{fill: 'canvas.subtle'}}\n      />\n    </Box>\n  )\n}\n\ntry{ DiffEntry.displayName ||= 'DiffEntry' } catch {}\ntry{ DiffPlaceholderSvg.displayName ||= 'DiffPlaceholderSvg' } catch {}","import {useFilesPageInfo, useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {DeleteInfo, WebCommitInfo} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {DiffPlaceholder} from '@github-ui/diffs/DiffParts'\nimport {Box, Flash, Heading} from '@primer/react'\n\nimport {EditingForkBanner} from '../blob-edit/banners/EditingForkBanner'\nimport {EditIssues} from '../blob-edit/EditIssues'\nimport {DiffEntry} from './DeleteViewEntry'\n\nexport function DeleteViewContent({deleteInfo, webCommitInfo}: {deleteInfo: DeleteInfo; webCommitInfo: WebCommitInfo}) {\n  const {path} = useFilesPageInfo()\n  const {helpUrl} = useReposAppPayload()\n  const repo = useCurrentRepository()\n\n  if (webCommitInfo.shouldFork || webCommitInfo.shouldUpdate || webCommitInfo.lockedOnMigration) {\n    return <EditIssues binary={false} helpUrl={helpUrl} webCommitInfo={webCommitInfo} />\n  }\n\n  return (\n    <Box sx={{maxWidth: '1280px', mx: 'auto'}}>\n      <Heading as=\"h1\" className=\"sr-only\">{`Deleting ${deleteInfo.isBlob ? '' : 'directory '}${\n        repo.name\n      }/${path}. Commit changes to save.`}</Heading>\n      <DiffPlaceholder />\n      {webCommitInfo.forkedRepo && (\n        <EditingForkBanner forkName={webCommitInfo.forkedRepo.name} forkOwner={webCommitInfo.forkedRepo.owner} />\n      )}\n      {deleteInfo.truncated && (\n        <Flash variant=\"warning\" className=\"mb-2\">\n          The diff you&apos;re trying to view is too large. We only load the first 1000 changed files.\n        </Flash>\n      )}\n\n      {deleteInfo.diffs.map((diff, index) => {\n        return <DiffEntry key={index} diff={diff} index={index} />\n      })}\n    </Box>\n  )\n}\n\ntry{ DeleteViewContent.displayName ||= 'DeleteViewContent' } catch {}","import {DirectoryRichtextContent} from '@github-ui/code-view-shared/components/directory/DirectoryRichtextContent'\nimport {EditButton} from '@github-ui/code-view-shared/components/EditButton'\nimport TableOfContentsPanel from '@github-ui/code-view-shared/components/TableOfContentsPanel'\nimport {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {PanelType, ReadmeBlobPayload} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport {Box, Heading, Link} from '@primer/react'\n\nimport TableOfContents from '../../headers/header-components/TableOfContents'\nimport {Panel} from '../../Panel'\n\nexport function DirectoryReadmePreview({\n  openPanel,\n  readme,\n  setOpenPanel,\n  stickyHeaderHeight,\n}: {\n  openPanel: PanelType | undefined\n  readme: ReadmeBlobPayload\n  setOpenPanel: (panel: PanelType | undefined) => void\n  stickyHeaderHeight?: number\n}) {\n  const {displayName, errorMessage, richText, headerInfo, timedOut} = readme\n  const {toc} = headerInfo || {}\n  const repo = useCurrentRepository()\n  const {refInfo, path} = useFilesPageInfo()\n  const readmePath = path && path !== '/' ? `${path}/${displayName}` : displayName\n\n  return (\n    <Box sx={{minWidth: 0, display: 'flex', flexDirection: 'row', justifyContent: 'space-between', gap: 3}}>\n      <Box\n        id=\"readme\"\n        sx={{\n          borderColor: 'border.default',\n          borderWidth: 1,\n          borderStyle: 'solid',\n          borderRadius: 2,\n          width: openPanel === 'toc' ? '65%' : '100%',\n        }}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            gap: 2,\n            pr: 2,\n            pl: 3,\n            py: 2,\n            borderBottom: '1px solid',\n            borderColor: 'border.default',\n          }}\n        >\n          <Heading as=\"h2\" sx={{fontSize: 1, flexGrow: 1}}>\n            <Link sx={{color: 'fg.default', '&:hover': {color: 'accent.fg'}}} href=\"#readme\">\n              {displayName}\n            </Link>\n          </Heading>\n          {refInfo.canEdit && (\n            <EditButton\n              editPath={repositoryTreePath({repo, commitish: refInfo.name, action: 'edit', path: readmePath})}\n              editTooltip=\"Edit README\"\n            />\n          )}\n          <TableOfContents toc={toc} openPanel={openPanel} setOpenPanel={setOpenPanel} isDirectoryReadme={true} />\n        </Box>\n        <DirectoryRichtextContent\n          richText={richText}\n          errorMessage={errorMessage}\n          path={readmePath}\n          stickyHeaderHeight={stickyHeaderHeight}\n          timedOut={timedOut}\n        />\n      </Box>\n\n      {openPanel === 'toc' && (\n        <Panel sx={{height: 'fit-content', width: '35%'}}>\n          <TableOfContentsPanel\n            onClose={() => {\n              setOpenPanel(undefined)\n            }}\n            toc={toc}\n          />\n        </Panel>\n      )}\n    </Box>\n  )\n}\n\ntry{ DirectoryReadmePreview.displayName ||= 'DirectoryReadmePreview' } catch {}","import {Box} from '@primer/react'\nimport {useRef} from 'react'\n\nimport {useStickyHeaderSx, useStickyObserver} from '../../hooks/use-sticky-observer'\nimport FileNameStickyHeader from './FileNameStickyHeader'\n\nexport default function FolderViewHeader({\n  showTree,\n  treeToggleElement,\n}: {\n  showTree: boolean\n  treeToggleElement: JSX.Element | null\n}) {\n  const headerRef = useRef(null)\n  const isStickied = useStickyObserver(headerRef)\n  const stickyHeaderSx = useStickyHeaderSx()\n  const border = '1px solid var(--borderColor-default, var(--color-border-default))'\n  return (\n    <Box className=\"react-blob-view-header-sticky\" sx={{...stickyHeaderSx, zIndex: isStickied ? 1 : 0}} ref={headerRef}>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          backgroundColor: 'canvas.subtle',\n          borderBottom: isStickied ? border : 'none',\n          overflow: 'hidden',\n        }}\n      >\n        <FileNameStickyHeader isStickied={isStickied} showTree={showTree} treeToggleElement={treeToggleElement} />\n      </Box>\n    </Box>\n  )\n}\n\ntry{ FolderViewHeader.displayName ||= 'FolderViewHeader' } catch {}","import {BranchInfoBar, BranchInfoBarErrorBanner} from '@github-ui/code-view-shared/components/directory/BranchInfoBar'\nimport {DirectoryContent} from '@github-ui/code-view-shared/components/directory/DirectoryContent'\nimport {LatestCommitSingleLine} from '@github-ui/code-view-shared/components/LatestCommit'\nimport {CurrentTreeProvider} from '@github-ui/code-view-shared/contexts/CurrentTreeContext'\nimport {useOpenPanel} from '@github-ui/code-view-shared/contexts/OpenPanelContext'\nimport type {TreePayload} from '@github-ui/code-view-types'\nimport {ErrorBoundary} from '@github-ui/react-core/error-boundary'\nimport {Box} from '@primer/react'\n\nimport {DirectoryReadmePreview} from './directory/DirectoryContent/DirectoryReadmePreview'\nimport FolderViewHeader from './headers/FolderViewHeader'\n\nexport default function FileTreeViewContent({\n  tree,\n  showTree,\n  treeToggleElement,\n}: {\n  tree: TreePayload\n  showTree: boolean\n  treeToggleElement: JSX.Element\n}) {\n  const {openPanel, setOpenPanel} = useOpenPanel()\n\n  return (\n    <CurrentTreeProvider payload={tree}>\n      <LatestCommitSingleLine />\n\n      {tree.showBranchInfobar && (\n        <ErrorBoundary fallback={<BranchInfoBarErrorBanner />}>\n          <BranchInfoBar />\n        </ErrorBoundary>\n      )}\n      <FolderViewHeader showTree={showTree} treeToggleElement={treeToggleElement} />\n      <Box sx={{display: 'flex', flexDirection: 'column', gap: 3}}>\n        <DirectoryContent />\n        {tree.readme && (\n          <DirectoryReadmePreview\n            openPanel={openPanel}\n            setOpenPanel={setOpenPanel}\n            readme={tree.readme}\n            stickyHeaderHeight={50}\n          />\n        )}\n      </Box>\n    </CurrentTreeProvider>\n  )\n}\n\ntry{ FileTreeViewContent.displayName ||= 'FileTreeViewContent' } catch {}","import {CodeViewError} from '@github-ui/code-view-shared/components/CodeViewError'\nimport {DuplicateOnKeydownButton} from '@github-ui/code-view-shared/components/DuplicateOnKeydownButton'\nimport {AllShortcutsEnabledProvider} from '@github-ui/code-view-shared/contexts/AllShortcutsEnabledContext'\nimport {CodeViewBannersProvider} from '@github-ui/code-view-shared/contexts/CodeViewBannersContext'\nimport {FileQueryProvider} from '@github-ui/code-view-shared/contexts/FileQueryContext'\nimport {\n  type FilesPageAction,\n  FilesPageInfoProvider,\n  useReposAppPayload,\n} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {OpenPanelProvider} from '@github-ui/code-view-shared/contexts/OpenPanelContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useCanonicalObject} from '@github-ui/code-view-shared/hooks/use-canonical-object'\nimport {useFilePagePayload} from '@github-ui/code-view-shared/hooks/use-file-page-payload'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {extractFileTree} from '@github-ui/code-view-shared/utilities/make-payload'\nimport {\n  type FilePagePayload,\n  isBlamePayload,\n  isBlobPayload,\n  isDeletePayload,\n  isEditPayload,\n  isTreePayload,\n} from '@github-ui/code-view-types'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport {FileTreeControlProvider, ReposFileTreePane, useTreePane} from '@github-ui/repos-file-tree-view'\nimport {ScreenSize} from '@github-ui/screen-size'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useDisableUserContentScrolling} from '@github-ui/use-disable-user-content-scrolling'\nimport {useHideFooter} from '@github-ui/use-hide-footer'\nimport {Box, Heading, SplitPageLayout} from '@primer/react'\nimport React, {lazy, Suspense, useCallback, useEffect, useState} from 'react'\n\nimport {symbolsHeaderId} from '../components/blob/BlobContent/CodeNav/CodeNavSymbolNavigation'\nimport {ScrollMarksContainer} from '../components/blob/BlobContent/CodeNav/ScrollMarksContainer'\nimport {BlobViewContent} from '../components/BlobViewContent'\nimport CodeViewBanners from '../components/CodeViewBanners'\nimport {DeleteViewContent} from '../components/delete/DeleteViewContent'\nimport FileTreeViewContent from '../components/FileTreeViewContent'\nimport CodeViewHeader from '../components/headers/CodeViewHeader'\nimport {LoadingFallback} from '../components/SuspenseFallback'\nimport {DeferredASTProvider, useLoadDeferredAST} from '../contexts/DeferredASTContext'\nimport {DeferredMetadataProvider, useLoadDeferredMetadata} from '../contexts/DeferredMetadataContext'\nimport {FindInFileOpenProvider} from '../contexts/FindInFileOpenContext'\nimport {useUpdatePanelExpandPreferences} from '../hooks/use-update-panel-expand-preferences'\nimport {textAreaId} from '../utilities/lines'\n\nconst BlobEditor = lazy(() => import('../components/blob-edit/BlobEditor'))\n\nexport default function CodeView({initialPayload}: {initialPayload?: FilePagePayload}) {\n  const payload = useFilePagePayload(initialPayload)\n  const repo = useCurrentRepository()\n  const {findFileWorkerPath} = useReposAppPayload()\n  const {path} = payload\n  const refInfo = useCanonicalObject(payload.refInfo)\n  const isEdit = isEditPayload(payload)\n  const isBlob = isBlobPayload(payload)\n  const isBlame = isBlamePayload(payload)\n  const isDelete = isDeletePayload(payload)\n  const [contentRef, setContentRef] = useState<HTMLDivElement | null>(null)\n  const deferredMetadata = useLoadDeferredMetadata(repo, refInfo, path, payload.error?.httpStatus === 404)\n  const deferredAST = useLoadDeferredAST(\n    repo,\n    refInfo,\n    path,\n    payload.error?.httpStatus === 404,\n    isBlob || isBlame ? payload.blob.rawLines?.length ?? 100000 : 100000,\n  )\n  const treeRef = React.useRef<HTMLDivElement>(null)\n  // when user presses cmd+f6 this controls whether we focus the tree or the content\n  const contentFocused = React.useRef(false)\n  const textAreaFocused = React.useRef(false)\n  // when we focus the content we can try to return focus to the element which previously had it\n  const contentFocusTarget = React.useRef<HTMLElement | null>(null)\n  // when we focus the tree we can try to return focus to the element which previously had it\n  const treeFocusTarget = React.useRef<HTMLElement | null>(null)\n  const reposFileTreeId = 'repos-file-tree'\n  const openPanelRef = React.useRef<string | undefined>()\n\n  const [searchTerm, setSearchTerm] = useState('')\n\n  const {toggleFocusedPaneShortcut} = useShortcut()\n  function toggleFocus() {\n    const symbolsPaneElement = document.getElementById(symbolsHeaderId)\n    const textAreaElement = document.getElementById(textAreaId)\n    if (document.activeElement?.id === textAreaId) {\n      textAreaFocused.current = true\n    }\n    // the user may have moved focus from where we last put it\n    if (contentRef?.contains(document.activeElement) && !textAreaFocused.current) {\n      //the content (but not the text area) is focused\n      contentFocused.current = true\n    } else if (treeRef.current?.contains(document.activeElement)) {\n      contentFocused.current = false\n    }\n    if (!contentFocused.current && !textAreaFocused.current) {\n      // focus the text area\n      const focusTarget = textAreaElement || contentRef\n      treeFocusTarget.current = treeRef.current?.contains(document.activeElement)\n        ? (document.activeElement as HTMLElement)\n        : null\n      contentFocused.current = false\n      focusTarget?.focus()\n    } else if (textAreaFocused.current) {\n      //focus the content\n      const focusTarget = contentFocusTarget.current || symbolsPaneElement || contentRef\n      contentFocused.current = true\n      textAreaFocused.current = false\n      focusTarget?.focus()\n    } else {\n      // focus the tree\n      const focusTarget = treeFocusTarget.current || treeRef.current\n      contentFocusTarget.current = contentRef?.contains(document.activeElement)\n        ? (document.activeElement as HTMLElement)\n        : null\n      contentFocused.current = false\n      textAreaFocused.current = false\n      focusTarget?.focus()\n    }\n  }\n\n  // While this component is mounted, disable user automatic user content scrolling\n  // based on the URL hash. This scrolling is handled by the individual components\n  // that require it.\n  useDisableUserContentScrolling()\n\n  // While this component is mounted, hide the standard footer. The reason we\n  // must do this in javascript is because the footer is retained across Turbo\n  // navigations, so if we omit it in the controller, it may still be present\n  // under some circumstances.\n  useHideFooter(true)\n\n  const fileTree = React.useMemo(\n    () => extractFileTree(payload),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [payload.path, payload.refInfo.currentOid],\n  )\n\n  const updatePanelExpandPreferences = useUpdatePanelExpandPreferences()\n\n  const updateTreeExpandedPreference = useCallback(\n    (isTreeExpanded: boolean) => {\n      updatePanelExpandPreferences(isTreeExpanded, null, null)\n    },\n    [updatePanelExpandPreferences],\n  )\n  const {isTreeExpanded, collapseTree, expandTree, treeToggleElement, treeToggleRef, searchBoxRef} = useTreePane(\n    reposFileTreeId,\n    openPanelRef,\n    payload.treeExpanded,\n    textAreaId,\n    updateTreeExpandedPreference,\n  )\n\n  // When a tree item is selected, collapse the tree if the screen is small\n  const onTreeItemSelected = useCallback(() => {\n    if (window.innerWidth < ScreenSize.large) {\n      collapseTree({focus: null})\n    }\n  }, [collapseTree])\n\n  const [validCodeNav, setValidCodeNav] = useState(true)\n\n  useEffect(() => {\n    // scroll to top of code nav on file change if not going to a specific line and already scrolled down\n    if (!window.location.hash && window.scrollY > 0) {\n      const codeViewHeader = document.querySelector('#StickyHeader') as HTMLElement\n      if (codeViewHeader) {\n        codeViewHeader.style.position = 'relative'\n        codeViewHeader.scrollIntoView()\n        codeViewHeader.style.position = 'sticky'\n      }\n    }\n  }, [payload.path])\n\n  const {codeCenterOption} = useCodeViewOptions()\n\n  const onFindFilesShortcut = React.useCallback(() => {\n    if (window.innerWidth < ScreenSize.large) {\n      expandTree({focus: 'search'})\n    }\n  }, [expandTree])\n\n  let action: FilesPageAction\n\n  if (isEdit) {\n    if (payload.editInfo.isNewFile) {\n      action = 'new'\n    } else {\n      action = 'edit'\n    }\n  } else if (isBlame) {\n    action = 'blame'\n  } else if (isBlob) {\n    action = 'blob'\n  } else {\n    action = 'tree'\n  }\n  return (\n    <DeferredMetadataProvider {...deferredMetadata}>\n      <DeferredASTProvider {...deferredAST}>\n        <FilesPageInfoProvider\n          refInfo={refInfo}\n          path={path}\n          action={action}\n          copilotAccessAllowed={payload.copilotAccessAllowed ?? false}\n        >\n          <AllShortcutsEnabledProvider allShortcutsEnabled={payload.allShortcutsEnabled}>\n            <FileTreeControlProvider>\n              <PermalinkShortcut />\n              <div>\n                <FileQueryProvider>\n                  <OpenPanelProvider payload={payload} openPanelRef={openPanelRef}>\n                    <SplitPageLayout>\n                      <Box ref={treeRef} tabIndex={0} sx={{width: ['100%', '100%', 'auto']}}>\n                        <ReposFileTreePane\n                          id={reposFileTreeId}\n                          repo={repo}\n                          path={path}\n                          isFilePath={isBlob || isEdit || isDelete}\n                          refInfo={refInfo}\n                          collapseTree={collapseTree}\n                          showTree={isTreeExpanded}\n                          fileTree={fileTree}\n                          onItemSelected={onTreeItemSelected}\n                          processingTime={payload.fileTreeProcessingTime}\n                          treeToggleElement={treeToggleElement}\n                          treeToggleRef={treeToggleRef}\n                          searchBoxRef={searchBoxRef}\n                          foldersToFetch={payload.foldersToFetch}\n                          onFindFilesShortcut={onFindFilesShortcut}\n                          textAreaId={textAreaId}\n                          findFileWorkerPath={findFileWorkerPath}\n                          headerContent={\n                            <Box sx={{display: 'flex', width: '100%', mb: 3, alignItems: 'center'}}>\n                              {isTreeExpanded && treeToggleElement}\n                              <Heading as=\"h2\" sx={{fontSize: 2, ml: 2}}>\n                                Files\n                              </Heading>\n                            </Box>\n                          }\n                        />\n                      </Box>\n                      <SplitPageLayout.Content\n                        as=\"div\"\n                        padding=\"none\"\n                        width={codeCenterOption.enabled ? 'xlarge' : 'full'}\n                        hidden={{narrow: isTreeExpanded}}\n                        sx={{\n                          marginRight: 'auto',\n                          '@media print': {\n                            display: 'flex !important',\n                          },\n                        }}\n                      >\n                        <Box\n                          sx={{\n                            marginLeft: 'auto',\n                            marginRight: 'auto',\n                            flexDirection: 'column',\n                            pb: 6,\n                            maxWidth: '100%',\n                            mt: 0,\n                          }}\n                          ref={setContentRef}\n                          data-selector=\"repos-split-pane-content\"\n                          tabIndex={0}\n                        >\n                          <FindInFileOpenProvider\n                            searchTerm={searchTerm}\n                            setSearchTerm={setSearchTerm}\n                            isBlame={isBlame}\n                          >\n                            <CodeViewBannersProvider>\n                              <Box\n                                sx={{\n                                  display: isEdit ? 'none' : 'inherit',\n                                }}\n                              >\n                                <CodeViewHeader\n                                  payload={payload}\n                                  showTree={isTreeExpanded}\n                                  treeToggleElement={treeToggleElement}\n                                  validCodeNav={validCodeNav}\n                                  onFindFilesShortcut={onFindFilesShortcut}\n                                />\n                              </Box>\n                              {payload.error ? (\n                                <CodeViewError {...payload.error} />\n                              ) : (\n                                <>\n                                  <Box\n                                    className=\"react-code-view-bottom-padding\"\n                                    sx={{\n                                      mx: 3,\n                                    }}\n                                  >\n                                    <CodeViewBanners payload={payload} />\n                                  </Box>\n                                  <Box\n                                    sx={{\n                                      mx: 3,\n                                    }}\n                                  >\n                                    {isTreePayload(payload) ? (\n                                      <FileTreeViewContent\n                                        tree={payload.tree}\n                                        showTree={isTreeExpanded}\n                                        treeToggleElement={treeToggleElement}\n                                      />\n                                    ) : isEditPayload(payload) ? (\n                                      <Suspense fallback={<LoadingFallback />}>\n                                        <BlobEditor\n                                          collapseTree={collapseTree}\n                                          editInfo={payload.editInfo}\n                                          repo={payload.repo}\n                                          showTree={isTreeExpanded}\n                                          treeToggleElement={treeToggleElement}\n                                          // we need a key so that edit -> new soft nav does a fresh initial render\n                                          key={`${payload.path}_${payload.editInfo.fileName}_${payload.editInfo.isNewFile}`}\n                                          webCommitInfo={payload.webCommitInfo}\n                                          copilotInfo={payload.copilotInfo}\n                                        />\n                                      </Suspense>\n                                    ) : isBlob ? (\n                                      <BlobViewContent\n                                        blame={payload.blame}\n                                        blob={payload.blob}\n                                        symbolsExpanded={payload.symbolsExpanded}\n                                        searchTerm={searchTerm}\n                                        setSearchTerm={setSearchTerm}\n                                        setValidCodeNav={setValidCodeNav}\n                                        showTree={isTreeExpanded}\n                                        treeToggleElement={treeToggleElement}\n                                        validCodeNav={validCodeNav}\n                                        copilotInfo={payload.copilotInfo}\n                                      />\n                                    ) : isDelete ? (\n                                      <DeleteViewContent\n                                        deleteInfo={payload.deleteInfo}\n                                        webCommitInfo={payload.webCommitInfo}\n                                      />\n                                    ) : null}\n                                  </Box>\n                                </>\n                              )}\n                            </CodeViewBannersProvider>\n                          </FindInFileOpenProvider>\n                        </Box>\n                      </SplitPageLayout.Content>\n                    </SplitPageLayout>\n                  </OpenPanelProvider>\n                </FileQueryProvider>\n                <ScrollMarksContainer />\n                {/* TODO: make this focus on the cursor instead of just the blob as a whole */}\n                <DuplicateOnKeydownButton\n                  buttonFocusId={textAreaId}\n                  buttonHotkey={toggleFocusedPaneShortcut.hotkey}\n                  onButtonClick={() => toggleFocus()}\n                />\n              </div>\n            </FileTreeControlProvider>\n          </AllShortcutsEnabledProvider>\n        </FilesPageInfoProvider>\n      </DeferredASTProvider>\n    </DeferredMetadataProvider>\n  )\n}\n\nfunction PermalinkShortcut() {\n  const urlCreator = useUrlCreator()\n  const {permalinkShortcut} = useShortcut()\n  if (urlCreator.isCurrentPagePermalink()) {\n    return (\n      <DuplicateOnKeydownButton\n        buttonFocusId={textAreaId}\n        buttonHotkey={permalinkShortcut.hotkey}\n        buttonTestLabel={'header-permalink-button'}\n        onlyAddHotkeyScopeButton={true}\n        onButtonClick={() => {\n          //no-op so that the user isn't moved to the bottom of the page while the text area has focus\n        }}\n      />\n    )\n  }\n\n  return (\n    <DuplicateOnKeydownButton\n      buttonFocusId={textAreaId}\n      buttonHotkey={permalinkShortcut.hotkey}\n      buttonTestLabel={'header-permalink-button'}\n      onButtonClick={() => {\n        const permalink = urlCreator.createPermalink()\n        if (window.location.href.indexOf(permalink) < 0) {\n          window.history.pushState(null, document.title, permalink)\n        }\n      }}\n    />\n  )\n}\n\ntry{ BlobEditor.displayName ||= 'BlobEditor' } catch {}\ntry{ CodeView.displayName ||= 'CodeView' } catch {}\ntry{ PermalinkShortcut.displayName ||= 'PermalinkShortcut' } catch {}","import {useEffect} from 'react'\nimport {setUserContentScrolling} from '@github-ui/allow-user-content-scrolling'\n\n// When this effect is used in a React component, it disables the user-content\n// scrolling behaviour implemented in github/behaviors/user-content.ts (and\n// re-enable it when it unmounts), so the component can have more precise control\n// over scrolling.\nexport function useDisableUserContentScrolling() {\n  setUserContentScrolling(false)\n  useEffect(() => {\n    return () => setUserContentScrolling(true)\n  }, [])\n}\n","import {jsonRoute} from '@github-ui/react-core/json-route'\nimport {registerReactAppFactory} from '@github-ui/react-core/register-app'\n\nimport {App} from './App'\nimport CodeView from './pages/CodeView'\n\nregisterReactAppFactory('react-code-view', () => ({\n  App,\n  routes: [\n    jsonRoute({path: '/:owner/:repo/tree/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/blob/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/blame/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/edit/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/new/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/new/:branch/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/tree/delete/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/delete/:branch/:path/*', Component: CodeView, shouldNavigateOnError: true}),\n\n    // We cannot use '/:owner/:repo/*' because it could intercept routes to other react apps, like '/:owner/:repo/pushes'\n    jsonRoute({path: '/:owner/:repo', Component: CodeView, shouldNavigateOnError: true}),\n    jsonRoute({path: '/:owner/:repo/tree/:branch/*', Component: CodeView, shouldNavigateOnError: true}),\n  ],\n}))\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {useCallback, useEffect, useMemo, useRef} from 'react'\n\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\nimport {useAddValueToLineElementMap, useGetValueFromLineElementMap} from './CurrentLineRefMap'\nimport type {SetStickyLinesType} from './use-sticky-lines'\n\n/***\n * This interface adds two properties to an intersection observer that we need in order to track\n * whether or not we already have started to observe a line and whether or not we have disconnected it previously.\n * We use those values to make sure we don't observe a previously disconnected rogue observer, and so that we don't\n * start observing on the same line multiple times.\n */\ninterface intersectionObserverWithMetadata extends IntersectionObserver {\n  hasBeenDisconnected: boolean\n  hasBeenObserved: boolean\n}\n\nexport function useCodeLineIntersectionObservers(\n  codeLineData: CodeLineData,\n  canDoStickyLines: boolean,\n  stickyHeaderHeight: number,\n  onLineStickOrUnstick: SetStickyLinesType,\n  numParents: number | undefined,\n) {\n  const observedElementRef = useRef<Element | null>(null)\n  const addValueToMap = useAddValueToLineElementMap()\n  const isSSR = !!(typeof ssrSafeDocument === 'undefined')\n\n  const getValueFromMap = useGetValueFromLineElementMap()\n\n  const observer = useMemo(() => {\n    const {isEndLine, isStartLine, lineNumber} = codeLineData\n    let previousY = 0\n    let previousRatio = 1\n    const endObserver =\n      isEndLine && !isSSR\n        ? new IntersectionObserver(\n            entries => {\n              for (const {target, isIntersecting, intersectionRatio} of entries) {\n                if (target) {\n                  const {currentY, currentRatio} = endObserverLogic(\n                    previousY,\n                    previousRatio,\n                    target,\n                    intersectionRatio,\n                    lineNumber,\n                    getValueFromMap,\n                    isIntersecting,\n                    onLineStickOrUnstick,\n                  )\n\n                  previousY = currentY\n                  previousRatio = currentRatio\n                }\n              }\n            },\n            {\n              root: null,\n              rootMargin: `-${stickyHeaderHeight}px 0px 0px 0px`,\n              threshold: 0,\n            },\n          )\n        : undefined\n    const startObserver =\n      isStartLine && !isSSR\n        ? new IntersectionObserver(\n            entries => {\n              for (const {target, isIntersecting, intersectionRatio} of entries) {\n                if (target) {\n                  const {currentY, currentRatio} = startObserverLogic(\n                    codeLineData,\n                    previousY,\n                    previousRatio,\n                    target,\n                    intersectionRatio,\n                    isIntersecting,\n                    onLineStickOrUnstick,\n                  )\n\n                  previousY = currentY\n                  previousRatio = currentRatio\n                }\n              }\n            },\n            {\n              root: null,\n              //we need to have the intersection for any line that is contained within a section that already has at least\n              //one line stickied be offset by an additional 20px for each parent because that is the height of each sticky line\n              rootMargin: `-${stickyHeaderHeight + (numParents ? numParents * 20 : 0)}px 0px 0px 0px`,\n              //when the threshold is passed an array of values, it triggers at each intersection threshold value.\n              //this allows us to have the intersection observer trigger at the appropriate time no matter how much\n              //of the element is hidden behind horizontal scrolling\n              threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1],\n            },\n          )\n        : undefined\n\n    const initialObsValue = (\n      canDoStickyLines ? (isStartLine ? startObserver : isEndLine ? endObserver : undefined) : undefined\n    ) as intersectionObserverWithMetadata | undefined\n    if (initialObsValue) {\n      initialObsValue.hasBeenDisconnected = false\n      initialObsValue.hasBeenObserved = false\n    }\n    return initialObsValue\n  }, [codeLineData, canDoStickyLines, stickyHeaderHeight, getValueFromMap, onLineStickOrUnstick, numParents, isSSR])\n\n  const refObserverCallback = useCallback((ref: HTMLTableRowElement | null) => {\n    observedElementRef.current = ref\n  }, [])\n\n  /*\n    This effect is used because we have no guarantee on the timing of when the ref callback will be called for a given\n    code blob line, and as such moving the observe logic to an effect that we can guarantee when it runs allows us to\n    consistently observe the correct element and clean up elements that we don't want to observe anymore. Now that\n    we are not observing from within every ref callback, there aren't several rogue observers out there observing on\n    elements that have completely different contents (but technically still exist because they are never being overwritten,\n    just the content within the element is being changed)\n\n  */\n  useEffect(() => {\n    const {isStartLine, lineNumber, ownedSection} = codeLineData\n\n    if (\n      isStartLine &&\n      observedElementRef &&\n      ownedSection &&\n      observer &&\n      !observer.hasBeenObserved &&\n      !observer.hasBeenDisconnected\n    ) {\n      addValueToMap(ownedSection.endLine, {\n        lineNumber,\n      })\n    }\n\n    if (observer && observedElementRef.current && !observer.hasBeenObserved) {\n      observer.observe(observedElementRef.current)\n\n      observer.hasBeenObserved = true\n    }\n\n    return () => {\n      if (observer) {\n        observer.disconnect()\n        observer.hasBeenDisconnected = true\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [observer, codeLineData])\n\n  return refObserverCallback\n}\n\nfunction endObserverLogic(\n  previousY: number,\n  previousRatio: number,\n  target: Element,\n  intersectionRatio: number,\n  lineNumber: number,\n  getValueFromMap: (num: number) => CodeLineData[] | undefined,\n  isIntersecting: boolean,\n  onLineStickOrUnstick: SetStickyLinesType,\n) {\n  const currentY = target.getBoundingClientRect().y\n  const currentRatio = intersectionRatio\n  const startLineArray = lineNumber ? getValueFromMap(lineNumber) : undefined\n  const lineIsAboveBottomOfScreen = window.innerHeight - target.getBoundingClientRect().bottom > 0\n  const lineIsBelowTopOfScreen = target.getBoundingClientRect().bottom > 0\n  const lineIsCloseToTopOfScreen = target.getBoundingClientRect().top < 150\n  const lineIsOnScreen = lineIsAboveBottomOfScreen && lineIsBelowTopOfScreen\n  const isNotNearBottomOfScreen =\n    window.innerHeight - target.getBoundingClientRect().bottom > 150 && window.innerHeight > 300\n  for (const startLine of startLineArray || []) {\n    if (startLine && lineIsOnScreen) {\n      if (currentY < previousY && lineIsOnScreen) {\n        if (currentRatio > previousRatio && isIntersecting) {\n          //scrolling down and entering the screen\n          //do nothing\n        } else {\n          //scrolling down and leaving the screen\n          onLineStickOrUnstick(startLine, true)\n        }\n      } else if (currentY > previousY && isIntersecting) {\n        if (currentRatio < previousRatio) {\n          //scrolling up and leaving the screen\n          //do nothing\n        } else if (isNotNearBottomOfScreen && lineIsCloseToTopOfScreen) {\n          //scrolling up and entering the screen\n          onLineStickOrUnstick(startLine, false)\n        }\n      }\n    }\n  }\n\n  return {currentY, currentRatio}\n}\n\nfunction startObserverLogic(\n  codeLineData: CodeLineData,\n  previousY: number,\n  previousRatio: number,\n  target: Element,\n  intersectionRatio: number,\n  isIntersecting: boolean,\n  onLineStickOrUnstick: SetStickyLinesType,\n) {\n  const currentY = target.getBoundingClientRect().y\n  const currentRatio = intersectionRatio\n  const lineIsAboveBottomOfScreen = window.innerHeight - target.getBoundingClientRect().bottom > 0\n  const lineIsBelowTopOfScreen = target.getBoundingClientRect().bottom > 0\n  const lineIsCloseToTopOfScreen = target.getBoundingClientRect().top < 150 && target.getBoundingClientRect().top > -300\n  const lineIsOnScreen = lineIsAboveBottomOfScreen && lineIsBelowTopOfScreen\n  const lineIsNotDisplayed =\n    target.getBoundingClientRect().bottom === 0 &&\n    target.getBoundingClientRect().top === 0 &&\n    target.getBoundingClientRect().height === 0 &&\n    target.getBoundingClientRect().width === 0 &&\n    target.getBoundingClientRect().x === 0 &&\n    target.getBoundingClientRect().y === 0\n\n  if (!codeLineData.ownedSection || codeLineData.ownedSection?.collapsed) {\n    return {currentY, currentRatio}\n  }\n  //we don't want to apply sticky if the start line's owned section is collapsed\n  if (currentY <= previousY && (lineIsOnScreen || lineIsCloseToTopOfScreen) && !lineIsNotDisplayed) {\n    if (currentRatio > previousRatio && isIntersecting) {\n      //scrolling down and entering the screen\n      //do nothing\n    } else if (lineIsCloseToTopOfScreen) {\n      //scrolling down and leaving the screen\n      onLineStickOrUnstick(codeLineData, false)\n    }\n  } else if (currentY > previousY && isIntersecting) {\n    if (currentRatio < previousRatio) {\n      //scrolling up and leaving the screen\n      //do nothing\n    } else {\n      //scrolling up and entering the screen\n      onLineStickOrUnstick(codeLineData, true)\n    }\n  }\n\n  return {currentY, currentRatio}\n}\n","import {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useCallback, useEffect, useRef} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {copyText} from '../../github/command-palette/copy'\nimport {CopyState, fetchContent, isClipboardSupported} from '../utilities/Copy'\nimport {useCurrentBlob} from './CurrentBlob'\n\nexport function useCopyRawBlobContents() {\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const {rawBlobUrl} = useCurrentBlob()\n\n  const isFirefox = useRef(false)\n\n  useEffect(() => {\n    isFirefox.current = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n  }, [])\n\n  return useCallback(async () => {\n    sendRepoClickEvent('BLOB_RAW_DROPDOWN.COPY')\n    try {\n      const blobPromise = fetchContent(rawBlobUrl)\n      // Firefox does not support clipboard.write with promises by default (can be overriden by users)\n      // But we can use clipboard.writeText instead in the fallback\n      // Note: May 2 2023 - Firefox now has a setting that adds the ClipboardItem API\n      // Which makes it pass the `isClipboardSupported` check. However, it doesn't support\n      // Passing a promise so let's fall back to using copyText instead\n      if (\n        isClipboardSupported() &&\n        navigator &&\n        navigator.clipboard &&\n        'write' in navigator.clipboard &&\n        !isFirefox.current\n      ) {\n        await navigator.clipboard.write([new ClipboardItem({'text/plain': blobPromise})])\n      } else {\n        const blob = await blobPromise\n        if (!blob) {\n          return CopyState.Error\n        }\n        await copyText(await blob.text())\n      }\n    } catch (e) {\n      return CopyState.Error\n    }\n\n    return CopyState.Success\n  }, [isFirefox, sendRepoClickEvent, rawBlobUrl])\n}\n","import {debounce} from '@github/mini-throttle'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {useRef, useState} from 'react'\n// useLocation is safe for files not rendered in a partial on the overview.\n// eslint-disable-next-line no-restricted-imports\nimport {useLocation} from 'react-router-dom'\n\n//this is larger than the largest single line can be using firefox's text zoom only feature, so if we detect\n//that line height we then check the child because it has the no virtualization wrapper around it\nconst tooLargeOfALineHeight = 100\n\nexport function useCurrentLineHeight(lineContainerID: string, defaultLineHeight: number = 20) {\n  const [lineHeight, setLineHeight] = useState(defaultLineHeight)\n\n  const previousLineHeight = useRef(defaultLineHeight)\n\n  const wrapOption = useCodeViewOptions().codeWrappingOption\n\n  const location = useLocation()\n\n  useLayoutEffect(() => {\n    //apologies for this ridiculous hack, but because in firefox there is an option to zoom ONLY text, and not elements\n    //themselves, we needed a piece of text which was always going to be present within the DOM, and the title\n    //of the current code blob made sense as the thing for us to use. If someone ever changes the ID of that piece\n    //of code, however, this will fail.\n    const fileNameText = document.getElementById('file-name-id-wide')\n\n    if (!fileNameText) return\n\n    const resizeObserver = new ResizeObserver(\n      debounce(() => {\n        let detectedLineHeight =\n          (document.getElementsByClassName(lineContainerID)[0]?.firstChild as Element)?.getBoundingClientRect()\n            .height ?? defaultLineHeight\n\n        //if the detected line height is way too large, we can assume that it is being wrapped for non virtualization\n        //purposes\n        if (detectedLineHeight > tooLargeOfALineHeight) {\n          detectedLineHeight = (\n            document.getElementsByClassName(lineContainerID)[0]?.firstChild?.firstChild as Element\n          )?.getBoundingClientRect().height\n        }\n        //if word wrap is enabled, we don't want to blanket set the heigh for all lines because it will probably be\n        //incorrect for the majority of lines. Defaulting to 20 lets the useVirtualDynamic actually figure out what\n        //the heights should be.\n        if (detectedLineHeight !== 0 && detectedLineHeight !== previousLineHeight.current && !wrapOption.enabled) {\n          setLineHeight(detectedLineHeight)\n          previousLineHeight.current = detectedLineHeight\n        }\n      }),\n    )\n    resizeObserver.observe(fileNameText)\n\n    return () => resizeObserver.disconnect()\n  }, [location.key, wrapOption.enabled, lineContainerID, defaultLineHeight])\n\n  return lineHeight\n}\n","import type {StylingDirective} from '@github-ui/code-view-types'\nimport {ObservableValue} from '@github-ui/observable'\nimport {useObservedState, useSubscription} from '@github-ui/react-observable'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useIsPlatform} from '@github-ui/use-is-platform'\nimport {type RefObject, useCallback, useEffect, useMemo, useRef} from 'react'\n// eslint-disable-next-line no-restricted-imports\nimport {useLocation} from 'react-router-dom'\n\n// we are only using this within an effect, so it will not impact SSR\n// eslint-disable-next-line no-restricted-imports\nimport {type BlobOffset, formatBlobRangeAnchor, parseFileAnchor} from '../../github/blob-anchor'\nimport type {CodeNavData} from '../components/blob/BlobContent/BlobContent'\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\nimport {useDeferredAST} from '../contexts/DeferredASTContext'\nimport {determineProperOffsetWithDummyDiv, getElementForLine, isLineInViewport, isSymbol} from '../utilities/lines'\nimport {useCurrentBlame} from './CurrentBlame'\nimport {useCurrentLineHeight} from './use-current-line-height'\nimport {focusSymbolPane} from './use-focus-symbol-pane'\n\nexport const charWidthMac = 7.2293\nexport const charWidthWindows = 6.6\n\n// $lineNumberWidth from app/assets/stylesheets/bundles/code/react-blob.scss\n// +\n// padding-left  from .react-code-line-contents\n// +\n// padding-right from .react-code-line-contents\nexport const minLeftOffsetBlob = 92\n\n//TODO: actually implement blame and figure out what this offset should be\nexport const minLeftOffsetBlame = 92\n\n//extra space to the right of the cursor that we should scroll to provide additional context\nexport const scrollRightOffset = 70\n\n//arbitrarily chosen, could in theory determine the value from the screen size, just a constant for now\nconst defaultNumLinesToHopOnPageUpDown = 15\n\nconst startLineNumber = new ObservableValue(1)\nconst startCharacterNumber = new ObservableValue(0)\nconst endLineNumber = new ObservableValue(1)\nconst endCharacterNumber = new ObservableValue(0)\n\nconst keyboardNavUsed = new ObservableValue<boolean>(false)\n\n//we need an easy way to get the line number to the goToLine dialog without having a bunch of drilling,\n//and becuase this file's main hook is only used in one location, doing it with a local observable and an exported\n//hook won't cause clashing\nexport function useCursorStartLineNumber(): number {\n  return useObservedState(startLineNumber)\n}\n\nexport function useCursorEndLineNumber(): number {\n  return useObservedState(endLineNumber)\n}\n\nexport function useKeyboardNavUsed(): boolean {\n  return useObservedState(keyboardNavUsed)\n}\n\n/**\n * @returns a RefObject that contains the start and end indices of the current selection\n */\nexport function useCursorSelectionRef(): React.RefObject<{start: BlobOffset; end: BlobOffset} | null> {\n  const ref = useRef<{start: BlobOffset; end: BlobOffset} | null>(null)\n\n  function updateRef() {\n    ref.current = {\n      start: {line: startLineNumber.value, column: startCharacterNumber.value + 1},\n      end: {line: endLineNumber.value, column: endCharacterNumber.value + 1},\n    }\n  }\n\n  useSubscription(startLineNumber, updateRef)\n  useSubscription(startCharacterNumber, updateRef)\n  useSubscription(endLineNumber, updateRef)\n  useSubscription(endCharacterNumber, updateRef)\n\n  return ref\n}\n\nexport function setKeyboardNavUsed(value: boolean) {\n  keyboardNavUsed.value = value\n}\n\n//need the isBlame optional parameter because the useCurrentBlame context is not defined\n//yet in the findInFileOpenContext, so it always returns undefined even if we are in blame\nexport function useIsCursorEnabled(isBlame?: boolean) {\n  const wordWrapEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const hasBlame = !!useCurrentBlame()\n  const [isSSR] = useClientValue(() => false, true, [])\n\n  return !wordWrapEnabled && !hasBlame && !isBlame && !isSSR\n}\n\nexport function useCursorNavigation(\n  cursorRef: RefObject<HTMLDivElement | null>,\n  onCodeNavTokenSelected: ((symbol: CodeNavData) => void) | undefined,\n  setLeftOffset: (offset: number) => void,\n  setTopOffset: (offset: number) => void,\n  linesData: readonly CodeLineData[],\n  isVirtualized: boolean,\n  isBlame: boolean,\n  onLineNumberClick: React.MouseEventHandler<HTMLElement> | undefined,\n  textAreaRef: RefObject<HTMLTextAreaElement | null> | undefined,\n  tabSize: number,\n  additionalTextAreaInstructions: string,\n  textSelection?: {start: number; end: number; keyboard: boolean; displayStart: boolean} | undefined,\n) {\n  //keeping track of line and char separately from the offsetbecause with char specifically, we get into\n  //floating point issues when checking if we are at the start of the line. Just multiplying by the charWidth is simpler\n  const currentStartLine = useRef(0)\n  const currentStartChar = useRef(0)\n  const currentEndLine = useRef(0)\n  const currentEndChar = useRef(0)\n  //display line and char are used for determining if the user is highlighting backwards or forwards\n  //the display values will be equal to the end values if the user is highlighting forwards and the\n  //start values if the user is highlighting backwards\n  const currentDisplayLine = useRef(0)\n  const currentDisplayChar = useRef(0)\n  const parentElementRef = useRef<HTMLElement | null | undefined>(null)\n  const currentMaxRightChar = useRef(0)\n  const currentTextAreaSelectionStart = useRef(0)\n  const numLinesToHopOnPageUpDown = useRef(defaultNumLinesToHopOnPageUpDown)\n  const currentTextAreaSelectionEnd = useRef(0)\n  const minLeftOffset = isBlame ? minLeftOffsetBlame : minLeftOffsetBlob\n  const isWindows = useIsPlatform(['windows'])\n  //linux and mac have similar font rendering, so we can use the same char width approximation for both\n  const charWidth = isWindows ? charWidthWindows : charWidthMac\n\n  const lineRowHeight = useCurrentLineHeight('react-line-numbers')\n  const {stylingDirectives} = useDeferredAST()\n\n  const characterCountByLine = useMemo(() => {\n    const charCountByLine: number[] = []\n    for (let i = 0; i < linesData.length; i++) {\n      if (i === 0) {\n        charCountByLine.push(linesData[i]!.rawText?.length ?? 0)\n      } else {\n        charCountByLine.push((linesData[i]!.rawText?.length ?? 0) + charCountByLine[i - 1]! + 1)\n      }\n    }\n    return charCountByLine\n  }, [linesData])\n\n  function setLeftOffsetWithCursorLocationUpdate(offset: number, offsetCharacter: number) {\n    setLeftOffset(offset)\n    currentDisplayChar.current = offsetCharacter\n  }\n  function setTopOffsetWithCursorLocationUpdate(offset: number, offsetLine: number) {\n    setTopOffset(offset)\n    currentDisplayLine.current = offsetLine\n  }\n\n  const updateUrlForLineNumber = useCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      const shouldUseColumn = startLineNumber.value !== endLineNumber.value\n      const highlightInfo = {\n        start: {line: startLineNumber.value, column: shouldUseColumn ? startCharacterNumber.value + 1 : null},\n        end: {line: endLineNumber.value, column: shouldUseColumn ? endCharacterNumber.value + 1 : null},\n      }\n\n      const anchorInfo = {\n        anchorPrefix: 'L',\n        blobRange: {\n          start: highlightInfo.start,\n          end: highlightInfo.end,\n        },\n      }\n\n      const hash = formatBlobRangeAnchor(anchorInfo)\n      window.location.hash = hash\n      onLineNumberClick?.(e)\n    },\n    [onLineNumberClick],\n  )\n  const {hash} = useLocation()\n\n  useEffect(() => {\n    const heightToMoveBy = window.innerHeight - 200 > 300 ? window.innerHeight - 200 : 300\n    const numLinesToMoveBy = Math.round(heightToMoveBy / lineRowHeight)\n    const numLinesToMoveByWithMaxMin = Math.min(Math.max(numLinesToMoveBy, 1), 100)\n    numLinesToHopOnPageUpDown.current = numLinesToMoveByWithMaxMin\n  }, [lineRowHeight])\n\n  useEffect(() => {\n    if (!additionalTextAreaInstructions || additionalTextAreaInstructions === '') {\n      return\n    }\n    if (additionalTextAreaInstructions.includes('PageUp')) {\n      onPageUp()\n    } else if (additionalTextAreaInstructions.includes('PageDown')) {\n      onPageDown()\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [additionalTextAreaInstructions])\n\n  useEffect(() => {\n    if (!textSelection) return\n    if (textSelection.start < 0 && textSelection.end < 0) return\n    if (\n      currentTextAreaSelectionStart.current === textSelection.start &&\n      currentTextAreaSelectionEnd.current === textSelection.end\n    ) {\n      return\n    }\n    const startValues = determineLineAndOffsetFromCharOffsetBinarySearch(textSelection.start)\n    const endValues = determineLineAndOffsetFromCharOffsetBinarySearch(textSelection.end)\n\n    if (\n      (currentTextAreaSelectionStart.current === textSelection.start &&\n        currentTextAreaSelectionEnd.current !== textSelection.end) ||\n      (!textSelection.keyboard && !textSelection.displayStart)\n    ) {\n      // we should position the cursor at the END of the selection area because that is where the selection has moved\n\n      setLeftOffsetWithCursorLocationUpdate(\n        determineProperOffsetWithDummyDiv(endValues.offset, linesData[endValues.line]?.rawText ?? '', tabSize),\n        endValues.offset,\n      )\n      currentMaxRightChar.current = endValues.offset\n      setTopOffsetWithCursorLocationUpdate(endValues.line * lineRowHeight, endValues.line)\n      syncVisibleCursorToTextAreaCursor(startValues.line, endValues.line, startValues.offset, endValues.offset, false)\n    } else {\n      // we should position the cursor at the START of the selection area because that is where the selection has moved\n      // or the end/start are the same and it doesn't matter which one we choose\n\n      setLeftOffsetWithCursorLocationUpdate(\n        determineProperOffsetWithDummyDiv(startValues.offset, linesData[startValues.line]?.rawText ?? '', tabSize),\n        startValues.offset,\n      )\n      currentMaxRightChar.current = startValues.offset\n      setTopOffsetWithCursorLocationUpdate(startValues.line * lineRowHeight, startValues.line)\n      syncVisibleCursorToTextAreaCursor(startValues.line, endValues.line, startValues.offset, endValues.offset, true)\n    }\n\n    currentTextAreaSelectionEnd.current = textSelection.end\n    currentTextAreaSelectionStart.current = textSelection.start\n    if (textSelection.end === textSelection.start && !textSelection.keyboard) {\n      //set whether or not the keyboard is what was used\n      keyboardNavUsed.value = false\n      selectSymbolAtCursor()\n    }\n\n    if (currentDisplayLine.current <= 5 && textSelection.keyboard) {\n      handleVerticalScroll()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [linesData, tabSize, textSelection])\n\n  function determineLineAndOffsetFromCharOffsetBinarySearch(charOffset: number) {\n    let line = 0\n    let offset = 0\n    let charCount = 0\n    let prevCharCount = 0\n    let nextCharCount = 0\n    let i = 0\n    let j = characterCountByLine.length - 1\n    while (i <= j) {\n      const mid = Math.floor((i + j) / 2)\n      charCount = characterCountByLine[mid]! + 1\n      prevCharCount = mid > 0 ? characterCountByLine[mid - 1]! + 1 : 0\n      nextCharCount = mid < characterCountByLine.length - 1 ? characterCountByLine[mid + 1]! + 1 : Infinity\n      if (charOffset >= prevCharCount && charOffset < charCount) {\n        line = mid\n        offset = charOffset - prevCharCount\n        break\n      } else if (charOffset < prevCharCount) {\n        j = mid - 1\n      } else if (charOffset >= charCount && charOffset < nextCharCount) {\n        line = mid + 1\n        offset = charOffset - charCount\n        break\n      } else if (charOffset >= nextCharCount) {\n        i = mid + 1\n      }\n    }\n    return {line, offset}\n  }\n\n  function syncVisibleCursorToTextAreaCursor(\n    startLine: number,\n    endLine: number,\n    startChar: number,\n    endChar: number,\n    startIsVisible: boolean,\n  ) {\n    currentStartLine.current = startLine\n    currentStartChar.current = startChar\n    currentEndLine.current = endLine\n    currentEndChar.current = endChar\n    currentDisplayLine.current = startIsVisible ? startLine : endLine\n    currentDisplayChar.current = startIsVisible ? startChar : endChar\n    startLineNumber.value = getCorrectLineNumberWithCollapsedSections(startLine)\n    startCharacterNumber.value = startChar\n    endLineNumber.value = getCorrectLineNumberWithCollapsedSections(endLine)\n    endCharacterNumber.value = endChar\n  }\n\n  useEffect(() => {\n    const anchInfo = parseFileAnchor(hash)\n    if (!anchInfo.blobRange?.start?.line) {\n      //the line was removed, so don't do anything\n      return\n    }\n    if (anchInfo.blobRange.start.line > linesData.length) {\n      // The highlighted line is not displayed yet so we can't scroll to it.\n      // This will run again when we are no longer truncated.\n      return\n    }\n\n    const initialLineNumber = anchInfo.blobRange.start.line - 1\n    const initialCharacterNumber = 0\n    currentStartLine.current = initialLineNumber\n    startLineNumber.value = initialLineNumber\n    startCharacterNumber.value = initialCharacterNumber\n    endLineNumber.value = initialLineNumber\n    endCharacterNumber.value = initialCharacterNumber\n    currentStartChar.current = initialCharacterNumber\n    currentEndLine.current = initialLineNumber\n    currentEndChar.current = initialCharacterNumber\n    currentMaxRightChar.current = initialCharacterNumber\n    setLeftOffsetWithCursorLocationUpdate(currentStartChar.current, currentStartChar.current)\n    setTopOffsetWithCursorLocationUpdate(currentStartLine.current * lineRowHeight, currentStartLine.current)\n    syncAndScrollCleanup(scrollRightOffset)\n    //we don't want to declare syncAndScrollCleanup within the effect, so we don't want to include it in the deps\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hash, linesData, setLeftOffset, setTopOffset])\n\n  function determineWhetherStartOrEndIsCurrentDisplayPosition() {\n    if (\n      currentStartLine.current === currentDisplayLine.current &&\n      currentStartChar.current === currentDisplayChar.current &&\n      (currentStartLine.current !== currentEndLine.current || currentStartChar.current !== currentEndChar.current)\n    ) {\n      return 'start'\n    } else if (\n      currentEndLine.current === currentDisplayLine.current &&\n      currentEndChar.current === currentDisplayChar.current &&\n      (currentStartLine.current !== currentEndLine.current || currentStartChar.current !== currentEndChar.current)\n    ) {\n      return 'end'\n    }\n    return 'same'\n  }\n\n  function determineAndSetTextAreaCursorPosition() {\n    if (textAreaRef && textAreaRef.current) {\n      const textArea = textAreaRef.current\n      const zeroIndexedStartLineNum = currentStartLine.current - 1\n      const zeroIndexedEndLineNum = currentEndLine.current - 1\n      const offsetStart =\n        // + 1 for every line except the first line because there is an implied newline character in the calculation\n        // for every other line\n        (zeroIndexedStartLineNum !== -1 ? characterCountByLine[zeroIndexedStartLineNum]! + 1 : 0) +\n        currentStartChar.current\n\n      const offsetEnd =\n        (zeroIndexedEndLineNum !== -1 ? characterCountByLine[zeroIndexedEndLineNum]! + 1 : 0) + currentEndChar.current\n      textArea.selectionStart = offsetStart\n      textArea.selectionEnd = offsetEnd\n      currentTextAreaSelectionStart.current = offsetStart\n      currentTextAreaSelectionEnd.current = offsetEnd\n    }\n  }\n\n  function onPageDown() {\n    updateParentRefIfNecessary()\n\n    let currentLineNumber = currentStartLine.current\n    let currentCharNumber = currentStartChar.current\n\n    if (currentLineNumber + numLinesToHopOnPageUpDown.current > linesData.length) {\n      currentLineNumber = linesData.length - 1\n    } else {\n      currentLineNumber += numLinesToHopOnPageUpDown.current\n    }\n\n    currentCharNumber = handleDifferingLineLengthsWhenGoingUpOrDownWithParams(currentLineNumber, currentCharNumber)\n    currentStartLine.current = currentLineNumber\n    currentStartChar.current = currentCharNumber\n    removeRangeFromSelection()\n    setTopOffsetWithCursorLocationUpdate(currentLineNumber * lineRowHeight, currentLineNumber)\n\n    syncAndScrollCleanup(scrollRightOffset)\n  }\n  function onPageUp() {\n    updateParentRefIfNecessary()\n\n    let currentLineNumber = currentStartLine.current\n    let currentCharNumber = currentStartChar.current\n\n    if (currentLineNumber < numLinesToHopOnPageUpDown.current) {\n      currentLineNumber = 0\n    } else {\n      currentLineNumber -= numLinesToHopOnPageUpDown.current\n    }\n\n    currentCharNumber = handleDifferingLineLengthsWhenGoingUpOrDownWithParams(currentLineNumber, currentCharNumber)\n    currentStartLine.current = currentLineNumber\n    currentStartChar.current = currentCharNumber\n    removeRangeFromSelection()\n    setTopOffsetWithCursorLocationUpdate(currentLineNumber * lineRowHeight, currentLineNumber)\n    syncAndScrollCleanup(scrollRightOffset)\n  }\n\n  function onEnter() {\n    keyboardNavUsed.value = true\n    focusSymbolPane()\n    selectSymbolAtCursor()\n  }\n\n  function removeRangeFromSelection() {\n    currentEndLine.current = currentStartLine.current\n    currentEndChar.current = currentStartChar.current\n  }\n\n  function handleDifferingLineLengthsWhenGoingUpOrDownWithParams(currentLine: number, currentChar: number) {\n    let returnChar = currentChar\n    if (currentLine > linesData.length || !linesData[currentLine]) return returnChar\n    const rawText = linesData[currentLine].rawText\n    if (!rawText) return returnChar\n\n    if (currentChar > rawText.length) {\n      returnChar = rawText.length\n      setLeftOffsetWithCursorLocationUpdate(determineProperOffsetWithDummyDiv(returnChar, rawText, tabSize), returnChar)\n    } else if (returnChar < currentMaxRightChar.current && currentMaxRightChar.current < rawText.length) {\n      returnChar = currentMaxRightChar.current\n      setLeftOffsetWithCursorLocationUpdate(determineProperOffsetWithDummyDiv(returnChar, rawText, tabSize), returnChar)\n    } else if (returnChar < currentMaxRightChar.current && currentMaxRightChar.current >= rawText.length) {\n      returnChar = rawText.length\n      setLeftOffsetWithCursorLocationUpdate(determineProperOffsetWithDummyDiv(returnChar, rawText, tabSize), returnChar)\n    }\n    return returnChar\n  }\n\n  function selectSymbolAtCursor() {\n    const lineData = linesData[currentDisplayLine.current]\n    if (!lineData) return\n\n    const {rawText} = lineData\n    const stylingDirectivesLine = stylingDirectives\n      ? stylingDirectives[lineData.lineNumber - 1]\n      : lineData.stylingDirectivesLine\n\n    if (!rawText || !stylingDirectivesLine) return\n\n    let matchingDirective: StylingDirective | null = null\n    for (const directive of stylingDirectivesLine) {\n      if (directive.s > currentDisplayChar.current) continue\n      if (directive.e < currentDisplayChar.current) continue\n      if (!directive.c) continue\n\n      matchingDirective = directive\n      const isToken = isSymbol(rawText.substring(directive.s, directive.e), directive.c)\n      if (!isToken) return\n    }\n\n    if (!matchingDirective) return\n\n    // If we have a styling directive, we know the exact bounds of the symbol\n    onCodeNavTokenSelected?.({\n      selectedText: rawText.substring(matchingDirective.s, matchingDirective.e),\n      lineNumber: getCorrectLineNumberWithCollapsedSections(currentDisplayLine.current),\n      offset: matchingDirective.s,\n    })\n  }\n\n  function updateParentRefIfNecessary() {\n    if (!parentElementRef.current) {\n      if (isVirtualized) {\n        parentElementRef.current = cursorRef.current?.parentElement?.parentElement\n      } else {\n        parentElementRef.current = cursorRef.current?.parentElement\n      }\n    }\n  }\n\n  function syncAndScrollCleanup(scrollOffset: number) {\n    if (parentElementRef.current) {\n      handleVerticalScroll()\n\n      handleScrollRight(scrollOffset)\n    }\n    determineAndSetTextAreaCursorPosition()\n  }\n\n  function handleVerticalScroll() {\n    const forwardsOrBackwards = determineWhetherStartOrEndIsCurrentDisplayPosition()\n    let currentCharNumber = currentStartChar.current\n    let currentLineNumber = currentStartLine.current\n    if (forwardsOrBackwards === 'end') {\n      currentCharNumber = currentEndChar.current\n      currentLineNumber = currentEndLine.current\n    }\n\n    const lowerLineNumberToEnsure = Math.min(\n      getCorrectLineNumberWithCollapsedSections(currentLineNumber + 5),\n      linesData.length,\n    )\n    if (!isLineInViewport(lowerLineNumberToEnsure)) {\n      const line = getElementForLine(lowerLineNumberToEnsure)\n      //if the user has scrolled manually past the virtualization window, then line will be null, and we can't scroll\n      //into view the line of a dom element that doesn't exist. Scroll into view is nicer and preferred, but this\n      //works as a backup\n      if (line === null) {\n        window.scrollTo(0, currentLineNumber * lineRowHeight)\n      }\n      if (\n        (line && line.getBoundingClientRect().y < 0) ||\n        (line && line.getBoundingClientRect().y > window.innerHeight)\n      ) {\n        line.scrollIntoView({block: 'center'})\n        //it does some weirdness where it scrolls slightly to the right when using scrollIntoView, so this fixes that\n        window.scrollBy(-300, 0)\n      } else if (line) {\n        window.scrollBy(0, 100)\n      }\n      const browserWidth = window.innerWidth\n      if (browserWidth < currentCharNumber * charWidth + minLeftOffset) {\n        window.scrollTo(0, 0)\n      }\n    }\n\n    // - 5 because the first few lines are covered up by the header\n    const upperLineNumberToEnsure = Math.max(getCorrectLineNumberWithCollapsedSections(currentLineNumber - 5), 1)\n    if (!isLineInViewport(upperLineNumberToEnsure)) {\n      const line = getElementForLine(upperLineNumberToEnsure)\n\n      //if the user has scrolled manually past the virtualization window, then line will be null, and we can't scroll\n      //into view the line of a dom element that doesn't exist. Scroll into view is nicer and preferred, but this\n      //works as a backup\n      if (line === null) {\n        window.scrollTo(0, currentLineNumber * lineRowHeight)\n      }\n      //deal with the scenario where the user has scrolled off page\n      if (\n        (line && line.getBoundingClientRect().y < 0) ||\n        (line && line.getBoundingClientRect().y > window.innerHeight)\n      ) {\n        line.scrollIntoView({block: 'center'})\n        //it does some weirdness where it scrolls slightly to the right when using scrollIntoView, so this fixes that\n        window.scrollBy(-300, 0)\n      } else if (line) {\n        window.scrollBy(0, -200)\n      }\n    } else if (currentLineNumber <= 7) {\n      window.scrollTo(0, 0)\n    }\n  }\n\n  function getCorrectLineNumberWithCollapsedSections(visibleLineNumber: number) {\n    return linesData[visibleLineNumber] ? linesData[visibleLineNumber].lineNumber : visibleLineNumber\n  }\n\n  function handleScrollRight(offset: number) {\n    const forwardsOrBackwards = determineWhetherStartOrEndIsCurrentDisplayPosition()\n    let currentCharNumber = currentStartChar.current\n    if (forwardsOrBackwards === 'end') {\n      currentCharNumber = currentEndChar.current\n    }\n    if (parentElementRef.current && parentElementRef.current.scrollBy) {\n      if (\n        currentCharNumber * charWidth + minLeftOffset + 50 >=\n        parentElementRef.current.scrollLeft + parentElementRef.current.clientWidth\n      ) {\n        parentElementRef.current.scrollBy(\n          currentCharNumber * charWidth +\n            minLeftOffset -\n            parentElementRef.current.scrollLeft -\n            parentElementRef.current.clientWidth +\n            offset,\n          0,\n        )\n      } else if (currentCharNumber * charWidth + minLeftOffset <= parentElementRef.current.scrollLeft) {\n        parentElementRef.current.scrollBy(\n          currentCharNumber * charWidth +\n            minLeftOffset -\n            parentElementRef.current.scrollLeft -\n            parentElementRef.current.clientWidth,\n          0,\n        )\n      }\n    }\n  }\n\n  return {\n    onEnter,\n    updateUrlForLineNumber,\n    onPageDown,\n    onPageUp,\n    currentStartLine,\n    currentStartChar,\n    currentEndLine,\n    currentEndChar,\n    determineAndSetTextAreaCursorPosition,\n    getCorrectLineNumberWithCollapsedSections,\n  }\n}\n\nexport function determineSymbolBounds(line: string, index: number) {\n  // Special condition, if the user clicks on a :\n  if (line[index] === ':') {\n    if (!line[index - 1]?.match(/\\w/) || !line[index + 1]?.match(/\\w/)) {\n      return {start: index, end: index + 1}\n    }\n  }\n  // If the user is clicking on a non-word character, just highlight that.\n  if (!line[index]?.match(/[a-zA-Z0-9_-]/)) {\n    return {start: index, end: index + 1}\n  }\n\n  function takeUntilEdge(i: number, direction: number) {\n    let sawColon = false\n    for (; i >= 0 && i < line.length; i += direction) {\n      if (!sawColon && line[i] === ':') {\n        sawColon = true\n        continue\n      }\n\n      if (!line[i]?.match(/[a-zA-Z0-9_-]/)) {\n        break\n      }\n      sawColon = false\n    }\n    if (i < 0) {\n      i += 1\n    }\n    if (sawColon) {\n      i -= direction\n    }\n\n    return i\n  }\n\n  const end = takeUntilEdge(index, 1)\n  const start = takeUntilEdge(index, -1)\n\n  return {\n    start,\n    end,\n  }\n}\n","import {useEffect, useRef} from 'react'\n\nconst focusSymbolPaneEvent = 'react_blob_view_focus_symbol_pane'\n\nexport function useFocusSymbolPane(callback: (focusSymbolSearch: boolean) => void) {\n  const eventHandler = useRef(callback)\n\n  useEffect(() => {\n    eventHandler.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    const handleScrollEvent = (e: Event) => {\n      callback((e as CustomEvent).detail?.focusSymbolSearch || false)\n    }\n    window.addEventListener(focusSymbolPaneEvent, handleScrollEvent)\n    return () => {\n      window.removeEventListener(focusSymbolPaneEvent, handleScrollEvent)\n    }\n  }, [callback])\n}\n\nexport function focusSymbolPane() {\n  window.dispatchEvent(new CustomEvent(focusSymbolPaneEvent))\n}\n\nexport function focusSymbolSearch() {\n  window.dispatchEvent(new CustomEvent(focusSymbolPaneEvent, {detail: {focusSymbolSearch: true}}))\n}\n","import {announce} from '@github-ui/aria-live'\nimport {useCallback} from 'react'\n\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\nimport {collapseRow, expandRow, forceAnnouncementToScreenReaders} from '../utilities/lines'\nimport type {SetStickyLinesType} from './use-sticky-lines'\n\nexport const positionerID = 'highlighted-line-menu-positioner'\nexport const buttonHeight = 25\n\nexport function useHighlightedLineMenuOptions({\n  lineData,\n  onLineStickOrUnstick,\n  onMenuClose,\n  onCollapseToggle,\n  setOpen,\n}: {\n  lineData?: CodeLineData | null\n  onLineStickOrUnstick?: SetStickyLinesType\n  onMenuClose?: (value: boolean, otherValue: boolean) => void\n  onCollapseToggle?: () => void\n  setOpen: (value: boolean) => void\n}) {\n  function setShouldBeOpen(openValue: boolean, wasExpandCollapse = false) {\n    setOpen(openValue)\n    if (onMenuClose && !openValue) {\n      onMenuClose(openValue, wasExpandCollapse)\n    }\n  }\n\n  function openUpRefSelector() {\n    const refSelector = document.getElementsByClassName('ref-selector-class')\n    if (refSelector && refSelector.length === 1) {\n      //tree is expanded or tree is collapsed and user is scrolled to the top\n      ;(refSelector[0] as HTMLElement)?.click()\n      announce('ref selector opened')\n    } else if (refSelector && refSelector.length === 2) {\n      //tree is collapsed and the user has scrolled enough for the sticky header to be present\n      ;(refSelector[1] as HTMLElement)?.click()\n      announce('ref selector opened')\n    }\n\n    setShouldBeOpen(false)\n  }\n\n  function expandOrCollapseSection() {\n    if (!lineData) return\n    const {ownedSection} = lineData\n    if (ownedSection) {\n      if (ownedSection.collapsed) {\n        expand()\n        // eslint-disable-next-line i18n-text/no-en\n        forceAnnouncementToScreenReaders('Code section expanded')\n      } else {\n        collapse()\n        // eslint-disable-next-line i18n-text/no-en\n        forceAnnouncementToScreenReaders('Code section collapsed')\n      }\n    }\n    //close the menu, second parameter is to let the function know it was an expand or collapse event\n    setShouldBeOpen(false, true)\n  }\n\n  const expand = useCallback(() => {\n    if (!lineData) return\n    const {lineNumber, ownedSection} = lineData\n    if (ownedSection) ownedSection.collapsed = false\n    onCollapseToggle?.()\n    expandRow(lineNumber)\n    onLineStickOrUnstick?.(lineData, true)\n  }, [lineData, onCollapseToggle, onLineStickOrUnstick])\n\n  const collapse = useCallback(() => {\n    if (!lineData) return\n    const {lineNumber, ownedSection} = lineData\n    if (ownedSection) ownedSection.collapsed = true\n    onCollapseToggle?.()\n    collapseRow(lineNumber)\n  }, [lineData, onCollapseToggle])\n\n  return {\n    setShouldBeOpen,\n    expandOrCollapseSection,\n    openUpRefSelector,\n  }\n}\n\nexport function calculatePosition(anchor: HTMLElement | null, offset = {x: 0, y: 0}): React.CSSProperties {\n  const container = document.getElementById(positionerID)\n  if (!anchor || !container) {\n    return {display: 'none'}\n  }\n\n  const {top: anchorTop, left: anchorLeft, height: anchorHeight} = anchor.getBoundingClientRect()\n  const {top: tableTop, left: tableLeft} = container.getBoundingClientRect()\n  const topOffset = (buttonHeight - anchorHeight) / 2\n\n  return {\n    top: `${anchorTop - tableTop - topOffset + offset.y}px`,\n    left: `${Math.max(anchorLeft - tableLeft + offset.x, 0) - 13}px`,\n  }\n}\n\nexport function calculateTextContentFromElement(element: Element | null): string {\n  let textContent = element?.textContent ?? ''\n  if (textContent !== '') {\n    return textContent\n  }\n\n  if (element) {\n    const children = element.childNodes\n\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i] as Element\n      if (child) {\n        let childTextContent = child.getAttribute('data-code-text')\n        if (childTextContent === null) {\n          //recurse down the tree if we don't have the data-code-text attribute (meaning the node was a parent)\n          childTextContent = calculateTextContentFromElement(child)\n        }\n        textContent += childTextContent\n      }\n    }\n\n    return textContent\n  }\n  return textContent\n}\n","import {useSyncExternalStore} from 'react'\n\nexport function useIsSafari() {\n  return useSyncExternalStore(subscribe, isSafariInBrowser, isSafariOnServer)\n}\nfunction isSafariInBrowser() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n}\n\nfunction isSafariOnServer() {\n  return false\n}\n\n//this is just a no-op, it has to be verbose because otherwise the linter is not happy\nfunction subscribe() {\n  return () => {\n    return\n  }\n}\n","import {useCallback, useState} from 'react'\n\nexport function useManualRender() {\n  //we don't care about the value of the state, it is purely used to trigger a re-render\n  const [_, setState] = useState({})\n  // Triggers a re-render because the object literal will be a new object every time\n  return useCallback(() => setState({}), [])\n}\n","import {useEffect, useRef} from 'react'\n\nconst scrollLineIntoViewEvent = 'react_blob_view_scroll_line_into_view'\n\nexport function useScrollLineIntoView(callback: (payload: ScrollRequestPayload) => void) {\n  const eventHandler = useRef(callback)\n\n  useEffect(() => {\n    eventHandler.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    const handleScrollEvent = (event: CustomEvent<ScrollRequestPayload>) => eventHandler.current(event.detail)\n    window.addEventListener(scrollLineIntoViewEvent, handleScrollEvent as unknown as EventListener)\n    return () => {\n      window.removeEventListener(scrollLineIntoViewEvent, handleScrollEvent as unknown as EventListener)\n    }\n  }, [])\n}\n\nexport interface ScrollRequestPayload {\n  line: number\n  column?: number\n}\nexport function scrollLineIntoView(payload: ScrollRequestPayload) {\n  window.dispatchEvent(new CustomEvent<ScrollRequestPayload>(scrollLineIntoViewEvent, {detail: payload}))\n}\n","import {useEffect, useState} from 'react'\n\nexport const stickyHeaderId = 'repos-sticky-header'\n\n// Approximate starting guesses for the sticky header height\nconst stickyHeaderHeightGuess = 102\n\nconst updateStickyHeaderHeightEvent = 'code_view_update_sticky_header_height_event'\n\nlet stickyHeaderObserver: ResizeObserver | null = null\nlet lastTrackedStickyHeader: HTMLDivElement | null = null\nlet lastTrackedStickyHeaderHeight: number | null = null\n\n// This is a hack to track the height of the sticky header once it loads. This function is called\n// when the sticky header is put into the DOM, so we can track its height and send that information\n// to other components.\nexport function trackStickyHeader(stickyHeader: HTMLDivElement | null) {\n  if (!stickyHeader || lastTrackedStickyHeader === stickyHeader) {\n    return\n  }\n\n  lastTrackedStickyHeader = stickyHeader\n\n  if (stickyHeaderObserver === null) {\n    stickyHeaderObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        if (entry.contentRect.height !== lastTrackedStickyHeaderHeight) {\n          lastTrackedStickyHeaderHeight = entry.contentRect.height\n          window.dispatchEvent(new CustomEvent(updateStickyHeaderHeightEvent, {detail: entry.contentRect.height}))\n        }\n      }\n    })\n  } else {\n    stickyHeaderObserver.disconnect()\n  }\n\n  stickyHeaderObserver.observe(stickyHeader)\n}\n\nexport function useStickyHeaderHeight(): number {\n  const [stickyHeaderHeight, setStickyHeaderHeight] = useState<number | undefined>(undefined)\n\n  useEffect(() => {\n    function handleUpdateStickyHeaderHeight(event: Event) {\n      setStickyHeaderHeight((event as CustomEvent).detail)\n    }\n\n    window.addEventListener(updateStickyHeaderHeightEvent, handleUpdateStickyHeaderHeight)\n\n    if (lastTrackedStickyHeader) {\n      trackStickyHeader(lastTrackedStickyHeader)\n    }\n\n    return () => {\n      window.removeEventListener(updateStickyHeaderHeightEvent, handleUpdateStickyHeaderHeight)\n    }\n  }, [])\n\n  if (stickyHeaderHeight !== undefined) {\n    return stickyHeaderHeight\n  }\n\n  return stickyHeaderHeightGuess\n}\n","import React, {useCallback, useEffect, useState} from 'react'\n\nexport function useStickyObserver(elementRef: React.RefObject<HTMLDivElement>): boolean {\n  const [isStickied, setIsStickied] = useState(false)\n  const stickyCallback = useCallback(\n    (entries: IntersectionObserverEntry[]) => {\n      // There can be multiple entries if the user scrolled down and up quickly.\n      // Just respond to the last one.\n      const e = entries[entries.length - 1]\n      // Less than 1 means some portion of the element is scrolled out of view\n      // With top: -1px we expect this to be < 1 when the element is stuck.\n      const isIntersecting = e!.intersectionRatio < 1\n      if (isIntersecting !== isStickied) {\n        setIsStickied(isIntersecting)\n      }\n    },\n    [isStickied, setIsStickied],\n  )\n\n  useEffect(() => {\n    const element = elementRef.current\n    const options = {threshold: [1], rootMargin: '-1px 0px 0px 0px'}\n\n    const observer = new IntersectionObserver(stickyCallback, options)\n\n    if (elementRef.current) {\n      observer.observe(elementRef.current)\n    }\n\n    return () => {\n      if (element) observer.unobserve(element)\n    }\n  }, [elementRef, stickyCallback])\n\n  return isStickied\n}\n\nexport function useStickyHeaderSx(): Record<string, unknown> | undefined {\n  // TODO: set this to be a setting in the more file options menu\n  const shouldUseStickyHeaders = true\n  const stickySx = React.useMemo(() => {\n    return shouldUseStickyHeaders\n      ? {\n          top: '0px',\n          zIndex: 4,\n          background: 'var(--bgColor-default, var(--color-canvas-default))',\n          position: shouldUseStickyHeaders ? 'sticky' : undefined,\n        }\n      : undefined\n  }, [shouldUseStickyHeaders])\n\n  return stickySx\n}\n","import type {CodeSection} from '@github-ui/code-nav'\nimport {ObservableSet} from '@github-ui/observable'\nimport {useObservedState, useObservedStateMap, useSubscription} from '@github-ui/react-observable'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {useSyncExternalStore} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {type BlobOffset, type BlobRange, DOMRangeFromBlob} from '../../github/blob-anchor'\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\nimport {matchElementId} from '../components/blob/BlobContent/HighlightedOverlay'\nimport {charWidthMac, useIsCursorEnabled} from '../hooks/use-cursor-navigation'\nimport type {SetStickyLinesType} from '../hooks/use-sticky-lines'\n\nconst rowCollapseStyleId = 'collapse-show-rows-styles'\nconst CODE_CELL_PADDING = 10\nexport const textAreaId = 'read-only-cursor-text-area'\n\nexport function queryLineElement(anchorPrefix: string, line: number) {\n  return document.querySelector<HTMLElement>(`#${anchorPrefix}LC${line}`)\n}\n\nexport function queryMatchElement(line: number, column: number) {\n  return document.querySelector<HTMLElement>(`main #${matchElementId(line, column)}`)\n}\n\nconst collapsedRows = new ObservableSet<number>()\n\nexport function useIsLineCollapsed(lineNumber: number) {\n  return useObservedState(collapsedRows.has(lineNumber))\n}\nexport function useLinesSubscription(callbackFunc: (collapsedSections: Set<number>) => void) {\n  return useSubscription(collapsedRows, callbackFunc)\n}\nexport function useCollapsedLinesSubscription(): Set<number> {\n  return useObservedStateMap(collapsedRows)\n}\n\nexport function useShouldUseInert() {\n  const isFirefox = useIsFirefox()\n  const firefoxVersion = useFirefoxVersion() ?? 0\n  const isChromiumOrEdge = useIsChromeOrEdge()\n  const chromiumVersion = useChromiumVersion() ?? 0\n\n  // 124 is the first version that supports inert hiding text\n  const isSupportedVersion = firefoxVersion >= 124 || chromiumVersion >= 124\n\n  // we only current use inert on the textarea overlay\n  return useIsCursorEnabled() && (isFirefox || isChromiumOrEdge) && isSupportedVersion\n}\n\nexport function useIsFirefox(): boolean {\n  return useSyncExternalStore(\n    () => () => {},\n    () => navigator.userAgent.toLowerCase().indexOf('firefox') > -1,\n    () => false,\n  )\n}\n\nfunction useIsChromeOrEdge(): boolean {\n  return useSyncExternalStore(\n    () => () => {},\n\n    () =>\n      navigator.userAgent.toLowerCase().indexOf('chrome') > -1 ||\n      navigator.userAgent.toLowerCase().indexOf('chromium') > -1 ||\n      navigator.userAgent.toLowerCase().indexOf('edge') > -1,\n    () => false,\n  )\n}\n\n/**\n * Extracts the Firefox major version number from the user agent string\n * @param userAgent - User agent string\n * @returns Firefox major version number or null if not found\n */\nfunction getFirefoxVersion(userAgent: string) {\n  // example - Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:97.0) Gecko/20100101 Firefox/97.0\"; => 97\n  // example - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36' => null\n  const match = userAgent.toLowerCase().match(/firefox\\/(\\d+(\\.\\d+)?)/)\n  return match && match.length >= 2 && match[1] ? parseFloat(match[1]) : null\n}\n\n/**\n * Extracts the edge or chrome major version number from the user agent string\n * @param userAgent - User agent string\n * @returns edge or chrome major version number or null if not found\n */\nfunction getChromiumVersion(userAgent: string) {\n  // example - Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:97.0) Gecko/20100101 Firefox/97.0\"; => null\n  // example - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36' => 121\n  const match = userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)\n\n  return match && match.length >= 3 && match[2] ? parseFloat(match[2]) : null\n}\n\nfunction useChromiumVersion(): number | null {\n  return useSyncExternalStore(\n    () => () => {},\n    () => getChromiumVersion(navigator.userAgent),\n    () => null,\n  )\n}\n\nfunction useFirefoxVersion(): number | null {\n  return useSyncExternalStore(\n    () => () => {},\n    () => getFirefoxVersion(navigator.userAgent),\n    () => null,\n  )\n}\n\nexport function buildRowClass(\n  codeSectionArray: CodeSection[],\n  lineNumber: number,\n  isEndLine: boolean,\n  ownedCodeSections: Map<number, CodeSection[]> | null,\n) {\n  if (!ownedCodeSections) return ''\n\n  let rowHideClassName = ''\n  for (let i = 0; i < codeSectionArray.length; i++) {\n    rowHideClassName += `${getLineChildClassName(codeSectionArray[i]!.startLine - 1)} `\n  }\n  if (isEndLine && ownedCodeSections.has(lineNumber)) {\n    const sections = ownedCodeSections.get(lineNumber)\n    if (sections) {\n      for (let j = 0; j < sections.length; j++) {\n        rowHideClassName += `${getLineChildClassName(sections[j]!.startLine - 1)} `\n      }\n    }\n  }\n  return rowHideClassName\n}\n\nfunction getLineChildClassName(lineNumber: number) {\n  return `child-of-line-${lineNumber}`\n}\n\nexport function applyStickyToParentStartLines(\n  map: Map<number, CodeLineData[]>,\n  line: number,\n  codeLineToSectionMap: Map<number, CodeSection[]> | undefined,\n  onLineStickOrUnstick: SetStickyLinesType,\n) {\n  if (!codeLineToSectionMap) return\n  const sections = codeLineToSectionMap.get(line)\n  if (sections) {\n    for (const section of sections) {\n      const startLines = map.get(section.endLine)\n      if (startLines) {\n        for (const startLine of startLines) {\n          if (line > startLine.lineNumber) {\n            onLineStickOrUnstick(startLine, false)\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function expandRow(lineNumber: number) {\n  setStylesForRow(lineNumber, false)\n  collapsedRows.delete(lineNumber)\n}\nexport function collapseRow(lineNumber: number) {\n  setStylesForRow(lineNumber, true)\n  collapsedRows.add(lineNumber)\n}\n\nexport function expandAllRows() {\n  const styleSheet = document.getElementById(rowCollapseStyleId)\n  if (styleSheet) {\n    styleSheet.textContent = ''\n  }\n\n  collapsedRows.clear()\n}\n\n//This is using direct dom manipulation for the styling becasue doing it in a react way would potentially\n//cause a lot of re-renders, and we don't want to have constant re-rendering when someone is simply expanding and\n//collapsing a given row. I did a reasonable amount of research trying to find if there was a react specific way to\n//add and remove stylesheets, but there weren't any examples that came up in my googling.\nfunction setStylesForRow(lineNumber: number, isCollapsed: boolean) {\n  const styles = `.${getLineChildClassName(lineNumber - 1)} { display: none; } `\n\n  if (document.getElementById(rowCollapseStyleId)) {\n    const styleSheet = document.getElementById(rowCollapseStyleId)\n    if (isCollapsed) {\n      styleSheet!.textContent += styles\n    } else {\n      let sheetTextContent = styleSheet?.textContent || ''\n      sheetTextContent = sheetTextContent.replace(styles, '')\n      styleSheet!.textContent = sheetTextContent\n    }\n  } else {\n    //this case will ideally only run once, the very first time someone collapses a row\n    const styleSheet = document.createElement('style')\n    styleSheet.id = rowCollapseStyleId\n    styleSheet.textContent = styles\n    document.head.appendChild(styleSheet)\n  }\n}\n\nconst codeTextAttribute = 'data-code-text'\n\nexport function isNodeTokenNode(line: SafeHTMLString, charOffset: number): boolean {\n  const fragment = document.createRange().createContextualFragment(line)\n  let textLengthSoFar = 0\n  for (const node of [...fragment.childNodes]) {\n    if (node instanceof HTMLElement) {\n      if (node.textContent) {\n        textLengthSoFar += node.textContent.length\n      } else if (node.getAttribute(codeTextAttribute)) {\n        textLengthSoFar += node.getAttribute(codeTextAttribute)!.length\n      }\n      // >= because we want the end of a symbol to count as in the symbol node\n      if (textLengthSoFar >= charOffset) {\n        if (isSymbolNode(node)) {\n          return true\n        } else {\n          return false\n        }\n      }\n    } else if (node instanceof Text) {\n      if (node.textContent) {\n        textLengthSoFar += node.textContent.length\n      }\n      //only greater than not equal to because we want a the beginning of a symbol to count as in the symbol node\n      if (textLengthSoFar > charOffset) {\n        return false\n      }\n    }\n  }\n  return false\n}\n\nexport function isSymbolNode(node: Node): node is HTMLSpanElement {\n  if (!(node instanceof HTMLSpanElement)) return false\n\n  const text = node.getAttribute(codeTextAttribute) ?? node.textContent ?? ''\n  const classes = [...node.classList].join(' ')\n\n  return isSymbol(text, classes)\n}\n\nexport function isSymbol(text: string, className: string) {\n  if (text.length < 3) return false\n\n  const classesArray = className.split(' ')\n  //we are okay with quotes being present in the symbol if the symbol's class is pl-ent\n  const matchRegEx = classesArray.includes('pl-ent') ? /\\n|\\s|[();&.=,]/ : /\\n|\\s|[();&.=\",]/\n  if (text.match(matchRegEx)) return false\n\n  if (classesArray.includes('pl-c') || classesArray.includes('pl-k')) return false // comments or keywords\n\n  return true\n}\n\nexport function getCodeSymbolFromPoint(x: number, y: number): string | null {\n  let nodeAtPoint: Node | undefined = undefined\n\n  nodeAtPoint ??= document.caretPositionFromPoint?.(x, y)?.offsetNode\n  if (nodeAtPoint) {\n    //for firefox we need to do additional massaging to get the actual element that has the clicked text\n    const offset = document.caretPositionFromPoint?.(x, y)?.offset ?? 1\n    //item list is 0 indexed, offset is 1 indexed\n    nodeAtPoint = nodeAtPoint.childNodes.item(offset - 1)\n  }\n  // eslint-disable-next-line compat/compat\n  nodeAtPoint ??= document.caretRangeFromPoint?.(x, y)?.startContainer\n\n  if (!nodeAtPoint || !isSymbolNode(nodeAtPoint)) return null\n\n  return nodeAtPoint.getAttribute(codeTextAttribute)\n}\n\n/**\n * From a text node and offset, find the line number that line is on and the offset within that line\n * @param textNode The node to find the line number for\n * @param offset The offset within the text node\n * @returns The line number and character column of the line\n */\nexport function calculateLineAndColumn(textNode: Node, offset: number): BlobOffset | undefined {\n  let lineNumber = null\n  let lineElement = null\n  let childNode = null\n  let column = offset\n\n  // Determine if the code is highlighted or not\n  if (textNode.parentElement?.classList.contains('react-file-line')) {\n    lineNumber = textNode.parentElement.getAttribute('data-line-number')\n    lineElement = textNode.parentElement\n    childNode = textNode\n  } else if (textNode.parentElement?.parentElement?.classList.contains('react-file-line')) {\n    lineNumber = textNode.parentElement.parentElement.getAttribute('data-line-number')\n    lineElement = textNode.parentElement.parentElement\n    childNode = textNode.parentNode\n    // If we highlight to the end of the line, the textNode will be the line element\n  } else if (textNode.parentElement?.firstElementChild?.classList.contains('react-file-line')) {\n    lineNumber = textNode.parentElement.firstElementChild.getAttribute('data-line-number')\n    if (!lineNumber || !parseInt(lineNumber, 10)) {\n      return\n    }\n    return {line: parseInt(lineNumber, 10) - 1, column: null}\n  } else {\n    return\n  }\n\n  if (!lineNumber || !parseInt(lineNumber, 10)) {\n    return\n  }\n\n  for (const child of lineElement.childNodes) {\n    if (child === childNode) {\n      break\n    }\n    column += child.textContent?.length || 0\n  }\n\n  return {line: parseInt(lineNumber, 10), column: column !== 0 ? column + 1 : null}\n}\n\nexport interface HighlightPosition {\n  offset?: number\n  width?: number\n}\nexport function determineProperOffsetWithDummyDiv(charOffset: number, lineRawText: string, tabSize: number) {\n  const dummyDiv = document.createElement('div')\n  dummyDiv.style.position = 'absolute'\n  dummyDiv.style.visibility = 'hidden'\n  dummyDiv.style.fontFamily = 'ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace'\n  dummyDiv.style.fontSize = '12px'\n  dummyDiv.style.lineHeight = '20px'\n  dummyDiv.style.whiteSpace = 'pre'\n  dummyDiv.style.tabSize = tabSize.toString()\n\n  dummyDiv.textContent = lineRawText.slice(0, charOffset)\n  document.body.appendChild(dummyDiv)\n  const offset = dummyDiv.clientWidth\n  document.body.removeChild(dummyDiv)\n  if (offset === 0 && charOffset !== 0) {\n    //we are in a test or some other issue came up, return approximation\n    return charOffset * charWidthMac\n  }\n  return offset\n  // else {\n  //   //TODO: this needs a lot of work, need to figure out the char offset in the last part of the line somehow\n  //   dummyDiv.style.whiteSpace = 'pre-wrap'\n  //   dummyDiv.textContent = lineRawText\n  //   document.body.appendChild(dummyDiv)\n  //   const offset = dummyDiv.clientHeight\n  //   document.body.removeChild(dummyDiv)\n  //   if (offset === 0 && charOffset !== 0) {\n  //     //we are in a test or some other issue came up, return approximation\n  //     return charOffset * charWidth\n  //   }\n  //   return offset\n  // }\n}\nexport function calculateHighlightOffsetAndWidth(\n  highlightedInfo: BlobRange,\n  lineElement: HTMLElement,\n  lineNumber: number,\n  tabSize: number,\n  rawText: string,\n): HighlightPosition | undefined {\n  if (highlightedInfo?.start.line === lineNumber && highlightedInfo?.start.column !== null) {\n    const range = DOMRangeFromBlob(\n      {\n        start: highlightedInfo.start,\n        end: {\n          line: highlightedInfo.start.line,\n          column: highlightedInfo.end.line === lineNumber ? highlightedInfo.end.column : null,\n        },\n      },\n      () => lineElement,\n    )\n\n    if (range && range.startContainer.parentElement) {\n      const lineOffset = range?.getBoundingClientRect().x - lineElement.getBoundingClientRect().x\n\n      return {\n        offset: lineOffset + CODE_CELL_PADDING,\n        width: highlightedInfo.end.line === lineNumber ? range.getBoundingClientRect().width : undefined,\n      }\n    } else if (rawText) {\n      const offset = determineProperOffsetWithDummyDiv(highlightedInfo.start.column - 1, rawText, tabSize)\n      const endColumn = highlightedInfo.end.line === lineNumber ? highlightedInfo.end.column : null\n\n      return {\n        // need to multiply by 2 because we're purely calculating the width of the text, not including any padding\n        offset: offset + CODE_CELL_PADDING * 2,\n        width:\n          highlightedInfo.end.line === lineNumber\n            ? determineProperOffsetWithDummyDiv(endColumn ? endColumn - 1 : rawText.length - 1, rawText, tabSize) -\n              offset\n            : undefined,\n      }\n    }\n  } else if (highlightedInfo?.end.line === lineNumber && highlightedInfo?.end.column !== null) {\n    const range = DOMRangeFromBlob(\n      {\n        start: {line: highlightedInfo.end.line, column: 0},\n        end: highlightedInfo.end,\n      },\n      () => lineElement,\n    )\n\n    if (range) {\n      return {\n        width: range.getBoundingClientRect().width + CODE_CELL_PADDING,\n      }\n    } else {\n      return {\n        width: determineProperOffsetWithDummyDiv(highlightedInfo.end.column - 1, rawText, tabSize) + CODE_CELL_PADDING,\n      }\n    }\n  }\n}\n\nexport function isLineInViewport(lineNumber: number): boolean {\n  const line = queryLineElement('', lineNumber)\n  return isInViewport(line)\n}\nexport function getElementForLine(lineNumber: number): HTMLElement | null {\n  return queryLineElement('', lineNumber)\n}\nfunction isInViewport(element: HTMLElement | null): boolean {\n  if (!element) return false\n\n  const rect = element.getBoundingClientRect()\n  return rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n}\n\nexport function calculateLineNumberFromOffset(pageYOffset: number, topPageSpace: number, lineHeight: number) {\n  const line = Math.floor((pageYOffset - topPageSpace) / lineHeight)\n  return line + 1 //line numbers are 1 indexed\n}\n\nexport function getActualLineNumberBinarySearch(wrongLineNumber: number, linesData: readonly CodeLineData[]) {\n  let low = 0\n  let high = linesData.length - 1\n  while (low <= high) {\n    const mid = Math.floor((low + high) / 2)\n    const midElement = linesData[mid]\n    if (!midElement) return -1\n    if (midElement.lineNumber === wrongLineNumber) {\n      return mid\n    } else if (midElement.lineNumber < wrongLineNumber) {\n      low = mid + 1\n    } else {\n      high = mid - 1\n    }\n  }\n  return -1\n}\n\nfunction createScreenReaderAnnouncementDiv() {\n  if (typeof ssrSafeDocument === 'undefined') return\n  const dummyDiv = ssrSafeDocument.createElement('div')\n  dummyDiv.classList.add('sr-only', 'mt-n1')\n  dummyDiv.id = 'screenReaderAnnouncementDiv'\n  dummyDiv.setAttribute('role', 'alert')\n  dummyDiv.setAttribute('data-testid', 'screenReaderAnnouncement')\n  dummyDiv.setAttribute('aria-live', 'assertive')\n  ssrSafeDocument.body.appendChild(dummyDiv)\n}\n\nexport function forceAnnouncementToScreenReaders(textToAnnounce: string, timeoutBeforeAnnouncing = 0) {\n  if (typeof ssrSafeDocument === 'undefined') return\n  let screenReaderDiv = ssrSafeDocument.getElementById('screenReaderAnnouncementDiv')\n\n  if (!screenReaderDiv) {\n    createScreenReaderAnnouncementDiv()\n  }\n  screenReaderDiv = ssrSafeDocument.getElementById('screenReaderAnnouncementDiv')\n  if (!screenReaderDiv) return //something went wrong creating the div\n\n  const textToAnnounceDeDuped =\n    screenReaderDiv.textContent === textToAnnounce ? `${textToAnnounce}\\u00A0` : textToAnnounce\n\n  setTimeout(() => {\n    if (screenReaderDiv) {\n      screenReaderDiv.textContent = textToAnnounceDeDuped\n    }\n  }, timeoutBeforeAnnouncing)\n}\n","let allowUserContentScrolling = true\n\nexport function setUserContentScrolling(setting: boolean) {\n  allowUserContentScrolling = setting\n}\n\nexport function getUserContentScrolling() {\n  return allowUserContentScrolling\n}\n","import type {Repository} from '@github-ui/current-repository'\nimport {codeNavigationPath} from '@github-ui/paths'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\n\nimport type {RefInfo} from '@github-ui/repos-types'\nimport type {BlackbirdSymbol, StylingDirectivesDocument} from '@github-ui/code-view-types'\nimport type {\n  CodeNavBackendType,\n  CodeNavPromise,\n  CodeNavResultDetails,\n  SymbolTreeBuildingData,\n  TreeNode,\n} from './code-nav-types'\nimport {\n  CodeReference,\n  type CodeSymbol,\n  type DefinitionOrReference,\n  type Range,\n  SymbolKind,\n  SymbolSource,\n} from './code-symbol'\nimport {getMatchGenerator, type Matchable, symbolMatchable, textMatchable} from './get-match'\nimport {alephSymbolToCodeReference, alephSymbolToCodeSymbol, outlineSymbolToCodeSymbol} from './symbol-result-converter'\n\nconst SEARCH_RESULT_LIMIT = 200\n\nexport interface CodeSection {\n  startLine: number\n  endLine: number\n  collapsed: boolean\n  index: number\n  level: number\n}\n\nexport class CodeNavigationInfo {\n  repo: Repository\n  refInfo: RefInfo\n  language: string\n  path: string\n  loggedIn: boolean\n  blobLines: string[]\n  symbols: CodeSymbol[]\n  lineIndexedSymbols: {[line: number]: CodeSymbol} = {}\n  isPlain: boolean\n\n  symbolTree: TreeNode[]\n  stylingDirectives: StylingDirectivesDocument | undefined\n  setLoading: (loading: boolean) => void\n  codeSections: Map<number, CodeSection[]>\n  lineToSectionMap: Map<number, CodeSection[]>\n\n  constructor(\n    repo: Repository,\n    refInfo: RefInfo,\n    path: string,\n    loggedIn: boolean,\n    rawLines: string[],\n    symbols: BlackbirdSymbol[],\n    stylingDirectives: StylingDirectivesDocument | undefined,\n    language: string,\n    isPlain: boolean,\n    setLoading: (loading: boolean) => void,\n  ) {\n    this.setLoading = setLoading\n    this.setLoading(true)\n    this.repo = repo\n    this.refInfo = refInfo\n    this.path = path\n    this.loggedIn = loggedIn\n    this.language = language\n\n    this.blobLines = rawLines\n    this.stylingDirectives = stylingDirectives\n    this.isPlain = isPlain\n    this.symbols = this.initSymbols(symbols)\n\n    this.initSymbolTree()\n    this.initCodeSections()\n    this.setLoading(false)\n  }\n\n  initCodeSections() {\n    const m = new Map()\n    const lineToSectionMap = new Map()\n    for (let i = 0; i < this.symbols.length; i++) {\n      //we don't want to deal with applying sticky if it is going to be a 2 line long sticky section\n      if (this.symbols[i]!.lineNumber < this.symbols[i]!.extent.end.line - 2) {\n        const section = {\n          startLine: this.symbols[i]!.lineNumber,\n          endLine: this.symbols[i]!.extent.end.line,\n          index: i,\n          collapsed: false,\n          level: this.symbols[i]!.depth,\n        }\n        if (m.has(section.startLine)) {\n          const tempArray = m.get(section.startLine)\n          tempArray.push(section)\n          m.set(section.startLine, tempArray)\n        } else {\n          m.set(section.startLine, [section])\n        }\n        if (m.has(section.endLine)) {\n          const tempArray = m.get(section.endLine)\n          tempArray.push(section)\n          m.set(section.endLine, tempArray)\n        } else {\n          m.set(section.endLine, [section])\n        }\n\n        //don't include the start lines or end lines because they're in the other map\n        for (let j = section.startLine + 1; j < section.endLine; j++) {\n          if (lineToSectionMap.has(j)) {\n            const tempArray = lineToSectionMap.get(j)\n            tempArray.push(section)\n            lineToSectionMap.set(j, tempArray)\n          } else {\n            lineToSectionMap.set(j, [section])\n          }\n        }\n      }\n    }\n\n    this.lineToSectionMap = lineToSectionMap\n    this.codeSections = m\n  }\n\n  initSymbols(symbols: BlackbirdSymbol[]) {\n    return symbols.map(outlineSymbol => {\n      const snippet = this.blobLines[outlineSymbol.ident_utf16.start.line_number] || ''\n      const codeSymbol = outlineSymbolToCodeSymbol(outlineSymbol, snippet, {\n        stylingDirectives: this.stylingDirectives,\n        repo: this.repo,\n        refInfo: this.refInfo,\n        path: this.path,\n      })\n\n      this.lineIndexedSymbols[codeSymbol.lineNumber] = codeSymbol\n\n      return codeSymbol\n    })\n  }\n\n  getBlobLine(line: number) {\n    return this.blobLines[line] || ''\n  }\n\n  getSymbolOnLine(lineNumber: number): CodeSymbol | undefined {\n    return this.lineIndexedSymbols[lineNumber]\n  }\n\n  initSymbolTree() {\n    if (this.symbols) {\n      const tempParents: CodeSymbol[] = []\n      const symbolTree: SymbolTreeBuildingData[] = this.symbols\n        .filter(s => s.kind.fullName !== 'field')\n        .map(symbol => {\n          let depth = 0\n          for (let i = tempParents.length - 1; i >= 0; i--) {\n            const parentSymbol = tempParents[i]!\n            if (isAfterSymbol(symbol, parentSymbol)) {\n              tempParents.pop()\n            } else {\n              depth = tempParents.length\n              break\n            }\n          }\n          tempParents.push(symbol)\n          symbol.setSymbolDepth(depth)\n          return {symbol, depth}\n        })\n      this.symbolTree = []\n\n      for (let index = 0; index < symbolTree.length; index++) {\n        const symbol = symbolTree[index]!\n        if (index + 1 < symbolTree.length) {\n          const nextSymbol = symbolTree[index + 1]!\n          if (nextSymbol.depth > symbol.depth) {\n            const symbolChildren = buildSymbolTreeChildren(symbolTree, index)\n            index += determineTotalNumberOfChildren(symbolChildren)\n            this.symbolTree.push({symbol: symbol.symbol, isParent: true, children: symbolChildren})\n            continue\n          }\n        }\n        this.symbolTree.push({symbol: symbol.symbol, isParent: false, children: []})\n      }\n    }\n  }\n\n  createReferences(matches: Range[]): CodeReference[] {\n    return matches.map(match => {\n      const reference = new CodeReference({\n        ident: match,\n        repo: this.repo,\n        refInfo: this.refInfo,\n        path: this.path,\n        isPlain: this.isPlain,\n        source: SymbolSource.BLOB_CONTENT,\n      })\n      reference.setSnippet(\n        undefined,\n        this.stylingDirectives?.[match.start.line],\n        this.blobLines[match.start.line]!,\n        undefined,\n      )\n      return reference\n    })\n  }\n\n  getReferencesToSymbol(symbolName: string): CodeReference[] {\n    //TODO: figure out loading once this is async\n    const ranges = searchInBlobContent(this.blobLines, symbolMatchable(symbolName))\n    return this.createReferences(ranges)\n  }\n\n  getReferencesToSearch(term: string): CodeReference[] {\n    //TODO: figure out loading once this is async\n    const ranges = searchInBlobContent(this.blobLines, textMatchable(term))\n    return this.createReferences(ranges)\n  }\n\n  getDefinitionsAndReferences(text: string, row: number, column: number): CodeNavPromise {\n    this.setLoading(true)\n\n    const defs = (async () => {\n      const selectedSymbol = this.getSymbolOnLine(row + 1) // row is 0-indexed, line numbers are 1-indexed\n      if (selectedSymbol && selectedSymbol.name === text) {\n        return {\n          definitions: [selectedSymbol],\n          backend: 'search' as CodeNavBackendType,\n        }\n      }\n\n      let [definitions, backend] = await this.getAlephDefinitions(text, row, column, this.loggedIn)\n\n      // Prefer locally-defined symbols over search-based definitions, unless precise results are available.\n      if (backend === 'search') {\n        const localDefinitions = this.getLocalDefinitions(text)\n        if (localDefinitions.length > 0) {\n          definitions = localDefinitions\n        }\n\n        // If we get a definition from the current file, suppress all the others\n        const localDefinition = definitions.find(d => d.path === this.path && d.repo === this.repo)\n        if (localDefinition) {\n          definitions = [localDefinition]\n        }\n        backend = 'search'\n      } else {\n        const localDefinitionsForKindFallback = this.getLocalDefinitions(text, true)\n        for (const definition of definitions) {\n          if (definition.kind.fullName === '' && definition.name === text) {\n            //local definitions always returns an array with a single item if it returns anything\n            //instead of empty string we can choose a default kind to display here when aleph and local have nothing,\n            //but for now keeping as empty string\n            definition.kind = localDefinitionsForKindFallback[0]\n              ? localDefinitionsForKindFallback[0].kind\n              : new SymbolKind({kind: ''})\n          }\n        }\n      }\n      return {\n        definitions,\n        backend,\n      }\n    })()\n\n    const localRefs = (async () => {\n      const {definitions} = await defs\n      const definitionLines = definitions.map(d => d.lineNumber)\n      const references = this.getReferencesToSymbol(text).filter(r => !definitionLines.includes(r.lineNumber))\n\n      return {\n        references,\n        backend: 'search' as CodeNavBackendType,\n      }\n    })()\n\n    const alephRefs = (async () => {\n      let symbolKind = 'SYMBOL_KIND_UNKNOWN'\n      const sym = this.getSymbolOnLine(row + 1) // row is 0-indexed, line numbers are 1-indexed\n      if (sym) {\n        // If we have this in the symbol outline (from blackbird analysis): use it.\n        symbolKind = sym.kind.enumStringVal\n      } else {\n        // Otherwise, try to use the first def\n        const {definitions} = await defs\n        symbolKind = definitions[0]?.kind?.enumStringVal || symbolKind\n      }\n      return this.getAlephReferences(text, row, column, this.loggedIn, symbolKind)\n    })()\n\n    const crossRefs = (async () => {\n      const [references, backend] = await alephRefs\n      return {\n        references,\n        backend,\n      }\n    })()\n\n    // Exclude definitions from references\n    return {\n      definitions: defs,\n      localReferences: localRefs,\n      crossReferences: crossRefs,\n      setLoading: this.setLoading,\n    }\n  }\n\n  getLocalDefinitions(text: string, getSymbolKind = false): CodeSymbol[] {\n    let bestRank = 9\n    let definitions: CodeSymbol[] = []\n    for (const sym of this.symbols) {\n      if (sym.name === text && (sym.kind.rank < bestRank || getSymbolKind)) {\n        bestRank = sym.kind.rank\n        definitions = [sym]\n      }\n    }\n\n    return definitions\n  }\n\n  async getAlephDefinitions(\n    text: string,\n    row: number,\n    column: number,\n    loggedIn: boolean,\n  ): Promise<[CodeSymbol[], CodeNavBackendType]> {\n    let backend: CodeNavBackendType = 'search'\n    if ((text === '' && row === -1 && column === -1) || !loggedIn) {\n      return [[], backend]\n    }\n\n    const definitionsUrl = codeNavigationPath({\n      repo: this.repo,\n      type: 'definition',\n      q: text,\n      language: this.language,\n      row,\n      column,\n      ref: this.refInfo.name,\n      path: this.path,\n      codeNavContext: 'BLOB_VIEW',\n      symbolKind: null,\n    })\n\n    let response: Response\n    try {\n      response = await verifiedFetchJSON(definitionsUrl)\n    } catch (e) {\n      return [[], backend]\n    }\n\n    if (!response.ok) {\n      return [[], backend]\n    }\n\n    let resultDetails: CodeNavResultDetails\n    try {\n      resultDetails = await response.json()\n    } catch (e) {\n      return [[], backend]\n    }\n\n    backend = parseAlephBackendType(resultDetails.backend) ?? 'search'\n\n    const definitions = resultDetails.payload\n      .flatMap(refs => refs)\n      .map(alephSymbol => {\n        return alephSymbolToCodeSymbol(alephSymbol, {\n          stylingDirectives: this.stylingDirectives,\n          repo: this.repo,\n          refInfo: this.refInfo,\n          path: this.path,\n          symbol: text,\n          backend,\n        })\n      })\n\n    return [definitions, backend]\n  }\n\n  async getAlephReferences(\n    text: string,\n    row: number,\n    column: number,\n    loggedIn: boolean,\n    symbolKind: string,\n  ): Promise<[CodeReference[], CodeNavBackendType]> {\n    let backend: CodeNavBackendType = 'search'\n    if ((text === '' && row === -1 && column === -1) || !loggedIn) {\n      return [[], backend]\n    }\n\n    const referencesUrl = codeNavigationPath({\n      repo: this.repo,\n      type: 'references',\n      q: text,\n      language: this.language,\n      row,\n      column,\n      ref: this.refInfo.name,\n      path: this.path,\n      codeNavContext: 'BLOB_VIEW',\n      symbolKind,\n    })\n\n    const partialResponse = await verifiedFetchJSON(referencesUrl)\n    if (!partialResponse.ok) {\n      return [[], backend]\n    }\n\n    let response: CodeNavResultDetails\n    try {\n      response = await partialResponse.json()\n    } catch (e) {\n      return [[], backend]\n    }\n\n    backend = parseAlephBackendType(response.backend) ?? 'search'\n\n    const observedLines = new Set<number>()\n    const isCheckedLine = (line: number) => {\n      if (observedLines.has(line)) {\n        return true\n      } else {\n        observedLines.add(line)\n        return false\n      }\n    }\n\n    const references = response.payload\n      .flatMap(refs => refs)\n      .reduce<CodeReference[]>((results, alephSymbol) => {\n        if (alephSymbol.path === this.path) {\n          return results\n        }\n        const reference = alephSymbolToCodeReference(alephSymbol, {\n          stylingDirectives: this.stylingDirectives,\n          repo: this.repo,\n          refInfo: this.refInfo,\n          path: this.path,\n          backend,\n        })\n\n        if (isCheckedLine(reference.lineNumber)) {\n          return results\n        }\n\n        results.push(reference)\n        return results\n      }, [])\n      // For some reason, aleph returns references out of order, so we need to sort\n      // them by line number.\n      .sort((a, b) => a.lineNumber - b.lineNumber)\n\n    return [references, backend]\n  }\n}\n\nexport function parseAlephBackendType(fromAleph: string): CodeNavBackendType | null {\n  switch (fromAleph) {\n    case 'ALEPH_PRECISE':\n    case 'ALEPH_PRECISE_PREVIEW':\n    case 'ALEPH_PRECISE_DEVELOPMENT':\n      return 'precise'\n    case 'BLACKBIRD':\n      return 'search'\n    default:\n      return null\n  }\n}\n\nexport function isAfterSymbol(symbolA: CodeSymbol, symbolB: CodeSymbol): boolean {\n  return symbolA.extent.start.line === symbolB.extent.end.line\n    ? symbolA.extent.start.column > symbolB.extent.end.column\n    : symbolA.extent.start.line > symbolB.extent.end.line\n}\n\nfunction buildSymbolTreeChildren(symbolTree: SymbolTreeBuildingData[], currentIndex: number) {\n  const symbolChildren: TreeNode[] = []\n  const symbol = symbolTree[currentIndex]!\n  for (let i = currentIndex + 1; i < symbolTree.length; i++) {\n    const tempSymbol = symbolTree[i]!\n    if (tempSymbol.depth > symbol.depth) {\n      const tempChildren = buildSymbolTreeChildren(symbolTree, i)\n      i += determineTotalNumberOfChildren(tempChildren)\n      symbolChildren.push({\n        symbol: tempSymbol.symbol,\n        children: tempChildren,\n        isParent: tempChildren.length > 0,\n      })\n    } else {\n      break\n    }\n  }\n  return symbolChildren\n}\n\nfunction determineTotalNumberOfChildren(node: TreeNode[]) {\n  let total = node.length\n  for (let i = 0; i < node.length; i++) {\n    const currNode = node[i]!\n    if (currNode.isParent) {\n      total += determineTotalNumberOfChildren(currNode.children)\n    }\n  }\n\n  return total\n}\n\nexport function searchInBlobContent(lines: string[], m: Matchable): Range[] {\n  const output: Range[] = []\n  const matches = getMatchGenerator(m, lines)\n  let match = matches.next()\n\n  while (!match.done && output.length < SEARCH_RESULT_LIMIT) {\n    const {column, columnEnd, line} = match.value\n    output.push({\n      start: {\n        line,\n        column,\n      },\n      end: {\n        line,\n        column: columnEnd,\n      },\n    })\n\n    match = matches.next()\n  }\n  return output\n}\n\nexport function searchInBlobIncrementally(\n  codeRefs: DefinitionOrReference[],\n  lines: string[],\n  matchable: Matchable,\n): Range[] {\n  if (codeRefs.length === 0) {\n    // In the incremental search we are narrowing results. If there are no results for a less specific search, there won't be any further matches.\n    return []\n  }\n\n  const startedAtResultLimit = codeRefs.length >= SEARCH_RESULT_LIMIT\n\n  const checkedLine: Record<number, true> = {}\n  const searchResults = codeRefs.reduce<Range[]>((output, ref) => {\n    if (checkedLine[ref.ident.start.line]) {\n      return output\n    }\n\n    checkedLine[ref.ident.start.line] = true\n    const matches = getMatchGenerator(matchable, [lines[ref.ident.start.line]!])\n    let match = matches.next()\n    while (!match.done && output.length < SEARCH_RESULT_LIMIT) {\n      const {column, columnEnd} = match.value\n      output.push({\n        start: {\n          line: ref.ident.start.line,\n          column,\n        },\n        end: {\n          line: ref.ident.start.line,\n          column: columnEnd,\n        },\n      })\n      match = matches.next()\n    }\n\n    return output\n  }, [])\n\n  // Add new results from the raw blob. Note: this is only necessary if we dropped the number\n  // of results below the maximum in the previous phase!\n  if (searchResults.length < SEARCH_RESULT_LIMIT && startedAtResultLimit) {\n    const startFromLine = codeRefs[codeRefs.length - 1]!.ident.start.line\n    const matchesInRawBlob = getMatchGenerator(matchable, lines, startFromLine)\n    let match = matchesInRawBlob.next()\n    while (!match.done && searchResults.length < SEARCH_RESULT_LIMIT) {\n      const {line, column, columnEnd} = match.value\n      searchResults.push({\n        start: {\n          line,\n          column,\n        },\n        end: {\n          line,\n          column: columnEnd,\n        },\n      })\n      match = matchesInRawBlob.next()\n    }\n  }\n\n  return searchResults\n}\n","import type {Repository} from '@github-ui/current-repository'\nimport type {StylingDirectivesLine} from '@github-ui/code-view-types'\nimport {blamePath, blobPath} from '@github-ui/paths'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\n\ninterface Position {\n  line: number\n  column: number\n}\n\nexport interface Range {\n  start: Position\n  end: Position\n}\n\nexport enum SymbolSource {\n  BLACKBIRD_SEARCH = 'blackbird-search',\n  BLACKBIRD_ANALYSIS = 'blackbird-analysis',\n  ALEPH_PRECISE = 'aleph-precise',\n  BLOB_CONTENT = 'blob-content-search',\n}\n\nexport class SymbolKind {\n  enumStringVal: string\n  fullName: string\n  shortName: string\n  plColor: string\n  rank: number\n\n  constructor({kind}: {kind: string | number}) {\n    const [fullName, enumStringVal] = convertBlackbirdSymbolKind(kind)\n\n    this.enumStringVal = enumStringVal\n    this.fullName = fullName\n    this.shortName = symbolKindShortName(fullName)\n    this.plColor = symbolKindColor(fullName)\n    this.rank = symbolKindRank(fullName)\n  }\n}\n\n// Convert a blackbird SymbolKind enum value to a display friendly string.\n// Source of truth: https://github.com/github/hydro-schemas/blob/main/proto/hydro/schemas/blackbird/v0/entities/symbol_kind.proto\nfunction convertBlackbirdSymbolKind(kind: string | number): [string, string] {\n  if (typeof kind === 'string') {\n    const name = kind.toString().replace('SYMBOL_KIND_', '').replace(/_DEF$/, '').replace(/_REF$/, '').toLowerCase()\n    if (kind.startsWith('SYMBOL_KIND_')) {\n      return [name, kind.toString()]\n    } else if (kind !== '' && kind !== 'unknown') {\n      let enumVal = `SYMBOL_KIND_${kind.toUpperCase()}`\n      if (kind === 'call') {\n        enumVal += '_REF'\n      } else {\n        enumVal += '_DEF'\n      }\n      return [kind, enumVal]\n    }\n  }\n\n  return ['unknown', 'SYMBOL_KIND_UNKNOWN']\n}\n\nexport function symbolKindShortName(fullName: string) {\n  switch (fullName) {\n    case 'function':\n    case 'method':\n      return 'func'\n    case 'interface':\n      return 'intf'\n    case 'implementation':\n      return 'impl'\n    case 'constant':\n      return 'const'\n    case 'module':\n      return 'mod'\n\n    case 'h1':\n    case 'h2':\n    case 'h3':\n    case 'h4':\n    case 'h5':\n    case 'h6':\n    case 'class':\n    case 'call':\n    case 'enum':\n    case 'field':\n    case 'macro':\n    case 'struct':\n    case 'trait':\n    case 'type':\n    case 'union':\n      return fullName\n\n    default:\n      return fullName.substring(0, 1)\n  }\n}\n\nfunction symbolKindColor(fullName: string) {\n  switch (fullName) {\n    case 'function':\n    case 'method':\n      return 'prettylights.syntax.entity'\n    case 'class':\n    case 'enum':\n    case 'struct':\n    case 'union':\n      return 'prettylights.syntax.constant'\n    case 'interface':\n    case 'trait':\n      return 'prettylights.syntax.keyword'\n    case 'constant':\n    case 'field':\n    case 'enum member':\n      return 'prettylights.syntax.variable'\n    case 'implementation':\n      return 'prettylights.syntax.string'\n\n    default:\n      return 'prettylights.syntax.entity'\n  }\n}\n\n// Relative rank of symbol kinds. Lower is higher relevance.\nfunction symbolKindRank(kind: string): number {\n  return (\n    {\n      class: 1,\n      struct: 1,\n      enum: 1,\n      type: 2,\n      interface: 3,\n      trait: 3,\n      module: 4,\n      implementation: 5,\n      function: 6,\n      method: 7,\n      call: 8,\n      field: 9,\n    }[kind] || 9\n  )\n}\n\nexport class CodeSymbol {\n  ident: Range\n  extent: Range\n\n  kind: SymbolKind\n  name: string\n  fullyQualifiedName: string\n  depth: number\n\n  repo: Repository\n  refInfo: RefInfo\n  path: string\n\n  // Snippet for the line the symbol is defined on\n  highlightedText: SafeHTMLString | undefined\n  stylingDirectives: StylingDirectivesLine | undefined\n  bodyText: string\n  leadingWhitespace: number | undefined\n\n  source: SymbolSource\n\n  constructor({\n    ident,\n    extent,\n    kind,\n    name,\n    fullyQualifiedName,\n    source,\n  }: {\n    ident: Range\n    extent: Range\n    kind: string | number\n    name: string\n    fullyQualifiedName: string\n    source: SymbolSource\n  }) {\n    this.ident = ident\n    this.extent = extent\n    this.kind = new SymbolKind({kind})\n    this.name = name\n    this.fullyQualifiedName = fullyQualifiedName\n    this.source = source\n  }\n\n  setSymbolDepth(depth: number) {\n    this.depth = depth\n  }\n  setFileInfo(repo: Repository, refInfo: RefInfo, path: string) {\n    this.repo = repo\n    this.refInfo = refInfo\n    this.path = path\n  }\n\n  get lineNumber() {\n    return this.ident.start.line + 1\n  }\n\n  setSnippet(\n    highlightedText: SafeHTMLString | undefined,\n    stylingDirectives: StylingDirectivesLine | undefined,\n    bodyText: string,\n    leadingWhitespace: number | undefined,\n  ) {\n    this.highlightedText = highlightedText\n    this.stylingDirectives = stylingDirectives\n    this.bodyText = bodyText\n    this.leadingWhitespace = leadingWhitespace\n  }\n\n  href(): string {\n    if (!this.repo || !this.refInfo || !this.path) {\n      return `/${window.location.pathname}#L${this.lineNumber}`\n    }\n\n    const commitish =\n      this.source === SymbolSource.BLACKBIRD_SEARCH\n        ? this.repo.defaultBranch\n        : this.refInfo.name || this.refInfo.currentOid\n\n    return blobPath({\n      owner: this.repo.ownerLogin,\n      repo: this.repo.name,\n      commitish,\n      filePath: this.path,\n      lineNumber: this.lineNumber,\n    })\n  }\n\n  // Generates a string which uniquely identifies the file this reference comes from\n  pathKey(): string {\n    return `${this.repo.ownerLogin}/${this.repo.name}/${this.refInfo.currentOid}/${this.path}`\n  }\n}\n\nexport class CodeReference {\n  ident: Range\n  repo: Repository\n  refInfo: RefInfo\n  path: string\n  isPlain: boolean\n\n  // Snippet information for the line the reference is from\n  highlightedText: SafeHTMLString | undefined\n  stylingDirectives: StylingDirectivesLine | undefined\n  bodyText: string\n  source: SymbolSource\n  leadingWhitespace: number | undefined\n\n  constructor({\n    ident,\n    repo,\n    refInfo,\n    path,\n    isPlain,\n    source,\n  }: {\n    ident: Range\n    repo: Repository\n    refInfo: RefInfo\n    path: string\n    isPlain?: boolean\n    source: SymbolSource\n  }) {\n    this.ident = ident\n    this.repo = repo\n    this.refInfo = refInfo\n    this.path = path\n    this.isPlain = isPlain ?? false\n    this.source = source\n  }\n\n  get lineNumber() {\n    return this.ident.start.line + 1\n  }\n\n  href(blame: boolean): string {\n    if (!this.repo || !this.refInfo || !this.path) {\n      return `/${window.location.pathname}#L${this.lineNumber}`\n    }\n\n    const commitish =\n      this.source === SymbolSource.BLACKBIRD_SEARCH\n        ? this.repo.defaultBranch\n        : this.refInfo.name || this.refInfo.currentOid\n\n    const params = {\n      owner: this.repo.ownerLogin,\n      repo: this.repo.name,\n      commitish,\n      filePath: this.path,\n      lineNumber: this.lineNumber,\n      plain: this.isPlain ? 1 : undefined,\n    }\n\n    return blame ? blamePath(params) : blobPath(params)\n  }\n\n  setSnippet(\n    highlightedText: SafeHTMLString | undefined,\n    stylingDirectives: StylingDirectivesLine | undefined,\n    bodyText: string,\n    leadingWhitespace: number | undefined,\n  ) {\n    this.highlightedText = highlightedText\n    this.stylingDirectives = stylingDirectives\n    this.bodyText = bodyText\n    this.leadingWhitespace = leadingWhitespace\n  }\n\n  // Generates a string which uniquely identifies the file this reference comes from\n  pathKey(): string {\n    return `${this.repo.ownerLogin}/${this.repo.name}/${this.refInfo.currentOid}/${this.path}`\n  }\n}\n\nexport type DefinitionOrReference = CodeSymbol | CodeReference\n","/**\n * Lazy iterator that returns one match at a time\n * @param regex regular expression used for the search\n * @param text raw text blob\n * @param startFromLine line in the text blob indexed from 0\n */\n\nenum MatchableType {\n  Text,\n  Symbol,\n}\n\nexport interface Matchable {\n  kind: MatchableType\n  regexp: RegExp\n}\n\nexport function symbolMatchable(symbol: string) {\n  const escapedRegex = `(\\\\W|^)${symbol.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}(\\\\W|$)`\n  return {\n    kind: MatchableType.Symbol,\n    regexp: new RegExp(escapedRegex, 'g'),\n  }\n}\n\nexport function textMatchable(query: string) {\n  const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n  return {\n    kind: MatchableType.Text,\n    regexp: new RegExp(escapedQuery, 'gi'),\n  }\n}\n\nexport function* getMatchGenerator(regex: Matchable, lines: string[], startFromLine = 0) {\n  for (let line = startFromLine; line < lines.length; line++) {\n    const snippet = lines[line]!\n\n    let match: RegExpExecArray | null\n\n    while ((match = regex.regexp.exec(snippet)) !== null) {\n      let matchContent = match[0]\n      let column = match.index\n\n      // Symbol matcher regex match leading whitespace, but don't actually include\n      // that in the match positions! This is necessary because regex\n      // lookbehinds aren't widely supported in browsers...\n      if (regex.kind === MatchableType.Symbol) {\n        if (matchContent.length > 0 && /\\W/.test(matchContent[0]!)) {\n          matchContent = matchContent.substring(1)\n          column += match[0].length - matchContent.length\n        }\n        if (matchContent.length > 0 && /\\W/.test(matchContent[matchContent.length - 1]!)) {\n          matchContent = matchContent.substring(0, matchContent.length - 1)\n        }\n      }\n\n      yield {\n        line,\n        column,\n        columnEnd: column + matchContent.length,\n        text: snippet,\n      }\n    }\n  }\n}\n","import type {Repository} from '@github-ui/current-repository'\n\nimport type {RefInfo} from '@github-ui/repos-types'\nimport type {BlackbirdSymbol, StylingDirectivesDocument} from '@github-ui/code-view-types'\nimport {CodeReference, CodeSymbol, SymbolSource} from './code-symbol'\nimport type {AlephSymbol, CodeNavBackendType} from './code-nav-types'\n\ninterface Options {\n  stylingDirectives: StylingDirectivesDocument | undefined\n  path: string\n  repo: Repository\n  refInfo: RefInfo\n}\n\ninterface AlephSymbolOptions extends Options {\n  backend: CodeNavBackendType\n}\n\nexport function outlineSymbolToCodeSymbol(\n  outlineSymbol: BlackbirdSymbol,\n  snippet: string,\n  {stylingDirectives, repo, refInfo, path}: Options,\n): CodeSymbol {\n  const {extent_utf16: extentUtf16, ident_utf16: identUtf16} = outlineSymbol\n\n  const codeSymbol = new CodeSymbol({\n    kind: outlineSymbol.kind,\n    fullyQualifiedName: outlineSymbol.fully_qualified_name,\n    name: outlineSymbol.name,\n    extent: {\n      start: {line: extentUtf16.start.line_number, column: extentUtf16.start.utf16_col},\n      end: {line: extentUtf16.end.line_number, column: extentUtf16.end.utf16_col},\n    },\n    ident: {\n      start: {line: identUtf16.start.line_number, column: identUtf16.start.utf16_col},\n      end: {line: identUtf16.end.line_number, column: identUtf16.end.utf16_col},\n    },\n    source: SymbolSource.BLACKBIRD_ANALYSIS,\n  })\n\n  codeSymbol.setSnippet(undefined, stylingDirectives?.[identUtf16.start.line_number], snippet, undefined)\n  codeSymbol.setFileInfo(repo, refInfo, path)\n\n  return codeSymbol\n}\n\nexport function alephSymbolToCodeSymbol(\n  alephSymbol: AlephSymbol,\n  {symbol, refInfo, repo, path, backend}: AlephSymbolOptions & {symbol: string},\n): CodeSymbol {\n  const symbolStartIdx = alephSymbol.ident?.start?.character\n  const symbolEndIdx = alephSymbol.ident?.end?.character ?? alephSymbol.ident?.start?.character\n  const ident = {\n    start: {\n      line: alephSymbol.ident.start.line,\n      column: symbolStartIdx ? symbolStartIdx - alephSymbol.leadingWhitespace : 0,\n    },\n    end: {\n      line: alephSymbol.ident?.end?.line ?? alephSymbol.ident.start.line,\n      column: symbolEndIdx ? symbolEndIdx - alephSymbol.leadingWhitespace : 0,\n    },\n  }\n\n  const extentStartIdx = alephSymbol.extent?.start?.character\n  const extentEndIdx = alephSymbol.extent?.end?.character ?? alephSymbol.extent?.start?.character\n  const extent = {\n    start: {\n      line: alephSymbol.extent.start.line,\n      column: extentStartIdx ? extentStartIdx : 0,\n    },\n    end: {\n      line: alephSymbol.extent.end?.line ?? alephSymbol.extent.start.line,\n      column: extentEndIdx ? extentEndIdx : 0,\n    },\n  }\n\n  const codeSymbol = new CodeSymbol({\n    ident,\n    extent,\n    kind: alephSymbol.symbolKind,\n    name: symbol,\n    // I guess aleph doesn't support fully qualified names? Just use the name\n    fullyQualifiedName: symbol,\n    source: backend === 'search' ? SymbolSource.BLACKBIRD_SEARCH : SymbolSource.ALEPH_PRECISE,\n  })\n\n  if (alephSymbol.local) {\n    codeSymbol.setFileInfo(repo, refInfo, path)\n  } else if (alephSymbol.commitOid && alephSymbol.path) {\n    let symbolRefInfo = refInfo\n\n    if (alephSymbol.commitOid !== refInfo.currentOid) {\n      symbolRefInfo = {\n        name: '',\n        listCacheKey: alephSymbol.commitOid,\n        currentOid: alephSymbol.commitOid,\n        canEdit: false,\n      }\n    }\n\n    codeSymbol.setFileInfo(alephSymbol.repo ?? repo, symbolRefInfo, alephSymbol.path)\n  }\n\n  const whiteSpace = new Array(alephSymbol.leadingWhitespace).fill(' ').join('')\n  const firstLineWithWhiteSpace = whiteSpace + (alephSymbol.firstLine || '')\n  codeSymbol.setSnippet(alephSymbol.highlightedText, undefined, firstLineWithWhiteSpace, alephSymbol.leadingWhitespace)\n  return codeSymbol\n}\n\nexport function alephSymbolToCodeReference(\n  alephSymbol: AlephSymbol,\n  {refInfo, path, repo, backend}: AlephSymbolOptions,\n): CodeReference {\n  let symbolRefInfo = refInfo\n  let symbolPath = path\n\n  if (!alephSymbol.local && alephSymbol.commitOid && alephSymbol.path) {\n    symbolRefInfo = refInfo\n    symbolPath = alephSymbol.path\n\n    if (alephSymbol.commitOid !== refInfo.currentOid) {\n      symbolRefInfo = {\n        name: '',\n        listCacheKey: alephSymbol.commitOid,\n        currentOid: alephSymbol.commitOid,\n\n        // TODO: this is probably the wrong value sometimes... but we most\n        // likely won't read this field\n        canEdit: false,\n      }\n    }\n  }\n\n  const identStartSymbolIdx = alephSymbol.ident.start.character\n  const identEndSymbolIdx = alephSymbol.ident.end?.character\n  const codeReference = new CodeReference({\n    repo,\n    refInfo: symbolRefInfo,\n    path: symbolPath,\n    ident: {\n      start: {\n        line: alephSymbol.ident.start.line,\n        column: identStartSymbolIdx ? identStartSymbolIdx - alephSymbol.leadingWhitespace : 0,\n      },\n      end: {\n        line: alephSymbol.ident.end?.line || alephSymbol.ident.start.line,\n        column: identEndSymbolIdx ? identEndSymbolIdx - alephSymbol.leadingWhitespace : 0,\n      },\n    },\n    source: backend === 'search' ? SymbolSource.BLACKBIRD_SEARCH : SymbolSource.ALEPH_PRECISE,\n  })\n\n  const firstLineWithWhiteSpace =\n    new Array(alephSymbol.leadingWhitespace).fill(' ').join('') + (alephSymbol.firstLine || '')\n  codeReference.setSnippet(\n    alephSymbol.highlightedText,\n    undefined,\n    firstLineWithWhiteSpace,\n    alephSymbol.leadingWhitespace,\n  )\n  return codeReference\n}\n","import type {WebWorker} from '@github-ui/code-view-shared/utilities/web-worker'\n\nexport class DebouncedWorkerManager<TRequest, TResponse> {\n  private currentRequest: TRequest | undefined = undefined\n  private nextRequest: TRequest | undefined = undefined\n  public onResponse: ((response: TResponse) => void) | undefined\n  private delayId: NodeJS.Timeout | undefined\n\n  constructor(\n    private worker: Worker | WebWorker<TRequest, TResponse>,\n    private delayMs = 200,\n    private debounceOverrideCondition?: (req: TRequest) => boolean,\n  ) {\n    this.worker.onmessage = ({data}: {data: TResponse}) => {\n      if (this.onResponse) {\n        this.onResponse(data)\n      }\n      if (this.nextRequest) {\n        this.postNow(this.nextRequest)\n        this.nextRequest = undefined\n      } else {\n        this.currentRequest = undefined\n      }\n    }\n  }\n\n  public post(request: TRequest) {\n    if (this.debounceOverrideCondition && this.debounceOverrideCondition(request)) {\n      if (this.delayId) {\n        clearTimeout(this.delayId)\n      }\n      return this.postNow(request)\n    }\n\n    if (this.idle()) {\n      if (this.delayId) {\n        clearTimeout(this.delayId)\n      }\n\n      this.delayId = setTimeout(() => {\n        this.postNow(request)\n      }, this.delayMs)\n    } else {\n      this.nextRequest = request\n    }\n  }\n\n  private postNow(request: TRequest) {\n    this.currentRequest = request\n    this.worker.postMessage(request)\n  }\n\n  public idle() {\n    return !this.currentRequest\n  }\n\n  public terminate() {\n    this.worker.terminate()\n  }\n}\n","import type {CopilotChatEventPayload, CopilotChatReference} from './copilot-chat-types'\n\nexport class OpenCopilotChatEvent extends Event {\n  declare payload: CopilotChatEventPayload\n  constructor(payload: CopilotChatEventPayload) {\n    super('open-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.payload = payload\n  }\n}\n\nexport class SearchCopilotEvent extends Event {\n  declare content: string\n  declare repoNwo: string\n  constructor(content: string, repoNwo: string) {\n    super('search-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.content = content\n    this.repoNwo = repoNwo\n  }\n}\n\nexport class AddCopilotChatReferenceEvent extends Event {\n  declare reference: CopilotChatReference\n  declare openPanel?: boolean\n  declare id?: string\n  constructor(reference: CopilotChatReference, openPanel: boolean = false, id?: string) {\n    super('add-copilot-chat-reference', {\n      bubbles: false,\n      cancelable: true,\n    })\n    this.reference = reference\n    this.openPanel = openPanel\n    this.id = id\n  }\n}\n\nexport class SymbolChangedEvent extends Event {\n  declare context: CopilotChatReference\n  constructor(context: CopilotChatReference) {\n    super('symbol-changed', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.context = context\n  }\n}\n\ndeclare global {\n  interface WindowEventMap {\n    'open-copilot-chat': OpenCopilotChatEvent\n    'add-copilot-chat-reference': AddCopilotChatReferenceEvent\n    'search-copilot-chat': SearchCopilotEvent\n    'symbol-changed': SymbolChangedEvent\n  }\n}\n\nexport function publishOpenCopilotChat(payload: CopilotChatEventPayload): void {\n  window.dispatchEvent(new OpenCopilotChatEvent(payload))\n}\n\nexport function publishAddCopilotChatReference(\n  payload: CopilotChatReference,\n  openPanel: boolean = false,\n  id?: string,\n): void {\n  window.dispatchEvent(new AddCopilotChatReferenceEvent(payload, openPanel, id))\n}\n\nexport function subscribeOpenCopilotChat(listener: (e: OpenCopilotChatEvent) => void): () => void {\n  window.addEventListener('open-copilot-chat', listener)\n\n  return () => {\n    window.removeEventListener('open-copilot-chat', listener)\n  }\n}\n\nexport function subscribeAddCopilotChatReference(listener: (e: AddCopilotChatReferenceEvent) => void): () => void {\n  window.addEventListener('add-copilot-chat-reference', listener)\n  return () => {\n    window.removeEventListener('add-copilot-chat-reference', listener)\n  }\n}\n\nexport function subscribeSearchCopilot(listener: (e: SearchCopilotEvent) => void): () => void {\n  window.addEventListener('search-copilot-chat', listener)\n  return () => {\n    window.removeEventListener('search-copilot-chat', listener)\n  }\n}\n\nexport function subscribeSymbolChanged(listener: (e: SymbolChangedEvent) => void): () => void {\n  window.addEventListener('symbol-changed', listener)\n\n  return () => {\n    window.removeEventListener('symbol-changed', listener)\n  }\n}\n","import type {SafeHTMLString} from '@github-ui/safe-html'\n\nexport type TopicItem = {\n  key: string\n  actionItem: JSX.Element\n}\n\nexport type CopilotChatRepo = {\n  id: number\n  name: string\n  ownerLogin: string\n  ownerType: 'User' | 'Organization'\n  readmePath?: string\n  description?: string\n  commitOID: string\n  ref: string\n  refInfo: {\n    name: string\n    type: 'branch' | 'tag'\n  }\n  visibility: string\n  languages?: Array<{name: string; percent: number}>\n}\n\nexport type CopilotChatPlan = Record<string, never>\n\nexport type CopilotChatOrg = {\n  id: string\n  login: string\n  avatarUrl: string\n}\n\nexport type CopilotChatThread = {\n  id: string\n  name: string\n  repoID?: number\n  currentReferences: CopilotChatReference[] | undefined\n  createdAt: string\n  updatedAt: string\n}\n\nexport type CopilotChatSuggestions = {\n  referenceType?: string\n  suggestions: GeneratedSuggestion[]\n}\n\nexport type GeneratedSuggestion = {\n  question: string\n  skill: string\n}\n\nexport type SkillExecution = {\n  slug: string\n  status: FunctionCalledStatus\n  arguments?: string\n  errorMessage?: string\n  references?: CopilotChatReference[]\n}\n\nexport type CopilotChatAgent = {\n  name: string\n  slug: string\n  avatarUrl: string\n  integrationUrl: string\n}\n\nexport type CopilotChatMessage = {\n  id: string\n  intent?: string\n  role: 'user' | 'assistant'\n  content?: string\n  createdAt: string\n  threadID: string\n  error?: ChatError\n  references: CopilotChatReference[] | null\n  skillExecutions?: SkillExecution[]\n  copilotAnnotations?: CopilotAnnotations\n  interrupted?: boolean\n  confirmations?: CopilotAgentConfirmation[] | null // confirmation from copilot/agent\n  clientConfirmations?: CopilotClientConfirmation[] | null // users response to agent confirmation\n  agentErrors?: CopilotAgentError[]\n}\n\nexport type CopilotAgentConfirmation = {\n  title: string\n  message: string\n  confirmation: object\n}\n\nexport type CopilotAgentError = {\n  type: string\n  code: string\n  message: string\n  identifier: string\n}\n\nexport type CopilotClientConfirmation = {\n  state: CopilotClientConfirmationState\n  confirmation: object\n}\n\nexport type CopilotClientConfirmationState = 'accepted' | 'dismissed'\n\nexport type CopilotAnnotations = {\n  CodeVulnerability?: CodeVulnerability[]\n}\n\ntype CodeVulnerability = {\n  startOffset: number\n  endOffset: number\n  details: CodeVulnerabilityDetails\n}\n\ntype CodeVulnerabilityDetails = {\n  type: string\n  uiType: string\n  description: string\n  uiDescription: string\n}\n\nexport type RepositoryReference = CopilotChatRepo & {\n  type: 'repository'\n}\n\nexport interface ReferenceHeaderInfo {\n  blobSize: string\n  displayName: string\n  isLfs: boolean\n  lineInfo: {truncatedLoc: number; truncatedSloc: number}\n  rawBlobUrl: string\n  viewable: boolean\n}\n\ntype APIResponseResource =\n  | {resourceType: 'Repository'; data: Omit<RepositoryAPIReference, 'type'>}\n  | {resourceType: 'Issue'; data: Omit<IssueAPIReference, 'type'>}\n  | {resourceType: 'Release'; data: Omit<ReleaseAPIReference, 'type'>}\n  | {resourceType: 'PullRequest'; data: Omit<PullRequestAPIReference, 'type'>}\n  | {resourceType: 'Commit'; data: Omit<CommitAPIReference, 'type'>}\n  | {resourceType: 'Topic'; data: Omit<TopicAPIReference, 'type'>}\n\nexport type APIResponseReference = APIResponseResource & {\n  type: 'api-response'\n  id: number\n  repo?: string\n}\n\nexport type FileReference = {\n  type: 'file' | 'file-v2'\n  url: string\n  path: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  languageName?: string\n  languageId?: number\n}\n\nexport type FileChangesReference = {\n  type: 'file-changes'\n  ref: string\n  path: string\n  url: string\n  commits: Array<{\n    oid: string\n    shortSha: string\n    message: string\n    createdAt: string\n    author: {\n      name: string\n      email: string\n      login: string\n    }\n    blameLines: Array<{\n      lineNo: number\n      text: string\n    }>\n  }>\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface FileReferenceDetails extends FileReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  range: LineRange\n  expandedRange: LineRange\n  headerInfo: ReferenceHeaderInfo\n}\n\nexport interface FileDiffReference {\n  type: 'file-diff'\n  id: string\n  url: string\n  base: SnippetReference | null // will be null if a file was 'added'\n  head: SnippetReference | null // will be null if a file was 'removed'\n  baseFile: FileReference | null // will be null if a file was 'added'\n  headFile: FileReference | null // will be null if a file was 'removed'\n  // user-selected, shown in location.hash, ex L1-R5\n  // won't be populated in the server props but should be present when calling CAPI\n  selectedRange?: {\n    start?: string\n    end?: string\n  }\n}\n\nexport interface FileDiffReferenceDetails extends FileDiffReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  expandedRange: LineRange\n}\n\nexport interface SnippetReference {\n  type: 'snippet'\n  url: string\n  path: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  range: LineRange\n  languageID?: number\n  languageName?: string\n  title?: string\n}\n\nexport interface SnippetReferenceDetails extends SnippetReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  expandedRange: LineRange\n  headerInfo: ReferenceHeaderInfo\n}\n\nexport interface CommitReference {\n  type: 'commit'\n  oid: string\n  message: string\n  permalink: string\n  author: {\n    name: string\n    email: string\n    login: string\n  }\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface PullRequestReference {\n  type: 'pull-request'\n  title: string\n  url: string\n  commit?: string\n  authorLogin: string\n  repository: CopilotChatRepo\n}\n\nexport const TREE_COMPARISON_REFERENCE_TYPE = 'tree-comparison'\nexport interface TreeComparisonReference {\n  type: typeof TREE_COMPARISON_REFERENCE_TYPE\n  baseRepoId: number\n  headRepoId: number\n  baseRevision: string\n  headRevision: string\n  diffHunks: DiffHunk[]\n}\n\nexport interface DiffHunk {\n  type: 'diff-hunk'\n  changeReference: string\n  diff: string\n  fileName: string\n  headerContext: string\n}\n\nexport interface IssueReference {\n  type: 'issue'\n  id: number\n  number: number\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n  title?: string\n  body?: string\n  state?: string\n  authorLogin?: string\n  url?: string\n  assignees?: string[]\n  pullRequestUrl?: string\n}\n\nexport interface DiscussionReference {\n  type: 'discussion'\n  number: number\n  title: string\n  body: string\n  user: {\n    login: string\n  }\n  state: string\n  id: number\n  url: string\n  authorLogin: string\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface ReleaseReference {\n  type: 'release'\n  name?: string\n  tagName?: string\n  url?: string\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n  body?: string\n  isDraft: boolean\n  isPrerelease: boolean\n  authorLogin?: string\n  targetCommitish?: string\n}\n\nexport interface ReleaseAPIReference {\n  type: 'release.api'\n  name?: string\n  tag_name: string\n  html_url?: string\n}\n\nexport interface PullRequestAPIReference {\n  type: 'pull-request.api'\n  title?: string\n  html_url?: string\n  number: number\n  repo?: string\n}\n\nexport interface AlertReference {\n  type: 'alert.api'\n  number: number\n  repo?: string\n}\n\nexport interface IssueAPIReference {\n  type: 'issue.api'\n  title?: string\n  html_url: string\n  number: number\n  repo?: string\n  state: string\n}\n\nexport interface RepositoryAPIReference {\n  type: 'repository.api'\n  name: string\n  description?: string\n  html_url?: string\n}\n\nexport interface CommitAPIReference {\n  type: 'commit.api'\n  sha: string\n  commit: {\n    message?: string\n  }\n  html_url?: string\n}\n\nexport interface DiffAPIReference {\n  type: 'diff.api'\n}\n\nexport interface FileAPIReference {\n  type: 'file.api'\n}\n\nexport interface TopicAPIReference {\n  type: 'topic.api'\n  name: string\n  display_name?: string\n  short_description?: string\n}\n\nexport interface TextReference {\n  type: 'text'\n  text?: string\n}\n\nexport interface UnsupportedAPIReference {\n  type: 'unsupported'\n  text?: string\n}\n\nexport interface LineRange {\n  start: number\n  end: number\n}\n\nexport interface CodeNavSymbolReference {\n  type: 'symbol'\n  kind: 'codeNavSymbol'\n  name: string\n  languageID?: number\n  codeNavDefinitions?: CodeNavSymbol[]\n  codeNavReferences?: CodeReference[]\n  languageName?: string\n}\n\nexport interface CodeNavSymbolReferenceDetails extends CodeNavSymbolReference {\n  codeNavDefinitions?: CodeNavSymbolDetails[]\n  codeNavReferences?: CodeReferenceDetails[]\n}\n\nexport interface SuggestionSymbolReference {\n  type: 'symbol'\n  kind: 'suggestionSymbol'\n  name: string\n  languageID?: number\n  suggestionDefinitions?: SuggestionSymbol[]\n}\n\nexport interface SuggestionSymbolReferenceDetails extends SuggestionSymbolReference {\n  suggestionDefinitions?: SuggestionSymbolDetails[]\n}\n\nexport type DocsetReference = {\n  type: 'docset'\n  name: string\n  id: string\n  scopingQuery: string // TODO: is this the correct name for CAPI?\n  avatarUrl: string\n  // Docset references coming from previous threads in CAPI currently don't have their\n  // repos serialized.\n  repos?: string[]\n  description: string\n}\n\nexport type GitHubAgentReference = {\n  type: 'github.agent'\n  login: string\n  avatarURL: string\n}\n\nexport type WebSearchReference = {\n  type: 'web-search'\n  query: string\n  results: Array<{title: string; excerpt: string; url: string}>\n  status: string\n}\n\nexport type SupportDocumentReference = {\n  type: 'support-document'\n  query: string\n  results: Array<{title: string; content: string; url: string}>\n  status: string\n}\n\nexport type JobReference = {\n  type: 'job'\n  id: string\n  repoId: number\n  repoName: string\n  repoOwner: string\n}\n\nexport type PlanReference = {\n  type: 'plan'\n}\n\ntype CodeNavSymbol = {\n  ident: Range\n  extent: Range\n} & CodeSymbol\n\ntype SuggestionSymbol = {\n  identOffset?: ByteOffset\n  extentOffset?: ByteOffset\n} & CodeSymbol\n\ntype CodeSymbol = {\n  kind: string\n  fullyQualifiedName: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  path: string\n}\n\ntype CodeReference = {\n  ident: Range\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  path: string\n}\n\ntype SymbolDetails = {\n  repoIsOrgOwned: boolean\n  highlightedContents?: SafeHTMLString[]\n  range?: LineRange\n}\n\nexport type CodeNavSymbolDetails = CodeNavSymbol & SymbolDetails\nexport type SuggestionSymbolDetails = SuggestionSymbol & SymbolDetails\nexport type CodeReferenceDetails = CodeReference & SymbolDetails\n\ntype Range = {\n  start: Position\n  end: Position\n}\n\ntype Position = {\n  line: number\n  column: number\n}\n\ntype ByteOffset = {\n  start: number\n  end: number\n}\n\nexport type CopilotChatReference =\n  | FileReference\n  | FileChangesReference\n  | SnippetReference\n  | FileDiffReference\n  | RepositoryReference\n  | CodeNavSymbolReference\n  | SuggestionSymbolReference\n  | DocsetReference\n  | CommitReference\n  | PullRequestReference\n  | GitHubAgentReference\n  | WebSearchReference\n  | TreeComparisonReference\n  | IssueReference\n  | TextReference\n  | ReleaseReference\n  | DiscussionReference\n  | JobReference\n  | PlanReference\n  | ReleaseAPIReference\n  | PullRequestAPIReference\n  | AlertReference\n  | IssueAPIReference\n  | RepositoryAPIReference\n  | CommitAPIReference\n  | DiffAPIReference\n  | FileAPIReference\n  | TopicAPIReference\n  | APIResponseReference\n  | UnsupportedAPIReference\n\nexport type NumberedCopilotChatReference = CopilotChatReference & {n: number}\n\nexport type CopilotChatReferenceDetails = SnippetReferenceDetails\n\nexport type ReferenceDetails<TReference extends CopilotChatReference> = TReference extends SnippetReference\n  ? SnippetReferenceDetails\n  : TReference extends FileReference\n    ? FileReferenceDetails\n    : TReference extends CodeNavSymbolReference\n      ? CodeNavSymbolReferenceDetails\n      : TReference extends SuggestionSymbolReference\n        ? SuggestionSymbolReferenceDetails\n        : TReference extends FileDiffReference\n          ? FileDiffReferenceDetails\n          : unknown\n\ntype CopilotChatExplainEventPayload = {\n  intent: typeof CopilotChatIntents.explain\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatAskEventPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  references?: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatAskPrEventPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatExplainPrEventPayload = {\n  intent: typeof CopilotChatIntents.explainFileDiff\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatSuggestEventPayload = {\n  intent: typeof CopilotChatIntents.suggest\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatReviewPrEventPayload = {\n  intent: typeof CopilotChatIntents.reviewPr\n  content: string\n  references: CopilotChatReference[]\n  completion: string\n  thread: CopilotChatThread\n  id?: string\n}\n\ntype CopilotChatStartConversationPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\nexport type CopilotChatEventPayload =\n  | CopilotChatExplainEventPayload\n  | CopilotChatAskEventPayload\n  | CopilotChatSuggestEventPayload\n  | CopilotChatAskPrEventPayload\n  | CopilotChatExplainPrEventPayload\n  | CopilotChatReviewPrEventPayload\n  | CopilotChatStartConversationPayload\n\nexport const CopilotChatIntents = {\n  explain: 'explain',\n  conversation: 'conversation',\n  suggest: 'suggest',\n  askDocs: 'ask-docs',\n  discussFileDiff: 'discuss-file-diff',\n  explainFileDiff: 'explain-file-diff',\n  reviewPr: 'review-pull-request',\n} as const\nexport type CopilotChatIntentsType = (typeof CopilotChatIntents)[keyof typeof CopilotChatIntents]\n\ninterface ChatErrorBase {\n  type: MessageStreamingErrorType | 'basic'\n  isError: boolean\n  message?: string\n  details?: unknown\n}\n\ninterface BasicChatError extends ChatErrorBase {\n  type: 'basic'\n  isError: true\n}\n\ninterface AgentError<TType extends MessageStreamingErrorType, TDetails> extends ChatErrorBase {\n  type: TType\n  isError: true\n  details: TDetails\n}\n\nexport type AgentUnauthorizedChatError = AgentError<'agentUnauthorized', NotAuthorizedForAgentErrorPayload>\nexport type AgentRequestChatError = AgentError<'agentRequest', AppAgentRequestErrorPayload>\nexport type AgentChatError = AgentUnauthorizedChatError | AgentRequestChatError\n\nexport type ChatError = BasicChatError | AgentChatError\n\nexport type BlackbirdSymbol = {\n  fully_qualified_name: string\n  kind: string\n  ident_start: number\n  ident_end: number\n  extent_start: number\n  extent_end: number\n}\n\nexport interface BlackbirdSuggestion {\n  kind: string\n  query: string\n  repository_nwo: string\n  language_id: number\n  path: string\n  repository_id: number\n  commit_sha: string\n  line_number: number\n  symbol: BlackbirdSymbol | null\n}\n\nexport type SuggestionsResponse = {\n  suggestions: BlackbirdSuggestion[]\n  queryErrors: string[]\n  failed: boolean\n}\n\nexport type KnowledgeBasesResponse = {\n  knowledgeBases: Docset[]\n  administratedCopilotEnterpriseOrganizations: CopilotChatOrg[] | null\n}\n\nexport interface Docset {\n  id: string\n  name: string\n  description: string\n  createdByID: number\n  ownerID: number\n  ownerLogin: string\n  ownerType: string\n  visibility: string\n  scopingQuery: string\n  repos: string[]\n  sourceRepos?: SourceRepo[]\n  visibleOutsideOrg: boolean\n  iconHtml?: SafeHTMLString\n  avatarUrl: string\n  adminableByUser: boolean\n  /**\n   * Orgs which own at least one repo in the docset but that the current user is not currently SSO'd into\n   */\n  protectedOrganizations: string[]\n}\n\nexport interface RepoData {\n  databaseId: number | null | undefined\n  name: string\n  nameWithOwner: string\n  isInOrganization: boolean\n  shortDescriptionHTML: string\n  paths?: string[]\n  owner: {\n    databaseId: number | null | undefined\n    avatarUrl: string\n    login: string\n  }\n}\n\nexport interface DocsetRepo extends RepoData {\n  paths: string[]\n}\n\nexport interface SourceRepo {\n  id: number\n  ownerID: number\n  paths: string[]\n}\n\nexport type MessageStreamingResponse =\n  | MessageStreamingResponseContent\n  | MessageStreamingResponseError\n  | MessageStreamingResponseComplete\n  | MessageStreamingResponseDebug\n  | MessageStreamingResponseFunctionCall\n  | MessageStreamingResponseConfirmation\n  | MessageStreamingResponseAgentError\n\nexport type MessageStreamingResponseContent = {\n  type: 'content'\n  body: string\n}\n\nexport type MessageStreamingResponseDebug = {\n  type: 'debug'\n  body: string\n}\n\nexport const MESSAGE_STREAMING_ERROR_TYPES = [\n  'exception',\n  'filtered',\n  'contentTooLarge',\n  'rateLimit',\n  'agentUnauthorized',\n  'agentRequest',\n  'networkError',\n  'multipleAgentsAttempt',\n] as const\n\ntype MessageStreamingErrorTypes = typeof MESSAGE_STREAMING_ERROR_TYPES\nexport type MessageStreamingErrorType = MessageStreamingErrorTypes[number]\n\nexport type MessageStreamingResponseError = {\n  type: 'error'\n  errorType: MessageStreamingErrorType\n  description: string\n}\n\nexport type MessageStreamingResponseComplete = {\n  type: 'complete'\n  id: string\n  turnID: string\n  createdAt: string\n  intent: string\n  references: CopilotChatReference[] | null\n  copilotAnnotations?: CopilotAnnotations\n}\n\nexport type MessageStreamingResponseFunctionCall = {\n  arguments: string\n  type: 'functionCall'\n  name: string\n  status: FunctionCalledStatus\n  errorMessage: string\n  references: CopilotChatReference[]\n}\n\nexport type MessageStreamingResponseConfirmation = {\n  type: 'confirmation'\n  title: string\n  message: string\n  confirmation: object\n}\n\nexport type MessageStreamingResponseAgentError = {\n  type: 'agentError'\n  agentErrorType: string\n  code: string\n  message: string\n  identifier: string\n}\n\nexport type FunctionArguments =\n  | BingSearchArguments\n  | FilePathSearchArguments\n  | SymbolSearchArguments\n  | CodeSearchArguments\n  | CreateIssueArguments\n  | GetIssueArguments\n  | GetPullRequestCommitsArguments\n  | GetCommitArguments\n  | GetAlertArguments\n  | GetReleaseArguments\n  | GetRepoArguments\n  | JobLogsArguments\n  | GetDiffArguments\n  | GetDiffByRangeArguments\n  | KnowledgeBaseSearchArguments\n  | GetFileArguments\n  | GetFileChangesArguments\n  | GetDiscussionArguments\n  | GetPullRequestArguments\n  | PlanArguments\n  | GitHubAPIArguments\n  | SupportSearchArguments\n\nexport type BingSearchArguments = {kind: 'bing-search'; query: string; freshness?: string}\nexport type SupportSearchArguments = {kind: 'support-search'; rawUserQuery: string}\nexport type CodeSearchArguments = {kind: 'codesearch'; query: string; scopingQuery: string}\nexport type KnowledgeBaseSearchArguments = {kind: 'kb-search'; query: string; kbID: string}\nexport type FilePathSearchArguments = {kind: 'pathsearch'; filename: string; scopingQuery: string}\nexport type GetFileArguments = {kind: 'getfile'; repo: string; path: string; ref?: string}\nexport type GetFileChangesArguments = {kind: 'getfilechanges'; repo: string; path: string; ref: string; max?: number}\nexport type SymbolSearchArguments = {kind: 'show-symbol-definition'; symbolName: string; scopingQuery: string}\nexport type CreateIssueArguments = {\n  kind: 'githubissuecreate'\n  repo: string\n  assignees: string[]\n  labels: string[]\n  title: string\n  body: string\n}\nexport type GetIssueArguments = {kind: 'getissue'; issueNumber: number; repo: string}\nexport type GetAlertArguments = {kind: 'getalert'; url: string}\nexport type GetPullRequestCommitsArguments = {kind: 'getprcommits'; pullRequestNumber: number; repo: string}\nexport type GetCommitArguments = {kind: 'getcommit'; commitish: number; repo: string}\nexport type GetReleaseArguments = {kind: 'getrelease'; repo: string; tagName?: string}\nexport type GetRepoArguments = {kind: 'getrepo'; repo: string}\nexport type JobLogsArguments = {\n  kind: 'get-actions-job-logs'\n  repo: string\n  jobId?: number\n  pullRequestNumber?: number\n  runId?: number\n  workflowPath?: string\n}\nexport type GetDiffArguments = {\n  kind: 'getdiff'\n  baseRepoId: number\n  headRepoId: number\n  baseRevision: string\n  headRevision: string\n}\nexport type GetDiffByRangeArguments = {kind: 'get-diff-by-range'; repo: string; range: string}\nexport type GetDiscussionArguments = {kind: 'getdiscussion'; repo: string; discussionNumber: number; owner: string}\nexport type GetPullRequestArguments = {kind: 'getpullrequest'; pullRequestNumber: number; repo: string}\nexport type PlanArguments = {kind: 'planskill'; user_query: string}\nexport type GitHubAPIArguments = {\n  kind: 'get-github-data'\n  endpoint: string\n  repo: string\n  endpointDescription?: string\n  task?: string\n}\n\nexport const SUPPORTED_FUNCTIONS = [\n  'bing-search',\n  'codesearch',\n  'kb-search',\n  'pathsearch',\n  'show-symbol-definition',\n  'getissue',\n  'getprcommits',\n  'getcommit',\n  'getrelease',\n  'getrepo',\n  'getdiff',\n  'get-diff-by-range',\n  'getfile',\n  'getfilechanges',\n  'getdiscussion',\n  'get-actions-job-logs',\n  'getpullrequest',\n  'getalert',\n  'planskill',\n  'get-github-data',\n  'support-search',\n]\n\nexport type FunctionCalledStatus = 'completed' | 'started' | 'error' | 'unsupported'\n\nexport type NotAuthorizedForAgentErrorPayload = {\n  authorize_url: string\n  client_id: string\n  name: string\n  avatar_url: string\n  slug: string\n  description: string\n}\n\nexport type AppAgentRequestErrorPayload = {\n  type: string\n  code: string\n  identifier: string\n  message: string\n}\n\nexport type CopilotChatMode = 'immersive' | 'assistive'\n\nexport type SuccessfulAPIResult<T> = {\n  status: number\n  ok: true\n  payload: T\n}\n\nexport type FailedAPIResult = {\n  status: number\n  ok: false\n  error: string\n}\n\nexport type APIResult<T> = SuccessfulAPIResult<T> | FailedAPIResult\n\ntype SuccessfulAPIStreamingResult = {\n  status: number\n  ok: true\n  response: Response\n}\n\nexport type APIStreamingResult = SuccessfulAPIStreamingResult | FailedAPIResult\n\nexport interface CopilotChatPayload {\n  agentsPath: string\n  apiURL: string\n  currentUserLogin: string\n  customInstructions?: string\n  renderKnowledgeBases?: boolean\n  optedInToUserFeedback: boolean\n  renderAttachKnowledgeBaseHerePopover?: boolean\n  renderKnowledgeBaseAttachedToChatPopover?: boolean\n  reviewLab: boolean\n}\n","import {filterMap} from './filter-map'\n\nexport type MapKey<T, K> = (item: T) => K | null | undefined\nexport type Comparator<T> = (a: T, b: T) => number\n\nexport function filterSort<T, K>(items: T[], map: MapKey<T, K>, compare: Comparator<K>): T[] {\n  const sortKey = (item: T): [T, K] | null => {\n    const key = map(item)\n    return key != null ? [item, key] : null\n  }\n  return [...filterMap(items, sortKey)].sort((a, b) => compare(a[1], b[1])).map(([item]) => item)\n}\n","export type MapFilter<T, U> = (item: T) => U | null | undefined\n\nexport function* filterMap<T, U>(items: T[], map: MapFilter<T, U>): Iterable<U> {\n  for (const item of items) {\n    const value = map(item)\n    if (value != null) {\n      yield value\n    }\n  }\n}\n","// Example\n// ```js\n//     fuzzyScore(\"foo.html\", \"foo\")\n//     // => 0.6458333333333334\n// ```\n//\n// ```js\n//     // Compute re once\n//     re = fuzzyRegexp(\"foo\")\n//     fuzzyScore(\"foo.html\", re)\n//     fuzzyScore(\"bar.html\", re)\n//     // => 0.6458333333333334\n// ```\n//\n// Returns a number between 0 and 1. 0 being the worst match and 1\n// being an exact match.\n// You can change the `prefixBonusWeight` variable to alter ordering.\n// Currently fuzzy search for the labels picker uses a weaker prefix bonus to weight heavier full word matches.\nexport function fuzzyScore(string: string, query: string, prefixBonusWeight = 0.1): number {\n  let score = stringScore(string, query, prefixBonusWeight)\n  if (score && query.indexOf('/') === -1) {\n    const basename = string.substring(string.lastIndexOf('/') + 1)\n    score += stringScore(basename, query, prefixBonusWeight)\n  }\n  return score\n}\n\n// Create a regexp that can be used to fuzzy match a given string. Any\n// special regexp characters in the input string will be escaped\n// correctly.\n//\n// A query of \"bar\" becomes /(.*)(b)([^a]*?)(a)([^r]*?)(r)(.*?)/.\n//\n// /\n//  (.*)     whatever's before the first b\n//  (b)      grab the first b of bar\n//  ([^a]*?) take everything up to the a of bar\n//  (a)      take the a of bar\n//  ([^r]*?) take everything up to the r of bar\n//  (r)      take the r of bar\n//  (.*?)    take the rest of the string\n// /\nexport function fuzzyRegexp(query: string): RegExp {\n  const chars = query.toLowerCase().split('')\n\n  let regex = ''\n\n  let firstChar = true\n  for (const char of chars) {\n    // must escape these chars so we match literals\n    const c = char.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    if (firstChar) {\n      // for the first we want to greedily match anything, which pushes\n      // the first match as late as possible in the string\n      regex += `(.*)(${c})`\n      firstChar = false\n    } else {\n      regex += `([^${c}]*?)(${c})`\n    }\n  }\n  return new RegExp(`${regex}(.*?)$`, 'i')\n}\n\nexport function fuzzyHighlightElement(content: Element, text?: string, textRe?: RegExp): void {\n  if (text) {\n    const matches = content.innerHTML.trim().match(textRe || fuzzyRegexp(text))\n    if (!matches) return\n\n    let open = false\n    const html = []\n    for (let i = 1; i < matches.length; ++i) {\n      const m = matches[i]\n      if (!m) continue\n\n      if (i % 2 === 0) {\n        if (!open) {\n          // eslint-disable-next-line github/unescaped-html-literal\n          html.push('<mark>')\n          open = true\n        }\n      } else if (open) {\n        html.push('</mark>')\n        open = false\n      }\n      html.push(m)\n    }\n    content.innerHTML = html.join('')\n  } else {\n    const html = content.innerHTML.trim()\n    const clean = html.replace(/<\\/?mark>/g, '')\n    if (html !== clean) {\n      content.innerHTML = clean\n    }\n  }\n}\n\nconst wordSeparators = new Set([' ', '-', '_'])\n\n// string_score.js: Quicksilver-like string scoring algorithm.\n//  https://raw.github.com/joshaven/string_score/master/coffee/string_score.coffee\n//\n// Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>\n// Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>\n// MIT license: http://www.opensource.org/licenses/mit-license.php\n//\n// A string score implementation.\nfunction stringScore(originalString: string, abbreviation: string, prefixBonusWeight = 0.1): number {\n  let string = originalString\n  if (string === abbreviation) {\n    return 1.0\n  }\n  const stringLength = string.length\n  let totalCharacterScore = 0.0\n  let shouldAwardCommonPrefixBonus = 0\n  let firstChar = true\n  for (const char of abbreviation) {\n    const indexCLowercase = string.indexOf(char.toLowerCase())\n    const indexCUppercase = string.indexOf(char.toUpperCase())\n    const minIndex = Math.min(indexCLowercase, indexCUppercase)\n    const indexInString = minIndex > -1 ? minIndex : Math.max(indexCLowercase, indexCUppercase)\n    if (indexInString === -1) {\n      return 0.0\n    }\n    totalCharacterScore += 0.1\n    if (string[indexInString] === char) {\n      totalCharacterScore += 0.1\n    }\n    if (indexInString === 0) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n      if (firstChar) {\n        shouldAwardCommonPrefixBonus = 1\n      }\n    }\n    if (wordSeparators.has(string.charAt(indexInString - 1))) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n    }\n    string = string.substring(indexInString + 1, stringLength)\n    firstChar = false\n  }\n  const abbreviationLength = abbreviation.length\n  const abbreviationScore = totalCharacterScore / abbreviationLength\n  let finalScore = (abbreviationScore * (abbreviationLength / stringLength) + abbreviationScore) / 2\n  if (shouldAwardCommonPrefixBonus && finalScore + prefixBonusWeight < 1) {\n    finalScore += prefixBonusWeight\n  }\n  return finalScore\n}\n\nexport type TextScore = {score: number; text: string}\nexport function compare(a: TextScore, b: TextScore): -1 | 0 | 1 {\n  if (a.score > b.score) {\n    return -1\n  } else if (a.score < b.score) {\n    return 1\n  } else if (a.text < b.text) {\n    return -1\n  } else if (a.text > b.text) {\n    return 1\n  } else {\n    return 0\n  }\n}\n","/**\n * An interface representing a value that can be observed for changes.\n */\nexport interface Observable<T> {\n  /**\n   * The current value of the observable.\n   */\n  get value(): T\n\n  /**\n   * Adds a callback to run in response to changes in the observable.\n   * @param onChange a callback to run in response to changes in the observable\n   * @returns a function to unsubscribe from the observable\n   */\n  subscribe(onChange: Subscription<T>): () => void\n}\n\n/**\n * A callback that is invoked when an observable changes.\n */\ntype Subscription<T> = (value: T) => void\n\nclass ObservableBase<T> {\n  #subscriptions: Set<Subscription<T>> = new Set()\n\n  /**\n   * Adds a callback to run in response to changes in the observable.\n   * @param onChange a callback to run in response to changes in the observable\n   * @returns a function to unsubscribe from the observable\n   */\n  subscribe(onChange: Subscription<T>) {\n    this.#subscriptions.add(onChange)\n    return () => {\n      this.#subscriptions.delete(onChange)\n    }\n  }\n\n  protected notify(value: T) {\n    for (const onChange of this.#subscriptions) {\n      onChange(value)\n    }\n  }\n}\n\n/**\n * A value that can be observed for changes.\n */\nexport class ObservableValue<T> extends ObservableBase<T> implements Observable<T> {\n  #value: T\n\n  constructor(value: T) {\n    super()\n    this.#value = value\n  }\n\n  /**\n   * The current value of the observable.\n   */\n  get value() {\n    return this.#value\n  }\n\n  /**\n   * Updates the value of the observable.\n   */\n  set value(value: T) {\n    if (this.#value === value) return\n\n    this.#value = value\n    this.notify(value)\n  }\n}\n\n/**\n * A Set that can be observed for changes to its contents.\n */\nexport class ObservableSet<T> extends ObservableBase<Set<T>> implements Observable<Set<T>> {\n  #value: Set<T>\n  #memberObservables: Map<T, ObservableValue<boolean>> = new Map()\n\n  constructor(...args: ConstructorParameters<typeof Set<T>>) {\n    super()\n    this.#value = new Set(...args)\n  }\n\n  /**\n   * The Set underlying the observable.\n   */\n  get value() {\n    return this.#value\n  }\n\n  /**\n   * Returns an observable boolean that indicates whether the Set contains a\n   * given value. This observable will be updated if the given value is added\n   * to or removed from the Set.\n   * @param value the value to check for\n   */\n  has(value: T): ObservableValue<boolean> {\n    if (!this.#memberObservables.has(value)) {\n      const observable = new ObservableValue(this.#value.has(value))\n      this.#memberObservables.set(value, observable)\n    }\n    return this.#memberObservables.get(value)!\n  }\n\n  /**\n   * Adds the given value to the Set.\n   * Updates subscribers to the Set if the value was added.\n   * Updates subscribers to the given value's membership via `has` if it was added.\n   * @param value the value to add\n   */\n  add(value: T): void {\n    if (this.#value.has(value)) return\n\n    this.#value.add(value)\n\n    if (this.#memberObservables.has(value)) {\n      this.#memberObservables.get(value)!.value = true\n    }\n\n    this.notify(this.#value)\n  }\n\n  /**\n   * Removes the given value from the Set.\n   * Updates subscribers to the Set if the value was removed.\n   * Updates subscribers to the given value's membership via `has` if it was removed.\n   * @param value the value to remove\n   */\n  delete(value: T): void {\n    if (!this.#value.has(value)) return\n\n    this.#value.delete(value)\n\n    if (this.#memberObservables.has(value)) {\n      this.#memberObservables.get(value)!.value = false\n    }\n\n    this.notify(this.#value)\n  }\n\n  /**\n   * Removes all values from the Set.\n   * Updates subscribers to the Set if any values were removed.\n   * Updates subscribers to each value that was removed.\n   */\n  clear(): void {\n    if (this.#value.size === 0) return\n\n    this.#value.clear()\n\n    for (const observable of this.#memberObservables.values()) {\n      observable.value = false\n    }\n\n    this.notify(this.#value)\n  }\n}\n\n/**\n * A Map that can be observed for changes to its contents.\n */\nexport class ObservableMap<K, V> extends ObservableBase<Map<K, V>> implements Observable<Map<K, V>> {\n  #value: Map<K, V>\n  #keyObservables: Map<K, ObservableValue<boolean>> = new Map()\n  #valueObservables: Map<K, ObservableValue<V | undefined>> = new Map()\n\n  constructor(...args: ConstructorParameters<typeof Map<K, V>>) {\n    super()\n    this.#value = new Map(...args)\n  }\n\n  /**\n   * The Map underlying the observable.\n   */\n  get value() {\n    return this.#value\n  }\n\n  /**\n   * Returns an observable boolean that indicates whether the Map contains a\n   * given key. This observable will be updated if the given value is added\n   * to or removed from the Map.\n   * @param key the key to check for\n   */\n  has(key: K): ObservableValue<boolean> {\n    if (!this.#keyObservables.has(key)) {\n      const observable = new ObservableValue(this.#value.has(key))\n      this.#keyObservables.set(key, observable)\n    }\n    return this.#keyObservables.get(key)!\n  }\n\n  /**\n   * Returns an observable value that contains the value associated with the\n   * given key, or undefined if the Map does not contain the key. This observable\n   * will be updated if the key is added to or removed from the Map, or if the\n   * value associated with the key changes.\n   * @param key the key for which to retrieve the value\n   */\n  get(key: K): ObservableValue<V | undefined> {\n    if (!this.#valueObservables.has(key)) {\n      const observable = new ObservableValue(this.#value.get(key))\n      this.#valueObservables.set(key, observable)\n    }\n    return this.#valueObservables.get(key)!\n  }\n\n  /**\n   * Associates the given value with the given key in the Map.\n   * Updates subscribers to the Map if the key did not already have this value.\n   * Updates subscribers to the given key's membership via `has` if it was newly added.\n   * Updates subscribers to the given key's value via `get` if it changed.\n   * @param key the key for which to add the value\n   * @param value the value to add\n   */\n  set(key: K, value: V): void {\n    if (this.#value.get(key) === value) return\n\n    this.#value.set(key, value)\n\n    if (this.#keyObservables.has(key)) {\n      this.#keyObservables.get(key)!.value = true\n    }\n\n    if (this.#valueObservables.has(key)) {\n      this.#valueObservables.get(key)!.value = value\n    }\n\n    this.notify(this.#value)\n  }\n\n  /**\n   * Removes the value associated with the given key from the Map.\n   * Updates subscribers to the Map if the key was removed.\n   * Updates subscribers to the given key's membership via `has` if it was removed.\n   * Updates subscribers to the given key's value via `get` if it was removed.\n   * @param key the key to remove\n   */\n  delete(key: K): void {\n    if (!this.#value.has(key)) return\n\n    this.#value.delete(key)\n\n    if (this.#keyObservables.has(key)) {\n      this.#keyObservables.get(key)!.value = false\n    }\n\n    if (this.#valueObservables.has(key)) {\n      this.#valueObservables.get(key)!.value = undefined\n    }\n\n    this.notify(this.#value)\n  }\n\n  /**\n   * Removes all keys and their values from the Map.\n   * Updates subscribers to the Map if any keys were removed.\n   * Updates subscribers to each removed key's membership via `has`.\n   * Updates subscribers to each removed key's value via `get`.\n   */\n  clear(): void {\n    if (this.#value.size === 0) return\n\n    this.#value.clear()\n\n    for (const observable of this.#keyObservables.values()) {\n      observable.value = false\n    }\n\n    for (const observable of this.#valueObservables.values()) {\n      observable.value = undefined\n    }\n\n    this.notify(this.#value)\n  }\n}\n","import {useEffect, useRef, useState} from 'react'\n\nimport {type Observable, ObservableMap, ObservableSet, ObservableValue} from '@github-ui/observable'\n\n/**\n * Returns a constant reference to an ObservableValue\n * @param initialValue the initial value of the observable\n */\nexport function useObservableValue<T>(initialValue: T): ObservableValue<T> {\n  const observableRef = useRef(new ObservableValue(initialValue))\n  return observableRef.current\n}\n\n/**\n * Returns a constant reference to an ObservableSet\n * @param args the initializer arguments for the underlying Set\n */\nexport function useObservableSet<T>(...args: ConstructorParameters<typeof Set<T>>): ObservableSet<T> {\n  const observableRef = useRef(new ObservableSet(...args))\n  return observableRef.current\n}\n\n/**\n * Returns a constant reference to an ObservableMap\n * @param args the initializer arguments for the underlying Map\n */\nexport function useObservableMap<K, V>(...args: ConstructorParameters<typeof Map<K, V>>) {\n  const observableRef = useRef(new ObservableMap(...args))\n  return observableRef.current\n}\n\n/**\n * Safely subscribes to and unsubscribes from an observable\n * @param observable the subject observable\n * @param onChange a callback to run in response to changes in the observable\n */\nexport function useSubscription<T>(observable: Observable<T>, onChange: (value: T) => void): void {\n  const onChangeRef = useRef(onChange)\n  onChangeRef.current = onChange\n\n  useEffect(() => observable.subscribe(value => onChangeRef.current(value)), [observable])\n}\n\n/**\n * Returns a stateful value that is updated (re-rendering the\n * component) when the given observable changes\n * @param observable the subject observable\n */\nexport function useObservedState<T>(observable: Observable<T>): T {\n  const [value, setValue] = useState(observable.value)\n\n  useSubscription(observable, newValue => setValue(newValue))\n\n  return value\n}\n\n/**\n * Returns a stateful value that is updated (re-rendering the\n * component) when the given observable changes - can use this\n * with an observable map as the return value becasue we manually\n * re-render when the value is updated\n * @param observable the subject observable\n */\nexport function useObservedStateMap<T>(observable: Observable<T>): T {\n  const [value, setValue] = useState(observable.value)\n  const [_, setState] = useState({})\n\n  useSubscription(observable, newValue => {\n    setValue(newValue)\n    //trigger a re-render by modifying an empty object\n    setState({})\n  })\n\n  return value\n}\n\n/**\n * Returns a constant reference to an observable that is updated in\n * response to changes in the given observable.\n * @param observable the subject observable\n * @param derive a function which transforms the value of the subject\n *               observable to the value of the returned observable\n */\nexport function useDerivedObservable<T, D>(\n  observable: ObservableValue<T>,\n  derive: (value: T) => D,\n): ObservableValue<D> {\n  const derivedObservable = useObservableValue(derive(observable.value))\n\n  useSubscription(observable, value => {\n    derivedObservable.value = derive(value)\n  })\n\n  return derivedObservable\n}\n","export type RefType = 'branch' | 'tag'\n\nexport const mapRefType = (ref?: string): RefType | undefined => {\n  if (!ref) return undefined\n  if (ref.startsWith('refs/tags/')) return 'tag'\n  if (ref.startsWith('refs/heads/')) return 'branch'\n  return undefined\n}\nexport const qualifyRef = (ref: string, refType: RefType) => {\n  if (refType === 'branch') return `refs/heads/${ref}`\n  if (refType === 'tag') return `refs/tags/${ref}`\n  return ref\n}\nexport const unqualifyRef = (ref?: string) => {\n  if (!ref) return undefined\n  const refType = mapRefType(ref)\n  if (!refType) return ref\n  const [, , ...unqualifiedRef] = ref.split('/')\n  return unqualifiedRef.join('/')\n}\n","export interface TestIdProps {\n  /** Test ID to be queried by automated testing suites */\n  'data-testid'?: string\n}\n\nexport const testIdProps = (value: string): TestIdProps => {\n  return {'data-testid': value}\n}\n","import {repositoryTreePath} from '@github-ui/paths'\nimport type {ContributorsInfo} from '@github-ui/repos-types'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport {useEffect, useState} from 'react'\n\ninterface ContributorsState {\n  contributors?: ContributorsInfo\n  loading?: boolean\n  error?: boolean\n}\n\n/**\n * Retrieve information of contributors of current path\n *\n * returns an object with contributors, loading state and error\n * while loading returns {loading: true}\n * if cannot retrieve contributor , returns {error: true}\n */\nexport function useContributors(\n  repoOwner: string | undefined,\n  repoName: string | undefined,\n  commitish: string | undefined,\n  path: string | undefined,\n): ContributorsState {\n  const [state, setState] = useState<ContributorsState>({loading: true})\n\n  const fileContributorsPath =\n    repoName && repoOwner && commitish && path\n      ? repositoryTreePath({\n          repo: {name: repoName, ownerLogin: repoOwner},\n          commitish,\n          action: 'file-contributors',\n          path,\n        })\n      : null\n\n  useEffect(() => {\n    if (!fileContributorsPath) return\n\n    let cancelled = false\n    const update = async () => {\n      setState({loading: true})\n      const response = await verifiedFetchJSON(fileContributorsPath)\n\n      if (cancelled) {\n        return\n      }\n\n      try {\n        if (response.ok) {\n          setState({contributors: await response.json()})\n        } else {\n          setState({error: true})\n        }\n      } catch (e) {\n        setState({error: true})\n      }\n    }\n\n    update()\n\n    // This method will be called if fileContributorsPath changes, in order to ignore the old result\n    return function cancel() {\n      cancelled = true\n    }\n  }, [fileContributorsPath])\n\n  return state\n}\n","import {useEffect} from 'react'\n\nexport function useHideFooter(hide: boolean) {\n  useEffect(() => {\n    if (!hide) {\n      return\n    }\n\n    const footer: HTMLDivElement | null = document.querySelector('.footer')\n    if (!footer) {\n      return\n    }\n    footer.hidden = true\n    return () => {\n      footer.hidden = false\n    }\n  }, [hide])\n}\n","import React from 'react'\nimport type {Options} from 'react-virtual'\nimport {useVirtual} from 'react-virtual'\n\nconst defaultKeyExtractor = (index: number) => index\n\n/**\n * A hook that wraps the `useVirtual` hook and provides virtualization for lists of dynamic elements that may\n * change in size. By default, `useVirtual` assumes the size of items in the list won't change.\n */\nexport function useVirtualDynamic<T>(options: Options<T>) {\n  const measureRefCacheRef = React.useRef<Record<string, (el: HTMLElement | null) => void>>({})\n  const elCacheRef = React.useRef<Record<string, Element | null>>({})\n\n  const update = (key: number | string, el: HTMLElement) => {\n    measureRefCacheRef.current[key]!(el)\n  }\n  const updateRef = React.useRef(update)\n  updateRef.current = update\n\n  const resizeObserverRef = React.useRef(\n    new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const el = entry.target\n        const attribute = 'data-key'\n        const key = el.getAttribute(attribute)\n\n        if (key === null) {\n          throw new Error(`Value not found, for '${attribute}' attribute`)\n        }\n\n        const htmlEl = el as HTMLElement\n\n        updateRef.current(key, htmlEl)\n      }\n    }),\n  )\n\n  React.useEffect(() => {\n    const ro = resizeObserverRef.current\n    return () => {\n      ro.disconnect()\n    }\n  }, [])\n\n  const {size, keyExtractor = defaultKeyExtractor} = options\n\n  const cachedMeasureRefWrappers = React.useMemo(() => {\n    // Function that returns a function that will be passed to the `measureRef` prop of virtualized items.\n    // `measureRef` is the item ref that is passed to the actual item component and used to measure the item's size.\n    // In this case, we utilize the `ResizeObserver` to subscribe to changes in each item's size, making the list\n    // responsive to layout changes without manual intervention.\n    const makeMeasureRefWrapperForItem = (key: string | number) => (el: HTMLElement | null) => {\n      if (elCacheRef.current[key]) {\n        resizeObserverRef.current.unobserve(elCacheRef.current[key])\n      }\n\n      if (el) {\n        updateRef.current(key, el)\n        resizeObserverRef.current.observe(el)\n      }\n\n      elCacheRef.current[key] = el\n    }\n\n    const measureRefsMap: Record<string, (el: HTMLElement | null) => void> = {}\n\n    for (let i = 0; i < size; i++) {\n      const key = keyExtractor(i)\n\n      measureRefsMap[key] = makeMeasureRefWrapperForItem(key)\n    }\n\n    return measureRefsMap\n  }, [size, keyExtractor])\n\n  const rowVirtualizer = useVirtual(options)\n\n  const virtualItems = rowVirtualizer.virtualItems.map(item => {\n    measureRefCacheRef.current[item.key] = item.measureRef\n\n    return {\n      ...item,\n      measureRef: cachedMeasureRefWrappers[item.key]!,\n    }\n  })\n\n  return {...rowVirtualizer, virtualItems}\n}\n","import {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport type {RefObject} from 'react'\nimport {useCallback, useRef, useState} from 'react'\nimport type {Options} from 'react-virtual'\nimport {useVirtual} from 'react-virtual'\n\nexport type Virtualizer = ReturnType<typeof useVirtual>\n\n/*\nThe source of this hook is the PR below. It does not seem likely that it will be\nupstreamed into the version of react-virtual we are using, but we might be able\nto eventually get rid of this if we upgrade to the newest version of the library.\n\nAnd even if not, the code is small and simple enough that it should be a small\nmaintenance burden.\n\nhttps://github.com/TanStack/virtual/pull/210/files#diff-bfe9874d239014961b1ae4e89875a6155667db834a410aaaa2ebe3cf89820556\n */\n\ninterface VirtualWindowOptions<T extends HTMLElement> extends Options<T> {\n  /**\n   * Additional number to offset by when scrolling to items in the list. Useful to account for sticky\n   * content.\n   */\n  additionalScrollOffset?: number\n  useVirtualImpl?: typeof useVirtual\n  // measureSize is used by react-virtual but not present in the typings for Options for some reason\n  measureSize?: (element: HTMLElement) => number\n}\n\n/**\n * A hook that wraps the `useVirtual` hook and provides virtualization when the scroll container is the window. This\n * requires some additional logic since window is technically not an HTMLElement.\n */\nexport function useVirtualWindow<T extends HTMLElement = HTMLElement>({\n  additionalScrollOffset = 0,\n  scrollToFn,\n  horizontal,\n  parentRef,\n  useVirtualImpl = useVirtual,\n  ...rest\n}: VirtualWindowOptions<T>): Virtualizer {\n  const windowRef = useRef(window)\n  const scrollOffsetFn = useCallback(() => {\n    const bounds = parentRef.current?.getBoundingClientRect()\n    const top = bounds?.top ?? 0\n    const left = bounds?.left ?? 0\n    return horizontal ? left * -1 : top * -1\n  }, [horizontal, parentRef])\n\n  const defaultScrollToFn = useCallback(\n    (offset: number) => {\n      const parentOffsetTop = (parentRef.current?.getBoundingClientRect().top ?? 0) + window.scrollY\n      const scrollOffset = offset + parentOffsetTop + additionalScrollOffset\n      windowRef.current?.scroll({top: horizontal ? 0 : scrollOffset, left: horizontal ? scrollOffset : 0})\n    },\n    [additionalScrollOffset, horizontal, parentRef],\n  )\n\n  return useVirtualImpl({\n    ...rest,\n    horizontal,\n    parentRef,\n    scrollToFn: scrollToFn || defaultScrollToFn,\n    onScrollElement: windowRef as unknown as RefObject<HTMLElement>,\n    scrollOffsetFn,\n    useObserver: () => useWindowRect(windowRef),\n  })\n}\n\nfunction useWindowRect(windowRef: RefObject<Window>) {\n  const [rect, setRect] = useState({height: 0, width: 0})\n  const element = windowRef.current\n  useLayoutEffect(() => {\n    if (!element) return\n    const resizeHandler = () => {\n      const next = {\n        height: element.innerHeight,\n        width: element.innerWidth,\n      }\n      setRect(prev => (prev.height !== next.height || prev.width !== next.width ? next : prev))\n    }\n\n    resizeHandler()\n\n    // eslint-disable-next-line github/prefer-observers\n    element.addEventListener('resize', resizeHandler)\n    return () => {\n      element.removeEventListener('resize', resizeHandler)\n    }\n  }, [element])\n\n  return rect\n}\n","import {Box} from '@primer/react'\nimport type React from 'react'\n\ninterface PanelProps {\n  children: React.ReactNode\n  sx?: Record<string, unknown>\n  id?: string\n  className?: string | undefined\n}\n\nexport const Panel: React.FC<PanelProps> = ({children, sx, ...rest}) => {\n  return (\n    <Box\n      sx={{\n        backgroundColor: 'canvas.default',\n        border: '1px solid',\n        borderColor: 'border.default',\n        borderRadius: '6px',\n        contain: 'paint',\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%',\n        minHeight: 0,\n        maxHeight: '100vh',\n        overflowY: 'auto',\n        right: 0,\n        ...sx,\n      }}\n      {...rest}\n    >\n      {children}\n    </Box>\n  )\n}\n\ntry{ Panel.displayName ||= 'Panel' } catch {}","import {Box, Spinner} from '@primer/react'\n\nexport const LoadingFallback = () => {\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'column', alignItems: 'center', py: 3}} data-testid=\"suspense-spinner\">\n      <Spinner aria-label=\"Loading\" />\n    </Box>\n  )\n}\n\ntry{ LoadingFallback.displayName ||= 'LoadingFallback' } catch {}","import type {WebCommitInfo} from '@github-ui/code-view-types'\nimport {ssrSafeLocation} from '@github-ui/ssr-utils'\nimport {useCSRFToken} from '@github-ui/use-csrf-token'\nimport {AlertIcon, GitBranchIcon, LockIcon, PencilIcon} from '@primer/octicons-react'\nimport {Box, Button, Link, Octicon, Text} from '@primer/react'\n\nexport function EditIssues({\n  binary,\n  helpUrl,\n  webCommitInfo,\n}: {\n  binary: boolean\n  helpUrl: string\n  webCommitInfo: WebCommitInfo\n}) {\n  const {shouldFork, lockedOnMigration, shouldUpdate} = webCommitInfo\n\n  let pathname = ssrSafeLocation.pathname\n\n  // Slice trailing slash because the csrf token is generated without it\n  if (pathname.endsWith('/')) {\n    pathname = pathname.slice(0, -1)\n  }\n\n  const currentPath = pathname + ssrSafeLocation.search\n  const token = useCSRFToken(currentPath, 'post')\n\n  const issue = lockedOnMigration\n    ? {\n        message: 'This repository is currently being migrated.',\n        description: 'Sorry, youre not able to edit this repository while the migration is in progress.',\n        icon: LockIcon,\n      }\n    : shouldFork\n      ? {\n          message: 'You need to fork this repository to propose changes.',\n          description:\n            'Sorry, youre not able to edit this repository directlyyou need to fork it and propose your changes from there instead.',\n          icon: GitBranchIcon,\n        }\n      : shouldUpdate\n        ? {\n            message: 'Sorry, it looks like your fork is outdated!',\n            description: 'Youll have to bring it up to date before you can propose changes.',\n            icon: AlertIcon,\n          }\n        : binary\n          ? {\n              message: 'Binary file content is not editable.',\n              description: 'But you can still rename or move it.',\n              icon: PencilIcon,\n            }\n          : null\n\n  if (!issue) return null\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'column', alignItems: 'center', m: 4}}>\n      <Octicon icon={issue.icon} size=\"medium\" sx={{color: 'fg.muted', mb: 2}} />\n      <Text as=\"h3\" sx={{mb: 1}}>\n        {issue.message}\n      </Text>\n      <Text sx={{mb: 2}}>{issue.description}</Text>\n      {(shouldFork || shouldUpdate) && (\n        <form data-turbo=\"false\" method=\"post\" action={currentPath} data-testid=\"edit-issues-form\">\n          {/* eslint-disable-next-line github/authenticity-token */}\n          <input hidden name=\"authenticity_token\" value={token} readOnly />\n          {/** Sumbit the page as a POST request so we can fork the repository for the user **/}\n          <Button type=\"submit\" variant=\"primary\">\n            {shouldFork ? 'Fork this repository' : 'Update your fork'}\n          </Button>\n        </form>\n      )}\n      {shouldFork && <Link href={`${helpUrl}/articles/fork-a-repo`}>Learn more about forks</Link>}\n    </Box>\n  )\n}\n\ntry{ EditIssues.displayName ||= 'EditIssues' } catch {}","import {Flash} from '@primer/react'\n\nexport function EditingForkBanner({forkName, forkOwner}: {forkName: string; forkOwner: string}) {\n  return (\n    <Flash sx={{mb: 3}} aria-live=\"polite\">\n      Youre making changes in a project you dont have write access to. Submitting a change will write it to a new\n      branch in your fork <b>{`${forkOwner}/${forkName}`}</b>, so you can send a pull request.\n    </Flash>\n  )\n}\n\ntry{ EditingForkBanner.displayName ||= 'EditingForkBanner' } catch {}","import type {SafeHTMLString} from '@github-ui/safe-html'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {Button, Flash, Link, Octicon, Tooltip} from '@primer/react'\nimport type React from 'react'\n\n// There are 9 unicode codepoints in two contiguous blocks that act as\n// bidi (bidirectional) control characters which can obscure malicious code:\n// +-----------+----------------------------------+\n// | codepoint | Control character name           |\n// +-----------+----------------------------------+\n// |  \\u202A   | LEFT-TO-RIGHT EMBEDDING (LRE)    |\n// |  \\u202B   | RIGHT-TO-LEFT EMBEDDING (RLE)    |\n// |  \\u202C   | POP DIRECTIONAL FORMATTING (PDF) |\n// |  \\u202D   | LEFT-TO-RIGHT OVERRIDE (LRO)     |\n// |  \\u202E   | RIGHT-TO-LEFT OVERRIDE (RLO)     |\n// |        [ ... ].                              |\n// |  \\u2066   | LEFT-TO-RIGHT ISOLATE (LRI)      |\n// |  \\u2067   | RIGHT-TO-LEFT ISOLATE (RLI)      |\n// |  \\u2068   | FIRST STRONG ISOLATE (FSI)       |\n// |  \\u2069   | POP DIRECTIONAL ISOLATE (PDI)    |\n// +-----------+----------------------------------+\nconst bidiRegex = /[\\u202A-\\u202E]|[\\u2066-\\u2069]/\nconst bidiRegexG = /[\\u202A-\\u202E]|[\\u2066-\\u2069]/g\nconst bidiBoundaryRegex = /([\\u202A-\\u202E]|[\\u2066-\\u2069])/g\nconst bidiReplacements = {\n  '\\u202A': 'U+202A', // LEFT-TO-RIGHT EMBEDDING\n  '\\u202B': 'U+202B', // RIGHT-TO-LEFT EMBEDDING\n  '\\u202C': 'U+202C', // POP DIRECTIONAL FORMATTING\n  '\\u202D': 'U+202D', // LEFT-TO-RIGHT OVERRIDE\n  '\\u202E': 'U+202E', // RIGHT-TO-LEFT OVERRIDE\n  '\\u2066': 'U+2066', // LEFT-TO-RIGHT ISOLATE\n  '\\u2067': 'U+2067', // RIGHT-TO-LEFT ISOLATE\n  '\\u2068': 'U+2068', // FIRST STRONG ISOLATE\n  '\\u2069': 'U+2069', // POP DIRECTIONAL ISOLATE\n} as const\ntype BIDIChar = keyof typeof bidiReplacements\ntype BIDIReplacement = (typeof bidiReplacements)[BIDIChar]\nconst bidiReplacementMap = new Map<string, BIDIReplacement>(Object.entries(bidiReplacements))\n\nexport function BidiAlert() {\n  //doing it this way so that there are not hydration errors\n  const [usableWindow] = useClientValue(() => ssrSafeWindow, ssrSafeWindow, [])\n\n  if (!usableWindow) return null\n  const revealButtonUrl = new URL(usableWindow.location.href, usableWindow.location.origin)\n  const shown = revealButtonUrl.searchParams.get('h') === '1'\n\n  shown ? revealButtonUrl.searchParams.delete('h') : revealButtonUrl.searchParams.set('h', '1')\n\n  return (\n    <Flash full variant=\"warning\" sx={{alignItems: 'center', display: 'flex'}}>\n      <Octicon icon={AlertIcon} />\n      <span>\n        This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears\n        below. To review, open the file in an editor that reveals hidden Unicode characters.{' '}\n        <Link inline href=\"https://github.co/hiddenchars\" target=\"_blank\" rel=\"noreferrer\">\n          Learn more about bidirectional Unicode characters\n        </Link>\n      </span>\n      <Button\n        as=\"a\"\n        onClick={() => {\n          window.location.href = revealButtonUrl.href\n        }}\n        size=\"small\"\n        sx={{\n          float: 'right',\n          ml: '24px',\n          backgroundClip: 'padding-box',\n        }}\n      >\n        {shown ? 'Hide revealed characters' : 'Show hidden characters'}\n      </Button>\n    </Flash>\n  )\n}\n\nexport function BidiTooltip() {\n  return (\n    <Tooltip direction=\"e\" text=\"This line has hidden Unicode characters\">\n      <Octicon icon={AlertIcon} sx={{mr: '12px'}} />\n    </Tooltip>\n  )\n}\n\nfunction BidiCharacter({char}: {char: BIDIReplacement}) {\n  return <span className=\"bidi-replacement padded\">{char}</span>\n}\n\nfunction bidiCharacterHtmlString(bidiReplacementString: BIDIReplacement): SafeHTMLString {\n  // We purposely don't want to escape the HTML because we know that the string will be from the replacementMap\n  // eslint-disable-next-line github/unescaped-html-literal\n  return `<span class=\"bidi-replacement\">${bidiReplacementString}</span>` as SafeHTMLString\n  // Casting to SafeHTMLString is safe because we know this exact html,\n  // and we know that `bidiReplacementString` can only have a few specific values\n}\n\nexport function hiddenBidiCharacterHTMLString(bidiReplacementString: BIDIReplacement): SafeHTMLString {\n  // We purposely don't want to escape the HTML because we know that the string will be from the replacementMap\n  // eslint-disable-next-line github/unescaped-html-literal\n  return `<span class=\"bidi-replacement\" data-code-text=\"${bidiReplacementString}\"></span>` as SafeHTMLString\n  // Casting to SafeHTMLString is safe because we know this exact html,\n  // and we know that `bidiReplacementString` can only have a few specific values\n}\n\n/**\n * Split the given text into an array of strings and bidi control characters.\n */\nexport function splitAroundBIDICharacters(text: SafeHTMLString): SafeHTMLString[] {\n  return text.split(bidiBoundaryRegex) as SafeHTMLString[]\n}\n\nexport function showBidiCharactersHTML(text: SafeHTMLString): SafeHTMLString | null {\n  if (!hasBidiCharacters(text)) {\n    return null\n  }\n\n  // Split the text into an array of strings and bidi control characters.\n  const splitText = splitAroundBIDICharacters(text)\n\n  const replacedSegments = splitText.map(segment => {\n    const replacement: BIDIReplacement | undefined = bidiReplacementMap.get(segment)\n    if (!replacement) return segment\n    return bidiCharacterHtmlString(replacement)\n  })\n\n  // Casting to SafeHTMLString is safe because we all we have done is take\n  // verified html and replaced dangerous unicode characters with safe strings.\n  return replacedSegments.join('') as SafeHTMLString\n}\n\nexport function showBidiCharactersRaw(text: string): string {\n  if (!hasBidiCharacters(text)) return text\n\n  return text.replaceAll(bidiRegexG, (char: string) => bidiReplacementMap.get(char) ?? '')\n}\n\nexport function showBidiCharacters(text: SafeHTMLString): React.ReactNode[] | null {\n  if (!hasBidiCharacters(text)) {\n    return null\n  }\n\n  // Split the text into an array of strings and bidi control characters.\n  const splitText = splitAroundBIDICharacters(text)\n\n  return splitText.map((segment, index) => {\n    const replacement: BIDIReplacement | undefined = bidiReplacementMap.get(segment)\n    return replacement ? <BidiCharacter key={index} char={replacement} /> : segment\n  })\n}\n\nexport function hasBidiCharacters(text: string): boolean {\n  return bidiRegex.test(text)\n}\n\nexport function isBidiShown(): boolean {\n  if (!ssrSafeWindow) return false\n  const url = new URL(ssrSafeWindow.location.href, ssrSafeWindow.location.origin)\n  return url.searchParams.get('h') === '1'\n}\n\nexport function getBIDIReplacement(char: string): BIDIReplacement | undefined {\n  return bidiReplacementMap.get(char)\n}\n\ntry{ BidiAlert.displayName ||= 'BidiAlert' } catch {}\ntry{ BidiTooltip.displayName ||= 'BidiTooltip' } catch {}\ntry{ BidiCharacter.displayName ||= 'BidiCharacter' } catch {}","import type {CodeownersError, SplitCodeownersError} from '@github-ui/code-view-types'\nimport type {Repository} from '@github-ui/current-repository'\nimport {codeownersErrorPath} from '@github-ui/paths'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport {BugIcon, DotFillIcon, KebabHorizontalIcon} from '@primer/octicons-react'\nimport {Box, Dialog, Flash, IconButton, Octicon} from '@primer/react'\nimport {useRef, useState} from 'react'\n\nexport enum CodeOwnerValidationState {\n  ERROR,\n  LOADING,\n  VALIDATED,\n}\n\nexport function CodeownerFileBanner({\n  errors,\n  state,\n}: {\n  errors: SplitCodeownersError[]\n  state: CodeOwnerValidationState\n}) {\n  const [open, setOpen] = useState(false)\n  const expandErrorButton = useRef<HTMLButtonElement>(null)\n\n  if (state === CodeOwnerValidationState.ERROR) {\n    return (\n      <Flash variant=\"warning\" sx={{mt: 3}}>\n        Failed to validate this CODEOWNERS file\n      </Flash>\n    )\n  }\n\n  if (state === CodeOwnerValidationState.LOADING) {\n    return (\n      <Flash variant=\"default\" sx={{mt: 3}}>\n        Validating CODEOWNERS rules...\n      </Flash>\n    )\n  }\n\n  if (errors.length === 0) {\n    return (\n      <Flash variant=\"success\" sx={{mt: 3}}>\n        This CODEOWNERS file is valid.\n      </Flash>\n    )\n  }\n\n  return (\n    <>\n      <Flash variant=\"warning\" sx={{display: 'flex', flexDirection: 'row', mt: 3, alignItems: 'center'}}>\n        <Octicon icon={BugIcon} />\n        <Box\n          onClick={() => setOpen(!open)}\n          sx={{\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n            p: 0,\n          }}\n        >\n          This CODEOWNERS file contains errors\n          {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n          <IconButton\n            unsafeDisableTooltip={true}\n            aria-label=\"View CODEOWNERS errors\"\n            ref={expandErrorButton}\n            size=\"small\"\n            sx={{\n              height: '20px',\n              ml: 1,\n              svg: {\n                color: 'fg.default',\n                mr: 0,\n              },\n            }}\n            icon={KebabHorizontalIcon}\n          />\n        </Box>\n      </Flash>\n      <Dialog\n        isOpen={open}\n        onDismiss={() => setOpen(false)}\n        sx={{display: 'flex', flexDirection: 'column', width: '640px'}}\n        returnFocusRef={expandErrorButton}\n      >\n        <Dialog.Header>CODEOWNERS errors</Dialog.Header>\n        <Box sx={{overflowX: 'hidden', overflowY: 'auto', p: 3}}>\n          {errors.map((error, index) => {\n            return <CodeownersErrorDetails key={index} error={error} />\n          })}\n        </Box>\n      </Dialog>\n    </>\n  )\n}\n\nfunction CodeownersErrorDetails({error}: {error: SplitCodeownersError}) {\n  return (\n    <Box\n      sx={{\n        padding: '16px',\n        listStyleType: 'none',\n        borderTop: '1px solid var(--borderColor-muted, var(--color-border-muted))',\n      }}\n    >\n      {`${error.kind} on line ${error.line}${error.suggestion ? `: ${error.suggestion}` : ''}`}\n      <Box as=\"pre\" sx={{mt: 3}}>\n        <code>\n          {error.linePrefix}\n          <Box\n            as=\"b\"\n            sx={{\n              cursor: 'help',\n              fontStyle: 'italic',\n              color: 'var(--fgColor-danger, var(--color-danger-fg))',\n              position: 'relative',\n              '&::before': {\n                content: '\"\"',\n                position: 'absolute',\n                top: '101%',\n                left: 0,\n                width: '100%',\n                height: '0.25em',\n                background:\n                  'linear-gradient(135deg, transparent, transparent 45%, var(--fgColor-danger, var(--color-danger-fg)), transparent 55%, transparent 100%),linear-gradient(45deg, transparent, transparent 45%, var(--fgColor-danger, var(--color-danger-fg)), transparent 55%, transparent 100%)',\n                backgroundRepeat: 'repeat-x,repeat-x',\n                backgroundSize: '0.5em 0.5em',\n              },\n            }}\n          >\n            {error.lineError}\n          </Box>\n          {error.lineSuffix}\n        </code>\n      </Box>\n    </Box>\n  )\n}\n\nconst MAX_ERROR_OFFSET = 30\nconst TRUNCATED_LINE_PREFIX = ''\n\nexport function splitCodeownersError(error: CodeownersError): SplitCodeownersError {\n  let line = error.source.trim()\n  let errorOffset = error.column - 1\n  let endOffset = calculateEndOffset(errorOffset, error.end_column, line)\n\n  if (errorOffset > MAX_ERROR_OFFSET) {\n    const trimmedCharacters = errorOffset - MAX_ERROR_OFFSET\n    line = TRUNCATED_LINE_PREFIX + line.slice(trimmedCharacters)\n    errorOffset -= trimmedCharacters - TRUNCATED_LINE_PREFIX.length\n    endOffset -= trimmedCharacters - TRUNCATED_LINE_PREFIX.length\n  }\n\n  return {\n    ...error,\n    linePrefix: line.substring(0, errorOffset),\n    lineError: line.substring(errorOffset, endOffset),\n    lineSuffix: line.substring(endOffset),\n  }\n}\n\nfunction calculateEndOffset(errorOffset: number, endColumn: number | null, line: string) {\n  if (endColumn) {\n    return endColumn\n  } else if (line.substring(errorOffset).indexOf(' ') > 0) {\n    return line.indexOf(' ', errorOffset)\n  } else {\n    return line.length\n  }\n}\n\nexport function CodeownersErrorLineIndicator() {\n  return (\n    <Octicon\n      icon={DotFillIcon}\n      sx={{color: 'var(--fgColor-danger, var(--color-danger-fg))'}}\n      aria-label=\"This line contains CODEOWNERS errors\"\n    />\n  )\n}\n\nexport function fetchCodeownersValidity(repo: Repository, refInfo: RefInfo, path: string) {\n  return verifiedFetchJSON(\n    codeownersErrorPath({owner: repo.ownerLogin, repo: repo.name, commitish: refInfo.name, filePath: path}),\n    {method: 'GET'},\n  )\n}\n\ntry{ CodeownerFileBanner.displayName ||= 'CodeownerFileBanner' } catch {}\ntry{ CodeownersErrorDetails.displayName ||= 'CodeownersErrorDetails' } catch {}\ntry{ CodeownersErrorLineIndicator.displayName ||= 'CodeownersErrorLineIndicator' } catch {}","import {EllipsisIcon} from '@primer/octicons-react'\nimport {Box} from '@primer/react'\n\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {\n  determineProperOffsetWithDummyDiv,\n  expandRow,\n  getActualLineNumberBinarySearch,\n  useCollapsedLinesSubscription,\n  useIsLineCollapsed,\n} from '../../../../utilities/lines'\nimport {HighlighterElement} from './CodeLine'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\nexport function CodeFoldingEllipsisOverlay({\n  linesData,\n  onLineStickOrUnstick,\n  setIsCollapsed,\n  tabSize,\n  extraLeftPadding,\n  contentWidth,\n}: {\n  linesData: CodeLineData[]\n  tabSize: number\n  contentWidth?: number\n  onLineStickOrUnstick?: SetStickyLinesType\n  setIsCollapsed?: () => void\n  extraLeftPadding?: number\n}) {\n  const collapsedRows = useCollapsedLinesSubscription()\n  const collapsedRowsArray = [...collapsedRows.keys()]\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n\n  return (\n    <>\n      {collapsedRowsArray.map(lineNumber => {\n        const actualLineNumber = getActualLineNumberBinarySearch(lineNumber, linesData)\n        if (actualLineNumber === undefined || linesData[actualLineNumber]?.ownedSection === undefined) return null\n        const lineData = linesData[actualLineNumber]\n\n        const leftOffset = determineProperOffsetWithDummyDiv(\n          lineData?.rawText?.length ?? 0,\n          lineData?.rawText ?? '',\n          tabSize,\n        )\n        return (\n          <Box\n            key={`expand-row-ellipsis-${lineNumber}`}\n            sx={{\n              position: 'absolute',\n              top: lineHeight * actualLineNumber,\n              pl: '10px',\n              height: lineHeight,\n              whiteSpace: 'pre',\n            }}\n          >\n            {contentWidth && (\n              <HighlighterElement\n                subtle\n                lineNumber={lineNumber}\n                highlightPosition={{offset: -82, width: contentWidth}}\n              />\n            )}\n            <ExpandRowEllipsis\n              codeLineData={lineData}\n              setIsCollapsed={setIsCollapsed}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n              leftOffset={leftOffset + (extraLeftPadding ?? 0)}\n            />\n          </Box>\n        )\n      })}\n    </>\n  )\n}\n\ninterface ExpandRowEllipsisProps {\n  codeLineData: CodeLineData\n  leftOffset: number\n  setIsCollapsed?: (isCollapsed: boolean) => void\n  onLineStickOrUnstick?: SetStickyLinesType\n}\n\nexport function ExpandRowEllipsis({\n  codeLineData,\n  leftOffset,\n  setIsCollapsed,\n  onLineStickOrUnstick,\n}: ExpandRowEllipsisProps) {\n  const {lineNumber, ownedSection} = codeLineData\n  const collapsed = useIsLineCollapsed(lineNumber)\n\n  if (!collapsed) return null\n\n  return (\n    <>\n      <button\n        aria-label=\"Expand row\"\n        className=\"Button Button--iconOnly Button--invisible Button--small px-2 py-0 ml-1 border-0 expand-row-ellipsis\"\n        style={{left: leftOffset}}\n        onMouseDown={ev => {\n          expandRow(lineNumber)\n          setIsCollapsed?.(false)\n\n          if (ownedSection) {\n            ownedSection.collapsed = false\n            onLineStickOrUnstick?.(codeLineData, true)\n          }\n\n          ev.preventDefault()\n        }}\n      >\n        <EllipsisIcon />\n      </button>\n    </>\n  )\n}\n\ntry{ CodeFoldingEllipsisOverlay.displayName ||= 'CodeFoldingEllipsisOverlay' } catch {}\ntry{ ExpandRowEllipsis.displayName ||= 'ExpandRowEllipsis' } catch {}","import type {CodeSection} from '@github-ui/code-nav'\nimport type {StylingDirectivesLine} from '@github-ui/code-view-types'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {Box, type BoxProps} from '@primer/react'\nimport {clsx} from 'clsx'\nimport React, {useRef} from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useCodeLineIntersectionObservers} from '../../../../hooks/use-code-line-observer'\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {useIsSafari} from '../../../../hooks/use-is-safari'\nimport {useStickyHeaderHeight} from '../../../../hooks/use-sticky-header-height'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {calculateHighlightOffsetAndWidth, type HighlightPosition, useIsLineCollapsed} from '../../../../utilities/lines'\nimport {CopilotButton, type CopilotButtonHandle} from '../CopilotButton'\nimport {HighlightedOverlay} from '../HighlightedOverlay'\nimport {ExpandRowEllipsis} from './CodeFoldingEllipsisOverlay'\nimport {useHighlightedLinesInfo} from './HighlightedLineProvider'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {useFocusedSearchResult, useSearchResults} from './SearchResultsProvider'\nimport {SyntaxHighlightedLine} from './SyntaxHighlightedLine'\n\nconst noop = () => {}\n\ninterface CodeLineProps extends Pick<BoxProps, 'id' | 'onClick'> {\n  codeLineData: CodeLineData\n  codeLineClassName?: string\n  paddingLeft?: string\n  setIsCollapsed?: (isCollapsed: boolean) => void\n  onLineStickOrUnstick?: SetStickyLinesType\n  highlightedTerm?: string\n  codeLineToSectionMap?: Map<number, CodeSection[]> | undefined\n  virtualOffset?: number\n  virtualKey?: number | string\n  forceVisible?: boolean\n  stylingDirectivesLine?: StylingDirectivesLine\n  measureRef?: (el: HTMLElement | null) => void\n  shouldUseCursor?: boolean\n  copilotAccessAllowed: boolean\n  shouldUseInert: boolean\n}\n\nexport const CodeLine = React.memo(CodeLineUnmemoized)\n\nfunction CodeLineUnmemoized({\n  codeLineData,\n  codeLineClassName,\n  id,\n  onClick,\n  setIsCollapsed,\n  onLineStickOrUnstick,\n  virtualOffset,\n  codeLineToSectionMap,\n  stylingDirectivesLine,\n  virtualKey,\n  forceVisible,\n  measureRef,\n  copilotAccessAllowed,\n  shouldUseInert,\n}: CodeLineProps) {\n  const {lineNumber, rawText} = codeLineData\n  const collapsed = useIsLineCollapsed(lineNumber)\n  const {tabSize} = useCurrentBlob()\n  const highlightedInfo = useHighlightedLinesInfo(lineNumber)\n  const fileLineRef = useRef<HTMLDivElement>(null)\n\n  const highlightPosition =\n    !highlightedInfo || !fileLineRef.current\n      ? undefined\n      : calculateHighlightOffsetAndWidth(highlightedInfo, fileLineRef.current, lineNumber, tabSize, rawText ?? '')\n\n  const canDoStickyLines = true\n  const numParents = codeLineToSectionMap?.get(lineNumber)?.length ?? 0\n  const stickyHeaderHeight = useStickyHeaderHeight()\n  const lineRefCallbackForObserver = useCodeLineIntersectionObservers(\n    codeLineData,\n    canDoStickyLines,\n    stickyHeaderHeight,\n    onLineStickOrUnstick ?? noop,\n    numParents,\n  )\n\n  const wrapOption = useCodeViewOptions().codeWrappingOption\n\n  const overlaySymbols = useSearchResults(lineNumber)\n  const focusedSymbol = useFocusedSearchResult(lineNumber)\n\n  const currentLineHeight = useCurrentLineHeight('react-line-numbers')\n\n  const isFirstHighlightedLine = highlightedInfo?.start.line === lineNumber\n\n  const menuAnchorRef = useRef<HTMLDivElement | null>(null)\n  const menuRef = useRef<CopilotButtonHandle>(null)\n\n  useLayoutEffect(() => {\n    if (isFirstHighlightedLine) {\n      menuRef.current?.setAnchor(menuAnchorRef.current)\n    }\n  }, [isFirstHighlightedLine])\n\n  return (\n    // TODO: this is not yet accessible.\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n    <div\n      ref={element => {\n        measureRef?.(element)\n        lineRefCallbackForObserver(element as HTMLTableRowElement | null)\n      }}\n      data-key={virtualKey}\n      className={clsx(\n        codeLineClassName,\n        'react-code-text react-code-line-contents',\n        virtualOffset && 'virtual',\n        wrapOption.enabled && measureRef && 'react-code-text-cell',\n      )}\n      style={{\n        transform: virtualOffset ? `translateY(${virtualOffset}px)` : undefined,\n        minHeight: wrapOption.enabled ? currentLineHeight : 'auto',\n      }}\n      onClick={onClick}\n    >\n      <div ref={menuAnchorRef}>\n        {highlightedInfo && <HighlighterElement lineNumber={lineNumber} highlightPosition={highlightPosition} />}\n\n        {collapsed && !highlightedInfo && (\n          <HighlighterElement subtle lineNumber={lineNumber} highlightPosition={highlightPosition} />\n        )}\n\n        {overlaySymbols && overlaySymbols.length > 0 && (\n          <HighlightedOverlay\n            symbols={overlaySymbols}\n            focusedSymbol={focusedSymbol}\n            sx={{paddingLeft: '10px', width: 'auto'}}\n            lineNumber={lineNumber}\n          />\n        )}\n        <SyntaxHighlightedLine\n          id={id}\n          lineNumber={lineNumber}\n          stylingDirectivesLine={stylingDirectivesLine}\n          current={!!highlightedInfo}\n          rawText={rawText}\n          forceVisible={forceVisible}\n          ref={fileLineRef}\n          shouldUseInert={shouldUseInert}\n        />\n        {wrapOption.enabled && (\n          <ExpandRowEllipsis\n            codeLineData={codeLineData}\n            setIsCollapsed={setIsCollapsed}\n            onLineStickOrUnstick={onLineStickOrUnstick}\n            leftOffset={0}\n          />\n        )}\n        {isFirstHighlightedLine && copilotAccessAllowed && (\n          <CopilotButton\n            ref={menuRef}\n            rowBeginNumber={highlightedInfo.start.line}\n            rowEndNumber={highlightedInfo.end.line}\n            id=\"code-line-copilot-button\"\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport function HighlighterElement({\n  lineNumber,\n  highlightPosition,\n  subtle,\n}: {\n  lineNumber: number\n  highlightPosition?: HighlightPosition\n  subtle?: boolean\n}) {\n  //on safari the highlights are weirdly offset from the text area highlights, so we add a -3px bump to them\n  const isSafari = useIsSafari()\n\n  const hasOffset = highlightPosition?.offset !== undefined\n  const hasWidth = highlightPosition?.width !== undefined\n  const offset = highlightPosition?.offset ?? -72 // 72 is the width of the line number column ($lineNumberWidth)\n  const width = highlightPosition?.width ?? 0\n\n  // 82 is the width of the line number column ($lineNumberWidth) + 10px padding\n  const widthWithOffset = hasOffset && hasWidth ? width : width + 82\n\n  // 72 is the width of the line number column ($lineNumberWidth) that we are offsetting\n  const defaultWidth = `calc(100% + 72px)`\n\n  return (\n    <Box\n      sx={{\n        position: 'absolute',\n        backgroundColor: subtle ? 'neutral.subtle' : 'var(--bgColor-attention-muted, var(--color-attention-subtle))',\n        height: '100%',\n        opacity: '.6',\n        boxShadow: subtle\n          ? 'inset 2px 0 0 var(--fgColor-muted,  var(--color-fg-subtle))'\n          : 'inset 2px 0 0 var(--fgColor-attention, var(--color-attention-fg))',\n        top: isSafari ? '-3px' : 0,\n        left: `${offset}px`,\n        width: hasWidth ? `${widthWithOffset}px` : defaultWidth,\n        // Allow clicks to pass through this element to the underlying code line\n        pointerEvents: 'none',\n      }}\n      key={`highlighted-line-${lineNumber}`}\n    />\n  )\n}\n\ntry{ CodeLine.displayName ||= 'CodeLine' } catch {}\ntry{ CodeLineUnmemoized.displayName ||= 'CodeLineUnmemoized' } catch {}\ntry{ HighlighterElement.displayName ||= 'HighlighterElement' } catch {}","import {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useVirtualDynamic, useVirtualWindow, type Virtualizer} from '@github-ui/use-virtual'\nimport type React from 'react'\nimport {useMemo} from 'react'\nimport {defaultRangeExtractor, type Range} from 'react-virtual'\n\nimport {useCurrentLineHeight} from '../../../../../hooks/use-current-line-height'\n\ninterface VirtualCodeBlobOptions {\n  parentRef: React.RefObject<HTMLDivElement>\n  lineCount: number\n  materializeAllLines: boolean\n}\n\nconst defaultOverscanAmount = 100\nconst defaultHeadAndTailLength = 75\n\nexport function useVirtualCodeBlob({parentRef, lineCount, materializeAllLines}: VirtualCodeBlobOptions): Virtualizer {\n  const currentLineHeight = useCurrentLineHeight('react-line-numbers')\n  const estimateSize = useMemo(() => () => currentLineHeight, [currentLineHeight])\n  const wrapOptionEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const rangeExtractor = useMemo(() => getRangeExtractor(lineCount), [lineCount])\n\n  return useVirtualWindow({\n    parentRef,\n    size: lineCount,\n    overscan: materializeAllLines ? Number.MAX_SAFE_INTEGER : defaultOverscanAmount,\n    scrollToFn,\n    estimateSize,\n    rangeExtractor,\n    // We cannot be completely sure of the height of the lines, since some\n    // browsers can zoom text in a way that alters it, so always meassure it.\n    measureSize: !wrapOptionEnabled ? estimateSize : undefined,\n    // Need to use dynamic here because the height of lines can change\n    // when 'wrap lines' setting is turned on or when users zoom the text on their page (and only text)\n    useVirtualImpl: useVirtualDynamic,\n  })\n}\n\nfunction scrollToFn(offset: number) {\n  window.scroll({top: offset, left: 0})\n}\n\nexport function getRangeExtractor(lineCount: number): (range: Range) => number[] {\n  return function customRangeExtractor(range: Range) {\n    if (lineCount < 2 * defaultHeadAndTailLength) {\n      // Render all lines if the total length of the head and tail\n      // together would be longer than the length of the file.\n      return rangeArray(0, lineCount)\n    }\n\n    const indicesInWindow = defaultRangeExtractor(range)\n    if (indicesInWindow.length === 0) {\n      // This happens sometimes on the first render pass.\n      // Just let the virtualization library do its thing on the next render.\n      return indicesInWindow\n    }\n\n    const minIndexInWindow = indicesInWindow[0]!\n    const maxIndexInWindow = indicesInWindow[indicesInWindow.length - 1]!\n\n    const headLength = Math.min(defaultHeadAndTailLength, minIndexInWindow)\n    const tailLength = Math.min(defaultHeadAndTailLength, lineCount - maxIndexInWindow)\n\n    const head = rangeArray(0, headLength)\n    const tail = rangeArray(lineCount + 1 - tailLength, lineCount)\n\n    return head.concat(indicesInWindow, tail)\n  }\n}\n\nfunction rangeArray(min: number, max: number) {\n  return new Array(max - min).fill(null).map((_, i) => i + min)\n}\n","import type {CodeSection} from '@github-ui/code-nav'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box} from '@primer/react'\nimport React, {useEffect, useImperativeHandle, useRef} from 'react'\n\nimport {useDeferredAST} from '../../../../contexts/DeferredASTContext'\nimport {useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {isLineInViewport, queryMatchElement, useShouldUseInert} from '../../../../utilities/lines'\nimport SelectAllShortcutButton from '../../../../utilities/SelectAllShortcutButton'\nimport type {CodeNavData} from '../BlobContent'\nimport type {CodeLinesHandle} from './code-lines-handle'\nimport {CodeFoldingEllipsisOverlay} from './CodeFoldingEllipsisOverlay'\nimport {CodeLine} from './CodeLine'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {useVirtualCodeBlob} from './hooks/use-virtual-code-blob'\nimport {LineNumber} from './LineNumber'\n\nexport interface CodeLinesProps {\n  linesData: CodeLineData[]\n  tabSize: number\n  onCollapseToggle: () => void\n  nonTruncatedLinesData?: CodeLineData[]\n  materializeAllLines?: boolean\n  colorizedLines?: SafeHTMLString[] | null\n  textOverlayShouldBeVisible?: boolean\n  codeSections?: Map<number, CodeSection[]>\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n  contentWidth?: number\n  textAreaRef?: React.RefObject<HTMLTextAreaElement>\n  cursorContainerRef?: React.RefObject<HTMLDivElement>\n  isTextAreaFocused?: boolean\n  textSelection?: {start: number; end: number; keyboard: boolean; displayStart: boolean}\n  additionalTextAreaInstructions?: string\n  copilotAccessAllowed: boolean\n  onLineNumberClick?: React.MouseEventHandler<HTMLDivElement>\n  onLineStickOrUnstick?: SetStickyLinesType\n  onCodeNavTokenSelected?: (symbol: CodeNavData) => void\n}\n\nexport const CodeLines = React.memo(React.forwardRef(CodeLinesUnmemoized))\n\nfunction CodeLinesUnmemoized(\n  {\n    linesData,\n    onLineNumberClick,\n    codeSections,\n    codeLineToSectionMap,\n    onLineStickOrUnstick,\n    tabSize,\n    contentWidth,\n    onCollapseToggle,\n    cursorContainerRef,\n    textAreaRef,\n    materializeAllLines,\n    copilotAccessAllowed,\n  }: CodeLinesProps,\n  ref: React.ForwardedRef<CodeLinesHandle>,\n) {\n  const parentRef = useRef<HTMLTableElement>(null)\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const horizontalScrollBarRef = useRef<HTMLDivElement>(null)\n  const shouldUseCursor = useIsCursorEnabled()\n  // Prevent loops and jumping when scrolling\n  const setNextTextAreaScroll = useRef(true)\n  const setNextScrollBarScroll = useRef(true)\n  const setNextScrollContainerScroll = useRef(true)\n  const {stylingDirectives} = useDeferredAST()\n\n  useEffect(() => {\n    //need to set the on scroll here because it relies on having access to parentRef to sync up the scrolls\n    if (textAreaRef && textAreaRef.current) {\n      textAreaRef.current.onscroll = () => {\n        if (scrollContainerRef.current && textAreaRef?.current) {\n          if (!setNextScrollContainerScroll.current) {\n            setNextScrollContainerScroll.current = true\n            return\n          }\n\n          if (textAreaRef.current.scrollLeft === scrollContainerRef.current.scrollLeft) return\n\n          // Goes in a loop textArea -> contianer -> scrollBar -> textArea , so we need to prevent the next scroll on the textArea\n          setNextTextAreaScroll.current = !(setNextScrollBarScroll.current && setNextScrollContainerScroll.current)\n          scrollContainerRef.current.scrollLeft = textAreaRef.current.scrollLeft\n        }\n        if (cursorContainerRef && cursorContainerRef.current && textAreaRef?.current) {\n          cursorContainerRef.current.scrollLeft = textAreaRef.current.scrollLeft\n        }\n      }\n      const textRef = textAreaRef.current\n      return () => {\n        if (textRef) {\n          textRef.onscroll = null\n        }\n      }\n    }\n  }, [textAreaRef, parentRef, shouldUseCursor, cursorContainerRef])\n\n  const wrapOptionEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const shouldUseInert = useShouldUseInert()\n\n  const virtualizer = useVirtualCodeBlob({\n    parentRef,\n    lineCount: linesData.length,\n    materializeAllLines: !!materializeAllLines,\n  })\n\n  useImperativeHandle(ref, () => ({\n    scrollToTop: () => {\n      if (isLineInViewport(0)) return\n      virtualizer.scrollToIndex(0, {align: 'start'})\n    },\n    scrollToLine: (lineNumber, column) => {\n      //align: start because this positions the element closer to the top of the screen\n      virtualizer.scrollToIndex(lineNumber, {align: 'start'})\n\n      const container = parentRef.current\n      if (!container) {\n        return\n      }\n\n      container.scroll({left: getHorizontalScrollOffset(container, lineNumber, column)})\n    },\n  }))\n\n  const scrollingProps = shouldUseCursor\n    ? {overflowX: 'overlay', scrollbarWidth: 'none', '&::-webkit-scrollbar': {display: 'none'}}\n    : {overflowX: 'auto'}\n\n  return (\n    <Box\n      ref={parentRef}\n      sx={{pointerEvents: shouldUseCursor ? 'none' : 'auto'}}\n      onScroll={event => handleBlobScrollSync(event, textAreaRef)}\n    >\n      <Box\n        ref={scrollContainerRef}\n        sx={scrollingProps}\n        //TODO: this is necessary to resolve an axe complaint, but we don't actually want this to be in the tab order.\n        //unsure what the resolution to that issue is outside of an onFocus\n        tabIndex={0}\n        onScroll={() => {\n          if (shouldUseCursor && scrollContainerRef.current && horizontalScrollBarRef.current) {\n            if (!setNextScrollBarScroll.current) {\n              setNextScrollBarScroll.current = true\n              return\n            }\n\n            if (horizontalScrollBarRef.current.scrollLeft === scrollContainerRef.current.scrollLeft) return\n            // Goes in a loop contianer -> scrollBar -> textArea -> container, so we need to prevent the next scroll on the container\n            setNextScrollContainerScroll.current = !(setNextScrollBarScroll.current && setNextTextAreaScroll.current)\n            horizontalScrollBarRef.current.scrollLeft = scrollContainerRef.current.scrollLeft\n          }\n        }}\n      >\n        <Box\n          className=\"react-code-file-contents\"\n          role=\"presentation\"\n          aria-hidden={true}\n          data-tab-size={tabSize}\n          data-testid={'code-lines-container'}\n          data-paste-markdown-skip\n          sx={{\n            tabSize,\n            position: 'relative',\n            width: contentWidth,\n            maxWidth: wrapOptionEnabled ? '100%' : 'unset',\n          }}\n          style={{height: virtualizer.totalSize}}\n          data-hpc\n        >\n          <div\n            className=\"react-line-numbers\"\n            style={{\n              pointerEvents: 'auto',\n              height: virtualizer.totalSize,\n              position: 'relative',\n              zIndex: 2,\n            }}\n          >\n            {virtualizer.virtualItems.map(virtualItem => {\n              const lineData = linesData[virtualItem.index]!\n              return (\n                <LineNumber\n                  codeLineData={lineData}\n                  key={`line-number-${lineData.lineNumber}-content:${lineData.rawText?.substring(0, 100)}`}\n                  onClick={onLineNumberClick}\n                  ownedCodeSections={codeSections}\n                  onLineStickOrUnstick={onLineStickOrUnstick}\n                  onCollapseToggle={onCollapseToggle}\n                  virtualOffset={virtualItem.start}\n                  copilotAccessAllowed={copilotAccessAllowed}\n                />\n              )\n            })}\n          </div>\n          <div className=\"react-code-lines\" style={{height: virtualizer.totalSize}}>\n            {virtualizer.virtualItems.map(virtualItem => {\n              const lineData = linesData[virtualItem.index]!\n              return (\n                <CodeLine\n                  codeLineData={lineData}\n                  stylingDirectivesLine={\n                    lineData.stylingDirectivesLine ??\n                    (stylingDirectives ? stylingDirectives[lineData.lineNumber - 1] : undefined)\n                  }\n                  shouldUseInert={shouldUseInert}\n                  codeLineClassName={lineData.codeLineClassName}\n                  key={`line-number-${lineData.lineNumber}-content:${lineData.rawText?.substring(0, 100)}`}\n                  id={`LC${lineData.lineNumber}`}\n                  onLineStickOrUnstick={onLineStickOrUnstick}\n                  setIsCollapsed={onCollapseToggle}\n                  codeLineToSectionMap={codeLineToSectionMap}\n                  virtualOffset={virtualItem.start}\n                  virtualKey={virtualItem.key}\n                  // Not great but measureRef doesn't work in tests due to something wrong in the observer\n                  // In order to make tests work, we need to not pass this prop during tests\n                  measureRef={process.env.NODE_ENV === 'test' ? undefined : virtualItem.measureRef}\n                  copilotAccessAllowed={copilotAccessAllowed}\n                />\n              )\n            })}\n          </div>\n          <SelectAllShortcutButton\n            shouldNotOverrideCopy={shouldUseCursor}\n            containerRef={shouldUseCursor ? textAreaRef : parentRef}\n          />\n          {!wrapOptionEnabled && (\n            <CodeFoldingEllipsisOverlay\n              linesData={linesData}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n              setIsCollapsed={onCollapseToggle}\n              tabSize={tabSize}\n              extraLeftPadding={82}\n            />\n          )}\n        </Box>\n      </Box>\n      {shouldUseCursor &&\n        contentWidth &&\n        scrollContainerRef.current &&\n        scrollContainerRef.current.clientWidth < contentWidth && (\n          <Box\n            sx={{\n              width: '100%',\n              pointerEvents: 'auto',\n              overflowX: 'auto',\n              overflowY: 'hidden',\n              height: '17px',\n              position: 'sticky',\n              bottom: 0,\n              zIndex: 2,\n            }}\n            onScroll={() => {\n              if (horizontalScrollBarRef.current && textAreaRef?.current) {\n                if (!setNextTextAreaScroll.current) {\n                  setNextTextAreaScroll.current = true\n                  return\n                }\n\n                if (horizontalScrollBarRef.current.scrollLeft === textAreaRef.current.scrollLeft) return\n\n                // Goes in a loop scrollBar -> textArea -> container -> scrollBar, so we need to prevent the next scroll on the scrollBar\n                setNextScrollBarScroll.current = !(\n                  setNextScrollContainerScroll.current && setNextTextAreaScroll.current\n                )\n                textAreaRef.current.scrollLeft = horizontalScrollBarRef.current.scrollLeft\n              }\n            }}\n            ref={horizontalScrollBarRef}\n            // Prevent cursor events\n            onClick={ev => ev.preventDefault()}\n            onMouseDown={ev => ev.preventDefault()}\n            onMouseUp={ev => ev.preventDefault()}\n          >\n            <Box sx={{width: contentWidth, height: '1px'}} />\n          </Box>\n        )}\n    </Box>\n  )\n}\n\n//becasue we are relying on the text area's highlighting to show the highlights, we need\n//to sync the horizontal scrolling of the visible blob and the invisible text area\nexport function handleBlobScrollSync(\n  event: React.UIEvent<HTMLDivElement>,\n  textAreaRef: React.RefObject<HTMLTextAreaElement> | undefined,\n) {\n  const scrolledElement = event.target as HTMLElement\n  textAreaRef?.current?.scrollTo(scrolledElement.scrollLeft, scrolledElement.scrollTop)\n}\n\nexport function getHorizontalScrollOffset(container: HTMLElement, lineNumber: number, column?: number): number {\n  if (!column) {\n    return 0\n  }\n  const element = queryMatchElement(lineNumber, column)\n  if (!element) {\n    return 0\n  }\n\n  const containerRect = container.getBoundingClientRect()\n  const elementRect = element.getBoundingClientRect()\n  const fitsWithoutScroll =\n    containerRect.left + containerRect.width - container.scrollLeft - (elementRect.left + elementRect.width) > 0\n\n  // Prefer 0 offset if element fits to avoid annoying micro scrolling\n  return fitsWithoutScroll ? 0 : element.offsetLeft\n}\n\ntry{ CodeLines.displayName ||= 'CodeLines' } catch {}\ntry{ CodeLinesUnmemoized.displayName ||= 'CodeLinesUnmemoized' } catch {}","import type {CodeSection} from '@github-ui/code-nav'\nimport {noop} from '@github-ui/noop'\nimport {Box} from '@primer/react'\nimport type {BetterSystemStyleObject} from '@primer/react/lib-esm/sx'\n\nimport {useCodeLineIntersectionObservers} from '../../../../hooks/use-code-line-observer'\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {useStickyHeaderHeight} from '../../../../hooks/use-sticky-header-height'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {getActualLineNumberBinarySearch} from '../../../../utilities/lines'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\nexport function StickyLineObserverOverlay({\n  linesData,\n  onLineStickOrUnstick,\n  codeLineToSectionMap,\n}: {\n  linesData: CodeLineData[]\n  onLineStickOrUnstick?: SetStickyLinesType\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n}) {\n  const stickyHeaderHeight = useStickyHeaderHeight()\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  if (codeLineToSectionMap === undefined) return null\n\n  return (\n    <>\n      {linesData.map(lineData => {\n        const lineNumber = lineData.lineNumber\n        const numParents = codeLineToSectionMap?.get(lineNumber)?.length ?? 0\n        if (lineNumber === undefined || lineData.ownedSection === undefined) return null\n        const actualLineNumber = getActualLineNumberBinarySearch(lineNumber, linesData)\n\n        return (\n          <StickyLineObserverLine\n            key={`observer-overlay-${actualLineNumber}-lineNumber-no-virtualization`}\n            className=\"symbol-highlight react-code-text\"\n            lineData={linesData[actualLineNumber]!}\n            stickyHeaderHeight={stickyHeaderHeight}\n            numParents={numParents}\n            onLineStickOrUnstick={onLineStickOrUnstick ?? noop}\n            sx={{\n              position: 'absolute',\n              top: lineHeight * (actualLineNumber - 1),\n              pl: '10px',\n              height: lineHeight,\n              whiteSpace: 'pre',\n            }}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nfunction StickyLineObserverLine({\n  lineData,\n  onLineStickOrUnstick,\n  numParents,\n  stickyHeaderHeight,\n  className,\n  sx,\n}: {\n  lineData: CodeLineData\n  onLineStickOrUnstick: SetStickyLinesType\n  numParents: number\n  stickyHeaderHeight: number\n  className: string\n  sx: BetterSystemStyleObject\n}) {\n  const lineRefCallbackForObserver = useCodeLineIntersectionObservers(\n    lineData,\n    true,\n    stickyHeaderHeight,\n    onLineStickOrUnstick,\n    numParents,\n  )\n  return (\n    <Box\n      ref={ref => {\n        lineRefCallbackForObserver(ref as HTMLTableRowElement | null)\n      }}\n      className={className}\n      sx={{\n        mb: '-20px',\n        color: 'transparent',\n        position: 'absolute',\n        maxHeight: '6rem',\n        overflow: 'hidden',\n        width: '100%',\n        display: 'inline-block',\n        userSelect: 'none',\n        ...sx,\n      }}\n      data-testid={'sticky-line-observer'}\n    />\n  )\n}\n\ntry{ StickyLineObserverOverlay.displayName ||= 'StickyLineObserverOverlay' } catch {}\ntry{ StickyLineObserverLine.displayName ||= 'StickyLineObserverLine' } catch {}","import {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Box} from '@primer/react'\nimport React, {useEffect, useImperativeHandle, useRef} from 'react'\n\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport {useManualRender} from '../../../../hooks/use-manual-render'\nimport {isLineInViewport, useIsFirefox, useShouldUseInert} from '../../../../utilities/lines'\nimport SelectAllShortcutButton from '../../../../utilities/SelectAllShortcutButton'\nimport type {CodeLinesHandle} from './code-lines-handle'\nimport {CodeFoldingEllipsisOverlay} from './CodeFoldingEllipsisOverlay'\nimport {type CodeLinesProps, getHorizontalScrollOffset, handleBlobScrollSync} from './CodeLines'\nimport {HighlightedLinesOverlay} from './HighlightedLinesOverlay'\nimport {HighlightedSymbolsOverlay} from './HighlightedSymbolsOverlay'\nimport {LineNumberNoVirtualziation} from './LineNumberNoVirtualization'\nimport {StickyLineObserverOverlay} from './StickyLineObserverOverlay'\nimport {SyntaxHighlightedOverlay} from './SyntaxHighlightedLine'\n\nexport const CodeLinesNoVirtualization = React.memo(React.forwardRef(CodeLinesNoVirtualizationUnmemoized))\nexport const numberOfLinesPerContentVisibility = 60\nexport const noVirtualizationThreshold = 3500\n\nfunction CodeLinesNoVirtualizationUnmemoized(\n  {\n    linesData,\n    onLineNumberClick,\n    codeSections,\n    nonTruncatedLinesData,\n    codeLineToSectionMap,\n    onLineStickOrUnstick,\n    colorizedLines,\n    tabSize,\n    contentWidth,\n    cursorContainerRef,\n    onCollapseToggle,\n    textAreaRef,\n    copilotAccessAllowed,\n  }: CodeLinesProps,\n  ref: React.ForwardedRef<CodeLinesHandle>,\n) {\n  const parentRef = useRef<HTMLTableElement>(null)\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const horizontalScrollBarRef = useRef<HTMLDivElement>(null)\n  const shouldUseCursor = useIsCursorEnabled()\n  const reRender = useManualRender()\n  // Prevent loops and jumping when scrolling\n  const setNextTextAreaScroll = useRef(true)\n  const setNextScrollBarScroll = useRef(true)\n  const setNextScrollContainerScroll = useRef(true)\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n\n  //we want to wrap every 60 lines in a data-visibility wrapper, so we need\n  //to make this array to map over down below\n  const lineArrayMap = useRef([...Array(Math.floor(linesData.length / numberOfLinesPerContentVisibility) + 1).keys()])\n\n  useImperativeHandle(ref, () => ({\n    scrollToTop: () => {\n      if (isLineInViewport(0)) return\n      window.scrollTo({left: 0, top: 0})\n    },\n    scrollToLine: (lineNumber, column) => {\n      const container = parentRef.current\n      if (!container) {\n        return\n      }\n\n      setTimeout(\n        () =>\n          window.scrollTo({\n            left: getHorizontalScrollOffset(container, lineNumber, column),\n            top: lineHeight * lineNumber,\n          }),\n        0,\n      )\n    },\n  }))\n\n  useEffect(() => {\n    //need to set the on scroll here because it relies on having access to parentRef to sync up the scrolls\n    if (textAreaRef && textAreaRef.current) {\n      textAreaRef.current.onscroll = () => {\n        if (scrollContainerRef.current && textAreaRef?.current) {\n          if (!setNextScrollContainerScroll.current) {\n            setNextScrollContainerScroll.current = true\n            return\n          }\n\n          if (textAreaRef.current.scrollLeft === scrollContainerRef.current.scrollLeft) return\n\n          // Goes in a loop textArea -> contianer -> scrollBar -> textArea , so we need to prevent the next scroll on the textArea\n          setNextTextAreaScroll.current = !(setNextScrollBarScroll.current && setNextScrollContainerScroll.current)\n          scrollContainerRef.current.scrollLeft = textAreaRef.current.scrollLeft\n        }\n        if (cursorContainerRef && cursorContainerRef.current && textAreaRef?.current) {\n          cursorContainerRef.current.scrollLeft = textAreaRef.current.scrollLeft\n        }\n      }\n      const textRef = textAreaRef.current\n      return () => {\n        if (textRef) {\n          textRef.onscroll = null\n        }\n      }\n    }\n  }, [textAreaRef, parentRef, shouldUseCursor, cursorContainerRef])\n\n  useEffect(() => {\n    lineArrayMap.current = [...Array(Math.floor(linesData.length / numberOfLinesPerContentVisibility) + 1).keys()]\n    reRender()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [linesData])\n\n  const scrollingProps = shouldUseCursor\n    ? {overflowX: 'overlay', scrollbarWidth: 'none', '&::-webkit-scrollbar': {display: 'none'}}\n    : {overflowX: 'auto'}\n\n  return (\n    <Box\n      ref={parentRef}\n      sx={{pointerEvents: shouldUseCursor ? 'none' : 'auto'}}\n      onScroll={event => handleBlobScrollSync(event, textAreaRef)}\n    >\n      <Box\n        ref={scrollContainerRef}\n        sx={scrollingProps}\n        //TODO: this is necessary to resolve an axe complaint, but we don't actually want this to be in the tab order.\n        //unsure what the resolution to that issue is outside of an onFocus\n        tabIndex={0}\n        onScroll={() => {\n          if (shouldUseCursor && scrollContainerRef.current && horizontalScrollBarRef.current) {\n            if (!setNextScrollBarScroll.current) {\n              setNextScrollBarScroll.current = true\n              return\n            }\n\n            if (horizontalScrollBarRef.current.scrollLeft === scrollContainerRef.current.scrollLeft) return\n            // Goes in a loop contianer -> scrollBar -> textArea -> container, so we need to prevent the next scroll on the container\n            setNextScrollContainerScroll.current = !(setNextScrollBarScroll.current && setNextTextAreaScroll.current)\n            horizontalScrollBarRef.current.scrollLeft = scrollContainerRef.current.scrollLeft\n          }\n        }}\n      >\n        <Box\n          className=\"react-code-file-contents\"\n          role=\"presentation\"\n          aria-hidden={true}\n          data-tab-size={tabSize}\n          data-paste-markdown-skip\n          sx={{\n            tabSize,\n            position: 'relative',\n            width: contentWidth,\n            maxWidth: 'unset',\n          }}\n          data-hpc\n        >\n          <div\n            className=\"react-line-numbers-no-virtualization\"\n            style={{\n              pointerEvents: 'auto',\n              position: 'relative',\n              zIndex: 2,\n            }}\n          >\n            {lineArrayMap.current.map(segmentCount => {\n              const tempLines = linesData.slice(\n                segmentCount * numberOfLinesPerContentVisibility,\n                Math.min(\n                  segmentCount * numberOfLinesPerContentVisibility + numberOfLinesPerContentVisibility,\n                  linesData.length,\n                ),\n              )\n              return (\n                <div\n                  key={`line-number-wrapper-${segmentCount}-content:${tempLines[0]?.rawText?.substring(0, 100)}`}\n                  className=\"react-no-virtualization-wrapper-lines\"\n                >\n                  {tempLines.map(lineData => {\n                    return (\n                      <LineNumberNoVirtualziation\n                        codeLineData={lineData}\n                        key={`line-number-${lineData.lineNumber}-content:${lineData.rawText?.substring(0, 100)}`}\n                        onClick={onLineNumberClick}\n                        ownedCodeSections={codeSections}\n                        onLineStickOrUnstick={onLineStickOrUnstick}\n                        onCollapseToggle={onCollapseToggle}\n                        codeLineToSectionMap={codeLineToSectionMap}\n                        copilotAccessAllowed={copilotAccessAllowed}\n                      />\n                    )\n                  })}\n                </div>\n              )\n            })}\n          </div>\n          <div className=\"react-code-lines react-code-lines-no-virtualization\">\n            <HighlightedSymbolsOverlay linesData={linesData} />\n            <HighlightedLinesOverlay linesData={linesData} copilotAccessAllowed={copilotAccessAllowed} />\n            <SyntaxHighlightedOverlay colorizedLines={colorizedLines} linesData={nonTruncatedLinesData!} />\n            <StickyLineObserverOverlay\n              linesData={linesData}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n              codeLineToSectionMap={codeLineToSectionMap}\n            />\n            <CodeFoldingEllipsisOverlay\n              linesData={linesData}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n              setIsCollapsed={onCollapseToggle}\n              tabSize={tabSize}\n              contentWidth={contentWidth}\n            />\n          </div>\n          <SelectAllShortcutButton\n            shouldNotOverrideCopy={shouldUseCursor}\n            containerRef={shouldUseCursor ? textAreaRef : parentRef}\n          />\n        </Box>\n      </Box>\n      {shouldUseCursor &&\n        contentWidth &&\n        scrollContainerRef.current &&\n        scrollContainerRef.current.clientWidth < contentWidth && (\n          <Box\n            sx={{\n              width: '100%',\n              pointerEvents: 'auto',\n              overflowX: 'auto',\n              overflowY: 'hidden',\n              height: '17px',\n              position: 'sticky',\n              bottom: 0,\n              zIndex: 2,\n            }}\n            onScroll={() => {\n              if (horizontalScrollBarRef.current && textAreaRef?.current) {\n                if (!setNextTextAreaScroll.current) {\n                  setNextTextAreaScroll.current = true\n                  return\n                }\n\n                if (horizontalScrollBarRef.current.scrollLeft === textAreaRef.current.scrollLeft) return\n\n                // Goes in a loop scrollBar -> textArea -> container -> scrollBar, so we need to prevent the next scroll on the scrollBar\n                setNextScrollBarScroll.current = !(\n                  setNextScrollContainerScroll.current && setNextTextAreaScroll.current\n                )\n                textAreaRef.current.scrollLeft = horizontalScrollBarRef.current.scrollLeft\n              }\n            }}\n            ref={horizontalScrollBarRef}\n            // Prevent cursor events\n            onClick={ev => ev.preventDefault()}\n            onMouseDown={ev => ev.preventDefault()}\n            onMouseUp={ev => ev.preventDefault()}\n          >\n            <Box sx={{width: contentWidth, height: '1px'}} />\n          </Box>\n        )}\n    </Box>\n  )\n}\n\nexport function useShouldDoNoVirtualization(fileLength: number) {\n  const wordWrapEnabled = useCodeViewOptions().codeWrappingOption.enabled\n  const isNonVirtualized = useFeatureFlag('react_blob_overlay')\n  const shouldUseInert = useShouldUseInert()\n  const isFirefox = useIsFirefox()\n  const isOldFirefox = isFirefox && !shouldUseInert\n\n  //we want to virtualize beyond 3500 lines because that is when performance starts to significantly degrade\n  return isNonVirtualized && !wordWrapEnabled && !isOldFirefox && fileLength < noVirtualizationThreshold\n}\n\ntry{ CodeLinesNoVirtualization.displayName ||= 'CodeLinesNoVirtualization' } catch {}\ntry{ CodeLinesNoVirtualizationUnmemoized.displayName ||= 'CodeLinesNoVirtualizationUnmemoized' } catch {}","import {ObservableValue} from '@github-ui/observable'\nimport {useDerivedObservable, useObservableValue, useObservedState} from '@github-ui/react-observable'\nimport React, {useEffect} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport type {BlobRange} from '../../../../../github/blob-anchor'\n\nconst HighlightedLineContext = React.createContext<ObservableValue<BlobRange | undefined>>(\n  new ObservableValue<BlobRange | undefined>(undefined),\n)\n\nexport function HighlightedLinesProvider({\n  highlightedLines,\n  children,\n}: React.PropsWithChildren<{highlightedLines: BlobRange | undefined}>) {\n  const highlight = useObservableValue(highlightedLines)\n\n  useEffect(() => {\n    highlight.value = highlightedLines\n  }, [highlight, highlightedLines])\n\n  return <HighlightedLineContext.Provider value={highlight}>{children}</HighlightedLineContext.Provider>\n}\n\nexport function useHighlightedLinesRange(): BlobRange | undefined {\n  return useObservedState(React.useContext(HighlightedLineContext))\n}\n\nexport function useHighlightedLinesInfo(lineNumber: number) {\n  const highlight = React.useContext(HighlightedLineContext)\n\n  const highlightForLine = useDerivedObservable(highlight, h =>\n    h && lineNumber >= h.start.line && lineNumber <= h.end.line ? h : undefined,\n  )\n\n  return useObservedState(highlightForLine)\n}\n\ntry{ HighlightedLineContext.displayName ||= 'HighlightedLineContext' } catch {}\ntry{ HighlightedLinesProvider.displayName ||= 'HighlightedLinesProvider' } catch {}","import {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {Box} from '@primer/react'\nimport {useRef, useState} from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {useIsSafari} from '../../../../hooks/use-is-safari'\nimport type {HighlightPosition} from '../../../../utilities/lines'\nimport {\n  calculateHighlightOffsetAndWidth,\n  getActualLineNumberBinarySearch,\n  queryLineElement,\n} from '../../../../utilities/lines'\nimport {CopilotButton, type CopilotButtonHandle} from '../CopilotButton'\nimport {useHighlightedLinesRange} from './HighlightedLineProvider'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\nexport function HighlightedLinesOverlay({\n  linesData,\n  copilotAccessAllowed,\n}: {\n  linesData: CodeLineData[]\n  copilotAccessAllowed: boolean\n}) {\n  const range = useHighlightedLinesRange()\n  const {tabSize} = useCurrentBlob()\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  //on safari the highlights are weirdly offset from the text area highlights, so we add a -3px bump to them\n  const isSafari = useIsSafari()\n\n  const anchorRef = useRef<HTMLDivElement | null>(null)\n  const menuRef = useRef<CopilotButtonHandle>(null)\n\n  const startLine = range ? getActualLineNumberBinarySearch(range.start.line, linesData) : 0\n  const endLine = range?.end.line ? getActualLineNumberBinarySearch(range.end.line, linesData) : undefined ?? startLine\n\n  const [copilotButtonOffsetTop, setCopilotButtonOffsetTop] = useState(\n    isSafari ? startLine * lineHeight - 3 : startLine * lineHeight,\n  )\n  useLayoutEffect(() => {\n    if (!range) return\n    menuRef.current?.setAnchor(anchorRef.current)\n    setCopilotButtonOffsetTop(isSafari ? startLine * lineHeight - 3 : startLine * lineHeight)\n  }, [range, isSafari, lineHeight, startLine])\n  if (!range) return null\n\n  const highlightPositions: Array<{position: HighlightPosition; lineNumber: number}> = []\n\n  for (let lineNumber = startLine; lineNumber <= endLine; lineNumber++) {\n    const element = queryLineElement('', lineNumber + 1)\n    if (!element) continue\n\n    const position =\n      calculateHighlightOffsetAndWidth(\n        range,\n        element,\n        lineNumber + 1,\n        tabSize,\n        linesData[lineNumber + 1]?.rawText ?? '',\n      ) ?? {}\n\n    highlightPositions.push({position, lineNumber})\n  }\n\n  return (\n    <>\n      <div ref={anchorRef} style={{position: 'relative', top: copilotButtonOffsetTop + 10}}>\n        {highlightPositions.map(({position, lineNumber}) => (\n          <LineHighlight\n            key={`line-${lineNumber}-highlight-${position.offset}`}\n            highlightPosition={position}\n            lineNumber={lineNumber}\n            startingLineNumber={startLine}\n          />\n        ))}\n        {copilotAccessAllowed && (\n          <CopilotButton\n            ref={menuRef}\n            rowBeginNumber={range.start.line}\n            rowEndNumber={range.end.line}\n            recalcPosition={copilotButtonOffsetTop}\n            id=\"code-line-copilot-button\"\n          />\n        )}\n      </div>\n    </>\n  )\n}\n\nexport function LineHighlight({\n  startingLineNumber,\n  lineNumber,\n  highlightPosition,\n  subtle,\n}: {\n  startingLineNumber: number\n  lineNumber: number\n  highlightPosition?: HighlightPosition\n  subtle?: boolean\n}) {\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  const topOffset = (lineNumber - startingLineNumber) * lineHeight\n  return (\n    <Box\n      className=\"line-highlight\"\n      sx={{\n        position: 'absolute',\n        backgroundColor: subtle ? 'neutral.subtle' : 'var(--bgColor-attention-muted, var(--color-attention-subtle))',\n        height: lineHeight,\n        opacity: '.6',\n        boxShadow: subtle\n          ? 'inset 2px 0 0 var(--borderColor-neutral-emphasis, var(--color-fg-subtle))'\n          : 'inset 2px 0 0 var(--bgColor-attention-emphasis, var(--color-attention-fg))',\n        left: highlightPosition && highlightPosition.offset ? `${highlightPosition.offset - 10}px` : `-82px`,\n        //subtract 10 because we added 10 to have the copilot button line up properly\n        top: `${topOffset - 10}px`,\n        // Need to add 82px to account for the shifting to the left of the highlight\n        width: highlightPosition && highlightPosition.width ? `${highlightPosition.width + 82}px` : `calc(100% + 82px)`,\n        // Allow clicks to pass through this element to the underlying code line\n        pointerEvents: 'none',\n      }}\n      key={`highlighted-line-${lineNumber}`}\n    />\n  )\n}\n\ntry{ HighlightedLinesOverlay.displayName ||= 'HighlightedLinesOverlay' } catch {}\ntry{ LineHighlight.displayName ||= 'LineHighlight' } catch {}","import {useCurrentLineHeight} from '../../../../hooks/use-current-line-height'\nimport {getActualLineNumberBinarySearch} from '../../../../utilities/lines'\nimport {HighlightedOverlay} from '../HighlightedOverlay'\nimport type {CodeLineData} from './hooks/use-code-lines'\nimport {useAllSearchResults, useFocusedSearchResultWithoutLineCheck} from './SearchResultsProvider'\n\nexport function HighlightedSymbolsOverlay({linesData}: {linesData: CodeLineData[]}) {\n  const results = useAllSearchResults()\n  const focusedResult = useFocusedSearchResultWithoutLineCheck()\n  const lineHeight = useCurrentLineHeight('react-line-numbers')\n  return (\n    <>\n      {[...results.values()].map(definitionsOrReferences => {\n        const lineNumber = definitionsOrReferences[0]?.lineNumber\n        if (lineNumber === undefined) return null\n        const actualLineNumber = getActualLineNumberBinarySearch(lineNumber, linesData) + 1\n\n        return (\n          <HighlightedOverlay\n            key={`overlay-${actualLineNumber}-lineNumber-no-virtualization`}\n            className=\"symbol-highlight react-code-text\"\n            lineNumber={actualLineNumber}\n            symbols={definitionsOrReferences}\n            focusedSymbol={focusedResult}\n            sx={{\n              position: 'absolute',\n              top: lineHeight * (actualLineNumber - 1),\n              pl: '10px',\n              height: lineHeight,\n              whiteSpace: 'pre',\n            }}\n          />\n        )\n      })}\n    </>\n  )\n}\n\ntry{ HighlightedSymbolsOverlay.displayName ||= 'HighlightedSymbolsOverlay' } catch {}","import type {CodeSection} from '@github-ui/code-nav'\nimport {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {ChevronDownIcon, ChevronRightIcon} from '@primer/octicons-react'\nimport {Box, type BoxProps, Octicon} from '@primer/react'\nimport {clsx} from 'clsx'\nimport React, {type PropsWithChildren, useCallback, useEffect, useRef} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {\n  type BlobOffset,\n  formatBlobRangeAnchor,\n  parseBlobRange,\n  parseFileAnchor,\n} from '../../../../../github/blob-anchor'\nimport {useCursorSelectionRef} from '../../../../hooks/use-cursor-navigation'\nimport type {SetStickyLinesType} from '../../../../hooks/use-sticky-lines'\nimport {\n  calculateLineAndColumn,\n  collapseRow,\n  expandAllRows,\n  expandRow,\n  useIsLineCollapsed,\n} from '../../../../utilities/lines'\nimport {BidiTooltip} from '../../Banners/Bidi'\nimport {CodeownersErrorLineIndicator} from '../../Banners/CodeownerFileBanner'\nimport {CopilotButton, type CopilotButtonHandle} from '../CopilotButton'\nimport type {HighlightedLineMenuHandle} from '../HighlightedLineMenu'\nimport HighlightedLineMenu from '../HighlightedLineMenu'\nimport {useHighlightedLinesInfo} from './HighlightedLineProvider'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\nexport interface LineNumberProps extends Pick<BoxProps, 'id' | 'onClick'> {\n  codeLineData: CodeLineData\n  ownedCodeSections?: Map<number, CodeSection[]> | null\n  onCollapseToggle?: (isCollapsed: boolean) => void\n  preventClick?: boolean\n  onLineStickOrUnstick?: SetStickyLinesType\n  virtualOffset?: number\n  codeLineToSectionMap?: Map<number, CodeSection[]>\n  copilotAccessAllowed?: boolean\n}\n\nexport const LineNumber = React.memo(LineNumberUnmemoized)\n\nfunction LineNumberUnmemoized({\n  codeLineData,\n  onClick,\n  ownedCodeSections,\n  onCollapseToggle,\n  preventClick,\n  onLineStickOrUnstick,\n  virtualOffset,\n  copilotAccessAllowed,\n}: PropsWithChildren<LineNumberProps>) {\n  const {lineNumber, ownedSection, codeLineClassName, isStartLine, codeownersLineError, bidi} = codeLineData\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const selectionRef = useCursorSelectionRef()\n\n  const codeCellClickFunc: React.MouseEventHandler<HTMLDivElement> = useCallback(\n    event => {\n      if (event.defaultPrevented) {\n        return\n      }\n      const targetedLineNumber = parseInt(event.currentTarget.getAttribute('data-line-number')!, 10)\n\n      let anchorInfo = parseFileAnchor(`L${targetedLineNumber}`)\n\n      let highlightStart: BlobOffset | undefined = undefined\n      let highlightEnd: BlobOffset | undefined = undefined\n\n      const cursorSelection = selectionRef.current\n      if (\n        cursorSelection &&\n        !(\n          cursorSelection.start.line === cursorSelection.end.line &&\n          cursorSelection.start.column === cursorSelection.end.column\n        )\n      ) {\n        highlightStart = cursorSelection.start\n        highlightEnd = cursorSelection.end\n      } else {\n        const selectionRange = window.getSelection()?.rangeCount ? window.getSelection()?.getRangeAt(0) : null\n        if (selectionRange) {\n          highlightStart = calculateLineAndColumn(selectionRange.startContainer, selectionRange.startOffset)\n          highlightEnd = calculateLineAndColumn(selectionRange.endContainer, selectionRange.endOffset)\n        }\n      }\n\n      let selection = false\n      if (\n        highlightStart &&\n        highlightEnd &&\n        highlightStart.line <= targetedLineNumber &&\n        highlightEnd.line >= targetedLineNumber\n      ) {\n        selection = true\n\n        anchorInfo = {\n          anchorPrefix: '',\n          blobRange: {\n            start: highlightStart,\n            end: highlightEnd,\n          },\n        }\n      }\n\n      const {blobRange} = anchorInfo\n\n      const currentLines = parseBlobRange(window.location.hash)\n      if (currentLines && event.shiftKey && !selection) {\n        sendRepoClickEvent('BLOB.MULTILINE')\n        anchorInfo.blobRange = {\n          start: currentLines.start,\n          end: blobRange.end,\n        }\n      } else {\n        sendRepoClickEvent('BLOB.LINE')\n      }\n\n      const hash = formatBlobRangeAnchor(anchorInfo)\n      history.replaceState(history.state, '', hash)\n\n      onClick?.(event)\n    },\n    [onClick, selectionRef, sendRepoClickEvent],\n  )\n\n  const highlightedInfo = useHighlightedLinesInfo(lineNumber)\n  const isFirstHighlightedLine = highlightedInfo?.start.line === lineNumber\n\n  // calculates if the line is fully within the highlight info\n  // all lines numbers except the first line are considered fully highlight\n  // the first line is considered fully highlighted if there is no column offset\n  const isInHighlightRange =\n    highlightedInfo && highlightedInfo.start.line < lineNumber && highlightedInfo.end.line >= lineNumber\n  const isFullyHighlighted = isInHighlightRange || (isFirstHighlightedLine && highlightedInfo?.start.column === null)\n\n  const menuAnchorRef = useRef<HTMLDivElement | null>(null)\n  const menuRef = useRef<HighlightedLineMenuHandle>(null)\n  const copilotMenuRef = useRef<CopilotButtonHandle>(null)\n\n  useLayoutEffect(() => {\n    if (isFirstHighlightedLine) {\n      menuRef.current?.setAnchor(menuAnchorRef.current)\n    }\n  }, [isFirstHighlightedLine])\n\n  const {codeFoldingOption} = useCodeViewOptions()\n  const showCodeFoldingIcon = codeFoldingOption.enabled\n\n  useEffect(() => {\n    if (!codeFoldingOption.enabled) {\n      expandAllRows()\n      onCollapseToggle?.(false)\n      if (ownedSection) {\n        ownedSection.collapsed = false\n      }\n    }\n  }, [codeFoldingOption.enabled, ownedSection, onCollapseToggle])\n\n  const mouseCallback = (isEnter: boolean) => {\n    copilotMenuRef.current?.setAnchor(isEnter ? menuAnchorRef.current : null)\n  }\n\n  return (\n    <>\n      <div\n        ref={menuAnchorRef}\n        data-line-number={lineNumber}\n        className={clsx(\n          codeLineClassName,\n          'react-line-number react-code-text',\n          virtualOffset && 'virtual',\n          preventClick && 'prevent-click',\n          isFullyHighlighted && 'highlighted-line',\n        )}\n        style={\n          virtualOffset ? {paddingRight: '16px', transform: `translateY(${virtualOffset}px)`} : {paddingRight: '16px'}\n        }\n        onMouseDown={preventClick ? undefined : codeCellClickFunc}\n        onMouseEnter={copilotAccessAllowed ? () => mouseCallback(true) : undefined}\n        onMouseLeave={copilotAccessAllowed ? () => mouseCallback(false) : undefined}\n      >\n        {lineNumber}\n        {codeownersLineError && (\n          <CodeAlert>\n            <CodeownersErrorLineIndicator />\n          </CodeAlert>\n        )}\n        {bidi && (\n          <CodeAlert>\n            <BidiTooltip />\n          </CodeAlert>\n        )}\n        {showCodeFoldingIcon && isStartLine && ownedSection && ownedCodeSections && (\n          <CodeAlert displayRight={true}>\n            <CodeFoldingChevron\n              codeLineData={codeLineData}\n              onCollapseToggle={onCollapseToggle}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n            />\n          </CodeAlert>\n        )}\n      </div>\n      {isFirstHighlightedLine && (\n        <HighlightedLineMenu\n          codeLineClassName={codeLineClassName}\n          ref={menuRef}\n          rowBeginId={`LG${highlightedInfo.start.line}`}\n          rowBeginNumber={highlightedInfo.start.line}\n          rowEndNumber={highlightedInfo.end.line}\n          rowEndId={`LG${highlightedInfo.end.line}`}\n        />\n      )}\n      {copilotAccessAllowed && (\n        <div className=\"react-line-number-hover-copilot-button\">\n          <CopilotButton\n            ref={copilotMenuRef}\n            rowBeginNumber={lineNumber}\n            rowEndNumber={lineNumber}\n            id=\"code-line-copilot-button\"\n          />\n        </div>\n      )}\n    </>\n  )\n}\n\ninterface CodeAlertProps extends Pick<BoxProps, 'sx'> {\n  displayRight?: boolean\n}\n\nexport function CodeAlert({children, sx, displayRight}: PropsWithChildren<CodeAlertProps>) {\n  const marginDirection = displayRight ? undefined : {left: '-4px'}\n  const marginX = displayRight ? '8px' : '1px'\n  return (\n    <Box as=\"span\" sx={{...marginDirection, margin: `1px ${marginX}`, position: 'absolute', zIndex: '1', ...sx}}>\n      {children}\n    </Box>\n  )\n}\n\nexport function CodeFoldingChevron({\n  codeLineData,\n  onCollapseToggle,\n  onLineStickOrUnstick,\n}: {\n  codeLineData: CodeLineData\n  onCollapseToggle?: (isCollapsed: boolean) => void\n  onLineStickOrUnstick?: SetStickyLinesType\n}) {\n  const collapsed = useIsLineCollapsed(codeLineData.lineNumber)\n\n  const expand = useCallback(\n    (event: React.MouseEvent) => {\n      const {lineNumber, ownedSection} = codeLineData\n      if (ownedSection) ownedSection.collapsed = false\n      onCollapseToggle?.(false)\n      expandRow(lineNumber)\n      onLineStickOrUnstick?.(codeLineData, true)\n      event.preventDefault()\n    },\n    [codeLineData, onCollapseToggle, onLineStickOrUnstick],\n  )\n\n  const collapse = useCallback(\n    (event: React.MouseEvent) => {\n      const {lineNumber, ownedSection} = codeLineData\n      if (ownedSection) ownedSection.collapsed = true\n      onCollapseToggle?.(true)\n      collapseRow(lineNumber)\n      event.preventDefault()\n    },\n    [codeLineData, onCollapseToggle],\n  )\n\n  return collapsed ? (\n    <Box aria-label={'Expand code section'} onMouseDown={expand} role=\"button\" sx={{position: 'absolute'}}>\n      <Octicon icon={ChevronRightIcon} />\n    </Box>\n  ) : (\n    <Box aria-label={'Collapse code section'} onMouseDown={collapse} role=\"button\" sx={{position: 'absolute'}}>\n      <Octicon icon={ChevronDownIcon} />\n    </Box>\n  )\n}\n\ntry{ LineNumber.displayName ||= 'LineNumber' } catch {}\ntry{ LineNumberUnmemoized.displayName ||= 'LineNumberUnmemoized' } catch {}\ntry{ CodeAlert.displayName ||= 'CodeAlert' } catch {}\ntry{ CodeFoldingChevron.displayName ||= 'CodeFoldingChevron' } catch {}","import {useReposAnalytics} from '@github-ui/code-view-shared/hooks/use-repos-analytics'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {clsx} from 'clsx'\nimport React, {type PropsWithChildren, useCallback, useEffect, useRef} from 'react'\n\n// eslint-disable-next-line no-restricted-imports\nimport {\n  type BlobOffset,\n  formatBlobRangeAnchor,\n  parseBlobRange,\n  parseFileAnchor,\n} from '../../../../../github/blob-anchor'\nimport {useCursorSelectionRef} from '../../../../hooks/use-cursor-navigation'\nimport {calculateLineAndColumn, expandAllRows} from '../../../../utilities/lines'\nimport {BidiTooltip} from '../../Banners/Bidi'\nimport {CodeownersErrorLineIndicator} from '../../Banners/CodeownerFileBanner'\nimport {CopilotButton, type CopilotButtonHandle} from '../CopilotButton'\nimport type {HighlightedLineMenuHandle} from '../HighlightedLineMenu'\nimport HighlightedLineMenu from '../HighlightedLineMenu'\nimport {useHighlightedLinesInfo} from './HighlightedLineProvider'\nimport {CodeAlert, CodeFoldingChevron, type LineNumberProps} from './LineNumber'\n\nexport const LineNumberNoVirtualziation = React.memo(LineNumberNoVirtualizationUnmemoized)\nfunction LineNumberNoVirtualizationUnmemoized({\n  codeLineData,\n  onClick,\n  ownedCodeSections,\n  onCollapseToggle,\n  preventClick,\n  onLineStickOrUnstick,\n  virtualOffset,\n  copilotAccessAllowed,\n}: PropsWithChildren<LineNumberProps>) {\n  const {lineNumber, ownedSection, codeLineClassName, isStartLine, codeownersLineError, bidi} = codeLineData\n  const {sendRepoClickEvent} = useReposAnalytics()\n  const selectionRef = useCursorSelectionRef()\n\n  const codeCellClickFunc: React.MouseEventHandler<HTMLDivElement> = useCallback(\n    event => {\n      if (event.defaultPrevented) {\n        return\n      }\n      const targetedLineNumber = parseInt(event.currentTarget.getAttribute('data-line-number')!, 10)\n\n      let anchorInfo = parseFileAnchor(`L${targetedLineNumber}`)\n\n      let highlightStart: BlobOffset | undefined = undefined\n      let highlightEnd: BlobOffset | undefined = undefined\n\n      const cursorSelection = selectionRef.current\n      if (\n        cursorSelection &&\n        !(\n          cursorSelection.start.line === cursorSelection.end.line &&\n          cursorSelection.start.column === cursorSelection.end.column\n        )\n      ) {\n        highlightStart = cursorSelection.start\n        highlightEnd = cursorSelection.end\n      } else {\n        const selectionRange = window.getSelection()?.rangeCount ? window.getSelection()?.getRangeAt(0) : null\n        if (selectionRange) {\n          highlightStart = calculateLineAndColumn(selectionRange.startContainer, selectionRange.startOffset)\n          highlightEnd = calculateLineAndColumn(selectionRange.endContainer, selectionRange.endOffset)\n        }\n      }\n\n      let selection = false\n      if (\n        highlightStart &&\n        highlightEnd &&\n        highlightStart.line <= targetedLineNumber &&\n        highlightEnd.line >= targetedLineNumber\n      ) {\n        selection = true\n\n        anchorInfo = {\n          anchorPrefix: '',\n          blobRange: {\n            start: highlightStart,\n            end: highlightEnd,\n          },\n        }\n      }\n\n      const {blobRange} = anchorInfo\n\n      const currentLines = parseBlobRange(window.location.hash)\n      if (currentLines && event.shiftKey && !selection) {\n        sendRepoClickEvent('BLOB.MULTILINE')\n        anchorInfo.blobRange = {\n          start: currentLines.start,\n          end: blobRange.end,\n        }\n      } else {\n        sendRepoClickEvent('BLOB.LINE')\n      }\n\n      const hash = formatBlobRangeAnchor(anchorInfo)\n      history.replaceState(history.state, '', hash)\n\n      onClick?.(event)\n    },\n    [onClick, selectionRef, sendRepoClickEvent],\n  )\n\n  const highlightedInfo = useHighlightedLinesInfo(lineNumber)\n  const isFirstHighlightedLine = highlightedInfo?.start.line === lineNumber\n\n  // calculates if the line is fully within the highlight info\n  // all lines numbers except the first line are considered fully highlight\n  // the first line is considered fully highlighted if there is no column offset\n  const isInHighlightRange =\n    highlightedInfo && highlightedInfo.start.line < lineNumber && highlightedInfo.end.line >= lineNumber\n  const isFullyHighlighted = isInHighlightRange || (isFirstHighlightedLine && highlightedInfo?.start.column === null)\n\n  const menuAnchorRef = useRef<HTMLDivElement | null>(null)\n  const menuRef = useRef<HighlightedLineMenuHandle>(null)\n\n  const copilotMenuRef = useRef<CopilotButtonHandle>(null)\n\n  useLayoutEffect(() => {\n    if (isFirstHighlightedLine) {\n      menuRef.current?.setAnchor(menuAnchorRef.current)\n    }\n  }, [isFirstHighlightedLine])\n\n  const {codeFoldingOption} = useCodeViewOptions()\n  const showCodeFoldingIcon = codeFoldingOption.enabled\n\n  const mouseCallback = (isEnter: boolean) => {\n    copilotMenuRef.current?.setAnchor(isEnter ? menuAnchorRef.current : null)\n  }\n\n  useEffect(() => {\n    if (!codeFoldingOption.enabled) {\n      expandAllRows()\n      onCollapseToggle?.(false)\n      if (ownedSection) {\n        ownedSection.collapsed = false\n      }\n    }\n  }, [codeFoldingOption.enabled, ownedSection, onCollapseToggle])\n\n  return (\n    <>\n      <div\n        ref={ref => {\n          menuAnchorRef.current = ref\n        }}\n        data-line-number={lineNumber}\n        className={clsx(\n          codeLineClassName,\n          'react-line-number react-code-text',\n          virtualOffset && 'virtual',\n          preventClick && 'prevent-click',\n          isFullyHighlighted && 'highlighted-line',\n        )}\n        style={\n          virtualOffset ? {paddingRight: '16px', transform: `translateY(${virtualOffset}px)`} : {paddingRight: '16px'}\n        }\n        onMouseDown={preventClick ? undefined : codeCellClickFunc}\n        onMouseEnter={copilotAccessAllowed ? () => mouseCallback(true) : undefined}\n        onMouseLeave={copilotAccessAllowed ? () => mouseCallback(false) : undefined}\n      >\n        {lineNumber}\n        {codeownersLineError && (\n          <CodeAlert>\n            <CodeownersErrorLineIndicator />\n          </CodeAlert>\n        )}\n        {bidi && (\n          <CodeAlert>\n            <BidiTooltip />\n          </CodeAlert>\n        )}\n        {showCodeFoldingIcon && isStartLine && ownedSection && ownedCodeSections && (\n          <CodeAlert displayRight={true}>\n            <CodeFoldingChevron\n              codeLineData={codeLineData}\n              onCollapseToggle={onCollapseToggle}\n              onLineStickOrUnstick={onLineStickOrUnstick}\n            />\n          </CodeAlert>\n        )}\n      </div>\n      {isFirstHighlightedLine && (\n        <HighlightedLineMenu\n          codeLineClassName={codeLineClassName}\n          ref={menuRef}\n          rowBeginId={`LG${highlightedInfo.start.line}`}\n          rowBeginNumber={highlightedInfo.start.line}\n          rowEndNumber={highlightedInfo.end.line}\n          rowEndId={`LG${highlightedInfo.end.line}`}\n        />\n      )}\n\n      {copilotAccessAllowed && (\n        <div className=\"react-line-number-hover-copilot-button\">\n          <CopilotButton\n            ref={copilotMenuRef}\n            rowBeginNumber={lineNumber}\n            rowEndNumber={lineNumber}\n            id=\"code-line-copilot-button\"\n          />\n        </div>\n      )}\n    </>\n  )\n}\n\ntry{ LineNumberNoVirtualziation.displayName ||= 'LineNumberNoVirtualziation' } catch {}\ntry{ LineNumberNoVirtualizationUnmemoized.displayName ||= 'LineNumberNoVirtualizationUnmemoized' } catch {}","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {ObservableMap, ObservableValue} from '@github-ui/observable'\nimport {\n  useDerivedObservable,\n  useObservableMap,\n  useObservableValue,\n  useObservedState,\n  useObservedStateMap,\n} from '@github-ui/react-observable'\nimport type React from 'react'\nimport {createContext, useContext, useEffect, useMemo} from 'react'\n\nconst SearchResultsContext = createContext<{\n  resultsByLineNumber: ObservableMap<number, DefinitionOrReference[]>\n  focusedResult: ObservableValue<DefinitionOrReference | undefined>\n}>({\n  resultsByLineNumber: new ObservableMap(),\n  focusedResult: new ObservableValue<DefinitionOrReference | undefined>(undefined),\n})\n\nexport function SearchResultsProvider({\n  searchResults,\n  focusedSearchResult,\n  children,\n}: React.PropsWithChildren<{\n  searchResults: DefinitionOrReference[]\n  focusedSearchResult: number | undefined\n}>) {\n  const resultsByLineNumber = useObservableMap<number, DefinitionOrReference[]>()\n  const focusedResult = useObservableValue(\n    focusedSearchResult !== undefined ? searchResults[focusedSearchResult] : undefined,\n  )\n\n  useEffect(() => {\n    // Build up the new map separately so that we don't fire too many updates\n    const newMap = new Map<number, DefinitionOrReference[]>()\n    for (const searchResult of searchResults) {\n      const lineNumber = searchResult.lineNumber\n\n      if (newMap.has(lineNumber)) {\n        newMap.get(lineNumber)!.push(searchResult)\n      } else {\n        newMap.set(lineNumber, [searchResult])\n      }\n    }\n\n    // Update the observable map\n    resultsByLineNumber.clear()\n    for (const [lineNumber, resultsForLine] of newMap) {\n      resultsByLineNumber.set(lineNumber, resultsForLine)\n    }\n  }, [resultsByLineNumber, searchResults])\n\n  useEffect(() => {\n    focusedResult.value = focusedSearchResult !== undefined ? searchResults[focusedSearchResult] : undefined\n  }, [searchResults, focusedResult, focusedSearchResult])\n\n  const contextValue = useMemo(() => ({resultsByLineNumber, focusedResult}), [resultsByLineNumber, focusedResult])\n\n  return <SearchResultsContext.Provider value={contextValue}>{children}</SearchResultsContext.Provider>\n}\n\nexport function useAllSearchResults(): Map<number, DefinitionOrReference[]> {\n  const {resultsByLineNumber} = useContext(SearchResultsContext)\n  return useObservedStateMap(resultsByLineNumber)\n}\n\nexport function useSearchResults(lineNumber: number): DefinitionOrReference[] | undefined {\n  const {resultsByLineNumber} = useContext(SearchResultsContext)\n  return useObservedState(resultsByLineNumber.get(lineNumber))\n}\n\nexport function useFocusedSearchResult(lineNumber: number): DefinitionOrReference | undefined {\n  const {focusedResult} = useContext(SearchResultsContext)\n  const focusedResultForLine = useDerivedObservable(focusedResult, result =>\n    result?.lineNumber === lineNumber ? result : undefined,\n  )\n  return useObservedState(focusedResultForLine)\n}\n\nexport function useFocusedSearchResultWithoutLineCheck(): DefinitionOrReference | undefined {\n  const {focusedResult} = useContext(SearchResultsContext)\n  return useObservedState(focusedResult)\n}\n\ntry{ SearchResultsProvider.displayName ||= 'SearchResultsProvider' } catch {}","/* eslint github/unescaped-html-literal: off */\nimport type {StylingDirective, StylingDirectivesLine} from '@github-ui/code-view-types'\nimport {SafeHTMLDiv, type SafeHTMLString} from '@github-ui/safe-html'\nimport {useClientValue} from '@github-ui/use-client-value'\nimport React, {useMemo} from 'react'\n\nimport {useCurrentBlob} from '../../../../hooks/CurrentBlob'\nimport {useIsCursorEnabled} from '../../../../hooks/use-cursor-navigation'\nimport {useIsFirefox, useShouldUseInert} from '../../../../utilities/lines'\nimport {\n  getBIDIReplacement,\n  hasBidiCharacters,\n  hiddenBidiCharacterHTMLString,\n  isBidiShown,\n  showBidiCharactersHTML,\n  splitAroundBIDICharacters,\n} from '../../Banners/Bidi'\nimport {numberOfLinesPerContentVisibility} from './CodeLinesNoVirtualization'\nimport type {CodeLineData} from './hooks/use-code-lines'\n\ninterface SyntaxHighlightedLineProps {\n  id?: string\n  rawText?: string\n  stylingDirectivesLine?: StylingDirectivesLine\n  lineNumber: number\n  current?: boolean\n  forceVisible?: boolean\n  shouldUseInert: boolean\n}\n\nexport const SyntaxHighlightedLine = React.memo(React.forwardRef(SyntaxHighlightedLineWithRef))\n\nfunction SyntaxHighlightedLineWithRef(\n  {id, stylingDirectivesLine, rawText, lineNumber, current, forceVisible, shouldUseInert}: SyntaxHighlightedLineProps,\n  ref: React.ForwardedRef<HTMLDivElement>,\n) {\n  const strategy = useSyntaxHighlightingStrategy()\n  const codeLineHTML = useCodeHTML(undefined, stylingDirectivesLine, rawText, forceVisible ? 'plain' : strategy)\n  const inertProps = shouldUseInert ? {inert: 'inert'} : {} // workaround for React not supporting inert natively\n\n  return (\n    <SafeHTMLDiv\n      id={id}\n      className=\"react-file-line html-div\"\n      data-testid=\"code-cell\"\n      data-line-number={lineNumber}\n      html={codeLineHTML}\n      ref={ref}\n      style={{position: 'relative'}}\n      aria-current={current ? 'location' : undefined}\n      {...inertProps}\n    />\n  )\n}\n\nexport const SyntaxHighlightedOverlay = React.memo(SyntaxHighlightedOverlayUnmemoed)\n\nfunction SyntaxHighlightedOverlayUnmemoed({\n  linesData,\n  colorizedLines,\n}: {\n  linesData: CodeLineData[]\n  colorizedLines: SafeHTMLString[] | null | undefined\n}) {\n  const documentHTML = useCodeHTMLDocument(linesData, colorizedLines ?? null)\n  const shouldUseInert = useShouldUseInert()\n  const inertProps = shouldUseInert ? {inert: 'inert'} : {} // workaround for React not supporting inert natively\n\n  return <SafeHTMLDiv {...inertProps} html={documentHTML} />\n}\n\ntype SyntaxHighlightingStrategy = 'plain' | 'data-attribute' | 'separated-characters' | 'separated-characters-chunked'\n\nfunction useSyntaxHighlightingStrategy(): SyntaxHighlightingStrategy {\n  const hiddenFromFind = useIsCursorEnabled()\n  const isFirefox = useIsFirefox()\n  const shouldUseInert = useShouldUseInert()\n\n  if (!hiddenFromFind || shouldUseInert) return 'plain'\n  if (isFirefox && !shouldUseInert) return 'separated-characters-chunked'\n\n  return 'data-attribute'\n}\n\nexport function useCodeHTMLDocument(\n  linesData: CodeLineData[],\n  colorizedLines: SafeHTMLString[] | null | undefined,\n): SafeHTMLString {\n  const [isSSR] = useClientValue(() => false, true, [])\n  return useMemo(\n    () =>\n      colorizedLines\n        ? (colorizedLines\n            .map((colorizedLine, i) => {\n              if (i >= linesData.length) return null\n              let divWrapStart = ''\n              let divWrapEnd = ''\n              //we need to put content visibility=auto on boxes of content rather than on each individual line,\n              //that allows the page to do significantly fewer content visibility calculations when doing layout and\n              //style updates. Starting with boxes of 60 lines for now\n              if (i % numberOfLinesPerContentVisibility === 0 && !isSSR) {\n                divWrapStart = '<div class=\"react-no-virtualization-wrapper\">'\n              }\n              if (((i + 1) % numberOfLinesPerContentVisibility === 0 || i === colorizedLines.length) && !isSSR) {\n                divWrapEnd = '</div>'\n              }\n\n              return `${divWrapStart}<div id=\"LC${\n                i + 1\n              }\" class=\"react-code-text react-code-line-contents-no-virtualization react-file-line html-div ${linesData[\n                i\n              ]?.codeLineClassName}\">${\n                colorizedLine.length !== 0 ? colorizedLine : ('\\n' as SafeHTMLString)\n              }</div>${divWrapEnd}`\n            })\n            .join('\\n') as SafeHTMLString)\n        : ('<div></div>' as SafeHTMLString),\n    [linesData, colorizedLines, isSSR],\n  )\n}\n\n/**\n * Given the possible sources of syntax highlighting from the server, returns the appropriate syntax-highlighted HTML\n */\nexport function useCodeHTML(\n  lineHtml: SafeHTMLString | undefined,\n  directives: StylingDirectivesLine | undefined,\n  rawText: string | undefined,\n  strategy: SyntaxHighlightingStrategy = 'plain',\n): SafeHTMLString {\n  const {tabSize} = useCurrentBlob()\n\n  const bidiShown = isBidiShown()\n\n  return useMemo(\n    () => lineHtml ?? buildCodeHTML(rawText, directives, strategy, tabSize, bidiShown),\n    [rawText, lineHtml, directives, strategy, tabSize, bidiShown],\n  )\n}\n\n// Exported for testing\nexport function buildCodeHTML(\n  rawText: string | undefined,\n  directives: StylingDirectivesLine | undefined,\n  strategy: SyntaxHighlightingStrategy,\n  tabSize: number,\n  exposeBIDICharacters: boolean,\n): SafeHTMLString {\n  rawText ||= '\\n'\n  const tree = makeSyntaxTree(rawText, directives, strategy, tabSize)\n  const out: string[] = []\n  appendHTMLNodesForSubtree(tree, strategy, exposeBIDICharacters, out)\n  return out.join('') as SafeHTMLString\n}\n\nfunction appendHTMLNodesForSubtree(\n  node: SyntaxTree,\n  strategy: SyntaxHighlightingStrategy,\n  exposeBIDICharacters: boolean,\n  out: string[],\n) {\n  if (node.c) {\n    out.push(`<span class=\"${escapeHTML(node.c)}\">`)\n  }\n\n  for (const child of node.nodes) {\n    if (isTree(child)) {\n      appendHTMLNodesForSubtree(child, strategy, exposeBIDICharacters, out)\n    } else {\n      out.push(makeHTMLToken(child, strategy, exposeBIDICharacters))\n    }\n  }\n\n  if (node.c) {\n    out.push(`</span>`)\n  }\n}\n\nfunction makeHTMLToken(node: TokenNode, strategy: SyntaxHighlightingStrategy, exposeBIDICharacters: boolean): string {\n  switch (strategy) {\n    case 'data-attribute': {\n      const text = escapeHTML(node.text)\n\n      if (exposeBIDICharacters && hasBidiCharacters(text)) {\n        const splitText = splitAroundBIDICharacters(text)\n        const children = splitText.map(segment => {\n          const bidiReplacement = getBIDIReplacement(segment)\n          return bidiReplacement\n            ? hiddenBidiCharacterHTMLString(bidiReplacement)\n            : makeHTMLToken({...node, text: segment, c: ''}, strategy, false)\n        })\n        return node.c ? `<span class=\"${escapeHTML(node.c)}\">${children.join('')}</span>` : children.join('')\n      }\n\n      return node.c\n        ? `<span class=\"${escapeHTML(node.c)}\" data-code-text=\"${text}\"></span>`\n        : `<span data-code-text=\"${text}\"></span>`\n    }\n    case 'separated-characters-chunked':\n    case 'separated-characters': {\n      if (node.text && !node.text.trim()) {\n        // don't split empty strings / tabs, small optimization to cut down on the number of elements\n        return makeHTMLToken({...node}, 'data-attribute', exposeBIDICharacters)\n      }\n\n      let nodeText = [...node.text]\n\n      if (strategy === 'separated-characters-chunked' && !exposeBIDICharacters) {\n        // chunk characters together in groups of 2\n        nodeText = node.text.match(/.{1,2}/g) ?? nodeText\n      }\n\n      const separatedText = [...nodeText]\n        .map(char => {\n          const bidiReplacement = exposeBIDICharacters ? getBIDIReplacement(char) : undefined\n          return bidiReplacement\n            ? hiddenBidiCharacterHTMLString(bidiReplacement)\n            : `<span data-code-text=\"${escapeHTML(char)}\"></span>`\n        })\n        .join('')\n      return node.c ? `<span class=\"${escapeHTML(node.c)}\">${separatedText}</span>` : separatedText\n    }\n    case 'plain':\n    default: {\n      const text = escapeHTML(node.text)\n      const contents = exposeBIDICharacters ? showBidiCharactersHTML(text) ?? text : text\n      return node.c ? `<span class=\"${escapeHTML(node.c)}\">${contents}</span>` : contents\n    }\n  }\n}\n\ninterface SyntaxTree extends StylingDirective {\n  nodes: Array<SyntaxTree | TokenNode>\n}\n\ninterface TokenNode extends StylingDirective {\n  text: string\n}\n\nfunction makeSyntaxTree(\n  rawText: string,\n  stylingDirectivesLine: StylingDirectivesLine | undefined,\n  strategy: SyntaxHighlightingStrategy,\n  tabSize: number,\n): SyntaxTree {\n  const offset: Offset = {value: 0}\n  const tree: SyntaxTree = {nodes: [], s: 0, e: rawText.length, c: ''}\n\n  // Consider only non-empty directives\n  const directives = stylingDirectivesLine?.filter(dir => dir.e > dir.s)\n\n  if (!directives || directives.length === 0) {\n    tree.nodes.push(makeNode('', rawText, 0, rawText.length, offset, tabSize, strategy))\n    return tree\n  }\n\n  const currentParentStack = [tree]\n  for (let i = 0; i < directives.length; i++) {\n    const current = directives[i]!\n    const next = directives[i + 1]\n    let parent = currentParentStack[currentParentStack.length - 1] ?? tree\n    const previous = parent.nodes[parent.nodes.length - 1]\n\n    if (parent.nodes.length === 0 && current.s > parent.s) {\n      // Fill the space between the beginning of the parent and the first child (current)\n      const beginningOfParent = makeNode('', rawText, parent.s, current.s, offset, tabSize, strategy)\n      parent.nodes.push(beginningOfParent)\n    } else if (previous && current.s > previous.e) {\n      // Fill the space between the end of the previous node and the current one\n      const inBetween = makeNode('', rawText, previous.e, current.s, offset, tabSize, strategy)\n      parent.nodes.push(inBetween)\n    }\n\n    const isContainer = next && next.s < current.e\n    if (isContainer) {\n      // The current directive contains sub-directives. Make it the new parent, and recurse.\n      const newContainer = {...current, nodes: []}\n      parent.nodes.push(newContainer)\n      currentParentStack.push(newContainer)\n    } else {\n      // Create a node for the current directive\n      const newNode = makeNode(current.c, rawText, current.s, current.e, offset, tabSize, strategy)\n      parent.nodes.push(newNode)\n    }\n\n    if (next && next.s >= parent.e) {\n      let previousParentEnd = current.e\n      if (parent.e > previousParentEnd) {\n        // Fill the space between the end of the current directive and the end of the parent node\n        const restOfCurrentParent = makeNode('', rawText, previousParentEnd, parent.e, offset, tabSize, strategy)\n        parent.nodes.push(restOfCurrentParent)\n        previousParentEnd = parent.e\n      }\n\n      // We are done with the nodes in the current parent. Go back to the grandparent.\n      while (currentParentStack.length > 1 && next.s >= parent.e) {\n        //pop off all current parents, filling in data as necessary due to nested parents\n        currentParentStack.pop()\n        parent = currentParentStack[currentParentStack.length - 1] ?? tree\n        if (currentParentStack.length > 1 && next.s >= parent.e && parent.e > previousParentEnd) {\n          // Fill the space between the end of the current directive and the end of the parent node, but only if\n          // the parent is not the same scope as the previous parent\n          const restOfCurrentParent = makeNode('', rawText, previousParentEnd, parent.e, offset, tabSize, strategy)\n          previousParentEnd = parent.e\n          parent.nodes.push(restOfCurrentParent)\n        }\n      }\n    }\n  }\n\n  // Fill in the remaining space in any parents left in the stack\n  while (currentParentStack.length > 0) {\n    const parent = currentParentStack.pop()!\n\n    const lastNode = parent.nodes[parent.nodes.length - 1]\n    if (lastNode && lastNode.e < parent.e) {\n      // Fill the space between the end of the last directive and the end of the parent.\n      const restOfParent = makeNode('', rawText, lastNode.e, parent.e, offset, tabSize, strategy)\n      parent.nodes.push(restOfParent)\n    }\n  }\n\n  return tree\n}\n\ntype Offset = {value: number}\n\nfunction makeNode(\n  cssClass: string,\n  rawText: string,\n  start: number,\n  end: number,\n  offset: Offset,\n  tabSize: number,\n  strategy: SyntaxHighlightingStrategy,\n): TokenNode {\n  const substring = rawText.substring(start, end)\n  const text = strategy !== 'plain' ? convertTabsToSpaces(substring, tabSize, offset) : substring\n  return {c: cssClass, s: start, e: end, text}\n}\n\nfunction isTree(node: SyntaxTree | TokenNode): node is SyntaxTree {\n  return 'nodes' in node\n}\n\n/**\n * Converts a string containing tabs to a string where all tabs have been\n * replaced with the appropriate number of spaces.\n *\n * @param text The string to convert\n * @param tabSize The number of character widths between tab stops\n * @param offset The position on a line at which the string begins\n *\n * @remarks\n * This is necessary because our html format with no text nodes uses css to\n * put the code text on the page. Unfortunately, the browser does not interpret\n * the css-inserted text of adjacent nodes as being part of the same contiguous\n * block of text. That means that each node is treated as if it were at the\n * start of a line, so tabs do not necessarily get the correct width.\n * Converting them to the right number of spaces here fixes the problem. This\n * does not affect copying/pasting code correctly because the\n * syntax-highlighted overlay is not selectable.\n */\nfunction convertTabsToSpaces(text: string, tabSize: number, offset: Offset) {\n  const out: string[] = []\n  for (const char of text) {\n    if (char === '\\t') {\n      const numSpaces = tabSize - (offset.value % tabSize)\n      out.push(spaces(numSpaces))\n      offset.value += numSpaces\n    } else {\n      out.push(char)\n      // Browser textareas appear to count the number of code points rather\n      // than the display width of each character when determining tab stops.\n      offset.value += numberOfCodePoints(char)\n    }\n  }\n  return out.join('')\n}\n\nfunction spaces(count: number): string {\n  return new Array(count).fill(' ').join('')\n}\n\nfunction numberOfCodePoints(str: string): number {\n  return Array.from(str).length\n}\n\n/**\n * 1. No, there is no standard library solution for this\n * 2. Yes, this is actually the fastest way; the switch statement is slightly\n *    faster than a object lookup or map, and in aggregate, that adds up.\n */\nfunction escapeHTML(unsafe: string): SafeHTMLString {\n  return unsafe.replace(/[&<>\"']/g, escapeHTMLChar) as SafeHTMLString\n}\n\nfunction escapeHTMLChar(char: string): string {\n  switch (char) {\n    case '&':\n      return '&amp;'\n    case '<':\n      return '&lt;'\n    case '>':\n      return '&gt;'\n    case '\"':\n      return '&quot;'\n    case \"'\":\n      return '&#039;'\n    default:\n      return char\n  }\n}\n\ntry{ SyntaxHighlightedLine.displayName ||= 'SyntaxHighlightedLine' } catch {}\ntry{ SyntaxHighlightedLineWithRef.displayName ||= 'SyntaxHighlightedLineWithRef' } catch {}\ntry{ SyntaxHighlightedOverlay.displayName ||= 'SyntaxHighlightedOverlay' } catch {}\ntry{ SyntaxHighlightedOverlayUnmemoed.displayName ||= 'SyntaxHighlightedOverlayUnmemoed' } catch {}","import {Box} from '@primer/react'\n\nexport const scrollMarksContainerID = 'find-result-marks-container'\n\nexport function ScrollMarksContainer() {\n  return (\n    <Box\n      sx={{\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        height: '100%',\n        width: '15px',\n        transition: 'transform 0.3s',\n        '&:hover': {transform: 'scaleX(1.5)'},\n        zIndex: 1,\n      }}\n      id={scrollMarksContainerID}\n    />\n  )\n}\n\ntry{ ScrollMarksContainer.displayName ||= 'ScrollMarksContainer' } catch {}","import {useFilesPageInfo} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport type {CopilotChatReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport CopilotChatButton from '@github-ui/copilot-code-chat/CopilotCodeLinesMenu'\nimport {useCurrentRepository} from '@github-ui/current-repository'\nimport type {RefType} from '@github-ui/ref-utils'\nimport {qualifyRef} from '@github-ui/ref-utils'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {Box} from '@primer/react'\nimport React, {useImperativeHandle, useMemo, useState} from 'react'\nimport {createPortal} from 'react-dom'\n\nimport {useCurrentBlob} from '../../../hooks/CurrentBlob'\nimport {buttonHeight} from '../../../hooks/use-highlighted-line-menu-options'\n\nconst positionerID = 'copilot-button-positioner'\nconst portalRootID = 'copilot-button-container'\n\nexport function CopilotButtonContainer({children}: React.PropsWithChildren<unknown>) {\n  return (\n    <Box id={positionerID} sx={{position: 'relative'}}>\n      {children}\n      <div id={portalRootID} />\n    </Box>\n  )\n}\n\ninterface CopilotButtonProps {\n  rowBeginNumber: number\n  rowEndNumber: number\n  id: string\n  recalcPosition?: number\n}\n\nexport interface CopilotButtonHandle {\n  setAnchor(anchor: HTMLElement | null): void\n}\n\nexport const CopilotButton = React.memo(React.forwardRef(CopilotButtonWithRef))\n\nfunction CopilotButtonWithRef(\n  {rowBeginNumber, rowEndNumber, id, recalcPosition}: CopilotButtonProps,\n  ref: React.ForwardedRef<CopilotButtonHandle>,\n) {\n  const [anchor, setAnchor] = useState<HTMLElement | null>(null)\n  useImperativeHandle(ref, () => ({setAnchor}))\n\n  const [position, setPosition] = useState<React.CSSProperties>({top: 0, left: 0})\n\n  // We need to wait for the virtualization render in order to know where this position should be\n  // due to possible word wrapping\n  useLayoutEffect(() => {\n    const changePosition = () => requestAnimationFrame(() => setPosition(calculateCopilotButtonPosition(anchor)))\n    changePosition()\n\n    // eslint-disable-next-line github/prefer-observers\n    window.addEventListener('resize', changePosition)\n\n    return () => {\n      window.removeEventListener('resize', changePosition)\n    }\n  }, [anchor, recalcPosition])\n\n  // Copilot Menu Actions\n  const {copilotAccessAllowed, refInfo, path} = useFilesPageInfo()\n  const repo = useCurrentRepository()\n  const {language, languageID} = useCurrentBlob()\n  const messageReference: CopilotChatReference = useMemo(\n    () => ({\n      type: 'snippet',\n      languageID,\n      languageName: language,\n      path,\n      range: {start: rowBeginNumber, end: rowEndNumber},\n      ref: qualifyRef(refInfo.name, refInfo.refType as RefType),\n      commitOID: refInfo.currentOid,\n      repoID: repo.id,\n      repoName: repo.name,\n      repoOwner: repo.ownerLogin,\n      url: window.location.href,\n    }),\n    [languageID, language, path, rowBeginNumber, rowEndNumber, refInfo, repo],\n  )\n\n  const element = (\n    <div\n      style={{\n        alignSelf: 'center',\n        position: 'absolute',\n        lineHeight: '16px',\n        height: '24px',\n        width: '24px',\n        zIndex: 2,\n        ...position,\n      }}\n    >\n      <CopilotChatButton copilotAccessAllowed={copilotAccessAllowed} messageReference={messageReference} id={id} />\n    </div>\n  )\n\n  const portalRoot = document.getElementById(portalRootID)\n\n  return portalRoot ? createPortal(element, portalRoot) : null\n}\n\nexport function calculateCopilotButtonPosition(anchor: HTMLElement | null, offset = {x: 0, y: 0}): React.CSSProperties {\n  const container = document.getElementById(positionerID)\n  if (!anchor || !container) {\n    return {display: 'none'}\n  }\n\n  const {top: anchorTop, height: anchorHeight} = anchor.getBoundingClientRect()\n  const {top: tableTop} = container.getBoundingClientRect()\n  const topOffset = (buttonHeight - anchorHeight) / 2\n\n  return {\n    top: `${anchorTop - tableTop - topOffset + offset.y + 1}px`,\n    // Don't need to calculate this. This provides 8px spacing between\n    // the edge of the button and edge of the blob\n    right: '37px',\n  }\n}\n\ntry{ CopilotButtonContainer.displayName ||= 'CopilotButtonContainer' } catch {}\ntry{ CopilotButton.displayName ||= 'CopilotButton' } catch {}\ntry{ CopilotButtonWithRef.displayName ||= 'CopilotButtonWithRef' } catch {}","import {AllShortcutsEnabled} from '@github-ui/code-view-shared/components/AllShortcutsEnabled'\nimport {useReposAppPayload} from '@github-ui/code-view-shared/contexts/FilesPageInfoContext'\nimport {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport {useUrlCreator} from '@github-ui/code-view-shared/hooks/use-url-creator'\nimport {ssrSafeDocument, ssrSafeWindow} from '@github-ui/ssr-utils'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {useSearchParams} from '@github-ui/use-navigate'\nimport {KebabHorizontalIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, IconButton} from '@primer/react'\nimport React, {useImperativeHandle, useState} from 'react'\nimport {createPortal} from 'react-dom'\n\n// eslint-disable-next-line no-restricted-imports\nimport {copyText} from '../../../../github/command-palette/copy'\nimport {useDeferredMetadata} from '../../../contexts/DeferredMetadataContext'\nimport {\n  calculatePosition,\n  calculateTextContentFromElement,\n  positionerID,\n  useHighlightedLineMenuOptions,\n} from '../../../hooks/use-highlighted-line-menu-options'\nimport type {SetStickyLinesType} from '../../../hooks/use-sticky-lines'\nimport {forceAnnouncementToScreenReaders} from '../../../utilities/lines'\nimport type {CodeLineData} from './Code/hooks/use-code-lines'\n\nconst portalRootID = 'highlighted-line-menu-container'\nexport const firstOptionId = 'highlighted-line-menu-first-option'\n\nexport function HighlightedLineMenuContainer({children}: React.PropsWithChildren<unknown>) {\n  return (\n    <div id={positionerID} className=\"position-relative\">\n      {children}\n      <div id={portalRootID} />\n    </div>\n  )\n}\n\ninterface HighlightedLineMenuProps {\n  codeLineClassName?: string\n  offset?: {x: number; y: number}\n  lineData?: CodeLineData | null\n  onLineStickOrUnstick?: SetStickyLinesType\n  onMenuClose?: (value: boolean, otherValue: boolean) => void\n  onCollapseToggle?: () => void\n  openOnLoad?: boolean\n  cursorRef?: React.RefObject<HTMLDivElement>\n  rowBeginId: string\n  rowBeginNumber: number\n  rowEndId: string\n  rowEndNumber: number\n}\n\nexport interface HighlightedLineMenuHandle {\n  setAnchor(anchor: HTMLElement | null): void\n}\n\nconst HighlightedLineMenu = React.memo(React.forwardRef(HighlightedLineMenuWithRef))\n\nexport default HighlightedLineMenu\n\nfunction HighlightedLineMenuWithRef(\n  {\n    codeLineClassName,\n    offset,\n    lineData,\n    onLineStickOrUnstick,\n    onMenuClose,\n    onCollapseToggle,\n    openOnLoad = false,\n    cursorRef,\n    rowBeginId,\n    rowBeginNumber,\n    rowEndId,\n    rowEndNumber,\n  }: HighlightedLineMenuProps,\n  ref: React.ForwardedRef<HighlightedLineMenuHandle>,\n) {\n  const [anchor, setAnchor] = useState<HTMLElement | null>(null)\n  useImperativeHandle(ref, () => ({setAnchor}))\n  const actionMenuRef = React.useRef<HTMLLIElement>(null)\n  const {githubDevUrl} = useReposAppPayload()\n\n  //make the button itself invisible when the menu is being opened up next to the cursor\n  //also hide the button it is being repositioned so that it doesn't flash in the corner\n  const [visibility, setVisibility] = useState(openOnLoad ? 'hidden' : 'visible')\n\n  const [position, setPosition] = useState<React.CSSProperties>({top: 0, left: 0})\n\n  // We need to wait for the virtualization render in order to know where this position should be\n  // due to possible word wrapping\n  useLayoutEffect(() => {\n    const changePosition = () => {\n      setVisibility('hidden')\n      requestAnimationFrame(() => {\n        setPosition(calculatePosition(anchor, offset))\n        setVisibility('visible')\n      })\n    }\n    changePosition()\n\n    // eslint-disable-next-line github/prefer-observers\n    ssrSafeWindow?.addEventListener('resize', changePosition)\n\n    return () => {\n      ssrSafeWindow?.removeEventListener('resize', changePosition)\n    }\n  }, [anchor, offset])\n\n  useLayoutEffect(() => {\n    if (openOnLoad) {\n      if (cursorRef) setAnchor(cursorRef.current)\n      setTimeout(() => {\n        setOpen(true)\n        //50ms for the timeout because that gives the menu enough time to render and reposition itself so the\n        //menu doesn't open up in the corner\n      }, 50)\n    }\n    //we only want this to run when the component is initialized\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const useEndLineNumber = rowBeginId !== rowEndId\n\n  const {newDiscussionPath, newIssuePath} = useDeferredMetadata()\n  const {refSelectorShortcut} = useShortcut()\n\n  const [open, setOpen] = React.useState(false)\n  const {createPermalink, getUrl} = useUrlCreator()\n  const {setShouldBeOpen, expandOrCollapseSection, openUpRefSelector} = useHighlightedLineMenuOptions({\n    lineData,\n    onLineStickOrUnstick,\n    onMenuClose,\n    onCollapseToggle,\n    setOpen,\n  })\n\n  const [urlParams] = useSearchParams()\n  const isPlain = urlParams.get('plain') === '1'\n\n  const permalinkUrl = createPermalink({absolute: true, params: isPlain ? 'plain=1' : undefined})\n  const encodedPermalinkUrl = encodeURIComponent(permalinkUrl)\n\n  const linkHash = `L${rowBeginNumber}${useEndLineNumber ? `-L${rowEndNumber}` : ''}`\n\n  const element = (\n    <ActionMenu open={open} onOpenChange={setShouldBeOpen}>\n      <ActionMenu.Anchor>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          className={codeLineClassName}\n          size=\"small\"\n          icon={KebabHorizontalIcon}\n          aria-label={`Code line ${rowBeginNumber} options`}\n          data-testid=\"highlighted-line-menu-button\"\n          sx={{\n            alignSelf: 'center',\n            zIndex: 3,\n            position: 'absolute',\n            lineHeight: '16px',\n            height: '24px',\n            width: '24px',\n            visibility,\n            ...position,\n          }}\n        />\n      </ActionMenu.Anchor>\n      <ActionMenu.Overlay width=\"small\">\n        <ActionList data-testid=\"highlighted-line-menu\">\n          {rowBeginNumber === rowEndNumber && (\n            <ActionList.Item\n              onClick={() => {\n                forceAnnouncementToScreenReaders(`Copied line ${rowBeginNumber}.`)\n                const text = calculateTextContentFromElement(\n                  ssrSafeDocument?.getElementById(`LC${rowBeginNumber}`) ?? null,\n                )\n                text && copyText(text)\n                setShouldBeOpen(false)\n              }}\n              onSelect={() => {\n                forceAnnouncementToScreenReaders(`Copied line ${rowBeginNumber}.`)\n                const text = calculateTextContentFromElement(\n                  ssrSafeDocument?.getElementById(`LC${rowBeginNumber}`) ?? null,\n                )\n                text && copyText(text)\n                setShouldBeOpen(false)\n              }}\n              ref={actionMenuRef}\n              className={firstOptionId}\n            >\n              Copy line\n            </ActionList.Item>\n          )}\n          {rowBeginNumber !== rowEndNumber && (\n            <ActionList.Item\n              onClick={() => {\n                forceAnnouncementToScreenReaders(`Copied lines ${rowBeginNumber}-${rowEndNumber}.`)\n                let text = ''\n                for (let i = rowBeginNumber; i <= rowEndNumber; i++) {\n                  text += `${calculateTextContentFromElement(ssrSafeDocument?.getElementById(`LC${i}`) ?? null)}${\n                    i !== rowEndNumber ? '\\n' : ''\n                  }`\n                }\n                text && copyText(text)\n                setShouldBeOpen(false)\n              }}\n              onSelect={() => {\n                forceAnnouncementToScreenReaders(`Copied lines ${rowBeginNumber}-${rowEndNumber}.`)\n                let text = ''\n                for (let i = rowBeginNumber; i <= rowEndNumber; i++) {\n                  text += `${calculateTextContentFromElement(ssrSafeDocument?.getElementById(`LC${i}`) ?? null)}${\n                    i !== rowEndNumber ? '\\n' : ''\n                  }`\n                }\n                text && copyText(text)\n                setShouldBeOpen(false)\n              }}\n              className={firstOptionId}\n            >\n              Copy lines\n            </ActionList.Item>\n          )}\n          {permalinkUrl && (\n            <ActionList.Item\n              onClick={() => {\n                forceAnnouncementToScreenReaders(`Copied permalink.`)\n                copyText(permalinkUrl)\n                setShouldBeOpen(false)\n              }}\n              onSelect={() => {\n                forceAnnouncementToScreenReaders(`Copied permalink.`)\n                copyText(permalinkUrl)\n                setShouldBeOpen(false)\n              }}\n            >\n              Copy permalink\n            </ActionList.Item>\n          )}\n          <ActionList.LinkItem href={getUrl({action: 'blame', hash: linkHash})}>View git blame</ActionList.LinkItem>\n          {newIssuePath && permalinkUrl && (\n            <ActionList.LinkItem href={`${newIssuePath}?permalink=${encodedPermalinkUrl}`}>\n              Reference in new issue\n            </ActionList.LinkItem>\n          )}\n          {newDiscussionPath && permalinkUrl && (\n            <ActionList.LinkItem href={`${newDiscussionPath}?permalink=${encodedPermalinkUrl}`}>\n              Reference in new discussion\n            </ActionList.LinkItem>\n          )}\n          {githubDevUrl && (\n            <ActionList.LinkItem href={githubDevUrl + ssrSafeWindow?.location.pathname.substring(1)}>\n              View file in GitHub.dev\n            </ActionList.LinkItem>\n          )}\n          {rowBeginNumber === rowEndNumber && lineData && (\n            <ActionList.Item onClick={expandOrCollapseSection} onSelect={expandOrCollapseSection}>\n              {lineData.ownedSection && lineData.ownedSection.collapsed ? 'Expand' : 'Collapse'} current section\n            </ActionList.Item>\n          )}\n          <ActionList.Item onClick={openUpRefSelector} onSelect={openUpRefSelector}>\n            View file in different branch/tag\n            <ActionList.TrailingVisual>\n              <AllShortcutsEnabled>{refSelectorShortcut.text}</AllShortcutsEnabled>\n            </ActionList.TrailingVisual>\n          </ActionList.Item>\n        </ActionList>\n      </ActionMenu.Overlay>\n    </ActionMenu>\n  )\n\n  const portalRoot = ssrSafeDocument?.getElementById(portalRootID)\n\n  return portalRoot ? createPortal(element, portalRoot) : null\n}\n\ntry{ HighlightedLineMenuContainer.displayName ||= 'HighlightedLineMenuContainer' } catch {}\ntry{ HighlightedLineMenu.displayName ||= 'HighlightedLineMenu' } catch {}\ntry{ HighlightedLineMenuWithRef.displayName ||= 'HighlightedLineMenuWithRef' } catch {}","import type {DefinitionOrReference} from '@github-ui/code-nav'\nimport {useCodeViewOptions} from '@github-ui/use-code-view-options'\nimport {Text} from '@primer/react'\nimport type {BetterSystemStyleObject} from '@primer/react/lib-esm/sx'\n\nexport function HighlightedOverlay({\n  symbols,\n  focusedSymbol,\n  lineNumber,\n  sx,\n  isNotUsingWhitespace,\n  className,\n}: {\n  symbols: DefinitionOrReference[]\n  focusedSymbol?: DefinitionOrReference\n  lineNumber: number\n  sx?: BetterSystemStyleObject\n  isNotUsingWhitespace?: boolean\n  className?: string\n}) {\n  let startIndex = 0\n  const text = symbols.length > 0 ? symbols[0]!.bodyText : ''\n  const key = `overlay-${lineNumber}-${sx ? 'blob' : 'panel'}-${text}`\n  const wrapOption = useCodeViewOptions().codeWrappingOption\n  const leadingWhitespace = symbols.length > 0 && !isNotUsingWhitespace ? symbols[0]!.leadingWhitespace ?? 0 : 0\n\n  return (\n    <Text\n      key={key}\n      className={className}\n      sx={{\n        mb: '-20px',\n        color: 'transparent',\n        position: 'absolute',\n        overflowWrap: wrapOption.enabled ? 'anywhere' : 'unset',\n        maxWidth: wrapOption.enabled ? '100%' : 'unset',\n        maxHeight: '6rem',\n        overflow: 'hidden',\n        width: '100%',\n        display: 'inline-block',\n        userSelect: 'none',\n        ...sx,\n      }}\n    >\n      {symbols.map(symbol => {\n        const line = (\n          <span key={`symbol-${symbol.ident.start.line}-${symbol.ident.start.column + leadingWhitespace}`}>\n            <Text sx={{userSelect: 'none', visibility: 'hidden'}}>\n              {text.substring(startIndex, symbol.ident.start.column + leadingWhitespace)}\n            </Text>\n            <Text\n              sx={{\n                // NOTE: the hex code is the default Chrome find highlight color, just matching browser behaviour\n                bg: symbol === focusedSymbol ? '#ff9632' : 'var(--bgColor-attention-muted)',\n                zIndex: symbol === focusedSymbol ? 10 : undefined,\n                color: symbol === focusedSymbol ? 'black' : undefined,\n                position: symbol === focusedSymbol ? 'relative' : undefined,\n                userSelect: 'none',\n                // NOTE: this makes the overlay unclickable, and passes click\n                // events through to the underlying element\n                pointerEvents: 'none',\n              }}\n            >\n              <Text\n                sx={{visibility: symbol !== focusedSymbol ? 'hidden' : undefined}}\n                id={matchElementId(symbol.lineNumber, symbol.ident.start.column + leadingWhitespace)}\n              >\n                {text.substring(\n                  symbol.ident.start.column + leadingWhitespace,\n                  symbol.ident.end.column + leadingWhitespace,\n                )}\n              </Text>\n            </Text>\n          </span>\n        )\n\n        startIndex = symbol.ident.end.column + leadingWhitespace\n\n        return line\n      })}\n      {\n        // Return the rest of the line to wrap properly\n        <Text sx={{visibility: 'hidden', userSelect: 'none'}}>{text.substring(startIndex)}</Text>\n      }\n    </Text>\n  )\n}\n\nexport function matchElementId(line: number, column: number) {\n  return `match-${line}-${column}`\n}\n\ntry{ HighlightedOverlay.displayName ||= 'HighlightedOverlay' } catch {}","import type {DeferredAST} from '@github-ui/code-view-types'\nimport type {Repository} from '@github-ui/current-repository'\nimport {deferredASTPath} from '@github-ui/paths'\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport React, {useEffect, useState} from 'react'\n\nimport {noVirtualizationThreshold} from '../components/blob/BlobContent/Code/CodeLinesNoVirtualization'\n\nexport const EmptyDeferredAST: DeferredAST = {\n  stylingDirectives: null,\n}\n\nconst DeferredASTContext = React.createContext(EmptyDeferredAST)\n\nexport function DeferredASTProvider({children, ...props}: React.PropsWithChildren<DeferredAST>) {\n  return <DeferredASTContext.Provider value={props}>{children}</DeferredASTContext.Provider>\n}\n\nexport function useDeferredAST() {\n  return React.useContext(DeferredASTContext)\n}\n\nfunction isValidResponse(obj: DeferredAST): obj is DeferredAST {\n  return Array.isArray(obj.stylingDirectives)\n}\n\nexport function useLoadDeferredAST(\n  repo: Repository,\n  refInfo: RefInfo,\n  path: string,\n  has404Error: boolean,\n  fileLength: number,\n): DeferredAST {\n  const [state, setState] = useState<DeferredAST>(EmptyDeferredAST)\n  const isNonVirtualized = useFeatureFlag('react_blob_overlay')\n  const url =\n    refInfo && !has404Error\n      ? deferredASTPath({\n          repo,\n          commitish: refInfo.name,\n          path,\n        })\n      : null\n\n  useEffect(() => {\n    if (!url) return\n    if (fileLength > noVirtualizationThreshold || !isNonVirtualized) {\n      setState(EmptyDeferredAST)\n      return\n    }\n    let cancelled = false\n    const update = async () => {\n      setState(EmptyDeferredAST)\n      const response = await verifiedFetchJSON(url)\n\n      if (cancelled) {\n        return\n      }\n\n      try {\n        if (response.ok) {\n          const data = await response.json()\n          if (data && isValidResponse(data)) {\n            setState(data)\n          }\n        } else {\n          setState(EmptyDeferredAST)\n        }\n      } catch (e) {\n        setState(EmptyDeferredAST)\n      }\n    }\n\n    update()\n\n    return function cancel() {\n      cancelled = true\n    }\n  }, [url, fileLength, isNonVirtualized])\n\n  return state\n}\n\ntry{ DeferredASTContext.displayName ||= 'DeferredASTContext' } catch {}\ntry{ DeferredASTProvider.displayName ||= 'DeferredASTProvider' } catch {}","import type {DeferredMetadata} from '@github-ui/code-view-types'\nimport type {Repository} from '@github-ui/current-repository'\nimport {deferredMetadataPath} from '@github-ui/paths'\nimport type {RefInfo} from '@github-ui/repos-types'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport React, {useEffect, useState} from 'react'\n\nexport const EmptyDeferredMetadata: DeferredMetadata = {\n  showLicenseMeta: false,\n  license: null,\n  codeownerInfo: {\n    codeownerPath: null,\n    ownedByCurrentUser: null,\n    ownersForFile: null,\n    ruleForPathLine: null,\n  },\n  newDiscussionPath: null,\n  newIssuePath: null,\n}\n\nconst DeferredMetadataContext = React.createContext(EmptyDeferredMetadata)\n\nexport function DeferredMetadataProvider({children, ...props}: React.PropsWithChildren<DeferredMetadata>) {\n  return <DeferredMetadataContext.Provider value={props}>{children}</DeferredMetadataContext.Provider>\n}\n\nexport function useDeferredMetadata() {\n  return React.useContext(DeferredMetadataContext)\n}\n\nfunction isValidResponse(obj: DeferredMetadata): obj is DeferredMetadata {\n  return typeof obj.showLicenseMeta === 'boolean' && typeof obj.codeownerInfo === 'object'\n}\n\nexport function useLoadDeferredMetadata(\n  repo: Repository,\n  refInfo: RefInfo,\n  path: string,\n  has404Error: boolean,\n): DeferredMetadata {\n  const [state, setState] = useState<DeferredMetadata>(EmptyDeferredMetadata)\n  const url =\n    refInfo && !has404Error\n      ? deferredMetadataPath({\n          repo,\n          commitish: refInfo.name,\n          path,\n        })\n      : null\n\n  useEffect(() => {\n    if (!url) return\n\n    let cancelled = false\n    const update = async () => {\n      setState(EmptyDeferredMetadata)\n      const response = await verifiedFetchJSON(url)\n\n      if (cancelled) {\n        return\n      }\n\n      try {\n        if (response.ok) {\n          const data = await response.json()\n          if (data && isValidResponse(data)) {\n            setState(data)\n          }\n        } else {\n          setState(EmptyDeferredMetadata)\n        }\n      } catch (e) {\n        setState(EmptyDeferredMetadata)\n      }\n    }\n\n    update()\n\n    return function cancel() {\n      cancelled = true\n    }\n  }, [url])\n\n  return state\n}\n\ntry{ DeferredMetadataContext.displayName ||= 'DeferredMetadataContext' } catch {}\ntry{ DeferredMetadataProvider.displayName ||= 'DeferredMetadataProvider' } catch {}","import type {Blame} from '@github-ui/code-view-types'\nimport React from 'react'\n\nconst CurrentBlameContext = React.createContext<Blame | undefined>(undefined)\n\nexport function CurrentBlameProvider({blame, children}: React.PropsWithChildren<{blame: Blame | undefined}>) {\n  return <CurrentBlameContext.Provider value={blame}> {children} </CurrentBlameContext.Provider>\n}\n\nexport function useCurrentBlame(): Blame | undefined {\n  return React.useContext(CurrentBlameContext)\n}\n\ntry{ CurrentBlameContext.displayName ||= 'CurrentBlameContext' } catch {}\ntry{ CurrentBlameProvider.displayName ||= 'CurrentBlameProvider' } catch {}","import type {BlobPayload} from '@github-ui/code-view-types'\nimport React from 'react'\n\nconst CurrentBlobContext = React.createContext({} as BlobPayload)\n\nexport function CurrentBlobProvider({blob, children}: React.PropsWithChildren<{blob: BlobPayload}>) {\n  return <CurrentBlobContext.Provider value={blob}> {children} </CurrentBlobContext.Provider>\n}\n\nexport function useCurrentBlob() {\n  return React.useContext(CurrentBlobContext)\n}\n\ntry{ CurrentBlobContext.displayName ||= 'CurrentBlobContext' } catch {}\ntry{ CurrentBlobProvider.displayName ||= 'CurrentBlobProvider' } catch {}","import React, {useCallback} from 'react'\n\nimport type {CodeLineData} from '../components/blob/BlobContent/Code/hooks/use-code-lines'\nimport {useCurrentBlame} from './CurrentBlame'\nimport {useCurrentBlob} from './CurrentBlob'\n\nconst CurrentLineRefMapContext = React.createContext<Map<number, CodeLineData[]> | null>(null)\n\nexport function CurrentLineRefMapProvider({children}: React.PropsWithChildren<unknown>) {\n  const blob = useCurrentBlob()\n  const blame = useCurrentBlame()\n  //We only want to refresh the map to an empty map whenever we have a new blob or blame being loaded, hence the\n  //blob/blame only dep array\n  //eslint-disable-next-line react-hooks/exhaustive-deps\n  const map = React.useMemo(() => (blame ? null : new Map<number, CodeLineData[]>()), [blob, blame])\n  return <CurrentLineRefMapContext.Provider value={map}> {children} </CurrentLineRefMapContext.Provider>\n}\n\nexport function useLineElementMap() {\n  return React.useContext(CurrentLineRefMapContext)\n}\n\nexport function useGetValueFromLineElementMap() {\n  const map = React.useContext(CurrentLineRefMapContext)\n  return useCallback((num: number) => map?.get(num), [map])\n}\n\nexport function useAddValueToLineElementMap() {\n  const map = React.useContext(CurrentLineRefMapContext)\n  return useCallback(\n    (num: number, elem: CodeLineData) => {\n      if (!map) return\n      if (map.has(num)) {\n        map.get(num)?.push(elem)\n      } else {\n        map.set(num, [elem])\n      }\n    },\n    [map],\n  )\n}\n\ntry{ CurrentLineRefMapContext.displayName ||= 'CurrentLineRefMapContext' } catch {}\ntry{ CurrentLineRefMapProvider.displayName ||= 'CurrentLineRefMapProvider' } catch {}","import {AlertIcon, CheckIcon, CopyIcon} from '@primer/octicons-react'\nimport {Octicon, Spinner} from '@primer/react'\nimport type React from 'react'\n\nexport enum CopyState {\n  Idle,\n  Fetching,\n  Success,\n  Error,\n}\n\nexport function isClipboardSupported(): boolean {\n  const hasClipboardApi = 'clipboard' in navigator\n  const hasClipboardItem = typeof ClipboardItem !== 'undefined'\n\n  return hasClipboardApi && hasClipboardItem\n}\n\nexport async function fetchContent(url: string) {\n  const res = await fetch(url, {method: 'get'})\n\n  if (!res.ok) {\n    throw new Error(`Failed to fetch ${url}: ${res.status} ${res.statusText}`)\n  }\n\n  const text = (await res.text()).replace(/\\r?\\n$/, '')\n\n  return new Blob([text], {type: 'text/plain'})\n}\n\ninterface CopyStateUI {\n  ariaLabel: string\n  content: React.ReactNode\n}\n\n/**\n * Get common UI for the button and action item based on the current state.\n */\nexport function getCopyStateUI(state: CopyState): CopyStateUI {\n  let ariaLabel\n  let content\n\n  switch (state) {\n    case CopyState.Success:\n      ariaLabel = 'Copied!'\n      content = <Octicon icon={CheckIcon} />\n      break\n    case CopyState.Fetching:\n      ariaLabel = 'Copying'\n      content = <Spinner size=\"small\" />\n      break\n    case CopyState.Error:\n      ariaLabel = 'Something went wrong. Try again.'\n      content = <Octicon icon={AlertIcon} />\n      break\n    default:\n      ariaLabel = 'Copy'\n      content = <Octicon icon={CopyIcon} />\n  }\n\n  return {ariaLabel, content}\n}\n","import {useShortcut} from '@github-ui/code-view-shared/hooks/shortcuts'\nimport type React from 'react'\nimport {useCallback, useEffect, useRef} from 'react'\n\nimport {useCopyRawBlobContents} from '../hooks/use-copy-raw-blob-contents'\n\ninterface SelectAllShortcutButtonProps {\n  containerRef: React.RefObject<HTMLElement> | undefined\n  shouldNotOverrideCopy?: boolean\n}\n\n/**\n * This component intercepts the select-all shortcut and selects the contents\n * of the given container instead of the contents of the entire document.\n *\n * In addition, it also intercepts the copy shortcut. If the current selection\n * was created through select-all, it will copy the raw blob contents instead\n * of the current selection. This is because when the code blob is virtualized,\n * the current selection will only contain the visible lines.\n */\nexport default function SelectAllShortcutButton({containerRef, shouldNotOverrideCopy}: SelectAllShortcutButtonProps) {\n  const {selectAllShortcut} = useShortcut()\n  const allSelected = useRef(false)\n  const copyRawBlobContents = useCopyRawBlobContents()\n\n  // If the selection changes while we are listening for this event, then that means the selection is no longer the result of Control+A\n  const onSelectionChange = useCallback(() => {\n    allSelected.current = false\n\n    document.removeEventListener('selectionchange', onSelectionChange)\n  }, [])\n\n  // Clean up the event listener on unmount\n  useEffect(() => () => document.removeEventListener('selectionchange', onSelectionChange), [onSelectionChange])\n\n  const selectAll = useCallback(\n    (event: React.MouseEvent) => {\n      if (containerRef) {\n        // If we're not given a container, just let the browser handle the event\n        if (!containerRef.current) return\n\n        // Restrict select all to the code blob\n        selectAllContentInElement(containerRef.current)\n        event.preventDefault()\n\n        allSelected.current = true\n\n        // Any changes to the selection now mean that the selection was not the result of Control+A\n        setTimeout(() => document.addEventListener('selectionchange', onSelectionChange), 0)\n      }\n    },\n    [containerRef, onSelectionChange],\n  )\n\n  const copyFullFileContents = useCallback(\n    (event: Event) => {\n      // If the selection didn't come from select-all, let the browser handle the event\n      if (!allSelected.current) return\n\n      event.preventDefault()\n      copyRawBlobContents()\n    },\n    [copyRawBlobContents],\n  )\n\n  // We cannot use data-hotkey for this. If we do, then regular copy events will not work properly.\n  useEffect(() => {\n    if (shouldNotOverrideCopy) return\n    window.addEventListener('copy', copyFullFileContents)\n    return () => window.removeEventListener('copy', copyFullFileContents)\n  }, [copyFullFileContents, shouldNotOverrideCopy])\n\n  return <button hidden={true} data-hotkey={selectAllShortcut.hotkey} onClick={selectAll} />\n}\n\nfunction selectAllContentInElement(element: HTMLElement) {\n  const range = document.createRange()\n  range.selectNode(element)\n  const sel = window.getSelection()\n  sel?.removeAllRanges()\n  sel?.addRange(range)\n}\n\ntry{ SelectAllShortcutButton.displayName ||= 'SelectAllShortcutButton' } catch {}","import {CopyToClipboardButton} from '@github-ui/copy-to-clipboard'\nimport type {Repository} from '@github-ui/current-repository'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport {Link} from '@github-ui/react-core/link'\nimport {ScreenReaderHeading} from '@github-ui/screen-reader-heading'\nimport {Box, Heading, Link as PrimerLink, Text} from '@primer/react'\nimport {useMemo} from 'react'\n\nconst separatorCharacter = '/'\n\ninterface BreadcrumbProps {\n  id?: string\n  fileNameId?: string\n  commitish: string\n  path: string\n  repo: Repository\n  isFolder: boolean\n  fontSize?: number\n  showCopyPathButton?: boolean\n}\n\nexport function Breadcrumb({\n  id = 'breadcrumb',\n  fileNameId,\n  path,\n  repo,\n  commitish,\n  isFolder,\n  fontSize,\n  showCopyPathButton,\n}: BreadcrumbProps) {\n  const {fileName, segments} = useMemo(() => getPathSegmentData(path), [path])\n  const isRoot = !path\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'row',\n        fontSize: fontSize ?? 2,\n        minWidth: 0,\n        flexShrink: 1,\n        flexWrap: 'wrap',\n        maxWidth: '100%',\n        alignItems: 'center',\n      }}\n    >\n      <Box as=\"nav\" data-testid=\"breadcrumbs\" aria-labelledby={`${id}-heading`} id={id} sx={{maxWidth: '100%'}}>\n        <ScreenReaderHeading id={`${id}-heading`} as=\"h2\" text=\"Breadcrumbs\" />\n\n        <Box as=\"ol\" sx={{maxWidth: '100%', listStyle: 'none', display: 'inline-block'}}>\n          <Box as=\"li\" sx={{display: 'inline-block', maxWidth: '100%'}}>\n            <RepoLink repo={repo} commitish={commitish} />\n          </Box>\n          {segments.map(({directoryName, directoryPath}) => (\n            <Box as=\"li\" sx={{display: 'inline-block', maxWidth: '100%'}} key={directoryPath}>\n              <Separator fontSize={fontSize} />\n              {directoryName ? (\n                <DirectoryLink path={directoryPath} directoryName={directoryName} repo={repo} commitish={commitish} />\n              ) : null}\n            </Box>\n          ))}\n        </Box>\n      </Box>\n      {fileName && (\n        <Box data-testid=\"breadcrumbs-filename\" sx={{display: 'inline-block', maxWidth: '100%'}} key={fileName}>\n          <Separator fontSize={fontSize} />\n\n          <FileName value={fileName} id={fileNameId} fontSize={fontSize} />\n\n          {!isRoot && isFolder && <Separator />}\n        </Box>\n      )}\n      {showCopyPathButton && (\n        <CopyToClipboardButton\n          ariaLabel=\"Copy path\"\n          textToCopy={path}\n          tooltipProps={{direction: 'nw'}}\n          size=\"small\"\n          hasPortalTooltip={true}\n          className=\"ml-2\"\n        />\n      )}\n    </Box>\n  )\n}\n\nfunction RepoLink({repo, commitish}: {repo: Repository; commitish: string}) {\n  return (\n    <PrimerLink\n      as={Link}\n      sx={{fontWeight: 'bold'}}\n      to={repositoryTreePath({repo, commitish, action: 'tree'})}\n      data-testid=\"breadcrumbs-repo-link\"\n      reloadDocument\n    >\n      {repo.name}\n    </PrimerLink>\n  )\n}\ninterface DirectoryLinkProps {\n  commitish: string\n  directoryName: string\n  path: string\n  repo: Repository\n}\n\nfunction DirectoryLink({directoryName, path, repo, commitish}: DirectoryLinkProps) {\n  return (\n    <PrimerLink as={Link} to={repositoryTreePath({repo, commitish, path, action: 'tree'})} sx={{fontWeight: 400}}>\n      {directoryName}\n    </PrimerLink>\n  )\n}\n\nexport function Separator({fontSize}: {fontSize?: number}) {\n  return (\n    <Text sx={{px: 1, fontWeight: 400, color: 'fg.muted', fontSize: fontSize ?? 2}} aria-hidden=\"true\">\n      /\n    </Text>\n  )\n}\n\nfunction FileName({value, id, fontSize}: {value: string; id?: string; fontSize?: number}) {\n  return (\n    <Heading\n      as=\"h1\"\n      tabIndex={-1}\n      sx={{fontWeight: 600, display: 'inline-block', maxWidth: '100%', fontSize: fontSize ?? 2}}\n      id={id}\n    >\n      {value}\n    </Heading>\n  )\n}\n\nfunction getPathSegmentData(path: string) {\n  const segments = path.split(separatorCharacter)\n  const fileName = segments.pop()!\n\n  return {\n    fileName,\n    segments: segments.map((segment, i) => ({\n      directoryName: segment,\n      directoryPath: segments.slice(0, i + 1).join(separatorCharacter),\n    })),\n  }\n}\n\ntry{ Breadcrumb.displayName ||= 'Breadcrumb' } catch {}\ntry{ RepoLink.displayName ||= 'RepoLink' } catch {}\ntry{ DirectoryLink.displayName ||= 'DirectoryLink' } catch {}\ntry{ Separator.displayName ||= 'Separator' } catch {}\ntry{ FileName.displayName ||= 'FileName' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"square\":\"AskCopilotButton-module__square--o8kDO\",\"muted\":\"AskCopilotButton-module__muted--QatcG\"};","import {usePortalTooltip} from '@github-ui/portal-tooltip/use-portal-tooltip'\nimport {CopilotIcon} from '@primer/octicons-react'\nimport {IconButton} from '@primer/react'\nimport {clsx} from 'clsx'\nimport type {ComponentProps} from 'react'\nimport {useRef} from 'react'\nimport styles from './AskCopilotButton.module.css'\n\nexport interface AskCopilotButtonProps\n  extends Omit<ComponentProps<typeof IconButton>, 'icon' | 'aria-label' | 'aria-labelledby'> {\n  referenceType: string\n}\n\nexport function AskCopilotButton({children, referenceType, ...props}: AskCopilotButtonProps) {\n  const contentRef = useRef<HTMLButtonElement>(null)\n\n  const label = `Ask Copilot about this ${referenceType}`\n\n  const [attrs, portalElement] = usePortalTooltip({\n    'aria-label': label,\n    contentRef,\n    direction: 'sw',\n    anchorSide: 'outside-bottom',\n  })\n\n  return (\n    <>\n      {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n      <IconButton\n        unsafeDisableTooltip={true}\n        className={clsx(styles['square'], !!children && styles['muted'])}\n        ref={contentRef}\n        icon={CopilotIcon}\n        size=\"small\"\n        aria-label={label}\n        data-testid=\"copilot-ask-menu\"\n        {...attrs}\n        {...props}\n      />\n      {portalElement}\n    </>\n  )\n}\n\ntry{ AskCopilotButton.displayName ||= 'AskCopilotButton' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"menu-button\":\"CopilotCodeLinesMenu-module__menu-button--VNLPN\"};","import {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport {TriangleDownIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, ButtonGroup} from '@primer/react'\nimport {useCallback, useState} from 'react'\n\nimport {publishAddCopilotChatReference, publishOpenCopilotChat} from '@github-ui/copilot-chat/utils/copilot-chat-events'\nimport {CopilotChatIntents, type CopilotChatReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {AskCopilotButton} from '../AskCopilotButton'\nimport styles from './CopilotCodeLinesMenu.module.css'\n\nconst DROPDOWN_BUTTON_ID = 'code-line-dropdown-copilot-button'\n\nexport default function CopilotCodeLinesMenu({\n  copilotAccessAllowed,\n  messageReference,\n  hideDropdown,\n  id,\n}: {\n  copilotAccessAllowed: boolean\n  messageReference: CopilotChatReference\n  hideDropdown?: boolean\n  id?: string\n}) {\n  const [open, setOpen] = useState(false)\n  const suggestIcebreakerEnabled = useFeatureFlag('copilot_smell_icebreaker_ux')\n\n  const handleExplain = () => {\n    publishOpenCopilotChat({\n      content: 'Explain',\n      intent: CopilotChatIntents.explain,\n      references: [messageReference],\n      id: DROPDOWN_BUTTON_ID,\n    })\n    setOpen(false)\n  }\n\n  const handleSuggest = () => {\n    publishOpenCopilotChat({\n      content: 'Suggest improvements to this code.',\n      intent: CopilotChatIntents.suggest,\n      references: [messageReference],\n      id: DROPDOWN_BUTTON_ID,\n    })\n    setOpen(false)\n  }\n\n  const handleAskAbout = useCallback(() => {\n    publishOpenCopilotChat({\n      intent: CopilotChatIntents.conversation,\n      references: [messageReference],\n      id,\n    })\n    setOpen(false)\n  }, [id, messageReference])\n\n  const handleAddReferenceCallback = () => {\n    handleAddReference(messageReference, true, DROPDOWN_BUTTON_ID)\n    setOpen(false)\n  }\n\n  return copilotAccessAllowed ? (\n    <ButtonGroup className={hideDropdown ? 'pr-0' : ''}>\n      <AskCopilotButton\n        referenceType={messageReference.type}\n        onClick={hideDropdown ? () => handleAddReference(messageReference, true, id) : handleAskAbout}\n        id={id}\n      />\n      {hideDropdown ? undefined : (\n        <ActionMenu open={open} onOpenChange={setOpen}>\n          <ActionMenu.Button\n            // This is all hacky and I wish we could use ActionMenu.Anchor\n            // But ActionMenu.Anchor doesn't accept an ID parameter\n            // TODO: revert back to how this was before once https://github.com/primer/react/issues/4299 is fixed\n            id={DROPDOWN_BUTTON_ID}\n            trailingAction={TriangleDownIcon}\n            size=\"small\"\n            aria-label=\"Copilot menu\"\n            className={styles['menu-button']}\n          >\n            <div style={{width: 0}} />\n          </ActionMenu.Button>\n          <ActionMenu.Overlay\n            align=\"end\"\n            onKeyDown={e => {\n              // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n              if (e.key === 'Escape') {\n                e?.stopPropagation()\n                setOpen(false)\n              }\n            }}\n          >\n            <ActionList>\n              <ActionList.Item onSelect={handleExplain}>Explain</ActionList.Item>\n              {suggestIcebreakerEnabled ? (\n                <ActionList.Item onSelect={handleSuggest}>Suggest improvements</ActionList.Item>\n              ) : null}\n              <ActionList.Divider />\n              <ActionList.Item onSelect={handleAddReferenceCallback}>Attach to current thread</ActionList.Item>\n            </ActionList>\n          </ActionMenu.Overlay>\n        </ActionMenu>\n      )}\n    </ButtonGroup>\n  ) : null\n}\n\nexport const handleAddReference = (messageReference: CopilotChatReference, shouldAppend?: boolean, id?: string) => {\n  if (shouldAppend) {\n    publishAddCopilotChatReference(messageReference, true, id)\n    publishOpenCopilotChat({intent: CopilotChatIntents.conversation, id})\n  } else {\n    publishOpenCopilotChat({intent: CopilotChatIntents.conversation, references: [messageReference], id})\n  }\n}\n\ntry{ CopilotCodeLinesMenu.displayName ||= 'CopilotCodeLinesMenu' } catch {}","import {useCurrentRepository} from '@github-ui/current-repository'\nimport {CancelFeatureRequest, RequestFeature, useFeatureRequest} from '@github-ui/feature-request'\nimport {testIdProps} from '@github-ui/test-id-props'\nimport {useClickAnalytics} from '@github-ui/use-analytics'\nimport {verifiedFetch} from '@github-ui/verified-fetch'\nimport {CopilotIcon} from '@primer/octicons-react'\nimport {AnchoredOverlay, Box, Button, Heading, Link, LinkButton, PointerBox} from '@primer/react'\nimport {useCallback, useState} from 'react'\nimport {useCurrentUser} from '@github-ui/current-user'\nimport type {CopilotInfo} from '@github-ui/copilot-common-types'\n\nexport const PopoverMessage = {\n  ORG_ADMIN: `For an organization, developers writing less boilerplate code means more productivity, while learning\n  new technologies means delivering better customers solutions. Try it in Codespaces or your file editor.`,\n  ORG_MEMBER: `We noticed that you're personally paying for GitHub Copilot. Instead, ask your organization admin\n  to purchase the business version of GitHub Copilot.`,\n  STANDARD: `Spend less time creating boilerplate and repetitive code patterns, and more time building great software.\n  Try it in Codespaces or your favorite file editor.`,\n}\n\ninterface CopilotPopoverProps {\n  view: 'blame' | 'edit' | 'preview'\n  copilotInfo?: CopilotInfo\n  className?: string\n}\n\nexport const CopilotPopover = ({view, copilotInfo, className}: CopilotPopoverProps): JSX.Element | null => {\n  const {documentationUrl, notices, userAccess} = copilotInfo ?? {}\n  const {\n    business,\n    orgHasCFBAccess,\n    userHasCFIAccess,\n    userHasOrgs,\n    userIsOrgAdmin,\n    userIsOrgMember,\n    featureRequestInfo,\n  } = userAccess ?? {}\n  const {codeViewPopover: codeViewPopoverNotice} = notices ?? {}\n\n  const {sendClickAnalyticsEvent} = useClickAnalytics()\n  const currentUser = useCurrentUser()\n  const {isOrgOwned: repoIsOrgOwned, ownerLogin} = useCurrentRepository()\n  const {inProgress, requested, dismissed, dismissedAt, toggleFeatureRequest} = useFeatureRequest(featureRequestInfo)\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [popoverHidden, setPopoverHidden] = useState(false)\n  const openPopover = useCallback(() => setIsOpen(true), [setIsOpen])\n  const closePopover = useCallback(() => setIsOpen(false), [setIsOpen])\n\n  const buttonText = useCallback((): string => {\n    if (userAccess && repoIsOrgOwned) {\n      if (userIsOrgMember && !userIsOrgAdmin && (!orgHasCFBAccess || userHasCFIAccess)) {\n        return 'Your organization can pay for GitHub Copilot'\n      }\n    }\n\n    return 'Code 55% faster with GitHub Copilot'\n  }, [orgHasCFBAccess, repoIsOrgOwned, userAccess, userHasCFIAccess, userIsOrgAdmin, userIsOrgMember])\n\n  const bodyText = (): string => {\n    if (dismissed) {\n      return ''\n    }\n    if (userAccess && repoIsOrgOwned) {\n      if (userIsOrgAdmin) {\n        return PopoverMessage.ORG_ADMIN\n      } else if (userIsOrgMember && userHasCFIAccess) {\n        return PopoverMessage.ORG_MEMBER\n      }\n    }\n    return PopoverMessage.STANDARD\n  }\n\n  const dismissedMessage = (): JSX.Element | null => {\n    return (\n      <>\n        <p>Your request for Copilot Business was declined by an admin on {dismissedAt}.</p>\n        <p className={'mb-0'}>\n          <Link\n            {...testIdProps('contact-admin-link')}\n            aria-label={`Click this link to contact your admin.`}\n            target=\"_blank\"\n            href={`/orgs/${ownerLogin}/people?query=role:owner`}\n            onClick={() => sendAnalyticsClickLearnMore()}\n          >\n            Contact your admin\n          </Link>\n          {''} for more details around their decision.\n        </p>\n      </>\n    )\n  }\n\n  const FeatureRequest = (): JSX.Element | null => {\n    if (!featureRequestInfo?.showFeatureRequest) {\n      return null\n    }\n\n    return requested ? (\n      <CancelFeatureRequest inProgress={inProgress} toggleFeatureRequest={toggleFeatureRequest} />\n    ) : (\n      <RequestFeature\n        inProgress={inProgress}\n        toggleFeatureRequest={toggleFeatureRequest}\n        featureName={featureRequestInfo?.featureName}\n      />\n    )\n  }\n\n  const getUserRepoRelationship = (): string => {\n    if (currentUser && ownerLogin === currentUser.login) {\n      return 'owner'\n    } else if (userIsOrgAdmin) {\n      return 'admin'\n    } else if (userIsOrgMember) {\n      return 'member'\n    } else {\n      return 'personal'\n    }\n  }\n\n  const sendAnalyticsClickOpenPopover = (): void => {\n    if (currentUser) {\n      sendClickAnalyticsEvent({\n        category: 'copilot_popover_code_view',\n        action: `click_to_open_popover_${view}`,\n        label: `ref_cta:open_copilot_popover;owner:${ownerLogin};relationship:${getUserRepoRelationship()}`,\n      })\n    }\n  }\n\n  const sendAnalyticsClickPopoverCTA = (action: string, ctaText: string): void => {\n    sendClickAnalyticsEvent({\n      category: 'copilot_popover_code_view',\n      action,\n      label: `ref_cta:${ctaText};ref_loc:code_view_${view}`,\n    })\n  }\n\n  const sendAnalyticsDismissPopover = (): void => {\n    const refLoc = `${repoIsOrgOwned ? 'org_' : ''}code_view_${view}${userIsOrgAdmin ? '_org_admin' : ''}`\n\n    sendClickAnalyticsEvent({\n      category: 'copilot_popover_code_view',\n      action: `click_to_dismiss_copilot_popover_forever`,\n      label: `ref_cta:dont_show_again;ref_loc:${refLoc}`,\n    })\n  }\n\n  const sendAnalyticsClickLearnMore = (): void => {\n    const isCFBDocs = userAccess?.userHasOrgs ?? false\n\n    sendClickAnalyticsEvent({\n      category: 'copilot_popover_code_view',\n      action: `click_to_go_to_copilot_for_${isCFBDocs ? 'business' : 'individuals'}_info`,\n      label: 'ref_cta:learn_more;ref_loc:code_view',\n    })\n  }\n\n  const bodyCTA = (): JSX.Element | null => {\n    const userCFBSeat = !!business\n    const userHasAnyCopilotAccess = userCFBSeat || userHasCFIAccess\n\n    if (!userHasAnyCopilotAccess && (!repoIsOrgOwned || (repoIsOrgOwned && !userIsOrgMember))) {\n      return userHasOrgs ? (\n        <LinkButton\n          type=\"button\"\n          href=\"/settings/copilot\"\n          onClick={() => sendAnalyticsClickPopoverCTA('click_to_go_to_copilot_settings', 'get_github_copilot')}\n        >\n          Get GitHub Copilot\n        </LinkButton>\n      ) : (\n        <LinkButton\n          type=\"button\"\n          href=\"/github-copilot/signup\"\n          onClick={() => sendAnalyticsClickPopoverCTA('click_to_go_to_copilot_trial_signup', 'start_a_free_trial')}\n        >\n          Start a free trial\n        </LinkButton>\n      )\n    }\n\n    if (userIsOrgMember && !orgHasCFBAccess) {\n      if (userIsOrgAdmin) {\n        return (\n          <LinkButton\n            type=\"button\"\n            href={`/github-copilot/business_signup/organization/payment?org=${ownerLogin}`}\n            onClick={() => sendAnalyticsClickPopoverCTA('click_to_buy_copilot_for_business', 'get_github_copilot')}\n          >\n            Get GitHub Copilot\n          </LinkButton>\n        )\n      }\n    }\n\n    if (featureRequestInfo && !dismissed) {\n      return <FeatureRequest />\n    }\n\n    return null\n  }\n\n  const onDismissPopover = (): void => {\n    if (codeViewPopoverNotice) {\n      verifiedFetch(codeViewPopoverNotice.dismissPath, {method: userIsOrgMember ? 'DELETE' : 'POST'})\n      sendAnalyticsDismissPopover()\n      setPopoverHidden(true)\n    }\n  }\n\n  const learnMoreLink = (): JSX.Element => {\n    return (\n      <Link\n        {...testIdProps('copilot-popover-content-learn-more')}\n        aria-label={`Click this link to learn more about copilot. This action opens in a new tab.`}\n        target=\"_blank\"\n        href={documentationUrl}\n        onClick={() => sendAnalyticsClickLearnMore()}\n        sx={{marginLeft: '8px'}}\n      >\n        Learn more\n      </Link>\n    )\n  }\n\n  const hideCopilotPopover = (): boolean => popoverHidden || !copilotInfo\n\n  if (hideCopilotPopover()) {\n    return null\n  }\n  return (\n    <div className={className}>\n      <AnchoredOverlay\n        onOpen={openPopover}\n        onClose={closePopover}\n        open={isOpen}\n        overlayProps={{\n          role: 'dialog',\n          sx: {overflow: 'inherit'},\n        }}\n        focusZoneSettings={{disabled: true}}\n        renderAnchor={anchorProps => (\n          <Button\n            {...anchorProps}\n            {...testIdProps('copilot-popover-button')}\n            leadingVisual={CopilotIcon}\n            onClick={() => {\n              setIsOpen(!isOpen)\n              sendAnalyticsClickOpenPopover()\n            }}\n            size=\"small\"\n            sx={{\n              color: 'fg.default',\n              display: ['none', 'none', 'none', 'none', 'block'],\n            }}\n            variant=\"invisible\"\n          >\n            {buttonText()}\n          </Button>\n        )}\n      >\n        <PointerBox\n          {...testIdProps('copilot-popover-content')}\n          caret=\"top\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            fontSize: 1,\n            justifyContent: 'space-between',\n            padding: 4,\n            width: '350px',\n          }}\n        >\n          <Heading as=\"h2\" sx={{fontSize: 1, fontWeight: 'bold', pb: 3}}>\n            Code 55% faster with GitHub Copilot\n          </Heading>\n          <Box sx={{fontSize: 1, fontWeight: 'normal', pb: 3}}>\n            <span {...testIdProps('copilot-popover-body-text')}>{bodyText()}</span>\n            {dismissed ? dismissedMessage() : learnMoreLink()}\n          </Box>\n          <Box sx={{alignItems: 'center', display: 'flex', flexDirection: 'row'}}>\n            {bodyCTA()}\n            <Link\n              {...testIdProps('copilot-popover-dismiss-button')}\n              onClick={onDismissPopover}\n              sx={{\n                cursor: 'pointer',\n                fontSize: 1,\n                textDecorationLine: 'none',\n                marginLeft: dismissed ? 0 : '16px',\n              }}\n            >\n              Don&apos;t show again\n            </Link>\n          </Box>\n        </PointerBox>\n      </AnchoredOverlay>\n    </div>\n  )\n}\n\ntry{ CopilotPopover.displayName ||= 'CopilotPopover' } catch {}\ntry{ FeatureRequest.displayName ||= 'FeatureRequest' } catch {}"],"names":["parseBlobRange","str","lines","match","length","offset","parseBlobOffset","Object","freeze","start","end","startOffset","endOffset","ascendingBlobRange","formatBlobRange","blobRange","column","line","parseFileAnchor","anchorPrefix","parseAnchorPrefix","formatBlobRangeAnchor","lineMatch","columnMatch","parseInt","DOMRangeFromBlob","getLineElement","startContainer","_startOffset","findRangeOffset","endContainer","_endOffset","childNodes","ownerDocument","range","createRange","setStart","setEnd","lookAhead","error","lineElement","textNodes","getAllTextNodes","el","nodeType","Node","TEXT_NODE","list","node","concat","i","textNode","nextC","textContent","nextTextNode","offsets","sort","compareBlobOffsets","a","b","copyText","text","navigator","clipboard","writeText","body","document","Promise","reject","createNode","createElement","style","width","height","position","top","appendChild","copyNode","selection","getSelection","removeAllRanges","selectNodeContents","addRange","execCommand","resolve","removeChild","BlameSegmentContent","StickyReposHeaderBreadcrumb","GoToTopButton","TreeOverflowMenu","App","children","payload","useRoutePayload","repo","React","user","currentUser","metadata","useMemo","useEffect","footer","querySelector","classList","replace","remove","meta","data-hydrostats","ScreenSizeProvider","initialValue","ScreenSize","xxxlarge","AnalyticsProvider","appName","category","CurrentUserProvider","CurrentRepositoryProvider","repository","CodeViewOptionsProvider","FocusHintContextProvider","displayName","SymbolIndicator","symbolKind","showFullSymbol","Box","sx","display","flexDirection","mr","backgroundColor","plColor","opacity","borderRadius","alignItems","color","fontWeight","fontSize","px","py","mt","fullName","shortName","CodeNavSymbolTree","treeSymbols","onTreeSymbolSelect","isFlatTree","some","isParent","id","mb","overflowY","maxHeight","pl","pb","pt","TreeView","aria-label","flat","map","s","idx","CodeNavTreeItem","symbol","name","depth","onSelect","CodeNavTreeContent","kind","Truncate","title","maxWidth","span","isExpanded","setIsExpanded","useState","Item","expanded","onExpandedChange","SubTree","childSymbol","index","JumpToItem","filterText","focused","ActionList","role","aria-selected","minWidth","Link","href","textDecoration","div","HighlightedText","search","overflowWidth","hideOverflow","fullyQualifiedName","JumpToItemList","props","FullJumpToItemList","codeSymbols","focusedIndex","codeSymbolsLength","useRef","codeSymbolMessageAriaHack","containerRef","useFocusZone","bindKeys","FocusKeys","ArrowVertical","HomeAndEnd","current","codeSymbolText","announce","ref","aria-orientation","sym","lineNumber","SymbolZeroState","isFindInFile","message","setMessage","useCurrentRepository","firstUpdate","justifyContent","bg","p","textAlign","Heading","as","marginBottom","inline","Octicon","icon","SearchIcon","size","Text","aria-relevant","br","codeNavSearchPath","owner","ownerLogin","searchTerm","codeNavGeneralSearchPath","symbolsHeaderId","CodeNavSymbolNavigation","onSymbolSelect","autoFocusSearch","onClose","setFilterText","filteredCodeSymbols","setFilteredCodeSymbols","getFilteredCodeSymbols","fuzzyQuery","filterSort","score","fuzzyScore","r","compare","JumpToActionList","hasCodeSymbols","hasLocalCodeSymbols","hasAnySymbols","setFocusedIndex","sendRepoKeyDownEvent","useReposAnalytics","filterSymbolsRef","listIsFilteredOrEmpty","focus","useFocusSymbolPane","debouncedSendStats","debounce","aria-labelledby","order","tabIndex","IconButton","unsafeDisableTooltip","data-hotkey","XIcon","onClick","variant","TextInput","block","leadingVisual","aria-hidden","FilterIcon","trailingAction","Action","XCircleFillIcon","data-testid","trailingVisual","undefined","AllShortcutsEnabled","kbd","placeholder","value","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant","onKeyDown","e","key","ctrlKey","Math","min","max","onChange","target","ml","findInFileWorkerJob","data","query","currentCodeReferences","ranges","searchInBlobIncrementally","textMatchable","searchInBlobContent","useUpdatePanelExpandPreferences","treeValue","symbolsValue","lineWrapValue","formData","FormData","set","verifiedFetch","method","headers","Accept","FindInFileOpenContext","createContext","findInFileOpen","setFindInFileOpen","FindInFileOpenProvider","setSearchTerm","isBlame","cursorEnabled","useIsCursorEnabled","lastSearchTerm","setRawFindInFileOpen","useCallback","open","contextValue","Provider","useFindInFileOpen","useContext","useBlobRendererType","useCurrentBlob","blame","useCurrentBlame","renderedFileInfo","shortPath","renderImageOrRaw","image","csv","richText","issueTemplate","structured","valid","discussionTemplate","isPlain","assertNever","x","BlobDisplayType","MarkdownContent","markdownContainer","SharedMarkdownContent","SelectAllShortcutButton","SplitCodeownersErrorsContext","blameAgeProportionBreakpoints","Number","MAX_VALUE","rawColors","BlameLines","BlameLinesWithRef","BlameLinesSSR","copilotAccessAllowed","linesData","tabSize","onLineNumberClick","parentRef","blameSegments","extractBlameSegments","className","data-hpc","segment","BlameSegment","materializeAllLines","screenSize","useScreenSize","useImperativeHandle","scrollToTop","isLineInViewport","virtualizer","scrollToIndex","align","scrollToLine","estimateSize","window","innerWidth","medium","useVirtualWindow","overscan","MAX_SAFE_INTEGER","virtualItems","virtualItem","virtualOffset","isolation","totalSize","large","commit","transform","BlameForRange","lineData","LineNumber","codeLineData","rawText","substring","CodeLine","stylingDirectivesLine","shouldUseInert","segments","isFirst","values","find","commits","commitOid","push","BlameForRangeUnmemoized","commitDate","Date","committedDate","repoCreationDate","createdAt","timestampAgoElement","RelativeTime","date","tense","whiteSpace","BlameAgeIndicator","authorAvatarUrl","GitHubAvatar","src","verticalAlign","flexGrow","SafeHTMLText","html","shortMessageHtmlLink","overflowX","textOverflow","data-hovercard-url","commitHovercardPath","commitish","oid","alignContent","justifySelf","pr","ReblameButton","reblamePath","blamePath","firstParentOid","filePath","longDateFormatter","Intl","DateTimeFormat","year","month","day","shortSHA","slice","formattedDate","format","blameLabel","reblameId","Tooltip","type","to","VersionsIcon","useBlameAgeColor","resolvedColorScheme","useTheme","isDark","startsWith","defaultColor","now","timeRange","getTime","proportion","commitAge","breakpoint","CodeLinesSSR","CodeLinesSSRUnmemoized","codeSections","codeLineToSectionMap","onLineStickOrUnstick","contentWidth","onCollapseToggle","wrapOptionEnabled","useCodeViewOptions","codeWrappingOption","enabled","rawBlobUrl","data-tab-size","data-paste-markdown-skip","overflow","pointerEvents","ownedCodeSections","codeLineClassName","setIsCollapsed","measureRef","CodeLinesSSRNoVirtualization","CodeLinesSSRNoVirtualizationUnmemoized","nonTruncatedLinesData","colorizedLines","lineArrayMap","Array","floor","numberOfLinesPerContentVisibility","keys","zIndex","segmentCount","tempLines","LineNumberNoVirtualziation","HighlightedSymbolsOverlay","HighlightedLinesOverlay","SyntaxHighlightedOverlay","NavigationCursor","onCodeNavTokenSelected","isCursorVisible","isVirtualized","textAreaRef","shouldRenderOverlay","optionalTestLeftOffsetFunction","textSelection","optionalTestTopOffsetFunction","additionalTextAreaInstructions","editorLinkHash","leftOffset","setLeftOffset","topOffset","setTopOffset","shouldShowHighlightMenu","setShouldShowHighlightMenu","lastKeyPressed","menuRef","refInfo","path","useFilesPageInfo","cursorNavigationHighlightLine","expandAndFocusLineContextMenu","cursorNavigationEnter","searchShortcut","cursorNavigationPageDown","cursorNavigationPageUp","useShortcut","location","useLocation","keydownKeyChecking","event","oncontextmenu","button","activeElement","indexOf","firstOptionId","preventDefault","stopPropagation","addEventListener","removeEventListener","minLeftOffset","minLeftOffsetBlame","minLeftOffsetBlob","cursorRef","onEnter","updateUrlForLineNumber","onPageUp","onPageDown","currentStartLine","currentStartChar","currentEndLine","currentEndChar","determineAndSetTextAreaCursorPosition","getCorrectLineNumberWithCollapsedSections","useCursorNavigation","isMobile","test","userAgent","lineHeight","useCurrentLineHeight","cursorSx","visibility","left","canEdit","editBlobPath","hash","HighlightedLineMenu","rowBeginId","rowBeginNumber","rowEndNumber","rowEndId","openOnLoad","determineClosestParentCodeSection","currentLineData","isStartLine","lineCodeSections","split","closestParentCodeSection","trim","isNaN","getActualLineNumberBinarySearch","onMenuClose","wasExpandCollapseCodeSection","setTimeout","hidden","hotkey","data-hotkey-scope","textAreaId","setAnchor","DuplicateOnKeydownButton","buttonFocusId","buttonHotkey","onButtonClick","appendAndFocusSearchBar","retainScrollPosition","returnTarget","onlyAddHotkeyScopeButton","TextAreaHelpDialog","onDismiss","createPortal","Dialog","TextArea","setTextOverlayShouldBeVisible","setTextSelection","setAdditionalTextAreaInstructions","cursorClickStartRef","plainTextLinesAsString","numLines","setIsTextAreaFocused","shouldUseCursor","wrapOption","blobFocusShortcuts","useBlobFocusedShortcuts","blobFocusModifierShortcuts","useBlobFocusedModifierShortcuts","helpDialogOpen","setHelpDialogOpen","cursorNavigationOpenHelpDialog","theme","textarea","onMouseUp","mouseUpHandler","defaultPrevented","isSmallScreen","getCurrentSize","scrollTopOffset","getBoundingClientRect","scrollY","pageY","clientHeight","startX","startY","lineNumberOfClick","calculateLineNumberFromOffset","leftClickOffset","xOffset","clientX","displayAtStart","selectionStart","selectionEnd","keyboard","displayStart","onMouseDown","mouseDownHandler","aria-readonly","inputMode","aria-multiline","aria-haspopup","data-gramm","data-gramm_editor","data-enable-grammarly","resize","marginTop","paddingLeft","paddingRight","scrollRightOffset","boxSizing","border","outline","overflowWrap","overscrollBehaviorX","includes","getModifierState","shiftKey","altKey","metaKey","exactRegexMatch","regex","exec","spellCheck","autoCorrect","autoCapitalize","autoComplete","data-ms-editor","onDrop","dataTransfer","getData","url","URL","onPaste","endsWith","onFocus","safeLocalStorage","safeStorage","CodeBlob","blobLinesHandle","validCodeNav","searchResults","focusedSearchResult","rawLines","stylingDirectives","hasBlame","shouldMaterializeAllLines","setShouldMaterializeAllLines","highlightedLines","setHighlightedLines","isTextAreaFocused","textOverlayShouldBeVisible","setContentWidth","isSSR","useClientValue","cursorContainerRef","wordWrapEnabled","updateExpandPreferences","reRender","useManualRender","currentLineRefMap","useLineElementMap","useCodeLines","splitCodeownersErrors","useLinesData","linesToRender","lineNumbers","fill","_","ownedSection","isEndLine","section","get","startLine","endLine","codeSectionArray","buildRowClass","bidi","hasBidiCharacters","codeownersLineError","exposeBIDICharacters","isBidiShown","collapsedLinesDependancy","useLinesSubscription","collapsedSections","createCollapsedLinesString","collapsedLines","setArray","join","getLinesDataWithCollapsedSectionsExcluded","fullLinesData","excludedLines","Set","has","sections","j","collapsed","k","add","filter","showBidiCharactersRaw","doOverlay","useShouldDoNoVirtualization","linesRef","expandAllRows","currentOid","onbeforeprint","onafterprint","getItem","forceAnnouncementToScreenReaders","setItem","useSymbolUnderPointer","onSymbolChanged","timer","debouncedMouseMove","clearTimeout","handleMouseMove","matchFromPoint","regexp","y","caretPositionFromPoint","caret","offsetNode","caretRangeFromPoint","findNearestMatch","m","lastIndex","reportError","len","matchedRange","clientY","rangeElement","commonAncestorContainer","parentElement","toString","getRowColumnNode","prev","previousSibling","parent","contains","getAttribute","symbolUnderPointer","element","hasAttribute","setAttribute","selectedText","scrollSelectedLineIntoView","lineAccountingForCollapsedSections","sectionArray","expandRow","updatedLineAccountingForCollapsedSections","applyStickyToParentStartLines","anchInfo","currentTextArea","scrollWidth","clientWidth","observer","ResizeObserver","entries","observe","disconnect","useScrollLineIntoView","SearchResultsProvider","HighlightedLinesProvider","BidiAlert","flex","HighlightedLineMenuContainer","CopilotButtonContainer","onBlur","currentTarget","relatedTarget","CodeLinesNoVirtualization","CodeLines","ImageBlob","displayUrl","alt","YamlTemplateContent","borderBottomLeftRadius","borderBottomRightRadius","thead","tr","MarkdownTableCell","header","projects","tbody","about","labels","assignees","inputs","input","TemplateInput","MarkdownInput","DropdownInput","InputInput","TextareaInput","CheckboxesInput","SafeHTMLBox","options","required","unshift","buttonText","multiple","InputWrapper","ActionMenu","Button","Overlay","selectionVariant","option","selected","disabled","Textarea","render","fontFamily","checkboxes","CheckboxGroup","my","Label","label","description","Caption","checkbox","FormControl","Checkbox","YamlTemplateType","CSVBlob","lazy","FileRendererBlob","BlobContent","setOpenPanel","codeNavInfo","findInFileShortcut","blobRendererType","isRenderingCode","Code","findInFileHotkey","extraSx","CSV","Markdown","markdownSx","borderWidth","Blob","lineToSectionMap","buttonTestLabel","displayType","TooLargeError","Suspense","fallback","LoadingFallback","FileRenderer","identityUuid","identityUUID","renderFileType","Image","IssueTemplate","Issue","Discussion","useAlertTooltip","contentRef","portalTooltipProps","clearMessage","newMessage","AlertTooltip","PortalTooltip","onMouseLeave","aria-live","AccessibleIconButton","ariaDisabledProps","ScrollMarks","FindInFilePopover","stickied","setFocusedSearchResult","inputContainer","findSelectionShortcut","findNextShortcut","findPrevShortcut","escapeToBrowserOnNextKeyPress","setEscapeToBrowserOnNextKeyPress","clearSearch","jumpToResult","direction","select","onHotkey","scrollLineIntoView","ident","borderBottom","boxShadow","validationStatus","ChevronUpIcon","ChevronDownIcon","keyboardEvent","code","definitionsOrReferences","ContributorAvatars","showTitle","sendRepoClickEvent","isDialogOpen","setDialogOpen","contributors","loading","useContributors","ContributorsError","SkeletonText","users","totalCount","countTitle","getCountWithUnit","AvatarStack","primaryAvatarUrl","login","userHovercardPath","PrimerLink","PeopleIcon","mx","CounterLabel","renderBody","ContributorRow","muted","profileLink","TrailingVisual","commitsPathByAuthor","branch","author","commitsCount","count","singular","plural","AlertFillIcon","ReposHeaderBreadcrumb","fileNameId","showCopyPathButton","action","Breadcrumb","isFolder","FileNameStickyHeader","isStickied","showTree","treeToggleElement","ArrowUpIcon","scrollTo","behavior","borderLeft","borderRight","ReposHeaderRefSelector","buttonClassName","BlameAgeLegend","colors","useBlameAgeColors","gap","BlobTabButtons","headerInfo","isCSV","isRichtext","viewable","urlParams","useSearchParams","isOnlyPreviewable","isPreviewable","plainParams","getUrl","useUrlCreator","initialSelectedTab","selectedTab","setSelectedTab","useLayoutEffect","navigate","useNavigate","viewCodeShortcut","viewPreviewShortcut","viewBlameShortcut","handleSegmentChange","selectedTabIndex","params","defaultButtons","SegmentedControl","previewButton","invisibleFocusButtons","startTransition","buttons","CodeSizeDetails","codeownerInfo","useDeferredMetadata","helpUrl","useReposAppPayload","blobSize","isGitLfs","lineInfo","truncatedLoc","truncatedSloc","mode","symlinkUrl","getSymlinkUrl","currentPath","blobPath","textTransform","CodeOwnersBadge","QuestionIcon","codeownerPath","ownedByCurrentUser","ownersForFile","ruleForPathLine","tooltipAriaLabel","wrap","ShieldLockIcon","OpenWithActionItems","editEnabled","githubDevUrl","ghDesktopPath","onBranch","isMacOrWindows","useIsPlatform","openWithGitHubDevShortcut","Group","GroupHeading","LinkItem","useHasOpenWithItems","EditMenuActionItems","editAllowed","hasOpenWithItem","aria-keyshortcuts","Divider","KeyboardVisual","shortcut","keyValue","Fragment","useWorkflowRedirectUrl","blobPayload","workflowRedirectUrl","GoToLineDialog","onBlamePage","maxLineNumber","startLineNum","useCursorStartLineNumber","endLineNum","useCursorEndLineNumber","changeDescribeBy","setChangeDescribeBy","secondLineNumber","inputBoxRef","handleGoToLine","newHash","isOpen","Header","aria-invalid","aria-describedby","handleInputChange","inputValue","isValid","intValue","numberToGoTo","firstLine","secondLine","firstIntValue","secondIntvalue","LinkButton","linkButtonSx","DeleteDirectoryItem","repositoryTreePath","Anchor","KebabHorizontalIcon","WebCommitDialog","DeleteHeaderButtons","webCommitInfo","isBlob","webCommitDialogState","setWebCommitDialogState","returnFocusRef","cancelUrl","shouldFork","shouldUpdate","lockedOnMigration","flexWrap","commitChangesOpen","isNewFile","isDelete","ownerName","dialogState","setDialogState","refName","placeholderMessage","SettingsMenuItems","symbolsEnabled","codeFoldingOption","codeCenterOption","openSymbolsOption","OptionsElement","setPrefs","setEnabled","String","codeWrappingName","LeadingVisual","CheckIcon","CodeViewHeader","onFindFilesShortcut","alignSelf","idEnding","PageActions","narrow","onCopy","useCopyRawBlobContents","findFileWorkerPath","openWithGitHubDevInNewWindowShortcut","inputRef","goToFileInput","FileResultsList","searchBoxRef","config","useOverlay","FindFilesShortcut","minHeight","isBlobPayload","CurrentBlobProvider","blob","ViewRunsButton","NavigationMenu","isTreePayload","ScreenReaderHeading","AddFileDropdownButton","isDeletePayload","deleteInfo","addToast","useToastContext","createPermalink","copyFilePathShortcut","copyPermalinkShortcut","moreOptionsButtonRef","updateMessage","portalTooltip","absolute","onOpenChange","anchorRef","PlusIcon","UploadIcon","CopyPathsActionItems","updateTooltipMessage","redirectUrl","CopilotMenuItems","fileReference","handleAddReference","RawMenuActionItems","all","downloadRawContentShortcut","downloadFileCallback","downloadFile","CopyActionItem","RawActionItem","rawHref","result","fetch","aElement","createObjectURL","click","revokeObjectURL","copyRawContentShortcut","ariaLabel","getCopyStateUI","viewRawContentShortcut","refType","isGoToLineDialogOpen","setGoToLineDialogOpen","URLSearchParams","shouldDisplayGoToLine","deleteTooltip","siteNavLoginPath","useCurrentUser","blameUrl","goToLineShortcut","alternativeGoToLineShortcut","moreButtonRef","clearTooltipMessage","blobUrl","fileUrl","origin","repoID","repoOwner","repoName","qualifyRef","commitOID","BlameButton","ariaKeyShortcuts","DeleteActionItem","loggedIn","getElementById","useLinkClickHandler","borderTopLeftRadius","padding","TableOfContents","toc","openPanel","isDirectoryReadme","showToc","ListUnorderedIcon","aria-pressed","StickyLinesHeader","currentStickyLines","stickyLines","from","marginLeft","stickyLine","SafeHTMLDiv","BlobViewHeader","searchingText","stickyHeaderRef","copilotInfo","useStickyObserver","stickyHeaderHeight","useStickyHeaderHeight","rawActionsButtonRef","trackStickyHeader","CopilotPopover","view","KeyboardShortcut","onActivate","CopilotChatButton","messageReference","hideDropdown","RawGroup","fileName","EditMenu","SymbolsButton","isCodeNavOpen","setCodeNavOpen","localStorage","flexShrink","borderColor","borderTop","background","tableLayout","editFileShortcut","editTooltip","pathname","ButtonGroup","PencilIcon","borderTopRightRadius","borderRightWidth","TriangleDownIcon","isLfs","copyButtonRef","downloadRawFile","copyFile","lfsDownloadUrl","ssrSafeLocation","searchParams","downloadButtonProps","DownloadIcon","download","CopyIcon","onMouseEnter","data-turbo","content","toggleSymbolsShortcut","shouldShowIndicator","CodeSquareIcon","setKeyboardNavUsed","emptyResults","definitions","localReferences","crossReferences","CodeNavCell","reference","isHighlighted","ariaLevel","focusElement","offsetWidth","setOffsetWidth","codeHtml","useCodeHTML","highlightedText","bodyText","gridArea","gridTemplateAreas","ev","aria-current","aria-level","focusSibling","HighlightedOverlay","symbols","isNotUsingWhitespace","getOffsetString","canFitLength","TOTAL_ALLOWED_CHARS","substringBeforeMatch","substringAfterMatch","trimEnd","wordsOffset","fit","word","pop","whitespaceOffset","elementSibling","treeItem","CodeNavFileInformation","results","highlightedIndex","isDefinition","initiallyExpanded","enableExpandCollapse","setFocusOnFile","currentRepo","firstFileRef","showAllRefs","setShowAllRefs","keyboardNavUsed","useKeyboardNavUsed","initialVisibleRefs","hiddenRefs","isFromCurrentRepo","MaxReferences","groupId","cursor","square","ownerAvatar","ChevronRightIcon","FoldIcon","UnfoldIcon","CodeNavInfoPanelData","references","pathGrouped","grouped","def","pathKey","info","CodeNavSymbolDetails","onBackToSymbol","isLoading","setSearchResults","defsResponse","localRefsResponse","crossRefsResponse","useCodeNav","row","setResults","setLoading","getDefinitionsAndReferences","defs","localRefs","crossRefs","setHighlightedIndex","showAllCrossRefs","setShowAllCrossRefs","startReferenceIndex","allReferencesCount","nav","currentSymbol","crossRefFiles","v","shownReferences","backToSymbolsRef","language","languageID","languageName","codeNavDefinitions","d","extent","getRefName","codeNavReferences","c","dispatchEvent","SymbolChangedEvent","focusSymbolSearch","onHighlight","currentRef","newIndex","highlightedSymbol","aria-roledescription","ArrowLeftIcon","CodeNavSymbolDefinitionHeader","Spinner","CodeNavSymbolSectionHeader","headerText","searchType","backend","float","fullSymbolText","symbolSegments","segmentNames","isSeparator","foundDefinitions","getLocalDefinitions","foundSymbol","symbolColor","trimStart","symbolSx","CodeNavInfoPanel","showCodeNavWithSymbol","onClear","setShowSymbolTree","showSymbolTree","symbolTree","PanelContent","PanelContentUnmemoized","innerProps","isNarrow","setIsNarrow","InnerPanelContent","renderHeader","stickySx","isCodeNavLoading","setSearchingText","Panel","TableOfContentsPanel","BlobViewContent","symbolsExpanded","setValidCodeNav","useStickyHeaderSx","setAutoFocusSearch","useOpenPanel","codeLinesHandle","shouldOpenPanel","focusSearch","isFirstRender","scrollEventListenerFunction","setStickyLines","openCodeNav","useStickyLines","setCurrentStickyLines","Map","removeStickyLine","modifiedLines","clear","delete","otherStickyLineNumber","otherStickyLine","showCodeNavForToken","useCodeNavigation","onCodeNavActivated","setCodeNavLoading","CodeNavigationInfo","blobLines","stylingDirective","directive","isSymbol","getSymbolOnLine","codeNavData","searchStatus","useInFileSearchResults","findInFileWorkerPath","setSearchStatus","workerManagerRef","DebouncedWorkerManager","WebWorker","req","searchTermRef","terminate","lastCodeNavInfo","onResponse","createReferences","post","canDoIncrementalSearch","hasRenderedWithNoOpenPanel","showPanel","actualOpenPanel","sendEvent","reduce","total","humanLength","CurrentBlameProvider","CurrentLineRefMapProvider","FindSymbolShortcut","LatestCommitSingleLine","stickyHeaderId","findSymbolShortcut","BlameBanners","BlameErrorBanner","IgnoreRevsBanner","shouldDisplay","setShouldDisplay","ignoreRefsInfo","ignoreRevs","blameErrorType","errorType","Flash","InfoIcon","BlameErrorText","renderIgnoreRefsLink","present","ignoreRefsLink","timedOut","DiscussionTemplateBanner","errors","errorMessageLinkText","AlertIcon","strong","link","IssueTemplateBanner","flashType","showIssueFormWarning","isValidLegacyIssueTemplate","isLoggedIn","LegacyIssueTemplateBanner","BlobLowerBanners","csvError","isCodeownersFile","publishBannersInfo","showPublishActionBanner","releasePath","dismissActionNoticePath","setSplitCodeownersErrors","codeownersValidationState","setCodeownersValidationState","CodeOwnerValidationState","LOADING","counterRef","loadCodeownersErrors","currentVal","fetchCodeownersValidity","ok","json","splitCodeownersError","VALIDATED","ERROR","PublishBanners","TruncatedBanner","CodeownerFileBanner","state","CSVErrorBanner","truncated","SpoofedCommitWarning","latestCommit","useLatestCommit","isSpoofed","BlobLicenseBanner","license","iconMap","permissions","limitations","conditions","borderStyle","gridTemplateColumns","LawIcon","toLowerCase","h3","rules","group","charAt","toUpperCase","rule","tag","InvalidCitationWarning","citationHelpUrl","OverridingGlobalFundingFileWarning","globalPreferredFundingPath","BlobMidBanners","topBannersInfo","overridingGlobalFundingFile","showInvalidCitationWarning","showLicenseMeta","DependabotConfigurationBanner","defaultBranch","dependabotInfo","showConfigurationBanner","isDefaultBranch","DefaultBranchDependabotConfigurationBanner","DirectionsForNonDefaultBranch","configFilePath","networkDependabotPath","dismissConfigurationNoticePath","configurationNoticeDismissed","dismissNotice","PointerBox","defaultBranchPath","h5","OrgOnboardingTip","mediaUrl","mediaPreviewSrc","iconSvg","taskTitle","taskPath","org","SuggestIcon","Breadcrumbs","ownerPath","Media","Bubble","bottom","right","ssrSafeWindow","xlarge","img","ActionsOnboardingPrompt","rel","repositoryPath","FileIcon","PlanSupportBanner","feature","featureName","repoIsFork","repoOwnedByCurrentUser","requestFullPath","showFreeOrgGatedFeatureMessage","showPlanSupportBanner","upgradeDataAttributes","upgradePath","dataAttributes","UpgradeButton","individual","data-ga-click","BlobTopBanners","planSupportInfo","actionsOnboardingTip","orgName","CodeViewBanners","TreeBanners","tree","BlobBanners","CurrentTreeProvider","TruncatedTreeBanner","CodeViewContextBanners","items","useCurrentTree","omittedCount","toLocaleString","banners","useCodeViewBanners","messageToAnnounce","DiffEntry","diff","setCollapsed","showDiff","setShowDiff","diffLoaded","setDiffLoaded","squares","deletions","diffHTML","DiffSquares","underline","CopyToClipboardButton","textToCopy","include-fragment","loadDiffPath","onLoad","DiffPlaceholderSvg","viewBox","xmlns","clipPath","fillRule","DeleteViewContent","EditIssues","binary","DiffPlaceholder","forkedRepo","EditingForkBanner","forkName","forkOwner","diffs","DirectoryReadmePreview","readme","errorMessage","readmePath","EditButton","editPath","DirectoryRichtextContent","FolderViewHeader","headerRef","stickyHeaderSx","FileTreeViewContent","showBranchInfobar","ErrorBoundary","BranchInfoBarErrorBanner","BranchInfoBar","DirectoryContent","BlobEditor","CodeView","initialPayload","useFilePagePayload","useCanonicalObject","isEdit","isEditPayload","isBlamePayload","setContentRef","deferredMetadata","useLoadDeferredMetadata","httpStatus","deferredAST","useLoadDeferredAST","treeRef","contentFocused","textAreaFocused","contentFocusTarget","treeFocusTarget","reposFileTreeId","openPanelRef","toggleFocusedPaneShortcut","setUserContentScrolling","useHideFooter","fileTree","extractFileTree","updatePanelExpandPreferences","updateTreeExpandedPreference","isTreeExpanded","collapseTree","expandTree","treeToggleRef","useTreePane","treeExpanded","onTreeItemSelected","codeViewHeader","scrollIntoView","editInfo","DeferredMetadataProvider","DeferredASTProvider","FilesPageInfoProvider","AllShortcutsEnabledProvider","allShortcutsEnabled","FileTreeControlProvider","PermalinkShortcut","FileQueryProvider","OpenPanelProvider","SplitPageLayout","ReposFileTreePane","isFilePath","onItemSelected","processingTime","fileTreeProcessingTime","foldersToFetch","headerContent","Content","marginRight","data-selector","CodeViewBannersProvider","CodeViewError","ScrollMarksContainer","toggleFocus","symbolsPaneElement","textAreaElement","focusTarget","urlCreator","permalinkShortcut","isCurrentPagePermalink","permalink","history","pushState","registerReactAppFactory","routes","jsonRoute","Component","shouldNavigateOnError","useCodeLineIntersectionObservers","canDoStickyLines","numParents","observedElementRef","addValueToMap","useAddValueToLineElementMap","ssrSafeDocument","getValueFromMap","useGetValueFromLineElementMap","previousY","previousRatio","endObserver","IntersectionObserver","isIntersecting","intersectionRatio","currentY","currentRatio","endObserverLogic","startLineArray","lineIsAboveBottomOfScreen","innerHeight","lineIsBelowTopOfScreen","lineIsCloseToTopOfScreen","lineIsOnScreen","isNotNearBottomOfScreen","root","rootMargin","threshold","startObserver","startObserverLogic","lineIsNotDisplayed","initialObsValue","hasBeenDisconnected","hasBeenObserved","refObserverCallback","isFirefox","blobPromise","fetchContent","isClipboardSupported","write","ClipboardItem","CopyState","Error","Success","lineContainerID","defaultLineHeight","setLineHeight","previousLineHeight","fileNameText","resizeObserver","detectedLineHeight","getElementsByClassName","firstChild","charWidthMac","startLineNumber","ObservableValue","startCharacterNumber","endLineNumber","endCharacterNumber","useObservedState","useCursorSelectionRef","updateRef","useSubscription","currentDisplayLine","currentDisplayChar","parentElementRef","currentMaxRightChar","currentTextAreaSelectionStart","numLinesToHopOnPageUpDown","currentTextAreaSelectionEnd","charWidth","isWindows","lineRowHeight","useDeferredAST","characterCountByLine","charCountByLine","setLeftOffsetWithCursorLocationUpdate","offsetCharacter","setTopOffsetWithCursorLocationUpdate","offsetLine","shouldUseColumn","highlightInfo","anchorInfo","determineLineAndOffsetFromCharOffsetBinarySearch","charOffset","charCount","prevCharCount","nextCharCount","mid","Infinity","syncVisibleCursorToTextAreaCursor","startChar","endChar","startIsVisible","determineWhetherStartOrEndIsCurrentDisplayPosition","textArea","zeroIndexedStartLineNum","zeroIndexedEndLineNum","offsetStart","offsetEnd","updateParentRefIfNecessary","currentLineNumber","currentCharNumber","handleDifferingLineLengthsWhenGoingUpOrDownWithParams","removeRangeFromSelection","syncAndScrollCleanup","currentLine","currentChar","returnChar","determineProperOffsetWithDummyDiv","selectSymbolAtCursor","matchingDirective","scrollOffset","handleVerticalScroll","handleScrollRight","forwardsOrBackwards","scrollBy","scrollLeft","lowerLineNumberToEnsure","getElementForLine","upperLineNumberToEnsure","visibleLineNumber","numLinesToMoveByWithMaxMin","round","heightToMoveBy","startValues","endValues","initialLineNumber","focusSymbolPane","focusSymbolPaneEvent","callback","eventHandler","handleScrollEvent","detail","CustomEvent","calculateTextContentFromElement","child","childTextContent","positionerID","buttonHeight","useHighlightedLineMenuOptions","setOpen","setShouldBeOpen","openValue","wasExpandCollapse","expand","collapse","collapseRow","expandOrCollapseSection","openUpRefSelector","refSelector","calculatePosition","anchor","container","anchorTop","anchorLeft","anchorHeight","tableTop","tableLeft","useIsSafari","useSyncExternalStore","subscribe","isSafariInBrowser","isSafariOnServer","setState","scrollLineIntoViewEvent","updateStickyHeaderHeightEvent","stickyHeaderObserver","lastTrackedStickyHeader","lastTrackedStickyHeaderHeight","stickyHeader","entry","contentRect","setStickyHeaderHeight","handleUpdateStickyHeaderHeight","elementRef","setIsStickied","stickyCallback","unobserve","rowCollapseStyleId","queryLineElement","queryMatchElement","matchElementId","collapsedRows","ObservableSet","useIsLineCollapsed","callbackFunc","useCollapsedLinesSubscription","useObservedStateMap","useShouldUseInert","useIsFirefox","firefoxVersion","useFirefoxVersion","getFirefoxVersion","parseFloat","isChromiumOrEdge","chromiumVersion","useChromiumVersion","getChromiumVersion","rowHideClassName","getLineChildClassName","startLines","setStylesForRow","styleSheet","isCollapsed","styles","sheetTextContent","head","classesArray","matchRegEx","calculateLineAndColumn","childNode","parentNode","firstElementChild","lineRawText","dummyDiv","calculateHighlightOffsetAndWidth","highlightedInfo","lineOffset","endColumn","CODE_CELL_PADDING","isInViewport","rect","documentElement","pageYOffset","topPageSpace","wrongLineNumber","low","high","midElement","textToAnnounce","timeoutBeforeAnnouncing","screenReaderDiv","createScreenReaderAnnouncementDiv","textToAnnounceDeDuped","allowUserContentScrolling","setting","getUserContentScrolling","initCodeSections","level","tempArray","initSymbols","outlineSymbol","snippet","ident_utf16","line_number","codeSymbol","outlineSymbolToCodeSymbol","lineIndexedSymbols","getBlobLine","initSymbolTree","tempParents","symbolB","symbolA","setSymbolDepth","nextSymbol","symbolChildren","buildSymbolTreeChildren","currentIndex","tempSymbol","tempChildren","determineTotalNumberOfChildren","matches","CodeReference","source","SymbolSource","BLOB_CONTENT","setSnippet","getReferencesToSymbol","symbolName","symbolMatchable","getReferencesToSearch","term","selectedSymbol","getAlephDefinitions","localDefinitions","localDefinition","localDefinitionsForKindFallback","definition","SymbolKind","definitionLines","alephRefs","enumStringVal","getAlephReferences","getSymbolKind","bestRank","rank","response","resultDetails","definitionsUrl","codeNavigationPath","q","codeNavContext","verifiedFetchJSON","parseAlephBackendType","flatMap","refs","alephSymbol","alephSymbolToCodeSymbol","referencesUrl","partialResponse","observedLines","isCheckedLine","alephSymbolToCodeReference","constructor","fromAleph","currNode","output","getMatchGenerator","next","done","columnEnd","codeRefs","matchable","startedAtResultLimit","checkedLine","startFromLine","matchesInRawBlob","convertBlackbirdSymbolKind","enumVal","symbolKindShortName","symbolKindColor","class","struct","enum","interface","trait","module","implementation","function","call","field","CodeSymbol","setFileInfo","leadingWhitespace","plain","matchContent","MatchableType","extent_utf16","extentUtf16","identUtf16","fully_qualified_name","utf16_col","BLACKBIRD_ANALYSIS","symbolStartIdx","character","symbolEndIdx","extentStartIdx","extentEndIdx","BLACKBIRD_SEARCH","ALEPH_PRECISE","local","symbolRefInfo","listCacheKey","firstLineWithWhiteSpace","symbolPath","identStartSymbolIdx","identEndSymbolIdx","codeReference","request","debounceOverrideCondition","delayId","postNow","idle","delayMs","nextRequest","currentRequest","worker","postMessage","onmessage","OpenCopilotChatEvent","Event","bubbles","cancelable","AddCopilotChatReferenceEvent","context","publishOpenCopilotChat","publishAddCopilotChatReference","subscribeOpenCopilotChat","listener","subscribeAddCopilotChatReference","subscribeSearchCopilot","subscribeSymbolChanged","TREE_COMPARISON_REFERENCE_TYPE","CopilotChatIntents","explain","conversation","suggest","askDocs","discussFileDiff","explainFileDiff","reviewPr","MESSAGE_STREAMING_ERROR_TYPES","SUPPORTED_FUNCTIONS","filterMap","item","string","prefixBonusWeight","stringScore","lastIndexOf","fuzzyHighlightElement","textRe","innerHTML","fuzzyRegexp","chars","firstChar","char","clean","wordSeparators","originalString","abbreviation","stringLength","totalCharacterScore","shouldAwardCommonPrefixBonus","indexCLowercase","indexCUppercase","minIndex","indexInString","abbreviationLength","abbreviationScore","finalScore","ObservableBase","subscriptions","notify","memberObservables","observable","args","ObservableMap","keyObservables","valueObservables","useObservableValue","observableRef","useObservableMap","onChangeRef","setValue","newValue","useDerivedObservable","derive","derivedObservable","mapRefType","unqualifyRef","unqualifiedRef","testIdProps","fileContributorsPath","cancelled","update","hide","defaultKeyExtractor","useVirtualDynamic","measureRefCacheRef","elCacheRef","resizeObserverRef","attribute","ro","keyExtractor","cachedMeasureRefWrappers","makeMeasureRefWrapperForItem","measureRefsMap","rowVirtualizer","useVirtual","additionalScrollOffset","scrollToFn","horizontal","useVirtualImpl","rest","windowRef","scrollOffsetFn","bounds","defaultScrollToFn","scroll","onScrollElement","useObserver","useWindowRect","setRect","resizeHandler","contain","token","useCSRFToken","issue","LockIcon","GitBranchIcon","form","readOnly","bidiRegex","bidiRegexG","bidiBoundaryRegex","bidiReplacementMap","usableWindow","revealButtonUrl","shown","full","backgroundClip","BidiTooltip","BidiCharacter","hiddenBidiCharacterHTMLString","bidiReplacementString","splitAroundBIDICharacters","showBidiCharactersHTML","replacedSegments","replacement","replaceAll","showBidiCharacters","splitText","getBIDIReplacement","expandErrorButton","BugIcon","svg","CodeownersErrorDetails","listStyleType","suggestion","linePrefix","fontStyle","backgroundRepeat","backgroundSize","lineError","lineSuffix","errorOffset","end_column","trimmedCharacters","TRUNCATED_LINE_PREFIX","CodeownersErrorLineIndicator","DotFillIcon","codeownersErrorPath","CodeFoldingEllipsisOverlay","extraLeftPadding","collapsedRowsArray","actualLineNumber","HighlighterElement","subtle","highlightPosition","ExpandRowEllipsis","EllipsisIcon","noop","CodeLineUnmemoized","virtualKey","forceVisible","useHighlightedLinesInfo","fileLineRef","lineRefCallbackForObserver","overlaySymbols","useSearchResults","focusedSymbol","useFocusedSearchResult","currentLineHeight","isFirstHighlightedLine","menuAnchorRef","data-key","clsx","SyntaxHighlightedLine","CopilotButton","isSafari","hasOffset","hasWidth","rangeArray","CodeLinesUnmemoized","scrollContainerRef","horizontalScrollBarRef","setNextTextAreaScroll","setNextScrollBarScroll","setNextScrollContainerScroll","onscroll","textRef","useVirtualCodeBlob","lineCount","rangeExtractor","indicesInWindow","defaultRangeExtractor","minIndexInWindow","tailLength","tail","measureSize","getHorizontalScrollOffset","scrollingProps","scrollbarWidth","onScroll","handleBlobScrollSync","shouldNotOverrideCopy","scrolledElement","scrollTop","containerRect","elementRect","fitsWithoutScroll","offsetLeft","StickyLineObserverOverlay","StickyLineObserverLine","userSelect","CodeLinesNoVirtualizationUnmemoized","noVirtualizationThreshold","fileLength","isNonVirtualized","useFeatureFlag","HighlightedLineContext","highlight","useHighlightedLinesRange","highlightForLine","h","copilotButtonOffsetTop","setCopilotButtonOffsetTop","highlightPositions","LineHighlight","startingLineNumber","recalcPosition","useAllSearchResults","focusedResult","useFocusedSearchResultWithoutLineCheck","LineNumberUnmemoized","preventClick","selectionRef","codeCellClickFunc","highlightStart","highlightEnd","targetedLineNumber","cursorSelection","selectionRange","rangeCount","getRangeAt","currentLines","replaceState","isFullyHighlighted","isInHighlightRange","copilotMenuRef","showCodeFoldingIcon","mouseCallback","isEnter","data-line-number","CodeAlert","displayRight","CodeFoldingChevron","margin","LineNumberNoVirtualizationUnmemoized","SearchResultsContext","resultsByLineNumber","newMap","searchResult","resultsForLine","focusedResultForLine","SyntaxHighlightedLineWithRef","strategy","useSyntaxHighlightingStrategy","hiddenFromFind","codeLineHTML","inert","SyntaxHighlightedOverlayUnmemoed","documentHTML","useCodeHTMLDocument","colorizedLine","divWrapStart","divWrapEnd","lineHtml","directives","bidiShown","buildCodeHTML","makeSyntaxTree","nodes","dir","makeNode","currentParentStack","previous","beginningOfParent","inBetween","newContainer","newNode","previousParentEnd","restOfCurrentParent","lastNode","restOfParent","out","appendHTMLNodesForSubtree","escapeHTML","makeHTMLToken","bidiReplacement","nodeText","separatedText","contents","cssClass","convertTabsToSpaces","numSpaces","unsafe","escapeHTMLChar","scrollMarksContainerID","transition","portalRootID","CopilotButtonWithRef","setPosition","changePosition","requestAnimationFrame","calculateCopilotButtonPosition","portalRoot","HighlightedLineMenuWithRef","actionMenuRef","setVisibility","newDiscussionPath","newIssuePath","refSelectorShortcut","permalinkUrl","encodedPermalinkUrl","encodeURIComponent","linkHash","useEndLineNumber","startIndex","EmptyDeferredAST","DeferredASTContext","has404Error","deferredASTPath","isArray","obj","EmptyDeferredMetadata","DeferredMetadataContext","deferredMetadataPath","CurrentBlameContext","CurrentBlobContext","CurrentLineRefMapContext","num","elem","hasClipboardItem","hasClipboardApi","res","status","statusText","selectAllShortcut","allSelected","copyRawBlobContents","onSelectionChange","selectAll","selectAllContentInElement","selectNode","sel","copyFullFileContents","getPathSegmentData","directoryName","directoryPath","isRoot","listStyle","RepoLink","Separator","DirectoryLink","FileName","tooltipProps","hasPortalTooltip","reloadDocument","AskCopilotButton","referenceType","attrs","portalElement","usePortalTooltip","anchorSide","CopilotIcon","DROPDOWN_BUTTON_ID","CopilotCodeLinesMenu","suggestIcebreakerEnabled","handleAskAbout","intent","shouldAppend","FeatureRequest","PopoverMessage","ORG_ADMIN","ORG_MEMBER","STANDARD","documentationUrl","notices","userAccess","business","orgHasCFBAccess","userHasCFIAccess","userHasOrgs","userIsOrgAdmin","userIsOrgMember","featureRequestInfo","codeViewPopover","codeViewPopoverNotice","sendClickAnalyticsEvent","useClickAnalytics","isOrgOwned","repoIsOrgOwned","inProgress","requested","dismissed","dismissedAt","toggleFeatureRequest","useFeatureRequest","setIsOpen","popoverHidden","setPopoverHidden","openPopover","closePopover","getUserRepoRelationship","sendAnalyticsClickOpenPopover","sendAnalyticsClickPopoverCTA","ctaText","sendAnalyticsDismissPopover","refLoc","sendAnalyticsClickLearnMore","isCFBDocs","AnchoredOverlay","onOpen","overlayProps","focusZoneSettings","renderAnchor","anchorProps","showFeatureRequest","CancelFeatureRequest","RequestFeature","dismissPath","textDecorationLine"],"sourceRoot":""}