"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["enterprise-team-management"],{91197:(e,t,r)=>{var a=r(9449);function i(e){return(0,a.jsx)(a.Fragment,{children:e.children})}try{i.displayName||(i.displayName="App")}catch{}var n=r(82897),s=r(59857),o=r(75177),d=r(65481),l=r(86519),c=r(73729),m=r(66889),u=r(281),p=r(17909),_=r(44981),h=r(69909),g=r(67269),x=r(55847),f=r(47553),b=r(22084),y=r(28784),j=r(27788),w=r(55293);function S(){let e=(0,n.B)(),t=`/enterprises/${e.enterpriseSlug}/teams`,r=(0,w.useRef)(null),i=e.canSyncToOrganizations??!1,S=e.maxSyncMembers,[v,A]=(0,w.useState)(e.enterpriseTeam?.syncToOrganizations??!1),[T,M]=(0,w.useState)(e.enterpriseTeam?.isSecurityManager??!1),[C,L]=(0,w.useState)(e.idpGroups.find(t=>t.id===e.enterpriseTeam?.idpGroup?.id)),[F,G]=(0,w.useState)(""),[R,k]=(0,w.useState)(!1),[z,H]=(0,w.useState)(""),[N,O]=(0,w.useState)(!1),E=e.idpGroups.filter(e=>e.text.toLowerCase().startsWith(F.toLowerCase())),B=void 0!==e.enterpriseTeam,D=(0,j.Z)();(0,w.useEffect)(()=>{let t=e.idpGroups.find(e=>e.id===C?.id)?.member_count||0;i&&t<=S||A(!1)},[C,i,S,e.idpGroups]);let I=(0,w.useRef)(null);async function W(){O(!0);let a=new FormData;a.append("teamName",r.current?.value??""),a.append("idpGroup",C?.id?.toString()??""),e.enabledForOrganizations&&a.append("syncToOrganizations",v.toString()),e.enabledForOrganizationSecurityManager&&a.append("isSecurityManager",T.toString());let i=B?`${t}/${e?.enterpriseTeam?.slug}`:t;try{let e=await (0,y.DI)(i,{method:B?"PUT":"POST",headers:{Accept:"application/json"},body:a}),t=await e.json();if(t.data.redirect){let e=t.data.redirect,r=e.startsWith(window.location.origin)?e.replace(window.location.origin,""):e;D(r)}else t.data.error&&(H(t.data.error),O(!1))}catch(e){H("Something went wrong!"),O(!1)}}(0,w.useEffect)(()=>{I.current?.focus()},[z,I]);let q=e.idpGroups.find(e=>e.id===C?.id)?.member_count||0,P=!!i&&q<=S;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.A,{as:"form",sx:{my:6,px:3},className:"container-md px-md-4 px-lg-5",onSubmit:e=>{W(),e.preventDefault()},children:[z&&(0,a.jsx)(d.A,{"data-testid":"flash-error",tabIndex:0,ref:I,variant:"danger",sx:{mb:2},children:(0,a.jsx)(b.oG,{html:z})}),(0,a.jsxs)(o.A,{sx:{pb:2,mb:2,mt:3,borderBottom:"solid",borderBottomColor:"border.muted",borderBottomWidth:1},children:[(0,a.jsx)(l.A,{href:t,children:"\u2190 Back to enterprise teams"}),(0,a.jsx)(c.A,{as:"h1",sx:{fontSize:4,mt:3},children:B?"Edit team":"Create new enterprise team"})]}),(0,a.jsxs)(o.A,{sx:{mt:3,display:"flex"},children:[(0,a.jsxs)(m.A,{id:"owner-input",required:!0,children:[(0,a.jsx)(m.A.Label,{as:"span",children:"Owner"}),(0,a.jsxs)(u.W,{children:[(0,a.jsx)(u.W.Button,{disabled:!0,children:e.enterpriseSlug}),(0,a.jsxs)(u.W.Overlay,{width:"medium",maxHeight:"large",sx:{overflow:"auto"},children:[(0,a.jsx)(p.l.Group,{children:(0,a.jsx)(_.A,{sx:{mx:2,display:"flex"},"aria-label":"Search owner",placeholder:"Filter\u2026"})}),(0,a.jsx)(p.l.Divider,{}),(0,a.jsx)(p.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,a.jsx)(p.l,{children:(0,a.jsx)(p.l.Item,{children:e.enterpriseSlug})})})]})]})]}),(0,a.jsx)(h.A,{sx:{fontSize:4,mx:2,mt:"21px"},children:"/"}),(0,a.jsxs)(m.A,{required:!0,children:[(0,a.jsx)(m.A.Label,{children:"Team name"}),(0,a.jsx)(_.A,{"data-testid":"team-name-input",ref:r,"aria-label":"Team name",name:"teamName",defaultValue:B?e.enterpriseTeam?.name:void 0,sx:{width:"400px"}})]})]}),(0,a.jsx)(h.A,{sx:{color:"fg.muted",fontSize:0},children:B?"Changing the team name will break past @mentions.":"You'll use this name to mention this team."}),e.enterpriseManaged&&!e.idpGroupsDisabled&&(0,a.jsxs)(o.A,{sx:{mt:3},children:[(0,a.jsxs)(m.A,{id:"idp-input",children:[(0,a.jsxs)(m.A.Label,{as:"span",children:["Identity Provider Group",(0,a.jsx)("br",{}),(0,a.jsx)(h.A,{sx:{color:"fg.muted",fontSize:0,fontWeight:"normal"},children:"Manage team members using your identity provider group."})]}),(0,a.jsx)(o.A,{sx:{my:1},"data-testid":"idp-group-select-panel",children:(0,a.jsx)(g.X,{title:"Select Groups",subtitle:"Use groups to manage team members",renderAnchor:({children:e,"aria-labelledby":t,...r})=>(0,a.jsx)(x.Q,{trailingAction:s.TriangleDownIcon,"aria-labelledby":` ${t}`,...r,children:e??"Select Groups"}),placeholderText:"Filter groups",open:R,onOpenChange:k,items:E,selected:C,onSelectedChange:L,onFilterChange:G,showItemDividers:!0,overlayProps:{width:"small",height:"xsmall"}})})]}),(0,a.jsx)(h.A,{sx:{color:"fg.muted",fontSize:0},children:"You can manage this team's members externally"})]}),!e.showEnterpriseSecurityManagerAssignmentPage&&e.enabledForOrganizations&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.A,{disabled:!P,children:[(0,a.jsx)(f.A,{"data-testid":"sync-to-organizations-input",checked:v,onChange:()=>{P&&A(!v),P&&v||M(!1)}}),(0,a.jsx)(m.A.Label,{children:"Make this team available in all organizations."})]}),!P&&(0,a.jsxs)(h.A,{sx:{color:"red",fontSize:0},children:["Cannot sync to all organizations if Enterprise Team has more than ",e.maxSyncMembers," members or Business has over ",e.maxSyncOrgs," organizations"]}),e.enabledForOrganizationSecurityManager&&(0,a.jsx)("div",{children:(0,a.jsxs)(m.A,{disabled:!v,children:[(0,a.jsx)(f.A,{"data-testid":"security-manager-input",checked:T&&v,onChange:()=>{M(!T)}}),(0,a.jsx)(m.A.Label,{children:"Grant the team permission to manage security alerts and settings across your enterprise. This team will also be granted read access to all repositories."})]})})]}),(0,a.jsx)(o.A,{sx:{mt:3,display:"flex",flexDirection:"row"},children:(0,a.jsx)(x.Q,{"data-testid":"submit-button",variant:"primary",type:"submit",disabled:N,children:B?"Save changes":"Create team"})})]})})}try{S.displayName||(S.displayName="EnterpriseTeamManagement")}catch{}var v=r(79840),A=r(86233);(0,v.Q)("enterprise-team-management",()=>({App:i,routes:[(0,A.a)({path:"/enterprises/:slug/new_team",Component:S}),(0,A.a)({path:"/enterprises/:slug/teams/:team_slug/edit",Component:S})]}))},51550:(e,t,r)=>{r.d(t,{A:()=>a});let a=(e,t)=>{let r=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&r.host===a.host&&r.pathname===a.pathname&&r.search===a.search}},27788:(e,t,r)=>{r.d(t,{Z:()=>m,o:()=>u});var a=r(55293),i=r(47767),n=r(45588),s=r(84976),o=r(51550),d=r(92812),l=r(56725),c=r(99523);let m=()=>{let{routes:e,history:t}=a.useContext(d.B),s=(0,i.Zp)();return a.useCallback((i,d={})=>{let m=(0,n.o1)(i).pathname;if((0,n.ue)(e,m)){(0,o.A)(location.href,i.toString())||(0,l.SC)("react");let{preventAutofocus:e,...t}=d;(0,a.startTransition)(()=>{s(i,e?{...t,state:{[c.V]:!0,...t.state}}:t);let{turbo:r,...a}=window.history.state;window.history.replaceState({...a,skipTurbo:!0},"",location.href)})}else{let e=t.createHref(i);(async()=>{let{softNavigate:t}=await Promise.all([r.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),r.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(r.bind(r,63120));t(e)})()}},[t,s,e])},u=()=>{let[e]=(0,s.ok)(),t=m(),{pathname:r}=(0,i.zy)(),n=a.useCallback((a,i={})=>{t({pathname:r,search:(0,s.PI)("function"==typeof a?a(e):a).toString()},i)},[e,t,r]);return[e,n]}},28784:(e,t,r)=>{function a(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function i(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},i=t?.body?JSON.stringify(t.body):void 0;return a(e,{...t,body:i,headers:r})}function n(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return a(e,{...t,headers:r})}function s(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return i(e,{...t,headers:r})}r.d(t,{DI:()=>a,QJ:()=>n,Sr:()=>s,lS:()=>i})},86233:(e,t,r)=>{r.d(t,{a:()=>a});function a({path:e,Component:t,shouldNavigateOnError:r,transitionType:a,children:i}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let r=`${e.pathname}${e.search}`;t=await window.fetch(r,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom","X-React-Router":"json"}})}catch(e){return{type:r?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:r?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:r?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:a,children:i}}},22084:(e,t,r)=>{r.d(t,{mo:()=>_,oG:()=>m,yx:()=>u});var a,i=r(9449),n=r(75177),s=r(69909),o=r(42838),d=r.n(o),l=r(55293);function c(e){if("html"in e&&void 0!==e.html){let{html:t,...r}=e;return{safeHTML:t,props:r}}let{unverifiedHTML:t,unverifiedHTMLConfig:r,...a}=e,i={...r,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{safeHTML:d().sanitize(t,i),props:a}}let m=p(n.A);m.displayName="SafeHTMLBox";let u=p(s.A);function p(e){return(0,l.forwardRef)((t,r)=>{let{safeHTML:a,props:n}=c(t);return(0,i.jsx)(e,{ref:r,...n,dangerouslySetInnerHTML:a?{__html:a}:void 0})})}u.displayName="SafeHTMLText";let _=(0,l.forwardRef)((e,t)=>{let{safeHTML:r,props:a}=c(e);return(0,i.jsx)("div",{ref:t,...a,dangerouslySetInnerHTML:r?{__html:r}:void 0})});_.displayName="SafeHTMLDiv";try{(a=SafeHTMLComponent).displayName||(a.displayName="SafeHTMLComponent")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-7901e7","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_react_lib-esm_FilteredActionList_FilteredActionList_js","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-e2d583","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_react-core_register-app_ts"],()=>t(91197)),e.O()}]);
//# sourceMappingURL=enterprise-team-management-6cf0451aa5a3.js.map