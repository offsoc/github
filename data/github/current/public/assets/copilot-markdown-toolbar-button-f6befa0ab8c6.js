"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-markdown-toolbar-button"],{58591:(e,t,r)=>{var o=r(72245),n=r(9449),i=r(55293),a=r(281),s=r(17909),l=r(85053),c=r(97564),d=r(92240),u=r(26387),m=r(28784);function p({anchorId:e,userLogin:t,ghostPilotAvailable:r,ghostPilotEnrolled:o,pullRequestSummaryEnabled:p}){let[h,_]=(0,i.useState)(!1),[b,g]=(0,i.useState)(o),[f,R]=(0,i.useState)(!1),v=(0,i.useRef)(null),E=(0,i.useRef)(null),y=(0,c.G7)("copilot_split_actions_enabled"),x="copilot-ghost-pilot-toggle",j=(0,i.useSyncExternalStore)(e=>{let t=e=>{e.detail.enabled!==b&&g(e.detail.enabled)};return document.addEventListener(x,t),()=>{document.removeEventListener(x,t)}},()=>b);(0,i.useEffect)(()=>{if("undefined"==typeof document||(E.current=document.getElementById(e),null===E.current))return;let t=()=>{_(e=>!e)},r=E.current;return r.setAttribute("aria-expanded",h.toString()),r.addEventListener("click",t),()=>{r.removeEventListener("click",t)}},[e,h]);let S=(0,i.useCallback)(e=>{let t=v.current.closest("form");if(!t)return;R(!0),_(!1);let r=e.currentTarget.getAttribute("data-copilot-action"),o=new CustomEvent(u.ob,{bubbles:!0,detail:{action:r}});t.dispatchEvent(o),t.addEventListener(u.TN,()=>{R(!1)},{once:!0})},[v]),w=async()=>{C(!0)},k=async()=>{C(!1)},C=async e=>{if((!b||!e)&&(b||e)&&(await (0,m.DI)(`/users/${t}/feature_preview/ghost_pilot_pr_autocomplete/${e?"enroll":"unenroll"}`,{method:"PATCH"})).ok){for(let t of document.getElementsByTagName("copilot-text-completion"))e?t.removeAttribute("data-disabled"):t.setAttribute("data-disabled","");let t=new CustomEvent(x,{detail:{enabled:!b}});g(e),document.dispatchEvent(t)}};return(0,n.jsx)("div",{ref:v,...(0,d.G)("copilot-md-actions"),children:(0,n.jsx)(a.W,{open:h,onOpenChange:_,anchorRef:E,children:(0,n.jsx)(a.W.Overlay,{width:"medium",children:(0,n.jsxs)(s.l,{children:[(p||y)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.l.Group,{children:[(0,n.jsx)(s.l.GroupHeading,{children:"Generate"}),p&&(0,n.jsxs)(s.l.Item,{onSelect:S,disabled:f,"data-copilot-action":y?"summary":"all",...(0,d.G)("copilot-pr-summary-btn"),children:["Summary",(0,n.jsx)(s.l.Description,{variant:"block","data-copilot-action":"toggle",...(0,d.G)("copilot-pr-toggle-btn"),children:"Generate a summary of the changes in this pull request."})]}),y&&(0,n.jsxs)(s.l.Item,{onSelect:S,disabled:f,"data-copilot-action":"outline",...(0,d.G)("copilot-pr-outline-btn"),children:["Outline",(0,n.jsx)(s.l.Description,{variant:"block",children:"Generate a list of the most important changed files in this pull request."})]})]})}),r&&(p||y)&&(0,n.jsx)(s.l.Divider,{}),r&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.l.Group,{children:[(0,n.jsx)(s.l.GroupHeading,{children:"Settings"}),(0,n.jsxs)(a.W,{children:[(0,n.jsx)(a.W.Anchor,{children:(0,n.jsxs)(s.l.Item,{id:"ghostPilotFeaturePreview",...(0,d.G)("copilot-autocomplete-toggle-btn"),children:["Text complete ",(0,n.jsx)(l.A,{variant:"success",children:"Beta"}),(0,n.jsx)(s.l.Description,{variant:"block",children:"Text completions while typing"})]})}),(0,n.jsx)(a.W.Overlay,{children:(0,n.jsxs)(s.l,{selectionVariant:"single",children:[(0,n.jsx)(s.l.Item,{onSelect:w,role:"menuitemcheckbox",selected:j,children:"Enabled"}),(0,n.jsx)(s.l.Item,{onSelect:k,role:"menuitemcheckbox",selected:!j,...(0,d.G)("copilot-autocomplete-disable-btn"),children:"Disabled"})]})})]})]})}),(0,n.jsx)(s.l.Divider,{}),(0,n.jsxs)(s.l.LinkItem,{href:"https://docs.github.com/copilot/github-copilot-enterprise/copilot-pull-request-summaries/about-copilot-pull-request-summaries",target:"_blank",...(0,d.G)("copilot-pr-summary-rai-ux"),children:["Documentation",(0,n.jsx)(s.l.Description,{variant:"block",children:"Learn more on how to use Copilot for pull requests."})]})]})})})})}try{p.displayName||(p.displayName="CopilotMarkdownToolbarButton")}catch{}(0,o.k)("copilot-markdown-toolbar-button",{Component:p})},26387:(e,t,r)=>{r.d(t,{PD:()=>i,TN:()=>n,ob:()=>o});let o="copilot-pr-summary:init",n="copilot-pr-summary:end",i="copilot-text-completion:suggestion"},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new o),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let o=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>i,QJ:()=>a,w8:()=>n});var o=r(55293);function n(e){return((0,o.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function i(e){let t=(0,o.useRef)(e.__wrapperElement.anchor||null),[r,n]=(0,o.useState)(!1),i=(0,o.useCallback)(()=>{n(!r)},[r,n]);return(0,o.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),a(e,i),{ref:t,open:r,setOpen:n}}function a(e,t){let r=(0,o.useRef)(e.__wrapperElement.anchor);(0,o.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let o=new(r(92536)).R;var n=r(9449),i=r(39595),a=r(24508),s=r(23235);let l=class ReactPartialElement extends a.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,o.getRegistration(t)),i=this.closest("react-partial-anchor");return(0,n.jsx)(s.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:i})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){o.register(e,t)}l=function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}([i.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>s});let{getItem:o,setItem:n,removeItem:i}=(0,r(74572).A)("localStorage"),a="REACT_PROFILING_ENABLED",s={enable:()=>n(a,"true"),disable:()=>i(a),isEnabled:()=>!!o(a)}},92240:(e,t,r)=>{r.d(t,{G:()=>o});let o=e=>({"data-testid":e})},28784:(e,t,r)=>{function o(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function n(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return o(e,{...t,body:n,headers:r})}function i(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return o(e,{...t,headers:r})}function a(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return n(e,{...t,headers:r})}r.d(t,{DI:()=>o,QJ:()=>i,Sr:()=>a,lS:()=>n})},23235:(e,t,r)=>{r.d(t,{c:()=>h});var o=r(9449),n=r(55293),i=r(36165),a=r(45588),s=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,i]=(0,n.useState)({location:t.location});return(0,c.m)(()=>t.listen(i),[t]),(0,o.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),m=r(51261),p=r(75014);function h({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:h}){let _=n.useRef(),b=globalThis.window;_.current||(_.current=b?(0,m.z)({window:b}):(0,a.sC)({initialEntries:[{pathname:"/"}]}));let g=_.current,f=(0,p.w8)(h);return(0,o.jsx)(i.U,{appName:e,wasServerRendered:l,children:(0,o.jsx)(s.Q,{history:g,routes:[],children:(0,o.jsxs)(d,{history:g,children:[(0,o.jsx)(r,{...t.props,...f}),(0,o.jsx)(u.h,{ssrError:c})]})})})}try{h.displayName||(h.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var o=r(9449),n=r(39595),i=r(34613),a=r(55293),s=r(23581),l=r(79461),c=r(51528);function d(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:i.createRoot,hydrateRoot:i.hydrateRoot};s.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,n=await this.getReactNode(t),l=(0,o.jsx)(a.StrictMode,{children:n});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87358,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:o,lineno:n,colno:i}=e,a=`${t} at ${r} (${o}:${n}:${i})`;return t=" ",a}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([n.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([n.aC],ReactBaseElement.prototype,"ssrError",void 0),d([n.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-db7317","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(58591)),e.O()}]);
//# sourceMappingURL=copilot-markdown-toolbar-button-322d86b8af05.js.map