"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["hosted-compute-ims-stafftools"],{15717:(e,t,i)=>{var a=i(74848);function r(e){return(0,a.jsx)(a.Fragment,{children:e.children})}try{r.displayName||(r.displayName="App")}catch{}var s=i(82897),n=i(73729),l=i(60499),d=i(75177);let o={StandardPadding:3},c={display:"flex",font:"var(--text-subtitle-shorthand)",fontSize:4},m={p:o.StandardPadding},h={border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px"},u={mt:o.StandardPadding,display:"flex",flexDirection:"column",gap:o.StandardPadding},_={cursor:"pointer"};var p=i(96540),x=i(94407);let j={stafftoolPageTitle:"Hosted Compute Image Management",blankslateTitle:"Welcome to IMS Stafftools",blankslateDescription:"Coming soon!",pointerBlankslateTitle:"Pointer table is empty!",curatedImagesPointerTableBlankslateTitle:"Curated image table is empty!",imsRepoLink:"https://github.com/github/hosted-compute-ims",editPointer:"Edit pointer",deletePointer:"Delete pointer",pointerTableTitle:"Pointers",createPointer:"Create pointer",curatedImagesTableTitle:"Curated Images",newCuratedImages:"New image",createCuratedImages:"Create image",viewImageVersions:"View image versions",editCuratedImages:"Edit image",deleteCuratedImages:"Delete image",imageVersionsUrl:(e,t)=>`${e}/curated/${t}`,stateDetails:"View State Details"};function g(e){return(0,a.jsx)(d.A,{className:"border rounded-2",sx:h,children:(0,a.jsxs)(x.A,{children:[(0,a.jsx)(x.A.Heading,{children:e.title}),(0,a.jsx)(x.A.Description,{children:e.description}),e.primaryAction&&(0,a.jsx)(x.A.PrimaryAction,{href:"#",children:e.primaryAction}),(0,a.jsx)(x.A.SecondaryAction,{href:j.imsRepoLink,children:"Learn more about IMS"})]})})}try{g.displayName||(g.displayName="ImsBlankslate")}catch{}var b=i(95677),f=i(56221),A=i(59857),C=i(87644),y=i(55847),I=i(281),v=i(87330),P=i(17909),w=i(27788);function T(e){let t=(0,w.Z)();return(0,a.jsx)(d.A,{sx:{pt:2},children:(0,a.jsxs)(b.X.Container,{children:[(0,a.jsx)(b.X.Title,{as:"h2",id:"pointers",children:j.pointerTableTitle}),(0,a.jsx)(b.X.Actions,{children:(0,a.jsx)(y.Q,{onClick:()=>t(e.newCuratedPointerPath),children:j.createPointer})}),(0,a.jsx)(f.b,{"aria-labelledby":"pointers","aria-describedby":"pointers-subtitle",data:e.pointers,columns:[{header:"Id",field:"id",rowHeader:!0},{header:"Name",field:"name"},{header:"Architecture",field:"architecture"},{header:"OsType",field:"osType"},{header:"Enabled",field:"enabled",renderCell:e=>e.enabled?(0,a.jsx)(A.CheckCircleIcon,{size:16}):(0,a.jsx)(A.XCircleIcon,{size:16})},{header:"Points To",field:"pointsToImageDefinitionId"},{id:"actions",header:()=>(0,a.jsx)(C.A,{children:"Actions"}),renderCell:e=>(0,a.jsxs)(I.W,{children:[(0,a.jsx)(I.W.Anchor,{children:(0,a.jsx)(v.K,{"aria-label":`Actions: ${e.name}`,title:`Actions: ${e.name}`,icon:A.KebabHorizontalIcon,variant:"invisible",unsafeDisableTooltip:!0})}),(0,a.jsx)(I.W.Overlay,{children:(0,a.jsxs)(P.l,{children:[(0,a.jsx)(P.l.Item,{children:j.editPointer}),(0,a.jsx)(P.l.Item,{variant:"danger",children:j.deletePointer})]})})]})}]})]})})}try{T.displayName||(T.displayName="CuratedImagesPointerTable")}catch{}function D(e){let t=(0,w.Z)();return(0,a.jsx)(d.A,{sx:{pt:2},children:(0,a.jsxs)(b.X.Container,{children:[(0,a.jsx)(b.X.Title,{as:"h2",id:"curated-images",children:j.curatedImagesTableTitle}),(0,a.jsx)(b.X.Actions,{children:(0,a.jsx)(y.Q,{onClick:()=>t(e.newCuratedImagePath),children:j.createCuratedImages})}),(0,a.jsx)(f.b,{"aria-labelledby":"curated-images","aria-describedby":"curated-images-subtitle",data:e.imageDefinitions,columns:[{header:"Id",field:"id",rowHeader:!0},{header:"Name",field:"name"},{header:"Architecture",field:"architecture"},{header:"OsType",field:"osType"},{header:"Enabled",field:"enabled",renderCell:e=>e.enabled?(0,a.jsx)(A.CheckCircleIcon,{size:16}):(0,a.jsx)(A.XCircleIcon,{size:16})},{header:"Versions",field:"imageVersionsCount",renderCell:e=>e.imageVersionsCount},{id:"actions",header:()=>(0,a.jsx)(C.A,{children:"Actions"}),renderCell:i=>(0,a.jsxs)(I.W,{children:[(0,a.jsx)(I.W.Anchor,{children:(0,a.jsx)(v.K,{"aria-label":`Actions: ${i.name}`,title:`Actions: ${i.name}`,icon:A.KebabHorizontalIcon,variant:"invisible",unsafeDisableTooltip:!0})}),(0,a.jsx)(I.W.Overlay,{children:(0,a.jsxs)(P.l,{children:[(0,a.jsx)(P.l.Item,{disabled:0===i.imageVersionsCount,onSelect:()=>t(j.imageVersionsUrl(e.imsStafftoolsPath,i.id)),children:j.viewImageVersions}),(0,a.jsx)(P.l.Divider,{}),(0,a.jsx)(P.l.Item,{children:j.editCuratedImages}),(0,a.jsx)(P.l.Item,{variant:"danger",children:j.deleteCuratedImages})]})})]})}]})]})})}try{D.displayName||(D.displayName="CuratedImagesTable")}catch{}function k(e){return(0,a.jsxs)(d.A,{sx:u,children:[e.imageDefinitionPointers.length>0?(0,a.jsx)(T,{pointers:e.imageDefinitionPointers,newCuratedPointerPath:e.newCuratedPointerPath}):(0,a.jsx)(g,{title:j.pointerBlankslateTitle,description:j.blankslateDescription,primaryAction:j.createPointer}),e.imageDefinitions.length>0?(0,a.jsx)(D,{imageDefinitions:e.imageDefinitions,imsStafftoolsPath:e.imsStafftoolsPath,newCuratedImagePath:e.newCuratedImagePath}):(0,a.jsx)(g,{title:j.curatedImagesPointerTableBlankslateTitle,description:j.blankslateDescription,primaryAction:j.createCuratedImages})]})}try{k.displayName||(k.displayName="CuratedImagesPage")}catch{}function S(){let e=(0,s.B)(),[t,i]=(0,p.useState)("curated");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"Subhead",children:(0,a.jsx)(n.A,{as:"h2",className:"Subhead-heading",sx:c,children:j.stafftoolPageTitle})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsxs)(l.A,{"aria-label":"Main",children:[(0,a.jsx)(l.A.Link,{as:"button",selected:"curated"===t,onClick:()=>i("curated"),children:"Curated"}),(0,a.jsx)(l.A.Link,{as:"button",selected:"marketplace"===t,onClick:()=>i("marketplace"),children:"Marketplace"})]})}),"curated"===t&&(0,a.jsx)(k,{imageDefinitionPointers:e.imageDefinitionPointers,imageDefinitions:e.imageDefinitions,imsStafftoolsPath:e.imsStafftoolsPath,newCuratedImagePath:e.newCuratedImagePath,newCuratedPointerPath:e.newCuratedPointerPath}),"marketplace"===t&&(0,a.jsx)(d.A,{sx:{mt:o.StandardPadding},children:(0,a.jsx)(g,{title:j.blankslateTitle,description:j.blankslateDescription})})]})]})}try{S.displayName||(S.displayName="Main")}catch{}var N=i(62689),L=i(66889),O=i(44981),V=i(73880);function B(){let e=(0,s.B)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{sx:{mb:o.StandardPadding},children:(0,a.jsxs)(N.A,{children:[(0,a.jsx)(N.A.Item,{href:e.imsStafftoolsPath,children:j.curatedImagesTableTitle}),(0,a.jsx)(N.A.Item,{selected:!0,children:j.newCuratedImages})]})}),(0,a.jsxs)(L.A,{required:!0,children:[(0,a.jsx)(L.A.Label,{children:"Image Name"}),(0,a.jsx)(O.A,{})]}),(0,a.jsxs)(L.A,{children:[(0,a.jsx)(L.A.Label,{children:"Os Type"}),(0,a.jsxs)(V.A,{children:[(0,a.jsx)(V.A.Option,{value:"Linux",children:"Linux"}),(0,a.jsx)(V.A.Option,{value:"Window",children:"Window"})]})]}),(0,a.jsxs)(L.A,{children:[(0,a.jsx)(L.A.Label,{children:"Architecture"}),(0,a.jsxs)(V.A,{children:[(0,a.jsx)(V.A.Option,{value:"x64",children:"x64"}),(0,a.jsx)(V.A.Option,{value:"Arm64",children:"Arm64"})]})]})]})}try{B.displayName||(B.displayName="NewCuratedImage")}catch{}function W(){let e=(0,s.B)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{sx:{mb:o.StandardPadding},children:(0,a.jsxs)(N.A,{children:[(0,a.jsx)(N.A.Item,{href:e.imsStafftoolsPath,children:j.curatedImagesTableTitle}),(0,a.jsx)(N.A.Item,{selected:!0,children:j.newCuratedImages})]})}),(0,a.jsxs)(L.A,{required:!0,children:[(0,a.jsx)(L.A.Label,{children:"Image Name"}),(0,a.jsx)(O.A,{})]}),(0,a.jsxs)(L.A,{children:[(0,a.jsx)(L.A.Label,{children:"Os Type"}),(0,a.jsxs)(V.A,{children:[(0,a.jsx)(V.A.Option,{value:"Linux",children:"Linux"}),(0,a.jsx)(V.A.Option,{value:"Window",children:"Window"})]})]}),(0,a.jsxs)(L.A,{children:[(0,a.jsx)(L.A.Label,{children:"Architecture"}),(0,a.jsxs)(V.A,{children:[(0,a.jsx)(V.A.Option,{value:"x64",children:"x64"}),(0,a.jsx)(V.A.Option,{value:"Arm64",children:"Arm64"})]})]})]})}try{W.displayName||(W.displayName="NewCuratedPointer")}catch{}var R=i(84300);function X(e){return(0,a.jsxs)(R.A,{returnFocusRef:e.returnFocusRef,isOpen:e.showStateDetailsDialog,onDismiss:()=>e.setShowStateDetailsDialog(!1),children:[(0,a.jsx)(R.A.Header,{children:j.stateDetails}),(0,a.jsx)(d.A,{sx:m,children:e.stateDetails})]})}try{X.displayName||(X.displayName="StateDetailsDialog")}catch{}function z(e){let[t,i]=(0,p.useState)(!1),r=(0,p.useRef)(null);return(0,a.jsx)(b.X.Container,{children:(0,a.jsx)(f.b,{data:e.imageVersions.map((e,t)=>({...e,id:t})),columns:[{header:"Version",field:"version",rowHeader:!0},{header:"State",field:"state"},{header:"State Details",field:"stateDetails",renderCell:e=>(0,a.jsxs)(a.Fragment,{children:[""!==e.stateDetails&&(0,a.jsx)(v.K,{icon:A.LinkExternalIcon,"aria-label":"State details",onClick:()=>i(!0),ref:r,variant:"invisible"}),t&&(0,a.jsx)(X,{stateDetails:e.stateDetails,showStateDetailsDialog:t,setShowStateDetailsDialog:i,returnFocusRef:r})]})},{header:"Size GB",field:"sizeGb"},{header:"Enabled",field:"enabled",renderCell:e=>e.enabled?(0,a.jsx)(A.CheckCircleIcon,{size:16}):(0,a.jsx)(A.XCircleIcon,{size:16})},{id:"actions",header:()=>(0,a.jsx)(C.A,{children:"Actions"}),renderCell:e=>(0,a.jsxs)(I.W,{children:[(0,a.jsx)(I.W.Anchor,{children:(0,a.jsx)(v.K,{"aria-label":`Actions: ${e.version}`,title:`Actions: ${e.version}`,icon:A.KebabHorizontalIcon,variant:"invisible"})}),(0,a.jsx)(I.W.Overlay,{children:(0,a.jsx)(P.l,{children:(0,a.jsx)(P.l.Item,{children:e.enabled?"Disable":"Enable"})})})]})}]})})}try{z.displayName||(z.displayName="CuratedImageVersionsTable")}catch{}function F(){let e=(0,s.B)(),t=(0,w.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{sx:{mb:o.StandardPadding},children:(0,a.jsxs)(N.A,{children:[(0,a.jsx)(N.A.Item,{sx:_,onClick:()=>t(e.imsStafftoolsPath),children:j.curatedImagesTableTitle}),(0,a.jsxs)(N.A.Item,{selected:!0,children:[e.imageDefinition.name," (",e.imageDefinition.id,")"]})]})}),(0,a.jsx)(z,{imageVersions:e.imageVersions})]})}try{F.displayName||(F.displayName="ListImageVersions")}catch{}var H=i(79840),E=i(86233);(0,H.Q)("hosted-compute-ims-stafftools",()=>({App:r,routes:[(0,E.a)({path:"/stafftools/hosted_compute_ims_admin",Component:S}),(0,E.a)({path:"/stafftools/hosted_compute_ims_admin/curated/new_image",Component:B}),(0,E.a)({path:"/stafftools/hosted_compute_ims_admin/curated/new_pointer",Component:W}),(0,E.a)({path:"/stafftools/hosted_compute_ims_admin/curated/:image_definition_id",Component:F})]}))},51550:(e,t,i)=>{i.d(t,{A:()=>a});let a=(e,t)=>{let i=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&i.host===a.host&&i.pathname===a.pathname&&i.search===a.search}},27788:(e,t,i)=>{i.d(t,{Z:()=>m,o:()=>h});var a=i(96540),r=i(47767),s=i(45588),n=i(84976),l=i(51550),d=i(92812),o=i(56725),c=i(99523);let m=()=>{let{routes:e,history:t}=a.useContext(d.B),n=(0,r.Zp)();return a.useCallback((r,d={})=>{let m=(0,s.o1)(r).pathname;if((0,s.ue)(e,m)){(0,l.A)(location.href,r.toString())||(0,o.SC)("react");let{preventAutofocus:e,...t}=d;(0,a.startTransition)(()=>{n(r,e?{...t,state:{[c.V]:!0,...t.state}}:t);let{turbo:i,...a}=window.history.state;window.history.replaceState({...a,skipTurbo:!0},"",location.href)})}else{let e=t.createHref(r);(async()=>{let{softNavigate:t}=await Promise.all([i.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),i.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(i.bind(i,63120));t(e)})()}},[t,n,e])},h=()=>{let[e]=(0,n.ok)(),t=m(),{pathname:i}=(0,r.zy)(),s=a.useCallback((a,r={})=>{t({pathname:i,search:(0,n.PI)("function"==typeof a?a(e):a).toString()},r)},[e,t,i]);return[e,s]}},86233:(e,t,i)=>{i.d(t,{a:()=>a});function a({path:e,Component:t,shouldNavigateOnError:i,transitionType:a,children:r}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let i=`${e.pathname}${e.search}`;t=await window.fetch(i,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom","X-React-Router":"json"}})}catch(e){return{type:i?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:i?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:i?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:a,children:r}}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-7901e7","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_primer_react_lib-esm_DataTable_DataTable_js","vendors-node_modules_primer_react_lib-esm_Blankslate_Blankslate_js-node_modules_primer_react_-232e30","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_react-core_register-app_ts"],()=>t(15717)),e.O()}]);
//# sourceMappingURL=hosted-compute-ims-stafftools-55356658202e.js.map