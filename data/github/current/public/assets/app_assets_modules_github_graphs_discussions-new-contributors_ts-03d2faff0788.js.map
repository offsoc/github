{"version":3,"file":"chunk-app_assets_modules_github_graphs_discussions-new-contributors_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/d3-array/src/extent.js","app/assets/modules/github/d3/tip.ts","app/assets/modules/github/graphs/discussions-new-contributors.ts"],"sourcesContent":["export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n// d3.tip\n// Copyright (c) 2013 Justin Palmer\n//\n// Tooltips for d3.js SVG visualizations\n\nimport {select, selection} from 'd3-selection'\nimport type {Selection} from 'd3-selection'\n\nfunction getSVGNode(el: Selection): SVGSVGElement {\n  const node = el.node()\n  if (node.tagName.toLowerCase() === 'svg') {\n    return node\n  }\n\n  return node.ownerSVGElement\n}\n\ninterface BBox {\n  nw: SVGPoint\n  ne: SVGPoint\n  se: SVGPoint\n  sw: SVGPoint\n  n: SVGPoint\n  s: SVGPoint\n  e: SVGPoint\n  w: SVGPoint\n}\n\ntype DatumCallback<T> = (datum: T) => string\n\nexport interface Tip<T> {\n  (selection: Selection): void\n  attr(name: string, value: string | null | DatumCallback<T>): Tip<T>\n  offset(value: [number, number]): Tip<T>\n  html(value: DatumCallback<T>): Tip<T>\n  hide(): Tip<T>\n  show: (...items: unknown[]) => Tip<T>\n}\n\nexport default function d3Tip<T>(): Tip<T> {\n  const node = initNode()\n  let svg = null\n  let point = null\n\n  function offset() {\n    return [0, 0]\n  }\n  function html() {\n    return ' '\n  }\n\n  function tip(el: Selection) {\n    svg = getSVGNode(el)\n    point = svg.createSVGPoint()\n    document.body.appendChild(node)\n  }\n\n  // Public - show the tooltip on the screen\n  //\n  // Returns a tip\n  tip.show = function (event, d) {\n    const content = html(d)\n    const poffset = offset(d)\n    const dir = 'n'\n    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n    const scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft\n\n    node.innerHTML = content\n    node.style.opacity = '1'\n    node.style.pointerEvents = 'all'\n\n    const coords = directionN(point, node, event.target)\n    node.classList.toggle(dir, true)\n    node.style.top = `${coords.top + poffset[0] + scrollTop}px`\n    node.style.left = `${coords.left + poffset[1] + scrollLeft}px`\n\n    return tip\n  }\n\n  // Public - hide the tooltip\n  //\n  // Returns a tip\n  tip.hide = function () {\n    node.style.opacity = '0'\n    node.style.pointerEvents = 'none'\n    return tip\n  }\n\n  // Public: Proxy attr calls to the d3 tip container.  Sets attribute value.\n  //\n  // n - name of the attribute\n  // v - value of the attribute\n  //\n  // Returns the tip\n  tip.attr = function (name: string, value: string | null | DatumCallback<T>) {\n    selection.prototype.attr.apply(select(node), [name, value])\n    return tip\n  }\n\n  // Public: Sets the offset of the tip\n  //\n  // Returns the tip\n  tip.offset = function (value: [number, number]) {\n    offset = function () {\n      return value\n    }\n\n    return tip\n  }\n\n  // Public: sets the html value of the tooltip\n  //\n  // Returns the tip\n  tip.html = function (value: DatumCallback<T>) {\n    html = value\n    return tip\n  }\n\n  return tip\n}\n\nfunction directionN(point: SVGPoint, node: HTMLElement, target: Element): {top: number; left: number} {\n  const bbox = getScreenBBox(target, point)\n  return {\n    top: bbox.n.y - node.offsetHeight,\n    left: bbox.n.x - node.offsetWidth / 2,\n  }\n}\n\nfunction initNode(): HTMLElement {\n  const node = document.createElement('div')\n\n  node.style.position = 'absolute'\n  node.style.top = '0'\n  node.style.opacity = '0'\n  node.style.pointerEvents = 'none'\n  node.style.boxSizing = 'border-box'\n\n  return node\n}\n\n// Gets the screen coordinates of a shape.\n//\n// Given a shape on the screen, will return an SVGPoint for the directions\n// n(north), s(south), e(east), w(west), ne(northeast), se(southeast), nw(northwest),\n// sw(southwest).\n//\n//    +-+-+\n//    |   |\n//    +   +\n//    |   |\n//    +-+-+\n//\n// Returns an Object {n, s, e, w, nw, sw, ne, se}\nfunction getScreenBBox(target: Element, point: SVGPoint): BBox {\n  let targetel = target\n  while ('undefined' === typeof targetel.getScreenCTM && 'undefined' === targetel.parentNode) {\n    targetel = targetel.parentNode\n  }\n  const bbox = {}\n  const matrix = targetel.getScreenCTM()\n  const tbbox = targetel.getBBox()\n  const width = tbbox.width\n  const height = tbbox.height\n  const x = tbbox.x\n  const y = tbbox.y\n\n  point.x = x\n  point.y = y\n  bbox.nw = point.matrixTransform(matrix)\n  point.x += width\n  bbox.ne = point.matrixTransform(matrix)\n  point.y += height\n  bbox.se = point.matrixTransform(matrix)\n  point.x -= width\n  bbox.sw = point.matrixTransform(matrix)\n  point.y -= height / 2\n  bbox.w = point.matrixTransform(matrix)\n  point.x += width\n  bbox.e = point.matrixTransform(matrix)\n  point.x -= width / 2\n  point.y -= height / 2\n  bbox.n = point.matrixTransform(matrix)\n  point.y += height\n  bbox.s = point.matrixTransform(matrix)\n\n  return bbox\n}\n","import {axisBottom, axisLeft} from 'd3-axis'\nimport {controller, target} from '@github/catalyst'\nimport {max as d3max, extent} from 'd3-array'\nimport {scaleLinear, scaleTime} from 'd3-scale'\nimport {timeFormat, utcFormat} from 'd3-time-format'\nimport d3Tip from '../d3/tip'\nimport {fetchPoll} from '@github-ui/fetch-utils'\nimport {line} from 'd3-shape'\nimport {select} from 'd3-selection'\n\ninterface GraphData {\n  date: Date\n  value: number\n  type: string | null\n}\ntype Data = GraphData[]\ntype GraphLines = Array<{class: string; name: string; delta: number; data: Data}>\n\nasync function fetchData(url: string): Promise<Response> {\n  const response = await fetchPoll(url, {headers: {accept: 'application/json'}})\n  return await response\n}\n\n@controller\nclass DiscussionsNewContributorsElement extends HTMLElement {\n  @target graph: HTMLElement\n\n  async connectedCallback() {\n    const graph = this.graph\n    const url = graph.getAttribute('data-url')\n    if (!url) {\n      return\n    }\n\n    graph.classList.add('is-graph-loading')\n    graph.classList.remove('is-graph-load-error', 'is-graph-empty')\n\n    try {\n      const response = await fetchData(url)\n\n      graph.classList.remove('is-graph-loading')\n      const data = await response.json()\n\n      const observer = new ResizeObserver(entries => {\n        /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n        for (const el of graph.querySelectorAll('svg.viz')) {\n          el.remove()\n        }\n\n        for (const entry of entries) {\n          if (entry.target === graph) {\n            render(graph, data)\n          }\n        }\n      })\n      observer.observe(graph)\n    } catch (error) {\n      graph.classList.remove('is-graph-loading')\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (typeof error.message === 'string' && error.message.match('HTTP 404')) {\n        graph.classList.add('is-graph-empty')\n      } else {\n        graph.classList.add('is-graph-load-error')\n        throw error\n      }\n    }\n  }\n}\n\nfunction render(container: HTMLElement, lines: GraphLines) {\n  const width = container.clientWidth\n  const height = container.clientHeight\n\n  const margin = {top: 50, right: 20, bottom: 40, left: 50}\n  const calculatedWidth = width - margin.left - margin.right\n  const calculatedHeight = height - margin.top - margin.bottom\n\n  const longFormat = utcFormat('%B %-d %Y')\n  const shortFormat = utcFormat('%-m/%-d')\n\n  const tip = d3Tip<GraphData>()\n    .attr('class', 'svg-tip')\n    .offset([-10, 0])\n    .html(function (d) {\n      // eslint-disable-next-line github/unescaped-html-literal\n      return `<strong>${longFormat(d.date)}</strong><br> ${d.value} contributors`\n    })\n\n  // base graph\n  const svg = select(container)\n    .append('svg')\n    .attr('class', 'viz')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('alt', 'A graph of new contributors to discussions on this repository')\n    .attr('aria-describedby', 'discussions-new-contributors-description')\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`)\n    .call(tip)\n\n  let description = ''\n  for (const l of lines) {\n    description += `${l.name}: `\n\n    for (const d of l.data) {\n      description += `${d.value} on ${shortFormat(d.date)} `\n    }\n  }\n\n  svg\n    .append('div')\n    .attr('text', description)\n    .attr('style', 'display: none;')\n    .attr('id', 'discussions-new-contributors-description')\n\n  // dates should be uniform across all lines\n  const [startDay, endDay] = extent(lines[0]!.data, c => c.date)\n\n  // need to check all lines for maximum value\n  let max = 0\n  for (const l of lines) {\n    max = Math.max(d3max(l.data, c => c.value) || -Infinity, max)\n  }\n\n  // x-axis\n  const xTickValues = lines[0]!.data.map(c => c.date)\n  const x = scaleTime().domain([startDay!, endDay!]).range([0, calculatedWidth])\n  svg\n    .append('g')\n    .attr('transform', `translate(0, ${calculatedHeight})`)\n    .attr('class', 'tick-labels-x')\n    .call(\n      axisBottom(x)\n        .tickSize(0)\n        .tickValues(xTickValues)\n        .tickFormat(timeFormat('%-m/%-d') as (value: Date | {valueOf(): number}, i: number) => string),\n    )\n\n  // y-axis\n  const y = scaleLinear().domain([0, max]).range([calculatedHeight, 0])\n  svg.append('g').attr('class', 'tick-labels-y').call(axisLeft(y).ticks(4).tickSize(0))\n\n  // grid for y\n  svg\n    .append('g')\n    .attr('class', 'tick-y')\n    .call(\n      axisLeft(y)\n        .ticks(4)\n        .tickSize(-calculatedWidth)\n        .tickFormat(() => {\n          return ''\n        }),\n    )\n\n  // grid for x\n  svg\n    .append('g')\n    .attr('class', 'tick-x')\n    .attr('transform', `translate(0,${calculatedHeight})`)\n    .call(\n      axisBottom(x)\n        .tickValues(xTickValues.slice(0, -1)) // we remove the last element from the array to avoid adding the last grid line\n        .tickSize(-calculatedHeight)\n        .tickFormat(() => {\n          return ''\n        }),\n    )\n\n  // x-axis label\n  svg\n    .append('text')\n    .attr('class', 'axis-label')\n    .attr('text-anchor', 'middle')\n    .attr('x', calculatedWidth / 2)\n    .attr('y', height - margin.top)\n    .text('Timeline')\n\n  // y-axis label\n  svg\n    .append('text')\n    .attr('class', 'axis-label')\n    .attr('transform', 'rotate(-90)') // this rotation changes the x,y below\n    .attr('x', -calculatedHeight / 2)\n    .attr('y', -margin.bottom - 10)\n    .attr('dy', '0.71em')\n    .style('text-anchor', 'middle')\n    .text('Quantity')\n\n  // graph all the lines\n  for (const l of lines) {\n    svg\n      .append('path')\n      .datum(l.data)\n      .attr('class', l.class)\n      .attr(\n        'd',\n        line<GraphData>()\n          .x(function (d) {\n            return x(d.date)\n          })\n          .y(function (d) {\n            return y(d.value)\n          }),\n      )\n  }\n\n  // add all of the points\n  for (const l of lines) {\n    svg\n      .append('g')\n      .selectAll('dot')\n      .data(l.data)\n      .enter()\n      .append('circle')\n      .attr('cx', function (d) {\n        return x(d.date)\n      })\n      .attr('cy', function (d) {\n        return y(d.value)\n      })\n      .attr('r', 5)\n      .attr('class', l.class)\n      .on('mouseover', tip.show)\n      .on('mouseout', tip.hide)\n  }\n}\n"],"names":["values","valueof","min","max","undefined","value","index","d3Tip","node","initNode","document","createElement","style","position","top","opacity","pointerEvents","boxSizing","point","offset","html","tip","el","svg","tagName","toLowerCase","ownerSVGElement","createSVGPoint","body","appendChild","show","event","d","content","poffset","scrollTop","documentElement","scrollLeft","innerHTML","coords","directionN","target","bbox","getScreenBBox","targetel","getScreenCTM","parentNode","matrix","tbbox","getBBox","width","height","x","y","nw","matrixTransform","ne","se","sw","w","e","n","s","offsetHeight","left","offsetWidth","classList","toggle","hide","attr","name","selection","prototype","apply","select","fetchData","url","response","fetchPoll","headers","accept","DiscussionsNewContributorsElement","HTMLElement","connectedCallback","graph","getAttribute","add","remove","data","json","observer","ResizeObserver","entries","querySelectorAll","entry","render","container","lines","clientWidth","clientHeight","calculatedWidth","calculatedHeight","longFormat","utcFormat","shortFormat","date","append","call","description","l","startDay","endDay","extent","c","Math","d3max","Infinity","xTickValues","map","scaleTime","domain","range","axisBottom","tickSize","tickValues","tickFormat","timeFormat","scaleLinear","axisLeft","ticks","slice","text","datum","class","line","selectAll","enter","on","observe","error","message","match","controller"],"sourceRoot":""}