<%# erblint:counter DeprecatedComponentsCounter 1 %>
<details class="details-reset details-overlay d-inline-block position-relative px-3" id="branch-menu">
  <%= render Primer::ButtonComponent.new(tag: :summary, scheme: :link, "aria-haspopup": "menu") do %>
    Branch
    <span class="dropdown-caret hide-sm"></span>
  <% end %>

  <details-menu
    class="SelectMenu SelectMenu--hasFilter right-0" role="menu"
    src="<%= actions_cache_branches_menu_path query: actions_filtered_query(filters: cache_item_filters) %>"><%# erblint:disable Primer::Accessibility::DetailsMenuMigration %>
    <div class="SelectMenu-modal">
      <header class="SelectMenu-header">
        <h3 class="SelectMenu-title">Filter by branch</h3>
      </header>

      <div class="SelectMenu-filter">
        <input
          id="branch-filter"
          class="SelectMenu-input form-control js-filterable-field"
          type="text"
          autocomplete="off"
          spellcheck="false"
          placeholder="Find a branch"
          aria-label="Find a branch"
          autofocus>
      </div>
      <include-fragment class="SelectMenu-loading" aria-label="Loading branches">
        <%= render(Primer::Beta::Spinner.new) %>
      </include-fragment>
    </div>
  </details-menu>
</details>
