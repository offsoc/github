"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_actions_variables_variables-input-element_ts"],{40912:(t,e,a)=>{a.r(e);var i=a(39595);function s(t,e,a,i){var s,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(n=(r<3?s(n):r>3?s(e,a,n):s(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n}let r=class VariablesInputElement extends HTMLElement{nameInput(){let t=this.name.value;if(""===t){this.hideValidationError();return}if(t.match(VariablesInputElement.GITHUB_REGEX)){this.setNameValidationError(VariablesInputElement.GITHUB_PREFIX_RULE);return}if(this.hideValidationError(),t.match(VariablesInputElement.FIRST_CHAR_REGEX))this.hideValidationError();else{this.setNameValidationError(VariablesInputElement.FIRST_CHAR_RULES);return}t.match(VariablesInputElement.NAME_REGEX)?this.hideValidationError():this.setNameValidationError(VariablesInputElement.NAME_RULE)}setNameValidationError(t){this.name.setCustomValidity(t),this.name.style.borderColor="var(--borderColor-danger-emphasis, var(--color-danger-emphasis))",this.showValidationMessage(t)}showValidationMessage(t){this.validationError.textContent=t,this.validationMessage.hidden=!1}hideValidationMessage(){this.validationMessage.hidden=!0}hideValidationError(){this.name.setCustomValidity(""),this.name.style.borderColor="",this.hideValidationMessage(),this.submitDisabled=!1}get submitDisabled(){return this.submitButton.hasAttribute("aria-disabled")}set submitDisabled(t){t?this.submitButton.setAttribute("aria-disabled","true"):this.submitButton.removeAttribute("aria-disabled"),this.submitButton.classList.toggle("disabled",t)}set submitButtonText(t){this.submitButton.textContent=t}async submit(t){if(t.preventDefault(),!this.submitDisabled){this.hideValidationMessage(),this.submitDisabled=!0,this.operation===VariablesInputElement.ADD_OPERATION?this.submitButtonText=VariablesInputElement.ADD_BUTTON_DISABLED_TEXT:this.submitButtonText=VariablesInputElement.UPDATE_BUTTON_DISABLED_TEXT;try{let t=await fetch(this.form.action,{method:"POST",body:new FormData(this.form)});if(t.ok)window.location.replace(t.url);else{let e=await t.json(),a=e.status;409===a?this.setNameValidationError(e.error):this.showValidationMessage(e.error),429!==a&&409!==a&&(this.submitDisabled=!1)}}catch(t){this.showValidationMessage(VariablesInputElement.DEFAULT_CREATE_ERROR),this.submitDisabled=!1}this.operation===VariablesInputElement.ADD_OPERATION?this.submitButtonText=VariablesInputElement.ADD_BUTTON_TEXT:this.submitButtonText=VariablesInputElement.UPDATE_BUTTON_TEXT}}};r.NAME_REGEX="^[A-Za-z_][A-Za-z0-9_]*$",r.GITHUB_REGEX="^[gG][iI][tT][hH][uU][bB]_",r.FIRST_CHAR_REGEX="^[A-Za-z_]",r.FIRST_CHAR_RULES="Variable name can only start with a letter or underscore.",r.GITHUB_PREFIX_RULE='Variable name cannot start with "GITHUB_" prefix.',r.NAME_RULE="Variable name can only contain alphanumeric characters.\n Special characters and spaces are not allowed.",r.DEFAULT_CREATE_ERROR="Unable to add variable. Please try again.",r.DEFAULT_UPDATE_ERROR="Unable to update variable. Please try again.",r.ADD_BUTTON_TEXT="Add variable",r.ADD_BUTTON_DISABLED_TEXT="Adding...",r.UPDATE_BUTTON_TEXT="Save variable",r.UPDATE_BUTTON_DISABLED_TEXT="Saving...",r.ADD_OPERATION="add",r.UPDATE_OPERATION="update",s([i.aC],r.prototype,"name",void 0),s([i.aC],r.prototype,"validationError",void 0),s([i.aC],r.prototype,"validationMessage",void 0),s([i.aC],r.prototype,"submitButton",void 0),s([i.aC],r.prototype,"form",void 0),s([i.CF],r.prototype,"operation",void 0),r=s([i.p_],r)}}]);
//# sourceMappingURL=app_components_actions_variables_variables-input-element_ts-8298214cf832.js.map