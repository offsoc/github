{"version":3,"file":"demo-repo-tour-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/demo-repo-tour/DemoRepoTour.tsx","ui/packages/demo-repo-tour/demo-repo-tour.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/react-core/deferred-registry.ts","ui/packages/react-core/prevent-autofocus.ts","ui/packages/react-core/react-partial-anchor.ts","ui/packages/react-core/react-partial-registry.ts","ui/packages/react-core/ReactPartialElement.tsx","ui/packages/react-core/register-partial.ts","ui/packages/react-profiling-mode/src/index.ts","ui/packages/safe-storage/session-storage.ts","ui/packages/soft-nav/events.ts","ui/packages/soft-nav/state.ts","ui/packages/soft-nav/states.ts","ui/packages/soft-nav/stats.ts","ui/packages/soft-nav/utils.ts","ui/packages/test-id-props/test-id-props.ts","ui/packages/use-analytics/use-analytics.ts","ui/packages/use-navigate/use-navigate.ts","ui/packages/use-safe-storage/use-local-storage.ts","ui/packages/react-core/PartialRouter.tsx","ui/packages/react-core/PartialEntry.tsx","ui/packages/react-core/ReactBaseElement.tsx","ui/packages/safe-html/SafeHTML.tsx"],"sourcesContent":["// Some documentations, gotchas, etc: https://github.com/github/flywheel/discussions/185\n//\n// See how this was used in flywheel: https://github.com/github/github/pull/306013\n//\n// Pay special attention to:\n//  * DemoRepoProps Ruby class. Used for generating the list of steps passed to the component\n//  * app/views/comments/_title.html.erb which shows how to use the js classes and `flywheel-return-to-tour` component\n//    for keyboard accessibile navigation\nimport {Link, Octicon, Text, Heading, Button, Box, Label, useResizeObserver} from '@primer/react'\nimport {testIdProps} from '@github-ui/test-id-props'\nimport {CheckIcon, CheckCircleFillIcon, CircleIcon, ChevronDownIcon} from '@primer/octicons-react'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {useClickAnalytics} from '@github-ui/use-analytics'\nimport {AnalyticsProvider} from '@github-ui/analytics-provider'\nimport {useLocalStorage} from '@github-ui/use-safe-storage/local-storage'\nimport {useEffect, useState, useCallback, useRef} from 'react'\nimport {type SafeHTMLString, SafeHTMLText} from '@github-ui/safe-html'\nimport styled, {keyframes} from 'styled-components'\n\nconst BottomPulseAnimation = keyframes`\n    0% {\n      transform: scale(1);\n      opacity: .2;\n    }\n    50% {\n      transform: scale(4);\n      opacity: .2;\n    }\n    100% {\n      transform: scale(4);\n      opacity: 0;\n    }\n}\n`\n\nconst TopPulseAnimation = keyframes`\n    0% {\n      transform: scale(1);\n      opacity: .5;\n    }\n    50% {\n      opacity: .5;\n      transform: scale(3);\n    }\n    100% {\n      transform: scale(4);\n      opacity: 0;\n    }\n}\n`\n\nconst TopPulse = styled.circle`\n  animation: ${TopPulseAnimation} 2s infinite;\n  transform-origin: center center;\n  fill: var(--display-green-bgColor-muted, var(--color-scale-green-2));\n  animation-timing-function: linear;\n`\n\nconst BottomPulse = styled.circle`\n  animation: ${BottomPulseAnimation} 2s infinite;\n  transform-origin: center center;\n  fill: var(--display-green-bgColor-muted, var(--color-scale-green-2));\n`\n\nexport interface DemoRepoTourProps {\n  tour_steps: TourStep[]\n  upgrade_cta_path: string\n  referral_organization_id: number | null\n  repository_name: string\n}\n\nexport interface TourStep {\n  title: string\n  description: string\n  key: string\n  path: string\n  called_out_element_css_class: string | null\n}\n\nexport function DemoRepoTour(props: DemoRepoTourProps) {\n  return (\n    // To use the `useAnalytics` package the function/component must be wrapped in an `AnalyticsProvider`.\n    // The wrapping must be done around the component or else the component will fail to load. So\n    // we have this simple function that wraps the main tour UI in an `AnalyticsProvider`.\n    <AnalyticsProvider appName={'flywheel_demo_repo_tour'} category=\"\" metadata={{}}>\n      <DemoRepoTourContent {...props} />\n    </AnalyticsProvider>\n  )\n}\n\nfunction DemoRepoTourContent(props: DemoRepoTourProps) {\n  const visitedStepsKey = `demo-tour-visited-steps-${props.repository_name}`\n  const calloutOffsetWidth = 50\n  const upgradeCtaPath = props.upgrade_cta_path\n  const referralOrganizationId = `${props.referral_organization_id}`\n  const [TourCalloutStyles, setTourCalloutStyles] = useState({top: 0, left: 0, display: 'none'})\n  const [visitedSteps, setVisitedSteps] = useLocalStorage<string[]>(visitedStepsKey, [])\n  const [currentStepKey, setCurrentStepKey] = useState<string | null>()\n  const [isMinimized, setIsMinimized] = useLocalStorage<boolean>('demo-tour-is-minimized', false)\n  const navigate = useNavigate()\n  const {sendClickAnalyticsEvent} = useClickAnalytics()\n  const smallScreenMarginPercent = 3\n  const smallScreenWidthPercent = 100 - smallScreenMarginPercent * 2\n  const TourWrapper = useRef<HTMLDivElement | null>(null)\n\n  const recordTourStepVisited = useCallback(\n    (step_key: string, newStepKeys: string[]) => {\n      sendClickAnalyticsEvent({\n        category: 'flywheel_repo_tour_step_clicks',\n        referral_organization_id: referralOrganizationId,\n        action: `${step_key}_clicked`,\n      })\n\n      // If all tour steps have now been visited\n      if (newStepKeys.length === props.tour_steps.length) {\n        sendClickAnalyticsEvent({\n          category: 'flywheel_repo_tour_completions',\n          referral_organization_id: referralOrganizationId,\n          action: 'final_step_clicked',\n        })\n      }\n    },\n    [props.tour_steps.length, referralOrganizationId, sendClickAnalyticsEvent],\n  )\n\n  const setupCallout = useCallback((selectedTourStep: TourStep) => {\n    const calledOutElement = document.querySelector(`.${selectedTourStep.called_out_element_css_class}`) as HTMLElement\n\n    if (calledOutElement) {\n      // Must use getBoundingClientRect() because offsetTop/Left is relative to the parent's position and we need\n      // the absolute position\n      const boundingRect = calledOutElement.getBoundingClientRect()\n\n      const isOutsideViewport = boundingRect.bottom > window.innerHeight\n      if (isOutsideViewport) {\n        calledOutElement.scrollIntoView({behavior: 'smooth'})\n      }\n      setTourCalloutStyles({\n        // Must add window scroll since the bounding rect is relative to the viewport\n        top: boundingRect.y + window.scrollY + boundingRect.height / 2, // center the callout vertically\n        left: boundingRect.x + window.scrollX - calloutOffsetWidth,\n        display: 'block',\n      })\n    } else {\n      setTourCalloutStyles(previous => ({...previous, display: 'none'}))\n    }\n  }, [])\n\n  // Return focus to the Tour UI when a keyboard user clicks a `<flywheel-return-to-tour>` link\n  useEffect(() => {\n    const handleReturnToTour = () => {\n      if (TourWrapper.current) {\n        TourWrapper.current.focus()\n      }\n    }\n\n    document.addEventListener('return-to-flywheel-tour', handleReturnToTour)\n\n    return () => {\n      document.removeEventListener('return-to-flywheel-tour', handleReturnToTour)\n    }\n  }, [])\n\n  useEffect(() => {\n    // We need to set the visited tour steps in a separate effect otherwise\n    // there are race conditions between setting the current tour step and updating\n    // visited tour steps. So this effect runs *after* the current tour step is set.\n    if (currentStepKey) {\n      if (!visitedSteps.includes(currentStepKey)) {\n        const newTourStepKeys = [...visitedSteps, currentStepKey]\n        recordTourStepVisited(currentStepKey, newTourStepKeys)\n        setVisitedSteps(newTourStepKeys)\n      }\n    }\n  }, [currentStepKey, visitedSteps, recordTourStepVisited, setVisitedSteps])\n\n  useEffect(() => {\n    // React won't let us use `window` outside of `useEffect`. We also can't update a variable outside the scope\n    // of `useEffect` without `useRef` or `useState`. So in the effect we check the current path and set the current\n    // tour step if it matches the path.\n    //\n    // It is possible we could clean this up when this `useLocation` bug is fixed:\n    //   https://github.com/github/web-systems/issues/1683\n    const setupCurrentTourStep = () => {\n      const selectedTourStep = props.tour_steps.find(tourStep => {\n        return tourStep.path === window.location.pathname\n      })\n\n      if (selectedTourStep) {\n        setCurrentStepKey(selectedTourStep.key)\n        setupCallout(selectedTourStep)\n      } else if (visitedSteps.length > 0) {\n        // If some tour steps have been visited, but we're not currently on the\n        // page for one of the tour steps, then don't show a selected tour step.\n        setCurrentStepKey(null)\n        setTourCalloutStyles(previous => ({...previous, display: 'none'}))\n      }\n    }\n\n    setupCurrentTourStep()\n\n    document.addEventListener('turbo:load', () => {\n      setupCurrentTourStep()\n    })\n  }, [props.tour_steps, setupCallout, visitedSteps])\n\n  // If the window is resized we need to reposition the callout\n  useResizeObserver(() => {\n    const selectedTourStep = props.tour_steps.find(tourStep => tourStep.key === currentStepKey)\n    if (!selectedTourStep) return\n    setupCallout(selectedTourStep)\n  })\n\n  return (\n    <>\n      <Box\n        className=\"rounded\"\n        ref={TourWrapper}\n        id=\"flywheel-github-team-tour\"\n        tabIndex={-1}\n        sx={{\n          bg: 'canvas.default',\n          position: 'fixed',\n          width: [`${smallScreenWidthPercent}%`, '450px'],\n          bottom: 0,\n          right: 0,\n          boxShadow: 'shadow.large',\n          border: '1px solid',\n          borderColor: 'border.default',\n          m: [`${smallScreenMarginPercent}%`, 5],\n          overflow: 'hidden',\n          zIndex: 100,\n        }}\n      >\n        <div style={{backgroundImage: 'linear-gradient(to left, #79C0FF, #56D364)', height: '4px', width: '100%'}} />\n        <Box sx={{display: ['none', 'block']}}>\n          {!isMinimized && <TourChecklist />}\n          {isMinimized && <MinimizedTourBox />}\n        </Box>\n        <SmallScreenNotice />\n      </Box>\n      <TourCallout />\n    </>\n  )\n\n  function TourCallout() {\n    const display = isMinimized ? 'none' : TourCalloutStyles.display\n    return (\n      <Box\n        sx={{\n          display,\n          position: 'absolute',\n          zIndex: 99,\n          pointerEvents: 'none',\n          // Center the callout vertically\n          transform: 'translate(0, -50%)',\n          top: `${TourCalloutStyles.top}px`,\n          left: `${TourCalloutStyles.left}px`,\n          color: 'accent.emphasis',\n          mt: 1,\n        }}\n      >\n        <PulsingOrb />\n      </Box>\n    )\n  }\n\n  function PulsingOrb() {\n    return (\n      <svg\n        viewBox=\"0 0 90 90\"\n        fill=\"var(--display-green-bgColor-emphasis, var(--color-scale-green-5))\"\n        height=\"70\"\n        width=\"70\"\n        aria-hidden=\"true\"\n        style={{pointerEvents: 'none'}}\n      >\n        <BottomPulse cx=\"50%\" cy=\"50%\" r=\"10\" />\n        <TopPulse cx=\"50%\" cy=\"50%\" r=\"10\" />\n        <circle cx=\"50%\" cy=\"50%\" r=\"9\" />\n      </svg>\n    )\n  }\n\n  function TourChecklist() {\n    return (\n      <>\n        <Box sx={{p: 3}} {...testIdProps('tour-checklist')}>\n          <Heading sx={{fontSize: 2, mb: 0, display: 'flex', justifyContent: 'space-between'}} as=\"h2\">\n            <span style={{display: 'flex', alignItems: 'center'}}>\n              GitHub Team feature tour{' '}\n              <Label variant=\"success\" sx={{mx: 2}}>\n                Alpha\n              </Label>\n              <Link\n                href=\"https://gh.io/github-team-demo-feedback\"\n                target=\"_blank\"\n                sx={{fontWeight: 'normal', fontSize: 0}}\n                underline\n              >\n                Feedback\n              </Link>\n            </span>\n            <Button\n              onClick={() => setIsMinimized(true)}\n              variant=\"invisible\"\n              size=\"small\"\n              {...testIdProps('minimize-tour-button')}\n            >\n              <Octicon aria-label=\"Minimize feature tour\" icon={ChevronDownIcon} sx={{color: 'fg.muted'}} />\n            </Button>\n          </Heading>\n          <Heading sx={{fontSize: 1, mb: 3, color: 'fg.muted', fontWeight: 'normal'}} as=\"h3\">\n            Explore advanced collaboration features for growing teams\n          </Heading>\n          <ol className=\"list-style-none\" aria-label=\"List of features in the demo repo tour\">\n            {props.tour_steps.map((step, index) => (\n              <TourListItem key={step.key} step={step} nextStepKey={props.tour_steps[index + 1]?.key} />\n            ))}\n          </ol>\n        </Box>\n        <ReadyToUpgradeComponent />\n      </>\n    )\n  }\n\n  function MinimizedTourBox() {\n    return (\n      <Box sx={{p: 3}} {...testIdProps('minimized-tour')}>\n        <Heading sx={{fontSize: 2, mb: 2}} as=\"h2\">\n          GitHub Team feature tour\n        </Heading>\n        <Text as=\"p\" sx={{color: 'fg.muted', mb: 3}}>\n          Take a tour of the top features you get when you upgrade to a team plan. Try out the advanced GitHub Team\n          features available in both public and private repositories.\n        </Text>\n        <Button\n          variant=\"primary\"\n          autoFocus\n          onClick={() => setIsMinimized(false)}\n          {...testIdProps('resume-tour-button')}\n        >\n          Resume tour\n        </Button>\n      </Box>\n    )\n  }\n\n  function SmallScreenNotice() {\n    return (\n      <Box sx={{display: ['block', 'none']}}>\n        <Box sx={{p: 3}}>\n          <Heading sx={{fontSize: 2, mb: 2}} as=\"h2\">\n            GitHub Team feature tour is available on larger screens\n          </Heading>\n          <Text as=\"p\" sx={{color: 'fg.muted', mb: 3}}>\n            Previewing GitHub team features is not available on mobile.\n          </Text>\n        </Box>\n        <ReadyToUpgradeComponent />\n      </Box>\n    )\n  }\n\n  function ReadyToUpgradeComponent() {\n    return (\n      <Box sx={{bg: 'canvas.subtle', p: 3, borderTop: '1px solid', borderColor: 'border.default'}}>\n        {!isTourCompleted() && <InitialCallToAction />}\n        {isTourCompleted() && <ExpandedCallToAction />}\n      </Box>\n    )\n  }\n\n  function InitialCallToAction() {\n    return (\n      <Text sx={{color: 'fg.subtle'}}>\n        Ready to upgrade your organization?{' '}\n        <Link href={upgradeCtaPath} onClick={recordClickedUpradeCTA} inline>\n          Upgrade to GitHub Team\n        </Link>\n      </Text>\n    )\n  }\n\n  // When all tour steps have been visited we show an expanded final call to action\n  function ExpandedCallToAction() {\n    return (\n      <span>\n        <Heading sx={{fontSize: 1, mb: 3}} as=\"h3\">\n          In addition,{' '}\n          <Link href=\"https://github.com/pricing\" target=\"_blank\" inline>\n            GitHub Team\n          </Link>{' '}\n          includes:\n        </Heading>\n\n        <ul className=\"list-style-none\">\n          <CallToActionListItem message=\"3,000 GitHub Actions minutes per month\" />\n          <CallToActionListItem message=\"Code owners\" />\n          <CallToActionListItem message=\"Scheduled reminders\" />\n          <CallToActionListItem message=\"Wikis, GitHub Pages, and more\" />\n        </ul>\n\n        <Button as=\"a\" href={upgradeCtaPath} variant=\"primary\" sx={{mt: 2}} onClick={recordClickedUpradeCTA}>\n          Upgrade to GitHub Team\n        </Button>\n        <Link as=\"button\" sx={{fontWeight: 'bold', ml: 3}} onClick={restartTour} underline>\n          Restart tour\n        </Link>\n      </span>\n    )\n  }\n\n  function recordClickedUpradeCTA() {\n    sendClickAnalyticsEvent({\n      category: 'flwheel_repo_tour_cta',\n      referral_organization_id: referralOrganizationId,\n      action: 'upgrade_cta_clicked',\n    })\n  }\n\n  function restartTour() {\n    sendClickAnalyticsEvent({\n      category: 'flwyheel_repo_tour_restarts',\n      referral_organization_id: referralOrganizationId,\n      action: 'restart_tour_clicked',\n    })\n\n    const firstKey = props.tour_steps[0]!.key\n    localStorage.removeItem(visitedStepsKey)\n    visitTourStep(firstKey)\n  }\n\n  function CallToActionListItem({message}: {message: string}) {\n    return (\n      <li>\n        <Box sx={{display: 'flex', mb: 0, color: 'fg.subtle'}}>\n          <Box sx={{height: '18px', mr: 2, display: 'flex', alignItems: 'center'}}>\n            <Octicon aria-label=\"To do\" icon={CheckIcon} sx={{color: 'fg.subtle'}} />\n          </Box>\n          <p>{message}</p>\n        </Box>\n      </li>\n    )\n  }\n\n  function isTourCompleted() {\n    return visitedSteps.length >= props.tour_steps.length\n  }\n\n  function TourListItem({step, nextStepKey: nextTourStepKey}: {step: TourStep; nextStepKey?: string}) {\n    const {key, title, description} = step\n    const selected = currentStepKey === key\n    const checked = visitedSteps.includes(key)\n\n    return (\n      <li>\n        <Box sx={{display: 'flex', mb: 0}} key={key} {...testIdProps(`tour-step-${key}`)}>\n          <Link\n            as=\"button\"\n            sx={{height: '24px', mr: 2, display: 'flex', alignItems: 'center'}}\n            aria-label={`Visit tour feature: ${title}`}\n            onClick={() => visitTourStep(key)}\n          >\n            <TourCheckIcon checked={checked} stepTitle={title} />\n          </Link>\n          <div>\n            <Text as=\"p\" sx={{fontWeight: 'bold'}}>\n              <Link\n                as=\"button\"\n                muted\n                sx={{color: selected ? 'fg.default' : 'fg.muted'}}\n                onClick={() => visitTourStep(key)}\n              >\n                {title}\n              </Link>\n            </Text>\n            {selected && (\n              <Box sx={{mb: 3}}>\n                <SafeHTMLText html={description as SafeHTMLString} as=\"p\" sx={{color: 'fg.muted'}} />\n                <Link\n                  as=\"button\"\n                  sx={{\n                    position: 'absolute',\n                    left: '-10000px',\n                    top: 'auto',\n                    width: '1px',\n                    height: '1px',\n                    overflow: 'hidden',\n                    ':focus': {\n                      position: 'static',\n                      width: 'auto',\n                      height: 'auto',\n                    },\n                  }}\n                  onClick={() => focusOnCalledOutSection(step)}\n                >\n                  Focus &apos;{title}&apos; on the page\n                </Link>\n                {nextTourStepKey && (\n                  <Button\n                    size=\"small\"\n                    aria-label=\"View next feature in the tour\"\n                    onClick={() => visitTourStep(nextTourStepKey)}\n                    {...testIdProps('next-button')}\n                  >\n                    Next\n                  </Button>\n                )}\n              </Box>\n            )}\n          </div>\n        </Box>\n      </li>\n    )\n  }\n\n  function focusOnCalledOutSection(step: TourStep) {\n    // Unhide accessibility skip link\n    const returnToTourElements = document.querySelectorAll<HTMLElement>('.js-flywheel-return-to-tour')\n\n    for (const element of returnToTourElements) {\n      element.hidden = false\n    }\n\n    const calledOutElement = document.querySelector(`.${step.called_out_element_css_class}`) as HTMLElement\n    if (calledOutElement) {\n      // Make sure the element is focusable\n      !calledOutElement.hasAttribute('tabindex') && calledOutElement.setAttribute('tabindex', '-1')\n      calledOutElement.focus()\n    }\n  }\n\n  function TourCheckIcon({checked, stepTitle}: {checked: boolean; stepTitle: string}): JSX.Element {\n    if (checked === true) {\n      return <Octicon aria-label={`Completed: ${stepTitle}`} icon={CheckCircleFillIcon} sx={{color: 'success.fg'}} />\n    } else {\n      return <Octicon aria-label={`To do: ${stepTitle}`} icon={CircleIcon} sx={{color: 'fg.subtle'}} />\n    }\n  }\n\n  function visitTourStep(key: string) {\n    const currentStep = props.tour_steps.find(tourStep => tourStep.key === key)\n    navigate(currentStep?.path || '')\n  }\n}\n\ntry{ DemoRepoTour.displayName ||= 'DemoRepoTour' } catch {}\ntry{ DemoRepoTourContent.displayName ||= 'DemoRepoTourContent' } catch {}\ntry{ TourWrapper.displayName ||= 'TourWrapper' } catch {}\ntry{ TourCallout.displayName ||= 'TourCallout' } catch {}\ntry{ PulsingOrb.displayName ||= 'PulsingOrb' } catch {}\ntry{ TourChecklist.displayName ||= 'TourChecklist' } catch {}\ntry{ MinimizedTourBox.displayName ||= 'MinimizedTourBox' } catch {}\ntry{ SmallScreenNotice.displayName ||= 'SmallScreenNotice' } catch {}\ntry{ ReadyToUpgradeComponent.displayName ||= 'ReadyToUpgradeComponent' } catch {}\ntry{ InitialCallToAction.displayName ||= 'InitialCallToAction' } catch {}\ntry{ ExpandedCallToAction.displayName ||= 'ExpandedCallToAction' } catch {}\ntry{ CallToActionListItem.displayName ||= 'CallToActionListItem' } catch {}\ntry{ TourListItem.displayName ||= 'TourListItem' } catch {}\ntry{ TourCheckIcon.displayName ||= 'TourCheckIcon' } catch {}","import {registerReactPartial} from '@github-ui/react-core/register-partial'\nimport {DemoRepoTour} from './DemoRepoTour'\n\nregisterReactPartial('demo-repo-tour', {\n  Component: DemoRepoTour,\n})\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch (_) {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nexport function stringifyObjectValues(obj: object) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, JSON.stringify(v)]))\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","export class DeferredRegistry<T> {\n  private registrationEntries: Record<\n    string,\n    {\n      promise: Promise<T>\n      resolve?: (r: T) => void\n    }\n  > = {}\n\n  public register(name: string, registration: T) {\n    const entry = this.registrationEntries[name]\n    if (entry) {\n      entry.resolve?.(registration)\n    } else {\n      this.registrationEntries[name] = {\n        promise: Promise.resolve(registration),\n      }\n    }\n  }\n\n  public getRegistration(name: string): Promise<T> {\n    this.registrationEntries[name] ||= new Deferred()\n    return this.registrationEntries[name].promise\n  }\n}\n\nclass Deferred<T> {\n  declare promise\n  declare resolve: (r: T) => void\n\n  constructor() {\n    this.promise = new Promise<T>(resolve => {\n      this.resolve = resolve\n    })\n  }\n}\n","export const PREVENT_AUTOFOCUS_KEY = '__gh__react-core-preventAutofocus'\n","import type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\ninterface ReactPartialAnchor {\n  /**\n   * DO NOT USE THIS PROPERTY DIRECTLY. It is meant to be used with useExternalAnchor and useOnAnchorClick\n   */\n  __wrapperElement: ReactPartialAnchorElement\n}\n\nexport interface ReactPartialAnchorProps {\n  reactPartialAnchor?: ReactPartialAnchor\n}\n\nexport function usePartialAnchorProps(\n  anchorElement: ReactPartialAnchorElement | undefined | null,\n): ReactPartialAnchorProps {\n  useEffect(() => {\n    const anchor = anchorElement?.anchor\n\n    if (!anchor) {\n      return\n    }\n\n    if ('disabled' in anchor) {\n      anchor.disabled = false\n    }\n    anchor.classList.remove('cursor-wait')\n  }, [anchorElement])\n\n  if (!anchorElement) {\n    return {}\n  }\n\n  return {\n    reactPartialAnchor: {\n      __wrapperElement: anchorElement,\n    },\n  }\n}\n\nexport function useExternalAnchor(reactPartialAnchor: ReactPartialAnchor) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor || null)\n  const [open, setOpen] = useState(false)\n\n  const onClick = useCallback(() => {\n    // toggle the open state when clicked\n    setOpen(!open)\n  }, [open, setOpen])\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    ref.current.setAttribute('aria-expanded', open.toString())\n    ref.current.setAttribute('aria-haspopup', 'true')\n  }, [ref, open])\n\n  useOnAnchorClick(reactPartialAnchor, onClick)\n\n  return {\n    ref,\n    open,\n    setOpen,\n  }\n}\n\nexport function useOnAnchorClick(reactPartialAnchor: ReactPartialAnchor, onClick: (event: MouseEvent) => void) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor)\n\n  useEffect(() => {\n    const element = ref.current\n    if (!element) {\n      return\n    }\n\n    element.addEventListener('click', onClick)\n    return () => element.removeEventListener('click', onClick)\n  }, [ref, onClick])\n}\n\nexport type PropsWithPartialAnchor<T> = T & Required<ReactPartialAnchorProps>\n","import {DeferredRegistry} from './deferred-registry'\n\nexport interface PartialRegistration {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Component: React.ComponentType<any>\n}\n\nexport const partialRegistry = new DeferredRegistry<PartialRegistration>()\n\nexport function getReactPartial(appName: string) {\n  return partialRegistry.getRegistration(appName)\n}\n","import {controller} from '@github/catalyst'\nimport {getReactPartial} from './react-partial-registry'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {ReactBaseElement} from './ReactBaseElement'\nimport {PartialEntry} from './PartialEntry'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\n\n// What is this silliness? Is it react or a web component?!\n// It's a web component we use to bootstrap react partials within the monolith.\n@controller\nclass ReactPartialElement extends ReactBaseElement<EmbeddedPartialData> {\n  nameAttribute = 'partial-name'\n\n  async getReactNode(embeddedData: EmbeddedPartialData) {\n    const {Component} = await getReactPartial(this.name)\n\n    // Some React Partials will be wrapped in a react-partial-anchor, which is used to conditionally render the Partial\n    const anchorElement = this.closest<ReactPartialAnchorElement>('react-partial-anchor')\n\n    return (\n      <PartialEntry\n        partialName={this.name}\n        embeddedData={embeddedData}\n        Component={Component}\n        wasServerRendered={this.hasSSRContent}\n        ssrError={this.ssrError}\n        anchorElement={anchorElement}\n      />\n    )\n  }\n}\n","import {partialRegistry, type PartialRegistration} from './react-partial-registry'\n// Import the web component to get it registered on the window\nimport './ReactPartialElement'\n\n// NOTE: if the signature of this method changes, also update the react-partial-name ESLint rule\n// /workspaces/github/ui/packages/eslint-plugin-github-monorepo/rules/react-partial-name.js\nexport function registerReactPartial(name: string, registration: PartialRegistration) {\n  partialRegistry.register(name, registration)\n}\n","import safeStorage from '@github-ui/safe-storage'\n\nconst {getItem, setItem, removeItem} = safeStorage('localStorage')\nconst REACT_PROFILING_ENABLED = 'REACT_PROFILING_ENABLED'\n\ninterface ReactProfilingModeMethods {\n  enable: () => void\n  disable: () => void\n  isEnabled: () => boolean\n}\n\nconst ReactProfilingMode: ReactProfilingModeMethods = {\n  enable: () => setItem(REACT_PROFILING_ENABLED, 'true'),\n  disable: () => removeItem(REACT_PROFILING_ENABLED),\n  isEnabled: () => !!getItem(REACT_PROFILING_ENABLED),\n}\n\nexport default ReactProfilingMode\n","import safeStorage from './safe-storage'\n\nexport const {getItem, setItem, removeItem} = safeStorage('sessionStorage')\n","import {SOFT_NAV_STATE} from './states'\n\nexport type SoftNavMechanism = 'turbo' | 'react' | 'turbo.frame'\n\nclass SoftNavEvent extends Event {\n  mechanism: SoftNavMechanism\n\n  constructor(mechanism: SoftNavMechanism, type: string) {\n    super(type)\n    this.mechanism = mechanism\n  }\n}\n\nexport class SoftNavStartEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.START)\n  }\n}\n\nexport class SoftNavSuccessEvent extends SoftNavEvent {\n  visitCount: number\n\n  constructor(mechanism: SoftNavMechanism, visitCount: number) {\n    super(mechanism, SOFT_NAV_STATE.SUCCESS)\n    this.visitCount = visitCount\n  }\n}\n\nexport class SoftNavErrorEvent extends SoftNavEvent {\n  error: string\n\n  constructor(mechanism: SoftNavMechanism, error: string) {\n    super(mechanism, SOFT_NAV_STATE.ERROR)\n    this.error = error\n  }\n}\n\nexport class SoftNavEndEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.END)\n  }\n}\n","import {SOFT_NAV_STATE} from './states'\nimport {\n  SoftNavEndEvent,\n  SoftNavErrorEvent,\n  type SoftNavMechanism,\n  SoftNavStartEvent,\n  SoftNavSuccessEvent,\n} from './events'\nimport {markStart, sendFailureStats, sendRenderStats} from './stats'\nimport {\n  clearSoftNav,\n  getSoftNavFailReason,\n  getSoftNavMechanism,\n  setSoftNavMechanism,\n  unsetSoftNav,\n  setSoftNavReferrer,\n  setSoftNavReactAppName,\n  inSoftNav,\n  getCurrentReactAppName,\n  DEFAULT_SOFT_NAV_ERROR_REASON,\n  setLatestMechanism,\n} from './utils'\n\ninterface SoftNavOptions {\n  skipIfGoingToReactApp?: boolean\n  allowedMechanisms?: SoftNavMechanism[]\n}\n\nlet visitCount = 0\n\nexport function initSoftNav() {\n  visitCount = 0\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.INITIAL))\n\n  clearSoftNav()\n}\n\nexport function startSoftNav(mechanism: SoftNavMechanism) {\n  if (inSoftNav()) return\n\n  startProgressBar()\n  document.dispatchEvent(new SoftNavStartEvent(mechanism))\n\n  setSoftNavMechanism(mechanism)\n  setSoftNavReactAppName()\n  setSoftNavReferrer()\n  markStart()\n}\n\nexport function succeedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount += 1\n\n  document.dispatchEvent(new SoftNavSuccessEvent(getSoftNavMechanism(), visitCount))\n  endSoftNav(options)\n}\n\nexport function failSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount = 0\n  const reason = getSoftNavFailReason() || DEFAULT_SOFT_NAV_ERROR_REASON\n  document.dispatchEvent(new SoftNavErrorEvent(getSoftNavMechanism(), reason))\n\n  endProgressBar()\n  sendFailureStats(reason)\n  clearSoftNav()\n}\n\nexport function endSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  const mechanism = getSoftNavMechanism()\n  endProgressBar()\n  document.dispatchEvent(new SoftNavEndEvent(mechanism))\n\n  unsetSoftNav()\n  setLatestMechanism(mechanism)\n}\n\nexport function renderedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  sendRenderStats()\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.RENDER))\n}\n\nexport function updateFrame() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.FRAME_UPDATE))\n}\n\nfunction startProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.START))\n}\n\nfunction endProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.END))\n}\n\nfunction canTriggerEvent({skipIfGoingToReactApp, allowedMechanisms = []}: SoftNavOptions = {}) {\n  return (\n    inSoftNav() &&\n    (allowedMechanisms.length === 0 || allowedMechanisms.includes(getSoftNavMechanism())) &&\n    (!skipIfGoingToReactApp || !getCurrentReactAppName())\n  )\n}\n","export const SOFT_NAV_STATE = Object.freeze({\n  INITIAL: 'soft-nav:initial',\n  START: 'soft-nav:start',\n  SUCCESS: 'soft-nav:success',\n  ERROR: 'soft-nav:error',\n  FRAME_UPDATE: 'soft-nav:frame-update',\n  END: 'soft-nav:end',\n  RENDER: 'soft-nav:render',\n  PROGRESS_BAR: {\n    START: 'soft-nav:progress-bar:start',\n    END: 'soft-nav:progress-bar:end',\n  },\n})\n","import {sendStats} from '@github-ui/stats'\nimport {getCurrentReactAppName, getSoftNavMechanism, getSoftNavReactAppName, getSoftNavReferrer} from './utils'\nimport type {SoftNavMechanism} from './events'\n\nexport const SOFT_NAV_DURATION_MARK = 'stats:soft-nav-duration'\nexport const MECHANISM_MAPPING: Record<SoftNavMechanism | 'ui' | 'hard', PlatformBrowserSoftNavigationMechanism> = {\n  turbo: 'TURBO',\n  react: 'REACT',\n  'turbo.frame': 'FRAME',\n  ui: 'UI',\n  hard: 'HARD',\n}\nexport function markStart() {\n  // browswers only record the first ~150 resources\n  // clearing it here provides room to track additional resources loaded during the soft-nav\n  performance.clearResourceTimings()\n  performance.mark(SOFT_NAV_DURATION_MARK)\n}\n\nfunction getDurationSinceLastSoftNav() {\n  if (performance.getEntriesByName(SOFT_NAV_DURATION_MARK).length === 0) {\n    return null\n  }\n\n  performance.measure(SOFT_NAV_DURATION_MARK, SOFT_NAV_DURATION_MARK)\n  const measures = performance.getEntriesByName(SOFT_NAV_DURATION_MARK)\n  const measure = measures.pop()\n  return measure ? measure.duration : null\n}\n\nexport function sendFailureStats(turboFailureReason: string) {\n  sendStats({\n    turboFailureReason,\n    turboStartUrl: getSoftNavReferrer(),\n    turboEndUrl: window.location.href,\n  })\n}\n\nexport function sendRenderStats() {\n  const duration = getDurationSinceLastSoftNav()\n\n  if (!duration) return\n\n  const mechanism = MECHANISM_MAPPING[getSoftNavMechanism()]\n  const roundedDuration = Math.round(duration)\n\n  if (mechanism === MECHANISM_MAPPING.react)\n    document.dispatchEvent(new CustomEvent('staffbar-update', {detail: {duration: roundedDuration}}))\n\n  sendStats({\n    requestUrl: window.location.href,\n    softNavigationTiming: {\n      mechanism,\n      destination: getCurrentReactAppName() || 'rails',\n      duration: roundedDuration,\n      initiator: getSoftNavReactAppName() || 'rails',\n    },\n  })\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\nimport type {SoftNavMechanism} from './events'\n\nexport const DEFAULT_SOFT_NAV_ERROR_REASON = 'reload'\n\nexport const SOFT_NAV_FAIL = 'soft-nav:fail'\nexport const SOFT_NAV_FAIL_REFERRER = 'soft-nav:fail-referrer'\nexport const SOFT_NAV_REFERRER = 'soft-nav:referrer'\nexport const SOFT_NAV_MARK = 'soft-nav:marker'\nexport const SOFT_NAV_REACT_APP_NAME = 'soft-nav:react-app-name'\nexport const SOFT_NAV_LATEST_MECHANISM = 'soft-nav:latest-mechanism'\n\nexport function clearSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n  removeItem(SOFT_NAV_REFERRER)\n  removeItem(SOFT_NAV_FAIL)\n  removeItem(SOFT_NAV_FAIL_REFERRER)\n  removeItem(SOFT_NAV_REACT_APP_NAME)\n  removeItem(SOFT_NAV_LATEST_MECHANISM)\n}\n\nexport function setSoftNavMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_MARK, mechanism)\n}\n\nexport function unsetSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n}\n\nexport function inSoftNav() {\n  const softNav = getItem(SOFT_NAV_MARK)\n  return softNav && softNav !== '0'\n}\n\nexport function getSoftNavMechanism(): SoftNavMechanism {\n  return getItem(SOFT_NAV_MARK) as SoftNavMechanism\n}\n\nexport function hasSoftNavFailure() {\n  return Boolean(getSoftNavFailReason())\n}\n\nexport function getSoftNavFailReason() {\n  return getItem(SOFT_NAV_FAIL)\n}\n\nexport function setSoftNavFailReason(reason: string) {\n  setItem(SOFT_NAV_FAIL, reason || DEFAULT_SOFT_NAV_ERROR_REASON)\n  setItem(SOFT_NAV_FAIL_REFERRER, window.location.href)\n}\n\nexport function setSoftNavReferrer() {\n  setItem(SOFT_NAV_REFERRER, window.location.href)\n}\n\nexport function getSoftNavReferrer() {\n  return getItem(SOFT_NAV_REFERRER) || document.referrer\n}\n\nexport function setSoftNavReactAppName() {\n  const appName = getCurrentReactAppName()\n\n  if (appName) {\n    setItem(SOFT_NAV_REACT_APP_NAME, appName)\n  } else {\n    removeItem(SOFT_NAV_REACT_APP_NAME)\n  }\n}\n\nexport function getSoftNavReactAppName() {\n  return getItem(SOFT_NAV_REACT_APP_NAME)\n}\n\nexport function getCurrentReactAppName() {\n  if (document.querySelector('meta[name=\"ui\"]')) return 'ui'\n\n  return document.querySelector('react-app')?.getAttribute('app-name')\n}\n\nexport function setLatestMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_LATEST_MECHANISM, mechanism)\n}\n\nexport function getLatestMechanism() {\n  return getItem(SOFT_NAV_LATEST_MECHANISM) as SoftNavMechanism\n}\n","export interface TestIdProps {\n  /** Test ID to be queried by automated testing suites */\n  'data-testid'?: string\n}\n\nexport const testIdProps = (value: string): TestIdProps => {\n  return {'data-testid': value}\n}\n","import {useCallback, useContext} from 'react'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {AnalyticsContext} from '@github-ui/analytics-provider/context'\n\nexport interface AnalyticsEvent {\n  category: string\n  action: string\n  label: string\n  [key: string]: unknown\n}\n\ntype SendAnalyticsEventFunction = (\n  eventType: string,\n  target?: string,\n  payload?: {[key: string]: unknown} | AnalyticsEvent,\n) => void\n\n/**\n * Use this hook with the AnalyticsContext to send user analytics events to the data warehouse.\n * This hook will read values from the nearest AnalyticsContext.Provider, though you can override properties directly when sending an event.\n * It uses the `sendEvent` helper from `github/hydro-analytics`,\n * which enriches event context with additional information about the user, repository, and current page.\n * See: https://thehub.github.com/epd/engineering/products-and-services/internal/hydro/installation/browser-events/\n *\n * You can find a list of all included context properties in `app/helpers/octolytics_helper.rb`.\n *\n *\n * @example\n * ```tsx\n * function Component() {\n *   const { sendAnalyticsEvent } = useAnalytics()\n *   return <Button onClick={() => sendAnalyticsEvent('file_tree.close', 'FILE_TREE_TOGGLE')}>CLOSE TREE</Button>\n * }\n * ```\n *\n */\nexport function useAnalytics(): {\n  sendAnalyticsEvent: SendAnalyticsEventFunction\n} {\n  // WARNING: Do not add any hooks here that will cause rerenders on soft navs.\n  const contextData = useContext(AnalyticsContext)\n\n  if (!contextData) {\n    throw new Error('useAnalytics must be used within an AnalyticsContext')\n  }\n  const {appName, category, metadata} = contextData\n\n  return {\n    sendAnalyticsEvent: useCallback(\n      (eventType, target?, payload = {}) => {\n        const context = {\n          react: true,\n          ['app_name']: appName,\n          category,\n          ...metadata,\n        }\n        sendEvent(eventType, {...context, ...payload, target})\n      },\n      [appName, category, metadata],\n    ),\n  }\n}\n\n/**\n * Use this hook with the AnalyticsContext to send user analytics events to the data warehouse.\n * This hook will read values from the nearest AnalyticsContext.Provider, though you can override properties directly when sending an event.\n * It uses the `sendEvent` helper from `github/hydro-analytics`,\n * which enriches event context with additional information about the user, repository, and current page.\n * See: https://thehub.github.com/epd/engineering/products-and-services/internal/hydro/installation/browser-events/\n *\n * You can find a list of all included context properties in `app/helpers/octolytics_helper.rb`.\n *\n *\n * @example\n * ```tsx\n * function Component() {\n *   const { sendClickAnalyticsEvent } = useClickAnalytics()\n *   return <Button onClick={() => sendClickAnalyticsEvent({category: '...', action: '...', label: '...'})}>Submit</Button>\n * }\n * ```\n *\n */\nexport function useClickAnalytics(): {\n  sendClickAnalyticsEvent: (payload?: {[key: string]: unknown} | AnalyticsEvent) => void\n} {\n  const {sendAnalyticsEvent} = useAnalytics()\n  return {\n    sendClickAnalyticsEvent: useCallback(\n      (payload = {}) => {\n        sendAnalyticsEvent('analytics.click', undefined, payload)\n      },\n      [sendAnalyticsEvent],\n    ),\n  }\n}\n","import React, {startTransition} from 'react'\nimport {\n  createSearchParams,\n  matchRoutes,\n  resolvePath,\n  useLocation,\n  useNavigate as useReactRouterNavigate,\n  useSearchParams as useReactRouterSearchParams,\n  type NavigateOptions,\n  type To,\n  type URLSearchParamsInit,\n} from 'react-router-dom'\n\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {AppContext} from '@github-ui/react-core/app-context'\nimport {startSoftNav} from '@github-ui/soft-nav/state'\nimport {PREVENT_AUTOFOCUS_KEY} from '@github-ui/react-core/prevent-autofocus'\n\nexport interface NavigateOptionsWithPreventAutofocus extends NavigateOptions {\n  preventAutofocus?: boolean\n}\n\nexport const useNavigate = (): ((to: To, options?: NavigateOptionsWithPreventAutofocus) => void) => {\n  const {routes, history} = React.useContext(AppContext)\n  const reactRouterNavigate = useReactRouterNavigate()\n  return React.useCallback(\n    (to, navigateOptions = {}) => {\n      const pathname = resolvePath(to).pathname\n      const isExternalToApp = !matchRoutes(routes, pathname)\n\n      if (isExternalToApp) {\n        const href = history.createHref(to)\n        ;(async () => {\n          const {softNavigate: turboSoftNavigate} = await import('@github-ui/soft-navigate')\n          turboSoftNavigate(href)\n        })()\n      } else {\n        if (!isHashNavigation(location.href, to.toString())) {\n          startSoftNav('react')\n        }\n        const {preventAutofocus, ...options} = navigateOptions\n        startTransition(() => {\n          reactRouterNavigate(\n            to,\n            preventAutofocus\n              ? {\n                  ...options,\n                  state: {\n                    [PREVENT_AUTOFOCUS_KEY]: true,\n                    ...options.state,\n                  },\n                }\n              : options,\n          )\n          const {turbo, ...state} = window.history.state\n          window.history.replaceState({...state, skipTurbo: true}, '', location.href)\n        })\n      }\n    },\n    [history, reactRouterNavigate, routes],\n  )\n}\n\n/**\n * An implementation of `useSearchParams` that mirrors `react-router-dom`'s `useSearchParams` hook\n * but utilizes `@github-ui/useNavigate` instead of `react-router` `useNavigate` to handle updates.\n */\nexport const useSearchParams = () => {\n  const [searchParams] = useReactRouterSearchParams()\n  const navigate = useNavigate()\n  const {pathname} = useLocation()\n\n  const setSearchParams = React.useCallback<\n    (\n      nextInit?: URLSearchParamsInit | ((prev: URLSearchParams) => URLSearchParamsInit),\n      navigateOpts?: NavigateOptionsWithPreventAutofocus,\n    ) => void\n  >(\n    (nextInit, navigateOptions = {}) => {\n      const newSearchParams = createSearchParams(typeof nextInit === 'function' ? nextInit(searchParams) : nextInit)\n      navigate(\n        {\n          pathname,\n          search: newSearchParams.toString(),\n        },\n        navigateOptions,\n      )\n    },\n    [searchParams, navigate, pathname],\n  )\n\n  return [searchParams, setSearchParams] as const\n}\n","import safeStorage from '@github-ui/safe-storage'\nimport {useCallback, useEffect, useState, type Dispatch, useRef} from 'react'\n\nconst safeLocalStorage = safeStorage('localStorage')\n\nconst USE_LOCAL_STORAGE_UPDATE_EVENT_NAME = 'local-storage-update'\n\nclass UseLocalStorageUpdateEvent extends Event {\n  declare storageKey: string\n  declare storageValue: unknown | undefined\n\n  constructor(storageKey: string, storageValue: unknown | undefined) {\n    super(USE_LOCAL_STORAGE_UPDATE_EVENT_NAME)\n    this.storageKey = storageKey\n    this.storageValue = storageValue\n  }\n}\n\ndeclare global {\n  interface Document {\n    addEventListener(\n      type: typeof USE_LOCAL_STORAGE_UPDATE_EVENT_NAME,\n      listener: (this: Document, ev: UseLocalStorageUpdateEvent) => void,\n    ): void\n    removeEventListener(\n      type: typeof USE_LOCAL_STORAGE_UPDATE_EVENT_NAME,\n      listener: (this: Document, ev: UseLocalStorageUpdateEvent) => void,\n    ): void\n  }\n}\n\n/**\n * A hook that mirrors state to local storage\n *\n * The fallback state is _not_ written to local storage, so tearing can occur\n * whenever localStorage is empty, if different fallback values are used\n * for the same key, however once a value is updated, other consumers\n * of the same storage keys will update\n */\nexport function useLocalStorage<T>(storageKey: string, fallbackState: T): readonly [T, Dispatch<T>] {\n  // copy fallbackState to a tracked ref, to avoid re-renders if it has unstable identity\n  const fallbackStateRef = useRef(fallbackState)\n  useEffect(() => {\n    fallbackStateRef.current = fallbackState\n  })\n\n  const [value, setValue] = useState<T>(() => {\n    const itemValue = safeLocalStorage.getItem(storageKey)\n    if (itemValue) {\n      return JSON.parse(itemValue)\n    }\n    return fallbackStateRef.current\n  })\n\n  const setNextValue: Dispatch<T> = useCallback(\n    nextValue => {\n      setValue(nextValue ?? fallbackStateRef.current)\n\n      if (nextValue === undefined) {\n        safeLocalStorage.removeItem(storageKey)\n      } else {\n        safeLocalStorage.setItem(storageKey, JSON.stringify(nextValue))\n      }\n\n      document.dispatchEvent(new UseLocalStorageUpdateEvent(storageKey, nextValue))\n    },\n    [storageKey],\n  )\n\n  /**\n   * When we change the value, we emit an event\n   *\n   * Subscribe to that event, so we can continuously sync\n   * the state\n   */\n  useEffect(() => {\n    function handler(event: UseLocalStorageUpdateEvent) {\n      if (event.storageKey === storageKey) {\n        const nextValue: T = (event.storageValue as T | undefined) ?? fallbackStateRef.current\n        setValue(nextValue)\n      }\n    }\n\n    document.addEventListener(USE_LOCAL_STORAGE_UPDATE_EVENT_NAME, handler)\n\n    /**\n     * during setup, it's _possible_ we've diverged, so we'll\n     * immediately check for an update\n     *\n     * This also provides a 'reset' in the event the storageKey was changed\n     */\n    const itemValue = safeLocalStorage.getItem(storageKey)\n    if (itemValue) {\n      setValue(JSON.parse(itemValue))\n    } else {\n      setValue(fallbackStateRef.current)\n    }\n\n    return () => {\n      document.removeEventListener(USE_LOCAL_STORAGE_UPDATE_EVENT_NAME, handler)\n    }\n  }, [storageKey])\n\n  return [value, setNextValue] as const\n}\n\nexport function clearLocalStorage(storageKeys: string[]) {\n  for (const storageKey of storageKeys) {\n    safeLocalStorage.removeItem(storageKey)\n    document.dispatchEvent(new UseLocalStorageUpdateEvent(storageKey, undefined))\n  }\n}\n","import {useState} from 'react'\nimport type {BrowserHistory, MemoryHistory} from '@remix-run/router'\nimport {Router} from 'react-router-dom'\n// eslint-disable-next-line no-restricted-imports\nimport {useHydratedEffect} from '@github-ui/use-hydrated-effect'\n\ntype Props = {\n  children: React.ReactNode\n  history: BrowserHistory | MemoryHistory\n}\n\nexport function PartialRouter({children, history}: Props) {\n  const [state, setState] = useState({\n    location: history.location,\n  })\n\n  useHydratedEffect(() => history.listen(setState), [history])\n\n  return (\n    <Router location={state.location} navigator={history}>\n      {children}\n    </Router>\n  )\n}\n\ntry{ PartialRouter.displayName ||= 'PartialRouter' } catch {}","// Think of this as the entry point into the framework\nimport React from 'react'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {BaseProviders} from './BaseProviders'\nimport type {BrowserHistory} from '@remix-run/router'\nimport {createMemoryHistory} from '@remix-run/router'\nimport {AppContextProvider} from './AppContextProvider'\nimport {PartialRouter} from './PartialRouter'\nimport {CommonElements} from './CommonElements'\nimport {createBrowserHistory} from './create-browser-history'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {usePartialAnchorProps} from './react-partial-anchor'\n\ninterface Props {\n  partialName: string\n  embeddedData: EmbeddedPartialData\n  Component: React.ComponentType\n  wasServerRendered: boolean\n  ssrError?: HTMLScriptElement\n  anchorElement?: ReactPartialAnchorElement | null\n}\n\nexport function PartialEntry({\n  partialName,\n  embeddedData,\n  Component,\n  wasServerRendered,\n  ssrError,\n  anchorElement,\n}: Props) {\n  // Create a ref to track the browser history:\n  const historyRef = React.useRef<BrowserHistory>()\n  const window = globalThis.window as Window | undefined\n\n  // For linking to work, we can just pass a dummy pathname here. We may consider plumbing the actual path in\n  if (!historyRef.current) {\n    historyRef.current = !window\n      ? createMemoryHistory({initialEntries: [{pathname: '/'}]})\n      : createBrowserHistory({window})\n  }\n  const history = historyRef.current\n  const partialAnchorProps = usePartialAnchorProps(anchorElement)\n\n  // Wrap the partial in an AppContextProvider and static Router so that react-core links\n  // will be functional.\n  return (\n    <BaseProviders appName={partialName} wasServerRendered={wasServerRendered}>\n      <AppContextProvider history={history} routes={[]}>\n        <PartialRouter history={history}>\n          <Component {...embeddedData.props} {...(partialAnchorProps as object)} />\n          <CommonElements ssrError={ssrError} />\n        </PartialRouter>\n      </AppContextProvider>\n    </BaseProviders>\n  )\n}\n\ntry{ PartialEntry.displayName ||= 'PartialEntry' } catch {}","import {target} from '@github/catalyst'\nimport {createRoot, hydrateRoot} from 'react-dom/client'\nimport type {createRoot as createRootType, hydrateRoot as hydrateRootType, Root} from 'react-dom/client'\nimport React from 'react'\nimport ReactProfilingMode from '@github-ui/react-profiling-mode'\nimport {EXPECTED_ERRORS} from './expected-errors'\nimport {sendStats} from '@github-ui/stats'\n\ntype ReactDOM = {\n  createRoot: typeof createRootType\n  hydrateRoot: typeof hydrateRootType\n}\n\nconst REACT_INVARIANT_ERROR_REGEX = /Minified React error #(?<invariant>\\d+)/\n\nexport abstract class ReactBaseElement<T> extends HTMLElement {\n  @target embeddedData: HTMLScriptElement | undefined\n  @target ssrError: HTMLScriptElement | undefined\n  @target reactRoot: HTMLElement | undefined\n  private root: Root | undefined\n\n  abstract nameAttribute: string\n  abstract getReactNode(embeddedData: T): Promise<React.ReactNode>\n\n  protected get name() {\n    return this.getAttribute(this.nameAttribute) as string\n  }\n\n  private get embeddedDataText() {\n    const text = this.embeddedData?.textContent\n\n    if (!text) {\n      throw new Error(`No embedded data provided for react element ${this.name}`)\n    }\n\n    return text\n  }\n\n  get hasSSRContent() {\n    return this.getAttribute('data-ssr') === 'true'\n  }\n\n  connectedCallback() {\n    this.renderReact()\n  }\n\n  disconnectedCallback() {\n    this.root?.unmount()\n    this.root = undefined\n  }\n\n  private async renderReact() {\n    if (!this.reactRoot) throw new Error('No react root provided')\n    let reactDom: ReactDOM = {\n      createRoot,\n      hydrateRoot,\n    }\n\n    // Override the react-dom import if we're in profiling mode\n    if (ReactProfilingMode.isEnabled()) {\n      reactDom = await this.getReactDomWithProfiling()\n    }\n\n    const embeddedData = JSON.parse(this.embeddedDataText) as T\n    const ssrErrorText = this.ssrError?.textContent\n    const node = await this.getReactNode(embeddedData)\n    const baseNode = <React.StrictMode>{node}</React.StrictMode>\n\n    if (ssrErrorText) {\n      this.logSSRError(ssrErrorText)\n    }\n\n    if (this.hasSSRContent) {\n      /**\n       * Styled-components automatically looks for style tags to hydrate on first page load, but will not detect them\n       * if they are added after the initial page load. This causes a hydration error because React isn't expecting\n       * a style tag within the app. To work around this, we need to manually move the style tags to the head before\n       * hydrating the app.\n       *\n       * During hydration, styled-components will create a new style tag which matches the one we moved to the head.\n       * This means that after hydration, we can safely remove the style tag we manually moved to the head.\n       */\n      const styles = this.querySelector('style[data-styled=\"true\"]')\n      if (styles) document.head.appendChild(styles)\n\n      // Hydrate the react app\n      // onRecoverableError is disabled until we have a react version with this fix in:\n      // https://github.com/facebook/react/pull/25692\n      this.root = reactDom.hydrateRoot(this.reactRoot, baseNode, {\n        onRecoverableError: error => {\n          if (!(error instanceof Error)) return\n\n          const match = REACT_INVARIANT_ERROR_REGEX.exec(error.message)\n          const invariant = String(match?.groups?.invariant)\n\n          sendStats({\n            incrementKey: 'REACT_HYDRATION_ERROR',\n            incrementTags: {\n              appName: this.name,\n              invariant,\n            },\n          })\n        },\n      })\n\n      // Remove the manually moved style tag after hydration\n      if (styles) {\n        // Wait until things are idle to remove the style tag. If we do it immediately, we can cause a flash of unstyled content.\n        requestIdleCallback(() => {\n          // styles could have already been removed by Turbo if a navigation happens quickly. Only remove it from the DOM if it's still there.\n          styles.parentElement?.removeChild(styles)\n        })\n      }\n    } else {\n      this.root = reactDom.createRoot(this.reactRoot)\n      this.root.render(baseNode)\n    }\n\n    this.classList.add('loaded')\n  }\n\n  private getReactDomWithProfiling() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return import('react-dom/profiling') as any as Promise<ReactDOM>\n  }\n\n  private logSSRError(ssrErrorText: string) {\n    if (EXPECTED_ERRORS[ssrErrorText]) {\n      // eslint-disable-next-line no-console\n      return console.error('SSR failed with an expected error:', EXPECTED_ERRORS[ssrErrorText])\n    }\n\n    try {\n      const error = JSON.parse(ssrErrorText) as PlatformJavascriptError\n      const stacktrace = parseFailbotStacktrace(error)\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', `${error.type}: ${error.value}\\n`, error, stacktrace)\n    } catch {\n      /**\n       * In the event we couldn't log the error, we should not break the application\n       */\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', ssrErrorText, 'unable to parse as json')\n    }\n  }\n}\n\nfunction parseFailbotStacktrace(error: PlatformJavascriptError) {\n  if (!error.stacktrace) return ''\n  let prefix = '\\n '\n  const stack = error.stacktrace.map((frame: PlatformStackframe) => {\n    const {function: func, filename, lineno, colno} = frame\n    const line = `${prefix} at ${func} (${filename}:${lineno}:${colno})`\n    prefix = ' '\n    return line\n  })\n  return stack.join('\\n')\n}\n\ntry{ REACT_INVARIANT_ERROR_REGEX.displayName ||= 'REACT_INVARIANT_ERROR_REGEX' } catch {}","import {Box, type BoxProps, Text, type TextProps} from '@primer/react'\nimport type {ForwardRefComponent as PolymorphicForwardRefComponent} from '@radix-ui/react-polymorphic'\nimport DOMPurify, {type Config as DOMPurifyConfig} from 'dompurify'\nimport type React from 'react'\nimport {forwardRef} from 'react'\n\ntype Brand<TBase, TBrand extends string> = TBase & {__brand: TBrand}\n\n/**\n * A string that has specifically been marked as verified.\n *\n * WARNING: A string should only be branded as a `SafeHTMLString` if one of the following applies:\n * - it comes from a trusted source on the server\n * - has known static content, or\n * - has been sanitized by DOMPurify.\n */\nexport type SafeHTMLString = Brand<string, 'SafeHTMLString'>\n\ninterface BaseHTMLProps {\n  /**\n   * Set the rendered HTML of the component. Use this prop if the source is untrusted. If you know the string can be\n   * trusted, or has already been sanitized, use the `html` prop instead to avoid re-sanitizing.\n   */\n  unverifiedHTML?: string\n  /**\n   * Optional config passed to DOMPurify when sanitizing `unverifiedHTML`.\n   */\n  unverifiedHTMLConfig?: DOMPurifyConfig\n  /**\n   * Set the rendered HTML of the component. To prevent XSS, ensure that the source of this\n   * HTML is trusted! If the source is untrusted, use `unverifiedHTML` instead.\n   */\n  html?: SafeHTMLString\n}\n\ninterface VerifiedHTMLProps extends BaseHTMLProps {\n  unverifiedHTML?: undefined\n  html: SafeHTMLString\n}\n\ninterface UnverifiedHTMLProps extends BaseHTMLProps {\n  unverifiedHTML: string\n  html?: undefined\n}\n\nexport type SafeHTMLProps = VerifiedHTMLProps | UnverifiedHTMLProps\n\ntype PropsWithHTML<T> = T & SafeHTMLProps\n\nfunction getSafeHTMLAndProps<T>(propsWithHtml: PropsWithHTML<T>) {\n  /**\n   * Note we have to explicitly cast props to T because TypeScript\n   * is not properly converting Omit<T & VerifiedHTMLProps, 'html'> to T.\n   *\n   * We include the `as unknown` intermediate step to avoid warnings\n   * about insufficient type overlap\n   */\n\n  if ('html' in propsWithHtml && propsWithHtml.html !== undefined) {\n    const {html, ...props} = propsWithHtml\n    return {\n      // This is verified html, so we can use it directly\n      safeHTML: html,\n      props: props as unknown as T,\n    }\n  }\n\n  const {unverifiedHTML, unverifiedHTMLConfig, ...props} = propsWithHtml\n  const config = {\n    ...unverifiedHTMLConfig,\n    // we want to ensure we are returning a string not a dom node\n    RETURN_DOM: false,\n    RETURN_DOM_FRAGMENT: false,\n  } satisfies DOMPurifyConfig\n\n  return {\n    // Run the unverified HTML through DOMPurify to sanitize it\n    safeHTML: DOMPurify.sanitize(unverifiedHTML, config),\n    props: props as unknown as T,\n  }\n}\n\n/**\n * `SafeHTMLBox` extends `Box` from `@primer/react` with props for safely\n * rendering HTML strings. Exactly one `html` or `unverifiedHTML` must be\n * supplied.\n *\n * `html` only supports strings that have specifically been marked as verified,\n * which means either they come from a trusted source on the server, they have\n * known static contents, or they have been sanitized by DOMPurify.\n *\n * `unverifiedHTML` supports arbitrary strings; they will be run through\n * DOMPurify before being put in the DOM.\n */\nexport const SafeHTMLBox = withSafeHTML<BoxProps>(Box) as PolymorphicForwardRefComponent<\n  'div' | 'span' | 'pre' | 'table' | 'tbody' | 'tr' | 'td' | 'ul' | 'ol' | 'li',\n  PropsWithHTML<BoxProps>\n>\nSafeHTMLBox.displayName = 'SafeHTMLBox'\n\n/**\n * `SafeHTMLText` extends `Text` from `@primer/react` with props for safely\n * rendering HTML strings. Exactly one `html` or `unverifiedHTML` must be\n * supplied.\n *\n * `html` only supports strings that have specifically been marked as verified,\n * which means either they come from a trusted source on the server, they have\n * known static contents, or they have been sanitized by DOMPurify.\n *\n * `unverifiedHTML` supports arbitrary strings; they will be run through\n * DOMPurify before being put in the DOM.\n */\nexport const SafeHTMLText = withSafeHTML<TextProps>(Text) as PolymorphicForwardRefComponent<\n  'div' | 'span' | 'p' | 'strong' | 'em' | 'pre' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'a',\n  PropsWithHTML<TextProps>\n>\nSafeHTMLText.displayName = 'SafeHTMLText'\n\n/**\n * A higher-order component that extends a basic component by offering\n * `html` and `unverifiedHTML` props that are safe alternatives to `dangerouslySetInnerHTML`.\n */\nfunction withSafeHTML<T>(Component: React.ComponentType<T>) {\n  // We give these display names above\n  // eslint-disable-next-line react/display-name\n  const SafeHTMLComponent = forwardRef<HTMLSpanElement, PropsWithHTML<T>>((propsWithHtml, ref) => {\n    const {safeHTML, props} = getSafeHTMLAndProps(propsWithHtml)\n    // This is the only place in the codebase where `dangerouslySetInnerHTML` should be allowed\n    // eslint-disable-next-line react/forbid-component-props\n    return <Component ref={ref} {...props} dangerouslySetInnerHTML={safeHTML ? {__html: safeHTML} : undefined} />\n  })\n\n  return SafeHTMLComponent\n}\n\n/**\n * `SafeHTMLDiv` extends `div`with props for safely rendering HTML strings.\n * Exactly one `html` or `unverifiedHTML` must be supplied.\n *\n * `html` only supports strings that have specifically been marked as verified,\n * which means either they come from a trusted source on the server, they have\n * known static contents, or they have been sanitized by DOMPurify.\n *\n * `unverifiedHTML` supports arbitrary strings; they will be run through\n * DOMPurify before being put in the DOM.\n */\nexport const SafeHTMLDiv = forwardRef<\n  HTMLDivElement,\n  PropsWithHTML<React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>>\n>((propsWithHtml, ref) => {\n  const {safeHTML, props} = getSafeHTMLAndProps(propsWithHtml)\n  // eslint-disable-next-line react/no-danger\n  return <div ref={ref} {...props} dangerouslySetInnerHTML={safeHTML ? {__html: safeHTML} : undefined} />\n})\nSafeHTMLDiv.displayName = 'SafeHTMLDiv'\n\ntry{ SafeHTMLComponent.displayName ||= 'SafeHTMLComponent' } catch {}"],"names":["TourWrapper","TourCallout","PulsingOrb","TourChecklist","MinimizedTourBox","SmallScreenNotice","ReadyToUpgradeComponent","InitialCallToAction","ExpandedCallToAction","CallToActionListItem","TourListItem","TourCheckIcon","BottomPulseAnimation","keyframes","TopPulseAnimation","TopPulse","styled","circle","BottomPulse","DemoRepoTour","props","AnalyticsProvider","appName","category","metadata","DemoRepoTourContent","visitedStepsKey","repository_name","upgradeCtaPath","upgrade_cta_path","referralOrganizationId","referral_organization_id","TourCalloutStyles","setTourCalloutStyles","useState","top","left","display","visitedSteps","setVisitedSteps","useLocalStorage","currentStepKey","setCurrentStepKey","isMinimized","setIsMinimized","navigate","useNavigate","sendClickAnalyticsEvent","useClickAnalytics","useRef","recordTourStepVisited","useCallback","step_key","newStepKeys","action","length","tour_steps","setupCallout","calledOutElement","document","querySelector","selectedTourStep","called_out_element_css_class","boundingRect","getBoundingClientRect","bottom","window","innerHeight","scrollIntoView","behavior","y","scrollY","height","x","scrollX","previous","useEffect","handleReturnToTour","current","focus","addEventListener","removeEventListener","includes","newTourStepKeys","setupCurrentTourStep","find","tourStep","path","location","pathname","key","useResizeObserver","Box","className","ref","id","tabIndex","sx","bg","position","width","right","boxShadow","border","borderColor","m","overflow","zIndex","div","style","backgroundImage","p","testIdProps","Heading","fontSize","mb","justifyContent","as","span","alignItems","Label","variant","mx","Link","href","target","fontWeight","underline","Button","onClick","size","Octicon","aria-label","icon","ChevronDownIcon","color","ol","map","step","index","nextStepKey","Text","autoFocus","pointerEvents","transform","mt","svg","viewBox","fill","aria-hidden","cx","cy","r","borderTop","isTourCompleted","recordClickedUpradeCTA","inline","ul","message","ml","restartTour","firstKey","localStorage","removeItem","visitTourStep","li","mr","CheckIcon","nextTourStepKey","title","description","selected","checked","stepTitle","muted","SafeHTMLText","html","focusOnCalledOutSection","element","querySelectorAll","hidden","hasAttribute","setAttribute","CheckCircleFillIcon","CircleIcon","currentStep","displayName","registerReactPartial","Component","hydroAnalyticsClient","getItem","safeStorage","dimensionPrefix","MARKETING_PARAMS","options","getOptionsFromMeta","baseContext","AnalyticsClient","_","extendBaseContext","context","value","app_id","event_url","host","Object","entries","startsWith","replace","visitorMeta","assign","JSON","parse","atob","content","URLSearchParams","search","toLowerCase","staff","isStaff","toString","sendPageView","sendEvent","type","service","head","cleanContext","stringifyObjectValues","obj","fromEntries","k","v","stringify","currentUrl","targetUrl","URL","origin","hasHash","DeferredRegistry","register","name","registration","entry","registrationEntries","resolve","promise","Promise","getRegistration","Deferred","constructor","PREVENT_AUTOFOCUS_KEY","usePartialAnchorProps","anchorElement","anchor","disabled","classList","remove","reactPartialAnchor","__wrapperElement","useExternalAnchor","open","setOpen","useOnAnchorClick","partialRegistry","ReactPartialElement","ReactBaseElement","getReactNode","embeddedData","closest","PartialEntry","partialName","wasServerRendered","hasSSRContent","ssrError","nameAttribute","controller","setItem","REACT_PROFILING_ENABLED","enable","disable","isEnabled","SoftNavEvent","Event","mechanism","SoftNavStartEvent","SOFT_NAV_STATE","START","SoftNavSuccessEvent","visitCount","SUCCESS","SoftNavErrorEvent","error","ERROR","SoftNavEndEvent","END","initSoftNav","dispatchEvent","INITIAL","clearSoftNav","startSoftNav","inSoftNav","PROGRESS_BAR","setSoftNavMechanism","setSoftNavReactAppName","setSoftNavReferrer","markStart","succeedSoftNav","canTriggerEvent","getSoftNavMechanism","endSoftNav","failSoftNav","reason","getSoftNavFailReason","DEFAULT_SOFT_NAV_ERROR_REASON","endProgressBar","sendFailureStats","unsetSoftNav","setLatestMechanism","renderedSoftNav","sendRenderStats","RENDER","updateFrame","FRAME_UPDATE","skipIfGoingToReactApp","allowedMechanisms","getCurrentReactAppName","freeze","SOFT_NAV_DURATION_MARK","MECHANISM_MAPPING","turbo","react","ui","hard","performance","clearResourceTimings","mark","turboFailureReason","sendStats","turboStartUrl","getSoftNavReferrer","turboEndUrl","duration","getDurationSinceLastSoftNav","getEntriesByName","measure","measures","pop","roundedDuration","Math","round","CustomEvent","detail","requestUrl","softNavigationTiming","destination","initiator","getSoftNavReactAppName","SOFT_NAV_FAIL","SOFT_NAV_FAIL_REFERRER","SOFT_NAV_REFERRER","SOFT_NAV_MARK","SOFT_NAV_REACT_APP_NAME","SOFT_NAV_LATEST_MECHANISM","softNav","hasSoftNavFailure","Boolean","setSoftNavFailReason","referrer","getAttribute","getLatestMechanism","useAnalytics","contextData","useContext","AnalyticsContext","sendAnalyticsEvent","eventType","payload","undefined","routes","history","React","AppContext","reactRouterNavigate","useReactRouterNavigate","to","navigateOptions","resolvePath","matchRoutes","isHashNavigation","preventAutofocus","startTransition","state","replaceState","skipTurbo","createHref","softNavigate","turboSoftNavigate","useSearchParams","searchParams","useReactRouterSearchParams","useLocation","setSearchParams","nextInit","newSearchParams","createSearchParams","safeLocalStorage","USE_LOCAL_STORAGE_UPDATE_EVENT_NAME","UseLocalStorageUpdateEvent","storageKey","storageValue","fallbackState","fallbackStateRef","setValue","itemValue","setNextValue","nextValue","handler","event","clearLocalStorage","storageKeys","PartialRouter","children","setState","useHydratedEffect","listen","Router","navigator","historyRef","globalThis","createBrowserHistory","createMemoryHistory","initialEntries","partialAnchorProps","BaseProviders","AppContextProvider","CommonElements","REACT_INVARIANT_ERROR_REGEX","HTMLElement","embeddedDataText","text","textContent","connectedCallback","renderReact","disconnectedCallback","root","unmount","reactRoot","reactDom","createRoot","hydrateRoot","ReactProfilingMode","getReactDomWithProfiling","ssrErrorText","node","baseNode","logSSRError","styles","appendChild","onRecoverableError","Error","match","exec","invariant","String","groups","incrementKey","incrementTags","requestIdleCallback","parentElement","removeChild","render","add","EXPECTED_ERRORS","console","stacktrace","parseFailbotStacktrace","prefix","stack","function","func","filename","lineno","colno","frame","line","join","SafeHTMLComponent","getSafeHTMLAndProps","propsWithHtml","safeHTML","unverifiedHTML","unverifiedHTMLConfig","config","RETURN_DOM","RETURN_DOM_FRAGMENT","DOMPurify","SafeHTMLBox","withSafeHTML","forwardRef","dangerouslySetInnerHTML","__html","SafeHTMLDiv"],"sourceRoot":""}