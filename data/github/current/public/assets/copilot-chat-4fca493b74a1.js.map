{"version":3,"file":"copilot-chat-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/aria-live/aria-live.ts","ui/packages/copilot-chat/components/ThreadListView.tsx","ui/packages/copilot-chat/components/ChatPanel.module.css","ui/packages/copilot-chat/components/ChatPanel.tsx","ui/packages/copilot-chat/CopilotChat.tsx","ui/packages/copilot-chat/copilot-chat.ts","ui/packages/copilot-chat/utils/copilot-chat-events.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/react-core/deferred-registry.ts","ui/packages/react-core/prevent-autofocus.ts","ui/packages/react-core/react-partial-anchor.ts","ui/packages/react-core/react-partial-registry.ts","ui/packages/react-core/ReactPartialElement.tsx","ui/packages/react-core/register-partial.ts","ui/packages/react-core/use-app-payload.ts","ui/packages/react-profiling-mode/src/index.ts","ui/packages/safe-storage/session-storage.ts","ui/packages/soft-nav/events.ts","ui/packages/soft-nav/state.ts","ui/packages/soft-nav/states.ts","ui/packages/soft-nav/stats.ts","ui/packages/soft-nav/utils.ts","ui/packages/use-layout-effect/use-layout-effect.ts","ui/packages/react-core/ErrorBoundary.tsx","ui/packages/react-core/ErrorPage.tsx","ui/packages/react-core/PartialRouter.tsx","ui/packages/react-core/PartialEntry.tsx","ui/packages/react-core/ReactBaseElement.tsx"],"sourcesContent":["import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {\n  announce as liveRegionAnnounce,\n  announceFromElement as liveRegionAnnounceFromElement,\n} from '@primer/live-region-element'\n\nexport interface ElementWithAriaNotify extends Element {\n  ariaNotify: (\n    message: string,\n    options?: {interrupt?: 'none' | 'pending' | 'all'; priority?: 'none' | 'important'},\n  ) => void\n}\n\n/**\n * Troubleshooting guide for aria-live regions available on the Hub\n * - https://thehub.github.com/epd/engineering/dev-practicals/frontend/accessibility/readiness-routine/screenreaders/live-regions-and-focus-management-techniques/#why-isnt-my-live-region-working-as-i-expect\n */\n\n// Announce an element's text to the screen reader.\nexport function announceFromElement(el: HTMLElement, options?: {assertive?: boolean; element?: HTMLElement}) {\n  if (isFeatureEnabled('arianotify_comprehensive_migration')) {\n    announce(getTextContent(el), {...options, element: options?.element ?? el})\n  } else if (isFeatureEnabled('primer_live_region_element') && options?.element === undefined) {\n    liveRegionAnnounceFromElement(el, {\n      politeness: options?.assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    announce(getTextContent(el), options)\n  }\n}\n\n// Announce message update to screen reader.\n// Note: Use caution when using this function while a dialog is active.\n// If the message is updated while the dialog is open, the screen reader may not announce the live region.\n// For more information, view the document on dialog and live region support: https://github.com/github/accessibility/blob/main/docs/dialog-live-region-support.md\nexport function announce(message: string, options?: {assertive?: boolean; element?: HTMLElement}) {\n  const {assertive, element} = options ?? {}\n\n  if (isFeatureEnabled('arianotify_comprehensive_migration') && 'ariaNotify' in Element.prototype) {\n    ;((element || document.body) as Element as ElementWithAriaNotify).ariaNotify(message, {\n      interrupt: options?.assertive ? 'all' : 'none',\n    })\n  } else if (isFeatureEnabled('primer_live_region_element') && element === undefined) {\n    liveRegionAnnounce(message, {\n      politeness: assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    setContainerContent(message, assertive, element)\n  }\n}\n\n// Set aria-live container to message.\nfunction setContainerContent(message: string, assertive?: boolean, element?: HTMLElement) {\n  const getQuerySelector = () => {\n    return assertive ? '#js-global-screen-reader-notice-assertive' : '#js-global-screen-reader-notice'\n  }\n  const container = element ?? ssrSafeDocument?.querySelector(getQuerySelector())\n  if (!container) return\n  if (container.textContent === message) {\n    /* This is a hack due to the way the aria live API works.\n    A screen reader will not read a live region again\n    if the text is the same. Adding a space character tells\n    the browser that the live region has updated,\n    which will cause it to read again, but with no audible difference. */\n    container.textContent = `${message}\\u00A0`\n  } else {\n    container.textContent = message\n  }\n}\n\n// Gets the trimmed text content of an element.\nfunction getTextContent(el: HTMLElement): string {\n  // innerText does not contain hidden text\n  /* eslint-disable-next-line github/no-innerText */\n  return (el.getAttribute('aria-label') || el.innerText || '').trim()\n}\n","import {AlertIcon, CommentIcon, TrashIcon} from '@primer/octicons-react'\nimport {ActionList, Box, Button, Flash, IconButton, Octicon, RelativeTime, Spinner} from '@primer/react'\nimport {Dialog} from '@primer/react/drafts'\nimport {useCallback, useMemo, useRef, useState} from 'react'\n\nimport {threadName} from '../utils/copilot-chat-helpers'\nimport {useChatState} from '../utils/CopilotChatContext'\nimport {useChatManager} from '../utils/CopilotChatManagerContext'\n\nexport function ThreadListView() {\n  const state = useChatState()\n  const manager = useChatManager()\n  const threads = useMemo(() => manager.sortThreads(state.threads), [state.threads, manager])\n  const handleCreateThread = useCallback(() => {\n    void manager.createThread()\n  }, [manager])\n\n  const [openDeleteConfirmationThreadId, setOpenDeleteConfirmationThreadId] = useState<string | null>(null)\n  const returnFocusRef = useRef(null)\n\n  const ListView = () => {\n    return (\n      <>\n        {threads.map(thread => {\n          return (\n            <Box sx={{display: 'flex'}} key={thread.id}>\n              <ActionList.Item key={thread.id} onSelect={() => manager.selectThread(thread)}>\n                <ActionList.LeadingVisual>\n                  <CommentIcon />\n                </ActionList.LeadingVisual>\n                {threadName(thread)}\n                <ActionList.TrailingVisual>\n                  <RelativeTime date={new Date(Date.parse(thread.updatedAt))} format=\"relative\" />\n                </ActionList.TrailingVisual>\n              </ActionList.Item>\n              {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n              <IconButton\n                unsafeDisableTooltip={true}\n                data-testid={`delete-thread-button-${thread.id}`}\n                ref={returnFocusRef}\n                onClick={() => setOpenDeleteConfirmationThreadId(thread.id)}\n                sx={{p: 2, mr: 2}}\n                variant=\"invisible\"\n                icon={TrashIcon}\n                aria-label={`Delete conversation: \"${threadName(thread)}\"`}\n                tooltipDirection=\"nw\"\n              />\n              {openDeleteConfirmationThreadId === thread.id && (\n                <div data-testid={`delete-thread-dialog-${thread.id}`}>\n                  <Dialog\n                    title=\"Delete conversation\"\n                    width=\"small\"\n                    onClose={() => setOpenDeleteConfirmationThreadId(null)}\n                    returnFocusRef={returnFocusRef}\n                    footerButtons={[\n                      {\n                        buttonType: 'default',\n                        content: 'Cancel',\n                        onClick: () => setOpenDeleteConfirmationThreadId(null),\n                      },\n                      {\n                        buttonType: 'danger',\n                        content: 'Delete',\n                        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n                        onClick: async () => {\n                          await manager.deleteThreadKeepSelection(thread)\n                          setOpenDeleteConfirmationThreadId(null)\n                        },\n                        autoFocus: true,\n                      },\n                    ]}\n                  >\n                    Are you sure? This can’t be undone.\n                  </Dialog>\n                </div>\n              )}\n            </Box>\n          )\n        })}\n      </>\n    )\n  }\n\n  const ErrorView = () => {\n    return (\n      <Box\n        sx={{\n          p: 3,\n        }}\n      >\n        <Flash variant=\"warning\">\n          <Octicon icon={AlertIcon} />\n          {state.threadsLoading.state === 'error'\n            ? state.threadsLoading.error\n            : 'Something went wrong. Please try again later.'}\n        </Flash>\n      </Box>\n    )\n  }\n\n  if (state.threadsLoading.state === 'loading' && state.threads.size === 0) {\n    return (\n      <Box\n        sx={{\n          p: 3,\n          height: '100%',\n          display: 'grid',\n          alignItems: 'center',\n          alignContent: 'center',\n          flexDirection: 'column',\n          justifyItems: 'center',\n          gap: 2,\n        }}\n      >\n        <Spinner />\n        Loading threads…\n      </Box>\n    )\n  }\n\n  return (\n    <>\n      {\n        // Show an error if there are no threads because we should show the new thread view instead of the list UI\n        state.threadsLoading.state === 'error' ? (\n          <ErrorView />\n        ) : (\n          <>\n            {state.threads.size > 0 && (\n              <ActionList sx={{overflowY: 'auto'}}>\n                <ActionList.Group>\n                  <ActionList.GroupHeading as=\"h3\">Active conversations</ActionList.GroupHeading>\n                  <ListView />\n                </ActionList.Group>\n              </ActionList>\n            )}\n\n            {state.threads.size === 0 && (\n              <Box sx={{p: 3, color: 'fg.subtle'}}>\n                <p className=\"mb-3\">There are no conversations at the moment.</p>\n                <Button onClick={handleCreateThread} block>\n                  Start a new conversation\n                </Button>\n              </Box>\n            )}\n          </>\n        )\n      }\n    </>\n  )\n}\n\ntry{ ThreadListView.displayName ||= 'ThreadListView' } catch {}\ntry{ ListView.displayName ||= 'ListView' } catch {}\ntry{ ErrorView.displayName ||= 'ErrorView' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"copilotChatPanel\":\"ChatPanel-module__copilotChatPanel--YfhVH\"};","import {Box, Overlay} from '@primer/react'\nimport {clsx} from 'clsx'\nimport type React from 'react'\nimport {useCallback, useRef} from 'react'\n\nimport {MIN_PANEL_HEIGHT, MIN_PANEL_WIDTH} from '../utils/copilot-chat-hooks'\nimport {copilotFeatureFlags} from '../utils/copilot-feature-flags'\nimport {ChatPanelReferenceContext, useChatState} from '../utils/CopilotChatContext'\nimport styles from './ChatPanel.module.css'\nimport {COPILOT_CHAT_PORTAL_ROOT} from './PortalContainerUtils'\n\ninterface ChatPanelProps {\n  entrypointRef: React.RefObject<HTMLButtonElement>\n  handleClose: (usedEscapeKey?: boolean) => void\n  experimentsDialogRef: React.MutableRefObject<HTMLDivElement | null>\n  children: React.ReactNode\n  showExperimentsDialog: boolean\n  isCollapsed: boolean\n  panelWidth: number\n  panelHeight: number\n  startResize: (e: React.MouseEvent, horizontal: boolean, vertical: boolean) => void\n  onResizerKeyDown: (e: React.KeyboardEvent) => void\n}\n\nexport const ChatPanel = (props: ChatPanelProps) => {\n  const {\n    children,\n    entrypointRef,\n    experimentsDialogRef,\n    handleClose,\n    isCollapsed,\n    panelWidth,\n    panelHeight,\n    startResize,\n    onResizerKeyDown,\n  } = props\n  const overlayRef = useRef<HTMLDivElement>(null)\n  const {chatIsCollapsed} = useChatState()\n\n  const onEscape = useCallback(() => {\n    if (overlayRef.current && overlayRef.current.contains(document.activeElement)) {\n      handleClose(true)\n    }\n  }, [handleClose])\n\n  return (\n    <Overlay\n      id=\"copilot-chat-panel\"\n      className={clsx(styles.copilotChatPanel)}\n      ref={overlayRef}\n      portalContainerName={COPILOT_CHAT_PORTAL_ROOT}\n      onEscape={onEscape}\n      onClickOutside={() => {}}\n      ignoreClickRefs={[experimentsDialogRef as React.RefObject<HTMLDivElement>]}\n      returnFocusRef={entrypointRef}\n      sx={{\n        maxWidth: 'calc(100vw - 2rem)',\n        height: isCollapsed ? '48px' : `${panelHeight}px`,\n        // The magic 60px here corresponds to $sticky-header-height which appears on pages like issues\n        // and PRs upon scrolling and can hide the chat panel header (including collapse and close buttons).\n        // If the header height changes, this needs to be updated. If PRs ships in React, the bug may resolve\n        // itself and we can remove the 60px.\n        maxHeight: 'calc(100vh - 1rem - 60px)',\n        minHeight: !isCollapsed ? `${MIN_PANEL_HEIGHT}px` : undefined,\n        width: isCollapsed ? '400px' : `${panelWidth}px`,\n        minWidth: `${MIN_PANEL_WIDTH}px`,\n        borderBottomLeftRadius: copilotFeatureFlags.copilotFloatingButton ? undefined : 0,\n        borderBottomRightRadius: copilotFeatureFlags.copilotFloatingButton ? undefined : 0,\n      }}\n      right={copilotFeatureFlags.copilotFloatingButton ? 8 : 0}\n      bottom={copilotFeatureFlags.copilotFloatingButton ? 8 : 0}\n      anchorSide={copilotFeatureFlags.copilotFloatingButton ? 'inside-top' : 'inside-left'}\n      preventFocusOnOpen\n      position=\"fixed\"\n      role=\"dialog\"\n      aria-labelledby=\"copilot-chat-panel-inner\"\n    >\n      <section id=\"copilot-chat-panel-inner\" aria-label=\"Copilot chat panel\" style={{height: '100%'}}>\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            height: '100%',\n            position: 'relative',\n          }}\n          data-testid=\"copilot-chat-panel-inner\"\n        >\n          <Box\n            id=\"vertical-resize-click-target\"\n            sx={{\n              position: 'absolute',\n              inset: 0,\n              height: '0.5rem',\n              width: '100%',\n              cursor: !chatIsCollapsed ? 'ns-resize' : undefined,\n              // All these resizers gotta be 2 because Copilot messages are z-index: 1 and would overlap the resizers\n              zIndex: 2,\n            }}\n            onMouseDown={e => startResize(e, false, true)}\n          />\n          <Box\n            sx={{\n              position: 'absolute',\n              inset: 0,\n              height: '100%',\n              width: '8px',\n              cursor: !chatIsCollapsed ? 'ew-resize' : undefined,\n              zIndex: 2,\n            }}\n            onMouseDown={e => startResize(e, true, false)}\n          />\n          <Box\n            sx={{\n              position: 'absolute',\n              inset: 0,\n              height: '0.5rem',\n              width: '0.5rem',\n              cursor: !chatIsCollapsed ? 'nwse-resize' : 'undefined',\n              zIndex: 2,\n            }}\n            aria-label=\"Chat panel resizer\"\n            aria-valuetext={`${panelWidth}, ${panelHeight}`}\n            aria-valuenow={panelWidth}\n            role=\"separator\"\n            onMouseDown={e => startResize(e, true, true)}\n            tabIndex={0}\n            onKeyDown={onResizerKeyDown}\n          />\n\n          <Box sx={{display: 'flex', flexDirection: 'column', flexGrow: 1, maxHeight: '100%'}}>\n            <ChatPanelReferenceContext.Provider value={overlayRef}>{children}</ChatPanelReferenceContext.Provider>\n          </Box>\n        </Box>\n      </section>\n    </Overlay>\n  )\n}\n\ntry{ ChatPanel.displayName ||= 'ChatPanel' } catch {}","import {CopilotReferencePreviewDialog} from '@github-ui/copilot-reference-preview/CopilotReferencePreviewDialog'\nimport type {PathFunction} from '@github-ui/paths'\nimport {type ReactPartialAnchorProps, useOnAnchorClick} from '@github-ui/react-core/react-partial-anchor'\nimport {ScreenSizeProvider} from '@github-ui/screen-size'\nimport {verifiedFetch} from '@github-ui/verified-fetch'\nimport {CopilotIcon} from '@primer/octicons-react'\nimport {Box, Button, IconButton, Popover, Tooltip} from '@primer/react'\nimport {QueryClient, QueryClientProvider} from '@tanstack/react-query'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\n\nimport {Chat} from './components/Chat'\nimport {ChatPanel} from './components/ChatPanel'\nimport {Header, HEADER_BUTTON_ID, setCopilotButtonAriaExpanded} from './components/Header'\nimport {ChatPortalContainer} from './components/PortalContainerUtils'\nimport {ThreadListView} from './components/ThreadListView'\nimport type {AddCopilotChatReferenceEvent, SearchCopilotEvent, SymbolChangedEvent} from './utils/copilot-chat-events'\nimport {\n  subscribeAddCopilotChatReference,\n  subscribeOpenCopilotChat,\n  subscribeSearchCopilot,\n  subscribeSymbolChanged,\n} from './utils/copilot-chat-events'\nimport {isRepository, makeRepositoryReference} from './utils/copilot-chat-helpers'\nimport {useResizablePanel} from './utils/copilot-chat-hooks'\nimport type {LoadingStateState} from './utils/copilot-chat-reducer'\nimport type {CopilotChatOrg, CopilotChatPayload, CopilotChatRepo, Docset} from './utils/copilot-chat-types'\nimport {copilotFeatureFlags} from './utils/copilot-feature-flags'\nimport {copilotLocalStorage} from './utils/copilot-local-storage'\nimport {CopilotChatProvider, useChatState} from './utils/CopilotChatContext'\nimport {useChatManager} from './utils/CopilotChatManagerContext'\n\nexport interface CopilotChatProps extends CopilotChatPayload, ReactPartialAnchorProps {\n  currentTopic?: CopilotChatRepo | Docset\n  findFileWorkerPath: string\n  ssoOrganizations: CopilotChatOrg[]\n  renderPopover?: boolean\n  chatVisibleSetting?: boolean\n  chatVisibleSettingPath?: string\n  reviewLab: boolean\n}\n\nconst queryClient = new QueryClient()\n\nexport function CopilotChat(props: CopilotChatProps) {\n  const copilotButtonRef = useRef<HTMLButtonElement>(null)\n  const inputRef = useRef<HTMLTextAreaElement>(null)\n  const selectedThreadID = copilotLocalStorage.selectedThreadID\n  const currentReferences = copilotLocalStorage.getCurrentReferences(selectedThreadID) || []\n\n  return (\n    <ScreenSizeProvider>\n      <QueryClientProvider client={queryClient}>\n        <CopilotChatProvider\n          topic={props.currentTopic}\n          login={props.currentUserLogin}\n          apiURL={props.apiURL}\n          workerPath={props.findFileWorkerPath}\n          threadId={selectedThreadID}\n          refs={currentReferences}\n          mode=\"assistive\"\n          ssoOrganizations={props.ssoOrganizations}\n          renderKnowledgeBases={props.renderKnowledgeBases}\n          renderAttachKnowledgeBaseHerePopover={props.renderAttachKnowledgeBaseHerePopover}\n          renderKnowledgeBaseAttachedToChatPopover={props.renderKnowledgeBaseAttachedToChatPopover}\n          chatVisibleSetting={props.chatVisibleSetting}\n          customInstructions={props.customInstructions}\n          chatVisibleSettingPath={props.chatVisibleSettingPath}\n          agentsPath={props.agentsPath}\n          optedInToUserFeedback={props.optedInToUserFeedback}\n          reviewLab={props.reviewLab}\n        >\n          <CopilotHeaderButton\n            renderPopover={props.renderPopover || false}\n            ref={copilotButtonRef}\n            reactPartialAnchor={props.reactPartialAnchor}\n            inputRef={inputRef}\n          />\n          <ChatPortalContainer />\n          <ChatPanelWithHeader ref={copilotButtonRef} inputRef={inputRef} />\n        </CopilotChatProvider>\n      </QueryClientProvider>\n    </ScreenSizeProvider>\n  )\n}\n\nexport const dismissNoticePath: PathFunction<{notice: string}> = ({notice}) => `/settings/dismiss-notice/${notice}`\n\ntype CopilotHeaderButtonProps = {\n  renderPopover: boolean\n  inputRef: React.RefObject<HTMLTextAreaElement>\n} & ReactPartialAnchorProps\nconst CopilotHeaderButton = React.forwardRef<HTMLButtonElement, CopilotHeaderButtonProps>((props, ref) => {\n  const manager = useChatManager()\n  const state = useChatState()\n  const selectedThread = manager.getSelectedThread(state)\n  const {currentTopic, currentView} = state\n\n  useEffect(() => {\n    return subscribeOpenCopilotChat(e => void manager.handleOpenPanelEvent(selectedThread, e, currentTopic))\n  }, [currentTopic, selectedThread, manager])\n\n  useEffect(() => {\n    return subscribeAddCopilotChatReference((e: AddCopilotChatReferenceEvent) => {\n      void manager.handleAddReferenceEvent(e)\n    })\n  }, [selectedThread, manager, state.currentReferences])\n\n  useEffect(() => {\n    return subscribeSymbolChanged((e: SymbolChangedEvent) => {\n      if (copilotFeatureFlags.implicitContext) {\n        void manager.handleSymbolChangedEvent(e)\n      }\n    })\n  })\n\n  useEffect(() => {\n    return subscribeSearchCopilot((e: SearchCopilotEvent) => {\n      void manager.handleSearchCopilotEvent(e)\n    })\n  }, [manager])\n\n  useEffect(() => {\n    const url = new URL(window.location.href, window.location.origin)\n    const params = url.searchParams\n    const threadId = state.selectedThreadID\n    // copilot=1 url param means that we have opened the page with the intetion to open the chat\n    // with the threadId that was set in the immersive view\n    if (params.get('copilot') === '1' && threadId) {\n      const thread = state.threads.get(threadId) ?? null\n      void manager.openChat(thread, currentView, 'immersive', state.chatVisibleSettingPath)\n      url.searchParams.delete('copilot')\n      window.history.pushState(null, '', url.toString())\n    }\n  }, [manager, state.selectedThreadID, state.threads, currentView, state.chatVisibleSettingPath])\n\n  useEffect(() => {\n    if (state.chatVisibleSetting) {\n      const thread = state.selectedThreadID ? state.threads.get(state.selectedThreadID) ?? null : null\n      void manager.openChat(thread, state.currentView, 'page load', state.chatVisibleSettingPath)\n    }\n    if (!copilotLocalStorage.getCollapsedState() && window.innerWidth > 768) {\n      setCopilotButtonAriaExpanded(true)\n      manager.expandChat()\n    }\n    // evaluate once when the component is mounted to see if the chat should be opened.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const openChat = useCallback(() => {\n    setCopilotButtonAriaExpanded(!state.chatIsOpen)\n    if (!state.chatIsOpen) {\n      void manager.openChat(\n        selectedThread,\n        currentView,\n        copilotFeatureFlags.copilotFloatingButton ? 'floating-button' : 'header',\n        state.chatVisibleSettingPath,\n        isRepository(currentTopic) ? makeRepositoryReference(currentTopic) : undefined,\n      )\n      manager.expandChat()\n    } else if (state.chatIsCollapsed) {\n      manager.expandChat()\n    } else if (props.inputRef.current) {\n      props.inputRef.current.focus()\n    }\n  }, [\n    currentTopic,\n    currentView,\n    manager,\n    props.inputRef,\n    selectedThread,\n    state.chatIsCollapsed,\n    state.chatIsOpen,\n    state.chatVisibleSettingPath,\n  ])\n\n  if (props.reactPartialAnchor) {\n    return (\n      <Box sx={{position: 'relative'}}>\n        <ExternalAnchorListener reactPartialAnchor={props.reactPartialAnchor} onClick={openChat} />\n        {props.renderPopover ? <WelcomePopover renderPopover={true} /> : <></>}\n      </Box>\n    )\n  }\n\n  return (\n    <Box\n      sx={\n        copilotFeatureFlags.copilotFloatingButton\n          ? {position: 'fixed', bottom: 3, right: 3, zIndex: 9}\n          : {position: 'relative'}\n      }\n      className={copilotFeatureFlags.copilotFloatingButton ? undefined : 'AppHeader-CopilotChatButton'}\n    >\n      <Tooltip aria-label=\"Chat with Copilot\" direction={copilotFeatureFlags.copilotFloatingButton ? 'w' : 's'}>\n        <div>\n          {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n          <IconButton\n            unsafeDisableTooltip={true}\n            ref={ref}\n            id={HEADER_BUTTON_ID}\n            icon={CopilotIcon}\n            aria-label=\"Chat with Copilot\"\n            aria-controls=\"copilot-chat-panel\"\n            onClick={openChat}\n            className={copilotFeatureFlags.copilotFloatingButton ? undefined : 'AppHeader-button'}\n            sx={{\n              backgroundColor: copilotFeatureFlags.copilotFloatingButton\n                ? 'var(--bgColor-default, var(--color-canvas-default))'\n                : 'transparent',\n              color: copilotFeatureFlags.copilotFloatingButton ? 'fg.default !important' : 'fg.muted',\n              mb: copilotFeatureFlags.copilotFloatingButton ? 0 : 1,\n              ...(copilotFeatureFlags.copilotFloatingButton\n                ? {\n                    '--floating-button-size': '2.5rem',\n                    borderRadius: 'var(--floating-button-size)',\n                    border: 'none',\n                    boxShadow: 'var(--shadow-floating-small)',\n                    height: 'var(--floating-button-size)',\n                    width: 'var(--floating-button-size)',\n                    '&:focus, &:active': {\n                      boxShadow: 'var(--shadow-floating-small, var(--shadow-small))',\n                    },\n                  }\n                : {}),\n              '&:hover': {\n                backgroundColor:\n                  'var(--control-transparent-bgColor-hover, var(--color-action-list-item-default-hover-bg))',\n              },\n            }}\n            data-testid=\"copilot-chat-button\"\n            data-hotkey=\"Shift+C\"\n            aria-expanded=\"false\"\n          />\n        </div>\n      </Tooltip>\n      <WelcomePopover renderPopover={props.renderPopover} />\n    </Box>\n  )\n})\n\nfunction ExternalAnchorListener({reactPartialAnchor, onClick}: {onClick: () => void} & ReactPartialAnchorProps) {\n  useOnAnchorClick(reactPartialAnchor!, onClick)\n  return <></>\n}\n\nfunction WelcomePopover({renderPopover}: {renderPopover: boolean}) {\n  const [showPopover, setShowPopover] = useState(renderPopover)\n\n  const handleClosePopover = useCallback(async () => {\n    setShowPopover(false)\n    await verifiedFetch(dismissNoticePath({notice: 'copilot_chat_new_user_popover'}), {method: 'POST'})\n  }, [setShowPopover])\n\n  return (\n    <Popover\n      open={showPopover}\n      caret=\"top-right\"\n      sx={{\n        right: '-4px',\n      }}\n    >\n      <Popover.Content\n        sx={{\n          marginTop: 2,\n        }}\n        data-testid=\"copilot-chat-cta-popover\"\n      >\n        <p>\n          You now have access to{' '}\n          <a\n            href=\"https://docs.github.com/enterprise-cloud@latest/copilot/github-copilot-enterprise/overview/about-github-copilot-enterprise\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Copilot Enterprise\n          </a>\n          {'. '}\n          Use the Copilot icon to get started.\n        </p>\n        <Button data-testid=\"dismiss-copilot-chat-cta-popover\" onClick={handleClosePopover}>\n          Got it!\n        </Button>\n      </Popover.Content>\n    </Popover>\n  )\n}\n\nCopilotHeaderButton.displayName = 'CopilotHeaderButton'\n\ninterface ChatPanelWithHeaderProps {\n  inputRef: React.RefObject<HTMLTextAreaElement>\n}\n\nconst ChatPanelWithHeader = React.forwardRef<HTMLButtonElement, ChatPanelWithHeaderProps>(({inputRef}, ref) => {\n  const state = useChatState()\n  const manager = useChatManager()\n  const experimentsDialogRef = useRef<HTMLDivElement>(null)\n  const [showExperimentsDialog, setShowExperimentsDialog] = useState(false)\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false)\n  const prevMessageCount = useRef<number>(state.messages.length)\n  const prevMessageLoadingState = useRef<LoadingStateState>(state.messagesLoading.state)\n  const {panelWidth, panelHeight, startResize, onResizerKeyDown} = useResizablePanel()\n\n  useEffect(() => {\n    if (\n      state.messages.length > prevMessageCount.current &&\n      state.chatIsCollapsed &&\n      prevMessageLoadingState.current === 'loaded'\n    ) {\n      setHasUnreadMessages(true)\n    }\n    prevMessageCount.current = state.messages.length\n    prevMessageLoadingState.current = state.messagesLoading.state\n  }, [state.chatIsCollapsed, state.messages.length, state.messagesLoading.state])\n\n  useEffect(() => {\n    if (!state.chatIsCollapsed && hasUnreadMessages) {\n      setHasUnreadMessages(false)\n    }\n  }, [hasUnreadMessages, state.chatIsCollapsed])\n\n  if (!state.chatIsOpen) return null\n  return (\n    <ChatPanel\n      experimentsDialogRef={experimentsDialogRef}\n      entrypointRef={ref as React.RefObject<HTMLButtonElement>}\n      handleClose={(usedEscapeKey?: boolean) => {\n        setShowExperimentsDialog(false)\n        manager.closeChat(state.chatVisibleSettingPath)\n        const entryId = state.entryPointId ?? HEADER_BUTTON_ID\n        if (usedEscapeKey && entryId) {\n          const entryElement = document.getElementById(entryId)\n          entryElement?.focus()\n        }\n      }}\n      showExperimentsDialog={showExperimentsDialog}\n      isCollapsed={state.chatIsCollapsed}\n      panelWidth={panelWidth}\n      panelHeight={panelHeight}\n      startResize={startResize}\n      onResizerKeyDown={onResizerKeyDown}\n    >\n      <Header\n        experimentsDialogRef={experimentsDialogRef}\n        view={state.currentView}\n        showExperimentsDialog={showExperimentsDialog}\n        setShowExperimentsDialog={setShowExperimentsDialog}\n        isCollapsed={state.chatIsCollapsed}\n        isResponding={state.messages.length <= 1 && (!!state.streamingMessage || state.isWaitingOnCopilot)}\n        hasUnreadMessages={hasUnreadMessages}\n        startResize={startResize}\n      />\n      {!state.chatIsCollapsed && (\n        <Box sx={{display: 'flex', flexGrow: 1, overflowY: 'auto'}}>\n          <Box sx={{display: 'flex', flexDirection: 'column', flexGrow: 1, maxWidth: '100%'}}>\n            {state.currentView === 'thread' ? (\n              <>\n                <Chat key={state.selectedThreadID} inputRef={inputRef} panelWidth={panelWidth} />\n                <CopilotReferencePreviewDialog />\n              </>\n            ) : (\n              <ThreadListView />\n            )}\n          </Box>\n        </Box>\n      )}\n    </ChatPanel>\n  )\n})\n\nChatPanelWithHeader.displayName = 'ChatPanelWithHeader'\n\ntry{ CopilotChat.displayName ||= 'CopilotChat' } catch {}\ntry{ ExternalAnchorListener.displayName ||= 'ExternalAnchorListener' } catch {}\ntry{ WelcomePopover.displayName ||= 'WelcomePopover' } catch {}","import {registerReactPartial} from '@github-ui/react-core/register-partial'\n\nimport {CopilotChat} from './CopilotChat'\n\nregisterReactPartial('copilot-chat', {\n  Component: CopilotChat,\n})\n","import type {CopilotChatEventPayload, CopilotChatReference} from './copilot-chat-types'\n\nexport class OpenCopilotChatEvent extends Event {\n  declare payload: CopilotChatEventPayload\n  constructor(payload: CopilotChatEventPayload) {\n    super('open-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.payload = payload\n  }\n}\n\nexport class SearchCopilotEvent extends Event {\n  declare content: string\n  declare repoNwo: string\n  constructor(content: string, repoNwo: string) {\n    super('search-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.content = content\n    this.repoNwo = repoNwo\n  }\n}\n\nexport class AddCopilotChatReferenceEvent extends Event {\n  declare reference: CopilotChatReference\n  declare openPanel?: boolean\n  declare id?: string\n  constructor(reference: CopilotChatReference, openPanel: boolean = false, id?: string) {\n    super('add-copilot-chat-reference', {\n      bubbles: false,\n      cancelable: true,\n    })\n    this.reference = reference\n    this.openPanel = openPanel\n    this.id = id\n  }\n}\n\nexport class SymbolChangedEvent extends Event {\n  declare context: CopilotChatReference\n  constructor(context: CopilotChatReference) {\n    super('symbol-changed', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.context = context\n  }\n}\n\ndeclare global {\n  interface WindowEventMap {\n    'open-copilot-chat': OpenCopilotChatEvent\n    'add-copilot-chat-reference': AddCopilotChatReferenceEvent\n    'search-copilot-chat': SearchCopilotEvent\n    'symbol-changed': SymbolChangedEvent\n  }\n}\n\nexport function publishOpenCopilotChat(payload: CopilotChatEventPayload): void {\n  window.dispatchEvent(new OpenCopilotChatEvent(payload))\n}\n\nexport function publishAddCopilotChatReference(\n  payload: CopilotChatReference,\n  openPanel: boolean = false,\n  id?: string,\n): void {\n  window.dispatchEvent(new AddCopilotChatReferenceEvent(payload, openPanel, id))\n}\n\nexport function subscribeOpenCopilotChat(listener: (e: OpenCopilotChatEvent) => void): () => void {\n  window.addEventListener('open-copilot-chat', listener)\n\n  return () => {\n    window.removeEventListener('open-copilot-chat', listener)\n  }\n}\n\nexport function subscribeAddCopilotChatReference(listener: (e: AddCopilotChatReferenceEvent) => void): () => void {\n  window.addEventListener('add-copilot-chat-reference', listener)\n  return () => {\n    window.removeEventListener('add-copilot-chat-reference', listener)\n  }\n}\n\nexport function subscribeSearchCopilot(listener: (e: SearchCopilotEvent) => void): () => void {\n  window.addEventListener('search-copilot-chat', listener)\n  return () => {\n    window.removeEventListener('search-copilot-chat', listener)\n  }\n}\n\nexport function subscribeSymbolChanged(listener: (e: SymbolChangedEvent) => void): () => void {\n  window.addEventListener('symbol-changed', listener)\n\n  return () => {\n    window.removeEventListener('symbol-changed', listener)\n  }\n}\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch (_) {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nexport function stringifyObjectValues(obj: object) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, JSON.stringify(v)]))\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","export class DeferredRegistry<T> {\n  private registrationEntries: Record<\n    string,\n    {\n      promise: Promise<T>\n      resolve?: (r: T) => void\n    }\n  > = {}\n\n  public register(name: string, registration: T) {\n    const entry = this.registrationEntries[name]\n    if (entry) {\n      entry.resolve?.(registration)\n    } else {\n      this.registrationEntries[name] = {\n        promise: Promise.resolve(registration),\n      }\n    }\n  }\n\n  public getRegistration(name: string): Promise<T> {\n    this.registrationEntries[name] ||= new Deferred()\n    return this.registrationEntries[name].promise\n  }\n}\n\nclass Deferred<T> {\n  declare promise\n  declare resolve: (r: T) => void\n\n  constructor() {\n    this.promise = new Promise<T>(resolve => {\n      this.resolve = resolve\n    })\n  }\n}\n","export const PREVENT_AUTOFOCUS_KEY = '__gh__react-core-preventAutofocus'\n","import type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\ninterface ReactPartialAnchor {\n  /**\n   * DO NOT USE THIS PROPERTY DIRECTLY. It is meant to be used with useExternalAnchor and useOnAnchorClick\n   */\n  __wrapperElement: ReactPartialAnchorElement\n}\n\nexport interface ReactPartialAnchorProps {\n  reactPartialAnchor?: ReactPartialAnchor\n}\n\nexport function usePartialAnchorProps(\n  anchorElement: ReactPartialAnchorElement | undefined | null,\n): ReactPartialAnchorProps {\n  useEffect(() => {\n    const anchor = anchorElement?.anchor\n\n    if (!anchor) {\n      return\n    }\n\n    if ('disabled' in anchor) {\n      anchor.disabled = false\n    }\n    anchor.classList.remove('cursor-wait')\n  }, [anchorElement])\n\n  if (!anchorElement) {\n    return {}\n  }\n\n  return {\n    reactPartialAnchor: {\n      __wrapperElement: anchorElement,\n    },\n  }\n}\n\nexport function useExternalAnchor(reactPartialAnchor: ReactPartialAnchor) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor || null)\n  const [open, setOpen] = useState(false)\n\n  const onClick = useCallback(() => {\n    // toggle the open state when clicked\n    setOpen(!open)\n  }, [open, setOpen])\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    ref.current.setAttribute('aria-expanded', open.toString())\n    ref.current.setAttribute('aria-haspopup', 'true')\n  }, [ref, open])\n\n  useOnAnchorClick(reactPartialAnchor, onClick)\n\n  return {\n    ref,\n    open,\n    setOpen,\n  }\n}\n\nexport function useOnAnchorClick(reactPartialAnchor: ReactPartialAnchor, onClick: (event: MouseEvent) => void) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor)\n\n  useEffect(() => {\n    const element = ref.current\n    if (!element) {\n      return\n    }\n\n    element.addEventListener('click', onClick)\n    return () => element.removeEventListener('click', onClick)\n  }, [ref, onClick])\n}\n\nexport type PropsWithPartialAnchor<T> = T & Required<ReactPartialAnchorProps>\n","import {DeferredRegistry} from './deferred-registry'\n\nexport interface PartialRegistration {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Component: React.ComponentType<any>\n}\n\nexport const partialRegistry = new DeferredRegistry<PartialRegistration>()\n\nexport function getReactPartial(appName: string) {\n  return partialRegistry.getRegistration(appName)\n}\n","import {controller} from '@github/catalyst'\nimport {getReactPartial} from './react-partial-registry'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {ReactBaseElement} from './ReactBaseElement'\nimport {PartialEntry} from './PartialEntry'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\n\n// What is this silliness? Is it react or a web component?!\n// It's a web component we use to bootstrap react partials within the monolith.\n@controller\nclass ReactPartialElement extends ReactBaseElement<EmbeddedPartialData> {\n  nameAttribute = 'partial-name'\n\n  async getReactNode(embeddedData: EmbeddedPartialData) {\n    const {Component} = await getReactPartial(this.name)\n\n    // Some React Partials will be wrapped in a react-partial-anchor, which is used to conditionally render the Partial\n    const anchorElement = this.closest<ReactPartialAnchorElement>('react-partial-anchor')\n\n    return (\n      <PartialEntry\n        partialName={this.name}\n        embeddedData={embeddedData}\n        Component={Component}\n        wasServerRendered={this.hasSSRContent}\n        ssrError={this.ssrError}\n        anchorElement={anchorElement}\n      />\n    )\n  }\n}\n","import {partialRegistry, type PartialRegistration} from './react-partial-registry'\n// Import the web component to get it registered on the window\nimport './ReactPartialElement'\n\n// NOTE: if the signature of this method changes, also update the react-partial-name ESLint rule\n// /workspaces/github/ui/packages/eslint-plugin-github-monorepo/rules/react-partial-name.js\nexport function registerReactPartial(name: string, registration: PartialRegistration) {\n  partialRegistry.register(name, registration)\n}\n","import {createContext, useContext} from 'react'\n\nexport const AppPayloadContext = createContext<unknown>(undefined)\n\nexport function useAppPayload<T>(): T {\n  const appPayload = useContext(AppPayloadContext)\n\n  return appPayload as T\n}\n","import safeStorage from '@github-ui/safe-storage'\n\nconst {getItem, setItem, removeItem} = safeStorage('localStorage')\nconst REACT_PROFILING_ENABLED = 'REACT_PROFILING_ENABLED'\n\ninterface ReactProfilingModeMethods {\n  enable: () => void\n  disable: () => void\n  isEnabled: () => boolean\n}\n\nconst ReactProfilingMode: ReactProfilingModeMethods = {\n  enable: () => setItem(REACT_PROFILING_ENABLED, 'true'),\n  disable: () => removeItem(REACT_PROFILING_ENABLED),\n  isEnabled: () => !!getItem(REACT_PROFILING_ENABLED),\n}\n\nexport default ReactProfilingMode\n","import safeStorage from './safe-storage'\n\nexport const {getItem, setItem, removeItem} = safeStorage('sessionStorage')\n","import {SOFT_NAV_STATE} from './states'\n\nexport type SoftNavMechanism = 'turbo' | 'react' | 'turbo.frame'\n\nclass SoftNavEvent extends Event {\n  mechanism: SoftNavMechanism\n\n  constructor(mechanism: SoftNavMechanism, type: string) {\n    super(type)\n    this.mechanism = mechanism\n  }\n}\n\nexport class SoftNavStartEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.START)\n  }\n}\n\nexport class SoftNavSuccessEvent extends SoftNavEvent {\n  visitCount: number\n\n  constructor(mechanism: SoftNavMechanism, visitCount: number) {\n    super(mechanism, SOFT_NAV_STATE.SUCCESS)\n    this.visitCount = visitCount\n  }\n}\n\nexport class SoftNavErrorEvent extends SoftNavEvent {\n  error: string\n\n  constructor(mechanism: SoftNavMechanism, error: string) {\n    super(mechanism, SOFT_NAV_STATE.ERROR)\n    this.error = error\n  }\n}\n\nexport class SoftNavEndEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.END)\n  }\n}\n","import {SOFT_NAV_STATE} from './states'\nimport {\n  SoftNavEndEvent,\n  SoftNavErrorEvent,\n  type SoftNavMechanism,\n  SoftNavStartEvent,\n  SoftNavSuccessEvent,\n} from './events'\nimport {markStart, sendFailureStats, sendRenderStats} from './stats'\nimport {\n  clearSoftNav,\n  getSoftNavFailReason,\n  getSoftNavMechanism,\n  setSoftNavMechanism,\n  unsetSoftNav,\n  setSoftNavReferrer,\n  setSoftNavReactAppName,\n  inSoftNav,\n  getCurrentReactAppName,\n  DEFAULT_SOFT_NAV_ERROR_REASON,\n  setLatestMechanism,\n} from './utils'\n\ninterface SoftNavOptions {\n  skipIfGoingToReactApp?: boolean\n  allowedMechanisms?: SoftNavMechanism[]\n}\n\nlet visitCount = 0\n\nexport function initSoftNav() {\n  visitCount = 0\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.INITIAL))\n\n  clearSoftNav()\n}\n\nexport function startSoftNav(mechanism: SoftNavMechanism) {\n  if (inSoftNav()) return\n\n  startProgressBar()\n  document.dispatchEvent(new SoftNavStartEvent(mechanism))\n\n  setSoftNavMechanism(mechanism)\n  setSoftNavReactAppName()\n  setSoftNavReferrer()\n  markStart()\n}\n\nexport function succeedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount += 1\n\n  document.dispatchEvent(new SoftNavSuccessEvent(getSoftNavMechanism(), visitCount))\n  endSoftNav(options)\n}\n\nexport function failSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount = 0\n  const reason = getSoftNavFailReason() || DEFAULT_SOFT_NAV_ERROR_REASON\n  document.dispatchEvent(new SoftNavErrorEvent(getSoftNavMechanism(), reason))\n\n  endProgressBar()\n  sendFailureStats(reason)\n  clearSoftNav()\n}\n\nexport function endSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  const mechanism = getSoftNavMechanism()\n  endProgressBar()\n  document.dispatchEvent(new SoftNavEndEvent(mechanism))\n\n  unsetSoftNav()\n  setLatestMechanism(mechanism)\n}\n\nexport function renderedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  sendRenderStats()\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.RENDER))\n}\n\nexport function updateFrame() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.FRAME_UPDATE))\n}\n\nfunction startProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.START))\n}\n\nfunction endProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.END))\n}\n\nfunction canTriggerEvent({skipIfGoingToReactApp, allowedMechanisms = []}: SoftNavOptions = {}) {\n  return (\n    inSoftNav() &&\n    (allowedMechanisms.length === 0 || allowedMechanisms.includes(getSoftNavMechanism())) &&\n    (!skipIfGoingToReactApp || !getCurrentReactAppName())\n  )\n}\n","export const SOFT_NAV_STATE = Object.freeze({\n  INITIAL: 'soft-nav:initial',\n  START: 'soft-nav:start',\n  SUCCESS: 'soft-nav:success',\n  ERROR: 'soft-nav:error',\n  FRAME_UPDATE: 'soft-nav:frame-update',\n  END: 'soft-nav:end',\n  RENDER: 'soft-nav:render',\n  PROGRESS_BAR: {\n    START: 'soft-nav:progress-bar:start',\n    END: 'soft-nav:progress-bar:end',\n  },\n})\n","import {sendStats} from '@github-ui/stats'\nimport {getCurrentReactAppName, getSoftNavMechanism, getSoftNavReactAppName, getSoftNavReferrer} from './utils'\nimport type {SoftNavMechanism} from './events'\n\nexport const SOFT_NAV_DURATION_MARK = 'stats:soft-nav-duration'\nexport const MECHANISM_MAPPING: Record<SoftNavMechanism | 'ui' | 'hard', PlatformBrowserSoftNavigationMechanism> = {\n  turbo: 'TURBO',\n  react: 'REACT',\n  'turbo.frame': 'FRAME',\n  ui: 'UI',\n  hard: 'HARD',\n}\nexport function markStart() {\n  // browswers only record the first ~150 resources\n  // clearing it here provides room to track additional resources loaded during the soft-nav\n  performance.clearResourceTimings()\n  performance.mark(SOFT_NAV_DURATION_MARK)\n}\n\nfunction getDurationSinceLastSoftNav() {\n  if (performance.getEntriesByName(SOFT_NAV_DURATION_MARK).length === 0) {\n    return null\n  }\n\n  performance.measure(SOFT_NAV_DURATION_MARK, SOFT_NAV_DURATION_MARK)\n  const measures = performance.getEntriesByName(SOFT_NAV_DURATION_MARK)\n  const measure = measures.pop()\n  return measure ? measure.duration : null\n}\n\nexport function sendFailureStats(turboFailureReason: string) {\n  sendStats({\n    turboFailureReason,\n    turboStartUrl: getSoftNavReferrer(),\n    turboEndUrl: window.location.href,\n  })\n}\n\nexport function sendRenderStats() {\n  const duration = getDurationSinceLastSoftNav()\n\n  if (!duration) return\n\n  const mechanism = MECHANISM_MAPPING[getSoftNavMechanism()]\n  const roundedDuration = Math.round(duration)\n\n  if (mechanism === MECHANISM_MAPPING.react)\n    document.dispatchEvent(new CustomEvent('staffbar-update', {detail: {duration: roundedDuration}}))\n\n  sendStats({\n    requestUrl: window.location.href,\n    softNavigationTiming: {\n      mechanism,\n      destination: getCurrentReactAppName() || 'rails',\n      duration: roundedDuration,\n      initiator: getSoftNavReactAppName() || 'rails',\n    },\n  })\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\nimport type {SoftNavMechanism} from './events'\n\nexport const DEFAULT_SOFT_NAV_ERROR_REASON = 'reload'\n\nexport const SOFT_NAV_FAIL = 'soft-nav:fail'\nexport const SOFT_NAV_FAIL_REFERRER = 'soft-nav:fail-referrer'\nexport const SOFT_NAV_REFERRER = 'soft-nav:referrer'\nexport const SOFT_NAV_MARK = 'soft-nav:marker'\nexport const SOFT_NAV_REACT_APP_NAME = 'soft-nav:react-app-name'\nexport const SOFT_NAV_LATEST_MECHANISM = 'soft-nav:latest-mechanism'\n\nexport function clearSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n  removeItem(SOFT_NAV_REFERRER)\n  removeItem(SOFT_NAV_FAIL)\n  removeItem(SOFT_NAV_FAIL_REFERRER)\n  removeItem(SOFT_NAV_REACT_APP_NAME)\n  removeItem(SOFT_NAV_LATEST_MECHANISM)\n}\n\nexport function setSoftNavMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_MARK, mechanism)\n}\n\nexport function unsetSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n}\n\nexport function inSoftNav() {\n  const softNav = getItem(SOFT_NAV_MARK)\n  return softNav && softNav !== '0'\n}\n\nexport function getSoftNavMechanism(): SoftNavMechanism {\n  return getItem(SOFT_NAV_MARK) as SoftNavMechanism\n}\n\nexport function hasSoftNavFailure() {\n  return Boolean(getSoftNavFailReason())\n}\n\nexport function getSoftNavFailReason() {\n  return getItem(SOFT_NAV_FAIL)\n}\n\nexport function setSoftNavFailReason(reason: string) {\n  setItem(SOFT_NAV_FAIL, reason || DEFAULT_SOFT_NAV_ERROR_REASON)\n  setItem(SOFT_NAV_FAIL_REFERRER, window.location.href)\n}\n\nexport function setSoftNavReferrer() {\n  setItem(SOFT_NAV_REFERRER, window.location.href)\n}\n\nexport function getSoftNavReferrer() {\n  return getItem(SOFT_NAV_REFERRER) || document.referrer\n}\n\nexport function setSoftNavReactAppName() {\n  const appName = getCurrentReactAppName()\n\n  if (appName) {\n    setItem(SOFT_NAV_REACT_APP_NAME, appName)\n  } else {\n    removeItem(SOFT_NAV_REACT_APP_NAME)\n  }\n}\n\nexport function getSoftNavReactAppName() {\n  return getItem(SOFT_NAV_REACT_APP_NAME)\n}\n\nexport function getCurrentReactAppName() {\n  if (document.querySelector('meta[name=\"ui\"]')) return 'ui'\n\n  return document.querySelector('react-app')?.getAttribute('app-name')\n}\n\nexport function setLatestMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_LATEST_MECHANISM, mechanism)\n}\n\nexport function getLatestMechanism() {\n  return getItem(SOFT_NAV_LATEST_MECHANISM) as SoftNavMechanism\n}\n","import {ssrSafeWindow} from '@github-ui/ssr-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {useEffect, useLayoutEffect as unsafe_useLayoutEffect} from 'react'\n\n/**\n * Provides a safe version of `useLayoutEffect` that calls to `useEffect` on the server.\n * This is useful for components that use `useLayoutEffect` but are rendered on the server,\n * since useLayoutEffect cannot run on the server and warns in that environment\n */\nexport const useLayoutEffect =\n  typeof ssrSafeWindow?.document?.createElement !== 'undefined' ? unsafe_useLayoutEffect : useEffect\n","import {ErrorPage} from './ErrorPage'\nimport React from 'react'\n\n// NOTE(jon, 2022-02-28): I copied 99% of this from memex's error-boundary\n\nexport interface ErrorBoundaryProps {\n  children: React.ReactNode\n  fallback?: React.ReactNode\n  /**\n   * Provide a callback to be invoked when an error is thrown (can be used for logging errors)\n   */\n  onError?: (error: Error) => void\n}\n\ninterface ErrorBoundaryState {\n  error: Error | null\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props)\n\n    this.state = {\n      error: null,\n    }\n  }\n\n  /**\n   * Invoked when an error is thrown in the child component,\n   * and used to update state in a concurrent friendly manner\n   */\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  /**\n   * Called _after_ the re-render, used for performing side-effects such as logging\n   */\n  override componentDidCatch(error: Error) {\n    if (typeof this.props.onError === 'function') {\n      this.props.onError(error)\n    } else {\n      defaultOnError(error)\n    }\n  }\n\n  override render() {\n    if (!this.state.error) return this.props.children\n\n    return this.props.fallback === undefined ? <ErrorPage type=\"httpError\" /> : this.props.fallback\n  }\n}\n\n/**\n * Re-throws the error out of the rendering context to ensure that it propagates to failbot.\n * Also avoids react unmounting the entire tree from an uncaught error.\n */\nfunction defaultOnError(error: Error) {\n  setTimeout(() => {\n    throw error\n  })\n}\n","import {Box, Heading} from '@primer/react'\nimport type {PageError} from './app-routing-types'\n\nconst errorMessages: {[httpStatus: number]: string} = {\n  404: 'Didn’t find anything here!',\n  500: 'Looks like something went wrong!',\n}\n\nexport function ErrorPage({httpStatus, type}: PageError) {\n  const message = type === 'fetchError' ? 'Looks like network is down!' : errorMessages[httpStatus || 500]\n  return (\n    <Heading\n      as=\"h1\"\n      tabIndex={-1}\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: '100%',\n        minHeight: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      Error\n      {httpStatus ? <Box sx={{fontSize: '144px', fontWeight: 'bold', lineHeight: 1}}>{httpStatus}</Box> : null}\n      <Box sx={{fontSize: 4, pt: 2}}>{message}</Box>\n    </Heading>\n  )\n}\n\ntry{ ErrorPage.displayName ||= 'ErrorPage' } catch {}","import {useState} from 'react'\nimport type {BrowserHistory, MemoryHistory} from '@remix-run/router'\nimport {Router} from 'react-router-dom'\n// eslint-disable-next-line no-restricted-imports\nimport {useHydratedEffect} from '@github-ui/use-hydrated-effect'\n\ntype Props = {\n  children: React.ReactNode\n  history: BrowserHistory | MemoryHistory\n}\n\nexport function PartialRouter({children, history}: Props) {\n  const [state, setState] = useState({\n    location: history.location,\n  })\n\n  useHydratedEffect(() => history.listen(setState), [history])\n\n  return (\n    <Router location={state.location} navigator={history}>\n      {children}\n    </Router>\n  )\n}\n\ntry{ PartialRouter.displayName ||= 'PartialRouter' } catch {}","// Think of this as the entry point into the framework\nimport React from 'react'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {BaseProviders} from './BaseProviders'\nimport type {BrowserHistory} from '@remix-run/router'\nimport {createMemoryHistory} from '@remix-run/router'\nimport {AppContextProvider} from './AppContextProvider'\nimport {PartialRouter} from './PartialRouter'\nimport {CommonElements} from './CommonElements'\nimport {createBrowserHistory} from './create-browser-history'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {usePartialAnchorProps} from './react-partial-anchor'\n\ninterface Props {\n  partialName: string\n  embeddedData: EmbeddedPartialData\n  Component: React.ComponentType\n  wasServerRendered: boolean\n  ssrError?: HTMLScriptElement\n  anchorElement?: ReactPartialAnchorElement | null\n}\n\nexport function PartialEntry({\n  partialName,\n  embeddedData,\n  Component,\n  wasServerRendered,\n  ssrError,\n  anchorElement,\n}: Props) {\n  // Create a ref to track the browser history:\n  const historyRef = React.useRef<BrowserHistory>()\n  const window = globalThis.window as Window | undefined\n\n  // For linking to work, we can just pass a dummy pathname here. We may consider plumbing the actual path in\n  if (!historyRef.current) {\n    historyRef.current = !window\n      ? createMemoryHistory({initialEntries: [{pathname: '/'}]})\n      : createBrowserHistory({window})\n  }\n  const history = historyRef.current\n  const partialAnchorProps = usePartialAnchorProps(anchorElement)\n\n  // Wrap the partial in an AppContextProvider and static Router so that react-core links\n  // will be functional.\n  return (\n    <BaseProviders appName={partialName} wasServerRendered={wasServerRendered}>\n      <AppContextProvider history={history} routes={[]}>\n        <PartialRouter history={history}>\n          <Component {...embeddedData.props} {...(partialAnchorProps as object)} />\n          <CommonElements ssrError={ssrError} />\n        </PartialRouter>\n      </AppContextProvider>\n    </BaseProviders>\n  )\n}\n\ntry{ PartialEntry.displayName ||= 'PartialEntry' } catch {}","import {target} from '@github/catalyst'\nimport {createRoot, hydrateRoot} from 'react-dom/client'\nimport type {createRoot as createRootType, hydrateRoot as hydrateRootType, Root} from 'react-dom/client'\nimport React from 'react'\nimport ReactProfilingMode from '@github-ui/react-profiling-mode'\nimport {EXPECTED_ERRORS} from './expected-errors'\nimport {sendStats} from '@github-ui/stats'\n\ntype ReactDOM = {\n  createRoot: typeof createRootType\n  hydrateRoot: typeof hydrateRootType\n}\n\nconst REACT_INVARIANT_ERROR_REGEX = /Minified React error #(?<invariant>\\d+)/\n\nexport abstract class ReactBaseElement<T> extends HTMLElement {\n  @target embeddedData: HTMLScriptElement | undefined\n  @target ssrError: HTMLScriptElement | undefined\n  @target reactRoot: HTMLElement | undefined\n  private root: Root | undefined\n\n  abstract nameAttribute: string\n  abstract getReactNode(embeddedData: T): Promise<React.ReactNode>\n\n  protected get name() {\n    return this.getAttribute(this.nameAttribute) as string\n  }\n\n  private get embeddedDataText() {\n    const text = this.embeddedData?.textContent\n\n    if (!text) {\n      throw new Error(`No embedded data provided for react element ${this.name}`)\n    }\n\n    return text\n  }\n\n  get hasSSRContent() {\n    return this.getAttribute('data-ssr') === 'true'\n  }\n\n  connectedCallback() {\n    this.renderReact()\n  }\n\n  disconnectedCallback() {\n    this.root?.unmount()\n    this.root = undefined\n  }\n\n  private async renderReact() {\n    if (!this.reactRoot) throw new Error('No react root provided')\n    let reactDom: ReactDOM = {\n      createRoot,\n      hydrateRoot,\n    }\n\n    // Override the react-dom import if we're in profiling mode\n    if (ReactProfilingMode.isEnabled()) {\n      reactDom = await this.getReactDomWithProfiling()\n    }\n\n    const embeddedData = JSON.parse(this.embeddedDataText) as T\n    const ssrErrorText = this.ssrError?.textContent\n    const node = await this.getReactNode(embeddedData)\n    const baseNode = <React.StrictMode>{node}</React.StrictMode>\n\n    if (ssrErrorText) {\n      this.logSSRError(ssrErrorText)\n    }\n\n    if (this.hasSSRContent) {\n      /**\n       * Styled-components automatically looks for style tags to hydrate on first page load, but will not detect them\n       * if they are added after the initial page load. This causes a hydration error because React isn't expecting\n       * a style tag within the app. To work around this, we need to manually move the style tags to the head before\n       * hydrating the app.\n       *\n       * During hydration, styled-components will create a new style tag which matches the one we moved to the head.\n       * This means that after hydration, we can safely remove the style tag we manually moved to the head.\n       */\n      const styles = this.querySelector('style[data-styled=\"true\"]')\n      if (styles) document.head.appendChild(styles)\n\n      // Hydrate the react app\n      // onRecoverableError is disabled until we have a react version with this fix in:\n      // https://github.com/facebook/react/pull/25692\n      this.root = reactDom.hydrateRoot(this.reactRoot, baseNode, {\n        onRecoverableError: error => {\n          if (!(error instanceof Error)) return\n\n          const match = REACT_INVARIANT_ERROR_REGEX.exec(error.message)\n          const invariant = String(match?.groups?.invariant)\n\n          sendStats({\n            incrementKey: 'REACT_HYDRATION_ERROR',\n            incrementTags: {\n              appName: this.name,\n              invariant,\n            },\n          })\n        },\n      })\n\n      // Remove the manually moved style tag after hydration\n      if (styles) {\n        // Wait until things are idle to remove the style tag. If we do it immediately, we can cause a flash of unstyled content.\n        requestIdleCallback(() => {\n          // styles could have already been removed by Turbo if a navigation happens quickly. Only remove it from the DOM if it's still there.\n          styles.parentElement?.removeChild(styles)\n        })\n      }\n    } else {\n      this.root = reactDom.createRoot(this.reactRoot)\n      this.root.render(baseNode)\n    }\n\n    this.classList.add('loaded')\n  }\n\n  private getReactDomWithProfiling() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return import('react-dom/profiling') as any as Promise<ReactDOM>\n  }\n\n  private logSSRError(ssrErrorText: string) {\n    if (EXPECTED_ERRORS[ssrErrorText]) {\n      // eslint-disable-next-line no-console\n      return console.error('SSR failed with an expected error:', EXPECTED_ERRORS[ssrErrorText])\n    }\n\n    try {\n      const error = JSON.parse(ssrErrorText) as PlatformJavascriptError\n      const stacktrace = parseFailbotStacktrace(error)\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', `${error.type}: ${error.value}\\n`, error, stacktrace)\n    } catch {\n      /**\n       * In the event we couldn't log the error, we should not break the application\n       */\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', ssrErrorText, 'unable to parse as json')\n    }\n  }\n}\n\nfunction parseFailbotStacktrace(error: PlatformJavascriptError) {\n  if (!error.stacktrace) return ''\n  let prefix = '\\n '\n  const stack = error.stacktrace.map((frame: PlatformStackframe) => {\n    const {function: func, filename, lineno, colno} = frame\n    const line = `${prefix} at ${func} (${filename}:${lineno}:${colno})`\n    prefix = ' '\n    return line\n  })\n  return stack.join('\\n')\n}\n\ntry{ REACT_INVARIANT_ERROR_REGEX.displayName ||= 'REACT_INVARIANT_ERROR_REGEX' } catch {}"],"names":["announceFromElement","el","options","isFeatureEnabled","announce","getTextContent","element","undefined","liveRegionAnnounceFromElement","politeness","assertive","message","Element","prototype","document","body","ariaNotify","interrupt","liveRegionAnnounce","setContainerContent","container","ssrSafeDocument","querySelector","textContent","getAttribute","innerText","trim","ListView","ErrorView","ChatPanel","children","entrypointRef","experimentsDialogRef","handleClose","isCollapsed","panelWidth","panelHeight","startResize","onResizerKeyDown","props","overlayRef","useRef","chatIsCollapsed","useChatState","onEscape","useCallback","current","contains","activeElement","Overlay","id","className","clsx","styles","copilotChatPanel","ref","portalContainerName","COPILOT_CHAT_PORTAL_ROOT","onClickOutside","ignoreClickRefs","returnFocusRef","sx","maxWidth","height","maxHeight","minHeight","MIN_PANEL_HEIGHT","width","minWidth","MIN_PANEL_WIDTH","borderBottomLeftRadius","copilotFeatureFlags","copilotFloatingButton","borderBottomRightRadius","right","bottom","anchorSide","preventFocusOnOpen","position","role","aria-labelledby","section","aria-label","style","Box","display","flexDirection","data-testid","inset","cursor","zIndex","onMouseDown","e","aria-valuetext","aria-valuenow","tabIndex","onKeyDown","flexGrow","ChatPanelReferenceContext","Provider","value","displayName","ThreadListView","state","manager","useChatManager","threads","useMemo","sortThreads","handleCreateThread","createThread","openDeleteConfirmationThreadId","setOpenDeleteConfirmationThreadId","useState","threadsLoading","size","p","alignItems","alignContent","justifyItems","gap","Spinner","Flash","variant","Octicon","icon","AlertIcon","error","ActionList","overflowY","Group","GroupHeading","as","map","thread","Item","onSelect","selectThread","LeadingVisual","CommentIcon","threadName","TrailingVisual","RelativeTime","date","Date","parse","updatedAt","format","IconButton","unsafeDisableTooltip","onClick","mr","TrashIcon","tooltipDirection","div","Dialog","title","onClose","footerButtons","buttonType","content","deleteThreadKeepSelection","autoFocus","color","Button","block","queryClient","QueryClient","CopilotChat","copilotButtonRef","inputRef","selectedThreadID","copilotLocalStorage","currentReferences","getCurrentReferences","ScreenSizeProvider","QueryClientProvider","client","CopilotChatProvider","topic","currentTopic","login","currentUserLogin","apiURL","workerPath","findFileWorkerPath","threadId","refs","mode","ssoOrganizations","renderKnowledgeBases","renderAttachKnowledgeBaseHerePopover","renderKnowledgeBaseAttachedToChatPopover","chatVisibleSetting","customInstructions","chatVisibleSettingPath","agentsPath","optedInToUserFeedback","reviewLab","CopilotHeaderButton","renderPopover","reactPartialAnchor","ChatPortalContainer","ChatPanelWithHeader","dismissNoticePath","notice","React","selectedThread","getSelectedThread","currentView","useEffect","subscribeOpenCopilotChat","handleOpenPanelEvent","subscribeAddCopilotChatReference","handleAddReferenceEvent","subscribeSymbolChanged","implicitContext","handleSymbolChangedEvent","subscribeSearchCopilot","handleSearchCopilotEvent","url","URL","window","location","href","origin","params","searchParams","get","openChat","delete","history","pushState","toString","getCollapsedState","innerWidth","setCopilotButtonAriaExpanded","expandChat","chatIsOpen","focus","isRepository","makeRepositoryReference","ExternalAnchorListener","WelcomePopover","Tooltip","direction","HEADER_BUTTON_ID","CopilotIcon","aria-controls","backgroundColor","mb","borderRadius","border","boxShadow","data-hotkey","aria-expanded","useOnAnchorClick","showPopover","setShowPopover","handleClosePopover","verifiedFetch","method","Popover","open","caret","Content","marginTop","a","target","rel","showExperimentsDialog","setShowExperimentsDialog","hasUnreadMessages","setHasUnreadMessages","prevMessageCount","messages","length","prevMessageLoadingState","messagesLoading","useResizablePanel","closeChat","entryId","entryPointId","usedEscapeKey","entryElement","getElementById","Header","view","isResponding","streamingMessage","isWaitingOnCopilot","Chat","CopilotReferencePreviewDialog","registerReactPartial","Component","OpenCopilotChatEvent","Event","constructor","payload","bubbles","cancelable","AddCopilotChatReferenceEvent","reference","openPanel","SymbolChangedEvent","context","publishOpenCopilotChat","dispatchEvent","publishAddCopilotChatReference","listener","addEventListener","removeEventListener","hydroAnalyticsClient","getItem","safeStorage","dimensionPrefix","MARKETING_PARAMS","getOptionsFromMeta","baseContext","AnalyticsClient","_","extendBaseContext","key","app_id","event_url","host","Object","entries","startsWith","replace","visitorMeta","assign","JSON","atob","URLSearchParams","search","includes","toLowerCase","staff","isStaff","sendPageView","sendEvent","type","service","head","cleanContext","stringifyObjectValues","obj","fromEntries","k","v","stringify","DeferredRegistry","register","name","registration","entry","registrationEntries","resolve","promise","Promise","getRegistration","Deferred","PREVENT_AUTOFOCUS_KEY","usePartialAnchorProps","anchorElement","anchor","disabled","classList","remove","__wrapperElement","useExternalAnchor","setOpen","setAttribute","partialRegistry","ReactPartialElement","ReactBaseElement","getReactNode","embeddedData","appName","closest","PartialEntry","partialName","wasServerRendered","hasSSRContent","ssrError","nameAttribute","controller","AppPayloadContext","createContext","useAppPayload","useContext","setItem","removeItem","REACT_PROFILING_ENABLED","enable","disable","isEnabled","SoftNavEvent","mechanism","SoftNavStartEvent","SOFT_NAV_STATE","START","SoftNavSuccessEvent","visitCount","SUCCESS","SoftNavErrorEvent","ERROR","SoftNavEndEvent","END","initSoftNav","INITIAL","clearSoftNav","startSoftNav","inSoftNav","PROGRESS_BAR","setSoftNavMechanism","setSoftNavReactAppName","setSoftNavReferrer","markStart","succeedSoftNav","canTriggerEvent","getSoftNavMechanism","endSoftNav","failSoftNav","reason","getSoftNavFailReason","DEFAULT_SOFT_NAV_ERROR_REASON","endProgressBar","sendFailureStats","unsetSoftNav","setLatestMechanism","renderedSoftNav","sendRenderStats","RENDER","updateFrame","FRAME_UPDATE","skipIfGoingToReactApp","allowedMechanisms","getCurrentReactAppName","freeze","SOFT_NAV_DURATION_MARK","MECHANISM_MAPPING","turbo","react","ui","hard","performance","clearResourceTimings","mark","turboFailureReason","sendStats","turboStartUrl","getSoftNavReferrer","turboEndUrl","duration","getDurationSinceLastSoftNav","getEntriesByName","measure","measures","pop","roundedDuration","Math","round","CustomEvent","detail","requestUrl","softNavigationTiming","destination","initiator","getSoftNavReactAppName","SOFT_NAV_FAIL","SOFT_NAV_FAIL_REFERRER","SOFT_NAV_REFERRER","SOFT_NAV_MARK","SOFT_NAV_REACT_APP_NAME","SOFT_NAV_LATEST_MECHANISM","softNav","hasSoftNavFailure","Boolean","setSoftNavFailReason","referrer","getLatestMechanism","useLayoutEffect","ssrSafeWindow","createElement","unsafe_useLayoutEffect","ErrorBoundary","getDerivedStateFromError","onError","setTimeout","render","fallback","ErrorPage","errorMessages","httpStatus","Heading","justifyContent","fontSize","fontWeight","lineHeight","pt","PartialRouter","setState","useHydratedEffect","listen","Router","navigator","historyRef","globalThis","createBrowserHistory","createMemoryHistory","initialEntries","pathname","partialAnchorProps","BaseProviders","AppContextProvider","routes","CommonElements","REACT_INVARIANT_ERROR_REGEX","HTMLElement","embeddedDataText","text","connectedCallback","renderReact","disconnectedCallback","root","unmount","reactRoot","reactDom","createRoot","hydrateRoot","ReactProfilingMode","getReactDomWithProfiling","ssrErrorText","node","baseNode","logSSRError","appendChild","onRecoverableError","Error","match","exec","invariant","String","groups","incrementKey","incrementTags","requestIdleCallback","parentElement","removeChild","add","EXPECTED_ERRORS","console","stacktrace","parseFailbotStacktrace","prefix","stack","function","func","filename","lineno","colno","frame","line","join"],"sourceRoot":""}