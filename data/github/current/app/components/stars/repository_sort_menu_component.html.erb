<%= render(
  Primer::Alpha::ActionMenu.new(
    select_variant: :single,
    data: { turbo_replace: true },
    menu_id: "stars-sort-menu",
    **@system_arguments
  )
) do |menu| %>
  <% menu.with_show_button do |button| %>
    <% button.with_trailing_action_icon(icon: :"triangle-down") %>
    <%= button_text %>
  <% end %>
    <% each_sort_option do |title, field, direction| %>
      <% menu.with_item(
        tag: :a,
        active: direction == selected_direction && field == selected_field,
        href: user_path(user, params: user_path_params_for(field, direction)),
    ) do %>
        <%= title %>
    <% end %>
  <% end %>
<% end %>
