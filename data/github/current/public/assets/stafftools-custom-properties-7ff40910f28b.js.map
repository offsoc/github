{"version":3,"file":"stafftools-custom-properties-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/stafftools-custom-properties/App.tsx","ui/packages/stafftools-custom-properties/paths.ts","ui/packages/stafftools-custom-properties/routes/RepositoryCustomPropertyValuesIndexPage.tsx","ui/packages/stafftools-custom-properties/routes/OrganizationDefinitionsIndexPage.tsx","ui/packages/stafftools-custom-properties/routes/CustomPropertyDefinitionShowPage.tsx","ui/packages/stafftools-custom-properties/stafftools-custom-properties.ts","ui/packages/react-core/JsonRoute.tsx"],"sourcesContent":["import type {PropsWithChildren} from 'react'\nimport {ThemeProvider} from '@primer/react'\n\nexport const App = ({children}: PropsWithChildren) => {\n  /*\n    hardcoded to light theme for stafftools, as it is opted out of color modes\n    https://github.com/github/github/blob/17f169a6659c0df85d6557d5941413cd8145b4b6/app/controllers/stafftools_controller.rb#L22\n  */\n  return (\n    <ThemeProvider colorMode=\"day\">\n      <div data-color-mode=\"light\">{children}</div>\n    </ThemeProvider>\n  )\n}\n\ntry{ App.displayName ||= 'App' } catch {}","export const customPropertyDefinitionDetailsPath = ({org, propertyName}: {org: string; propertyName: string}) =>\n  `/stafftools/users/${org}/organization_custom_properties/${propertyName}`\n\nexport const customPropertiesDefinitionListPath = ({org}: {org: string}) =>\n  `/stafftools/users/${org}/organization_custom_properties`\n","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {Link} from '@primer/react'\nimport {DataTable, Blankslate} from '@primer/react/drafts'\nimport {useParams} from 'react-router-dom'\nimport {customPropertyDefinitionDetailsPath} from '../paths'\n\nexport function RepositoryCustomPropertyValuesIndexPage() {\n  const {properties} = useRoutePayload<{properties: Record<string, string>}>()\n\n  const tableData = Object.entries(properties).map(([key, value]) => ({\n    id: key,\n    property: key,\n    value,\n  }))\n\n  const {owner} = useParams()\n\n  if (tableData.length === 0) {\n    return (\n      <Blankslate border={true}>\n        <Blankslate.Heading>No properties set in this repository</Blankslate.Heading>\n      </Blankslate>\n    )\n  }\n\n  return (\n    <DataTable\n      data={tableData}\n      columns={[\n        {\n          header: 'Property',\n          field: 'property',\n          renderCell: ({property}) => (\n            <Link href={customPropertyDefinitionDetailsPath({org: owner!, propertyName: property})}>{property}</Link>\n          ),\n        },\n        {header: 'Value', field: 'value'},\n      ]}\n    />\n  )\n}\n\ntry{ RepositoryCustomPropertyValuesIndexPage.displayName ||= 'RepositoryCustomPropertyValuesIndexPage' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {DataTable, Blankslate} from '@primer/react/drafts'\nimport type {CustomPropertyDefinitionSummaryPayload} from '../types/stafftools-custom-properties-types'\nimport {CheckIcon, XIcon} from '@primer/octicons-react'\nimport {useParams} from 'react-router-dom'\nimport {Link, Octicon} from '@primer/react'\nimport {customPropertyDefinitionDetailsPath} from '../paths'\n\nexport function OrganizationDefinitionsIndexPage() {\n  const {definitions} = useRoutePayload<CustomPropertyDefinitionSummaryPayload>()\n\n  const tableData = definitions.map(definition => ({\n    ...definition,\n    id: definition.name,\n  }))\n\n  const {org} = useParams()\n\n  if (tableData.length === 0) {\n    return (\n      <Blankslate border={true}>\n        <Blankslate.Heading>No definitions set in this organization</Blankslate.Heading>\n      </Blankslate>\n    )\n  }\n\n  return (\n    <DataTable\n      data={tableData}\n      columns={[\n        {\n          header: 'Name',\n          field: 'name',\n          renderCell: ({name}) => (\n            <Link href={customPropertyDefinitionDetailsPath({org: org!, propertyName: name})}>{name}</Link>\n          ),\n        },\n        {\n          header: 'Required',\n          field: 'required',\n          renderCell: ({required}) => <Octicon icon={required ? CheckIcon : XIcon} />,\n        },\n        {header: 'Default value', field: 'defaultValue'},\n      ]}\n    />\n  )\n}\n\ntry{ OrganizationDefinitionsIndexPage.displayName ||= 'OrganizationDefinitionsIndexPage' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {CustomPropertyDefinitionPayload} from '../types/stafftools-custom-properties-types'\nimport {CheckIcon, XIcon} from '@primer/octicons-react'\nimport {Box, Octicon, Link} from '@primer/react'\nimport {useParams} from 'react-router-dom'\nimport {PageHeader} from '@primer/react/drafts'\nimport {customPropertiesDefinitionListPath} from '../paths'\n\nexport function CustomPropertyDefinitionShowPage() {\n  const {definition} = useRoutePayload<CustomPropertyDefinitionPayload>()\n  const {name, description, required, defaultValue, valueType, allowedValues} = definition\n\n  const {org} = useParams()\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'column', rowGap: 2}}>\n      <PageHeader>\n        <PageHeader.TitleArea>\n          <PageHeader.Title>\n            <Box sx={{display: 'flex', gap: 2}}>\n              <Link href={customPropertiesDefinitionListPath({org: org!})}>Custom properties</Link> <span>/</span>\n              <span>{name}</span>\n            </Box>\n          </PageHeader.Title>\n        </PageHeader.TitleArea>\n      </PageHeader>\n\n      <span>\n        <strong>Description:</strong> {description}\n      </span>\n      <span>\n        <strong>Value type:</strong> {valueType}\n      </span>\n      <span>\n        <strong>Required:</strong> <Octicon icon={required ? CheckIcon : XIcon} />\n      </span>\n      {defaultValue && (\n        <span>\n          <strong>Default value:</strong> {defaultValue}\n        </span>\n      )}\n      {allowedValues && allowedValues.length > 0 && (\n        <div>\n          <span>\n            <strong>Allowed values:</strong>\n          </span>\n          <Box sx={{display: 'flex', flexDirection: 'column', ml: 2}}>\n            {allowedValues.map((value, index) => (\n              <span key={index}>{value}</span>\n            ))}\n          </Box>\n        </div>\n      )}\n    </Box>\n  )\n}\n\ntry{ CustomPropertyDefinitionShowPage.displayName ||= 'CustomPropertyDefinitionShowPage' } catch {}","import {jsonRoute} from '@github-ui/react-core/json-route'\nimport {registerReactAppFactory} from '@github-ui/react-core/register-app'\nimport {App} from './App'\nimport {RepositoryCustomPropertyValuesIndexPage} from './routes/RepositoryCustomPropertyValuesIndexPage'\nimport {OrganizationDefinitionsIndexPage} from './routes/OrganizationDefinitionsIndexPage'\nimport {CustomPropertyDefinitionShowPage} from './routes/CustomPropertyDefinitionShowPage'\n\nregisterReactAppFactory('stafftools-custom-properties', () => ({\n  App,\n  routes: [\n    jsonRoute({\n      path: '/stafftools/repositories/:owner/:repo/custom_properties',\n      Component: RepositoryCustomPropertyValuesIndexPage,\n    }),\n    jsonRoute({\n      path: '/stafftools/users/:org/organization_custom_properties',\n      Component: OrganizationDefinitionsIndexPage,\n    }),\n    jsonRoute({\n      path: '/stafftools/users/:org/organization_custom_properties/:name',\n      Component: CustomPropertyDefinitionShowPage,\n    }),\n  ],\n}))\n","import type {ChildRoute, LoaderResult, RouteRegistration, TransitionType} from './app-routing-types'\nimport type React from 'react'\nimport type {Location} from '@remix-run/router'\n\nexport interface JsonRouteProps {\n  path: string\n  Component: React.ComponentType\n  transitionType?: TransitionType\n  shouldNavigateOnError?: boolean\n  children?: ChildRoute[]\n}\n/**\n * A utility for building a route registration for a route that consumes a JSON object (either via embedding in a\n * script tag or via a JSON fetch on React soft navigations).\n */\nexport function jsonRoute<TRouteData, TEmbeddedData>({\n  path,\n  Component,\n  /**\n   * Some routes want to handle their own errors and not just show a generic error page. In this case,\n   * the error is just handled like any other payload for the route.\n   * NOTE: We might consider replacing the shouldNavigateOnError flag with a parallel implementation to jsonRoute.\n   */\n  shouldNavigateOnError,\n  transitionType,\n  children,\n}: JsonRouteProps): RouteRegistration<TRouteData, TEmbeddedData> {\n  async function coreLoader({location}: {location: Location}): Promise<LoaderResult<TRouteData>> {\n    let response: Response\n    try {\n      const fetchPath = `${location.pathname}${location.search}`\n      response = await window.fetch(fetchPath, {\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'X-GitHub-Target': 'dotcom',\n          'X-React-Router': 'json',\n        },\n      })\n    } catch (error) {\n      return {\n        type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n        error: {type: 'fetchError'},\n      }\n    }\n    if (response.redirected) {\n      return {\n        type: 'redirect',\n        url: response.url,\n      }\n    } else if (!response.ok) {\n      return {\n        type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n        error: {type: 'httpError', httpStatus: response.status},\n      }\n    } else {\n      try {\n        const responseJson = await response.json()\n        return {\n          type: 'loaded',\n          data: responseJson,\n          title: responseJson.title,\n        }\n      } catch (error) {\n        return {\n          type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n          error: {type: 'badResponseError'},\n        }\n      }\n    }\n  }\n\n  function loadFromEmbeddedData({embeddedData}: {embeddedData: TEmbeddedData}): {data: TRouteData; title: string} {\n    const data = embeddedData as unknown as TRouteData & {title: string}\n    return {data, title: data.title}\n  }\n\n  return {\n    path,\n    // TODO: consider wrapping Component with a component that passes payload as a prop â€” ideally as part of migrating\n    // away from useRoutePayload.\n    Component,\n    coreLoader,\n    loadFromEmbeddedData,\n    transitionType,\n    children,\n  }\n}\n"],"names":["App","children","ThemeProvider","colorMode","div","data-color-mode","displayName","customPropertyDefinitionDetailsPath","org","propertyName","customPropertiesDefinitionListPath","RepositoryCustomPropertyValuesIndexPage","properties","useRoutePayload","tableData","Object","entries","map","key","value","id","property","owner","useParams","length","Blankslate","border","Heading","DataTable","data","columns","header","field","renderCell","Link","href","OrganizationDefinitionsIndexPage","definitions","definition","name","required","Octicon","icon","CheckIcon","XIcon","CustomPropertyDefinitionShowPage","description","defaultValue","valueType","allowedValues","Box","sx","display","flexDirection","rowGap","PageHeader","TitleArea","Title","gap","span","strong","ml","index","registerReactAppFactory","routes","jsonRoute","path","Component","shouldNavigateOnError","transitionType","coreLoader","location","response","fetchPath","pathname","search","window","fetch","headers","Accept","error","type","redirected","url","ok","httpStatus","status","responseJson","json","title","loadFromEmbeddedData","embeddedData"],"sourceRoot":""}