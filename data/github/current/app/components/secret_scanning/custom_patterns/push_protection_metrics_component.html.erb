<% if @push_protection_enabled %>
  <%= render(Primer::Beta::Text.new(tag: :p, font_size: :small, color: :muted)) { "Showing all time activity." } %>
  <%= render(Primer::Box.new(display: :flex, align_items: :stretch, direction: :row, justify_content: :flex_start, flex_wrap: :nowrap, p: 0, test_selector: "metrics-container")) do %>
    <%= render(Primer::Box.new(bg: :subtle, p: 2, w: :full)) do %>
      <%= render(Primer::Beta::Text.new(tag: :span, color: :muted)) { "All secrets blocked" } %>
      <%= render(Primer::Beta::Text.new(tag: :span, display: :block, font_size: 2, test_selector: "total-count")) do %>
      <%= total_block_count %>
      <% end %>
      <%= render(Primer::Beta::Text.new(tag: :span, color: :muted, font_size: :small)) { "Blocks across all edits of this pattern" } %>
    <% end %>
    <%= render(Primer::Box.new(bg: :subtle, p: 2, w: :full, ml: 3)) do %>
      <%= render(Primer::Beta::Text.new(tag: :span, color: :muted)) { "Successful blocks" } %>
      <%= render(Primer::Beta::Text.new(tag: :span, display: :block, font_size: 2, test_selector: "success-count")) do %>
      <%= successful_block_count %>
      <% end %>
      <%= render(Primer::Beta::Text.new(tag: :span, color: :muted, font_size: :small)) { "Blocks not bypassed don't create alerts" } %>
    <% end %>
    <%= render(Primer::Box.new(bg: :subtle, p: 2, w: :full, ml: 3)) do %>
      <%= render(Primer::Beta::Text.new(tag: :span, color: :muted)) { "Bypassed alerts" } %>
      <%= render(Primer::Beta::Text.new(tag: :span, display: :block, font_size: 2, test_selector: "bypass-count")) do %>
      <%= bypassed_alert_count %>
      <% end %>
    <% end %>
  <% end %>
  <% if show_old_pattern_disclaimer? %>
    <%= render(Primer::Beta::Text.new(tag: :p, font_size: :small, color: :muted, mt: 3, test_selector: "old-pattern-disclaimer")) do %>
      <%= render(Primer::Beta::Octicon.new(icon: :info, size: :small)) %>
      Older custom patterns may have inconsistencies in push protection metrics such as higher bypassed alerts than blocked secrets. New data will reduce these over time.
    <% end %>
  <% end %>
<% else %>
  <%= render(Primer::Beta::Text.new(tag: :p, color: :muted, test_selector: "push-protection-disabled")) do %>
    Push protection is disabled. Enable it at the bottom of this page to view metrics.
  <% end %>
<% end %>
