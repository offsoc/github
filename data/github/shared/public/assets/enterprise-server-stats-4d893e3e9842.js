"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["enterprise-server-stats"],{40440:(e,t,r)=>{function n(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}function o(){return`${window.location.protocol}//${window.location.host}${function(){let e=n("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=n("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let r=n("meta[name=analytics-location-params]");for(let e of(r&&(t+=(t?"&":"?")+r.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let r=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${r[0]}($|=)`,"g"),`$1${r[1]}$2`)}return t}()}`}r.d(t,{M:()=>o})},10652:(e,t,r)=>{var n,o=r(45766),a=r(72245),s=r(74848),i=r(75177),l=r(38553),c=r(73729),d=r(69909),u=r(59857);let m=e=>0===e?"":e<0?"danger.fg":"success.fg",f=e=>{if(0===e)return null;let t=e<0?(0,s.jsx)(u.ArrowDownIcon,{}):(0,s.jsx)(u.ArrowUpIcon,{});return(0,s.jsx)(i.A,{sx:{mx:1},children:t})},h=({value:e,suffix:t,sx:r,...n})=>void 0===e?null:(0,s.jsxs)(i.A,{sx:{display:"flex",color:m(e),fontWeight:"bold",...r},...n,children:[f(e),Math.abs(e),t??null]});try{h.displayName||(h.displayName="Delta")}catch{}let p=({label:e,percentChange:t,sx:r={},total:n,...o})=>(0,s.jsxs)(i.A,{sx:{alignItems:"center",bg:"neutral.subtle",boxShadow:"shadow.small",justifyContent:"space-between",p:3,width:"100%",...r},...o,children:[(0,s.jsx)("div",{children:(0,s.jsx)(c.A,{as:"h3",sx:{color:"fg.muted",fontSize:1,fontWeight:"normal",mb:1},children:e})}),(0,s.jsxs)(i.A,{sx:{display:"flex",alignItems:"baseline"},children:[(0,s.jsxs)(d.A,{sx:{color:"fg.default",fontSize:4},children:[" ",n.toLocaleString()]}),(0,s.jsx)(h,{value:t,sx:{ml:2},suffix:"%"})]})]});try{p.displayName||(p.displayName="HeroStat")}catch{}let g=e=>{let t=e<3?3:e;return Array(t=t>6?6:t).fill("1fr").join(" ")},y=({height:e=300,heroStats:t=[],loading:r,series:n,title:o,error:a,...c})=>(0,s.jsxs)(i.A,{"aria-live":"polite","aria-busy":!!r,...c,children:[(0,s.jsx)("h3",{className:"mb-3",children:o}),!!t.length&&(0,s.jsx)(i.A,{sx:{display:["block","block","grid","grid"],gap:4,gridTemplateColumns:g(t.length),justifyContent:"space-between",my:4},children:t.map(e=>(0,s.jsx)(p,{sx:{marginTop:[2,2,0,0]},...e},`${o}-${e.label}`))}),(0,s.jsx)(i.A,{className:"height-full",sx:{my:4},children:(0,s.jsx)(i.A,{sx:{height:e,position:"relative"},children:r?(0,s.jsx)(l.A,{"data-testid":"loading-indicator",sx:{margin:"auto",position:"absolute",top:0,bottom:0,left:0,right:0}}):(0,s.jsx)("line-chart",{"data-testid":"line-chart",error:a||null,series:JSON.stringify(n)})})})]});try{y.displayName||(y.displayName="Chart")}catch{}var _=r(96540),v=r(40588),b=r(28784);!function(e){e.Issues="issues",e.Pulls="pulls",e.Repos="repos",e.Users="users",e.Orgs="orgs"}(n||(n={}));let R={issues:{title:"Issues"},pulls:{title:"Pull Requests"},repos:{title:"Repositories"},users:{title:"Users"},orgs:{title:"Orgs & Teams"}},S=async({enterpriseSlug:e,period:t,server:r,statKey:n})=>{try{let o=new URLSearchParams({period:t,server:r}).toString(),a=await (0,b.lS)(`/enterprises/${e}/enterprise_installations/server_stats/${n}?${o}`);if(a.ok)return a.json();throw Error(a.statusText)}catch(e){throw(0,v.N7)(Error(`error fetching chart data: ${e?.message??"unknown error"}`)),e}},w={data:void 0,error:void 0,loading:!0};function E(e,{enterpriseSlug:t,server:r,period:n}){let[o,a]=(0,_.useState)(w);return(0,_.useEffect)(()=>{a(w),(async()=>{let o,s;try{o=await S({enterpriseSlug:t,period:n,server:r,statKey:e})}catch(e){s=e?.message||"error fetching chart data"}a({error:s,loading:!1,...o})})()},[t,n,r,e]),(0,_.useMemo)(()=>({...o,statKey:e,title:R[e].title}),[o,e])}function x({enterpriseSlug:e,selectedServer:t,timePeriod:r,...o}){let a={enterpriseSlug:e,period:r,server:t},i=E(n.Issues,a),l=E(n.Pulls,a),c=E(n.Repos,a),d=E(n.Users,a),u=E(n.Orgs,a);return(0,s.jsx)("div",{...o,children:[i,l,c,d,u].map(({loading:e,error:t,title:r,statKey:n,data:o})=>(0,s.jsx)(y,{"data-hpc":!0,error:t?`Could not load ${r} data`:void 0,loading:e,sx:{my:4},title:r,...o},n))})}try{x.displayName||(x.displayName="EnterpriseServerStats")}catch{}(0,a.k)("enterprise-server-stats",{Component:x}),(0,o.Wh)()},40588:(e,t,r)=>{r.d(t,{N7:()=>g});var n=r(36301),o=r(54098),a=r(24212),s=r(40440),i=r(14740),l=r(97156),c=r(97564),d=r(54861);let u=!1,m=0,f=Date.now(),h=new Set(["Failed to fetch","NetworkError when attempting to fetch resource."]);function p(e){return!!("AbortError"===e.name||"TypeError"===e.name&&h.has(e.message)||e.name.startsWith("ApiError")&&h.has(e.message))}function g(e,t={}){if((0,c.G7)("FAILBOT_HANDLE_NON_ERRORS")){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(w.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let r=Error(),n=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);y(v({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${n}`,stacktrace:b(r),catalogService:void 0},t));return}p(e)||y(v(_(e),t))}else p(e)||y(v(_(e),t))}async function y(e){if(!(!S&&!u&&m<10&&(0,o.TT)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>R.test(e.filename)||R.test(e.function))){u=!0;return}m++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function _(e){return{type:e.name,value:e.message,stacktrace:b(e),catalogService:e.catalogService}}function v(e,t={}){return Object.assign({error:e,sanitizedUrl:(0,s.M)()||window.location.href,readyState:document.readyState,referrer:(0,d.dR)(),timeSinceLoad:Math.round(Date.now()-f),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,n.y)();return`anonymous-${t}`}()||void 0,bundler:i.v,ui:!!document.querySelector('meta[name="ui"]')},t)}function b(e){return(0,a.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}let R=/(chrome|moz|safari)-extension:\/\//,S=!1;l.cg?.addEventListener("pageshow",()=>S=!1),l.cg?.addEventListener("pagehide",()=>S=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{g(e.data.error)});let w=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new n),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let n=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>a,QJ:()=>s,w8:()=>o});var n=r(96540);function o(e){return((0,n.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function a(e){let t=(0,n.useRef)(e.__wrapperElement.anchor||null),[r,o]=(0,n.useState)(!1),a=(0,n.useCallback)(()=>{o(!r)},[r,o]);return(0,n.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),s(e,a),{ref:t,open:r,setOpen:o}}function s(e,t){let r=(0,n.useRef)(e.__wrapperElement.anchor);(0,n.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let n=new(r(92536)).R;var o=r(74848),a=r(39595),s=r(24508),i=r(23235);let l=class ReactPartialElement extends s.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,n.getRegistration(t)),a=this.closest("react-partial-anchor");return(0,o.jsx)(i.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:a})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){n.register(e,t)}l=function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}([a.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>i});let{getItem:n,setItem:o,removeItem:a}=(0,r(74572).A)("localStorage"),s="REACT_PROFILING_ENABLED",i={enable:()=>o(s,"true"),disable:()=>a(s),isEnabled:()=>!!n(s)}},69653:(e,t,r)=>{r.d(t,{Ai:()=>a,Gq:()=>n,SO:()=>o});let{getItem:n,setItem:o,removeItem:a}=(0,r(74572).A)("sessionStorage")},54861:(e,t,r)=>{r.d(t,{BW:()=>o,Ff:()=>f,HK:()=>v,JA:()=>E,LM:()=>h,Pv:()=>S,Vy:()=>m,ZW:()=>R,dR:()=>b,di:()=>p,fX:()=>w,k9:()=>_,my:()=>y,r7:()=>x,wG:()=>g,xT:()=>u});var n=r(69653);let o="reload",a="soft-nav:fail",s="soft-nav:fail-referrer",i="soft-nav:referrer",l="soft-nav:marker",c="soft-nav:react-app-name",d="soft-nav:latest-mechanism";function u(){(0,n.SO)(l,"0"),(0,n.Ai)(i),(0,n.Ai)(a),(0,n.Ai)(s),(0,n.Ai)(c),(0,n.Ai)(d)}function m(e){(0,n.SO)(l,e)}function f(){(0,n.SO)(l,"0")}function h(){let e=(0,n.Gq)(l);return e&&"0"!==e}function p(){return(0,n.Gq)(l)}function g(){return!!y()}function y(){return(0,n.Gq)(a)}function _(e){(0,n.SO)(a,e||o),(0,n.SO)(s,window.location.href)}function v(){(0,n.SO)(i,window.location.href)}function b(){return(0,n.Gq)(i)||document.referrer}function R(){let e=w();e?(0,n.SO)(c,e):(0,n.Ai)(c)}function S(){return(0,n.Gq)(c)}function w(){return document.querySelector('meta[name="ui"]')?"ui":document.querySelector("react-app")?.getAttribute("app-name")}function E(e){(0,n.SO)(d,e)}function x(){return(0,n.Gq)(d)}},28784:(e,t,r)=>{function n(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function o(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},o=t?.body?JSON.stringify(t.body):void 0;return n(e,{...t,body:o,headers:r})}function a(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return n(e,{...t,headers:r})}function s(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return o(e,{...t,headers:r})}r.d(t,{DI:()=>n,QJ:()=>a,Sr:()=>s,lS:()=>o})},23235:(e,t,r)=>{r.d(t,{c:()=>h});var n=r(74848),o=r(96540),a=r(36165),s=r(45588),i=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,a]=(0,o.useState)({location:t.location});return(0,c.m)(()=>t.listen(a),[t]),(0,n.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),m=r(51261),f=r(75014);function h({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:h}){let p=o.useRef(),g=globalThis.window;p.current||(p.current=g?(0,m.z)({window:g}):(0,s.sC)({initialEntries:[{pathname:"/"}]}));let y=p.current,_=(0,f.w8)(h);return(0,n.jsx)(a.U,{appName:e,wasServerRendered:l,children:(0,n.jsx)(i.Q,{history:y,routes:[],children:(0,n.jsxs)(d,{history:y,children:[(0,n.jsx)(r,{...t.props,..._}),(0,n.jsx)(u.h,{ssrError:c})]})})})}try{h.displayName||(h.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var n=r(74848),o=r(39595),a=r(5338),s=r(96540),i=r(23581),l=r(79461),c=r(51528);function d(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:a.H,hydrateRoot:a.c};i.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,o=await this.getReactNode(t),l=(0,n.jsx)(s.StrictMode,{children:o});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87335,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:n,lineno:o,colno:a}=e,s=`${t} at ${r} (${n}:${o}:${a})`;return t=" ",s}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([o.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([o.aC],ReactBaseElement.prototype,"ssrError",void 0),d([o.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_chart_js_dist_chart_esm_js","vendors-node_modules_ml-regression-simple-linear_src_index_js-node_modules_kurkle_color_dist_-e1ea4c","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-b63486","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_insights-charts_src_index_ts"],()=>t(10652)),e.O()}]);
//# sourceMappingURL=enterprise-server-stats-96159b6ad6bd.js.map