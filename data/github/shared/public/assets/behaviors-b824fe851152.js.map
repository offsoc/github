{"version":3,"file":"behaviors-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/autosearch-form.ts","app/assets/modules/github/behaviors/favicon.ts","app/assets/modules/github/behaviors/hovercards.ts","app/assets/modules/github/behaviors/quote-selection.ts","app/assets/modules/github/alive/idle-state.ts","ui/packages/turbo/frame.ts","ui/packages/web-vitals/hydro-stats.ts","ui/packages/hotkey/observer.ts","app/assets/modules/github/behaviors/ajax-loading.ts","app/assets/modules/github/behaviors/ajax-pagination.ts","app/assets/modules/github/behaviors/console-debug.ts","app/assets/modules/github/behaviors/analytics-events.ts","app/assets/modules/github/behaviors/animated-image.ts","app/assets/modules/github/behaviors/autocheck.ts","app/assets/modules/github/behaviors/autocomplete.ts","app/assets/modules/github/behaviors/autoselect.ts","app/assets/modules/github/behaviors/autosubmit.ts","app/assets/modules/github/behaviors/avatar-reset-text.ts","app/assets/modules/github/behaviors/billing-addons.ts","app/assets/modules/github/repositories/blob-header.ts","app/assets/modules/github/behaviors/blob-csv.ts","app/assets/modules/github/behaviors/branch-protection-integration-select.ts","app/assets/modules/github/behaviors/bulk-actions.ts","app/assets/modules/github/behaviors/bundle-download-stats.ts","app/assets/modules/github/behaviors/buttons.ts","app/assets/modules/github/behaviors/check-all.ts","app/assets/modules/github/behaviors/clear-data-on-logout.ts","app/assets/modules/github/behaviors/clipboard-copy.ts","app/assets/modules/github/behaviors/code-nav.ts","app/assets/modules/github/behaviors/commenting/ajax.ts","app/assets/modules/github/behaviors/commenting/close.ts","app/assets/modules/github/behaviors/commenting/focus.ts","app/assets/modules/github/png-scanner.ts","app/assets/modules/github/image-dimensions.ts","app/assets/modules/github/behaviors/commenting/caret-placement.ts","app/assets/modules/github/behaviors/commenting/markdown.ts","app/assets/modules/github/behaviors/commenting/preview.ts","app/assets/modules/github/behaviors/commenting/reaction-suggestion.ts","app/assets/modules/github/behaviors/commits.ts","app/assets/modules/github/behaviors/company-name-input.ts","app/assets/modules/github/behaviors/company-owned.ts","app/assets/modules/github/behaviors/details-element.ts","app/assets/modules/github/behaviors/details-menu.ts","app/assets/modules/github/behaviors/dialog-helpers.ts","app/assets/modules/github/behaviors/disable-with.ts","app/assets/modules/github/behaviors/feature-preview-indicator.ts","app/assets/modules/github/behaviors/feature-preview-trigger.ts","app/assets/modules/github/upload/attachment-upload.ts","app/assets/modules/github/upload/batch-upload.ts","app/assets/modules/github/upload/batch.ts","app/assets/modules/github/behaviors/file-attachment.ts","app/assets/modules/github/filter-list.ts","app/assets/modules/github/behaviors/filter-input.ts","app/assets/modules/github/filter-sort-list.ts","app/assets/modules/github/substring-memory-filter-list.ts","app/assets/modules/github/labels-typeahead-filter-list.ts","app/assets/modules/github/behaviors/filterable.ts","app/assets/modules/github/behaviors/fixed-offset-fragment-navigation-observer.ts","app/assets/modules/github/behaviors/flash.ts","app/assets/modules/github/flash.ts","app/assets/modules/github/behaviors/flash-observer.ts","app/assets/modules/github/behaviors/focus-delay.ts","app/assets/modules/github/behaviors/form-toggle.ts","app/assets/modules/github/behaviors/fuzzy-list.ts","app/assets/modules/github/behaviors/hooks.ts","app/assets/modules/github/behaviors/gfm.ts","app/assets/modules/github/behaviors/hotkey-map.ts","app/assets/modules/github/behaviors/hydro-analytics-pageview.ts","app/assets/modules/github/behaviors/hydro-analytics-tracking.ts","app/assets/modules/github/behaviors/hydro-click-tracking.ts","app/assets/modules/github/behaviors/immediate-updates.ts","app/assets/modules/github/behaviors/indeterminate.ts","app/assets/modules/github/behaviors/jump-to-loader.ts","app/assets/modules/github/behaviors/keyboard-shortcuts.ts","app/assets/modules/github/behaviors/length-limited-input-with-warning.ts","app/assets/modules/github/behaviors/member-search-filter.ts","app/assets/modules/github/behaviors/notice.ts","app/assets/modules/github/behaviors/open-in-github-dev.ts","app/assets/modules/github/behaviors/permalink.ts","app/assets/modules/github/behaviors/permission-menu-form.ts","app/assets/modules/github/behaviors/turbo-timing.ts","app/assets/modules/github/behaviors/print-popup.ts","app/assets/modules/github/behaviors/poll-include-fragment.ts","app/assets/modules/github/behaviors/quick-submit.ts","app/assets/modules/github/behaviors/reactions.ts","app/assets/modules/github/behaviors/remote-form.ts","app/assets/modules/github/behaviors/removed-contents.ts","app/assets/modules/github/behaviors/replace-remote-form.ts","app/assets/modules/github/behaviors/report-long-tasks.ts","app/assets/modules/github/behaviors/saved-replies.ts","app/assets/modules/github/behaviors/scanning.ts","app/assets/modules/github/notifications/v2/notification-shelf-helpers.ts","app/assets/modules/github/behaviors/site-notifications.ts","app/assets/modules/github/behaviors/site-search.ts","app/assets/modules/github/behaviors/size-to-fit.ts","app/assets/modules/github/behaviors/smooth-scroll-anchor.ts","app/assets/modules/github/behaviors/snippet-clipboard-copy.ts","app/assets/modules/github/behaviors/social.ts","app/assets/modules/github/behaviors/socket-channel.ts","app/assets/modules/github/behaviors/stale-session.ts","app/assets/modules/github/behaviors/sso-auto-replay.ts","app/assets/modules/github/behaviors/statuses.ts","app/assets/modules/github/behaviors/sudo-required.ts","app/assets/modules/github/behaviors/suggesters/emoji-suggester.ts","app/assets/modules/github/behaviors/suggesters/issue-suggester.ts","app/assets/modules/github/behaviors/suggesters/mention-suggester.ts","app/assets/modules/github/behaviors/survey.ts","app/assets/modules/github/behaviors/sync-details-text.ts","app/assets/modules/github/behaviors/tab-container.ts","app/assets/modules/github/behaviors/team-members.ts","app/assets/modules/github/behaviors/timeline/marker.ts","app/assets/modules/github/behaviors/timeline/progressive.ts","app/assets/modules/github/behaviors/register-service-worker.ts","app/assets/modules/github/behaviors/targetable-elements.ts","app/assets/modules/github/behaviors/timeline/timeline-accessibility.ts","app/assets/modules/github/behaviors/toggler.ts","ui/packages/turbo/setup.ts","ui/packages/turbo/history.ts","ui/packages/turbo/progress-bar.ts","ui/packages/turbo/cache.ts","ui/packages/turbo/events.ts","ui/packages/turbo/soft-nav.ts","app/assets/modules/github/behaviors/tz-cookie.ts","app/assets/modules/github/timezone.ts","app/assets/modules/github/behaviors/sudo-credential-options.ts","app/assets/modules/github/behaviors/unread-comments.ts","app/assets/modules/github/behaviors/unread-item-counter.ts","app/assets/modules/github/behaviors/updatable-content-observer.ts","app/assets/modules/github/behaviors/updatable-content-stale-object.ts","app/assets/modules/github/behaviors/upload-avatar.ts","app/assets/modules/github/behaviors/user-content.ts","app/assets/modules/github/behaviors/user-status-loader.ts","app/assets/modules/github/behaviors/user-lists.ts","app/assets/modules/github/behaviors/warn-unsaved-changes.ts","app/assets/modules/github/behaviors/will-transition-once.ts","app/assets/modules/github/issues/issue-link.ts","app/assets/modules/github/issues/labels.ts","app/assets/modules/github/notifications/configure-thread-subscription-dialog.ts","app/assets/modules/github/issues/sidebar-widget.ts","app/assets/modules/github/issues/sidebar-memex-input.ts","app/assets/modules/github/issues/sidebar.ts","app/assets/modules/github/memex/search.ts","ui/packages/soft-nav/external.ts","ui/packages/web-vitals/web-vitals.ts","ui/packages/web-vitals/timing-stats.ts","ui/packages/web-vitals/get-selector.ts","ui/packages/web-vitals/hpc-events.ts","ui/packages/web-vitals/hpc.ts","ui/packages/web-vitals/inp/interaction-count.ts","ui/packages/web-vitals/inp/interaction-list.ts","ui/packages/web-vitals/inp/metric.ts","ui/packages/web-vitals/inp/interaction-processor.ts","ui/packages/web-vitals/inp/observer.ts","ui/packages/soft-nav/setup.ts","app/assets/modules/behaviors.ts","ui/packages/web-vitals/setup.ts","app/assets/modules/github/behaviors/batch-deferred-content/batch-loader.ts","app/assets/modules/github/behaviors/batch-deferred-content.ts","app/assets/modules/github/behaviors/characters-remaining.ts","app/assets/modules/github/behaviors/confirm.ts","app/assets/modules/github/behaviors/document-dropzone.ts","app/assets/modules/github/behaviors/encrypt.ts","app/assets/modules/github/behaviors/responsive-underlinenav.ts","app/assets/modules/github/behaviors/session-resume.ts","app/assets/modules/github/behaviors/side-navigation.ts","app/assets/modules/github/behaviors/tag-input.ts","app/assets/modules/github/behaviors/user-select-contain-polyfill.ts","app/assets/modules/github/code-editor.ts","app/assets/modules/github/fuzzy-list-element.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/notifications/v2/notification-shelf-referrer-params.ts","app/assets/modules/github/notifications/v2/update-notification-states.ts","app/assets/modules/github/range.ts","app/assets/modules/github/session-resume-helpers.ts","app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/throttled-input.ts","ui/packages/alive-socket-channel/updatable-content-batcher.ts","ui/packages/alive-socket-channel/alive-socket-channel.ts","ui/packages/alive/alive.ts","ui/packages/alive/session.ts","ui/packages/allow-user-content-scrolling/allow-user-content-scrolling.ts","ui/packages/code-mirror/emit-to-codemirror.ts","ui/packages/document-metadata/document-metadata.ts","ui/packages/eventloop-tasks/eventloop-tasks.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/trusted-types-policies/jtml.ts","ui/packages/jtml-shimmed/jtml-shimmed.ts","ui/packages/sudo/sudo.ts","ui/packages/text/text.ts","ui/packages/trusted-types-policies/alive.ts","ui/packages/trusted-types-policies/turbo.ts","ui/packages/turbo/utils.ts","ui/packages/webauthn-get-element/webauthn-get-element.ts","ui/packages/webauthn-support-level/webauthn-support-level.ts"],"sourcesContent":["// Autosearch form\n//\n// Automatically replaces the contents of a container against a search field\n// in the search form.\n//\n// Note: Using `data-throttled-autosubmit` means that the form will autosubmit\n// on input with a bit of throttle so that we don't send unnessesary requests\n// to the server. See `app/assets/modules/github/behaviors/autosubmit.js`.\n//\n// Markup:\n//\n// `data-autosearch-results-container` - The ID of the container to update with results\n//\n// <form action=\"/search\" data-autosearch-results-container=\"search-results\">\n//   <input type=\"search\" placeholder=\"Find something\" data-throttled-autosubmit>\n//   <div id=\"search-results\">\n//     This content will get replaced when the input changes\n//   </div>\n// </form>\n//\nimport {announceFromElement} from '@github-ui/aria-live'\nimport {combineGetFormSearchParams} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {replaceState} from '@github-ui/browser-history-state'\n\nlet previousController: AbortController | null = null\nlet resultsTimeout: ReturnType<typeof setTimeout> | undefined\nconst NO_DELAY = 0\nconst SCREEN_READER_DELAY = 500\non('submit', '[data-autosearch-results-container]', async function (event) {\n  const form = event.currentTarget\n  if (!(form instanceof HTMLFormElement)) return\n  event.preventDefault()\n\n  previousController?.abort()\n  form.classList.add('is-sending')\n  const url = new URL(form.action, window.location.origin)\n  const method = form.method\n  const formData = new FormData(form)\n  const serialized = combineGetFormSearchParams(url, formData)\n  let body = null\n  if (method === 'get') {\n    url.search = serialized\n  } else {\n    body = formData\n  }\n  const {signal} = (previousController = new AbortController())\n  const request = new Request(url.toString(), {\n    method,\n    body,\n    signal,\n    headers: {Accept: 'text/html', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  let response: Response | null = null\n  try {\n    response = await fetch(request)\n  } catch {\n    // Ignore network errors\n  }\n  form.classList.remove('is-sending')\n  if (!response || !response.ok || signal.aborted) return\n  const id = form.getAttribute('data-autosearch-results-container')\n  const resultsContainer = id ? document.getElementById(id) : null\n  if (resultsContainer) {\n    const oldHeight = resultsContainer.style.height\n    resultsContainer.style.height = getComputedStyle(resultsContainer).height\n    resultsContainer.textContent = ''\n    if (resultsTimeout !== undefined) clearTimeout(resultsTimeout)\n    const delayResults = resultsContainer.hasAttribute('data-delay-results')\n    const results = await response.text()\n\n    // The screenreader will try to find an element with [data-autosearch-results] attributes to read.\n    // Otherwise it will fallback to the first element from the response.\n    const resultsContent =\n      parseHTML(document, results).querySelector('[data-autosearch-results]') ||\n      parseHTML(document, results).firstElementChild\n\n    resultsTimeout = setTimeout(\n      () => {\n        resultsContainer.appendChild(parseHTML(document, results))\n        announceFromElement(resultsContent as HTMLElement)\n        requestAnimationFrame(() => {\n          resultsContainer.style.height = oldHeight\n        })\n      },\n      delayResults ? SCREEN_READER_DELAY : NO_DELAY,\n    )\n  }\n  replaceState(null, '', `?${serialized}`)\n})\n","// Favicon manager\n//\n// Manages light and dark favicon variations, and handles status,\n// showing a , check, or pending dot over depending on the page status\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\nlet oldHref: string\n\nfunction updateFavicon(newHref?: string, colorScheme?: string) {\n  const favicon = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/svg+xml\"]')\n  const faviconFallback = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/png\"]')\n\n  if (!colorScheme) colorScheme = 'light'\n  const colorSchemeSuffix = colorScheme === 'light' ? '' : '-dark'\n\n  if (favicon && faviconFallback) {\n    if (oldHref == null) {\n      oldHref = favicon.href\n    }\n\n    if (newHref) {\n      newHref = newHref.substr(0, newHref.lastIndexOf('.'))\n      newHref = `${newHref}${colorSchemeSuffix}.svg`\n      favicon.href = newHref\n\n      const newFallbackHref = favicon.href.substr(0, favicon.href.lastIndexOf('.'))\n      faviconFallback.href = `${newFallbackHref}.png`\n    } else {\n      const n = favicon.href.indexOf('-dark.svg')\n      const newFaviconName = favicon.href.substr(0, n !== -1 ? n : favicon.href.lastIndexOf('.'))\n\n      favicon.href = `${newFaviconName}${colorSchemeSuffix}.svg`\n      faviconFallback.href = `${newFaviconName}${colorSchemeSuffix}.png`\n    }\n  }\n}\n\nfunction prefersDarkColorScheme() {\n  return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches\n}\n\nfunction resetIcon() {\n  if (oldHref != null) updateFavicon(oldHref, prefersDarkColorScheme() ? 'dark' : 'light')\n}\n\nfunction updateDarkFavicon() {\n  if (prefersDarkColorScheme()) {\n    updateFavicon(undefined, 'dark')\n  }\n}\n\nobserve('[data-favicon-override]', {\n  add(el) {\n    const href = el.getAttribute('data-favicon-override')!\n\n    // allow `remove` for the old element to fire first\n    setTimeout(() => updateFavicon(href, prefersDarkColorScheme() ? 'dark' : 'light'))\n  },\n  remove() {\n    resetIcon()\n  },\n})\n\nupdateDarkFavicon()\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, updateDarkFavicon)\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addListener(() => {\n  updateFavicon(undefined, prefersDarkColorScheme() ? 'dark' : 'light')\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport memoize from '@github/memoize'\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {focusTrap} from '@primer/behaviors'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {trackView} from '../hydro-tracking'\n\ntype Position = {\n  containerTop: number\n  containerLeft: number\n  contentClassSuffix: string\n}\nlet hovercardsEnabledForUser: boolean | undefined = undefined\nconst isHovercardEnabledForUser = () => {\n  if (hovercardsEnabledForUser !== undefined) return hovercardsEnabledForUser\n  const hovercardsPreference = document.querySelector<HTMLMetaElement>('meta[name=hovercards-preference]')\n  if (hovercardsPreference) {\n    hovercardsEnabledForUser = hovercardsPreference.content === 'true' ? true : false\n    return hovercardsEnabledForUser\n  }\n  return true\n}\nconst isHovercardAccessibilityEnabled = isFeatureEnabled('hovercard_accessibility')\nlet hovercardFocusTrapAbortController: AbortController | undefined = undefined\n\n// The card content. Moved around the page to where the current hover is\nlet cardContentContainer = document.querySelector('.js-hovercard-content')\nobserve('.js-hovercard-content', el => {\n  cardContentContainer = el\n})\n\nconst cachedFetchSafeDocumentFragment = memoize(fetchSafeDocumentFragment)\n\nlet currentTarget: Element | null | undefined\n\nlet activatingElement: Element | null = null\nlet hovercardTrigger: HTMLElement | null = null\n\nlet deactivateTimer: number | null\n\nlet focusIn = false\nlet mouseOver = false\n\n// Mouse position for when links wrap lines\nlet mouseX = 0\n\nconst caretDistanceFromTarget = 12\n\n// For calculating position of the card when it hangs to the left\n// NOTE: These need to stay in sync with certain CSS rules in order to keep the\n// caret pointing at the target.\n//\n// caret distance from edge of card\nconst caretPaddingX = 24\nconst caretMarginY = 7\nconst caretPaddingY = caretPaddingX - caretMarginY\n\nconst caretHeight = 16\n\n// The amount of extra time given to move into the content\nconst deactivateTimeout = 100\n\n// The minimum time before opening the hovercard via mouseover\nconst activateTimeout = 250\n\nconst longerActivateTimeout = 500\n\n// Get the content class of a given selector.\n// (Prefixes the selector with `Popover-message--`).\nfunction contentClass(suffix: string): string {\n  const contentClassPrefix = 'Popover-message--'\n  return contentClassPrefix + suffix\n}\n\n// Track a load of the hovercard in octolytics if it stays for > 500ms.\nfunction trackLoad(cardContentBody: HTMLElement) {\n  setTimeout(() => {\n    if (document.body && document.body.contains(cardContentBody)) {\n      const trackingElement = cardContentBody.querySelector('[data-hydro-view]')\n      if (trackingElement instanceof HTMLElement) {\n        trackView(trackingElement)\n      }\n    }\n  }, 500)\n}\n\nfunction hideCard() {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n  cardContentContainer.style.display = 'none'\n  cardContentContainer.removeAttribute('data-hovercard-target-url')\n  const cardContent = cardContentContainer.querySelector('.Popover-message')\n  if (cardContent instanceof HTMLElement) {\n    cardContent.textContent = ''\n  }\n  activatingElement = null\n  currentTarget = null\n  if (hovercardFocusTrapAbortController) {\n    hovercardFocusTrapAbortController.abort()\n  }\n}\n\nfunction selectRectNearestMouse(target: Element): DOMRect {\n  const rects = target.getClientRects()\n  let foundRect = rects[0] || target.getBoundingClientRect() || {top: 0, left: 0, height: 0, width: 0}\n\n  if (rects.length > 0) {\n    for (const rect of rects) {\n      if (rect.left < mouseX && rect.right > mouseX) {\n        foundRect = rect\n        break\n      }\n    }\n  }\n\n  return foundRect\n}\n\nfunction calculatePositions(target: Element): Position {\n  const {width: contentWidth, height: contentHeight} = cardContentContainer!.getBoundingClientRect()\n  const {left: targetX, top: targetY, height: targetHeight, width: targetWidth} = selectRectNearestMouse(target)\n\n  const roomBelowTarget = window.innerHeight - targetY\n\n  const roomAbove = targetY > contentHeight\n  const roomBelow = roomBelowTarget > contentHeight\n  const moreRoomAbove = targetY >= roomBelowTarget\n\n  const hangLeft = target.classList.contains('js-hovercard-left')\n\n  if (hangLeft) {\n    // If there is room, show hovercard above hover position. Else, show it below\n    const left = targetX - contentWidth - caretDistanceFromTarget\n    const targetCenterY = targetY + targetHeight / 2\n\n    let top\n\n    // If there is no room above or below, show the hovercard on the top or bottom (whichever has the most room)\n    if (!roomAbove && !roomBelow) {\n      if (moreRoomAbove) {\n        top = targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n      } else {\n        top = targetCenterY - caretPaddingY - caretHeight / 2\n      }\n    } else {\n      top = roomAbove\n        ? targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n        : targetCenterY - caretPaddingY - caretHeight / 2\n    }\n\n    return {\n      containerTop: top,\n      containerLeft: left,\n      contentClassSuffix: roomAbove ? 'right-bottom' : 'right-top',\n    }\n  } else {\n    const roomRight = window.innerWidth - targetX > contentWidth\n    const targetCenterX = targetX + targetWidth / 2\n    const left = roomRight ? targetCenterX - caretPaddingX : targetCenterX - contentWidth + caretPaddingX\n\n    let top\n\n    // If there is no room above, below, or to the right, show the hovercard on the top or bottom (whichever has the most room)\n    if (!roomAbove && !roomBelow && !roomRight) {\n      if (moreRoomAbove) {\n        top = targetY - contentHeight - caretDistanceFromTarget\n      } else {\n        top = targetY + targetHeight + caretDistanceFromTarget\n      }\n    } else {\n      top = roomAbove\n        ? targetY - contentHeight - caretDistanceFromTarget\n        : targetY + targetHeight + caretDistanceFromTarget\n    }\n\n    const contentClassSuffix = roomAbove\n      ? roomRight\n        ? 'bottom-left'\n        : 'bottom-right'\n      : roomRight\n        ? 'top-left'\n        : 'top-right'\n    return {containerTop: top, containerLeft: left, contentClassSuffix}\n  }\n}\n\nfunction positionCard(target: Element, cardContent: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  // Hide container, reset popover styles\n  cardContentContainer.style.visibility = 'hidden'\n  cardContentContainer.style.display = 'block'\n  cardContent.classList.remove(\n    contentClass('bottom-left'),\n    contentClass('bottom-right'),\n    contentClass('right-top'),\n    contentClass('right-bottom'),\n    contentClass('top-left'),\n    contentClass('top-right'),\n  )\n\n  const {containerTop, containerLeft, contentClassSuffix} = calculatePositions(target)\n\n  // Add the class for correct caret location\n  cardContent.classList.add(contentClass(contentClassSuffix))\n\n  // Position the popover & inner message correctly\n  if (isHovercardAccessibilityEnabled) {\n    cardContentContainer.style.setProperty('top', `${containerTop + window.pageYOffset}px`, 'important')\n    cardContentContainer.style.setProperty('bottom', 'auto', 'important')\n  } else {\n    cardContentContainer.style.top = `${containerTop + window.pageYOffset}px`\n  }\n  cardContentContainer.style.left = `${containerLeft + window.pageXOffset}px`\n\n  // Set z-index override\n  setZIndexOverride(target, cardContentContainer)\n\n  // After positioning correctly, show the popover again\n  cardContentContainer.style.visibility = ''\n}\n\nfunction showCard(fragment: DocumentFragment, target: Element): AbortController | undefined {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n  const cardContent = cardContentContainer.querySelector('.Popover-message')\n  if (!(cardContent instanceof HTMLElement)) return\n\n  cardContent.textContent = ''\n\n  const cardContentBody = document.createElement('div')\n  for (const child of fragment.children) {\n    cardContentBody.appendChild(child.cloneNode(true))\n  }\n\n  cardContent.appendChild(cardContentBody)\n\n  positionCard(target, cardContent)\n  trackLoad(cardContentBody)\n  if (!isHovercardAccessibilityEnabled) {\n    announceFromElement(cardContentBody)\n  }\n\n  cardContentContainer.style.display = 'block'\n  cardContentContainer.setAttribute('data-hovercard-target-url', target.getAttribute('data-hovercard-url') || '')\n  cardContentContainer.setAttribute('aria-label', hovercardAriaLabelForType(target))\n  cardContentContainer.setAttribute('role', 'region')\n  if (mouseOver || !isHovercardAccessibilityEnabled) return undefined\n  return focusTrap(cardContentContainer)\n}\n\nfunction determineEnclosingSubject(target: Element): string | null {\n  const tag = target.closest('[data-hovercard-subject-tag]')\n  if (tag) return tag.getAttribute('data-hovercard-subject-tag')\n  // Fall back to page context\n  const meta = document.head && document.head.querySelector('meta[name=\"hovercard-subject-tag\"]')\n  if (meta) return meta.getAttribute('content')\n  return null\n}\n\nfunction hovercardUrlFromTarget(target: Element): string {\n  const baseHovercardUrl = target.getAttribute('data-hovercard-url')\n\n  if (baseHovercardUrl) {\n    const subjectTag = determineEnclosingSubject(target)\n    if (subjectTag) {\n      const url = new URL(baseHovercardUrl, window.location.origin)\n      const params = new URLSearchParams(url.search.slice(1))\n      params.append('subject', subjectTag)\n      params.append('current_path', window.location.pathname + window.location.search)\n      url.search = params.toString()\n      return url.toString()\n    }\n\n    return baseHovercardUrl\n  }\n\n  return ''\n}\n\nfunction hovercardAriaLabelForType(target: Element): string {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n  if (!hovercardType) return 'Hovercard'\n  let hovercardPrefix\n  switch (hovercardType) {\n    case 'user':\n      hovercardPrefix = 'User'\n      break\n    case 'organization':\n      hovercardPrefix = 'Organization'\n      break\n    case 'pull_request':\n      // eslint-disable-next-line i18n-text/no-en\n      hovercardPrefix = 'Pull Request'\n      break\n    case 'issue':\n      hovercardPrefix = 'Issue'\n      break\n    case 'team':\n      hovercardPrefix = 'Team'\n      break\n    case 'repository':\n      hovercardPrefix = 'Repository'\n      break\n    case 'commit':\n      hovercardPrefix = 'Commit'\n      break\n    case 'project':\n      hovercardPrefix = 'Project'\n      break\n    case 'discussion':\n      hovercardPrefix = 'Discussion'\n      break\n    case 'sponsors_listing':\n      hovercardPrefix = 'Sponsors'\n      break\n    case 'acv_badge':\n      // Weird to have two nouns in an `aria-label` so we'll just use \"badge\" for this case\n      // eslint-disable-next-line i18n-text/no-en\n      return 'Arctic Code Vault Badge'\n  }\n  return hovercardPrefix ? `${hovercardPrefix} Hovercard` : 'Hovercard'\n}\n\n// Determine if a hovercard is enabled for this type of element.\n//\n// Return boolean will be `true` if this link element has hovercard\n// attributes and the link's particular kind of hovercard is enabled for the\n// viewer and that part of the page.\nfunction hovercardsAreEnabledForType(target: Element): boolean {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n\n  if (hovercardType === 'pull_request' || hovercardType === 'issue') {\n    return !!target.closest('[data-issue-and-pr-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'team') {\n    return !!target.closest('[data-team-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'repository') {\n    return !!target.closest('[data-repository-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'commit') {\n    return !!target.closest('[data-commit-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'project') {\n    return !!target.closest('[data-project-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'discussion') {\n    return !!target.closest('[data-discussion-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'acv_badge') {\n    return !!target.closest('[data-acv-badge-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'sponsors_listing') {\n    return !!target.closest('[data-sponsors-listing-hovercards-enabled]')\n  }\n\n  // User and organization hovercards are enabled everywhere\n  return true\n}\n\n// When mousing over a hovercard target, load the data and show the card.\nasync function activateFn(event: Event, minimumTimeout?: number): Promise<void> {\n  // Don't show hovercards on touch devices. Prevents mobile Safari users\n  // from needing to double tap links with hovercards.\n  // https://humanwhocodes.com/blog/2012/07/05/ios-has-a-hover-problem/\n  const touchDevice = 'ontouchstart' in document\n  if (touchDevice) return\n\n  const target = event.currentTarget\n\n  if (event instanceof MouseEvent) {\n    mouseX = event.clientX\n  }\n\n  if (!(target instanceof Element)) return\n  if (currentTarget === target) return\n  if (target.closest('.js-hovercard-content')) return\n\n  // Don't actually show issue or PR hovercards unless the link has an ancestor\n  // element with data-issue-and-pr-hovercards-enabled\n  if (!hovercardsAreEnabledForType(target)) return\n\n  hideCard()\n\n  // Set the current target as the one we're currently hovering on\n  currentTarget = target\n  activatingElement = document.activeElement\n\n  const hovercardUrl = hovercardUrlFromTarget(target)\n\n  let fragment: DocumentFragment | null | undefined\n  try {\n    const forcedDelay = new Promise(r => window.setTimeout(r, minimumTimeout, 0))\n    await forcedDelay\n\n    // for some reason, currentTarget gets set to null when\n    // we call the setTimeout and we are focused on the button\n    if (!currentTarget && event.type === 'focusin') {\n      currentTarget = event.target as Element\n    }\n    if (target === currentTarget) {\n      fragment = await cachedFetchSafeDocumentFragment(document, hovercardUrl)\n    }\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const response: Response = err.response\n    if (response && response.status === 404) {\n      // eslint-disable-next-line i18n-text/no-en\n      const notAvailableMessage = 'Hovercard is unavailable'\n      target.setAttribute('aria-label', notAvailableMessage)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    } else if (response && response.status === 410) {\n      const data: {[key: string]: string} = await response.clone().json()\n      target.setAttribute('aria-label', data.message!)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    }\n    return\n  }\n\n  // Ensure that the target is still the active one\n  if (target === currentTarget && fragment) {\n    hovercardFocusTrapAbortController = showCard(fragment, target)\n  }\n}\n\n// Load the data but don't show until at least `activateTimeout` Only used when\n// loading via mouseover.\nfunction activateWithTimeoutFn(event: Event) {\n  const isLongerActivateTimeoutEnabled = isFeatureEnabled('hovercard_longer_activate_timeout')\n\n  activateFn(event, isLongerActivateTimeoutEnabled ? longerActivateTimeout : activateTimeout)\n}\n\n// When leaving a hovercard, deactivate unless we're moving to another child.\n// This allows the user to hover into the content area without dismissing.\nfunction deactivateFn(event: Event) {\n  if (!currentTarget) return\n  if (event instanceof MouseEvent && event.relatedTarget instanceof HTMLElement) {\n    const relatedTarget = event.relatedTarget\n    if (relatedTarget.closest('.js-hovercard-content') || relatedTarget.closest('[data-hovercard-url]')) {\n      return\n    }\n  } else if (event instanceof KeyboardEvent && activatingElement instanceof HTMLElement) {\n    // Return focus to where it was before the card was opened\n    activatingElement.focus()\n  }\n  hideCard()\n}\n\n// Deactivate after 250 ms unless the deactivate timer is canceled as a result\n// of the user entering the hovercard content area.\nfunction deactivateWithTimeoutFn(event: Event) {\n  const targetWas = currentTarget\n\n  deactivateTimer = window.setTimeout(() => {\n    if (currentTarget === targetWas) {\n      deactivateFn(event)\n    }\n  }, deactivateTimeout)\n}\n\nfunction preventScrolling(event: Event) {\n  // This is specifically to prevent default browser behavior, not changing keyboard shortcuts.\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!(event instanceof KeyboardEvent)) return\n  if (event.altKey && event.key === 'ArrowUp') {\n    // Don't scroll while moving focus (this occurs on non-Firefox browsers)\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n// Triggered when a link which has a hovercard is focused.\nfunction keyupFn(event: Event) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!(event instanceof KeyboardEvent)) return\n  switch (event.key) {\n    case 'ArrowUp':\n      if (isHovercardAccessibilityEnabled && event.altKey) {\n        hovercardTrigger = document.activeElement as HTMLElement\n        activateFn(event, 0)\n      }\n      break\n    case 'Escape':\n      deactivateFn(event)\n      break\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n\n// Cancel the deactivation timer since the user is inside the content now\nfunction cancelDeactivation() {\n  if (deactivateTimer) clearTimeout(deactivateTimer)\n}\n\nif (cardContentContainer && isHovercardEnabledForUser()) {\n  // show if focused or moused over, only hide when both are false.\n  observe('[data-hovercard-url]', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onMouseOver),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'keyup', keyupFn),\n        fromEvent(el, 'keydown', preventScrolling),\n      ),\n  })\n\n  observe('[data-hovercard-url]', {\n    remove(el) {\n      // Hide the card if we're removing the element that triggered it\n      if (currentTarget === el) hideCard()\n    },\n  })\n\n  if (!isHovercardAccessibilityEnabled) {\n    observe('[data-hovercard-url]', {\n      subscribe: el => compose(fromEvent(el, 'focusin', onFocusIn), fromEvent(el, 'focusout', onFocusOut)),\n    })\n  }\n\n  observe('.js-hovercard-content', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onContentsMouseOver),\n        fromEvent(el, 'focusin', onContentsFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(\n          el,\n          isHovercardAccessibilityEnabled ? 'keydown' : 'keyup',\n          isHovercardAccessibilityEnabled ? onContentsKeyDown : keyupFn,\n        ),\n      ),\n  })\n\n  if (!isHovercardAccessibilityEnabled) {\n    observe('.js-hovercard-content', {\n      subscribe: el => compose(fromEvent(el, 'focusout', onFocusOut)),\n    })\n  }\n\n  // eslint-disable-next-line delegated-events/global-on\n  on('menu:activated', 'details', hideCard)\n\n  // hide the card when a turbo completes a new visit\n  window.addEventListener('turbo:load', hideCard)\n\n  window.addEventListener('statechange', hideCard)\n\n  // FF bug where the target can get focus, then be removed from the DOM\n  // and this doesn't trigger a focusOut event. In this case, focus moved to the window\n  // so we can handle it here.\n  if (!isHovercardAccessibilityEnabled) {\n    window.addEventListener('focusin', onFocusOut)\n  }\n}\n\n/**\n * Refocus the hovercard trigger when the user keyboard-escapes out of the content.\n */\nfunction onContentsKeyDown(event: Event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event instanceof KeyboardEvent) {\n    if (event.key === 'Escape') {\n      deactivateFn(event)\n      hovercardTrigger?.focus()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n\nfunction onFocusIn(event: Event) {\n  focusIn = true\n  activateFn(event, 0)\n}\n\nfunction onFocusOut(event: Event) {\n  focusIn = false\n  if (!mouseOver) {\n    deactivateFn(event)\n  }\n}\n\nfunction onMouseLeave(event: Event) {\n  mouseOver = false\n  if (isHovercardAccessibilityEnabled || !focusIn) {\n    deactivateWithTimeoutFn(event)\n  }\n}\n\nfunction onMouseOver(event: Event) {\n  mouseOver = true\n  activateWithTimeoutFn(event)\n}\n\nfunction onContentsMouseOver() {\n  mouseOver = true\n  cancelDeactivation()\n}\n\nfunction onContentsFocusIn() {\n  focusIn = true\n  cancelDeactivation()\n}\n\nfunction setZIndexOverride(target: Element, container: HTMLElement) {\n  const zIndex = target.getAttribute('data-hovercard-z-index-override')\n  if (zIndex) {\n    container.style.zIndex = zIndex\n  } else {\n    // Reset to initial z-index from Popover\n    container.style.zIndex = '100'\n  }\n}\n","import {MarkdownQuote, Quote} from '@github/quote-selection'\nimport {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport visible from '@github-ui/visible'\n\nlet activeSelection: SelectionContext | null\n\n// Hide the \"Quote reply\" button on threads where there is no textarea to quote\n// text into. This prevents it from showing up on locked threads.\nobserve('.js-comment-quote-reply', function (button) {\n  ;(button as HTMLElement).hidden =\n    button\n      .closest('.js-quote-selection-container')\n      ?.querySelector(\n        '.js-inline-comment-form-container textarea, .js-new-comment-form textarea, .js-discussions-previewable-comment-form',\n      ) == null\n})\n\nfunction isHighlightContainer(el: Element): boolean {\n  return el.nodeName === 'DIV' && el.classList.contains('highlight')\n}\n\nfunction hasContent(node: Node): boolean {\n  return node.nodeName === 'IMG' || node.firstChild != null\n}\n\nconst filters: {[key: string]: (arg0: HTMLElement) => string | HTMLElement} = {\n  PRE(el) {\n    const parent = el.parentElement\n    if (parent && isHighlightContainer(parent)) {\n      const match = parent.className.match(/highlight-source-(\\S+)/)\n      const flavor = match ? match[1] : ''\n      const text = (el.textContent || '').replace(/\\n+$/, '')\n      el.textContent = `\\`\\`\\`${flavor}\\n${text}\\n\\`\\`\\``\n      el.append('\\n\\n')\n    }\n    return el\n  },\n  A(el) {\n    const text = el.textContent || ''\n    if (el.classList.contains('user-mention') || el.classList.contains('team-mention')) {\n      return text\n    } else if (el.classList.contains('issue-link') && /^#\\d+$/.test(text)) {\n      return text\n    } else {\n      return el\n    }\n  },\n  IMG(el) {\n    const alt = el.getAttribute('alt')\n    if (alt && el.classList.contains('emoji')) {\n      return alt\n    } else {\n      return el\n    }\n  },\n  DIV(el) {\n    if (el.classList.contains('js-suggested-changes-blob')) {\n      // skip quoting suggested changes widget\n      el.remove()\n    } else if (el.classList.contains('blob-wrapper-embedded')) {\n      // handle embedded blob snippets\n      const container = el.parentElement!\n      const link = container.querySelector<HTMLAnchorElement>('a[href]')!\n      const p = document.createElement('p')\n      p.textContent = link.href\n      container.replaceWith(p)\n    } else if (el.classList.contains('js-render-enrichment-target')) {\n      // handle embedded special rendering like mermaid charts\n      const container = el.closest('.js-render-needs-enrichment')!\n      const blockType = container.getAttribute('data-type')\n      const blockContent = el.getAttribute('data-plain')!\n\n      // set the codeblock markdown representation as the content of a pre block so that newlines\n      // are correctly interpreted. Then replace the current element with the pre-wrapped codeblock\n      const pre = document.createElement('pre')\n      pre.textContent = `\\`\\`\\`${blockType}\\n${blockContent}\\`\\`\\``\n      return pre\n    }\n    return el\n  },\n}\n\nfunction insertMarkdownSyntax(root: DocumentFragment): void {\n  const nodeIterator = document.createNodeIterator(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      if (node.nodeName in filters && hasContent(node)) {\n        return NodeFilter.FILTER_ACCEPT\n      } else {\n        return NodeFilter.FILTER_SKIP\n      }\n    },\n  })\n  const results: HTMLElement[] = []\n  let node = nodeIterator.nextNode()\n\n  while (node) {\n    if (node instanceof HTMLElement) {\n      results.push(node)\n    }\n    node = nodeIterator.nextNode()\n  }\n\n  // process deepest matches first\n  results.reverse()\n\n  for (const el of results) {\n    el.replaceWith(filters[el.nodeName]!(el))\n  }\n}\n\non('click', '.js-comment-quote-reply', function ({isTrusted, currentTarget}) {\n  let target = currentTarget as Element\n  let quote = new Quote()\n\n  if (!isTrusted) {\n    // User pressed `r`\n    if (quote.range.collapsed) {\n      // Nothing is selected\n      return\n    }\n    if (quote.range.startContainer.parentElement === null) {\n      // No reasonable place to insert the quote\n      return\n    }\n    target = quote.range.startContainer.parentElement\n  }\n\n  const container = target.closest<HTMLElement>('.js-comment')!\n  const commentBody = container.querySelector<HTMLElement>('.js-comment-body')!\n  const commentBodyClone = container.querySelector<HTMLElement>('.js-comment-body')!.cloneNode(true)\n  const quoteSelectionContainer = container.closest('.js-quote-selection-container')!\n\n  // Remove elements that contain meta info and should not be present in the quoted text\n  const ignorableElements = commentBody.querySelectorAll('button.js-convert-to-issue-button, span.js-clear')\n  for (const el of ignorableElements) {\n    el.remove()\n  }\n\n  if (quoteSelectionContainer.hasAttribute('data-quote-markdown')) {\n    quote = new MarkdownQuote(\n      quoteSelectionContainer.getAttribute('data-quote-markdown') || '',\n      (fragment: DocumentFragment) => {\n        const parent = quote.range.startContainer.parentElement\n        const codeBlock = parent && parent.closest('pre')\n        if (codeBlock instanceof HTMLElement) {\n          const pp = codeBlock.parentElement\n          if (pp && isHighlightContainer(pp)) {\n            const div = document.createElement('div')\n            div.className = pp.className\n            div.appendChild(fragment)\n            fragment.appendChild(div)\n          }\n        }\n        insertMarkdownSyntax(fragment)\n      },\n    )\n  }\n\n  // If the user has selected text before clicking the dropdown, use that as the quote.\n  // (Workaround for Safari clearing the selection just before <details> is opened).\n  if (\n    activeSelection &&\n    commentBody.contains(activeSelection.anchorNode) &&\n    !activeSelection.range.collapsed &&\n    activeSelection.range.toString().trim() !== '' // remove whitespace only selections\n  ) {\n    quote.range = activeSelection.range\n  } else if (quote.range.collapsed || quote.range.toString().trim() === '') {\n    quote.select(commentBody)\n  }\n\n  if (quote.closest('.js-quote-selection-container') !== quoteSelectionContainer) return\n\n  // Capture the current range incase elements switch focus\n  const range = quote.range\n\n  quoteSelectionContainer.dispatchEvent(\n    new CustomEvent('quote-selection', {\n      bubbles: true,\n      detail: quote,\n    }),\n  )\n\n  // Replace the range for elements that changed focus\n  quote.range = range\n\n  for (const textarea of Array.from(quoteSelectionContainer.querySelectorAll('textarea')).reverse()) {\n    if (visible(textarea) && !textarea.closest('tracking-block')) {\n      quote.insert(textarea)\n      break\n    }\n  }\n\n  // Restore the HTML to it's initial form. The ignorable elements had to be removed\n  // So that the quote lib would not include then into the selection\n  container.querySelector<HTMLElement>('.js-comment-body')!.replaceWith(commentBodyClone)\n})\n\ntype SelectionContext = {\n  anchorNode: Node | null\n  range: Range\n}\n\n// Workaround for Safari clearing the selection just before a <details> element\n// was activated: persist the previous selection and use its range when quoting.\nlet previousSelection: SelectionContext | null\n\ndocument.addEventListener(\n  'selectionchange',\n  debounce(function () {\n    const selection = window.getSelection()!\n    let range\n    try {\n      range = selection.getRangeAt(0)\n    } catch {\n      previousSelection = null\n      return\n    }\n    previousSelection = {\n      anchorNode: selection.anchorNode,\n      range,\n    }\n  }, 100),\n)\ndocument.addEventListener(\n  'toggle',\n  () => {\n    activeSelection = previousSelection\n  },\n  {capture: true},\n)\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {Subscription} from '@github-ui/subscription'\n\ntype IdleListener = (isIdle: boolean) => unknown\n\nconst idleListeners: IdleListener[] = []\nconst DEBOUNCE_UNTIL_IDLE = 30000\nconst DEBOUNCE_UNTIL_ACTIVE = 0 // If active, we want to send immediately\nlet idle = ssrSafeDocument?.hidden || false // if the page is hidden on load, consider it idle immediately\nlet visibilityDebounceTimeout: ReturnType<typeof setTimeout> | undefined\n\nexport function addIdleStateListener(listener: IdleListener) {\n  listener(idle)\n  idleListeners.push(listener)\n\n  return new Subscription(() => {\n    const index = idleListeners.indexOf(listener)\n    if (index !== -1) {\n      idleListeners.splice(index, 1)\n    }\n  })\n}\n\n;(() => {\n  // listen for visibility change events, which trigger the wait period for idle changes\n  ssrSafeDocument?.addEventListener('visibilitychange', () => {\n    const pageIsHidden = ssrSafeDocument?.hidden || false\n\n    if (visibilityDebounceTimeout !== undefined) {\n      // we were waiting to send an idle change, cancel the previous timeout and queue a new one\n      clearTimeout(visibilityDebounceTimeout)\n    }\n\n    // When page visibility changes, wait a little bit before marking as idle in case visibility comes back\n    const debouncePeriod = pageIsHidden ? DEBOUNCE_UNTIL_IDLE : DEBOUNCE_UNTIL_ACTIVE\n\n    visibilityDebounceTimeout = setTimeout(() => {\n      if (pageIsHidden === idle) {\n        // idle hasn't changed, don't call any listeners\n        return\n      }\n\n      idle = pageIsHidden\n      visibilityDebounceTimeout = undefined\n\n      // send current idle state to all listeners\n      for (const idleListener of idleListeners) {\n        idleListener(idle)\n      }\n    }, debouncePeriod)\n  })\n})()\n","import type {TurboFrameClickEvent} from '@github/turbo'\nimport {getCachedNode, setCachedNode} from './cache'\nimport {\n  addNewScripts,\n  addNewStylesheets,\n  getTurboCacheNodes,\n  getChangedTrackedKeys,\n  replaceElements,\n  waitForStylesheets,\n  dispatchTurboReload,\n  isTurboFrame,\n  isSameRepo,\n  isSameProfile,\n  dispatchTurboRestored,\n} from './utils'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {setTitle} from '@github-ui/document-metadata'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {startSoftNav, updateFrame} from '@github-ui/soft-nav/state'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\ninterface FetchResponse {\n  response: Response\n  responseHTML: Promise<string>\n  location: Location\n}\n\nlet frameNavigation = false\nlet fetchResponse: FetchResponse | null\n\nconst navigatingBetweenDifferentEntities = (event: TurboFrameClickEvent) => {\n  if (!(event.target instanceof HTMLElement)) return\n\n  const frameContainer = event.target.closest('[data-turbo-frame]')\n  const repoContainer = event.target.closest('#js-repo-pjax-container')\n  const url = new URL(event.detail.url, window.location.origin)\n  const userProfileContainer = event.target.closest('#user-profile-frame')\n\n  return (\n    // Don't frame navigate if going to a different repo, since the frame will not\n    // load the new repo's header.\n    (repoContainer && frameContainer && !isSameRepo(url.pathname, location.pathname)) ||\n    // Don't frame navigate if going to a different user profile, since the frame\n    // will not load the new user's side panel information.\n    (userProfileContainer && !isSameProfile(url.pathname, location.pathname))\n  )\n}\n\nssrSafeDocument?.addEventListener('turbo:frame-click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    return\n  }\n\n  if (navigatingBetweenDifferentEntities(event)) {\n    dispatchTurboReload('repo_mismatch')\n    event.target.removeAttribute('data-turbo-frame')\n    event.preventDefault()\n  }\n\n  // Here is where Turbo frame navigation starts.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo.frame')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', event => {\n  fetchResponse = (event as CustomEvent).detail.fetchResponse\n  if (isTurboFrame(event.target)) setCachedNode(window.location.href, getTurboCacheNodes(document))\n})\n\n// Before rendering the new page (frame), we need to make sure the body is ready with\n// all the classes necessary. We do that by replacing the current body's classes with\n// classes that come from the `turbo-body-classes` meta tag.\n// We also are ready to add new scripts and stylesheets to the head, since that won't be\n// modified by the frame render.\n// We don't update the title here because it will be overridden by the frame.\n// We also don't update transients because it will mess with the B/F cache.\nssrSafeDocument?.addEventListener('turbo:before-frame-render', async event => {\n  // preventDefault MUST be the first thing in this event, otherwise rendering will NOT be paused.\n  event.preventDefault()\n\n  const {resume, newFrame} = (event as CustomEvent).detail\n\n  frameNavigation = true\n\n  if (!fetchResponse) return\n\n  const responseHTML = await fetchResponse.responseHTML\n  const responseLocation = fetchResponse.location\n\n  const trustedHTML = turboPolicy.createHTML(responseHTML, fetchResponse.response)\n  const parsedHTML = new DOMParser().parseFromString(trustedHTML, 'text/html')\n  fetchResponse = null\n\n  const sourceFrame = event.target as HTMLElement\n  const targetFrames = parsedHTML.querySelectorAll<HTMLElement>('turbo-frame')\n  const matchingFrame = [...targetFrames].find(frame => frame.id === sourceFrame?.id)\n  const changedKeys = getChangedTrackedKeys(parsedHTML)\n\n  // if the frames or tracked elements don't match, force a reload to the destination page otherwise\n  // the user will get an empty page or a page with the wrong assets.\n  if (!matchingFrame || changedKeys.length > 0) {\n    dispatchTurboReload(`tracked_element_mismatch-${changedKeys.join('-')}`)\n    window.location = responseLocation\n    return\n  }\n\n  setCachedNode(responseLocation.href, getTurboCacheNodes(parsedHTML))\n\n  addNewStylesheets(parsedHTML)\n  addNewScripts(parsedHTML)\n  replaceElements(parsedHTML)\n  replaceFrameClasses(sourceFrame, matchingFrame)\n\n  // We have to treat stylesheets as a blocking resource, so we wait for them to be loaded before continuing\n  // the frame render.\n  await waitForStylesheets()\n\n  resume()\n\n  if (shouldScrollToTop(newFrame)) {\n    window.scrollTo(0, 0)\n  }\n\n  // If we replace classes too early there may be some jitter when navigating to/from full-width pages.\n  replaceBodyClassesFromRequest(parsedHTML)\n})\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  // When going back/forward, we need to restore elements that were replaced by us outside of the frame.\n  // popstate runs before turbo actually restores the page, so we have to wait for the next load to guarantee\n  // that our restoration is done after turbo's.\n  document.addEventListener(\n    'turbo:load',\n    () => {\n      const elements = getCachedNode()?.replacedElements || []\n\n      replaceElements(document, elements)\n      dispatchTurboRestored()\n    },\n    {once: true},\n  )\n})\n\n// At this point, Turbo finished updating things from its snapshot, so we can manually\n// updates whatever is necessary from the navigation.\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n  // This is a safeguard for back/forwards navigation. If the user clicks those buttons.\n  // Turbo will NOT trigger `turbo:before-fetch-response`, which would make the `body` stale.\n  // Since we are restoring a page from the cache, `turboPageNodes` will be populated, so it\n  // will know what are the `body` classes to restore.\n  replaceBodyClassesFromCachedNodes()\n\n  if (!frameNavigation) return\n\n  frameNavigation = false\n  replaceTitle()\n  replaceTransientTags()\n  updateFrame()\n})\n\nconst replaceBodyClassesFromRequest = (html: Document) => {\n  const classes = html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceBodyClassesFromCachedNodes = () => {\n  // If the navigation is a full-page reload, `turboPageNodes` will be reset\n  // and this will be a noop.\n  const classes = getCachedNode()?.bodyClasses\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceTitle = () => {\n  const title = getCachedNode()?.title\n\n  if (title) {\n    setTitle(title)\n  }\n}\n\n// Replace all `data-turbo-transient` elements\nconst replaceTransientTags = () => {\n  const cached = getCachedNode()?.transients\n  if (!cached) return\n\n  for (const el of document.querySelectorAll('head [data-turbo-transient]')) {\n    el.remove()\n  }\n\n  for (const el of cached) {\n    // title, scripts and stylesheets have their own logic to be added\n    // so here we'll only deal with the rest of the transient elements\n    // This is just a safeguard in case someone adds `data-turbo-transient`\n    // to one of those elements.\n    if (!el.matches('title, script, link[rel=stylesheet]')) {\n      el.setAttribute('data-turbo-transient', '')\n      document.head.append(el)\n    }\n  }\n}\n\nconst replaceFrameClasses = (oldFrame: HTMLElement | undefined, newFrame: HTMLElement) => {\n  if (!oldFrame) return\n\n  oldFrame.className = newFrame.className\n}\n\nconst shouldScrollToTop = (frame: HTMLElement) =>\n  frame.getAttribute('data-turbo-skip-scroll') !== 'true' && frame.getAttribute('data-turbo-action') === 'advance'\n","import {sendEvent, stringifyObjectValues} from '@github-ui/hydro-analytics'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {loaded} from '@github-ui/document-ready'\nimport type {WebVitalMetric, MetricOrHPC} from './web-vitals'\nimport type {HPCTimingEvent} from './hpc-events'\n\ninterface WebVitalInformation {\n  name: string\n  value: number\n  element?: string\n}\n\ninterface HPCInformation extends WebVitalInformation {\n  mechanism: HPCTimingEvent['mechanism']\n  soft: boolean\n}\n\ninterface HydroStat {\n  react?: boolean\n  reactApp?: string | null\n  reactPartials?: string[]\n  ssr?: boolean\n  hpc?: HPCInformation\n  ttfb?: WebVitalInformation\n  fcp?: WebVitalInformation\n  lcp?: WebVitalInformation\n  fid?: WebVitalInformation\n  inp?: WebVitalInformation\n  cls?: WebVitalInformation\n  controller?: string\n  action?: string\n  routePattern?: string\n}\n\nlet queued: HydroStat | undefined\n\n/**\n * Batched report of vital to hydro\n */\nexport function sendStatToHydro(metric: MetricOrHPC, ssr: boolean) {\n  let hydroStat: HydroStat | undefined\n\n  if (isFeatureEnabled('report_hydro_web_vitals')) return\n\n  if (metric.value < 60_000) {\n    if (!hydroStat) {\n      const reactApp = document.querySelector('react-app')\n      hydroStat = queueStat()\n      hydroStat.react = !!reactApp\n      hydroStat.reactApp = reactApp?.getAttribute('app-name')\n      // Convert to Set and back to Array to remove duplicates.\n      hydroStat.reactPartials = [\n        ...new Set(\n          Array.from(document.querySelectorAll('react-partial')).map(\n            partial => partial.getAttribute('partial-name') || '',\n          ),\n        ),\n      ]\n      hydroStat.ssr = ssr\n      hydroStat.controller = document.querySelector<HTMLMetaElement>('meta[name=\"route-controller\"]')?.content\n      hydroStat.action = document.querySelector<HTMLMetaElement>('meta[name=\"route-action\"]')?.content\n      hydroStat.routePattern = document.querySelector<HTMLMetaElement>('meta[name=\"route-pattern\"]')?.content\n    }\n\n    if (metric.name === 'HPC') {\n      hydroStat[metric.name.toLocaleLowerCase() as Lowercase<typeof metric.name>] = buildHPCInformation(metric)\n    } else {\n      hydroStat[metric.name.toLocaleLowerCase() as Lowercase<typeof metric.name>] = buildWebVitalInformation(metric)\n    }\n  }\n}\n\nfunction buildHPCInformation(metric: HPCTimingEvent): HPCInformation {\n  return {\n    name: metric.name,\n    value: metric.value,\n    element: metric.attribution?.element,\n    soft: !!metric.soft,\n    mechanism: metric.mechanism,\n  }\n}\n\nfunction buildWebVitalInformation(metric: WebVitalMetric): WebVitalInformation {\n  const vitalInformation: WebVitalInformation = {\n    name: metric.name,\n    value: metric.value,\n  }\n\n  switch (metric.name) {\n    case 'LCP':\n      vitalInformation.element = metric.attribution?.element\n      break\n    case 'FID':\n    case 'INP':\n      vitalInformation.element = metric.attribution?.eventTarget\n      break\n    case 'CLS':\n      vitalInformation.element = metric.attribution?.largestShiftTarget\n      break\n  }\n\n  return vitalInformation\n}\n\n/**\n * Create a new stat object and schedule it to be sent to hydro\n */\nfunction queueStat(): HydroStat {\n  if (!queued) {\n    queued = {}\n    scheduleSend()\n  }\n  return queued\n}\n\n/**\n * Schedule a send to hydro\n */\nasync function scheduleSend() {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(send)\n}\n\n/**\n * Send the queued event to hydro\n */\nfunction send() {\n  if (!queued) return\n\n  sendEvent('web-vital', stringifyObjectValues(queued))\n  queued = undefined\n}\n","import {areCharacterKeyShortcutsEnabled, isNonCharacterKeyShortcut} from './keyboard-shortcuts-helper'\nimport {install, splitHotkeyString, uninstall} from './hotkey'\nimport {observe} from '@github/selector-observer'\n\nexport function observeHotkey(selector: string) {\n  observe(selector, {\n    constructor: HTMLElement,\n    add(element) {\n      // Disable character key shortcuts based on user preference\n      if (areCharacterKeyShortcutsEnabled()) {\n        install(element)\n      } else {\n        const shortcut = element.getAttribute('data-hotkey')\n        if (shortcut) {\n          const validShortcuts = filterOutCharacterKeyShortcuts(shortcut)\n          if (validShortcuts.length > 0) {\n            element.setAttribute('data-hotkey', validShortcuts)\n            install(element)\n          } else {\n            element.removeAttribute('data-hotkey')\n            uninstall(element)\n          }\n        }\n      }\n    },\n    remove(element) {\n      uninstall(element)\n    },\n  })\n}\n\n// This function keeps non-character key shortcuts and filters out character key shortcuts.\n// See `isNonCharacterKeyShortcut` for more information.\nexport function filterOutCharacterKeyShortcuts(string: string) {\n  const shortcuts = splitHotkeyString(string)\n  return shortcuts\n    .filter((s: string) => {\n      return isNonCharacterKeyShortcut(s)\n    })\n    .join(',')\n}\n","// Global handler for AJAX loading indicators.\n//\n// Only enabled on new style `data-remote` requests.\n//\n// Examples\n//\n//   .loading-spinner { display: none; }\n//   form.loading .loading-spinner { display: block; }\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (event.defaultPrevented) {\n    return\n  }\n  event.currentTarget.classList.add('loading')\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxComplete', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  event.currentTarget.classList.remove('loading')\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\n// Dashboard event stream ajax pagination\nremoteForm('form.js-ajax-pagination, .js-ajax-pagination form', async function (form, wants) {\n  const container = form.closest<HTMLElement>('.js-ajax-pagination')!\n  let response\n  try {\n    response = await wants.html()\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (err.response && err.response.status === 404) {\n      container.remove()\n      return\n    } else {\n      throw err\n    }\n  }\n  container.replaceWith(response.html)\n  fire(form, 'page:loaded')\n})\n","import safeStorage from '@github-ui/safe-storage'\nconst {getItem} = safeStorage('localStorage')\n\nexport function debugHydroPayload(debugKey: string, payload: string): void {\n  if (process.env.NODE_ENV === 'development') {\n    if (getItem(debugKey) === 'true') {\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-console */\n      try {\n        const parsed = JSON.parse(payload)\n        const eventName = parsed?.payload?.event_name ?? parsed?.event_type\n        console.group(`[${debugKey}] ${eventName}`)\n        console.table(parsed)\n        const keys = Object.keys(parsed?.payload || {})\n        for (const key of keys) {\n          const object = parsed.payload[key]\n          if (object instanceof Object && Object.keys(object).length > 0) {\n            console.group(key)\n            console.table(object)\n            console.groupEnd()\n          }\n        }\n        console.groupEnd()\n      } catch (e) {\n        console.group(`[hydro ${debugKey}] - failed to parse payload`)\n        console.log(payload)\n        console.groupEnd()\n      }\n      /* eslint-enable no-console */\n    }\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {debugHydroPayload} from './console-debug'\nconst GENERIC_CLICK_EVENT_NAME = 'analytics.click'\n\non('click', '[data-analytics-event]', event => {\n  // marketing pages will use marketing/analytics-events.ts, instead of behaviors/analytics-events.ts\n  if (isMarketingPage()) {\n    return\n  }\n  const element = event.currentTarget\n\n  const analyticsEvent = element.getAttribute('data-analytics-event')\n  if (!analyticsEvent) return\n\n  const analyticsEventAttributes = JSON.parse(analyticsEvent)\n\n  debugHydroPayload('hydro-debug.click', `{\"event_type\": \"${GENERIC_CLICK_EVENT_NAME}\", \"payload\": ${analyticsEvent}}`)\n  sendEvent(GENERIC_CLICK_EVENT_NAME, analyticsEventAttributes)\n})\n\nfunction isMarketingPage(): boolean {\n  return !!ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"is_logged_out_page\"]')?.content\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {sendStats} from '@github-ui/stats'\n\nconst selector = ['system', 'disabled']\n  .map(state => `html[data-a11y-animated-images=\"${state}\"] img[data-animated-image]`)\n  .join(', ')\n\nobserve(selector, el => {\n  if (!(el instanceof HTMLImageElement)) return // Element is not an image\n  // Element has a parent link but is not the direct child\n  if (el.closest('a') && !(el.parentElement instanceof HTMLAnchorElement)) return\n\n  let parent = el.parentElement\n  let link = null\n  if (parent instanceof HTMLAnchorElement) {\n    if (parent.childElementCount > 1) return // Image is not the only child of link\n    link = parent\n    link.setAttribute('data-target', 'animated-image.originalLink')\n    parent = link.parentElement\n  }\n\n  el.removeAttribute('data-animated-image')\n  el.setAttribute('data-target', 'animated-image.originalImage')\n\n  const clone = link ? link.cloneNode(true) : el.cloneNode(true)\n\n  const container = document.createElement('animated-image')\n  container.appendChild(clone)\n  parent?.replaceChild(container, link ? link : el)\n\n  sendStats({incrementKey: 'ANIMATED_IMAGE_PLAYER_WRAPPED', requestUrl: window.location.href})\n})\n","// Common behaviors associated with <auto-check>\n\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {validate as htmlValidate} from '../behaviors/html-validation'\n\nconst notes = new WeakMap()\n\nobserve('auto-check', function (el) {\n  if (el.classList.contains('js-prevent-default-behavior')) return\n\n  const input = el.querySelector('input')\n  if (!input) return\n  if (input.classList.contains('js-prevent-default-behavior')) return\n\n  const container = input.closest('.form-group') || el\n  const form = input.form\n\n  let id: string | null\n  function generateId() {\n    if (!id) id = `input-check-${(Math.random() * 10000).toFixed(0)}`\n    return id\n  }\n  const ariaDescribedby = input.getAttribute('aria-describedby')\n\n  input.addEventListener('focusout:delay', () => {\n    input.setAttribute('aria-describedby', [id, ariaDescribedby].join(' '))\n  })\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    if (!note.id) note.id = generateId()\n    notes.set(note, note.innerHTML)\n  }\n\n  el.addEventListener('loadstart', () => {\n    reset(input, container)\n    container.classList.add('is-loading')\n    input.classList.add('is-autocheck-loading')\n\n    validate(form)\n  })\n\n  el.addEventListener('loadend', () => {\n    container.classList.remove('is-loading')\n    input.classList.remove('is-autocheck-loading')\n  })\n\n  input.addEventListener('auto-check-success', async event => {\n    input.classList.add('is-autocheck-successful')\n    container.classList.add('successed')\n\n    validate(form)\n\n    const {response} = event.detail\n    if (!response) return\n\n    const message = await response.text()\n    if (!message) return\n\n    if (note instanceof HTMLElement) {\n      note.innerHTML = message\n      announceFromElement(note)\n    } else {\n      const isOk = response.status === 200\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const element = document.createElement(tagName)\n      element.id = generateId()\n      element.classList.add(isOk ? 'success' : 'warning')\n      element.innerHTML = message\n      container.append(element)\n      container.classList.add(isOk ? 'successed' : 'warn')\n      announceFromElement(element)\n      if (isOk) element.hidden = document.activeElement !== input\n    }\n\n    fire(input, 'auto-check-message-updated')\n  })\n\n  input.addEventListener('auto-check-error', async event => {\n    input.classList.add('is-autocheck-errored')\n    container.classList.add('errored')\n\n    validate(form)\n\n    const {response} = event.detail\n    if (!response) return\n\n    const message = await response.text()\n\n    if (note instanceof HTMLElement) {\n      // eslint-disable-next-line i18n-text/no-en\n      note.innerHTML = message || 'Something went wrong'\n      announceFromElement(note)\n    } else {\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const error = document.createElement(tagName)\n      error.id = generateId()\n      error.classList.add('error')\n      // eslint-disable-next-line i18n-text/no-en\n      error.innerHTML = message || 'Something went wrong'\n      container.append(error)\n      announceFromElement(error)\n    }\n  })\n\n  input.addEventListener('input', () => {\n    input.removeAttribute('aria-describedby')\n    if (!input.value) reset(input, container)\n  })\n\n  input.addEventListener('blur', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = true\n  })\n\n  input.addEventListener('focus', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = false\n  })\n\n  form?.addEventListener('reset', () => {\n    reset(input, container)\n  })\n})\n\n// Reset the autocheck state.\nfunction reset(input: HTMLInputElement, container: Element) {\n  container.classList.remove('is-loading', 'successed', 'errored', 'warn')\n  input.classList.remove('is-autocheck-loading', 'is-autocheck-successful', 'is-autocheck-errored')\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    const content = notes.get(note)\n    if (content) note.innerHTML = content\n  }\n\n  if (container.tagName === 'DL') {\n    container.querySelector('dd.error')?.remove()\n    container.querySelector('dd.warning')?.remove()\n    container.querySelector('dd.success')?.remove()\n  } else {\n    container.querySelector('div.error')?.remove()\n    container.querySelector('div.warning')?.remove()\n    container.querySelector('div.success')?.remove()\n  }\n}\n\nfunction validate(form: HTMLFormElement | null) {\n  if (!form) return\n  htmlValidate(form)\n}\n","// Common behaviors associated with <auto-complete>\n\nimport AutocompleteElement from '@github/auto-complete-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Display spinner during query server fetch.\nobserve('auto-complete', function (el) {\n  el.addEventListener('loadstart', () => el.classList.add('is-auto-complete-loading'))\n  el.addEventListener('loadend', () => el.classList.remove('is-auto-complete-loading'))\n})\n\nobserve('auto-complete', {constructor: AutocompleteElement, initialize: toggleSubmitButton})\n\non('auto-complete-change', 'auto-complete', function (event) {\n  toggleSubmitButton(event.currentTarget as AutocompleteElement)\n})\n\n// TODO Upstream `required` attribute to <auto-complete> so it can\n// participate in data-disable-invalid form validation.\n//\n// Toggle the submit button disabled/enabled based on the completer.\nfunction toggleSubmitButton(completer: AutocompleteElement) {\n  const form = completer.closest('form')\n  if (!form) return\n  const button = form.querySelector('.js-auto-complete-button')\n  if (!(button instanceof HTMLButtonElement)) return\n  button.disabled = !completer.value\n}\n","// Click to select clone urls\n\nimport {microtask} from '@github-ui/eventloop-tasks'\nimport {onFocus} from '@github-ui/onfocus'\n\nonFocus('input[data-autoselect], textarea[data-autoselect]', async function (input) {\n  await microtask()\n  ;(input as HTMLInputElement | HTMLTextAreaElement).select()\n})\n","// Form AutoSubmit Behavior\n//\n// Automatically submits form when one of its fields change.\n//\n// Examples\n//\n//   <form action=\"/subscribe\" data-autosubmit>\n//     <input type=radio name=state value=1> Subscribe\n//     <input type=radio name=state value=0> Unsubscribe\n//   </form>\n\nimport {debounce} from '@github/mini-throttle'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\n\non('change', 'form[data-autosubmit]', function (event) {\n  const target = event.currentTarget\n  requestSubmit(target as HTMLFormElement)\n})\n\non('change', 'input[data-autosubmit], select[data-autosubmit]', submit)\n\n// Submit a form from a change event.\nfunction submit(event: Event) {\n  const input = event.target\n  if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return\n\n  const form = input.form\n  requestSubmit(form!)\n}\n\nconst debouncedSubmit = debounce(submit, 300)\n\nobserve('input[data-throttled-autosubmit]', {\n  subscribe: el => fromEvent(el, 'input', debouncedSubmit),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Sets the text of the avatar reset button depending on whether or not the\n// user has a gravatar associated with their GitHub account.\nasync function detectGravatar(el: Element) {\n  const gravitarUrl = el.getAttribute('data-url') || ''\n  const hasGravitar = await fetchGravatarInfo(gravitarUrl)\n\n  if (hasGravitar) {\n    const gravatarText = el.getAttribute('data-gravatar-text')\n    if (gravatarText != null) {\n      el.textContent = gravatarText\n    }\n  }\n}\n\nobserve('.js-detect-gravatar', function (el) {\n  detectGravatar(el)\n})\n\n// Fetch the gravitarUrl, and check the `has_gravatar` property from the returning JSON.\nasync function fetchGravatarInfo(gravitarUrl: string): Promise<boolean> {\n  const url = gravitarUrl\n  if (!url) return false\n\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const data = (await response.json()) as {has_gravatar: boolean}\n    return data.has_gravatar\n  } catch {\n    return false\n  }\n}\n","import {addThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\nimport visible from '@github-ui/visible'\nimport {softNavigate} from '@github-ui/soft-navigate'\n\nconst priceSelectors = ['.unstyled-additional-seats-price-obj', '.unstyled-base-price-obj', '.unstyled-final-price-obj']\n\ninterface PriceStruct {\n  default_currency: string\n  local_currency: string\n}\n\ntype SelectorValue = PriceStruct | string | number\n\nfunction isAPriceStruct(obj: SelectorValue): obj is PriceStruct {\n  if (typeof obj === 'string') return false\n  if (typeof obj === 'number') return false\n  return 'default_currency' in obj && 'local_currency' in obj\n}\n\ninterface UserPlan {\n  free: boolean\n  is_enterprise_cloud_trial: boolean\n  seats: number\n  no_additional_seats: boolean\n  selectors: Record<string, SelectorValue>\n  url: string\n}\n\nlet previousController: AbortController | null = null\non('click', '.js-org-signup-duration-change', event => {\n  event.preventDefault()\n  const el = event.currentTarget\n  const newDuration = el.getAttribute('data-plan-duration')!\n\n  updateDurationFields(newDuration)\n  updateSeatFieldURLs(newDuration)\n  for (const seatsField of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    updateTotals(seatsField)\n  }\n  toggleDurationUnitPrices()\n})\n\non('change', '.js-org-signup-duration-toggle', function ({currentTarget}) {\n  const url = new URL(currentTarget.getAttribute('data-url')!, window.location.origin)\n\n  softNavigate(url.toString())\n})\n\nasync function updateTotals(el: HTMLInputElement | HTMLSelectElement) {\n  const itemKey = el.getAttribute('data-item-name') || 'items'\n  const itemRawCount = el.value\n  const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const itemMinimum = parseInt(el.getAttribute('data-item-minimum')!) || 0\n  const itemMaximum = parseInt(el.getAttribute('data-item-maximum')!) || 1_000 // Matches the maximum default seats limit in configurable/seat_limit_for_upgrade\n  const itemCount = parseInt(el.getAttribute('data-item-count')!) || 0\n  const itemDelta = Math.max(itemMinimum, parseInt(itemRawCount) || 0)\n  const contactUs = itemDelta > itemMaximum\n\n  const downgradeButton = document.querySelector('.js-downgrade-button')\n  const downgradeDisabledMessage = document.getElementById('downgrade-disabled-message')\n  if (downgradeButton instanceof HTMLButtonElement) {\n    downgradeButton.disabled = itemDelta === itemCount\n  }\n\n  if (downgradeDisabledMessage instanceof HTMLElement && downgradeButton instanceof HTMLButtonElement) {\n    downgradeDisabledMessage.hidden = !downgradeButton.disabled\n  }\n\n  params.append(itemKey, itemDelta.toString())\n\n  const transformInput = document.querySelector('.js-transform-user')\n  if (transformInput) params.append('transform_user', '1')\n\n  url.search = params.toString()\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let data: UserPlan | null = null\n  try {\n    const response = await fetch(url.toString(), {signal, headers: {Accept: 'application/json'}})\n    if (!response.ok) return\n    data = (await response.json()) as UserPlan\n  } catch {\n    // ignore network errors\n  }\n  if (signal.aborted) return\n  if (!data) return\n\n  const contact = document.querySelector('.js-contact-us')\n  /* eslint-disable-next-line github/no-d-none */\n  if (contact) contact.classList.toggle('d-none', !contactUs)\n\n  const planCost = document.querySelector('.js-cost-info') as HTMLElement\n  if (planCost) planCost.hidden = contactUs\n\n  const paymentSummary = document.querySelector('.js-payment-summary')\n  /* eslint-disable-next-line github/no-d-none */\n  if (paymentSummary) paymentSummary.classList.toggle('d-none', contactUs)\n\n  const submit = document.querySelector('.js-submit-billing')\n  if (submit instanceof HTMLElement) submit.hidden = contactUs\n\n  const billing = document.querySelector('.js-billing-section')\n  if (billing) billing.classList.toggle('has-removed-contents', data.free || data.is_enterprise_cloud_trial)\n\n  const upgrade = document.querySelector('.js-upgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (upgrade) upgrade.classList.toggle('d-none', itemDelta <= 0)\n\n  const downgrade = document.querySelector('.js-downgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (downgrade) downgrade.classList.toggle('d-none', itemDelta >= 0)\n\n  const extraSeats = document.querySelector('.js-extra-seats-line-item')\n  /* eslint-disable-next-line github/no-d-none */\n  if (extraSeats) extraSeats.classList.toggle('d-none', data.no_additional_seats)\n\n  const seatField = document.querySelector('.js-seat-field')\n  if (seatField) updateSeatFields(itemRawCount)\n\n  const minimumSeatsTooltip = document.querySelector('.js-minimum-seats-disclaimer')\n  if (minimumSeatsTooltip) {\n    minimumSeatsTooltip.classList.toggle('tooltipped', data.seats === 5)\n    minimumSeatsTooltip.classList.toggle('tooltipped-nw', data.seats === 5)\n  }\n\n  const ref = data.selectors\n  for (const selector in ref) {\n    for (const element of document.querySelectorAll(selector)) {\n      if (isPriceSelector(selector) && isAPriceStruct(ref[selector]!)) {\n        element.textContent = ''\n        element.appendChild(priceCurrencyTag('default-currency', ref[selector].default_currency))\n        element.appendChild(priceCurrencyTag('local-currency', ref[selector].local_currency))\n      } else {\n        element.textContent = <string>ref[selector]\n      }\n    }\n  }\n\n  replaceState(history.state, '', data.url)\n}\n\nfunction isPriceSelector(selector: string): boolean {\n  return priceSelectors.includes(selector)\n}\n\nfunction priceCurrencyTag(className: string, price: string): HTMLSpanElement {\n  const span = document.createElement('span')\n  span.classList.add(className)\n  span.textContent = price\n  return span\n}\n\nfunction toggleDurationUnitPrices() {\n  for (const unitPrice of document.querySelectorAll<HTMLElement>('.js-unit-price')) {\n    unitPrice.hidden = !unitPrice.hidden\n  }\n}\n\nfunction updateDurationFields(newDuration: string) {\n  const oldDuration = newDuration === 'year' ? 'month' : 'year'\n  for (const planDurationText of document.querySelectorAll('.js-plan-duration-text')) {\n    planDurationText.textContent = newDuration\n  }\n\n  for (const planDurationAdjective of document.querySelectorAll('.unstyled-available-plan-duration-adjective')) {\n    planDurationAdjective.textContent = `${newDuration}ly`\n  }\n\n  for (const durationLink of document.querySelectorAll('.js-org-signup-duration-change')) {\n    durationLink.setAttribute('data-plan-duration', oldDuration)\n  }\n  const planDurationInput = <HTMLInputElement>document.getElementById('signup-plan-duration')\n  if (planDurationInput) {\n    planDurationInput.value = newDuration\n  }\n}\n\nfunction updateSeatFields(numberOfSeats: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const maxSeatForPlan = el.getAttribute('data-item-maximum')!\n    const popover = el?.parentNode?.querySelector<HTMLElement>('.Popover')\n\n    if (maxSeatForPlan && maxSeatForPlan.length) {\n      if (parseInt(numberOfSeats, 10) > parseInt(maxSeatForPlan, 10)) {\n        el.classList.add('color-border-danger-emphasis')\n        popover?.removeAttribute('hidden')\n      } else {\n        el.classList.remove('color-border-danger-emphasis')\n        popover?.setAttribute('hidden', 'true')\n      }\n    }\n  }\n}\n\nfunction updateSeatFieldURLs(newDuration: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n    const params = new URLSearchParams(url.search.slice(1))\n    params.delete('plan_duration')\n    params.append('plan_duration', newDuration)\n    url.search = params.toString()\n    el.setAttribute('data-url', url.toString())\n  }\n}\n\nobserve('.js-addon-purchase-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    addThrottledInputEventListener(el, function () {\n      updateTotals(el)\n    })\n  },\n})\n\nobserve('.js-addon-downgrade-field', {\n  constructor: HTMLSelectElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    el.addEventListener('change', function () {\n      updateTotals(el)\n    })\n  },\n})\n\nfunction handleOrgChange(event: Event) {\n  const addonField = document.querySelector('.js-addon-purchase-field')\n  const selectedRadio = (event.target as Element).querySelector('input:checked')\n\n  if (addonField instanceof HTMLInputElement && selectedRadio instanceof HTMLInputElement) {\n    const newUrl = selectedRadio.getAttribute('data-upgrade-url')\n\n    if (newUrl) {\n      addonField.setAttribute('data-url', newUrl)\n      addonField.value = '0'\n      updateTotals(addonField)\n    }\n  }\n}\n\non('details-menu-selected', '.js-organization-container', handleOrgChange, {capture: true})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\n// Flip tooltip direction of child elements if an item gets .is-stuck\n// so tooltips are still visible when the user scrolls down a blob and\n// the button bar sticks to the top\nobserve('.js-blob-header.is-stuck', {\n  add(el) {\n    flipTooltip(el)\n  },\n  remove(el) {\n    flipTooltip(el, true)\n  },\n})\n\nfunction flipTooltip(element: Element, inverse = false) {\n  const pairs = {\n    'tooltipped-nw': 'tooltipped-sw',\n    'tooltipped-n': 'tooltipped-s',\n    'tooltipped-ne': 'tooltipped-se',\n  }\n\n  for (const [key, value] of Object.entries(pairs)) {\n    const from = inverse ? value : key\n    const to = inverse ? key : value\n    for (const el of element.querySelectorAll(`.${from}`)) {\n      el.classList.replace(from, to)\n    }\n  }\n}\n\non('click', '.js-blob-dropdown-click', event => {\n  const trackingData = event.currentTarget.getAttribute('data-dropdown-tracking')\n\n  if (!trackingData) return\n\n  const parsedTrackingData = JSON.parse(trackingData)\n  sendEvent(parsedTrackingData.type, parsedTrackingData.context)\n})\n","import {onInput} from '@github-ui/onfocus'\n\nonInput('.js-csv-filter-field', function (event) {\n  const query = (event.target as HTMLInputElement).value.toLowerCase()\n  for (const row of document.querySelectorAll('.js-csv-data tbody tr')) {\n    if (!(row instanceof HTMLElement)) continue\n    if (!row.textContent) continue\n    row.hidden = !!query && !row.textContent.toLowerCase().includes(query)\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction changeSelection(event: Event) {\n  const input = event.target as HTMLElement\n  const container = input?.closest<HTMLDetailsElement>('.js-branch-protection-integration-select')\n  const currentSelection = container?.querySelector<HTMLElement>('.js-branch-protection-integration-select-current')\n  const item = input?.closest<HTMLElement>('.js-branch-protection-integration-select-item')\n  const label = item?.querySelector<HTMLElement>('.js-branch-protection-integration-select-label')\n  if (currentSelection && label && container) {\n    currentSelection.innerHTML = label.innerHTML\n    container.open = false\n  }\n}\n\non('change', '.js-branch-protection-integration-select-input', changeSelection)\n","// Bulk actions\n//\n// Provides a way to update bulk actions buttons/menus from a fetched url\n// when check boxes are updated.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\" data-bulk-actions-parameter=\"member_ids\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <div class=\"js-bulk-actions-item\" data-bulk-actions-id=\"1\">\n//         <input type=\"checkbox\" class=\"js-bulk-actions-toggle\">\n//       </div>\n//     </div>\n//\n// If [data-bulk-actions-parameter] is not assigned, `input.js-bulk-actions-toggle`'s name and value will be used instead.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <input type=\"checkbox\" name=\"member_ids[]\" value=\"1\" class=\"js-bulk-actions-toggle\">\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\n\n// Get the bulk-actions-url from the container.\nfunction bulkUrl(container: Element): string {\n  const url = new URL(container.getAttribute('data-bulk-actions-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const name = container.getAttribute('data-bulk-actions-parameter')\n  const checkedItems = Array.from(container.querySelectorAll<HTMLInputElement>('.js-bulk-actions-toggle:checked'))\n  if (name) {\n    const ids = checkedItems\n      .map(el => el.closest<HTMLElement>('.js-bulk-actions-item')!.getAttribute('data-bulk-actions-id')!)\n      .sort()\n    for (const id of ids) {\n      params.append(`${name}[]`, id)\n    }\n  } else {\n    for (const input of checkedItems.sort((a, b) => (a.value > b.value ? 1 : -1))) {\n      params.append(input.name, input.value)\n    }\n  }\n\n  url.search = params.toString()\n  return url.toString()\n}\n\nlet previousController: AbortController | null = null\n// Update the bulk actions container with new HTML fetched from the server.\nasync function updateBulkActions(event: Event) {\n  const container = event.target\n  if (!(container instanceof HTMLElement)) return\n  const actionsContainer = container.querySelector<HTMLElement>('.js-bulk-actions')!\n  const isItemSelected = !!container.querySelector('.js-bulk-actions-toggle:checked')\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let html = ''\n  try {\n    // TODO: Drop `X-Requested-With` header once controllers are cleaned up of `request.xhr?`\n    const response = await fetch(bulkUrl(container), {signal, headers: {'X-Requested-With': 'XMLHttpRequest'}})\n    if (!response.ok) return\n    html = await response.text()\n  } catch {\n    // Ignore network errors\n  }\n  if (signal.aborted) return\n  if (!html) return\n\n  if (!isItemSelected) {\n    actionsContainer.innerHTML = html\n    toggleMembershipTabs(container)\n  } else {\n    toggleMembershipTabs(container)\n    actionsContainer.innerHTML = html\n  }\n\n  fire(container, 'bulk-actions:updated')\n}\n\n// Toggle the membership tabs based on the amount of checked bulk-actions.\nfunction toggleMembershipTabs(container: HTMLElement) {\n  const membershipTabs = document.querySelector('.js-membership-tabs')\n  if (membershipTabs) {\n    const checked = container.querySelectorAll('.js-bulk-actions-toggle:checked')\n    /* eslint-disable-next-line github/no-d-none */\n    membershipTabs.classList.toggle('d-none', checked.length > 0)\n  }\n}\n\non('change', '.js-bulk-actions-toggle', function (event) {\n  const toggle = event.currentTarget\n  const container = toggle.closest<HTMLElement>('.js-bulk-actions-container')!\n  fire(container, 'bulk-actions:update')\n})\n\non('bulk-actions:update', '.js-bulk-actions-container', debounce(updateBulkActions, 100))\n","import {loaded} from '@github-ui/document-ready'\nimport {sendStats} from '@github-ui/stats'\n\ntype Ok<T> = {kind: 'ok'; value: T | null}\ntype Err<E> = {kind: 'err'; value: E}\ntype Result<T, E> = Ok<T> | Err<E>\n\nfunction getLocalJSON<T>(key: string): Result<T, Error> {\n  try {\n    const text = window.localStorage.getItem(key)\n    return {kind: 'ok', value: text ? JSON.parse(text) : null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction setLocalJSON<T>(key: string, value: T): Result<null, Error> {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value))\n    return {kind: 'ok', value: null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction gatherBundleURLs() {\n  const urls: {[key: string]: string} = {}\n  for (const script of document.getElementsByTagName('script')) {\n    const match = script.src.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.js$/)\n    if (match) urls[`${match[1]}.js`] = script.src\n  }\n  for (const link of document.getElementsByTagName('link')) {\n    const match = link.href.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.css$/)\n    if (match) urls[`${match[1]}.css`] = link.href\n  }\n  return urls\n}\n\ntype Bundles = Record<string, string>\n\nfunction report() {\n  const urls = gatherBundleURLs()\n  const read = getLocalJSON<Bundles>('bundle-urls')\n  if (read.kind === 'err') {\n    setLocalJSON('bundle-urls', urls)\n    return\n  }\n  const previousURLs = read.value || {}\n  const downloadedBundles = Object.keys(urls).filter(bundle => previousURLs[bundle] !== urls[bundle])\n  if (downloadedBundles.length) {\n    const write = setLocalJSON('bundle-urls', {...previousURLs, ...urls})\n    if (write.kind === 'ok') {\n      sendStats({downloadedBundles})\n    }\n  }\n}\n\n;(async () => {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(report)\n})()\n","// Behaviors complementing buttons or minibuttons\n//\n// See also\n//   primer/buttons.scss\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction cancelEvent(event: Event) {\n  event.preventDefault()\n  event.stopPropagation()\n}\n\n// Prevent minibutton click if target is disabled\nobserve('a.btn.disabled', {\n  subscribe: el => fromEvent(el, 'click', cancelEvent),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/check-all'\n\nobserve('.js-check-all-container', {\n  constructor: HTMLElement,\n  subscribe,\n})\n","import {deleteCookie, getCookies} from '@github-ui/cookies'\n\n// This module detects a logout that has just occurred and clears browser data\n// for the origin that might contain sensitive things such as localstorage.\n\n// Set by lib/github/authentication/logout_result.rb on logout\nexport const JustLoggedOutCookieName = 'logout-was-successful'\n\nfunction clearData() {\n  for (const storage of [sessionStorage, localStorage]) {\n    try {\n      storage.clear()\n    } catch {\n      // ignore failure to clear\n    }\n  }\n}\n\nexport function clearDataIfJustLoggedOut() {\n  if (getCookies(JustLoggedOutCookieName).length > 0) {\n    clearData()\n    deleteCookie(JustLoggedOutCookieName)\n  }\n}\n\nclearDataIfJustLoggedOut()\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst duration = 2000\n\non('clipboard-copy', '[data-copy-feedback]', event => {\n  const clipboardCopyElement = event.currentTarget\n  const message = clipboardCopyElement.getAttribute('data-copy-feedback')!\n  const originalLabel = clipboardCopyElement.getAttribute('aria-label')\n  const direction = clipboardCopyElement.getAttribute('data-tooltip-direction') || 's'\n  const announceSelector = clipboardCopyElement.getAttribute('data-announce-selector') || undefined\n  const announceElement = announceSelector ? document.querySelector(announceSelector) : undefined\n  clipboardCopyElement.setAttribute('aria-label', message)\n  clipboardCopyElement.classList.add('tooltipped', `tooltipped-${direction}`)\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n  announceFromElement(clipboardCopyElement, {\n    element: (announceElement as HTMLElement) ?? undefined,\n  })\n\n  setTimeout(() => {\n    if (originalLabel) {\n      clipboardCopyElement.setAttribute('aria-label', originalLabel)\n    } else {\n      clipboardCopyElement.removeAttribute('aria-label')\n    }\n    clipboardCopyElement.classList.remove('tooltipped', `tooltipped-${direction}`)\n  }, duration)\n})\n\nfunction timerCallback(currentTarget: HTMLElement) {\n  clipboardCopyElementTimers.delete(currentTarget)\n  toggleCopyButton(currentTarget)\n}\n\n// Toggle a copy button.\nfunction toggleCopyButton(button: HTMLElement) {\n  const copyIcon = button.querySelector('.js-clipboard-copy-icon')\n  const checkIcon = button.querySelector('.js-clipboard-check-icon')\n\n  button.classList.toggle('ClipboardButton--success')\n\n  if (copyIcon) {\n    /* eslint-disable-next-line github/no-d-none */\n    copyIcon.classList.toggle('d-none')\n  }\n  if (checkIcon) {\n    if (checkIcon.classList.contains('d-sm-none')) {\n      checkIcon.classList.toggle('d-sm-none')\n    } else {\n      /* eslint-disable-next-line github/no-d-none */\n      checkIcon.classList.toggle('d-none')\n    }\n  }\n}\n\nconst clipboardCopyElementTimers = new WeakMap<HTMLElement, number>()\n\non('clipboard-copy', '.js-clipboard-copy:not([data-view-component])', function ({currentTarget}) {\n  if (!(currentTarget instanceof HTMLElement)) return\n\n  const currentTimeout = clipboardCopyElementTimers.get(currentTarget)\n  if (currentTimeout) {\n    clearTimeout(currentTimeout)\n  } else {\n    toggleCopyButton(currentTarget)\n  }\n\n  clipboardCopyElementTimers.set(currentTarget, window.setTimeout(timerCallback, duration, currentTarget))\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {reportError} from '@github-ui/failbot'\n\n// When a code nav response returns precise and search-based backends,\n// we allow the user to retry their code nav query with the alternative\n// backend.  This observe block is responsible for handling the retry\n// logic,  making the async fetch request,  and updating the\n// code nav modal with the new response.\non('click', '.js-code-nav-retry', async function (event) {\n  // Ignore clicks with modifier keys\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n\n  const popover = document.querySelector<HTMLElement>('.js-tagsearch-popover')\n  if (!popover) return\n\n  const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  if (!popoverContent) return\n\n  // Because the definitions endpoint is responsible for rendering\n  // the code nav modal's tabs and content,  a different dom element\n  // target is required for overwriting the html returned from the fetch.\n  let updateTarget: HTMLElement | null\n  const target = event.currentTarget as HTMLElement\n  const codeNavKind = target.getAttribute('data-code-nav-kind')\n  if (codeNavKind === 'definitions') {\n    updateTarget = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  } else {\n    updateTarget = popover.querySelector<HTMLElement>('.js-code-nav-references')\n  }\n  if (!updateTarget) return\n\n  const retryUrl = target.getAttribute('data-code-nav-url')\n  if (!retryUrl) return\n\n  const codeNavUrl = new URL(retryUrl, window.location.origin)\n  try {\n    const response = await fetch(codeNavUrl.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return\n    }\n    const html = await response.text()\n    if (!html) return\n\n    updateTarget.innerHTML = html\n  } catch {\n    return\n  }\n\n  // Because a user has to scroll to trigger this retry behavior,\n  // the code nav modal's scroll will need to be reset.\n  popoverContent.scrollTop = 0\n})\n\nobserve('.js-code-nav-container', {\n  constructor: HTMLElement,\n  subscribe(file) {\n    const repoContainer = file\n    const popover = document.querySelector('.js-tagsearch-popover') as HTMLElement\n    if (!(popover instanceof HTMLElement))\n      return {\n        unsubscribe() {\n          // Used as a no operation placeholder for unsubscribing if there is no popover.\n        },\n      }\n    const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')!\n    const popoverHTML = new WeakMap()\n    const wrapCache = new WeakMap()\n\n    let activeToken: Element | undefined\n\n    // initialize requires both `popover` and `activeToken` to be defined.\n    initialize()\n\n    // The code nav modal is sticky in the PR view.  When a user navigates to a location from the modal,\n    // and uses the 'back' button,  the code nav modal is still present,  and the active token (click target)\n    // retains the CSS classes added to it by the `onMouseOver()` event listener.\n    // This function ensures regardless of the user's previous navigation actions that the code nav modal is\n    // always reset to hidden on a new blob view, and any previous active token classes are removed from their elements.\n    function initialize() {\n      hidePopover()\n      for (const el of document.getElementsByClassName('pl-token')) {\n        el.classList.remove('pl-token', 'active')\n      }\n    }\n\n    async function onMouseMove(event: MouseEvent) {\n      const range = matchFromPoint(/\\w+[!?]?/g, event.clientX, event.clientY)\n      if (!range) return\n\n      const rangeElement = range.commonAncestorContainer.parentElement\n      if (!rangeElement) return\n      for (const className of rangeElement.classList) {\n        if (['pl-token', 'pl-c', 'pl-s', 'pl-k'].includes(className)) return\n      }\n\n      if (rangeElement.closest('.js-skip-tagsearch')) {\n        return\n      }\n\n      const text = range.toString()\n      if (!text || text.match(/\\n|\\s|[();&.=\",]/)) return\n\n      let didCheckText = wrapCache.get(rangeElement)\n      if (!didCheckText) {\n        didCheckText = new Set()\n        wrapCache.set(rangeElement, didCheckText)\n      }\n      if (didCheckText.has(text)) return\n      didCheckText.add(text)\n\n      const fileContainer = rangeElement.closest('.js-tagsearch-file')\n      if (!fileContainer) return\n\n      const path = fileContainer.getAttribute('data-tagsearch-path') || ''\n      let lang = fileContainer.getAttribute('data-tagsearch-lang') || ''\n\n      // Handle Ruby embedded in ERB templates\n      if (lang === 'HTML+ERB') {\n        if (rangeElement.closest('.pl-sre')) {\n          lang = 'Ruby'\n        } else {\n          return\n        }\n      }\n\n      if (file.classList.contains('js-code-block-container')) {\n        lang = getCodeBlockLanguage(rangeElement) || ''\n        // Ignore any requests where the range element is not in a code block\n        // with a supported language\n        if (!lang) return\n      }\n\n      const pos = getRowAndColumn(range)\n      const wrapper = document.createElement('span')\n      range.surroundContents(wrapper)\n      wrapper.classList.add('pl-token')\n      wrapper.addEventListener('click', async function (clickEvent: MouseEvent) {\n        // Ignore clicks with modifier keys\n        // TODO: Refactor to use data-hotkey\n        /* eslint eslint-comments/no-use: off */\n        if (clickEvent.altKey || clickEvent.ctrlKey || clickEvent.metaKey || clickEvent.shiftKey) return\n\n        if (wrapper === activeToken) {\n          hidePopover()\n        } else {\n          let html = undefined\n          html = await fetchPopoverContents(popover, text, lang, pos, path)\n          if (!html) return\n\n          addPopoverElement(wrapper, html)\n          popoverHTML.set(wrapper, html)\n\n          setActivePopover(wrapper)\n          populatePopover(wrapper)\n          showPopover()\n        }\n\n        clickEvent.preventDefault()\n      })\n    }\n\n    // Ensure popover list is reset to the top.\n    function resetScrollTop() {\n      popoverContent.scrollTop = 0\n    }\n\n    function addPopoverElement(wrapper: Element, html: string) {\n      const temp = document.createElement('span')\n      temp.innerHTML = html\n      const details = temp.firstElementChild\n      if (!details) return\n\n      const dataHydroClick = details.getAttribute('data-hydro-click')\n      const dataHydroClickHMAC = details.getAttribute('data-hydro-click-hmac')\n      if (dataHydroClickHMAC && dataHydroClick) {\n        wrapper.setAttribute('data-hydro-click', dataHydroClick)\n        wrapper.setAttribute('data-hydro-click-hmac', dataHydroClickHMAC)\n      }\n    }\n\n    function setActivePopover(token: HTMLElement) {\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = token\n      activeToken.classList.add('active')\n    }\n\n    function populatePopover(token: HTMLElement) {\n      popoverContent.innerHTML = popoverHTML.get(token) || ''\n\n      positionPopover(token)\n    }\n\n    function positionPopover(token: HTMLElement) {\n      const cRect = repoContainer.getClientRects()[0]!\n      const rects = token.getClientRects()\n      // If no rects are found return early.\n      if (rects.length === 0) return\n      const rect = rects[0]!\n      popover.style.position = 'absolute'\n      popover.style.zIndex = '3'\n      if (repoContainer.classList.contains('position-relative')) {\n        popover.style.top = `${rect.bottom - cRect.top + 7}px`\n        popover.style.left = `${rect.left - cRect.left - 10}px`\n      } else {\n        popover.style.top = `${window.scrollY + rect.bottom}px`\n        popover.style.left = `${window.scrollX + rect.left}px`\n      }\n    }\n\n    function showPopover() {\n      if (!popover.hidden) {\n        // When existing popover is active and user clicks on different symbol, we need to still reset the navigation tabs and scrollTop for the popover's new contents.\n        resetScrollTop()\n        return\n      }\n      popover.hidden = false\n\n      // Setting a scrollTop value only succeeds if the HTML element is visible.\n      resetScrollTop()\n\n      document.addEventListener('click', onDocumentClick)\n      document.addEventListener('keyup', onKeyup)\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('resize', onResize)\n    }\n\n    function hidePopover() {\n      if (popover.hidden) return\n      popover.hidden = true\n\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = undefined\n\n      document.removeEventListener('click', onDocumentClick)\n      document.removeEventListener('keyup', onKeyup)\n      window.removeEventListener('resize', onResize)\n    }\n\n    function onResize() {\n      if (!(activeToken instanceof HTMLElement)) return\n      positionPopover(activeToken)\n    }\n\n    function onDocumentClick(event: MouseEvent) {\n      const {target} = event\n      if (!(target instanceof Node)) return\n\n      if (!popover.contains(target) && !activeToken!.contains(target)) {\n        hidePopover()\n      }\n    }\n\n    function onKeyup(event: KeyboardEvent) {\n      // TODO: Refactor to use data-hotkey\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n      switch (event.key) {\n        case 'Escape':\n          hidePopover()\n          break\n      }\n      /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n    }\n\n    file.addEventListener('mousemove', onMouseMove)\n\n    return {\n      unsubscribe() {\n        file.removeEventListener('mousemove', onMouseMove)\n      },\n    }\n  },\n})\n\nasync function fetchPopoverContents(\n  popover: HTMLElement,\n  text: string,\n  lang: string,\n  pos: [number, number],\n  path: string,\n): Promise<string> {\n  const urlStr = popover.getAttribute('data-tagsearch-url')\n  if (!urlStr) return ''\n  const ref = popover.getAttribute('data-tagsearch-ref')\n  if (!ref) return ''\n  let codeNavContext = popover.getAttribute('data-tagsearch-code-nav-context')\n  if (!codeNavContext) {\n    codeNavContext = 'UNKNOWN_VIEW'\n  }\n\n  const url = new URL(urlStr, window.location.origin)\n  const params = new URLSearchParams()\n  params.set('q', text)\n  params.set('blob_path', path)\n  params.set('ref', ref)\n  params.set('language', lang)\n  params.set('row', pos[0].toString())\n  params.set('col', pos[1].toString())\n  params.set('code_nav_context', codeNavContext)\n  url.search = params.toString()\n\n  try {\n    const response = await fetch(url.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return ''\n    }\n    const html = await response.text()\n\n    // Ignore responses with no definitions\n    if (/js-tagsearch-no-definitions/.test(html)) return ''\n\n    return html\n  } catch {\n    return ''\n  }\n}\n\ninterface CaretPosition {\n  offsetNode: Node\n  offset: number\n}\ndeclare global {\n  interface Document {\n    caretPositionFromPoint(x: number, y: number): CaretPosition | null\n  }\n}\n\n// Returns matching text range given screen offsets.\n//\n// Examples\n//\n//   // Find nearest word under mouse cursor\n//   matchFromPoint(/\\w+/g, event.clientX, event.clientY)\n//\n// Returns Range or null if nothing matches position.\nfunction matchFromPoint(regexp: RegExp, x: number, y: number): Range | undefined | null {\n  let textNode: Node | undefined\n  let offset: number | undefined\n\n  if (document.caretPositionFromPoint) {\n    const caret = document.caretPositionFromPoint(x, y)\n    if (caret) {\n      textNode = caret.offsetNode\n      offset = caret.offset\n    }\n  } else if (document.caretRangeFromPoint) {\n    const range = document.caretRangeFromPoint(x, y)\n    if (range) {\n      textNode = range.startContainer\n      offset = range.startOffset\n    }\n  }\n\n  if (!textNode || typeof offset !== 'number' || textNode.nodeType !== Node.TEXT_NODE) return\n\n  const text = textNode.textContent\n  const isEmpty = text?.replaceAll('\\n', '').trim() === ''\n  if (!text || isEmpty || textNode.nodeType !== Node.TEXT_NODE) {\n    return null\n  }\n  const match = findNearestMatch(text, regexp, offset)\n  if (!match) return null\n\n  const matchedRange = document.createRange()\n  matchedRange.setStart(textNode, match[1])\n  matchedRange.setEnd(textNode, match[2])\n\n  return matchedRange\n}\n\n// Find nearest match in string given a starting offset.\n//\n// Similar to String#scan, but only returns one result around the given offset.\n//\n// Examples\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 1)\n//   // [\"The\", 0, 3]\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 18)\n//   [\"fox\", 16, 19]\n//\n// Return matching string, start and end offsets. Otherwise returns null for no match.\nexport function findNearestMatch(str: string, regexp: RegExp, offset: number): [string, number, number] | null {\n  let m\n  let lastIndex = null\n  while ((m = regexp.exec(str))) {\n    // Prevent infinite loop from zero-length matches\n    if (regexp.lastIndex === lastIndex) {\n      reportError(new Error('regexp did not advance in findNearestMatch()'))\n      return null\n    }\n    lastIndex = regexp.lastIndex\n    const len = m.index + m[0].length\n    if (m.index <= offset && offset <= len) {\n      return [m[0], m.index, len]\n    }\n  }\n  return null\n}\n\n// Get the language name of the embedded code block that the given element is\n// located in. This will be used for files such as Markdown that can contain\n// nested code blocks in multiple languages.\n//\n// Return language name or null\nfunction getCodeBlockLanguage(element: Element): string | null {\n  // FIXME Use js- class or data attributes for the language lookup/mappings\n  const codeBlockElement = element.closest('.highlight')\n  if (codeBlockElement) {\n    for (const className of codeBlockElement.classList) {\n      switch (className) {\n        case 'highlight-source-go':\n          return 'Go'\n        case 'highlight-source-js':\n          return 'JavaScript'\n        case 'highlight-source-python':\n          return 'Python'\n        case 'highlight-source-ruby':\n          return 'Ruby'\n        case 'highlight-source-ts':\n          return 'TypeScript'\n      }\n    }\n  }\n\n  return null\n}\n\n// Returns a zero-indexed position of the range in utf16 code units.\nexport function getRowAndColumn(range: Range): [number, number] {\n  let node = range.startContainer\n  let offset = range.startOffset\n  let passParent = false\n  for (;;) {\n    let prev = node.previousSibling\n    while (!passParent && prev) {\n      // Diff views include additional DOM elements like comments and buttons that\n      // don't appear in the DOM for regular blob views. HTML Comment and Button nodes\n      // should not be included when calculating the offset (or column position). We only\n      // want to count text that appears in the repository, so that the resulting column position\n      // will align with the column position indexed by the code-navigation service for the symbol\n      // under the user's cursor.\n      if (!['#comment', 'BUTTON'].includes(prev.nodeName)) {\n        offset += (prev.textContent || '').length\n      }\n      prev = prev.previousSibling\n    }\n    const parent = node.parentElement\n    if (parent) {\n      if (parent.classList.contains('js-code-nav-pass')) {\n        // Compared with the standard blob view, the DOM structure in diff views is slightly different.\n        // To make sure we don't over count the offset for the clicked symbol, some DOM elements'\n        // text content should not be considered when calculating the symbol's column offset.\n        // This conditional signals to not count any additional offsets until the parent DOM\n        // element containing the symbol's line number is found.\n        passParent = true\n      } else if (parent.classList.contains('js-file-line')) {\n        const lineNumber = parent.previousElementSibling!\n        if (!lineNumber.classList.contains('js-code-nav-line-number')) {\n          throw new Error('invariant')\n        }\n        const row = parseInt(lineNumber.getAttribute('data-line-number') || '1', 10)\n        return [row - 1, offset]\n      }\n      node = parent\n    } else {\n      return [0, 0]\n    }\n  }\n}\n","// Commenting: AJAX form submission\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-comment-form-error\" hidden>\n//       </div>\n//\n//       <textarea class=\"js-comment-field\"></textarea>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </form>\n//\n// Primer Validation example:\n// see: https://primer.style/css/components/forms#form-group-validation\n//\n//   <form class=\"js-new-comment-form\">\n//     <div class=\"form-group js-remove-error-state-on-click\">\n//       <textarea class=\"js-comment-field\" aria-describedby=\"body-input-validation\",\n//       </textarea>\n//\n//       <p class=\"note error js-comment-form-error\" id=\"body-input-validation\" hidden></p>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </div>\n//   </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {ErrorWithResponse} from '@github/remote-form'\nimport {changeValue} from '@github-ui/form-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '@github-ui/updatable-content'\n// eslint-disable-next-line no-restricted-imports\nimport {reportError} from '@github-ui/failbot'\n\n// Check if element is in viewport\nfunction isInViewport(el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  )\n}\n\n// Hide any comment errors on retry.\nfunction clearFormError(form: Element) {\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.hidden = true\n  }\n}\n\n// Remove error state when Primer Form Validation enabled field is clicked on\non('click', '.errored.js-remove-error-state-on-click', function ({currentTarget}) {\n  currentTarget.classList.remove('errored')\n})\n\n// Reset form after AJAX request is successful\nremoteForm('.js-new-comment-form', async function (form, wants) {\n  let response\n  clearFormError(form)\n  try {\n    response = await wants.json()\n  } catch (error) {\n    reportError(error)\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    handleFormError(form, error)\n  }\n\n  if (!response) {\n    return\n  }\n\n  form.reset()\n  for (const field of form.querySelectorAll<HTMLInputElement>('.js-resettable-field')) {\n    changeValue(field, field.getAttribute('data-reset-value') || '')\n  }\n  const writeTab = form.querySelector('.js-write-tab')\n  if (writeTab instanceof HTMLElement) {\n    const inViewPort = isInViewport(writeTab)\n    if (inViewPort) {\n      writeTab.click()\n    }\n  }\n  const ref = response.json.updateContent\n\n  for (const selector in ref) {\n    const html = ref[selector]\n    const el = document.querySelector(selector)\n    if (el instanceof HTMLElement) {\n      replaceContent(el, html)\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(`couldn't find ${selector} for immediate update`)\n    }\n  }\n\n  fire(form, 'comment:success')\n})\n\n// Show comment error if ajax request fails.\nfunction handleFormError(form: Element, error: ErrorWithResponse) {\n  // eslint-disable-next-line i18n-text/no-en\n  let message = 'There was a problem saving your comment.'\n  // eslint-disable-next-line i18n-text/no-en\n  let messageSuffix = 'Please try again.'\n  if (error.response) {\n    if (error.response.status === 422) {\n      const data = error.response.json\n      if (data.errors) {\n        if (Array.isArray(data.errors)) {\n          message += ` Your comment ${data.errors.join(', ')}.`\n        } else {\n          message = data.errors\n        }\n      }\n    } else if (error.response.status === 200) {\n      // eslint-disable-next-line i18n-text/no-en\n      messageSuffix = 'Please reload the page and try again.'\n    }\n  }\n\n  message += ` ${messageSuffix}`\n\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.textContent = message\n    formError.hidden = false\n\n    const formGroupValidationFormWrapper = formError.closest('div.form-group.js-remove-error-state-on-click')\n\n    if (formGroupValidationFormWrapper) {\n      formGroupValidationFormWrapper.classList.add('errored')\n    }\n  }\n}\n","// Commenting: Close button\n//\n// When comment fields also have a \"Close\" button, update the copy of the\n// button when text is present to indicate that the form will both post a\n// comment and close the discussion.\n//\n// Markup\n//\n//     <form>\n//       <textarea class=\"js-comment-field\"></textarea>\n//       <div>\n//         <button type=\"submit\">Comment</button>\n//         <button type=\"submit\" class=\"js-comment-and-button\"\n//           data-comment-text=\"Close with comment\">\n//           Close\n//         </button>\n//       </div>\n//     </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst setButtonText = (button: HTMLButtonElement, hasValue: boolean) => {\n  const spanText = button.querySelector('.js-form-action-text')\n  const textTarget = spanText ? spanText : button\n  textTarget.textContent = hasValue\n    ? button.getAttribute('data-comment-text')!\n    : textTarget.getAttribute('data-default-action-text')!\n}\n\nconst createInputHandler = (button: HTMLButtonElement): ((event: Event) => void) => {\n  let previousHasValue: string\n\n  // Handle input.\n  return (event: Event) => {\n    const target = event.currentTarget\n    const newValue = (target as HTMLInputElement).value.trim()\n\n    if (newValue !== previousHasValue) {\n      previousHasValue = newValue\n      setButtonText(button, Boolean(newValue))\n    }\n  }\n}\n\nobserve('.js-comment-and-button', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const commentField = button.form!.querySelector<HTMLElement>('.js-comment-field')!\n    const handleInput = createInputHandler(button)\n\n    return {\n      add() {\n        commentField.addEventListener('input', handleInput)\n        commentField.addEventListener('change', handleInput)\n      },\n      remove() {\n        commentField.removeEventListener('input', handleInput)\n        commentField.removeEventListener('change', handleInput)\n      },\n    }\n  },\n})\n","// Commenting: Focus CSS hacks\n//\n// Bubbles js-comment-field focus state up to js-write-bucket.\n//\n// So we can have a focused ring around the drag and drop section.\n//\n// TODO: `focused` class should be `is-focused`\n\nimport {onFocus} from '@github-ui/onfocus'\n\n// Sync focused class.\nfunction toggleFocus(el: Element, focused: boolean) {\n  const container = el.closest('.js-write-bucket')\n  if (container) {\n    container.classList.toggle('focused', focused)\n  }\n}\n\n// Clean up focused class on blur.\nfunction blurred(event: Event) {\n  const el = event.currentTarget\n  if (el instanceof Element) {\n    toggleFocus(el, false)\n  }\n}\n\nonFocus('.js-comment-field', function (el) {\n  toggleFocus(el, true)\n  el.addEventListener('blur', blurred, {once: true})\n})\n","// Scan an ArrayBuffer as PNG, yielding each chunk along the way.\n//\n// Example:\n//\n//   scanner = new PNGScanner buffer\n//   scanner.scan (chunkType, chunkLength) ->\n//     if chunkType is \"IHDR\"\n//       imageWidth = @readLong()\n//       imageHeight = @readLong()\n//\n// The callback will get called for each PNG chunk as described in\n// http://www.w3.org/TR/PNG/#11Chunks. During the callback, the scanner will be\n// positioned on the start of chunk's data portion, where individual values are\n// accessible with:\n//\n// - readChar(): reads 1-byte value (uint8)\n// - readShort(): reads 2-byte value (uint16)\n// - readLong(): reads 4-byte value (uint32)\n// - readString(length): reads <length> ASCII characters as a string\n// - advance(bytes): skips <bytes> bytes forward\n//\n// Scanning will end if the callback returns `false` at any point.\n\nconst PNG_HEADER = 0x89504e47\nconst CRC_WIDTH = 4\n\nexport default class PNGScanner {\n  dataview: DataView\n  pos: number\n\n  static fromFile(file: Blob): Promise<PNGScanner> {\n    return new Promise(function (resolve, reject) {\n      const reader = new FileReader()\n      reader.onload = function () {\n        resolve(new PNGScanner(reader.result as ArrayBuffer))\n      }\n      reader.onerror = function () {\n        reject(reader.error)\n      }\n      reader.readAsArrayBuffer(file)\n    })\n  }\n\n  constructor(buffer: ArrayBuffer) {\n    this.dataview = new DataView(buffer)\n    this.pos = 0\n  }\n\n  advance(bytes: number) {\n    this.pos += bytes\n  }\n\n  readInt(bytes: 1 | 2 | 4) {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const self = this\n\n    // I want the do { } syntax *so* bad.\n    const value = (function () {\n      switch (bytes) {\n        case 1:\n          return self.dataview.getUint8(self.pos)\n        case 2:\n          return self.dataview.getUint16(self.pos)\n        case 4:\n          return self.dataview.getUint32(self.pos)\n        default:\n          // I shouldn't need this, but flow can't figure out that all values of bytes are handled by the above switch\n          throw new Error('bytes parameter must be 1, 2 or 4')\n      }\n    })()\n    this.advance(bytes)\n    return value\n  }\n\n  readChar() {\n    return this.readInt(1)\n  }\n\n  readShort() {\n    return this.readInt(2)\n  }\n\n  readLong() {\n    return this.readInt(4)\n  }\n\n  readString(length: number): string {\n    const buf = []\n    for (let i = 0; i < length; i++) {\n      buf.push(String.fromCharCode(this.readChar()))\n    }\n    return buf.join('')\n  }\n\n  scan(fn: (this: PNGScanner, type: string, len: number) => boolean) {\n    if (this.readLong() !== PNG_HEADER) {\n      throw new Error('invalid PNG')\n    }\n\n    this.advance(4)\n\n    for (;;) {\n      const len = this.readLong()\n      const type = this.readString(4)\n      const resumeAt = this.pos + len + CRC_WIDTH\n      if (fn.call(this, type, len) === false || type === 'IEND') {\n        break\n      }\n      this.pos = resumeAt\n    }\n  }\n}\n","import PNGScanner from './png-scanner'\n\nconst METERS_PER_INCH = 0.0254\n\nexport type ImageDimensions = {\n  width: number\n  height: number\n  ppi: number\n}\n\n// Returns a Promise that resolves with an object indicating:\n//\n// - width: image width in pixels\n// - height: image height in pixels\n// - ppi: pixels-per-inch count (optional)\n//\n// Only PNG file uploads are supported at the moment. All other types will\n// resolve with an empty metadata object.\nexport default async function imageDimensions(file: File): Promise<ImageDimensions | null> {\n  if (file.type !== 'image/png') {\n    return null\n  }\n  const slice = file.slice(0, 10240, file.type)\n  const scanner = await PNGScanner.fromFile(slice)\n  const meta = {\n    width: 0,\n    height: 0,\n    ppi: 1,\n  }\n\n  scanner.scan(function (type) {\n    switch (type) {\n      case 'IHDR': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.width = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.height = this.readLong()\n        return true\n      }\n      case 'pHYs': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuX = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuY = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const unit = this.readChar()\n        let inchesRatio\n        if (unit === 1) {\n          inchesRatio = METERS_PER_INCH\n        }\n        if (inchesRatio) {\n          meta.ppi = Math.round(((ppuX + ppuY) / 2) * inchesRatio)\n        }\n        return false\n      }\n      case 'IDAT': {\n        return false\n      }\n    }\n\n    return true\n  })\n\n  return meta\n}\n","import type {CaretCoordinates} from '@koddsson/textarea-caret'\nimport getCaretCoordinates from '@koddsson/textarea-caret'\n\ntype CaretCache = Map<number, CaretPosition>\nconst inputCache = new WeakMap<HTMLElement, CaretCache>()\n\n/**\n * Bundles together the caret coordinates and the caret's\n * index within a given textarea\n */\nclass CaretPosition {\n  index: number\n  coords: CaretCoordinates\n  textArea: HTMLTextAreaElement\n\n  constructor(index: number, coords: CaretCoordinates, textArea: HTMLTextAreaElement) {\n    this.index = index\n    this.coords = coords\n    this.textArea = textArea\n  }\n\n  get top() {\n    return this.coords.top\n  }\n\n  get left() {\n    return this.coords.left\n  }\n\n  get height() {\n    return this.coords.height\n  }\n\n  currentChar(lookBack = 1) {\n    return this.textArea.value.substring(this.index - lookBack, this.index)\n  }\n  /**\n   * Compare the line of the y coordinates to the caret.\n   * Returns -1 if y is on a previous line\n   * Returns 1 if y is on a subsequent line\n   * Returns 0 if y is on the same line\n   */\n  checkLine(y: number): -1 | 0 | 1 {\n    if (y < this.coords.top) {\n      return -1\n    }\n\n    if (y > this.coords.top + this.coords.height) {\n      return 1\n    }\n\n    return 0\n  }\n\n  /**\n   * The absolute horizontal distance between the x position and the\n   * caret's x position.\n   */\n  xDistance(x: number): number {\n    return Math.abs(this.left - x)\n  }\n}\n\n/**\n * Get the cached x/y coordinates for the given caret index and textarea.\n */\nfunction fetchCaretCoords(textArea: HTMLTextAreaElement, caretIndex: number): CaretPosition {\n  let caretCache\n  if (inputCache.has(textArea)) {\n    caretCache = inputCache.get(textArea)!\n  } else {\n    caretCache = new Map()\n    inputCache.set(textArea, caretCache)\n  }\n\n  if (caretCache.has(caretIndex)) {\n    return caretCache.get(caretIndex)\n  } else {\n    // calling getCaretCoordinates(textArea, caretIndex, {debug: true})\n    // will append a div to the document showing you where `textarea-caret` thinks the caret is\n    const coords = new CaretPosition(caretIndex, getCaretCoordinates(textArea, caretIndex), textArea)\n    caretCache.set(caretIndex, coords)\n    return coords\n  }\n}\n\n/**\n * This function recursively searches for the caret index that corresponds to the given coordinates.\n * We keep track of the number of iterations purely for logging to the console during\n * this PR.\n */\nconst binaryCursorSearch = (\n  textArea: HTMLTextAreaElement,\n  lower: number,\n  upper: number,\n  mouseX: number,\n  mouseY: number,\n  iterations: number,\n): number => {\n  if (upper === lower) {\n    return upper\n  }\n\n  /**\n   * Out of our final candidates, eliminate any that aren't on the same line as the mouse position.\n   * Pick the one that's closest in the x direction.\n   *\n   * If _none_ of the candidates are on the same line, bail and arbitrarily return the upper bound\n   */\n  const bestPosition = (candidates: CaretPosition[]): number => {\n    const sameLineCandidates = candidates\n      .filter(c => c.checkLine(mouseY) === 0)\n      .sort((a, b) => (a.xDistance(mouseX) > b.xDistance(mouseX) ? 1 : -1))\n    if (sameLineCandidates.length === 0) {\n      return upper\n    } else {\n      return sameLineCandidates[0]!.index\n    }\n  }\n  // if we're down to two or three positions check them all\n  if (upper - lower === 1) {\n    const l = fetchCaretCoords(textArea, lower)\n    const u = fetchCaretCoords(textArea, upper)\n    return bestPosition([l, u])\n  }\n\n  if (upper - lower === 2) {\n    const l = fetchCaretCoords(textArea, lower)\n    const m = fetchCaretCoords(textArea, upper - 1)\n    const u = fetchCaretCoords(textArea, upper)\n\n    return bestPosition([l, m, u])\n  }\n\n  // The new midpoint is halfway between the upper and lower bounds\n  // If that ends up being the same as the upper or lower, it means we've descended\n  // all the way to the bottom of our search tree. We don't backtrack.\n  const mid = Math.floor((upper + lower) / 2)\n  if (mid === lower || mid === upper) {\n    return mid\n  }\n  const midCoords = fetchCaretCoords(textArea, mid)\n\n  // If the midpoint caret position is below the mouse coordinates, we need to search\n  // farther along in the textarea\n  if (mouseY > midCoords.top + midCoords.height) {\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  // If the midpoint caret position is above the mouse coordinates, we need to search\n  // behind the current midpoint in the textarea\n  if (mouseY < midCoords.top) {\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  // if we're within a few pixels, avoid further searching\n  const ETA = 3\n  if (midCoords.xDistance(mouseX) < ETA) {\n    return mid\n  }\n\n  // if mid is on the same line as the cursor, we need to check the x position\n  if (midCoords.left < mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid + 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  if (midCoords.left > mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid - 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  return mid\n}\n\n/**\n * The driver function for the binary search.\n */\nconst findCursorPosition = (textArea: HTMLTextAreaElement, x: number, y: number): number => {\n  const startIndex = 0\n  const endIndex = textArea.value.length\n  const iterations = 0\n  return binaryCursorSearch(textArea, startIndex, endIndex, x, y, iterations)\n}\n\n/**\n * Assigns the final cursor position after finding it\n */\nfunction setCursorPosition(textarea: HTMLTextAreaElement, x: number, y: number) {\n  const newPosition = findCursorPosition(textarea, x, y)\n\n  textarea.setSelectionRange(newPosition, newPosition)\n}\n\n/**\n * Sets the caret in a textarea based on a DragEvent within that textarea.\n * Unfortunately there's no html api to do that directly (x/y -> caret). This function uses an iterative\n * approach to find the caret position from the x/y coordinates of the drag event.\n *\n * Under the hood we use the [textarea-caret npm package](https://www.npmjs.com/package/textarea-caret)\n * to find the x/y coordinates of the caret based on the caret index, and feed those results into a binary search.\n *\n * We use a cache to speed up the search, which is reinitialized when the user drags over the textarea for the first time.\n */\nexport function updateCaret(textArea: HTMLTextAreaElement, dragEvent: DragEvent) {\n  const rect = textArea.getBoundingClientRect()\n  // We want to clear the cache when the user first drags an attachment into the textarea.\n  // It's better to have to recalculate too much than to have a stale cache with wrong results.\n  if (dragEvent.type === 'dragenter') {\n    inputCache.delete(textArea)\n  }\n\n  const x = dragEvent.clientX - rect.left\n  const y = dragEvent.clientY - rect.top + textArea.scrollTop\n  setCursorPosition(textArea, x, y)\n}\n","import {insertText, replaceSelection, replaceText} from '@github-ui/text'\nimport {subscribe} from '@github/paste-markdown'\nimport type {Attachment} from '@github/file-attachment-element'\nimport type {ImageDimensions} from '../../image-dimensions'\nimport {getCodeEditor} from '../../code-editor'\nimport imageDimensions from '../../image-dimensions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {updateCaret} from './caret-placement'\nimport {emitToCodeMirror} from '@github-ui/code-mirror/emit-to-codemirror'\n\n// This is a map of all the attachments (and their placeholders) that have been succesfully uploaded\nconst uploadedItems: Map<string, string> = new Map()\n\n// In paste-markdown the subscribe function listens for all of paste event handlers and\n// returns an unsubscribe function to remove them from the element.\nobserve('.js-paste-markdown', {\n  initialize(el) {\n    let unsubscribe: () => void\n    const pasteUrlLinksAsPlainText = el.hasAttribute('data-paste-url-links-as-plain-text')\n    return {\n      add() {\n        unsubscribe = subscribe(el as HTMLElement, {\n          defaultPlainTextPaste: {urlLinks: pasteUrlLinksAsPlainText},\n        }).unsubscribe\n      },\n      remove() {\n        unsubscribe()\n      },\n    }\n  },\n})\n\nconst attachmentPlaceholders = new WeakMap<Attachment, string>()\n\n/**\n * Caches the attachment's placeholder text as it was inserted into the `<textarea>` element.\n * This is intended to make removing the placeholder later easier. The sole reason we're doing all\n * of this is because `insertText` sometimes adds a `\\n` before the inserted text, and sometimes doesn't.\n * Rather than adding more logic to figure out what happened, we memoize the result.\n *\n * This is exported so we can use it in testing\n */\nexport function cachePlaceholder(attachment: Attachment, placeholder: string) {\n  attachmentPlaceholders.set(attachment, placeholder)\n}\n\n/**\n *  Gets the cached placeholder for the attachment. Falls back to calculating the replacement text\n *  if there is no entry. The worst case outcome here is that we leave an extra newline character\n *  in the textarea.\n *\n *  This function is only exported for testing purposes\n */\nexport function getPlaceholder(attachment: Attachment): string {\n  return attachmentPlaceholders.get(attachment) || replacementText(attachment)\n}\n\n// Based off `isImage` from @github/file-attachment-element\n// Eventually, we should upstream this\nfunction isVideo(attachment: Attachment): boolean {\n  return ['video/mp4', 'video/quicktime'].includes(attachment.file.type)\n}\n\nfunction parameterizeName(name: string): string {\n  return name\n    .replace(/[[\\]\\\\\"<>&]/g, '.') // Convert unwanted chars to separator\n    .replace(/\\.{2,}/g, '.') // No more than 1 separator in a row\n    .replace(/^\\.|\\.$/gi, '') // Remove leading/trailing separator\n}\n\n// Returns an uploading status message while the file is uploading. The\n// placeholder will be replaced with a URL to the image once the upload\n// is complete.\nfunction placeholderText(attachment: Attachment): string {\n  // Video uploads do not include braces around the text\n  if (isVideo(attachment)) return `\\nUploading ${attachment.file.name}\\n`\n\n  const prefix = attachment.isImage() ? '!' : ''\n  return `${prefix}[Uploading ${attachment.file.name}]()`\n}\n\n// Strips non-word characters from a file name so it's safe to use in a\n// markdown image alt tag without needing to be escaped.\nfunction altText(name: string): string {\n  return parameterizeName(name)\n    .replace(/\\.[^.]+$/, '') // Strip file extension\n    .replace(/\\./g, ' ') // Bring back some white space\n}\n\nconst RETINA_PPI = 72 * 2\n\nfunction disableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n    if (submitButton) {\n      submitButton.disabled = true\n    }\n  }\n}\n\nfunction enableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n\n    if (submitButton) submitButton.disabled = false\n  }\n}\n\ntype CustomEventPayload = CustomEvent & {currentTarget: Element}\n\n/**\n * This function is only exported to make async testing easier\n */\nexport async function onUploadCompleted(event: CustomEventPayload) {\n  const {attachment} = event.detail\n  const target = event.currentTarget\n  let tagText\n  if (attachment.isImage()) {\n    tagText = await imageTag(attachment)\n  } else if (isVideo(attachment)) {\n    tagText = videoMarkdown(attachment)\n  } else {\n    tagText = mdLink(attachment)\n  }\n  // note at this point event.currentTarget is possibly null\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n  setValidityAndLinkText('', tagText, event, target)\n\n  // Checking if there are any pending replacements to be made\n  if (uploadedItems.size > 0) {\n    findAndReplacePlaceholders()\n  }\n}\n\nfunction mdLink(attachment: Attachment): string {\n  return `[${attachment.file.name}](${attachment.href})`\n}\n\nfunction videoMarkdown(attachment: Attachment): string {\n  return `\\n${attachment.href!}\\n`\n}\n\nasync function imageTag(attachment: Attachment): Promise<string> {\n  const dimensions = await imageSize(attachment.file)\n  const alt = altText(attachment.file.name)\n  const src = attachment.href\n  if (dimensions.ppi === RETINA_PPI) {\n    const width = Math.round(dimensions.width / 2)\n    // eslint-disable-next-line github/unescaped-html-literal\n    return `<img width=\"${width}\" alt=\"${alt}\" src=\"${src}\">`\n  }\n  return `![${alt}](${src})`\n}\n\nasync function imageSize(file: File): Promise<ImageDimensions> {\n  const empty = {width: 0, height: 0, ppi: 0}\n  try {\n    return (await imageDimensions(file)) ?? empty\n  } catch {\n    return empty\n  }\n}\n\n/**\n * When swapping out the placeholder for an image or video, we need\n * to remember to get the extra leading newline for video uploads\n */\nfunction replacementText(attachment: Attachment) {\n  const placeholder = placeholderText(attachment)\n  if (isVideo(attachment)) {\n    return `\\n${placeholder}\\n`\n  } else {\n    return `${placeholder}\\n`\n  }\n}\n\n/**\n * Make the textarea valid and remove the placeholder. The submit button will\n * get enabled outside this function.\n */\nfunction removeFailedUpload(event: CustomEventPayload) {\n  const field = event.currentTarget.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  const textToRemove = getPlaceholder(event.detail.attachment)\n  if (field) {\n    // Regular editor\n    field.setCustomValidity('')\n    replaceText(field, textToRemove, '')\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(event.currentTarget)\n\n    if (!editor) {\n      emitToCodeMirror('upload:editor:change', event.currentTarget, {\n        state: 'failed',\n        placeholder: textToRemove,\n        replacementText: '',\n      })\n\n      return\n    }\n\n    const cursor = editor.getSearchCursor(textToRemove)\n    cursor.findNext()\n    cursor.replace('')\n  }\n}\n\n/**\n *  Updates text inserted in editor for dropped assets, be it a regular editor\n *  (textarea) or a code editor (CodeMirror) editing a Markdown file\n *\n *  If validity is 'uploading', inserts \"[Uploading asset-name](...)\" at cursor,\n *  otherwise replace that placeholder with href\n *\n *  target is only required if event.currentTarget is lost (e.g., after await)\n */\n\nfunction setValidityAndLinkText(\n  validity: 'uploading' | '',\n  tagText: string,\n  event: CustomEventPayload,\n  target?: EventTarget & Element,\n) {\n  const field = (target || event.currentTarget).querySelector<HTMLTextAreaElement>('.js-comment-field')!\n  const fileUploadLoadingText = (target || event.currentTarget).querySelector<HTMLSpanElement>(\n    '.js-file-upload-loading-text',\n  )!\n  const placeholder = placeholderText(event.detail.attachment)\n  const {batch} = event.detail\n\n  if (field) {\n    const selectedText = field.value.substring(field.selectionStart, field.selectionEnd)\n    // Regular text editor\n    if (validity === 'uploading') {\n      let insertedPlaceholder\n      if (selectedText.length) {\n        insertedPlaceholder = replaceSelection(field, selectedText, placeholder)\n      } else {\n        insertedPlaceholder = insertText(field, placeholder, {appendNewline: true})\n      }\n      // If things go wrong, the most reliable way we can remove the placeholder\n      // for an attachment is to cache it.  This is mostly so we don't have to\n      // try to figure out if `insertText` added a leading newline into the\n      // textarea\n      attachmentPlaceholders.set(event.detail.attachment, insertedPlaceholder)\n    } else {\n      if (!field.value.includes(placeholder)) {\n        // Adding a mapping from the attachement's placeholder test to the generated tag\n        // Only doing this if the placeholder isn't already in the textarea, because then\n        // it will be replaced with the tag in the normal flow\n        uploadedItems.set(placeholder, tagText)\n      }\n\n      replaceText(field, placeholder, tagText, document.activeElement === field)\n    }\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(target || event.currentTarget)\n\n    if (editor) {\n      if (validity === 'uploading') {\n        if (editor.getSelection().length) {\n          // replace selected text with placeholder\n          editor.replaceSelection(placeholder)\n        } else {\n          // insert placeholder at cursor\n          const cursor = editor.getCursor()\n          const toReplace = replacementText(event.detail.attachment)\n          editor.replaceRange(toReplace, cursor)\n        }\n      } else {\n        const cursor = editor.getSearchCursor(placeholder)\n        cursor.findNext()\n        cursor.replace(tagText)\n      }\n    } else {\n      emitToCodeMirror('upload:editor:change', target || event.currentTarget, {\n        state: validity === '' ? 'uploaded' : 'uploading',\n        placeholder,\n        replacementText: validity === '' ? tagText : replacementText(event.detail.attachment),\n      })\n    }\n\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  }\n  if (fileUploadLoadingText) {\n    const fileUploadMessage = fileUploadLoadingText.getAttribute('data-file-upload-message')\n    fileUploadLoadingText.textContent = `${fileUploadMessage} (${batch.uploaded() + 1}/${batch.size})`\n  }\n}\n\nfunction getEditor(target: Element) {\n  const codeEditorElement = target.querySelector<HTMLTextAreaElement>('.js-code-editor')\n\n  if (!codeEditorElement) return\n\n  const codeEditor = getCodeEditor(codeEditorElement)\n\n  if (!codeEditor) return\n\n  return codeEditor.editor\n}\n\non('upload:setup', '.js-upload-markdown-image', function (event) {\n  setValidityAndLinkText('uploading', '', event)\n})\n\non('upload:complete', '.js-upload-markdown-image', onUploadCompleted)\n\non('upload:error', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\nfunction updateCursor(event: DragEvent) {\n  // The file-attachment-element bubbles up dragover and dragenter events after preventing their default\n  // behavior. We want to manually position the cursor in the textarea so that it reflects where the user\n  // will drop the file.\n  event.stopPropagation()\n\n  const attachmentElement = event.currentTarget as HTMLElement\n\n  if (!attachmentElement) return\n\n  const textArea = attachmentElement.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  if (textArea) {\n    updateCaret(textArea, event)\n  } else {\n    const editor = getEditor(attachmentElement)\n\n    emitToCodeMirror('upload:editor:cursor', attachmentElement, {left: event.clientX, top: event.clientY})\n\n    if (editor) {\n      const c = editor.coordsChar({left: event.pageX, top: event.pageY})\n      editor.setCursor(c)\n      editor.focus()\n    }\n  }\n}\n\n/**\n * This function isn't used in production, it's only for keeping a fast feedback looop in dev/troubleshooting.\n * To use in dev mode, add\n * ```\n * on('click', 'textarea', debugUpdateCaret)\n * ```\n * to this file and uncomment the `console.log`\n */\n// eslint-disable-next-line unused-imports/no-unused-vars\nconst debugUpdateCaret = (event: MouseEvent) => {\n  const textArea = event.currentTarget as HTMLTextAreaElement\n  const rect = textArea.getBoundingClientRect()\n  const x = event.clientX - rect.left\n  const y = event.clientY - rect.top + textArea.scrollTop\n  // eslint-disable-next-line no-console\n  console.log({\n    x,\n    y,\n    cursor: textArea.selectionStart,\n    t: textArea.value.substring(textArea.selectionStart - 10, textArea.selectionStart),\n  })\n  const d = new DragEvent('dragenter', {clientX: event.clientX, clientY: event.clientY})\n  updateCaret(textArea, d)\n}\n\non('dragenter', 'file-attachment', updateCursor)\n\non('dragover', 'file-attachment', updateCursor)\n\non('upload:invalid', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\n// Checks all of the issue form textareas for placeholders that need to be replaced with tags\nfunction findAndReplacePlaceholders() {\n  const textAreas = document.querySelectorAll<HTMLTextAreaElement>('.issue-form-textarea')\n  for (const textArea of textAreas) {\n    for (const [placeholder, tagText] of uploadedItems) {\n      if (!textArea.value.includes(placeholder)) continue\n      replaceText(textArea, placeholder, tagText, document.activeElement === textArea)\n      uploadedItems.delete(placeholder)\n    }\n  }\n}\n","// Commenting: Write and Preview tabs\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-previewable-comment-form write-selected\"\n//           data-preview-url=\"/preview\">\n//\n//         <ul>\n//           <li><a href=\"#\" class=\"js-write-tab selected\">Write</a></li>\n//           <li><a href=\"#\" class=\"js-preview-tab\">Preview</a></li>\n//         </ul>\n//\n//         <textarea class=\"js-comment-field\"></textarea>\n//\n//       </div>\n//     </form>\n//\n// TODO: Everything should be using js- prefixed classes\n// TODO: Remove all static copy\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport TabContainerElement from '@github/tab-container-element'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '@github-ui/onfocus'\n\n// Finds the CSRF token value in a `js-data-preview-url-csrf` hidden input\n// element in the preview div. If we don't find a token for the preview\n// div, find the CSRF token value in the hidden `authenticity_token` form\n// input to be used in the parent form submission (i.e. the form that this is\n// previewing).\n//\n// Returns the CSRF token String.\nfunction token(container: Element): string {\n  const dataToken = container.querySelector('.js-data-preview-url-csrf')\n  // eslint-disable-next-line github/authenticity-token\n  const formTokenRef = container.closest<HTMLFormElement>('form')!.elements.namedItem('authenticity_token')\n  if (dataToken instanceof HTMLInputElement) {\n    return dataToken.value\n  } else if (formTokenRef instanceof HTMLInputElement) {\n    return formTokenRef.value\n  } else {\n    throw new Error('Comment preview authenticity token not found')\n  }\n}\n\n// Bidirectionally switches between \"Write\" and \"Preview\" tabs.\nfunction activateTab(tab: Element): HTMLElement {\n  const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n  const isPreview = tab.classList.contains('js-preview-tab')\n  if (isPreview) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    if (writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n  }\n  container.classList.toggle('preview-selected', isPreview)\n  container.classList.toggle('write-selected', !isPreview)\n  const currentSelectedTabs = container.querySelector<HTMLElement>(\n    '.tabnav-tab.selected, .tabnav-tab[aria-selected=\"true\"]',\n  )!\n  currentSelectedTabs.setAttribute('aria-selected', 'false')\n  currentSelectedTabs.classList.remove('selected')\n  tab.classList.add('selected')\n  tab.setAttribute('aria-selected', 'true')\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n  if (isPreview) {\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n  }\n  return container\n}\n\non('click', '.js-write-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) {\n    setTimeout(() => {\n      commentForm.querySelector<HTMLElement>('.js-comment-field')!.focus()\n    })\n    return\n  }\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:off')\n  const pollForm = commentForm.querySelector('.js-discussion-poll-form-component')\n  if (pollForm) {\n    fire(pollForm, 'poll-preview:toggle:off')\n  }\n  setTimeout(() => {\n    container.querySelector<HTMLElement>('.js-comment-field')!.focus()\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = false\n  }\n})\n\non('click', '.js-preview-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) return\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:on')\n\n  setTimeout(() => {\n    renderPreview(container)\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = true\n  }\n  event.stopPropagation()\n  event.preventDefault()\n})\n\non('tab-container-change', '.js-previewable-comment-form', function (event) {\n  const relatedTarget = event.detail.relatedTarget\n  const isPreviewPanel = relatedTarget && relatedTarget.classList.contains('js-preview-panel')\n  const container = event.currentTarget\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n\n  if (isPreviewPanel) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    const skipSizing = previewBody.hasAttribute('data-skip-sizing')\n\n    if (!skipSizing && writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = false\n    }\n\n    const pollForm = document.querySelector('.js-discussion-poll-form-component')\n    if (pollForm) {\n      fire(pollForm, 'poll-preview:toggle:off')\n    }\n  }\n\n  container.classList.toggle('preview-selected', Boolean(isPreviewPanel))\n  container.classList.toggle('write-selected', !isPreviewPanel)\n})\n\n// Allow triggering preview rendering from outside code\n// TODO Replace event with exported module function.\non('preview:render', '.js-previewable-comment-form', function (event) {\n  const previewTab = (event.target as Element).querySelector<HTMLElement>('.js-preview-tab')!\n  const container = activateTab(previewTab)\n  setTimeout(() => {\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  })\n})\n\nfunction previewForm(container: Element): FormData {\n  const text = container.querySelector<HTMLTextAreaElement>('.js-comment-field')!.value\n  const path = container.querySelector<HTMLInputElement>('.js-path')?.value\n  const lineNumber = container.querySelector<HTMLInputElement>('.js-line-number')?.value\n  const startLineNumber = container.querySelector<HTMLInputElement>('.js-start-line-number')?.value\n  const side = container.querySelector<HTMLInputElement>('.js-side')?.value\n  const startSide = container.querySelector<HTMLInputElement>('.js-start-side')?.value\n  const startCommitOid = container.querySelector<HTMLInputElement>('.js-start-commit-oid')?.value\n  const endCommitOid = container.querySelector<HTMLInputElement>('.js-end-commit-oid')?.value\n  const baseCommitOid = container.querySelector<HTMLInputElement>('.js-base-commit-oid')?.value\n  const commentId = container.querySelector<HTMLInputElement>('.js-comment-id')?.value\n\n  const form = new FormData()\n  form.append('text', text)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token(container))\n  if (path) form.append('path', path)\n  if (lineNumber) form.append('line_number', lineNumber)\n  if (startLineNumber) form.append('start_line_number', startLineNumber)\n  if (side) form.append('side', side)\n  if (startSide) form.append('start_side', startSide)\n  if (startCommitOid) form.append('start_commit_oid', startCommitOid)\n  if (endCommitOid) form.append('end_commit_oid', endCommitOid)\n  if (baseCommitOid) form.append('base_commit_oid', baseCommitOid)\n  if (commentId) form.append('comment_id', commentId)\n  return form\n}\n\nfunction fetchPreview(container: Element): Promise<string> {\n  const url = container.getAttribute('data-preview-url')!\n  const data = previewForm(container)\n  fire(container, 'preview:setup', {data})\n  return cachedFetch(url, data)\n}\n\nconst cachedFetch = memoize(uncachedFetch, {hash})\nlet previousController: AbortController | null = null\nasync function uncachedFetch(url: string, body: FormData): Promise<string> {\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  const response = await fetch(url, {method: 'post', body, signal})\n  if (!response.ok) throw new Error('something went wrong')\n  return response.text()\n}\n\nfunction hash(url: string, body: FormData): string {\n  const params = [...body.entries()].toString()\n  return `${url}:${params}`\n}\n\nasync function renderPreview(container: Element) {\n  const commentBody = container.querySelector<HTMLElement>('.comment-body')!\n\n  // eslint-disable-next-line github/unescaped-html-literal\n  commentBody.innerHTML = '<p>Loading preview&hellip;</p>'\n  try {\n    const html = await fetchPreview(container)\n    // eslint-disable-next-line github/unescaped-html-literal\n    commentBody.innerHTML = html || '<p>Nothing to preview</p>'\n    // Alert listeners that content has been fetched and written to the dom\n    fire(container, 'preview:rendered')\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name !== 'AbortError') {\n      // eslint-disable-next-line github/unescaped-html-literal\n      commentBody.innerHTML = '<p>Error rendering preview</p>'\n    }\n  }\n}\n\nobserve('.js-preview-tab', function (tab) {\n  tab.addEventListener('mouseenter', async () => {\n    const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n    try {\n      await fetchPreview(container)\n    } catch (error) {\n      // Ignore fetch errors on silent prefetch\n    }\n  })\n})\n\nonKey('keydown', '.js-comment-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  // On Apple devices, the Meta (Cmd)+Shift plane is in lower case. So\n  // normalising the key toUpperCase is necessary\n  if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key.toUpperCase() === 'P') {\n    const container = field.closest<HTMLElement>('.js-previewable-comment-form')!\n    if (container.classList.contains('write-selected')) {\n      if (container instanceof TabContainerElement) {\n        container.querySelector<HTMLElement>('.js-preview-tab')!.click()\n      } else {\n        // eslint-disable-next-line github/no-blur\n        field.blur()\n        container.dispatchEvent(\n          new CustomEvent('preview:render', {\n            bubbles: true,\n            cancelable: false,\n          }),\n        )\n      }\n      event.preventDefault()\n      event.stopImmediatePropagation()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '@github-ui/onfocus'\n\n// This regex matches a comment containing only \"-1\", \"+1\", \":-\", \":-1\", \":+\", or \":+1\"\nconst plusOneMarker = /^(\\+1|-1|:\\+1?|:-1?)$/\n\n// Checks to see if a comment is a reaction like comment.\nconst isReactionLikeComment = (text: string): boolean => {\n  let matched = false\n  for (const line of text.split('\\n')) {\n    const l = line.trim()\n    if (!l || l.startsWith('>')) continue\n    // If a line has matched previously, but this one doesnt,\n    // it means the line has more than just a reaction - so return false\n    if (matched && plusOneMarker.test(l) === false) {\n      return false\n    }\n    if (!matched && plusOneMarker.test(l)) {\n      matched = true\n    }\n  }\n  return matched\n}\n\non('focusout', '#new_comment_field', function (event) {\n  const newCommentTextField = event.currentTarget\n\n  const suggestion = newCommentTextField.closest('.js-reaction-suggestion')\n  if (suggestion) {\n    clearReactionSuggestion(suggestion)\n  }\n})\n\non('focusin', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\nonKey('keyup', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\n// Toggle reaction suggestion.\nfunction toggleReactionSuggestion(event: Event) {\n  const eventTarget = event.target as HTMLTextAreaElement\n\n  const text = eventTarget.value\n  const reactionSuggestion = eventTarget.closest('.js-reaction-suggestion')\n\n  if (!reactionSuggestion) {\n    return\n  }\n\n  if (isReactionLikeComment(text)) {\n    reactionSuggestion.classList.remove('hide-reaction-suggestion')\n    reactionSuggestion.classList.add('reaction-suggestion')\n    const suggestionText = reactionSuggestion.getAttribute('data-reaction-markup')!\n    reactionSuggestion.setAttribute('data-reaction-suggestion-message', suggestionText)\n  } else {\n    clearReactionSuggestion(reactionSuggestion)\n  }\n}\n\n// Clear reaction suggestion.\nfunction clearReactionSuggestion(reactionSuggestion: Element) {\n  reactionSuggestion.classList.remove('reaction-suggestion')\n  reactionSuggestion.classList.add('hide-reaction-suggestion')\n  reactionSuggestion.removeAttribute('data-reaction-suggestion-message')\n}\n","import {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Support 'c' key to open commits too\non('navigation:keydown', '.js-commits-list-item', function (event) {\n  if (!isShortcutAllowed(event.detail.originalEvent)) return\n\n  if (!(event.target instanceof Element)) return\n  if (event.detail.hotkey === 'c') {\n    event.target.querySelector<HTMLElement>('.js-navigation-open')!.click()\n  }\n})\n","import {onInput} from '@github-ui/onfocus'\n\nonInput('.js-company-name-input', function (event) {\n  const field = event.target as HTMLInputElement\n\n  const form = field.form!\n\n  const corpTOSLink = form.querySelector('.js-corp-tos-link')\n  const regTOSLink = form.querySelector('.js-tos-link')\n\n  if (regTOSLink) {\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.add('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (corpTOSLink) {\n      // TODO Replace with hidden attribute so aria-hidden is not required.\n      /* eslint-disable-next-line github/no-d-none */\n      corpTOSLink.classList.remove('d-none')\n      corpTOSLink.setAttribute('aria-hidden', 'false')\n    }\n  }\n\n  const hints = form.querySelectorAll('.js-company-name-text')\n  if (hints.length === 0) {\n    return\n  }\n\n  for (const hint of hints) {\n    if (field.value) {\n      const hasWording = hint.hasAttribute('data-wording')\n\n      if (hasWording) {\n        const wording = hint.getAttribute('data-wording')!\n        hint.textContent = ` ${wording} ${field.value}`\n      } else {\n        hint.textContent = field.value\n      }\n    } else {\n      hint.textContent = ''\n    }\n  }\n})\n","import {changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Update the TOS statement with company name\n//   e.g. By clicking on \"Create an organization\" below, you are agreeing to the Terms of Service and the Privacy Policy on behalf of your company, GitHub, Inc.\nobserve('.js-company-owned:not(:checked)', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector<HTMLInputElement>('.js-company-name-input')!\n    const hint = document.querySelector<HTMLElement>('.js-company-name-text')!\n    const corpTOSLink = document.querySelector<HTMLElement>('.js-corp-tos-link')!\n    const regTOSLink = document.querySelector<HTMLElement>('.js-tos-link')!\n\n    if (input) {\n      if (el.getAttribute('data-optional')) {\n        input.removeAttribute('required')\n      }\n      changeValue(input, '')\n    }\n\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.remove('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'false')\n    /* eslint-disable-next-line github/no-d-none */\n    corpTOSLink.classList.add('d-none')\n    corpTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (hint) {\n      hint.textContent = ''\n    }\n  },\n})\n\nobserve('.js-company-owned:checked', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector('.js-company-name-input')\n\n    if (input) {\n      input.setAttribute('required', '')\n      fire(input, 'focus')\n      fire(input, 'input')\n    }\n  },\n})\n\n// Make the CorpTOS the default on the \"Business Plus\" AKA Business plan\n// TODO Replace with delegated-events\nobserve('.js-company-owned-autoselect', {\n  constructor: HTMLInputElement,\n  add(field) {\n    const planChoice = field\n\n    function autoselect() {\n      if (planChoice.checked && planChoice.form) {\n        const corpTos = planChoice.form.querySelector<HTMLInputElement>('.js-company-owned')!\n        changeValue(corpTos, true)\n      }\n    }\n\n    planChoice.addEventListener('change', autoselect)\n    autoselect()\n  },\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {IncludeFragmentElement} from '@github/include-fragment-element'\nimport hashChange from './hash-change'\nimport {loadDeferredContentByEvent} from './include-fragment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet currentlyOpenedDetailsDropdown: HTMLElement | null = null\n\ndocument.addEventListener('keydown', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.defaultPrevented && event.key === 'Escape' && currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown.removeAttribute('open')\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Dismiss open <details> when activating <details> with keyboard.\nobserve('.js-dropdown-details', {\n  subscribe: el => {\n    return compose(fromEvent(el, 'toggle', closeCurrentDetailsDropdown), fromEvent(el, 'toggle', autofocus))\n  },\n})\n\nfunction autofocus({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    const element = target.querySelector<HTMLElement>('[autofocus]')\n    if (element) element.focus()\n  } else {\n    const summary = target.querySelector<HTMLElement>('summary')\n    if (summary) summary.focus()\n  }\n}\n\nfunction closeCurrentDetailsDropdown({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    if (currentlyOpenedDetailsDropdown && currentlyOpenedDetailsDropdown !== target) {\n      currentlyOpenedDetailsDropdown.removeAttribute('open')\n    }\n\n    currentlyOpenedDetailsDropdown = target\n  } else if (target === currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown = null\n  }\n}\n\nobserve('[data-deferred-details-content-url]:not([data-details-no-preload-on-hover])', {\n  subscribe: el => {\n    const summary = el.querySelector<HTMLElement>('summary')!\n    return fromEvent(summary, 'mouseenter', loadDeferredContentByEvent)\n  },\n})\n\nobserve('[data-deferred-details-content-url]', {\n  subscribe: el => {\n    return fromEvent(el, 'toggle', loadDeferredContentByEvent)\n  },\n})\n\nexport function toggleDetails(details: HTMLElement) {\n  if (details.hasAttribute('open')) {\n    details.removeAttribute('open')\n  } else {\n    details.setAttribute('open', 'open')\n  }\n}\n\n// Additonal button trigger for <details id>\non('click', '[data-toggle-for]', function (event) {\n  const id = event.currentTarget.getAttribute('data-toggle-for') || ''\n  const details = document.getElementById(id)\n  if (!details) return\n  toggleDetails(details)\n})\n\n// Expand collapsed outdated diff if anchor points to it\n//   /github/github/pull/123#discussion-diff-456\n//   /github/github/pull/123#discussion-r345\nhashChange(function ({target}) {\n  if (!target || target.closest('summary')) return\n\n  let node = target.parentElement\n  while (node) {\n    node = node.closest('details')\n    if (node) {\n      if (!node.hasAttribute('open')) {\n        node.setAttribute('open', '')\n      }\n      node = node.parentElement\n    }\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {IncludeFragmentElement} from '@github/include-fragment-element'\nimport RemoteInputElement from '@github/remote-input-element'\nimport {fromEvent} from '@github-ui/subscription'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '@github-ui/onfocus'\n\n// Match deprecated .js-select-menu state classes.\nobserve('details.select-menu details-menu include-fragment', function (el) {\n  const details = el.closest('details')\n  if (!details) return\n  el.addEventListener('loadstart', function () {\n    details.classList.add('is-loading')\n    details.classList.remove('has-error')\n  })\n  el.addEventListener('error', function () {\n    details.classList.add('has-error')\n  })\n  el.addEventListener('loadend', function () {\n    details.classList.remove('is-loading')\n    const filter = details.querySelector('.js-filterable-field')\n    if (filter) fire(filter, 'filterable:change')\n  })\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu .js-filterable-field', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n        fire(filter, 'filterable:change')\n      }\n    })\n  },\n})\n\n// Temporary fix for role=menu containing input\nobserve('details-menu[role=menu] [role=menu]', el => {\n  const menu = el.closest('details-menu[role]')\n  if (menu && menu !== el) menu.removeAttribute('role')\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu remote-input input', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n      }\n    })\n  },\n})\n\n// On form reset fire change on input so details-menu can apply state changes.\nobserve('form details-menu', menu => {\n  const form = menu.closest<HTMLElement>('form')!\n  form.addEventListener('reset', () => {\n    setTimeout(() => resetMenus(form), 0)\n  })\n})\n\n// Re-fires the `change` event for checked radios in a details-menu form.\nfunction resetMenus(form: Element) {\n  const inputs = form.querySelectorAll('details-menu [role=menuitemradio] input[type=radio]:checked')\n  for (const input of inputs) {\n    fire(input, 'change')\n  }\n}\n\n/**\n * Auto trigger the first item on Enter when filterable field is focused.\n */\nonKey('keypress', 'details-menu .js-filterable-field, details-menu filter-input input', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key === 'Enter') {\n    const input = event.currentTarget\n    const menu = (input as HTMLInputElement).closest<HTMLElement>('details-menu')!\n    const firstItem = menu.querySelector('[role^=\"menuitem\"]:not([hidden])')\n    if (firstItem instanceof HTMLElement && !firstItem.classList.contains('select-menu-clear-item')) firstItem.click()\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Focus filterable field after selecting an item\non(\n  'details-menu-selected',\n  'details-menu',\n  event => {\n    const menu = event.currentTarget\n\n    const filterableField = (menu as HTMLElement).querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement && filterableField.value) filterableField.focus()\n  },\n  {capture: true},\n)\n\nconst syncInputValue = (event: Event) => {\n  if (!(event.target instanceof Element)) return\n  const id = event.target.getAttribute('data-menu-input')!\n  const el = document.getElementById(id)\n  if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) return\n  const button =\n    ((event as CustomEvent).detail.relatedTarget as HTMLButtonElement) ||\n    ((event as CustomEvent).detail.item.querySelector('button') as HTMLButtonElement)\n  el.value = button.value\n}\n\n// On selection, sync selectedItem.value to input[id=data-menu-input]\non('itemActivated', '[data-menu-input]', syncInputValue, {capture: true})\n// Delete this line when data-menu-input attributes aren't on details-menu elements anymore\n// app/components/github/menu_component.html.erb\n// app/views/businesses/pre_receive_hook_targets/_environments.html.erb\n// app/views/businesses/pre_receive_hook_targets/_files.html.erb\non('details-menu-selected', '[data-menu-input]', syncInputValue, {capture: true})\n\n// Restore focus on the previously focused element after results have been updated\n// Otherwise return focus to input\nobserve('details-menu remote-input', {\n  constructor: RemoteInputElement,\n  initialize(el) {\n    const resultsContainer = document.getElementById(el.getAttribute('aria-owns') || '')\n    if (!resultsContainer) return\n\n    let activeElementId: string | null = null\n    el.addEventListener('load', () => {\n      if (document.activeElement && resultsContainer.contains(document.activeElement) && document.activeElement.id) {\n        activeElementId = document.activeElement.id\n      } else {\n        activeElementId = null\n      }\n    })\n\n    el.addEventListener('loadend', () => {\n      if (activeElementId) {\n        const focusEl =\n          resultsContainer.querySelector(`#${activeElementId}`) || resultsContainer.querySelector('[role^=\"menu\"]')\n        if (focusEl instanceof HTMLElement) {\n          focusEl.focus()\n        } else if (el.input) {\n          el.input.focus()\n        }\n      }\n    })\n  },\n})\n\non(\n  'details-menu-selected',\n  'details-menu[data-menu-max-options]',\n  event => {\n    const max = +event.currentTarget.getAttribute('data-menu-max-options')!\n    const checkedItems = event.currentTarget.querySelectorAll('[role=\"menuitemcheckbox\"][aria-checked=\"true\"]')\n    const atLimit = max === checkedItems.length\n    event.currentTarget.querySelector<HTMLElement>('[data-menu-max-options-warning]')!.hidden = !atLimit\n    for (const item of event.currentTarget.querySelectorAll<HTMLInputElement>('[role=\"menuitemcheckbox\"] input')) {\n      item.disabled = atLimit && !item.checked\n    }\n  },\n  {capture: true},\n)\n\n// Make js-select-menu & navigation behaviors work with detail select menus\nobserve('details > details-menu', {\n  subscribe(el) {\n    const details = el.closest<HTMLElement>('details')!\n    return fromEvent(details, 'toggle', fireMenuToggleEvent)\n  },\n})\n\n// Fire a menu:[de]activate[d] event depending on the state of the menu.\nasync function fireMenuToggleEvent({currentTarget}: Event) {\n  const details = currentTarget as HTMLElement\n  const isOpen = details.hasAttribute('open')\n\n  if (isOpen) {\n    const filterableField = details.querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement) filterableField.focus()\n  }\n\n  fire(details, isOpen ? 'menu:activate' : 'menu:deactivate')\n  await microtask()\n  fire(details, isOpen ? 'menu:activated' : 'menu:deactivated')\n}\n\nobserve('details > details-menu[preload]:not([src])', {\n  subscribe(el) {\n    return fromEvent(el.parentElement!, 'mouseover', function (event) {\n      const menu = event.currentTarget as HTMLElement\n      const loader = menu.querySelector<IncludeFragmentElement>('include-fragment[src]')\n      loader?.load()\n    })\n  },\n})\n","// Behaviors complementing dialogs\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Eagerly load an <include-fragment> inside a <dialog>/<modal-dialog> when a user hovers on the button to click it\nobserve('button[data-show-dialog-id]', button => {\n  button?.addEventListener('mouseenter', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    const dialog = button.ownerDocument.getElementById(id!)\n    dialog?.querySelector('include-fragment[loading=lazy]')?.setAttribute('loading', 'eager')\n  })\n})\n\nobserve('summary[data-show-dialog-id]', button => {\n  button?.addEventListener('click', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    if (!id) return\n    const dialog = button.ownerDocument.getElementById(id) as HTMLDialogElement\n    dialog?.show()\n  })\n})\n","// Disable\n//\n// Disables clicked buttons with text in `data-disable-with`.\n//\n// `<input type=submit>` or `<button type=submit>`\n//\n// `data-disable-with` - Message to set `<input>` value or `<button>` innerHTML to.\n//\n//     <input type=\"submit\" data-disable-with=\"Submitting...\">\n\nimport {afterRemote} from '@github/remote-form'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst originalText = new WeakMap()\n\n// Get button text.\nfunction getButtonText(el: Element) {\n  if (el instanceof HTMLInputElement) {\n    return el.value || 'Submit'\n  } else {\n    return el.innerHTML || ''\n  }\n}\n\nfunction getButtons(form: HTMLFormElement): Array<HTMLInputElement | HTMLButtonElement> {\n  return [\n    Array.from(form.querySelectorAll('input[type=submit][data-disable-with], button[data-disable-with]')),\n    Array.from(document.querySelectorAll(`button[data-disable-with][form=\"${form.id}\"]`)),\n  ].flat() as Array<HTMLInputElement | HTMLButtonElement>\n}\n\n// Sets a button text.\nfunction setButtonText(el: Element, text: string) {\n  if (el instanceof HTMLInputElement) {\n    el.value = text\n  } else {\n    el.innerHTML = text\n  }\n}\n\non(\n  'submit',\n  'form',\n  function (event) {\n    const form = event.currentTarget as HTMLFormElement\n    for (const button of getButtons(form)) {\n      originalText.set(button, getButtonText(button))\n      const disabledText = button.getAttribute('data-disable-with')\n      if (disabledText) {\n        setButtonText(button, disabledText)\n      }\n      button.disabled = true\n    }\n  },\n  {capture: true},\n)\n\n// Revert a form to it's previous state.\nfunction revert(form: HTMLFormElement) {\n  for (const button of getButtons(form)) {\n    const text = originalText.get(button)\n    if (text != null) {\n      setButtonText(button, text)\n      // Button doesn't have a `data-disable-invalid` property or form is valid\n      if (!button.hasAttribute('data-disable-invalid') || form.checkValidity()) {\n        // Enable the button\n        button.disabled = false\n      }\n      originalText.delete(button)\n    }\n  }\n}\n\n// Enable controls when AJAX request finishes\non('deprecatedAjaxComplete', 'form', function ({currentTarget, target}) {\n  if (currentTarget === target) {\n    revert(currentTarget as HTMLFormElement)\n  }\n})\n\nafterRemote(revert)\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-feature-preview-indicator-container', container => {\n  fetchFeaturePreviewIndicator(container)\n})\n\ntype FeatureResponse = {\n  show_indicator: boolean\n}\n\n// Load the indicator status and update any indicators on the page.\nasync function fetchFeaturePreviewIndicator(container: Element) {\n  const url = container.getAttribute('data-feature-preview-indicator-src')!\n  const show = await fetchIndicator(url)\n  const indicators = container.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = !show\n  }\n}\n\nasync function fetchIndicator(url: string): Promise<boolean> {\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const json = (await response.json()) as FeatureResponse\n    return json.show_indicator\n  } catch {\n    return false\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {sendStats} from '@github-ui/stats'\n\n/*\n  Opens the feature preview dialog to a given feature specified by it's slug\n\n  <button data-feature-preview-trigger-url=\"<%= feature_previews_path(user_id: login, selected_slug: \"my_feature\") %>\">\n    Opt in to the feature preview for My Feature\n  </button>\n\n  You can react to a feature being enrolled/unenrolled by the user with these events:\n\n  - `feature-preview-enroll:my_feature`\n  - `feature-preview-unenroll:my_feature`\n\n  e.g.\n\n  document.addEventListener('feature-preview-enroll:my_feature', () => {\n    optInButton.hidden = true\n    optOutButton.hidden = false\n  })\n\n  document.addEventListener('feature-preview-unenroll:my_feature', () => {\n    optInButton.hidden = false\n    optOutButton.hidden = true\n  })\n*/\n\non('click', '[data-feature-preview-trigger-url]', async event => {\n  const trigger = event.currentTarget\n  const url = trigger.getAttribute('data-feature-preview-trigger-url')!\n\n  const newDialog = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    dialogClass: 'feature-preview-dialog',\n  })\n\n  const closeDetails = trigger.getAttribute('data-feature-preview-close-details')!\n  const closeHmac = trigger.getAttribute('data-feature-preview-close-hmac')!\n\n  newDialog.addEventListener('dialog:remove', () => {\n    sendStats({hydroEventPayload: closeDetails, hydroEventHmac: closeHmac}, true)\n  })\n\n  const indicators = document.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = true\n  }\n})\n\nremoteForm('.js-feature-preview-unenroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-unenroll:${feature}`)\n})\n\nremoteForm('.js-feature-preview-enroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-enroll:${feature}`)\n})\n","import type {Attachment} from '@github/file-attachment-element'\nimport {sendStats} from '@github-ui/stats'\n\nexport type UploadError = {\n  status: number\n  body: string\n}\n\n// 204 No Content\ntype S3ResponseData = Record<string, unknown>\n\n// 201 Created\ntype EnterpriseResponseData = {\n  id: number\n  href: string\n}\n\ntype UploadResponseData = EnterpriseResponseData | S3ResponseData\n\ntype S3UploadPolicy = {\n  asset_upload_url: string\n  asset_upload_authenticity_token: string\n  upload_authenticity_token: string\n  upload_url: string\n  form: Record<string, string>\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    id: number\n    href: string\n    name: string\n  }\n}\n\ntype EnterpriseUploadPolicy = {\n  upload_authenticity_token: string\n  upload_url: string\n  form: {[key: string]: string}\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    name: string\n  }\n}\n\nexport type UploadPolicyData = S3UploadPolicy | EnterpriseUploadPolicy\n\nexport type AttachmentUploadDelegate = {\n  attachmentUploadDidStart(attachment: Attachment, policy: UploadPolicyData): void\n  attachmentUploadDidProgress(attachment: Attachment, percent: number): void\n  attachmentUploadDidComplete(attachment: Attachment, policy: UploadPolicyData, data: UploadResponseData): void\n  attachmentUploadDidError(attachment: Attachment, error: UploadError): void\n}\n\nexport default class AttachmentUpload {\n  attachment: Attachment\n  policy: UploadPolicyData\n\n  constructor(attachment: Attachment, policy: UploadPolicyData) {\n    this.attachment = attachment\n    this.policy = policy\n  }\n\n  async process(delegate: AttachmentUploadDelegate): Promise<void> {\n    const startTime = window.performance.now()\n    const headers = new Headers(this.policy.header || {})\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('POST', this.policy.upload_url, true)\n\n    for (const [key, value] of headers) {\n      xhr.setRequestHeader(key, value)\n    }\n\n    xhr.onloadstart = () => {\n      delegate.attachmentUploadDidStart(this.attachment, this.policy)\n    }\n\n    xhr.upload.onprogress = e => {\n      if (e.lengthComputable) {\n        const percent = Math.round((e.loaded / e.total) * 100)\n        delegate.attachmentUploadDidProgress(this.attachment, percent)\n      }\n    }\n\n    await send(xhr, uploadForm(this.attachment, this.policy))\n\n    if (xhr.status === 204) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, {})\n    } else if (xhr.status === 201) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, JSON.parse(xhr.responseText))\n    } else {\n      delegate.attachmentUploadDidError(this.attachment, {status: xhr.status, body: xhr.responseText})\n    }\n\n    const endTime = window.performance.now()\n    const timeDiff = endTime - startTime\n    const uploadTiming: PlatformBrowserPerformanceUploadTiming = {\n      duration: timeDiff,\n      size: this.attachment?.file?.size,\n      fileType: this.attachment?.file?.type,\n      success: xhr.status === 204 || xhr.status === 201,\n    }\n    sendStats({uploadTiming}, true)\n  }\n}\n\nfunction send(xhr: XMLHttpRequest, body: FormData): Promise<XMLHttpRequest> {\n  return new Promise((resolve, reject) => {\n    xhr.onload = () => resolve(xhr)\n    xhr.onerror = reject\n    xhr.send(body)\n  })\n}\n\nfunction uploadForm(attachment: Attachment, policy: UploadPolicyData): FormData {\n  const form = new FormData()\n  if (policy.same_origin) {\n    // eslint-disable-next-line github/authenticity-token\n    form.append('authenticity_token', policy.upload_authenticity_token)\n  }\n  for (const key in policy.form) {\n    form.append(key, policy.form[key]!)\n  }\n  form.append('file', attachment.file)\n  return form\n}\n\nfunction markComplete(policy: UploadPolicyData) {\n  // @ts-expect-error `asset_upload_url` is not defined on policy type\n  const url = typeof policy.asset_upload_url === 'string' ? policy.asset_upload_url : null\n  const token =\n    // @ts-expect-error `asset_upload_authenticity_token` is not defined on policy type\n    typeof policy.asset_upload_authenticity_token == 'string' ? policy.asset_upload_authenticity_token : null\n\n  if (!(url && token)) return\n\n  const form = new FormData()\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n\n  fetch(url, {\n    method: 'PUT',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n","import type {Attachment, default as FileAttachmentElement} from '@github/file-attachment-element'\nimport type {AttachmentUploadDelegate, UploadError, UploadPolicyData} from './attachment-upload'\n\nimport AttachmentUpload from './attachment-upload'\nimport type Batch from './batch'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nexport async function upload(batch: Batch, container: FileAttachmentElement) {\n  const delegate = createDelegate(batch, container)\n  for (const attachment of batch.attachments) {\n    const policy = await validate(batch, attachment, container)\n    if (!policy) return\n    try {\n      const uploader = new AttachmentUpload(attachment, policy)\n      await uploader.process(delegate)\n    } catch {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      resetState(container, 'is-failed')\n      return\n    }\n  }\n}\n\nasync function validate(batch: Batch, attachment: Attachment, container: Element): Promise<UploadPolicyData | null> {\n  const form = policyForm(attachment, container)\n  const preprocess: Array<Promise<unknown>> = []\n  fire(container, 'upload:setup', {batch, attachment, form, preprocess})\n\n  try {\n    await Promise.all(preprocess)\n    const response = await fetch(policyRequest(form, container))\n    if (response.ok) {\n      return await response.json()\n    }\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    const body = await response.text()\n    const status = response.status\n    const {state, messaging} = policyErrorState({status, body}, attachment.file)\n    resetState(container, state, messaging)\n  } catch {\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    resetState(container, 'is-failed')\n  }\n  return null\n}\n\nfunction policyForm(attachment: Attachment, container: Element): FormData {\n  const token = container.querySelector<HTMLInputElement>('.js-data-upload-policy-url-csrf')!.value\n  const repoId = container.getAttribute('data-upload-repository-id')\n  const subjectType = container.getAttribute('data-subject-type')\n  const subject = container.getAttribute('data-subject-param')\n  const container_type = container.getAttribute('data-upload-container-type')\n  const container_id = container.getAttribute('data-upload-container-id')\n  const file = attachment.file\n\n  const form = new FormData()\n  form.append('name', file.name)\n  form.append('size', String(file.size))\n  form.append('content_type', file.type)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n  if (subjectType) form.append('subject_type', subjectType)\n  if (subject) form.append('subject', subject)\n  if (repoId) {\n    form.append('repository_id', repoId)\n  }\n  if (attachment.directory) {\n    form.append('directory', attachment.directory)\n  }\n\n  if (container_type) {\n    form.append('upload_container_type', container_type)\n  }\n\n  if (container_type && container_id) {\n    form.append('upload_container_id', container_id)\n  }\n\n  return form\n}\n\nfunction policyRequest(form: FormData, container: Element): Request {\n  return new Request(container.getAttribute('data-upload-policy-url')!, {\n    method: 'POST',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n\nfunction createDelegate(batch: Batch, container: Element): AttachmentUploadDelegate {\n  return {\n    attachmentUploadDidStart(attachment, policy) {\n      attachment.saving(0)\n      resetState(container, 'is-uploading')\n      fire(container, 'upload:start', {batch, attachment, policy})\n    },\n    attachmentUploadDidProgress(attachment, percent) {\n      attachment.saving(percent)\n      fire(container, 'upload:progress', {batch, attachment})\n    },\n    attachmentUploadDidComplete(attachment, policy, result) {\n      attachment.saved(savedAttributes(result, policy))\n      fire(container, 'upload:complete', {batch, attachment})\n      if (batch.isFinished()) {\n        resetState(container, 'is-default')\n      }\n    },\n    attachmentUploadDidError(attachment, response) {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      const {state} = policyErrorState(response)\n      resetState(container, state)\n    },\n  }\n}\n\n// Extracts the uploaded attachment's attributes that reference the stored\n// file on the server. These can come from the upload response in the case of\n// our Enterprise Alambic file server or from the initial policy creation,\n// prior to file upload, in the case of Amazon S3 used by github.com.\nfunction savedAttributes(\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  result: any,\n  policy: UploadPolicyData,\n): {id: string | null; href: string | null; name: string | null} {\n  const id =\n    // @ts-expect-error id is not defined on asset type\n    (result.id == null ? null : String(result.id)) || (policy.asset.id == null ? null : String(policy.asset.id))\n  const href =\n    (typeof result.href === 'string' ? result.href : null) ||\n    // @ts-expect-error href is not defined on asset type\n    (typeof policy.asset.href === 'string' ? policy.asset.href : null)\n  return {id, href, name: policy.asset.name}\n}\n\ntype PolicyErrorMessaging = {\n  message: string\n  target: string\n}\n\ntype PolicyErrorState = {\n  state: string\n  messaging?: PolicyErrorMessaging\n}\n\n// Create a CSS class name that matches the errors coming from the policy\n// POST. The /upload/policies/* resource returns a 422 response with a JSON\n// body describing why the policy is invalid.\nfunction policyErrorState(response: UploadError, file?: File): PolicyErrorState {\n  // Amazon S3 error.\n  if (response.status === 400) {\n    return {state: 'is-bad-file'}\n  }\n\n  if (response.status !== 422) {\n    return {state: 'is-failed'}\n  }\n\n  const hash = JSON.parse(response.body)\n\n  // If we have the expected JSON response with errors key, try to find the right\n  // error message. If there's a server-side error or user got logged out, we\n  // won't have hash.errors, so skip this and return generic failure message.\n  if (!hash || !hash.errors) {\n    return {state: 'is-failed'}\n  }\n\n  for (const error of hash.errors) {\n    switch (error.field) {\n      case 'size': {\n        const size = file ? file.size : null\n        if (size != null && size === 0) {\n          return {state: 'is-empty'}\n        }\n        return {\n          state: 'is-too-big',\n          messaging: {\n            message: trimSizeErrorMessage(error.message),\n            target: '.js-upload-too-big',\n          },\n        }\n      }\n      case 'file_count':\n        return {state: 'is-too-many'}\n      case 'width':\n      case 'height':\n        return {state: 'is-bad-dimensions'}\n      case 'name':\n        if (error.code === 'already_exists') {\n          return {state: 'is-duplicate-filename'}\n        }\n        return {state: 'is-bad-file'}\n      case 'content_type':\n        return {state: 'is-bad-file'}\n      case 'uploader_id':\n        return {state: 'is-bad-permissions'}\n      case 'repository_id':\n        return {state: 'is-repository-required'}\n      case 'format':\n        return {state: 'is-bad-format'}\n    }\n  }\n  return {state: 'is-failed'}\n}\n\n/**\nDue to limitations on the server, size errors may be returned with the string\n'size ' prepended on the error message we want from the server. If the message\nstarts with `size` then chop it off with its leading space and return the error\nwe want from the server.\n\nExamples:\n\n'size Yowza that's a big file' => 'Yowza that's a big file'\n'Yowza that's a big file' => 'Yowza that's a big file'\n */\nconst trimSizeErrorMessage = (message: string) => {\n  return message.startsWith('size') ? message.substring(5) : message\n}\n\nconst possibleStates = [\n  'is-default',\n  'is-uploading',\n  'is-bad-file',\n  'is-duplicate-filename',\n  'is-too-big',\n  'is-too-many',\n  'is-hidden-file',\n  'is-failed',\n  'is-bad-dimensions',\n  'is-empty',\n  'is-bad-permissions',\n  'is-repository-required',\n  'is-bad-format',\n]\n\nexport function resetState(container: Element, state: string, messaging?: PolicyErrorMessaging) {\n  if (messaging) {\n    const {message, target} = messaging\n    const el = container.querySelector(target)\n    if (el) el.innerHTML = message\n  }\n  container.classList.remove(...possibleStates)\n  container.classList.add(state)\n}\n","import type {Attachment} from '@github/file-attachment-element'\n\n// A collection of files to be uploaded together. A batch reports progress of\n// the collection rather than each individual file.\nexport default class Batch {\n  attachments: Attachment[]\n  size: number\n  total: number\n  failedAttachments: Attachment[]\n\n  constructor(attachments: Attachment[]) {\n    this.attachments = attachments\n    this.failedAttachments = []\n\n    // How many total files to upload.\n    this.size = this.attachments.length\n\n    // How many total bytes to upload.\n    this.total = sum(this.attachments, a => a.file.size)\n  }\n\n  // The completion percentage of the batch as a whole.\n  //\n  // Returns a Number between 0 and 100.\n  percent(): number {\n    const bytes = (a: Attachment) => (a.file.size * a.percent) / 100\n    const total = sum(this.attachments, bytes)\n    return Math.round((total / this.total) * 100)\n  }\n\n  uploaded(): number {\n    const value = (a: Attachment) => (a.isSaved() ? 1 : 0)\n    return sum(this.attachments, value)\n  }\n\n  // The completion state of the batch.\n  //\n  // Returns true when all files have been uploaded.\n  isFinished(): boolean {\n    return this.attachments.every(attachment => this.failedAttachments.includes(attachment) || attachment.isSaved())\n  }\n\n  // Mark an attachment as failed in this batch\n  setAttachmentAsFailed(attachment: Attachment) {\n    if (this.attachments.includes(attachment) && !this.failedAttachments.includes(attachment)) {\n      this.failedAttachments.push(attachment)\n    }\n  }\n}\n\nfunction sum<T>(items: T[], map: (item: T) => number): number {\n  return items.reduce((total, item) => total + map(item), 0)\n}\n","import {resetState, upload} from '../upload/batch-upload'\nimport Batch from '../upload/batch'\nimport type FileAttachmentElement from '@github/file-attachment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Synchronize element state with primer styles. This should be replaced with CSS.\nobserve('file-attachment[hover]', {\n  add(el) {\n    el.classList.add('dragover')\n  },\n  remove(el) {\n    el.classList.remove('dragover')\n  },\n})\n\n// Cancel empty drops after filtering out hidden dot files.\non('file-attachment-accept', 'file-attachment', function (event) {\n  const {attachments} = event.detail\n  if (attachments.length === 0) {\n    resetState(event.currentTarget, 'is-hidden-file')\n    event.preventDefault()\n  }\n})\n\n// Upload batched files after passing validation.\non('file-attachment-accepted', 'file-attachment', function (event) {\n  // CodeEditor will hide this element if it wants to handle uploads\n  const dragAndDropLabel = event.currentTarget.querySelector<HTMLElement>('.drag-and-drop')\n  if (dragAndDropLabel && dragAndDropLabel.hidden) {\n    return\n  }\n\n  const {attachments} = event.detail\n  upload(new Batch(attachments), event.currentTarget as FileAttachmentElement)\n})\n\n// Transfer click on button to hidden file input.\non('click', 'button[data-file-attachment-for]', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const inputId = button.getAttribute('data-file-attachment-for')\n  const input = document.querySelector<HTMLInputElement>(`input[type=file]#${inputId}`)!\n  input.click()\n})\n\nlet count = 0\n\nobserve('file-attachment', {\n  add(el) {\n    if (count++ === 0) {\n      document.addEventListener('drop', onDocumentDrop)\n      document.addEventListener('dragover', onDocumentDragover)\n    }\n    const form = el.closest('form')\n    if (form) {\n      form.addEventListener('reset', onFormReset)\n    }\n  },\n  remove(el) {\n    if (--count === 0) {\n      document.removeEventListener('drop', onDocumentDrop)\n      document.removeEventListener('dragover', onDocumentDragover)\n    }\n\n    const form = el.closest('form')\n    if (form) {\n      form.removeEventListener('reset', onFormReset)\n    }\n  },\n})\n\nfunction hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\n// Ignores accidental drops that miss the textarea.\nfunction onDocumentDrop(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Prevent accidental drops until we're over a textarea.\nfunction onDocumentDragover(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Parent form has been reset. Reset uploadable state back to default.\nfunction onFormReset({currentTarget}: Event) {\n  const container = (currentTarget as Element).querySelector<HTMLElement>('file-attachment')!\n  resetState(container, 'is-default')\n}\n","type Predicate = (el: Element, query: string) => boolean | null\ntype Options = {limit?: number | null}\n\nexport function filterList(list: Element, query: string, isVisible: Predicate, options: Options = {}): number {\n  const limit = options.limit ?? Infinity\n  let visible = 0\n  for (const item of list.children) {\n    const show = isVisible(item, query)\n    if (show == null) {\n      // ignore\n    } else if (show && visible < limit) {\n      visible++\n      toggle(item as HTMLElement, true)\n    } else {\n      toggle(item as HTMLElement, false)\n    }\n  }\n  return visible\n}\n\nfunction toggle(el: HTMLElement, show: boolean) {\n  el.style.display = show ? '' : 'none'\n  el.hidden = !show\n}\n","import FilterInputElement from '@github/filter-input-element'\nimport {announce} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('filter-input-updated', 'filter-input', event => {\n  const input = (event.currentTarget as FilterInputElement).input\n  if (!(document.activeElement && document.activeElement === input)) return\n  const {count, total} = event.detail\n  // eslint-disable-next-line i18n-text/no-en\n  announce(`Found ${count} out of ${total} ${total === 1 ? 'item' : 'items'}`)\n})\n\non(\n  'toggle',\n  'details',\n  event => {\n    // Wait for the next click to ensure that focus has left input\n    setTimeout(() => resetFilter(event.target as Element), 0)\n  },\n  {capture: true},\n)\n\non(\n  'tab-container-changed',\n  'tab-container',\n  event => {\n    if (!(event.target instanceof HTMLElement)) return\n    const {relatedTarget: panel} = event.detail\n    const filterInput = event.target.querySelector('filter-input')\n    if (panel && filterInput instanceof FilterInputElement) {\n      filterInput.setAttribute('aria-owns', panel.id)\n    }\n  },\n  {capture: true},\n)\n\nfunction resetFilter(target: Element) {\n  const filterInput = target.querySelector<FilterInputElement>('filter-input')\n  if (filterInput && !target.hasAttribute('open')) {\n    filterInput.reset()\n  }\n}\n","import type {TextScore} from '@github-ui/fuzzy-filter'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {filterSort} from '@github-ui/filter-sort'\n\nconst originalOrder = new WeakMap<Element, HTMLElement[]>()\n\ninterface FilterOptions {\n  limit?: number | null\n  sortKey: (item: HTMLElement) => TextScore | null | undefined\n}\n\n// Filters and sorts list element items against a text query. For use with lists that\n// are already in the DOM, not with lists of results that are changed dynamically\n// via ajax.\n//\n// Returns Number of visible items.\nexport function filterSortList(list: Element, string: string, options: FilterOptions): number {\n  const query = string.toLowerCase()\n  const limit = options.limit\n\n  let allItems = originalOrder.get(list)\n  const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n  const children = Array.from(list.children)\n  if (!allItems) {\n    allItems = Array.from(list.children) as HTMLElement[]\n    originalOrder.set(list, allItems)\n  } else if (list.classList.contains('filter-sort-list-refresh')) {\n    // if we get this class, it means the items in the list might have been changed\n    // in this case, we check if there are new items to be added to the cache\n    // this is the case when creating a new label from the label picker (see app/assets/modules/github/issues/labels.ts)\n    list.classList.remove('filter-sort-list-refresh')\n    const currentItems = Array.from(list.children) as HTMLElement[]\n    for (const currentItem of currentItems) {\n      if (!allItems.includes(currentItem)) {\n        allItems.push(currentItem)\n      }\n    }\n  }\n  for (const item of children) {\n    list.removeChild(item)\n    if (item instanceof HTMLElement) item.style.display = ''\n  }\n\n  const found = query ? filterSort(allItems, options.sortKey, compare) : allItems\n  const limited = limit == null ? found : found.slice(0, limit)\n  const visible = limited.length\n  const results = document.createDocumentFragment()\n  for (const item of limited) {\n    results.appendChild(item)\n  }\n\n  // This ensures that checked input before and after filtering is the same one\n  // See https://github.com/github/github/issues/88129#issuecomment-434839397\n  let inputStateReset = false\n  if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n    for (const checkedInput of results.querySelectorAll('input[type=\"radio\"]:checked')) {\n      if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n        checkedInput.checked = false\n        inputStateReset = true\n      }\n    }\n  }\n\n  list.appendChild(results)\n\n  // Dispatch a change event after render for details-menu or any other code reacting to the input state\n  if (checkedInputBeforeFilter && inputStateReset) {\n    checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n  }\n\n  return visible\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\n// Only login, name & selected are attributes required on both server side and payload rendered elements.\n// IE if we construct a user element from a .js-filterable-suggested-user HTMLElement.\ninterface User {\n  id?: string\n  type?: string\n  login: string\n  name: string\n  selected: boolean\n  disabled?: boolean\n  element?: HTMLElement\n  description?: string\n  avatar?: string\n  class?: string\n  suggestion?: boolean\n}\n\ninterface Data {\n  suggestions: User[]\n  users: User[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: User[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is user.id (as a string) to the rendered element\n  userResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\nasync function getData(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  if (typeAhead && !typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const data = await fetchQueryIfNeeded(list, queryText, typeAhead)\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n\n  if (hasPreRenderedData) {\n    data.suggestions = getPreRenderedUsers(list, typeAhead)\n  }\n\n  return data\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    const trimmedText = queryText.trim()\n    if (typeAheadData.lastSearchText === trimmedText) return typeAheadData.lastSearchResult\n    const isInitialLoad = typeAheadData.lastSearchText === undefined\n    typeAheadData.lastSearchText = trimmedText\n\n    const inputId = list.getAttribute('data-filterable-for') || ''\n    const inputElement = document.getElementById(inputId)\n\n    // Abort any old requests (if any)\n    abortController.abort()\n    if (trimmedText === '') {\n      typeAheadData.lastSearchResult = {suggestions: [], users: []}\n    } else {\n      // Abort controller needs to be re-created, there exists one per abort.\n      abortController = new AbortController()\n      const requestHeaders = {\n        headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n        signal: abortController.signal,\n      }\n\n      const params = url.searchParams || new URLSearchParams()\n      params.set('q', queryText)\n      params.set('typeAhead', 'true')\n      url.search = params.toString()\n\n      if (!isInitialLoad) {\n        inputElement?.classList.add('is-loading')\n      }\n\n      const response = await fetch(url.toString(), requestHeaders)\n      typeAheadData.lastSearchResult = await response.json()\n    }\n\n    inputElement?.classList.remove('is-loading')\n    return typeAheadData.lastSearchResult\n  } else {\n    const requestHeaders = {headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}}\n    const response = await fetch(url.toString(), requestHeaders)\n    return await response.json()\n  }\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-suggested-user`\n// If any are found, they will be added to the API returned data.\n// This users are distinct from the 'suggestions' currently returned through the reviewers API call.\nfunction getPreRenderedUsers(list: Element, typeAhead: boolean): User[] {\n  const data = []\n  // Add all server rendered users to the `suggestions` list (if any).\n  const suggestedUsers = list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (suggestedUsers.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const suggestedUser of list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')) {\n      suggestedUser.classList.remove('js-filterable-suggested-user')\n\n      // Deconstruct the element into a <User> object\n      data.push({\n        name: suggestedUser.querySelector('.js-description')!.textContent!,\n        login: suggestedUser.querySelector('.js-username')!.textContent!,\n        selected: suggestedUser.getAttribute('aria-checked') === 'true',\n        element: suggestedUser,\n        suggestion: true,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    if (suggestedUsers.length > 0) {\n      typeAheadData.cachedSuggestions = data\n      typeAheadData.userResultCache.clear()\n    }\n\n    return typeAheadData.cachedSuggestions\n  }\n\n  return data\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {suggestions: [], users: []},\n    cachedSuggestions: [],\n    userResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function substringMemoryFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  currentQueryForList.set(list, queryText)\n\n  await verifySsoSession()\n\n  const showSuggestionsHeaderOnLoad = list.hasAttribute('data-filterable-show-suggestion-header')\n  const typeAhead = list.hasAttribute('data-filterable-type-ahead')\n\n  let data = cache.get(list)\n\n  if (!data) {\n    try {\n      data = await getData(list, queryText, typeAhead)\n      if (!typeAhead) cache.set(list, data)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // This logic only exists when type-ahead is disabled\n  if (!typeAhead && currentQueryForList.get(list) !== queryText) {\n    return -1\n  }\n\n  const limit = options.limit\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // an index of items already rendered into DOM due to being preselected\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('input[type=hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (typeAhead || el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  let visible = 0\n\n  const queryTextEmpty = queryText.trim() === ''\n  const items = document.createDocumentFragment()\n  const suggestionsDivider = list.querySelector<HTMLElement>('.js-divider-suggestions')\n  const restDivider = list.querySelector<HTMLElement>('.js-divider-rest')\n  const typeAheadData = typeAheadCache.get(list)\n\n  function addItem(user: User) {\n    const containsQueryText = `${user.login} ${user.name}`.toLowerCase().trim().includes(queryText)\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || user.selected || user.suggestion\n    if (shouldGenerate) {\n      const item = createReviewerItem(user, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  let anyVisibleNonSelectedSuggestions = false\n\n  // We show suggestions header if we\n  // 1) Actually have suggestions, or\n  // 2) If we still want to show suggestions title (declared by the attribute), but don't ever have any suggestions\n  // (ie data.suggestions is undefined), the criteria simply becomes whether or not there is any query text.\n  if (suggestionsDivider && (data.suggestions?.length > 0 || (showSuggestionsHeaderOnLoad && data.users.length > 0))) {\n    const suggestions = data.suggestions ?? []\n    const selectedSuggestions = suggestions.filter(u => u.selected)\n    const nonSelectedSuggestions = suggestions.filter(u => !u.selected)\n\n    for (const u of selectedSuggestions) {\n      addItem(u)\n    }\n\n    // Put the suggestions after the already assigned users\n    items.appendChild(suggestionsDivider)\n    const preSuggestionsVisibleCount = visible\n    for (const u of nonSelectedSuggestions) {\n      addItem(u)\n    }\n    anyVisibleNonSelectedSuggestions = visible > preSuggestionsVisibleCount\n\n    suggestionsDivider.hidden = !anyVisibleNonSelectedSuggestions || (typeAhead && !queryTextEmpty)\n\n    // Special case where we want to force show the suggestions header even without suggestions in the payload.\n    if (showSuggestionsHeaderOnLoad && data.users.length > 0) {\n      suggestionsDivider.hidden = !queryTextEmpty\n    }\n  }\n\n  if (restDivider) {\n    items.appendChild(restDivider)\n  }\n\n  const preUsersVisibleCount = visible\n  for (const u of data.users) {\n    addItem(u)\n  }\n\n  if (restDivider) {\n    restDivider.hidden = preUsersVisibleCount === visible || !anyVisibleNonSelectedSuggestions\n  }\n\n  list.append(items)\n  return visible\n}\n\nfunction createReviewerItem(\n  user: User,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (user.element != null) {\n    return user.element\n  }\n\n  if (typeAheadData?.userResultCache.has(user.id!)) {\n    return typeAheadData.userResultCache.get(user.id!)!\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox], input[type=radio]')!\n\n  if (user.type) {\n    input.name = `reviewer_${user.type}_ids[]`\n  }\n  input.value = user.id!\n\n  const inputKey = `${input.name}${user.id}`\n  let selected = user.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey].remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  if (user.disabled) {\n    item.setAttribute('aria-disabled', 'true')\n  }\n\n  const login = li.querySelector('.js-username')\n  if (login) login.textContent = user.login\n  const fullName = li.querySelector('.js-description')\n  if (fullName) fullName.textContent = user.name\n  const description = li.querySelector('.js-extended-description')\n  if (description) {\n    if (user.description) {\n      description.textContent = user.description\n    } else {\n      description.remove()\n    }\n  }\n  const avatar = li.querySelector<HTMLImageElement>('.js-avatar')!\n  avatar.className = `${avatar.className} ${user.class}`\n  avatar.src = user.avatar!\n\n  user.element = item\n\n  typeAheadData?.userResultCache.set(user.id!, item)\n\n  return user.element\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\ninterface Label {\n  id: string\n  name: string\n  htmlName: string\n  color: string\n  selected: boolean\n  element?: HTMLElement\n  description?: string\n}\n\ninterface Data {\n  labels: Label[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: Label[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is label.id (as a string) to the rendered element\n  labelResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function labelsTypeaheadFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  await verifySsoSession()\n\n  currentQueryForList.set(list, queryText)\n  let data = cache.get(list)\n\n  // If we don't have data, fetch it\n  if (!data) {\n    try {\n      data = await getData(list, queryText)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // create an index of items already rendered into DOM - already selected items\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('label[aria-checked=true] > div > input[hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  // create new list of items\n  const items = document.createDocumentFragment()\n  const typeAheadData = typeAheadCache.get(list)\n  const limit = options.limit\n  let visible = 0\n\n  function addItem(label: Label) {\n    const containsQueryText = `${label.name}`.toLowerCase().trim().includes(queryText.toLocaleLowerCase())\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || label.selected\n    if (shouldGenerate) {\n      const item = createLabelItem(label, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  for (const l of data.labels) {\n    addItem(l)\n  }\n\n  // add new items to DOM\n  list.append(items)\n  return visible\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {labels: []},\n    cachedSuggestions: [],\n    labelResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\nasync function getData(list: Element, queryText: string): Promise<Data> {\n  if (!typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n  if (hasPreRenderedData) {\n    return getPreRenderedLabels(list)\n  }\n\n  return await fetchQueryIfNeeded(list, queryText)\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-label`\n// If any are found, they will be added to the API returned data.\nfunction getPreRenderedLabels(list: Element): Data {\n  const data = []\n  // Add all server rendered labels to our data\n  const labels = list.querySelectorAll<HTMLElement>('.js-filterable-label')\n  list.removeAttribute('data-filterable-data-pre-rendered')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (labels.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const renderedLabel of list.querySelectorAll<HTMLElement>('.js-filterable-label')) {\n      renderedLabel.classList.remove('js-filterable-label')\n\n      // Deconstruct the element into a <Label> object\n      data.push({\n        id: renderedLabel.querySelector('input[hidden]')!.getAttribute('value') || '',\n        name: renderedLabel.querySelector('input[hidden]')!.getAttribute('data-label-name') || '',\n        htmlName: renderedLabel.querySelector('.js-label-name-html')!.textContent!,\n        description: renderedLabel.querySelector('.js-label-description')?.textContent || '',\n        color: renderedLabel.querySelector('.js-label-color')!.getAttribute('label-color') || '',\n        selected: renderedLabel.getAttribute('aria-checked') === 'true',\n        element: renderedLabel,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  const typeAheadData = typeAheadCache.get(list)!\n  if (data.length > 0) {\n    typeAheadData.cachedSuggestions = data\n    typeAheadData.lastSearchText = ''\n    typeAheadData.lastSearchResult = {labels: data}\n  }\n\n  return typeAheadData.lastSearchResult\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  const typeAheadData = typeAheadCache.get(list)!\n  const trimmedText = queryText.trim()\n  if (typeAheadData.lastSearchText === trimmedText) {\n    return typeAheadData.lastSearchResult\n  }\n\n  typeAheadData.lastSearchText = trimmedText\n\n  const inputId = list.getAttribute('data-filterable-for') || ''\n  const inputElement = document.getElementById(inputId)\n\n  // Abort any old requests (if any)\n  abortController.abort()\n  // Abort controller needs to be re-created, there exists one per abort.\n  abortController = new AbortController()\n  const requestHeaders = {\n    headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n    signal: abortController.signal,\n  }\n\n  const params = url.searchParams || new URLSearchParams()\n  params.set('q', queryText)\n  params.set('typeAhead', 'true')\n  url.search = params.toString()\n\n  inputElement?.classList.add('is-loading')\n\n  const response = await fetch(url.toString(), requestHeaders)\n  typeAheadData.lastSearchResult = await response.json()\n\n  inputElement?.classList.remove('is-loading')\n  return typeAheadData.lastSearchResult\n}\n\nfunction createLabelItem(\n  label: Label,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (label.element != null) {\n    return label.element\n  }\n\n  const resultCache = typeAheadData?.labelResultCache.get(label.id)\n  if (resultCache) {\n    return resultCache\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox]')!\n\n  input.value = label.id!\n  input.setAttribute('data-label-name', label.name)\n\n  const inputKey = `${input.name}${label.id}`\n  let selected = label.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey].remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  const id = li.querySelector('.js-label-id')\n  if (id) id.setAttribute('data-name', label.id)\n\n  const color = li.querySelector('.js-label-color')\n  if (color) {\n    const newStyle = color.getAttribute('style')?.replace('background-color:', `background-color:#${label.color};`)\n    color.setAttribute('style', newStyle!)\n  }\n\n  const htmlName = li.querySelector('.js-label-name-html')\n  if (htmlName) htmlName.innerHTML = label.htmlName!\n\n  const labelDescription = li.querySelector('.js-label-description')\n  if (labelDescription) {\n    if (label.description) {\n      labelDescription.textContent = label.description\n    } else {\n      labelDescription.remove()\n    }\n  }\n\n  label.element = item\n  typeAheadData?.labelResultCache.set(label.id, item)\n\n  return label.element\n}\n","// Filterable Behavior\n//\n// Automatically filters and sorts a list of items against a text field.\n//\n// Markup\n//\n// * js-filterable-field  - Set on field to enable filtering.\n// * data-filterable-for  - Set to ID of input field to bind too.\n// * data-filterable-type - Filtering type. Either \"prefix\", \"substring\", \"fuzzy\", or \"fuzzy-prio\". Defaults to \"prefix\"\n// The difference between \"fuzzy\" and \"fuzzy-prio\", is the latter supports an additional attribute `data-prio-filter-value`\n// to specify a custom priority value that will be weighted more heavily when determining the score.\n//\n// <input id=\"file-filter-field\" class=\"js-filterable-field\" autocomplete=\"off\">\n//\n// <ul data-filterable-for=\"file-filter-field\" data-filterable-type=\"fuzzy\">\n//   <li>Foo</li>\n//   <li>Bar</li>\n//   <li>Baz</li>\n// </ul>\n//\n//\n// Events\n//\n// filterable:change\n//\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** List container Element\n// * **Context info**\n//   * relatedTarget - Input field Element\n//\n// $('ul').on('filterable:change', function() {\n//   console.log('order changed')\n// })\n//\n\nimport {addThrottledInputEventListener, removeThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {announce} from '@github-ui/aria-live'\nimport {filterList} from '../filter-list'\nimport {filterSortList} from '../filter-sort-list'\nimport {fuzzyScore} from '@github-ui/fuzzy-filter'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {substringMemoryFilterList} from '../substring-memory-filter-list'\nimport {labelsTypeaheadFilterList} from '../labels-typeahead-filter-list'\n\nobserve('.js-filterable-field', {\n  constructor: HTMLInputElement,\n  initialize(field) {\n    if (!field.autocomplete) {\n      field.autocomplete = 'off'\n    }\n\n    // A null value will default to whatever is specified within `throttled-input.ts`\n    const throttleWaitInMs = field.hasAttribute('type-ahead') ? 200 : null\n    let value = field.value\n\n    async function onInputChange(input: HTMLInputElement | HTMLTextAreaElement) {\n      if (value === input.value) return\n      value = input.value\n      await microtask()\n      fire(input, 'filterable:change')\n    }\n\n    async function onFocus() {\n      value = field.value\n      await microtask()\n      fire(field, 'filterable:change')\n    }\n\n    return {\n      add(el) {\n        el.addEventListener('focus', onFocus)\n        addThrottledInputEventListener(el, onInputChange, {wait: throttleWaitInMs})\n        if (document.activeElement === el) onFocus()\n      },\n      remove(el) {\n        el.removeEventListener('focus', onFocus)\n        removeThrottledInputEventListener(el, onInputChange)\n      },\n    }\n  },\n})\n\n// Trigger 'filterable:change' on an input after any\n// direct val() calls\non('filterable:change', '.js-filterable-field', async function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const queryString = target.value.trim().toLowerCase()\n  const filterable = document.querySelectorAll(`[data-filterable-for=\"${target.id}\"]`)\n  for (const list of filterable) {\n    const visible = await filter(list, queryString)\n    if (visible === -1) return\n    if (document.activeElement && target === document.activeElement) {\n      announce(`${visible} results found.`)\n    }\n\n    list.dispatchEvent(\n      new CustomEvent('filterable:change', {\n        bubbles: true,\n        cancelable: false,\n        detail: {\n          inputField: target,\n        },\n      }),\n    )\n  }\n})\n\nfunction defaultText(content: Element): string {\n  return content.hasAttribute('data-filter-value')\n    ? content.getAttribute('data-filter-value')!.toLowerCase().trim()\n    : content.textContent!.toLowerCase().trim()\n}\n\nasync function filter(list: Element, queryString: string): Promise<number> {\n  const limit = parseInt(list.getAttribute('data-filterable-limit')!, 10) || null\n\n  let visible = 0\n  switch (list.getAttribute('data-filterable-type')) {\n    case 'fuzzy-prio': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const prioText = item.getAttribute('data-prio-filter-value')!.toLowerCase().trim()\n        const text = item.textContent!.toLowerCase().trim()\n\n        // Increase the weighting of the score of the custom priority value\n        const prioScore = fuzzyScore(prioText, searchQuery, 0.01) * 2\n        let score = fuzzyScore(text, searchQuery, 0.01)\n        if (prioScore > score) score = prioScore\n\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'fuzzy': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const text = defaultText(item)\n        const score = fuzzyScore(text, searchQuery)\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'substring':\n      visible = filterList(list, queryString.toLowerCase(), substring, {limit})\n      break\n    case 'substring-memory':\n      visible = await substringMemoryFilterList(list, queryString, {limit})\n      break\n    case 'labels-typeahead':\n      visible = await labelsTypeaheadFilterList(list, queryString, {limit})\n      break\n    default:\n      visible = filterList(list, queryString.toLowerCase(), prefix, {limit})\n      break\n  }\n\n  list.classList.toggle('filterable-active', queryString.length > 0)\n  list.classList.toggle('filterable-empty', visible === 0)\n\n  return visible\n}\n\nfunction prefix(el: Element, queryString: string): boolean {\n  return el.textContent!.toLowerCase().trim().startsWith(queryString)\n}\n\n// Does the text of the given element match the given query string?\n//\n// Note: you can add a `data-skip-substring-filter` attribute to exclude an\n// element from substring filtering.\n//\n// Returns Boolean or null, if element cannot be filtered\nfunction substring(el: Element, queryString: string): boolean | null {\n  if (el.hasAttribute('data-skip-substring-filter')) return null\n  if (el.classList.contains('select-menu-no-results')) return null\n  const target = el.querySelector('[data-filterable-item-text]') || el\n  return target.textContent!.toLowerCase().trim().includes(queryString)\n}\n\n// Toggle new create new item form when filter doesn't match any existing items\non('filterable:change', 'details-menu .select-menu-list', function (event) {\n  const list = event.currentTarget\n  const form = list.querySelector('.js-new-item-form')\n\n  if (form) {\n    toggleForm(list, form, event.detail.inputField.value)\n  }\n})\n\nfunction toggleForm(list: Element, form: Element, filterText: string) {\n  const show = filterText.length > 0 && !itemExists(list, filterText)\n  list.classList.toggle('is-showing-new-item-form', show)\n\n  if (!show) return\n\n  form.querySelector<HTMLElement>('.js-new-item-name')!.textContent = filterText\n\n  const item = form.querySelector('.js-new-item-value')\n  if (item instanceof HTMLInputElement || item instanceof HTMLButtonElement) {\n    item.value = filterText\n  }\n}\n\n// Detect if filtered item is already present in the list.\n//\n// container  - filterable list element\n// filterText - String value of filter field\n//\n// Returns true if item already exists, otherwise false.\nfunction itemExists(container: Element, filterText: string): boolean {\n  for (const item of container.querySelectorAll('[data-menu-button-text]')) {\n    const text = (item as HTMLElement).textContent!.toLowerCase().trim()\n    if (text === filterText.toLowerCase()) {\n      return true\n    }\n  }\n  return false\n}\n\n// Hoist empty class to parent for styling.\nobserve('tab-container .select-menu-list .filterable-empty, details-menu .select-menu-list .filterable-empty', {\n  add(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.add('filterable-empty')\n  },\n  remove(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.remove('filterable-empty')\n  },\n})\n","// Installs observer to account for sticky/fixed overlay offsets when navigating\n// to a fragment.\nimport {computeFixedYOffset, scrollToFragmentTarget} from '../sticky-scroll-into-view'\nimport hashChange from './hash-change'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction scrollTargetIntoViewIfNeeded() {\n  const root = <HTMLHtmlElement>document.firstElementChild!\n  if (root.classList.contains('js-skip-scroll-target-into-view')) return\n\n  if (computeFixedYOffset(document)) {\n    scrollToFragmentTarget(document)\n  }\n}\n\nhashChange(scrollTargetIntoViewIfNeeded)\n\non('click', 'a[href^=\"#\"]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  // this defers the execution of scrollTargetIntoViewIfNeeded until after all the click stuff happened, including after scroll\n  setTimeout(scrollTargetIntoViewIfNeeded, 0)\n})\n","import {loaded} from '@github-ui/document-ready'\n\n// Flash\n//\n// Fades out and removes flash element from the page on close.\n//\n// Markup\n//\n//     <div class=\"flash-messages\">\n//       <div class=\"flash\">\n//         <%= octicon('x', :class => 'flash-close js-flash-close') %>\n//         Flash Message\n//       </div>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Only headings and focusable elements are allowed to be passed in as targets,\n// otherwise they won't exist in the allFocusableElements array.\ntype FocusableElementsAndHeadings =\n  | HTMLButtonElement\n  | HTMLAnchorElement\n  | HTMLInputElement\n  | HTMLSelectElement\n  | HTMLTextAreaElement\n  | HTMLHeadingElement\n\n// Ensures that focus is not lost when a user dismisses a flash message.\n// Finds the closest, previous focusable element or <h1> that is not hidden or disabled and moves focus to that element.\n\nconst focusPreviousElementInDOM = (targetElement: FocusableElementsAndHeadings) => {\n  // Get all focusable elements and headings (h1-h3) in the DOM that are not disabled or hidden\n  const allFocusableElementsAndHeadings: FocusableElementsAndHeadings[] = Array.from(\n    document.querySelectorAll(\n      'h1:not([hidden]),h2:not([hidden]),h3:not([hidden]),button:not([disabled]):not([hidden]),a:not([hidden]),input:not([disabled]):not([hidden]), select:not([disabled]):not([hidden]), textarea:not([disabled]):not([hidden]), [tabindex]:not([tabindex=\"-1\"]):not([disabled]):not([hidden])',\n    ),\n  )\n\n  const visibleElements = Array.from(allFocusableElementsAndHeadings).filter(element => {\n    // Check if the element and it's parent element is visible and not disabled or hidden\n    if (\n      !element.getAttribute('aria-hidden') &&\n      !(element.offsetWidth <= 0 && element.offsetHeight <= 0) &&\n      (element?.offsetParent as HTMLElement)?.style.visibility !== 'hidden'\n    ) {\n      return true\n    }\n  })\n\n  const indexOfElement = visibleElements.indexOf(targetElement)\n\n  if (indexOfElement !== -1 && indexOfElement > 0) {\n    // Get the element right before the target element\n    const elementBefore = visibleElements[indexOfElement - 1]\n    // Forces the heading to have a tabindex of -1 so that it can be focused\n    if (\n      elementBefore &&\n      (elementBefore.tagName === 'H1' || elementBefore.tagName === 'H2' || elementBefore.tagName === 'H3')\n    ) {\n      elementBefore.setAttribute('tabindex', '-1')\n    }\n    elementBefore?.focus()\n  }\n}\n\non('click', '.js-flash-close', function (event) {\n  const container = event.currentTarget.closest('.flash-messages')\n\n  const dismissButton = event.target as HTMLButtonElement\n  focusPreviousElementInDOM(dismissButton)\n\n  const flash = event.currentTarget.closest('.flash')\n  flash!.remove()\n\n  if (container && !container.querySelector('.flash')) {\n    container.remove()\n  }\n})\n\n/**\n * Inserts an sr-only span with a non-breaking space into the flash content.\n * The sr-only ensures there are no visual changes.\n/** */\nexport function insertNonBreakingSpace(flashAlertContent: HTMLElement) {\n  const nonBreakingSpace = document.createTextNode('\\u00A0')\n  const span = document.createElement('span')\n  span.classList.add('sr-only')\n  span.appendChild(nonBreakingSpace)\n\n  flashAlertContent.appendChild(span)\n}\n\n/**\n * Contains accessibility logic for server-rendered flash.\n * This JS ensures that the flash content with '.js-flash-alert[role=\"alert\"]' is announced.\n * See: https://github.com/github/accessibility/issues/290\n * Please consult #accessibility if you have any questions.\n */\n;(async function () {\n  await loaded\n\n  const flashAlertContent: HTMLElement | null = document.querySelector('.js-flash-alert[role=\"alert\"]')\n  if (flashAlertContent) {\n    // Delay and non-breaking space to ensure that screen readers announce this alert.\n    setTimeout(() => {\n      insertNonBreakingSpace(flashAlertContent)\n    }, 200)\n  }\n})()\n","import {deleteCookie, getCookies} from '@github-ui/cookies'\nimport {TemplateInstance} from '@github/template-parts'\n\nconst ALLOWED_FLASH_COOKIES = ['flash-notice', 'flash-error', 'flash-message', 'flash-warn']\n\n// Find cookies named something like \"flash-notice\" and render the\n// .js-flash-template template for them.\nexport function displayFlash(el: HTMLTemplateElement) {\n  for (const {key, value} of ALLOWED_FLASH_COOKIES.flatMap(getCookies)) {\n    deleteCookie(key)\n    let message\n    try {\n      message = atob(decodeURIComponent(value))\n    } catch {\n      continue\n    }\n    el.after(new TemplateInstance(el, {className: key, message}))\n  }\n}\n","import {displayFlash} from '../flash'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('template.js-flash-template', {\n  constructor: HTMLTemplateElement,\n  add(el) {\n    displayFlash(el)\n  },\n})\n","// Delayed Focus Events\n//\n// Provides a family cancelable focus/blur that trigger slightly later.\n// This makes it easier to build menus that only display when you are\n// focused in on a field.\n//\n// Events\n//\n// `focusin:delay`\n//\n// Fired when field is being focused for the first time. Will not fire\n// if field is blurred, and refocused in less than 200ms.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** Yes\n// * **Target** Element that is receiving focus.\n//\n// `focusout:delay`\n//\n// Fired when field has been blurred for the first time. Won't fire if\n// the field is not refocused in under 200ms or the `focusout:delay` is\n// canceled.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** Element that is receiving focus.\n//\n// ```javascript\n// on('focusin:delay', function() {\n//   showAutocompletions()\n// })\n//\n// on('focusout:delay', function() {\n//   hideAutocompletions()\n// })\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nconst focused = new WeakMap()\n\n// We use the \"focus\" and \"blur\" event in the capture phase because Firefox\n// historically had a limitation with \"focusin\" and \"focusout\" not bubbling.\ndocument.addEventListener(\n  'focus',\n  function (event: Event) {\n    const target = event.target\n    if (target instanceof Element && !focused.get(target)) {\n      fire(target, 'focusin:delay')\n      focused.set(target, true)\n    }\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'blur',\n  function (event: Event) {\n    setTimeout(function () {\n      const target = event.target\n      if (target instanceof Element && target !== document.activeElement) {\n        fire(target, 'focusout:delay')\n        focused.delete(target)\n      }\n    }, 200)\n  },\n  {capture: true},\n)\n","import {announce} from '@github-ui/aria-live'\nimport {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-form-toggle-target', async function (form, wants) {\n  try {\n    await wants.text()\n  } catch {\n    return\n  }\n\n  const container = form.closest<HTMLElement>('.js-form-toggle-container')!\n  const button = container.querySelector<HTMLElement>('.js-form-toggle-target[hidden]')\n  button!.hidden = false\n  form.hidden = true\n  const feedback = form.getAttribute('data-sr-feedback') || ''\n  feedback && announce(feedback)\n  button?.querySelector<HTMLInputElement>('input[type=submit], button[type=submit]')?.focus()\n})\n","import FuzzyListElement from '../fuzzy-list-element'\nimport {announce} from '@github-ui/aria-live'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction noticeHandler(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  announce(`${event.detail} results found.`)\n}\n\nobserve('fuzzy-list', {\n  constructor: FuzzyListElement,\n  subscribe: fuzzyList => fromEvent(fuzzyList, 'fuzzy-list-sorted', noticeHandler),\n})\n","import {addThrottledInputEventListener} from '../throttled-input'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\n\n// Toggle verify SSL visibility for https web hook URLs\nobserve('.js-hook-url-field', {\n  constructor: HTMLInputElement,\n  add(input) {\n    function checkUrl() {\n      const form = input.form\n      if (!form) return\n      let url\n      try {\n        // eslint-disable-next-line no-restricted-syntax\n        url = new URL(input.value)\n      } catch (e) {\n        // Do nothing.\n      }\n      const sslFields = form.querySelector('.js-ssl-hook-fields')\n      if (sslFields instanceof HTMLElement) {\n        sslFields.hidden = !(url && 'https:' === url.protocol)\n      }\n    }\n\n    addThrottledInputEventListener(input, checkUrl)\n    checkUrl()\n  },\n})\n\nfunction chooseEvents(selector: string): void {\n  const events = document.querySelectorAll<HTMLInputElement>('.js-hook-event-checkbox')\n  for (const eventCheckbox of events) {\n    eventCheckbox.checked = eventCheckbox.matches(selector)\n  }\n}\n\non('change', '.js-hook-event-choice', function (event) {\n  const checkbox = event.currentTarget as HTMLInputElement\n  const customIsSelected = checkbox.checked && checkbox.value === 'custom'\n  const hookEventsField = checkbox.closest('.js-hook-events-field')\n  if (hookEventsField) hookEventsField.classList.toggle('is-custom', customIsSelected)\n\n  const hookEventSelectorCollection = document.getElementsByClassName(\n    'js-hook-event-selector',\n  ) as HTMLCollectionOf<HTMLElement>\n  const hookEventSelector = hookEventSelectorCollection[0] as HTMLElement\n  if (hookEventSelector && customIsSelected) {\n    hookEventSelector.hidden = false\n  } else if (hookEventSelector && !customIsSelected && hookEventSelector.hidden === false) {\n    hookEventSelector.hidden = true\n  }\n\n  if (checkbox.checked) {\n    if (customIsSelected) {\n      const hookWildcardEvent = document.querySelector<HTMLInputElement>('.js-hook-wildcard-event')!\n      hookWildcardEvent.checked = false\n    } else if (checkbox.value === 'push') {\n      chooseEvents('[value=\"push\"]')\n    } else if (checkbox.value === 'all') {\n      chooseEvents('.js-hook-wildcard-event')\n    }\n  }\n})\n\n// Load more delivery logs\non('click', '.js-hook-deliveries-pagination-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  button.disabled = true\n  const wrapper = button.parentElement!\n\n  const url = button.getAttribute('data-url')!\n  wrapper.before(await fetchSafeDocumentFragment(document, url))\n  wrapper.remove()\n})\n\n// Redeliver Payload Button\nremoteForm('.js-redeliver-hook-form', async function (form, wants) {\n  let response\n  try {\n    response = await wants.html()\n  } catch (responseError) {\n    form.classList.add('failed')\n    return\n  }\n\n  // replace the whole deliveries index\n  const deliveriesDetails = document.querySelector<HTMLElement>(`.js-hook-deliveries-container`)!\n  deliveriesDetails.replaceWith(response.html)\n})\n\nfunction registerInsecureSslVerificationDialog() {\n  const dialog = document.getElementById('insecure_ssl_verification') as ModalDialogElement | HTMLDialogElement | null\n  const disallowInsecureRadio = document.getElementById('insecure_ssl_0') as HTMLInputElement | null\n  const allowInsecureRadio = document.getElementById('insecure_ssl_1') as HTMLInputElement | null\n\n  if (dialog && disallowInsecureRadio && allowInsecureRadio) {\n    // on radio buttons, 'change' only fires when they become checked\n    allowInsecureRadio.addEventListener('change', event => {\n      event.stopPropagation()\n      disallowInsecureRadio.checked = true\n      if (dialog instanceof HTMLDialogElement) {\n        dialog.showModal()\n      } else {\n        dialog.show()\n      }\n    })\n\n    dialog.addEventListener('close', () => {\n      allowInsecureRadio.checked = true\n    })\n  }\n}\n\nregisterInsecureSslVerificationDialog()\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Behaviors related to special cases in GFM content\n// Toggles quoted email reply content\non('click', '.email-hidden-toggle', function (event) {\n  // assert nextElementSibling is .email-hidden-reply\n  const replyContainer = event.currentTarget.nextElementSibling\n  if (!(replyContainer instanceof HTMLElement)) return\n\n  replyContainer.style.display = ''\n  replyContainer.classList.toggle('expanded')\n\n  event.preventDefault()\n})\n","import {observeHotkey} from '@github-ui/hotkey/observer'\n\n// calling this here keeps the sideffect in behaviors and out of @github-ui/hotkey\nobserveHotkey('[data-hotkey]')\n","import {loaded} from '@github-ui/document-ready'\nimport {sendPageView} from '@github-ui/hydro-analytics'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {getSoftNavMechanism} from '@github-ui/soft-nav/utils'\n;(async function () {\n  // Turbo loads should be treated like pageloads\n  document.addEventListener(SOFT_NAV_STATE.FRAME_UPDATE, () =>\n    sendPageView({\n      turbo: 'true',\n    }),\n  )\n\n  document.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n    if (getSoftNavMechanism() === 'turbo.frame') {\n      return\n    } else {\n      sendPageView({\n        turbo: 'true',\n      })\n    }\n  })\n\n  // Send a page view as soon as the page is loaded\n  await loaded\n  sendPageView()\n})()\n","import type {Context} from '@github/hydro-analytics-client'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\non('click', '[data-octo-click]', function (event) {\n  const targetEl = event.currentTarget\n  if (!(targetEl instanceof HTMLElement)) {\n    return\n  }\n\n  const eventType = targetEl.getAttribute('data-octo-click') || ''\n  const context: Context = {}\n\n  if (targetEl.hasAttribute('data-ga-click')) {\n    const gaEvent = targetEl.getAttribute('data-ga-click')!\n    const parts = gaEvent.split(',')\n    context.category = parts[0]!.trim()\n    context.action = parts[1]!.trim()\n  }\n\n  if (targetEl.hasAttribute('data-octo-dimensions')) {\n    const dimensionsList = targetEl.getAttribute('data-octo-dimensions')!.split(',')\n\n    for (const dimensionPair of dimensionsList) {\n      const [key, value] = dimensionPair.split(/:(.+)/)\n      if (key) {\n        context[key] = value || ''\n      }\n    }\n  }\n  sendEvent(eventType, context)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendData} from '../hydro-tracking'\nimport {debugHydroPayload} from './console-debug'\n\non('click', '[data-hydro-click]', function (event) {\n  const el = event.currentTarget\n  const payload = el.getAttribute('data-hydro-click') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  debugHydroPayload('hydro-debug.click', payload)\n  sendData(payload, hmac, hydroClientContext)\n})\n","// Handle immediate updates returned from the server on ajax success.\n//\n// See ShowPartial#render_immediate_partials\n\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '@github-ui/updatable-content'\n\nremoteForm('.js-immediate-updates', async function (form, wants) {\n  let updateContent\n\n  try {\n    const response = await wants.json()\n    updateContent = response.json.updateContent\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.json) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      updateContent = error.response.json.updateContent\n    }\n  }\n\n  if (updateContent) {\n    for (const selector in updateContent) {\n      const html = updateContent[selector]\n      const el = document.querySelector(selector)\n      if (el instanceof HTMLElement) {\n        replaceContent(el, html)\n      }\n    }\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('[data-indeterminate]', {\n  constructor: HTMLInputElement,\n  initialize(el) {\n    el.indeterminate = true\n  },\n})\n","import {logPageView} from '../jump-to/page-views'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction load() {\n  import('../jump-to')\n}\n\nobserve('.js-jump-to-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    el.addEventListener('focusin', load, {once: true})\n    logPageView(window.location.pathname)\n  },\n})\n","import {dialog} from '@github-ui/details-dialog'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {isFormField} from '@github-ui/form-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet shortcutModalShown = false\n\nasync function showKeyboardShortcuts() {\n  if (shortcutModalShown) return\n  shortcutModalShown = true\n\n  const metaKeyboardShortcuts = document.querySelector<HTMLMetaElement>('meta[name=github-keyboard-shortcuts]')!\n  const options = {contexts: metaKeyboardShortcuts.content}\n  const url = `/site/keyboard_shortcuts?${new URLSearchParams(options).toString()}`\n\n  const shortcutModal = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    labelledBy: 'keyboard-shortcuts-heading',\n  })\n  shortcutModal.style.width = '800px'\n  shortcutModal.addEventListener(\n    'dialog:remove',\n    function () {\n      shortcutModalShown = false\n    },\n    {once: true},\n  )\n}\n\n// Toggles ajax request to display keyboard shortcuts.\n//\n// Add a class of `js-keyboard-shortcuts` to get this behavior on your page.\non('click', '.js-keyboard-shortcuts', showKeyboardShortcuts)\n\nif (!isFeatureEnabled('react_keyboard_shortcuts_dialog')) {\n  document.addEventListener('keydown', (event: Event) => {\n    if (!(event instanceof KeyboardEvent)) return\n    if (!isShortcutAllowed(event)) return\n\n    if (event.target instanceof Node && isFormField(event.target)) return\n    if (eventToHotkeyString(event) !== 'Shift+?') return\n    showKeyboardShortcuts()\n  })\n}\n\nobserve('.js-modifier-key', {\n  constructor: HTMLElement,\n  add(container) {\n    if (/Macintosh/.test(navigator.userAgent)) {\n      let shortcut = container.textContent\n      if (shortcut) {\n        shortcut = shortcut.replace(/ctrl/, '')\n        shortcut = shortcut.replace(/alt/, '')\n        container.textContent = shortcut\n      }\n    }\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Length-limited input with warning.\n//\n// Limit the length of user input and provide a warning with a character count\n// when the user approaches the length limit.\n//\n// Three classes must be set.\n//  - js-length-limited-input.\n//  - js-length-limited-input-container.\n//  - js-length-limited-input-warning (probably also hidden by default).\n//\n// Two data attributes should be set on .js-length-limited-input:\n//  - data-warning-text, a string template for the warning message.\n//    Use `{{remaining}}` to interpolate the number of characters remaining.\n//  - data-input-max-length.\n//\n// @example\n// ```html\n//    <dd class=\"js-length-limited-input-container\">\n//      <input type=\"text\"\n//             class=\"js-length-limited-input\"\n//             data-warning-text=\"You have {{remaining}} characters remaining\"\n//             data-input-max-length=\"160\">\n//\n//      <p class=\"js-length-limited-input-warning d-none\">\n//      </p>\n//    </dd>\n// ```\nfunction displayLengthWarning(event: Event) {\n  // The user input field (<input>, <textarea>, etc)\n  const inputField = event.currentTarget\n  if (!(inputField instanceof HTMLInputElement || inputField instanceof HTMLTextAreaElement)) return\n\n  // The character limit, set in data attribute \"max-length\"\n  const maxLength = parseInt(inputField.getAttribute('data-input-max-length') || '', 10)\n\n  // The remaining length to start showing the warning for, defaults to 5\n  const warningLength = parseInt(inputField.getAttribute('data-warning-length') || '', 10) || 5\n\n  // The user input field (<input>, <textarea>, etc)\n  const inputValue = inputField.value\n\n  // New lines need to be counted as two characters. They are by the server.\n  const inputValueWithNewLinesFix = inputValue.replace(/(\\r\\n|\\n|\\r)/g, '\\r\\n')\n\n  // Characters remaining before the limit is reached\n  let remainingLength = maxLength - inputValueWithNewLinesFix.length\n\n  // HTML maxLength attribute does not count carriage returns correctly.\n  // It is also inconsistent between Chrome and Firefox\n  // and therefore can't be used bugfree without browser sniffing\n  // Creating our own maxLength implementation instead.\n  if (remainingLength <= 0) {\n    let truncatedInputValue = inputValueWithNewLinesFix.substr(0, maxLength)\n    // Trim trailing \\r so we don't truncate in the middle of a \\r\\n newline\n    if (truncatedInputValue.endsWith('\\r')) {\n      truncatedInputValue = truncatedInputValue.substr(0, maxLength - 1)\n      remainingLength = 1\n    } else {\n      remainingLength = 0\n    }\n    inputField.value = truncatedInputValue\n  }\n\n  // The warning message to display after the remaining character count\n  const warningText = inputField.getAttribute('data-warning-text')!\n\n  // The container enclosing the length-limited input field\n  const inputContainer = inputField.closest<HTMLElement>('.js-length-limited-input-container')!\n\n  // The container for the warning message\n  const warningArea = inputContainer.querySelector<HTMLElement>('.js-length-limited-input-warning')!\n\n  if (remainingLength <= warningLength) {\n    warningArea.textContent = warningText.replace(new RegExp('{{remaining}}', 'g'), `${remainingLength}`)\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.remove('d-none')\n  } else {\n    warningArea.textContent = ''\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.add('d-none')\n  }\n}\n\nobserve('.js-length-limited-input', {\n  add(el) {\n    el.addEventListener('input', displayLengthWarning)\n    el.addEventListener('change', displayLengthWarning)\n  },\n  remove(el) {\n    el.removeEventListener('input', displayLengthWarning)\n    el.removeEventListener('change', displayLengthWarning)\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n\non('click', '.js-member-search-filter', function (event) {\n  event.preventDefault()\n\n  const filter = event.currentTarget.getAttribute('data-filter')!\n  const menu = event.currentTarget.closest<HTMLElement>('[data-filter-on]')!\n  const filterOn = menu.getAttribute('data-filter-on')!\n  const field = document.querySelector<HTMLInputElement>('.js-member-filter-field')!\n\n  // Remove any existing filters on the opened dropdown.\n  const currentValue = field.value\n\n  // Regex allows a-z chars, underscores & strings wrapped in single quotes (required for custom roles)\n  const regex = new RegExp(`${filterOn}:(?:[a-z]|_|((').*(')))+`)\n  const currentFilters = currentValue.toString().trim().replace(regex, '')\n\n  field.value = `${currentFilters} ${filter}`.replace(/\\s\\s/, ' ').trim()\n  field.focus()\n  fire(field, 'input')\n})\n","// Notice Behavior\n//\n// Add basic data-remote success hook for hiding notice on ajax\n// success.\n//\n// Markup\n//\n//     <div class=\"js-notice\">\n//       Hey!\n//       <a href=\"/dismiss\" class=\"js-notice-dismiss\">\n//         Dismiss\n//       </a>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from '../behaviors/ajax-error'\n\nremoteForm('.js-notice-dismiss', async function (form, send) {\n  await send.text()\n  const notice = form.closest<HTMLElement>('.js-notice')!\n  notice.remove()\n})\n\non('submit', '.js-notice-dismiss-remote', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    showGlobalError()\n    return\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  } else {\n    const notice = form.closest<HTMLElement>('.js-notice')!\n    notice.remove()\n  }\n})\n","// If the current page is openable in github.dev, do so on click.\n// This would be achievable without any custom JS by just using\n// data-hotkey except for two things:\n//  - PJAX and other replaceState-triggered location updates like\n//    the `y` hotkey need to be respected.\n//  - the editor cares about the hash of the page.\n// So we'll construct the href client-side.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction isVisible(el: HTMLElement) {\n  try {\n    const rect = el.getBoundingClientRect()\n    if (rect.height === 0 && rect.width === 0) {\n      return false\n    }\n    if (el.style.opacity === '0' || el.style.visibility === 'hidden') {\n      return false\n    }\n  } catch {\n    // fall through to return true below\n  }\n  return true\n}\n\non('click', '.js-github-dev-shortcut', function (event) {\n  event.preventDefault()\n  // If content exists in any visble comment field, prompt before navigating to github.dev\n  for (const el of document.querySelectorAll<HTMLTextAreaElement>('textarea.js-comment-field')) {\n    // eslint-disable-next-line i18n-text/no-en\n    if (el.value && isVisible(el) && !confirm('Are you sure you want to open github.dev?')) {\n      return\n    }\n  }\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n  window.location.href = target.href\n})\n\non('click', '.js-github-dev-new-tab-shortcut', function (event) {\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n})\n","// Append any window.location.hash changes to the permalink.\n//\n// For example, if you're viewing:\n// /github/linguist/blob/master/lib/linguist/languages.yml#L12\n//\n// You probably want the permalink to preserve the #L12, and go to:\n// /github/linguist/blob/SHA/lib/linguist/languages.yml#L12\n//\n//\n// Also update link that we want to keep in sync with the permalink change.\n//\n// For example, if you `y` a Markdown file and click the \"Display as source blob\"\n// button, probably you want its link (href) to change from:\n// /github/linguist/blob/master/README.md?plain=1\n//\n// to:\n// /github/linguist/blob/SHA/README.md?plain=1\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\n\non('click', '.js-permalink-shortcut', function (event) {\n  const target = event.currentTarget as HTMLAnchorElement\n  try {\n    replaceState(null, '', target.href + window.location.hash)\n  } catch (error) {\n    window.location.href = target.href + window.location.hash\n  }\n  for (const element of document.querySelectorAll('.js-permalink-replaceable-link')) {\n    if (element instanceof HTMLAnchorElement) {\n      element.href = element.getAttribute('data-permalink-href')!\n    }\n  }\n  event.preventDefault()\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-permission-menu-form', async function (form, wants) {\n  const success = form.querySelector<HTMLElement>('.js-permission-success')!\n  const error = form.querySelector<HTMLElement>('.js-permission-error')!\n\n  success.hidden = true\n  error.hidden = true\n  form.classList.add('is-loading')\n\n  let response\n  try {\n    response = await wants.json()\n  } catch (e) {\n    // If the request errored, we'll set the error state and return.\n    form.classList.remove('is-loading')\n    error.hidden = false\n    return\n  }\n\n  if (response.status === 200) {\n    const selectPanel = form.querySelector('select-panel, select-panel-experimental')\n    if (selectPanel) {\n      const buttonLabelSpan = form.querySelector('span.Button-label')\n      if (buttonLabelSpan) {\n        buttonLabelSpan.textContent = `Role: ${response.json.action}`\n      }\n    }\n  }\n\n  form.classList.remove('is-loading')\n  success.hidden = false\n\n  const container = form.closest('.js-org-repo')\n  if (container) {\n    const data = response.json\n    container.classList.toggle('with-higher-access', data['members_with_higher_access'])\n  }\n})\n","import {microtask} from '@github-ui/eventloop-tasks'\nimport {sendStats} from '@github-ui/stats'\n\nlet lastTurboRequestUrl: string | null = null\n\n// Collect User Timing metrics so we can track time-to-load on turbo actions\nconst turboMeasure = 'last_turbo_request'\nconst turboStartMark = 'turbo_start'\nconst turboEndMark = 'turbo_end'\n\n// Mark turbo start on performance timeline and save url for last turbo request.\nfunction markTurboStart(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  if (!event.detail?.url || event.defaultPrevented) return\n\n  window.performance.mark(turboStartMark)\n  lastTurboRequestUrl = event.detail.url\n}\n\n// Mark turbo end on performance timeline and report results.\nasync function trackTurboTiming() {\n  await microtask()\n\n  if (!window.performance.getEntriesByName(turboStartMark).length) return\n\n  window.performance.mark(turboEndMark)\n  window.performance.measure(turboMeasure, turboStartMark, turboEndMark)\n  const measures = window.performance.getEntriesByName(turboMeasure)\n\n  const measure = measures.pop()\n  const duration = measure ? measure.duration : null\n  if (!duration) return\n\n  if (lastTurboRequestUrl) {\n    sendStats({\n      requestUrl: lastTurboRequestUrl,\n      turboDuration: Math.round(duration),\n    })\n  }\n  clearTurboMarks()\n}\n\n// Clear turbo marks from performance timeline.\nfunction clearTurboMarks() {\n  window.performance.clearMarks(turboStartMark)\n  window.performance.clearMarks(turboEndMark)\n  window.performance.clearMeasures(turboMeasure)\n}\n\nif ('getEntriesByName' in window.performance) {\n  document.addEventListener('turbo:before-fetch-request', markTurboStart)\n  document.addEventListener('turbo:render', trackTurboTiming)\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('body.js-print-popup', () => {\n  window.print()\n  setTimeout(window.close, 1000)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('poll-include-fragment[data-redirect-url]', function (el) {\n  const url = el.getAttribute('data-redirect-url')!\n  el.addEventListener('load', function () {\n    window.location.href = url\n  })\n})\n\nobserve('poll-include-fragment[data-reload]', function (el) {\n  el.addEventListener('load', function () {\n    window.location.reload()\n  })\n})\n","// Quick submit using -Enter or Ctrl+Enter\n//\n// When `.js-quick-submit` field is focused, -Enter or Ctrl+Enter will submit\n// the form it belongs to unless the first submit button of that form is disabled.\n\nimport {onKey} from '@github-ui/onfocus'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nonKey('keydown', '.js-quick-submit', function (event: KeyboardEvent) {\n  quickSubmit(event)\n})\n\nfunction quickSubmit(event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement | HTMLTextAreaElement\n\n  if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {\n    const form = field.form!\n    const button = form.querySelector('input[type=submit], button[type=submit]')\n    if (event.shiftKey) {\n      const altButton = form.querySelector('.js-quick-submit-alternative')\n      if ((altButton instanceof HTMLInputElement || altButton instanceof HTMLButtonElement) && !altButton.disabled) {\n        requestSubmit(form, altButton)\n      }\n    } else if (button instanceof HTMLInputElement || button instanceof HTMLButtonElement) {\n      if (!button.disabled) {\n        requestSubmit(form)\n      }\n    } else {\n      requestSubmit(form)\n    }\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\nimport {showGlobalError} from '../behaviors/ajax-error'\nimport {parseHTML} from '@github-ui/parse-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst DEBOUNCE_DELAY = 200\nconst resizeObserver = new ResizeObserver(entries => {\n  for (const entry of entries) {\n    // The reaction buttons are 26 +/- 0.1px depending on :shrug:. If the menu overflows it'll go to 2 rows, and be closer to 52px than 26px\n    if (entry.contentRect.height > 40) {\n      hideReactionOverflow(entry.target as HTMLElement)\n    }\n  }\n})\n\nobserve('.js-reactions-container', function (el) {\n  resizeObserver.observe(el)\n})\n\nfunction hideReactionOverflow(reactionContainer: HTMLElement) {\n  const availableWidth = reactionContainer.offsetWidth * 0.7\n  const reactionButtons = reactionContainer.querySelectorAll<HTMLElement>('.js-reaction-group-button')\n  const allReactionsPopover = reactionContainer.querySelector<HTMLElement>('.js-all-reactions-popover')\n\n  let totalButtonWidth = 0\n  for (const button of reactionButtons) {\n    totalButtonWidth += button.clientWidth\n  }\n  totalButtonWidth += allReactionsPopover?.clientWidth || 0\n\n  if (availableWidth < totalButtonWidth) {\n    let remainingWidth = availableWidth\n\n    if (allReactionsPopover) {\n      allReactionsPopover.removeAttribute('hidden')\n      remainingWidth -= allReactionsPopover.offsetWidth\n    }\n\n    for (const button of reactionButtons) {\n      const buttonWidth = button.offsetWidth\n      if (buttonWidth > remainingWidth) {\n        button.setAttribute('hidden', 'hidden')\n      } else {\n        button.removeAttribute('hidden')\n      }\n      remainingWidth -= buttonWidth\n    }\n  }\n}\n\nconst debouncedPickReaction = debounce(async (e: Event) => {\n  const form = e.target as HTMLFormElement\n\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      headers: new Headers({\n        'X-Requested-With': 'XMLHttpRequest',\n      }),\n      body: new FormData(form),\n    })\n  } catch {\n    showGlobalError()\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n\n  if (response && response.status === 200) {\n    const json = await response.json()\n\n    const comment = form.closest<HTMLElement>('.js-comment')\n    const reactionsContainer = comment?.querySelector<HTMLElement>('.js-reactions-container')\n    const reactionsHeader = comment?.querySelector<HTMLElement>('.js-comment-header-reaction-button')\n    if (json && reactionsContainer && reactionsHeader) {\n      const newReactions = parseHTML(document, json['reactions_container'].trim())\n      const newReactionButton = parseHTML(document, json['comment_header_reaction_button'].trim())\n      reactionsContainer.replaceWith(newReactions)\n      reactionsHeader.replaceWith(newReactionButton)\n    }\n    const elementToFocus = comment?.querySelector<HTMLElement>('.js-reactions-focus')\n    if (elementToFocus) elementToFocus.focus()\n  }\n}, DEBOUNCE_DELAY)\n\non('submit', '.js-pick-reaction', e => {\n  e.preventDefault()\n  debouncedPickReaction(e)\n})\n\nfunction showReactionContent(event: MouseEvent) {\n  const target = event.target as HTMLElement\n\n  const label = target.getAttribute('data-reaction-label')!\n  const container = target.closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  if (!description.hasAttribute('data-default-text')) {\n    description.setAttribute('data-default-text', description.textContent || '')\n  }\n\n  description.textContent = label\n}\n\nfunction hideReactionContent(event: MouseEvent) {\n  const container = (event.target as HTMLElement).closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  const defaultText = description.getAttribute('data-default-text')\n  if (defaultText) {\n    description.textContent = defaultText\n  }\n}\n\non(\n  'toggle',\n  '.js-reaction-popover-container',\n  function (event) {\n    const isOpen = event.currentTarget.hasAttribute('open')\n    for (const item of (event.target as Element).querySelectorAll<HTMLElement>('.js-reaction-option-item')) {\n      if (isOpen) {\n        item.addEventListener('mouseenter', showReactionContent)\n        item.addEventListener('mouseleave', hideReactionContent)\n      } else {\n        item.removeEventListener('mouseenter', showReactionContent)\n        item.removeEventListener('mouseleave', hideReactionContent)\n      }\n    }\n  },\n  {capture: true},\n)\n","// Remote\n//\n// Implements `data-remote` for forms.\n//\n//\n// Markup\n//\n// `<form>`\n//\n// ``` definition-table\n// Attribute - Description\n//\n// `data-remote`\n//   Enables remote behavior on the element if set to anything.\n//\n// `method`\n//   Changes the method of the AJAX request. Defaults to `\"get\"`. Maps to\n//   jQuery's [type](http://api.jquery.com/jQuery.ajax/).\n//\n// `action`\n//   URL for AJAX request. Defaults to the current url. Maps to jQuery's\n//   [`url`](http://api.jquery.com/jQuery.ajax/).\n//\n// `data-type`\n//   Specify the data type of the response. Can be `\"xml\"`, `\"json\"`,\n//   `\"script\"`, or `\"html\"`. Defaults to jQuery's *\"intelligent guess\"*\n//   from the response content type. Maps to jQuery's\n//   [`dataType`](http://api.jquery.com/jQuery.ajax/).\n// ```\n//\n// ``` html\n// <form action=\"/comment\" method=\"post\" data-remote></form>\n// ```\n//\n//\n// Events\n//\n// Use delegated jQuery's global AJAX events to handle successful\n// and error states. See jQuery's [AJAX event\n// documentation](http://docs.jquery.com/Ajax_Events) for a complete\n// reference.\n//\n// `deprecatedAjaxSuccess`\n//\n// This event is only called if the request was successful (no errors from the server, no errors with the data).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n// `ajaxError`\n//\n// This event is only called if an error occurred with the request (you can never\n// have both an error and a success callback with a request).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// Extra arguments\n//   `status` - Status response number\n//   `error` - Error message string\n//   `text` - Response text string\n// ```\n//\n// `deprecatedAjaxComplete`\n//\n// This event is called regardless of if the request was successful, or not. You\n// will always receive a complete callback, even for synchronous requests.\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n//     on('deprecatedAjaxSend', '.new-comment', function(event) {\n//        event.currentTarget.classList.add('loading')\n//     })\n//\n//     on('deprecatedAjaxComplete', '.new-comment', function(event) {\n//        event.currentTarget.classList.remove('loading')\n//     })\n//\n//     on('deprecatedAjaxSuccess', '.new-comment', function (event) {\n//        event.currentTarget.classList.add('success')\n//     })\n//\n//     on('deprecatedAjaxError', '.new-comment', function (event) {\n//       alert(\"Something went wrong!\")\n//     })\n//\n//\n// Intercept all form submissions with data-remote and turn\n// it into a XHR request instead.\n\nimport type {Kicker, SimpleRequest, SimpleResponse} from '@github/remote-form'\nimport {afterRemote, beforeRemote, remoteForm} from '@github/remote-form'\nimport {findPersistedSubmitButtonValue, persistSubmitButtonValue} from '@github-ui/form-utils/remote-submit'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport verifySso from '../sso'\nimport {showGlobalError} from './ajax-error'\n\nfunction submitWithLegacyEvents(form: HTMLFormElement, send: Kicker, req: SimpleRequest) {\n  const dataType = form.getAttribute('data-type')\n  if (dataType === 'json') {\n    req.headers.set('Accept', 'application/json')\n  }\n\n  fire(form, 'deprecatedAjaxSend', {request: req})\n\n  send\n    .text()\n    /* eslint-disable-next-line github/no-then */\n    .catch(err => {\n      if (err.response) {\n        return err.response\n      } else {\n        throw err\n      }\n    })\n    /* eslint-disable-next-line github/no-then */\n    .then(\n      (response: SimpleResponse) => {\n        if (response.status < 300) {\n          fire(form, 'deprecatedAjaxSuccess')\n        } else {\n          fire(form, 'deprecatedAjaxError', {error: response.statusText, status: response.status, text: response.text})\n        }\n      },\n      err => {\n        fire(form, 'deprecatedAjaxError', {error: err.message, status: 0, text: null})\n      },\n    )\n    /* eslint-disable-next-line github/no-then */\n    .then(() => {\n      fire(form, 'deprecatedAjaxComplete')\n    })\n}\n\n// Persist submit button value for ALL forms, regardless of whether they are\n// ajax-enabled or not. The submit value is reset after either `deprecatedAjaxComplete`\n// has fired or `remoteForm` has finished processing.\non(\n  'click',\n  ['form button:not([type])', 'form button[type=submit]', 'form input[type=submit]'].join(', '),\n  function (event) {\n    const button = event.currentTarget as HTMLButtonElement | HTMLInputElement\n    const form = button.form\n    if (form && !event.defaultPrevented) {\n      persistSubmitButtonValue(button)\n    }\n  },\n)\n\nremoteForm('form[data-remote]', submitWithLegacyEvents)\n\n// Restore forms after AJAX submissions\non('deprecatedAjaxComplete', 'form', function ({currentTarget}) {\n  const el = findPersistedSubmitButtonValue(currentTarget as HTMLFormElement)\n  if (el) el.remove()\n})\n\nafterRemote(form => {\n  const button = findPersistedSubmitButtonValue(form)\n  if (button) button.remove()\n})\n\nbeforeRemote(verifySso)\n\non('click', '.js-remote-submit-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const form = button.form as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n})\n","// Removed Contents behavior\n//\n// When \"has-removed-contents\" is added to an Element, its contents are\n// detached from the document and stored in memory. Once the class is removed,\n// the original contents are automatically reinserted into the document.\n//\n// WARNING: Adding new content to an Element while it has its contents detatch\n// has undefined behavior.\n//\n// This behavior is useful when working with form with multiple states. Using\n// d-none is only presentational and doesn't exclude the form fields from\n// being submitted or participating in validation requirements.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.has-removed-contents', function () {\n  let contents: ChildNode[]\n  return {\n    add(parent) {\n      contents = Array.from(parent.childNodes)\n      for (const el of contents) {\n        parent.removeChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n    remove(parent) {\n      for (const el of contents) {\n        parent.appendChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n  }\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('form[data-replace-remote-form]', async function (form, wants) {\n  form.classList.remove('is-error')\n  form.classList.add('is-loading')\n  try {\n    let target: Element = form\n\n    const response = await wants.html()\n    const container = form.closest('[data-replace-remote-form-target]')\n    if (container) {\n      const id = container.getAttribute('data-replace-remote-form-target')\n      target = id ? document.getElementById(id)! : container\n    }\n    target.replaceWith(response.html)\n  } catch (e) {\n    form.classList.remove('is-loading')\n    form.classList.add('is-error')\n  }\n})\n","import {sendStats} from '@github-ui/stats'\n\nif (PerformanceObserver && (PerformanceObserver.supportedEntryTypes || []).includes('longtask')) {\n  const observer = new PerformanceObserver(function (list) {\n    const longTasks = list.getEntries().map(({name, duration}) => ({name, duration, url: window.location.href}))\n    sendStats({longTasks})\n  })\n  observer.observe({entryTypes: ['longtask']})\n}\n","import {eventToHotkeyString} from '@github-ui/hotkey'\nimport {insertText} from '@github-ui/text'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '@github-ui/onfocus'\nimport {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\nimport {ready} from '@github-ui/document-ready'\n\non(\n  'click',\n  '.js-saved-reply-menu.ActionListWrap',\n  function (event: Event) {\n    if (!(event.target instanceof Element)) return\n    const body = event.target\n      .closest<HTMLButtonElement>('button[role=\"menuitem\"]')\n      ?.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    event.target.closest<HTMLDialogElement>('dialog, modal-dialog')?.close()\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\non(\n  'details-menu-select',\n  '.js-saved-reply-menu',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const body = event.detail.relatedTarget.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\nonKey('keydown', '.js-saved-reply-shortcut-comment-field', function (event) {\n  if (eventToHotkeyString(event) === 'Control+.') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-previewable-comment-form')!\n    const menu = container.querySelector<HTMLElement>('.js-saved-reply-container')!\n    if (menu instanceof HTMLDialogElement) {\n      menu.showModal()\n    } else if (menu instanceof ModalDialogElement) {\n      menu.show()\n    } else {\n      menu.setAttribute('open', '')\n    }\n    event.preventDefault()\n  }\n})\n\nonKey('keydown', '.js-saved-reply-filter-input', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (/^Control\\+[1-9]$/.test(eventToHotkeyString(event))) {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const savedReplyNumber = Number(event.key)\n    const reply = container.querySelectorAll(`[role=\"menuitem\"][data-shortcut=\"${savedReplyNumber}\"]`)[0]\n    if (reply instanceof HTMLElement) {\n      reply.click()\n      event.preventDefault()\n    }\n  } else if (event.key === 'Enter') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const replies = container.querySelectorAll('[role=\"menuitem\"]')\n\n    if (replies.length > 0 && replies[0] instanceof HTMLButtonElement) {\n      replies[0].click()\n    }\n\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n/* Ensure the filter text field receives focus when the saved replies dialog opens.\n *\n * We want the filter text field to receive focus both\n *   1) after the <include-fragment> is done loading, and\n *   2) when the saved replies dialog opens.\n *\n * The latter may happen before or after the <include-fragment> is done loading. It's necessary to manually focus the\n * text field even though it has its autofocus=\"autofocus\" property set. Chrome occasionally prints the following\n * message to the console: \"Autofocus processing was blocked because a document already has a focused element.\"\n * Manually focusing when the dialog opens appears to fix the issue.\n */\n;(async () => {\n  await ready\n\n  // Once Primer has migrated to <dialog>, this can be replaced by listening for the toggle event.\n  for (const container of document.querySelectorAll('.js-saved-reply-container')) {\n    const observer = new MutationObserver(mutationList => {\n      for (const mutation of mutationList) {\n        if (mutation.type === 'attributes') {\n          if (mutation.attributeName === 'open' && mutation.oldValue === null) {\n            const input = container.querySelector<HTMLElement>('.js-saved-reply-filter-input')\n            if (input) input.focus()\n          }\n        }\n      }\n    })\n\n    observer.observe(container, {attributes: true})\n  }\n\n  const fragments = document.querySelectorAll('.js-saved-reply-include-fragment')\n\n  for (const fragment of fragments) {\n    // grab container before adding listener because the <include-fragment> is removed from\n    // the DOM before the load event is fired\n    const container = fragment.closest<HTMLElement>('.js-saved-reply-container')\n\n    // cannot use on() for this - the load handler is never called\n    fragment.addEventListener('load', () => {\n      if (container) {\n        const input = container.querySelector<HTMLElement>('.js-saved-reply-filter-input')\n        if (input) input.focus()\n      }\n    })\n  }\n})()\n","import type {BlobRange} from '../blob-anchor'\nimport {DOMRangeFromBlob} from '../blob-anchor'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {surroundContents} from '../range'\nimport {GetCharIndexFromBytePosition} from '@github-ui/text'\n\nfunction queryLineElement(snippet: Element, line: number) {\n  return snippet.querySelector(`#LC${line}`)\n}\n\nfunction highlightRange(blobRange: BlobRange, snippet: Element, adjustStart: boolean, adjustEnd: boolean) {\n  const range = DOMRangeFromBlob(blobRange, line => queryLineElement(snippet, line))\n  if (!range) return\n\n  if (adjustStart) {\n    const adjustedStart = GetCharIndexFromBytePosition(range.startContainer.textContent!, range.startOffset)\n    if (adjustedStart === -1) return\n    range.setStart(range.startContainer, adjustedStart)\n  }\n\n  if (adjustEnd) {\n    const adjustedEnd = GetCharIndexFromBytePosition(range.endContainer.textContent!, range.endOffset)\n    if (adjustedEnd === -1) return\n    range.setEnd(range.endContainer, adjustedEnd)\n  }\n\n  const span = document.createElement('span')\n  const highlightClasses = ['text-bold', 'hx_keyword-hl', 'rounded-2', 'd-inline-block']\n\n  span.classList.add(...highlightClasses)\n  surroundContents(range, span)\n}\n\nexport function highlightColumns(blobRange: BlobRange, snippet: Element) {\n  if (blobRange.start.line !== blobRange.end.line) {\n    // highlight first line, and adjust only the start as there may be Unicode characters\n    // preceding the start column\n    const startBlobRange = {\n      start: {line: blobRange.start.line, column: blobRange.start.column},\n      end: {line: blobRange.start.line, column: null},\n    }\n    highlightRange(startBlobRange, snippet, true, false)\n\n    for (let i = blobRange.start.line + 1; i < blobRange.end.line; i += 1) {\n      // highlight middle lines, and do not adjust anything since we're highlighting\n      // the whole line\n      const fullBlobRange = {\n        start: {line: i, column: 0},\n        end: {line: i, column: null},\n      }\n      highlightRange(fullBlobRange, snippet, false, false)\n    }\n\n    // highlight last line, and only adjust the end as there may be Unicode characters\n    // in the middle of the match\n    const endBlobRange = {\n      start: {line: blobRange.end.line, column: 0},\n      end: {line: blobRange.end.line, column: blobRange.end.column},\n    }\n    highlightRange(endBlobRange, snippet, false, true)\n  } else {\n    highlightRange(blobRange, snippet, true, true)\n  }\n}\n\nexport function parseColumnHighlightRange(snippet: Element): BlobRange | null {\n  const startLine = parseInt(snippet.getAttribute('data-start-line')!)\n  const endLine = parseInt(snippet.getAttribute('data-end-line')!)\n  const startColumn = parseInt(snippet.getAttribute('data-start-column')!)\n  // The end column is a special case, as 0 acts as a special value\n  const dataEndColumn = parseInt(snippet.getAttribute('data-end-column')!)\n\n  // Nothing to highlight if start and end lines and start and end cols are the\n  // same, as column ranges are half-open\n  if (startLine === endLine && startColumn === dataEndColumn) return null\n\n  // 0 here indicates that no end column was provided, so the highlight should\n  // continue to the end of the line.\n  // DOMRangeFromBlob will interpret null in a similar way to this.\n  const endColumn = dataEndColumn !== 0 ? dataEndColumn : null\n\n  return {\n    start: {line: startLine, column: startColumn},\n    end: {line: endLine, column: endColumn},\n  }\n}\n\nobserve('.js-highlight-code-snippet-columns', function (snippet: Element) {\n  const blobRange = parseColumnHighlightRange(snippet)\n  if (blobRange !== null) {\n    highlightColumns(blobRange, snippet)\n  }\n})\n","import {getStoredShelfParamsForCurrentPage, storeAndStripShelfParams} from './notification-shelf-referrer-params'\nimport {IncludeFragmentElement} from '@github/include-fragment-element'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {updateNotificationStates} from './update-notification-states'\n\n// Perform an action and change the status of the notification shelf.\nexport async function remoteShelfActionForm() {\n  return remoteForm('.js-notification-shelf .js-notification-action form', async function (form, wants) {\n    const shouldRedirect = form.hasAttribute('data-redirect-to-inbox-on-submit')\n\n    if (shouldRedirect) {\n      await performRequest(wants)\n      const inboxButton = document.querySelector<HTMLAnchorElement>('.js-notifications-back-to-inbox')!\n\n      if (inboxButton) {\n        inboxButton.click()\n      }\n\n      return\n    }\n\n    updateNotificationStates(form, form)\n    await performRequest(wants)\n  })\n}\n\nexport function urlWithoutNotificationParameters() {\n  const searchParams = new URLSearchParams(window.location.search)\n  const cleanSearchParams = storeAndStripShelfParams(searchParams)\n\n  if (cleanSearchParams) {\n    const newUrl = new URL(window.location.href, window.location.origin)\n    newUrl.search = cleanSearchParams.toString()\n    return newUrl.toString()\n  }\n}\n\nexport function loadShelfFromStoredParams(includeFragmentEl: Element) {\n  if (!(includeFragmentEl instanceof IncludeFragmentElement)) {\n    return\n  }\n\n  const params = getStoredShelfParamsForCurrentPage()\n  if (!params) return\n\n  const baseUrl = includeFragmentEl.getAttribute('data-base-src')\n  if (!baseUrl) return\n\n  const shelfURL = new URL(baseUrl, window.location.origin)\n  const searchParams = new URLSearchParams(shelfURL.search)\n\n  for (const [key, value] of Object.entries(params)) {\n    if (typeof value === 'string') searchParams.set(key, value)\n  }\n  shelfURL.search = searchParams.toString()\n  includeFragmentEl.setAttribute('src', shelfURL.toString())\n}\n\n// Submits an AJAX request, but ignores any errors.\nasync function performRequest(wants: Kicker) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // TODO show error message\n  }\n}\n","import {\n  loadShelfFromStoredParams,\n  remoteShelfActionForm,\n  urlWithoutNotificationParameters,\n} from './../notifications/v2/notification-shelf-helpers'\nimport {getStoredShelfParamsForCurrentPage} from './../notifications/v2/notification-shelf-referrer-params'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\nremoteShelfActionForm()\n\n// Remove the notification_referrer_id parameter from the url on page load and on Turbo loads\nfunction removeNotificationParams() {\n  const newUrl = urlWithoutNotificationParameters()\n  if (newUrl) replaceState(null, '', newUrl)\n}\nremoveNotificationParams()\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, removeNotificationParams)\n\n// pass the notifications params through turbo requests so we properly show the shelf\ndocument.addEventListener('turbo:before-fetch-request', function (event) {\n  const params = getStoredShelfParamsForCurrentPage(event.detail.url.pathname)\n\n  if (params) {\n    const newParams = new URLSearchParams(event.detail.url.search)\n    for (const [key, value] of Object.entries<string>(params)) {\n      if (value) {\n        newParams.set(key, value)\n      }\n    }\n    event.detail.url.search = newParams.toString()\n  }\n})\n\nobserve('.js-notification-shelf-include-fragment', loadShelfFromStoredParams)\n\non('submit', '.js-mark-notification-form', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  try {\n    await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n})\n\n// mark related notification as read\nasync function markNotificationAsRead() {\n  await loaded\n\n  const form = document.querySelector('.js-mark-notification-form')\n  if (form instanceof HTMLFormElement) {\n    requestSubmit(form)\n  }\n}\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, markNotificationAsRead)\nmarkNotificationAsRead()\n","import {onFocus, onKey} from '@github-ui/onfocus'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {install, uninstall} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst MD_BREAKPOINT = 768\n\nfunction isJumpToAvailable(field: Element): boolean {\n  return !!field.closest('.js-jump-to-field')\n}\n\nfunction toggleSearchScope(field: HTMLElement, enabled: boolean) {\n  // We don't want legacy search behaviour of changing scope on backspace when using Jump To.\n  if (isJumpToAvailable(field)) {\n    return\n  }\n  const form = document.querySelector<HTMLFormElement>('.js-site-search-form')!\n  document.querySelector<HTMLElement>('.js-site-search')!.classList.toggle('scoped-search', enabled)\n\n  let url\n  let placeholder\n  if (enabled) {\n    url = form.getAttribute('data-scoped-search-url')!\n    placeholder = field.getAttribute('data-scoped-placeholder')!\n  } else {\n    url = form.getAttribute('data-unscoped-search-url')!\n    placeholder = field.getAttribute('data-unscoped-placeholder')!\n  }\n\n  form.setAttribute('action', url)\n  field.setAttribute('placeholder', placeholder)\n}\n\nfunction toggleSearchInputHotkey(element: HTMLElement, isRegularSearchInput: boolean) {\n  if (window.innerWidth < MD_BREAKPOINT) {\n    isRegularSearchInput ? uninstall(element) : install(element)\n  } else if (window.innerWidth >= MD_BREAKPOINT) {\n    isRegularSearchInput ? install(element) : uninstall(element)\n  }\n}\n\nonKey('keyup', '.js-site-search-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  const emptyQuery = field.value.length === 0\n  if (emptyQuery && event.key === 'Backspace' && field.classList.contains('is-clearable')) {\n    toggleSearchScope(field, false)\n  }\n  if (emptyQuery && event.key === 'Escape') {\n    toggleSearchScope(field, true)\n  }\n  field.classList.toggle('is-clearable', emptyQuery)\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonFocus('.js-site-search-focus', function (field) {\n  const container = field.closest<HTMLElement>('.js-chromeless-input-container')\n  if (!container) return\n  container.classList.add('focus')\n  // Restore scope on blur\n  function blurHandler() {\n    container?.classList.remove('focus')\n    if ((field as HTMLInputElement).value.length === 0 && field.classList.contains('js-site-search-field')) {\n      toggleSearchScope(field, true)\n    }\n    field.removeEventListener('blur', blurHandler)\n  }\n  field.addEventListener('blur', blurHandler)\n})\n\non('submit', '.js-site-search-form', function (event) {\n  if (!(event.target instanceof Element)) return\n  const input = event.target.querySelector<HTMLInputElement>('.js-site-search-type-field')!\n  input.value = new URLSearchParams(window.location.search).get('type') || ''\n})\n\nconst observer = new ResizeObserver(entries => {\n  for (const {target} of entries) {\n    const isRegularSearchInput = target.classList.contains('regular-search-input')\n    if (target.classList.contains('sm-search-input') || isRegularSearchInput) {\n      toggleSearchInputHotkey(target as HTMLElement, isRegularSearchInput)\n    }\n  }\n})\n\n// install/uninstall hotkeys on regular search input when screen size reaches medium breakpoint\nobserve('.regular-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\n// install/uninstall hotkeys on search input in collapsed menu when screen size reaches medium breakpoint\nobserve('.sm-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\non('click', '.js-toggle-appheader-search', function () {\n  const searchBar = document.querySelector<HTMLElement>('.js-global-bar-second-row')!\n\n  if (searchBar) {\n    searchBar.toggleAttribute('hidden')\n\n    if (!searchBar.getAttribute('hidden')) {\n      const searchInput = searchBar.querySelector<HTMLInputElement>('.js-site-search-focus')!\n\n      if (searchInput) {\n        searchInput.focus()\n      }\n    }\n  }\n})\n","// Size to Fit textarea behavior\n//\n// Auto sizes any textareas marked with `.js-size-to-fit` to its text\n// contents height.\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/textarea-autosize'\n\nobserve('textarea.js-size-to-fit', {\n  constructor: HTMLTextAreaElement,\n  subscribe,\n})\n","/**\n * Smooth scrolling anchor.\n *\n * Have an in-page anchor link and want the page to smoothly scroll to its destination? Look no further.\n *\n * Apply the `.js-smoothscroll-anchor` on the anchor tag to trigger smooth scrolling.\n *\n * This will override the default behavior of jumping the page to the element targeted by the hash in the `href`\n * and instead smoothly scroll to it. No additional CSS is required.\n *\n * @deprecated Replace this behavior with `scroll-behavior: smooth;`\n *   https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior.\n *\n * @example\n * ```html\n * <a href=\"#some-id\" class=\"js-smoothscroll-anchor\">Scroll to #some-id</a>\n * <div id=\"some-id\" style=\"margin-top: 300px;\">\n *   <h3>Scroll to me</h3>\n * </div>\n * ```\n */\n\nimport {findFragmentTarget} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-smoothscroll-anchor', function (event) {\n  const anchor = event.currentTarget\n  if (!(anchor instanceof HTMLAnchorElement)) return\n\n  const target = findFragmentTarget(document, anchor.hash)\n  if (!target && anchor.hash === '#top') {\n    // When navigating to the top of the page, reset the URL hash to clear `:target`\n    // pseudo-classes on page elements, then smooth scroll to the top of the page.\n    const top = document.querySelector('html')\n    if (top) {\n      const originalScroll = top.style.scrollBehavior\n      top.style.scrollBehavior = 'smooth'\n      window.location.hash = ''\n      top.scrollIntoView({behavior: 'smooth'})\n      top.style.scrollBehavior = originalScroll\n      event.preventDefault()\n      return\n    }\n  }\n  if (!target) return\n  ;(target as HTMLElement).focus()\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n\n  if (prefersReducedMotion && prefersReducedMotion.matches) {\n    target.scrollIntoView()\n  } else {\n    target.scrollIntoView({behavior: 'smooth'})\n  }\n\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst hiddenTimePeriodOnScrollInMs = 1000\n\nconst abortControllers = new WeakMap()\n\nconst snippetClipboardCopyTemplate = document.querySelector<HTMLTemplateElement>('#snippet-clipboard-copy-button')\nconst snippetClipboardCopyTemplateUnpositioned = document.querySelector<HTMLTemplateElement>(\n  '#snippet-clipboard-copy-button-unpositioned',\n)\n\nasync function insertSnippetClipboardCopyButton(el: HTMLElement, signal: AbortSignal): Promise<void> {\n  const clipboardContent = el.getAttribute('data-snippet-clipboard-copy-content')\n  if (clipboardContent === null) return\n\n  // Remove this attribute so that we don't add a second button.\n  el.removeAttribute('data-snippet-clipboard-copy-content')\n\n  const useUnpositioned = !!el.closest('.js-snippet-clipboard-copy-unpositioned')\n  const template = useUnpositioned ? snippetClipboardCopyTemplateUnpositioned : snippetClipboardCopyTemplate\n\n  if (!(template instanceof HTMLTemplateElement)) return\n\n  const documentFragment = template.content.cloneNode(true) as DocumentFragment\n\n  const clonedZeroClipboardContainer = documentFragment.children[0]\n  if (!(clonedZeroClipboardContainer instanceof HTMLElement)) return\n\n  const clipboardCopyElement = clonedZeroClipboardContainer.children[0]\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n\n  clipboardCopyElement.setAttribute('value', clipboardContent)\n\n  if (!useUnpositioned) {\n    document.addEventListener(\n      'selectionchange',\n      () => {\n        const selection = document.getSelection()\n        if (selection && el.contains(selection.anchorNode)) {\n          const selectedText = selection?.toString()\n          clipboardCopyElement.style.display = selectedText.trim() === '' ? 'inherit' : 'none'\n        }\n      },\n      {signal},\n    )\n\n    const scrollableElement = el.querySelector('pre')\n    if (scrollableElement !== null) {\n      let timer: ReturnType<typeof setTimeout> | undefined\n\n      /* eslint-disable-next-line github/prefer-observers */\n      scrollableElement.addEventListener(\n        'scroll',\n        () => {\n          if (timer) clearTimeout(timer)\n\n          clipboardCopyElement.style.display = 'none'\n          timer = setTimeout(() => {\n            clipboardCopyElement.style.display = 'inherit'\n          }, hiddenTimePeriodOnScrollInMs)\n        },\n        {signal},\n      )\n    }\n  }\n\n  el.appendChild(clonedZeroClipboardContainer)\n}\n\nobserve('[data-snippet-clipboard-copy-content]', {\n  constructor: HTMLElement,\n  add(el) {\n    const abortController = new AbortController()\n    abortControllers.set(el, abortController)\n\n    insertSnippetClipboardCopyButton(el, abortController.signal)\n  },\n})\n\nobserve('.snippet-clipboard-content clipboard-copy', {\n  constructor: HTMLElement,\n  remove(el) {\n    const controller = abortControllers.get(el)\n    if (controller) {\n      controller.abort()\n    }\n  },\n})\n","// Social Buttons\n//\n// Behavior for the Watch, Fork, and Star buttons within repo nav.\n//\n// Expects the JSON response to a .js-social-form XHR request to be in this format:\n//\n// On success:\n//\n// { \"count\": \"1,234\" }\n//\n// Count is formatted with delimiters. The social count in any .js-social child of .js-social-container will be updated\n// to the new value.\n//\n// If the form is annotated with the .js-deferred-toggler-target class, the .js-toggler container will have its state\n// toggled after the successful response has arrived (and not optimistically as .js-toggler-target behaves).\n//\n// Any .js-social-updatable child of .js-social-container with a data-url will also be re-fetched and updated with new\n// content.\n//\n// The container will look for the first visible child\n// and place the focus on its submit button.\n//\n// Failure cases:\n//\n// 409 Conflict - indicates that the user needs to confirm the social action in a dialog.\n//\n// {\n//   \"confirmationDialog\": {\n//     \"templateSelector\": \"[CSS selector to find DOM element containing <template> for dialog contents]\",\n//     \"inputs\": { \"arbitraryTemplateParts\": \"...\" }\n//   }\n// }\n//\n// Any other 4xx or 5xx error will result in a generic global error being shown.\n\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '@github-ui/updatable-content'\n\nfunction handleSocialResponse(container: HTMLElement, newCount: string, isDeferredTogglerTarget: boolean) {\n  updateSocialCounts(container, newCount)\n  if (isDeferredTogglerTarget) container.classList.toggle('on')\n\n  const updatePromises = Array.from(container.querySelectorAll<HTMLElement>('.js-social-updatable'), el =>\n    updateContent(el),\n  )\n  return Promise.all(updatePromises)\n}\n\nfunction replaceIncomingFocus(container: HTMLElement) {\n  let focusOn\n  const children = container.querySelectorAll<HTMLElement>(':scope > *')\n  for (const el of children) {\n    let visible = false\n    if (el.checkVisibility) {\n      visible = el.checkVisibility()\n    } else {\n      // Do a more basic visibility check in browsers that don't support checkVisibility like Safari.\n      const style = window.getComputedStyle(el)\n      visible = style.display !== 'none' && style.visibility !== 'hidden'\n    }\n    if (visible) {\n      focusOn = el.querySelector('button[type=\"submit\"]') as HTMLElement\n    }\n  }\n  focusOn?.focus()\n}\n\nremoteForm('.js-social-form', async function (form, wants) {\n  let response: SimpleResponse\n  const container = form.closest<HTMLElement>('.js-social-container')\n  const isDeferredTogglerTarget = form.classList.contains('js-deferred-toggler-target')\n\n  try {\n    response = await wants.json()\n\n    if (container) {\n      await handleSocialResponse(container, response.json.count, isDeferredTogglerTarget)\n      replaceIncomingFocus(container)\n\n      container.dispatchEvent(new CustomEvent('social:success', {detail: response, bubbles: true}))\n    }\n  } catch (e) {\n    // 409 Conflict: the user needs to accept a confirmation dialog. Find its template and trigger it.\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (e.response?.status === 409 && e.response.json.confirmationDialog) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      const dialogPayload = e.response.json.confirmationDialog\n      const confirmationDialogTemplate = document.querySelector<HTMLTemplateElement>(dialogPayload.templateSelector)\n      const confirmCsrfToken = form.querySelector<HTMLInputElement>('.js-confirm-csrf-token')?.value\n\n      if (confirmationDialogTemplate instanceof HTMLTemplateElement && confirmCsrfToken) {\n        const content = new TemplateInstance(confirmationDialogTemplate, {\n          confirmUrl: form.action,\n          confirmCsrfToken,\n          ...(dialogPayload.inputs || {}),\n        })\n        const dialogElement = await dialog({content})\n\n        dialogElement.addEventListener('social-confirmation-form:success', async event => {\n          if (!(event instanceof CustomEvent)) return\n          if (container) await handleSocialResponse(container, event.detail.count, isDeferredTogglerTarget)\n        })\n\n        dialogElement.addEventListener('social-confirmation-form:error', () => {\n          showGlobalError()\n        })\n      }\n    } else {\n      // If the social form is also a toggler, but *not* a deferred one, it was optimistically toggled on click. Because\n      // the action failed, we need to toggle it back off here so it won't be in an incorrect state.\n      if (container && !isDeferredTogglerTarget) container.classList.toggle('on')\n\n      showGlobalError()\n    }\n  }\n})\n\nremoteForm('.js-social-confirmation-form', async function (form, wants) {\n  try {\n    const response = await wants.json()\n    fire(form, 'social-confirmation-form:success', response.json)\n  } catch {\n    fire(form, 'social-confirmation-form:error')\n  }\n})\n\nexport function updateSocialCounts(container: HTMLElement, newCount: string) {\n  for (const count of container.querySelectorAll('.js-social-count')) {\n    count.textContent = newCount\n    count.setAttribute('title', newCount)\n\n    const singularSuffix = count.getAttribute('data-singular-suffix')\n    const pluralSuffix = count.getAttribute('data-plural-suffix')\n    const suffix = newCount === '1' ? singularSuffix : pluralSuffix\n\n    if (suffix) {\n      count.setAttribute('aria-label', `${newCount} ${suffix}`)\n    }\n  }\n  for (const count of container.querySelectorAll('.btn-with-aria-count')) {\n    const prefix = count.getAttribute('data-aria-prefix')\n\n    if (prefix) {\n      count.setAttribute('aria-label', `${prefix} (${newCount})`)\n    }\n  }\n}\n","import {getSession, type Dispatchable} from '@github-ui/alive'\nimport type {Metadata, MetadataUpdate, Subscription} from '@github/alive-client'\nimport {IDLE_METADATA_KEY, Topic, isPresenceChannel} from '@github/alive-client'\nimport {compose, fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {taskQueue} from '@github-ui/eventloop-tasks'\nimport {addIdleStateListener} from '../alive/idle-state'\n\nfunction isPresent(value: Topic | null): value is Topic {\n  return value != null\n}\n\nfunction subscriptions(el: Element): Array<Subscription<Dispatchable>> {\n  return channels(el).map((topic: Topic) => ({subscriber: el, topic}))\n}\n\nfunction channels(el: Element): Topic[] {\n  const names = (el.getAttribute('data-channel') || '').trim().split(/\\s+/)\n  return names.map(Topic.parse).filter(isPresent)\n}\n\nasync function watchSocketChannels() {\n  const session = await getSession()\n\n  if (!session) {\n    return\n  }\n\n  type Subs = Array<Subscription<Dispatchable>>\n  const queueSubscribe = taskQueue<Subs>(subs => session.subscribe(subs.flat()))\n  const queueUnsubscribe = taskQueue<Dispatchable>(els => session.unsubscribeAll(...els))\n  const queueMetadata = taskQueue<MetadataUpdate<Dispatchable>>(updates => session.updatePresenceMetadata(updates))\n\n  observe('.js-socket-channel[data-channel]', {\n    subscribe: el => {\n      const elementSubscriptions = subscriptions(el)\n      const presenceChannels = elementSubscriptions\n        .map(subscription => subscription.topic.name)\n        .filter(channelName => isPresenceChannel(channelName))\n\n      let listenerSubscription = {\n        unsubscribe() {\n          // nothing to clean up by default.  This will be overridden if there are presence channels\n        },\n      }\n\n      if (presenceChannels.length) {\n        let latestMetadata: Metadata | undefined = undefined\n        let latestIdle: boolean | undefined\n        const queueMetadataOrIdleChange = () => {\n          const metadata: Metadata[] = []\n\n          // combine metadata and idle values\n          if (latestMetadata) {\n            metadata.push(latestMetadata)\n          }\n          if (latestIdle !== undefined) {\n            metadata.push({[IDLE_METADATA_KEY]: latestIdle ? 1 : 0})\n          }\n\n          // Send the metadata to all presence channels on this element\n          for (const channelName of presenceChannels) {\n            queueMetadata({subscriber: el, channelName, metadata})\n          }\n        }\n\n        listenerSubscription = compose(\n          // listen for metadata updates emitted on the element\n          fromEvent(el, 'socket:set-presence-metadata', (e: Event) => {\n            const {detail} = e as CustomEvent\n            latestMetadata = detail\n            queueMetadataOrIdleChange()\n          }),\n          // listen for idle changes, which will cause us to send a metadata update\n          addIdleStateListener(idle => {\n            latestIdle = idle\n            queueMetadataOrIdleChange()\n          }),\n        )\n      }\n\n      // Process normal subscriptions after setting up metadata listeners\n      // This needs to come second so that idle state is ready when we subscribe\n      queueSubscribe(elementSubscriptions)\n\n      return listenerSubscription\n    },\n    remove: el => queueUnsubscribe(el),\n  })\n}\n\nwatchSocketChannels()\n","// Detects signout/signin events via `flash[:stale_session_signedin]` and\n// notifies other browser tabs so that they can:\n//\n// 1. display the \"You signed out in another tab\" banner; and\n// 2. disable pjaxing and form submission.\n//\n// On browsers that don't support BroadcastChannel, the `logged-in`\n// localStorage key is used to send messages between tabs.\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction sessionChanged(reason: string) {\n  const flash = document.querySelector<HTMLElement>('.js-stale-session-flash')!\n  const flashSignedIn = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-in')!\n  const flashSignedOut = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-out')!\n  const flashSwitched = flash.querySelector<HTMLElement>('.js-stale-session-flash-switched')!\n\n  flash.hidden = false\n  flashSignedIn.hidden = reason !== 'SIGNED_IN'\n  flashSignedOut.hidden = reason !== 'SIGNED_OUT'\n  flashSwitched.hidden = !reason?.startsWith('SWITCHED')\n\n  if (reason?.startsWith('SWITCHED:')) {\n    const switchedDetail = reason.split(':')\n    if (switchedDetail.length === 3) {\n      const from = switchedDetail[1]\n      const to = switchedDetail[2]\n      const originalUserId = flashSwitched.getAttribute('data-original-user-id')\n      if (originalUserId && originalUserId === to) {\n        flash.hidden = true\n        flashSwitched.hidden = true\n        flashSwitched.removeAttribute('data-original-user-id')\n      } else if (!originalUserId) {\n        flashSwitched.setAttribute('data-original-user-id', from || '')\n      }\n    }\n  }\n\n  window.addEventListener('popstate', function (event: PopStateEvent) {\n    if (event.state && event.state.container != null) {\n      location.reload()\n    }\n  })\n\n  document.addEventListener('submit', function (event: Event) {\n    event.preventDefault()\n  })\n}\n\nlet bc: Pick<BroadcastChannel, 'postMessage' | 'onmessage'> | null = null\nif (typeof BroadcastChannel === 'function') {\n  try {\n    bc = new BroadcastChannel('stale-session')\n    bc.onmessage = event => {\n      if (typeof event.data === 'string') sessionChanged(event.data)\n    }\n  } catch {\n    // ignore\n  }\n}\nif (!bc) {\n  let postingMessage = false\n\n  bc = {\n    postMessage(message: string) {\n      postingMessage = true\n      try {\n        window.localStorage.setItem('logged-in', message)\n      } finally {\n        postingMessage = false\n      }\n    },\n    onmessage: null,\n  }\n\n  window.addEventListener('storage', function (event) {\n    /* eslint eslint-comments/no-use: off */\n    /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n    if (!postingMessage && event.storageArea === window.localStorage && event.key === 'logged-in') {\n      try {\n        if (\n          event.newValue === 'SIGNED_IN' ||\n          event.newValue === 'SIGNED_OUT' ||\n          event.newValue?.startsWith('SWITCHED')\n        ) {\n          sessionChanged(event.newValue)\n        }\n      } finally {\n        window.localStorage.removeItem(event.key)\n      }\n    }\n    /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n  })\n}\n\nconst element = document.querySelector('.js-stale-session-flash[data-signedin]')\nif (element) {\n  const value = element.getAttribute('data-signedin') || ''\n  bc?.postMessage(value)\n}\n\nconst broadcastMsgOnSignOut = () => {\n  bc?.postMessage('false')\n}\n\nobserve('.js-loggout-form', function (el: Element) {\n  el.addEventListener('submit', broadcastMsgOnSignOut)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nobserve('form.js-auto-replay-enforced-sso-request', {\n  constructor: HTMLFormElement,\n  initialize(el) {\n    requestSubmit(el)\n  },\n})\n","import {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport verifySsoSession from '../sso'\n\nfunction updateStatusPosition(container: Element, menu: HTMLElement, details: Element) {\n  const containerHeight = container.getBoundingClientRect().height\n  const menuRect = menu.getBoundingClientRect()\n  const iconRect = details.getBoundingClientRect()\n  let top = iconRect.top\n  // Ensure popover stays off the bottom of the page by at least 10 pixels\n  if (top + menuRect.height + 10 >= containerHeight) {\n    top = Math.max(containerHeight - menuRect.height - 10, 0)\n  }\n  let left = iconRect.right\n  // Show popover to the left\n  if (details.closest('.js-build-status-to-the-left') != null) {\n    left = Math.max(iconRect.left - menuRect.width - 10, 0)\n  }\n  menu.style.top = `${top}px`\n  menu.style.left = `${left}px`\n  menu.style.right = 'auto'\n}\n\non(\n  'toggle',\n  '.js-build-status .js-dropdown-details',\n  function (event) {\n    const details = event.currentTarget\n    const menu = details.querySelector<HTMLElement>('.js-status-dropdown-menu')\n    if (!menu) return\n\n    function closeOnToggle() {\n      if (!details.hasAttribute('open')) closeStatusPopover()\n    }\n\n    function closeOnScroll(scrollEvent: Event) {\n      if (!menu!.contains(scrollEvent.target as Element)) closeStatusPopover()\n    }\n\n    function closeStatusPopover() {\n      details.removeAttribute('open')\n      /* eslint-disable-next-line github/no-d-none */\n      menu!.classList.add('d-none')\n      details.appendChild(menu!)\n      details.removeEventListener('toggle', closeOnToggle)\n      window.removeEventListener('scroll', closeOnScroll)\n    }\n\n    details.addEventListener('toggle', closeOnToggle)\n\n    if (menu.classList.contains('js-close-menu-on-scroll')) {\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('scroll', closeOnScroll, {capture: true})\n    }\n\n    /* eslint-disable-next-line github/no-d-none */\n    menu.classList.remove('d-none')\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (menu.classList.contains('js-append-menu-to-body')) {\n      // Move menu to body so it can overlay on top of other elements\n      document.body.appendChild(menu)\n      updateStatusPosition(document.body, menu, details)\n    }\n  },\n  {capture: true},\n)\n\nasync function loadStatus(el: Element) {\n  const details = el.querySelector('.js-dropdown-details')\n  const menu = el.querySelector('.js-status-dropdown-menu') || el.closest('.js-status-dropdown-menu')\n\n  if (!(menu instanceof HTMLElement)) {\n    // Status does not have an associated dropdown menu\n    return\n  }\n\n  const loader = menu.querySelector('.js-status-loader')\n  if (!loader) {\n    return\n  }\n\n  const loadingArea = menu.querySelector<HTMLElement>('.js-status-loading')!\n  const errorArea = menu.querySelector<HTMLElement>('.js-status-error')!\n\n  const url = loader.getAttribute('data-contents-url')!\n\n  /* eslint-disable-next-line github/no-d-none */\n  loadingArea.classList.remove('d-none')\n  /* eslint-disable-next-line github/no-d-none */\n  errorArea.classList.add('d-none')\n\n  let html\n  try {\n    await verifySsoSession()\n    html = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    /* eslint-disable-next-line github/no-d-none */\n    loadingArea.classList.add('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    errorArea.classList.remove('d-none')\n  }\n\n  if (html) {\n    loader.replaceWith(html)\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (details && menu.classList.contains('js-append-menu-to-body')) {\n      updateStatusPosition(document.body, menu, details)\n    }\n  }\n}\n\non('click', '.js-status-retry', ({currentTarget}) => {\n  loadStatus(currentTarget)\n})\n\nfunction onMouseEnter(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  loadStatus(currentTarget)\n}\n\nobserve('.js-build-status', {\n  add(el) {\n    el.addEventListener('mouseenter', onMouseEnter, {once: true})\n  },\n  remove(el) {\n    el.removeEventListener('mouseenter', onMouseEnter)\n  },\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on, fire} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport sudo from '@github-ui/sudo'\n\non('click', 'button[data-sudo-required], summary[data-sudo-required]', checkSudo)\nobserve('form[data-sudo-required]', {\n  constructor: HTMLFormElement,\n  subscribe: form => fromEvent(form, 'submit', checkSudo),\n})\n\nasync function checkSudo(event: Event) {\n  const currentTarget = event.currentTarget\n  if (!(currentTarget instanceof HTMLElement)) return\n  const sudoRequired = currentTarget.getAttribute('data-sudo-required')\n  if (sudoRequired === 'false') return\n\n  event.stopPropagation()\n  event.preventDefault()\n\n  const sudoPassed = await sudo(currentTarget)\n\n  if (sudoPassed) {\n    currentTarget.removeAttribute('data-sudo-required')\n    if (currentTarget instanceof HTMLFormElement) {\n      requestSubmit(currentTarget)\n    } else {\n      currentTarget.click()\n    }\n  } else {\n    // revert the disable-with state for the button which required sudo to handle case where sudo dialog is canceled and button was still disabled.\n    const form = currentTarget.closest('form')\n    if (form) {\n      fire(form, 'deprecatedAjaxComplete')\n    }\n  }\n}\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction getValue(el: Element): string | undefined | null {\n  if (el.hasAttribute('data-use-colon-emoji')) {\n    return el.getAttribute('data-value')\n  }\n\n  const emojiEl = el.firstElementChild\n  if (emojiEl && 'G-EMOJI' === emojiEl.tagName && !emojiEl.firstElementChild) {\n    return emojiEl.textContent\n  } else {\n    return el.getAttribute('data-value')\n  }\n}\n\nfunction search(items: Element[], searchQuery: string): Element[] {\n  const query = ` ${searchQuery.toLowerCase().replace(/_/g, ' ')}`\n  const key = (item: Element) => {\n    const text = item.getAttribute('data-emoji-name')!\n    const score = emojiScore(emojiText(item), query)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction emojiText(item: Element): string {\n  const aliases = item.getAttribute('data-text')!.trim().toLowerCase().replace(/_/g, ' ')\n  return ` ${aliases}`\n}\n\nfunction emojiScore(aliases: string, query: string): number {\n  const score = aliases.indexOf(query)\n  return score > -1 ? 1000 - score : 0\n}\n\nobserve('text-expander[data-emoji-url]', {\n  subscribe: el =>\n    compose(\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'text-expander-activate', onactivate),\n    ),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== ':') return\n  detail.value = getValue(detail.item)\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== ':') return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-emoji-url')!\n  provide(emojiMenu(url, text))\n}\n\nfunction onactivate(event: Event) {\n  const expander = event.target as Element\n  const popover = expander.querySelector<HTMLElement>('.emoji-suggestions[popover]')\n  if (popover) popover.showPopover()\n}\n\nasync function emojiMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const [list, children] = await cachedEmoji(url)\n  const results = search(children, query).slice(0, 5)\n  list.textContent = ''\n  for (const el of results) list.append(el)\n  return {fragment: list, matched: results.length > 0}\n}\n\nasync function fetchEmoji(url: string): Promise<[HTMLElement, Element[]]> {\n  const fragment = await fetchSafeDocumentFragment(document, url)\n  const root = fragment.firstElementChild as HTMLElement\n  return [root, [...root.children]]\n}\nconst cachedEmoji = memoize(fetchEmoji)\n","import {compare, fuzzyScore} from '@github-ui/fuzzy-filter'\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render, unsafeHTML} from '@github-ui/jtml-shimmed'\n\nimport type TextExpanderElement from '@github/text-expander-element'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\n// Structure of the JSON data returned by the suggester endpoint.\ninterface Data {\n  suggestions: SuggestionData[]\n  icons: Icons\n}\n\n// Limited subset of the JSON Data returned by the suggester that matches a user's current query prefix.\ninterface SearchResults {\n  matches: SuggestionData[]\n  icons: Icons\n}\n\ninterface SuggestionData {\n  id: number\n  number: number\n  title: string\n  type: string\n}\n\ninterface Icons {\n  [key: string]: string\n}\n\n// Maximum number of results in the intial batch of results fetched by cachedJSON. If there are exactly this many\n// results for the suggester, then the repository almost certainly has more that are not included. This should be\n// kept in sync with:\n// - `SUGGESTION_LIMIT` constant in packages/collaboration/app/models/suggester/repository_suggester.rb\n// - `SUGGESTION_LIMIT` in packages/issues/app/models/issue.rb\n// - `SUGGESTION_LIMIT` in packages/discussions/app/models/discussion.rb\nconst REFINED_QUERY_THRESHOLD = 1000\n\n// The minimum number of characters required to trigger a follow-up \"refined\" query.\nconst REFINED_QUERY_PREFIX_SIZE = 3\n\n// The number of previous \"refined\" query results to cache.\nconst REFINED_QUERY_CACHE_SIZE = 5\n\n// The maximum number of suggester results to display at once.\nconst SEARCH_RESULTS_MAX = 5\n\nfunction asText(item: SuggestionData): string {\n  return `${item.number} ${item.title.trim().toLowerCase()}`\n}\n\nfunction search(items: SuggestionData[], query: string): SuggestionData[] {\n  if (!query) return items\n  const re = new RegExp(`\\\\b${escapeRegExp(query)}`)\n  const hashedScore = /^\\d+$/.test(query)\n    ? (text: string) => issueNumberScore(text, re)\n    : (text: string) => fuzzyScore(text, query)\n  const key = (item: SuggestionData) => {\n    const text = asText(item)\n    const score = hashedScore(text)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction escapeRegExp(regex: string): string {\n  return regex.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n// Returns a score that gets higher as the query that matches a number starting\n// on a word boundary is found earlier in the string.\nfunction issueNumberScore(text: string, query: RegExp): number {\n  const score = text.search(query)\n  if (score > -1) {\n    return 1000 - score\n  } else {\n    return 0\n  }\n}\n\n// Apply the search function to JSON data acquired from the suggester endpoint. Return a (possibly empty) subset of\n// that data that matches the user's current suggester query, up to a maximum of SEARCH_RESULTS_MAX, ordered by\n// match quality.\nfunction searchWithin(data: Data, query: string): SearchResults {\n  const matches = search(data.suggestions, query).slice(0, SEARCH_RESULTS_MAX)\n  return {matches, icons: data.icons}\n}\n\nfunction renderResults(issues: SuggestionData[], container: HTMLElement, icons: Icons, query = ''): void {\n  const itemsTemplate = (items: SuggestionData[]) => html`\n    <ul\n      role=\"listbox\"\n      class=\"suggester-container suggester suggestions list-style-none position-absolute\"\n      data-query=\"${query}\"\n    >\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: SuggestionData) => {\n    const icon = item.type in icons ? parseHTML(document, icons[item.type]!) : ''\n    return html`\n      <li class=\"markdown-title\" role=\"option\" id=\"suggester-issue-${item.id}\" data-value=\"${item.number}\">\n        <span class=\"d-inline-block mr-1\">${icon}</span>\n        <small>#${item.number}</small> ${\n          // eslint-disable-next-line no-restricted-syntax\n          unsafeHTML(item.title)\n        }\n      </li>\n    `\n  }\n\n  render(itemsTemplate(issues), container)\n}\n\nobserve('text-expander[data-issue-url]', {\n  subscribe: el => {\n    const subscriptions = [\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'keydown', onkeydown),\n      fromEvent(el, 'click', onclick),\n    ]\n\n    return compose(...subscriptions)\n  },\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '#') return\n  const value = detail.item.getAttribute('data-value')!\n  detail.value = `#${value}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '#') return\n  if (text === '#') {\n    hideSuggestions(event.target)\n    return\n  }\n\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-issue-url')!\n  provide(issueMenu(url, text, menu))\n}\n\nfunction hideSuggestions(target: EventTarget | null) {\n  if (!target) return\n\n  const textExpander = (target as HTMLElement).closest('text-expander') as TextExpanderElement\n  if (textExpander) {\n    textExpander.dismiss()\n  }\n}\n\nfunction onclick(event: Event) {\n  hideSuggestions(event.target)\n}\n\nfunction onkeydown(event: Event) {\n  const specialKeys = ['ArrowRight', 'ArrowLeft']\n  const {key} = event as KeyboardEvent\n  if (specialKeys.indexOf(key) < 0) return\n\n  hideSuggestions(event.target)\n}\n\nasync function issueMenu(\n  url: string,\n  query: string,\n  menu: Element,\n): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const searchResults = await queryResults(url, query, menu)\n\n  const list = document.createElement('div')\n  renderResults(searchResults.matches, list, searchResults.icons, query)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: searchResults.matches.length > 0}\n}\n\n// Track which query prefixes have already triggered refined query requests, but have not returned results yet.\nconst queriesInProgress = new Set<string>()\n\n// Cache the most recent REFINED_QUERY_CACHE_SIZE refined query results, keyed by query prefix.\nconst queryCache = new Map<string, Data>()\n\n// Identify the most appropriate collection of suggester data given the current query and return promise that resolves\n// to SearchResults containing the result of applying the query to that data.\n//\n// If the query is shorter than REFINED_QUERY_PREFIX_SIZE, use cached data of the most recently updated 1k issues,\n// pull requests, and discussions for this repository.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix does not currently have\n// cached data available, trigger a refined query request if one is not already running, then search within the cached\n// data of the most recently updated 1k as an interim. When the refined query request's response arrives, the menu\n// will be replaced if the active query still has this prefix.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix has cached data\n// available, use those cached data to construct the search results.\nasync function queryResults(url: string, query: string, menu: Element | null): Promise<SearchResults> {\n  const basicResults = await cachedJSON<Data>(url)\n  const basicSearchResults = searchWithin(basicResults, query)\n\n  if (query.length < REFINED_QUERY_PREFIX_SIZE || basicResults.suggestions.length < REFINED_QUERY_THRESHOLD) {\n    return basicSearchResults\n  }\n\n  let prefix = query.slice(0, REFINED_QUERY_PREFIX_SIZE)\n\n  // Elastic Search does not support partial match on an Integer field\n  // as a workaround for number queries we will query for every size\n  if (isFeatureEnabled('REPOSITORY_SUGGESTER_ELASTIC_SEARCH') && Number.isFinite(Number(query))) {\n    prefix = query\n  }\n\n  const refinedResults = queryCache.get(prefix)\n  if (refinedResults) {\n    return searchWithin(refinedResults, query)\n  }\n\n  if (!queriesInProgress.has(prefix)) {\n    queriesInProgress.add(prefix)\n    const refinedPromise = refinedQuery(url, prefix, menu)\n    if (basicSearchResults.matches.length === 0) {\n      const deferredRefinedResults = await refinedPromise\n      return searchWithin(deferredRefinedResults, query)\n    }\n  }\n\n  return searchWithin(basicResults, query)\n}\n\n// Query dotcom for a list of suggestion results that match the given query prefix. This appends a `?q=` query\n// parameter to the normal issue suggestions URL.\n//\n// When the response arrives, updates queryCache with the new results. If a non-null `menu` element is provided and\n// the current suggestions menu within it is still showing results for a query with the same prefix, the menu's\n// options will be updated live to show suggestions from the refined query results, instead. Any active selection\n// within the menu will be preserved in the new menu contents.\nasync function refinedQuery(url: string, prefix: string, menu: Element | null): Promise<Data> {\n  const refinedQueryUrl = new URL(url, window.location.origin)\n  refinedQueryUrl.searchParams.set('q', prefix)\n\n  const data: Data = await jsonRequest(refinedQueryUrl.toString())\n\n  queryCache.set(prefix, data)\n  queriesInProgress.delete(prefix)\n\n  // Evict cached query results, oldest first, to bring us down to the cache limit.\n  if (queryCache.size > REFINED_QUERY_CACHE_SIZE) {\n    const overage = queryCache.size - REFINED_QUERY_CACHE_SIZE\n    const oldestKeys = Array.from(queryCache.keys()).slice(0, overage)\n    for (const key of oldestKeys) {\n      queryCache.delete(key)\n    }\n  }\n\n  // Replace live suggestions if still visible, preserving any active selection\n  const liveSuggestions = menu?.querySelector<HTMLElement>('ul.suggestions')\n  const liveQuery = liveSuggestions?.getAttribute('data-query')\n\n  if (liveSuggestions && liveQuery?.startsWith(prefix)) {\n    const selectedID = menu?.querySelector<Element>('[aria-activedescendant]')?.getAttribute('aria-activedescendant')\n\n    const list = document.createElement('div')\n    const results = searchWithin(data, liveQuery)\n    renderResults(results.matches, list, results.icons)\n    if (selectedID) {\n      for (const selectedElement of list.querySelectorAll(`#${selectedID}`)) {\n        selectedElement.setAttribute('aria-selected', 'true')\n      }\n    }\n\n    const root = list.firstElementChild as HTMLElement\n    liveSuggestions.replaceChildren(...root.children)\n  }\n\n  return data\n}\n\nasync function jsonRequest<T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n}\n\nconst cachedJSON = memoize(jsonRequest)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render} from '@github-ui/jtml-shimmed'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface UserData {\n  login: string\n  type: string\n  id: string\n  name: string\n  description: string\n  participant?: boolean\n}\n\nfunction asText(item: UserData): string {\n  return item.description\n    ? `${item.name} ${item.description}`.trim().toLowerCase() // team\n    : `${item.login} ${item.name}`.trim().toLowerCase() // user\n}\n\nfunction search(items: UserData[], query: string): UserData[] {\n  if (!query) return items\n  const scorer = fuzzyScorer(query)\n  const key = (item: UserData) => {\n    const text = asText(item)\n    const score = scorer(text, item.participant)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction renderResults(usersAndTeams: UserData[], container: HTMLElement): void {\n  const itemsTemplate = (items: UserData[]) => html`\n    <ul role=\"listbox\" class=\"suggester-container suggester suggestions list-style-none position-absolute\">\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: UserData) => {\n    const name = item.type === 'user' ? item.login : item.name\n    const desc = item.type === 'user' ? item.name : item.description\n    return html`\n      <li role=\"option\" id=\"suggester-${item.id}-${item.type}-${name}\" data-value=\"${name}\">\n        <span>${name}</span>\n        <small>${desc}</small>\n      </li>\n    `\n  }\n\n  render(itemsTemplate(usersAndTeams), container)\n}\n\nfunction fuzzyScorer(query: string): (text: string, participant?: boolean) => number {\n  if (!query) return () => 2.0\n  const queryChars = query.toLowerCase().split('')\n  return (text: string, participant?: boolean): number => {\n    if (!text) return 0.0\n    const match = shortestMatch(text, queryChars)\n    if (!match) return 0.0\n    const value = query.length / (match[1] as number)\n    const score = value / ((match[0] as number) / 2 + 1)\n    if (participant) return score + 1\n    return score\n  }\n}\n\n// Get the shortest match (least distance between start and end index) for all\n// the query characters in the given text.\n//\n// Returns an array in format [firstIndex, matchLength, [matchIndexes]]\nfunction shortestMatch(text: string, queryChars: string[]): Array<number | number[]> | null {\n  let indexes\n  let j\n  let len\n  let match\n  const starts = allIndexesOf(text, queryChars[0]!)\n  if (starts.length === 0) {\n    return null\n  }\n  if (queryChars.length === 1) {\n    return [starts[0]!, 1, []]\n  }\n  match = null\n  for (j = 0, len = starts.length; j < len; j++) {\n    const start = starts[j]!\n    if (!(indexes = indexesOfChars(text, queryChars, start + 1))) {\n      continue\n    }\n    const length = indexes[indexes.length - 1]! - start\n    if (!match || length < (match[1] as number)) {\n      match = [start, length, indexes]\n    }\n  }\n  return match\n}\n\n// Find all indexes of character inside a string.\nfunction allIndexesOf(string: string, char: string) {\n  let index = 0\n  const results1 = []\n  while ((index = string.indexOf(char, index)) > -1) {\n    results1.push(index++)\n  }\n  return results1\n}\n\n// Find all indexes of characters of query string in order.\nfunction indexesOfChars(string: string, chars: string[], startingIndex: number): number[] | undefined {\n  let index = startingIndex\n  const indexes = []\n  for (let i = 1; i < chars.length; i += 1) {\n    index = string.indexOf(chars[i]!, index)\n    if (index === -1) return\n    indexes.push(index++)\n  }\n  return indexes\n}\n\nobserve('text-expander[data-mention-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '@') return\n  const login = detail.item.getAttribute('data-value')!\n  detail.value = `@${login}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '@') return\n  // do not allow multi-word mentions\n  if (text?.split(' ').length > 1) return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-mention-url')!\n  provide(mentionMenu(url, text))\n}\n\nasync function mentionMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const data: UserData[] = await cachedJSON(url)\n  const list = document.createElement('div')\n  const results = search(data, query).slice(0, 5)\n  renderResults(results, list)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: results.length > 0}\n}\n\nconst cachedJSON = memoize(async function <T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('change', 'input.js-survey-contact-checkbox', function (event: Event) {\n  const currentTarget = event.currentTarget as HTMLInputElement\n  const question = currentTarget.closest<HTMLElement>('.js-survey-question-form')!\n  const hiddenInput = question.querySelector<HTMLElement>('.js-survey-contact-checkbox-hidden')!\n  if (currentTarget.checked) {\n    hiddenInput.setAttribute('disabled', 'true')\n  } else {\n    hiddenInput.removeAttribute('disabled')\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non(\n  'details-menu-selected',\n  '.js-sync-select-menu-text',\n  function (event) {\n    const button = document.querySelector<HTMLElement>('.js-sync-select-menu-button')!\n    const text = (event.detail.relatedTarget as Element).querySelector<HTMLElement>(\n      'span[data-menu-button-text]',\n    )!.textContent\n    button.textContent = text\n    button.focus()\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', 'tab-container [role=\"tab\"]', function (event) {\n  const {currentTarget} = event\n\n  const menu = currentTarget.closest<HTMLElement>('tab-container')!\n  const filter = menu.querySelector('.js-filterable-field, [data-filter-placeholder-input]')\n  if (filter instanceof HTMLInputElement) {\n    const placeholder = currentTarget.getAttribute('data-filter-placeholder')\n    if (placeholder) {\n      filter.setAttribute('placeholder', placeholder)\n    }\n    filter.focus()\n  }\n})\n\non('tab-container-changed', 'tab-container', function (event) {\n  const panel = event.detail.relatedTarget\n  if (!panel) return\n  const url = panel.getAttribute('data-fragment-url')\n  const includeFragment = panel.querySelector('include-fragment')\n  if (url && includeFragment && !includeFragment.hasAttribute('src')) {\n    includeFragment.src = url\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load team members to display in the mention's tooltip from the server on hover.\nasync function members(event: Event) {\n  const target = event.currentTarget as HTMLElement\n  if (teamHovercardEnabled(target)) {\n    target.classList.remove('tooltipped')\n    return\n  }\n  const url = target.getAttribute('data-url')\n  if (!url) return\n\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (!response.ok) return\n  const data = (await response.json()) as {total: number; members: string[]}\n\n  const id = target.getAttribute('data-id')!\n  const mentions = document.querySelectorAll(`.js-team-mention[data-id='${id}']`)\n  for (const el of mentions) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    if (data.total === 0) {\n      // eslint-disable-next-line i18n-text/no-en\n      data.members.push('This team has no members')\n    } else if (data.total > data.members.length) {\n      data.members.push(`${data.total - data.members.length} more`)\n    }\n    tip(mentions, sentence(data.members))\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = error.response ? error.response.status : 500\n    const message = target.getAttribute(status === 404 ? 'data-permission-text' : 'data-error-text')!\n    tip(mentions, message)\n  }\n}\n\n// Add a tooltip to the elements. Adds the text just before the tooltip classes so\n// the tooltip appears fully formed on mouse hover.\nfunction tip(elements: NodeList, text: string): void {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.setAttribute('aria-label', text)\n    el.classList.add('tooltipped', 'tooltipped-s', 'tooltipped-multiline')\n  }\n}\n\n// Comma separate a list of strings with `and` at the end, like\n// Rails' to_sentence.\nfunction sentence(xs: string[]): string {\n  if ('ListFormat' in Intl) {\n    const lists = new Intl.ListFormat()\n    return lists.format(xs)\n  }\n\n  if (xs.length === 0) {\n    return ''\n  } else if (xs.length === 1) {\n    return xs[0]!\n  } else if (xs.length === 2) {\n    return xs.join(' and ')\n  } else {\n    const last = xs[xs.length - 1]\n    return xs.slice(0, -1).concat(`and ${last}`).join(', ')\n  }\n}\n\nfunction teamHovercardEnabled(element: HTMLElement): boolean {\n  return !!element.getAttribute('data-hovercard-url') && !!element.closest('[data-team-hovercards-enabled]')\n}\n\nobserve('.js-team-mention', function (el) {\n  el.addEventListener('mouseenter', members)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\ninterface Request {\n  url: string\n  headers: Headers\n}\n\nfunction getTimelineLastModified(): string | null {\n  const marker = document.querySelector('.js-timeline-marker')\n  return marker != null ? marker.getAttribute('data-last-modified') : null\n}\n\n// Add the X-Timeline-Last-Modified header to the request based on the\n// the last modified time from the timeline marker element.\nfunction addTimelineLastModifiedHeader(request: Request) {\n  if (isCrossDomain(request)) {\n    return\n  }\n\n  const lastModified = getTimelineLastModified()\n  if (lastModified) {\n    request.headers.set('X-Timeline-Last-Modified', lastModified)\n  }\n}\n\nfunction isCrossDomain(request: Request): boolean {\n  let requestURL\n  try {\n    // eslint-disable-next-line no-restricted-syntax\n    requestURL = new URL(request.url)\n  } catch (urlError) {\n    return true\n  }\n  return requestURL.host !== window.location.host\n}\n\nremoteForm('.js-needs-timeline-marker-header', function (form, wants, request) {\n  addTimelineLastModifiedHeader(request)\n})\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  const {request} = event.detail\n  addTimelineLastModifiedHeader(request)\n})\n","import {isDetailsTargetExpanded, toggleDetailsTarget} from '../details'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport hashChange from '../hash-change'\nimport {loadDeferredContent} from '../include-fragment'\nimport {scrollIntoView} from '../../sticky-scroll-into-view'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst SCROLL_WAIT_MEDIA_TIMEOUT = 5000\nconst COMMENT_IMAGE = '.js-comment-body img'\nconst COMMENT_VIDEO = '.js-comment-body video'\n\nhashChange(function () {\n  focusOrLoadElement()\n})\n\nobserve('.js-timeline-progressive-focus-container', scrollToFocusTimelineEvent)\n\nwindow.addEventListener('sticky-header-rendered', () => {\n  scrollToFocusTimelineEvent()\n})\n\nfunction scrollToFocusTimelineEvent() {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const pullTimeline = document.querySelector<HTMLElement>('.js-pull-discussion-timeline')\n  if (pullTimeline) return\n\n  const target = document.getElementById(anchor)\n\n  if (target) {\n    focusElement(target)\n  }\n}\n\nfunction focusOrLoadElement(shouldLoadElement = true): void {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n  if (target) {\n    focusElement(target)\n  } else {\n    if (loadComments(anchor)) return\n\n    const loader = document.querySelector<HTMLElement>('#js-timeline-progressive-loader')\n\n    if (loader && shouldLoadElement) {\n      loadElement(anchor, loader)\n    }\n  }\n}\n\nfunction loadComments(anchor: string): boolean {\n  return (\n    loadResolvedComments(anchor) ||\n    loadHiddenComments(anchor, '.js-thread-hidden-comment-ids') ||\n    loadHiddenComments(anchor, '.js-review-hidden-comment-ids')\n  )\n}\n\nfunction loadResolvedComments(anchor: string): boolean {\n  const commentContainer = findCommentContainer(anchor, '.js-comment-container')\n  if (!commentContainer) return false\n\n  loadDeferredContent(commentContainer)\n  return true\n}\n\nfunction loadHiddenComments(anchor: string, selector: string): boolean {\n  const commentContainer = findCommentContainer(anchor, selector)\n  if (!commentContainer) return false\n\n  commentContainer.addEventListener('page:loaded', function () {\n    focusOrLoadElement()\n  })\n  commentContainer.querySelector<HTMLButtonElement>('button[type=submit]')!.click()\n  return true\n}\n\nfunction findCommentContainer(anchor: string, selector: string): Element | null {\n  const commentContainers = document.querySelectorAll(selector)\n\n  for (const commentContainer of commentContainers) {\n    const threadCommentIds = commentContainer.getAttribute('data-hidden-comment-ids')\n\n    if (threadCommentIds) {\n      const commentIds = threadCommentIds.split(',')\n      const anchorCommentId = anchor.match(/\\d+/g)?.[0]\n\n      if (anchorCommentId && commentIds.includes(anchorCommentId)) {\n        return commentContainer\n      }\n    }\n  }\n  return null\n}\n\nobserve('.js-inline-comments-container', function (container) {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n\n  if (target && container.contains(target)) {\n    focusElement(target)\n  }\n})\n\n// adds support for deep-link loading discussion comments when the comment thread is nested\nobserve('#js-discussions-timeline-anchor-loader', {\n  constructor: HTMLElement,\n  add: element => {\n    const existingProgressiveLoader = document.querySelector('#js-timeline-progressive-loader')\n    if (existingProgressiveLoader) return\n\n    const anchor = urlAnchor()\n    if (!anchor) return\n\n    const target = document.getElementById(anchor)\n    if (!target) {\n      loadElement(anchor, element)\n    }\n  },\n})\n\n// resolves when comment body videos have loaded enough data to render the preview image\nasync function videosReady(): Promise<unknown> {\n  const videos: NodeListOf<HTMLVideoElement> = document.querySelectorAll(COMMENT_VIDEO)\n  const videoLoads = Array.from(videos).map(v => {\n    return new Promise<HTMLVideoElement>(resolve => {\n      if (v.readyState >= v.HAVE_METADATA) {\n        resolve(v)\n      } else {\n        // don't wait forever :)\n        const timeout = setTimeout(() => resolve(v), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(v)\n        }\n        v.addEventListener('loadeddata', () => {\n          if (v.readyState >= v.HAVE_METADATA) done()\n        })\n        v.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(videoLoads)\n}\n\n// resolves when comment body images are loaded\nasync function imagesReady(): Promise<unknown> {\n  const images: NodeListOf<HTMLImageElement> = document.querySelectorAll(COMMENT_IMAGE)\n  const imageLoads = Array.from(images).map(i => {\n    new Promise<HTMLImageElement>(resolve => {\n      if (i.complete) {\n        resolve(i)\n      } else {\n        const timeout = setTimeout(() => resolve(i), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(i)\n        }\n        i.addEventListener('load', () => done())\n        i.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(imageLoads)\n}\n\nasync function mediaLoaded(): Promise<unknown> {\n  return Promise.all([videosReady(), imagesReady()])\n}\n\nasync function focusElement(element: HTMLElement): Promise<void> {\n  await mediaLoaded()\n  expandDetailsIfPresent(element)\n  const link = element.querySelector<HTMLElement>(`[href='#${element.id}']`)\n\n  scrollIntoView(element)\n  if (link) {\n    const oldValue = link.getAttribute('data-turbo')\n    link.setAttribute('data-turbo', 'false')\n    setTimeout(() => {\n      link.click()\n    }, 0)\n    if (oldValue === null) {\n      link.removeAttribute('data-turbo')\n    } else {\n      link.setAttribute('data-turbo', oldValue)\n    }\n  }\n}\n\nasync function loadElement(anchor: string, loader: HTMLElement): Promise<void> {\n  if (!loader) return\n\n  const path = loader.getAttribute('data-timeline-item-src')\n  if (!path) return\n\n  const url = new URL(path, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('anchor', anchor)\n  url.search = params.toString()\n\n  let html\n  try {\n    html = await fetchSafeDocumentFragment(document, url.toString())\n  } catch (err) {\n    return\n  }\n\n  const newTimelineItem = html.querySelector('.js-timeline-item')\n  if (!newTimelineItem) return\n\n  const gid = newTimelineItem.getAttribute('data-gid')\n  if (!gid) return\n\n  const currentTimelineItem = document.querySelector(`.js-timeline-item[data-gid='${gid}']`)\n\n  if (currentTimelineItem) {\n    currentTimelineItem.replaceWith(newTimelineItem)\n\n    focusOrLoadElement(false)\n  } else {\n    const container = document.getElementById('js-progressive-timeline-item-container')\n    if (container) container.replaceWith(html)\n    focusOrLoadElement(false)\n  }\n}\n\nfunction expandDetailsIfPresent(element: HTMLElement): void {\n  const detailsContainer = element.closest<HTMLElement>('details, .js-details-container')\n  if (!detailsContainer) return\n  if (detailsContainer.nodeName === 'DETAILS') {\n    detailsContainer.setAttribute('open', 'open')\n  } else if (!isDetailsTargetExpanded(detailsContainer)) {\n    toggleDetailsTarget(detailsContainer)\n  }\n}\n\nfunction urlAnchor(): string {\n  return window.location.hash.slice(1)\n}\n","import {ready} from '@github-ui/document-ready'\n;(async function () {\n  if ('serviceWorker' in navigator) {\n    await ready\n    const serviceWorkerPath = document.querySelector<HTMLLinkElement>('link[rel=\"service-worker-src\"]')?.href\n    if (serviceWorkerPath) {\n      navigator.serviceWorker.register(serviceWorkerPath, {scope: '/'})\n    } else {\n      await unregisterAllServiceWorkers()\n    }\n  }\n})()\n\nasync function unregisterAllServiceWorkers() {\n  let registrations: readonly ServiceWorkerRegistration[] = []\n  try {\n    registrations = await navigator.serviceWorker.getRegistrations()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name === 'SecurityError') return\n  }\n\n  for (const registration of registrations) {\n    registration.unregister()\n  }\n}\n","import {preservePosition} from 'scroll-anchoring'\nimport {replaceState} from '@github-ui/browser-history-state'\n\ndocument.addEventListener('keydown', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Escape') return\n  if (event.target !== document.body) return\n\n  const element = document.querySelector('.js-targetable-element:target')\n  if (!element) return\n\n  preservePosition(element, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\ndocument.addEventListener('click', (event: MouseEvent) => {\n  // Return early if there is no highlighted element\n  const highlightedElement = document.querySelector('.js-targetable-element:target')\n  if (!highlightedElement) return\n\n  // Don't mess with the URL if we clicked on a link\n  if (event.target instanceof HTMLAnchorElement) return\n\n  // Don't do anything if the user clicked on the already highlighted element\n  if (!(event.target instanceof HTMLElement)) return\n  if (highlightedElement.contains(event.target)) return\n\n  preservePosition(highlightedElement, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n})\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-discussion', announceTimelineEvents)\n\nfunction announceTimelineEvents() {\n  let existingTimelineItems: WeakSet<Element> = new WeakSet()\n  setExistingTimelineItems()\n\n  document.addEventListener('turbo:load', setExistingTimelineItems)\n\n  observe('.js-timeline-item', el => {\n    if (!(el instanceof HTMLElement)) return\n    if (existingTimelineItems.has(el)) return\n\n    announceFromElement(el)\n  })\n\n  function setExistingTimelineItems() {\n    existingTimelineItems = new WeakSet(document.querySelectorAll('.js-timeline-item'))\n  }\n}\n","// Toggler Behavior\n//\n// target    - Element with a \".js-toggler-target\" class name, clicking\n//             triggers toggle.\n// container - Element with a \".js-toggler-container\" class name,\n//             contains one or more targets.\n//\n// The toggle state is defined as \"off\" or \"on\". A \".on\" class name is\n// added to the container when the state is \"on\". \".on\" is removed if\n// the state is \"off\".\n//\n// Some extra AJAX states are available if any target makes use of\n// `data-remote`.\n//\n// loading - Added to the container before the request is sent and\n//           after it finishes.\n// success - Added to the container after a successful response\n//           returns.\n// error   - Added to the container after any bad responses.\n//\n// Examples\n//\n//   .starring-container .unstarred { display: block; }\n//   .starring-container.on .unstarred { display: none; }\n//   .starring-container .starred { display: none; }\n//   .starring-container.on .starred { display: block; }\n//\n//   <div class=\"js-toggler-container starring-container\">\n//     <button type=\"button\" href=\"#\" class=\"starred js-toggler-target\">Unstar repository</button>\n//     <button type=\"button\" class=\"unstarred js-toggler-target\">Star repository</button>\n//   </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\non('click', '.js-toggler-container .js-toggler-target', function (event) {\n  // Ignore right-click events.\n  if (event.button !== 0) return\n\n  const container = event.currentTarget.closest('.js-toggler-container')\n  if (container) container.classList.toggle('on')\n})\n\nremoteForm('.js-toggler-container', async (form, wants) => {\n  form.classList.remove('success', 'error')\n  form.classList.add('loading')\n\n  try {\n    await wants.text()\n    form.classList.add('success')\n  } catch (responseError) {\n    form.classList.add('error')\n  } finally {\n    form.classList.remove('loading')\n  }\n})\n","import {PageRenderer, session, setCSPTrustedTypesPolicy, setProgressBarDelay} from '@github/turbo'\nimport {formatKeyToError} from './utils'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\ninterface HeadSnapshot {\n  detailsByOuterHTML: {\n    [outerHTML: string]: {\n      tracked: boolean\n      elements: Element[]\n    }\n  }\n}\n\nsetCSPTrustedTypesPolicy(turboPolicy)\nsetProgressBarDelay(0)\n\nsession.isVisitable = () => true\n\n// get the reason why a Turbo request had to be reloaded so we can report metrics\nconst originalTrackedElementsAreIdentical = Object.getOwnPropertyDescriptor(PageRenderer.prototype, 'reloadReason')?.get\nObject.defineProperty(PageRenderer.prototype, 'reloadReason', {\n  get() {\n    const reloadReason = originalTrackedElementsAreIdentical?.call(this)\n\n    if (reloadReason.reason !== 'tracked_element_mismatch') {\n      return reloadReason\n    }\n\n    const currentTracked = Object.fromEntries(getSnapshotSignatures(this.currentHeadSnapshot))\n    const changedKeys = []\n\n    for (const [key, value] of getSnapshotSignatures(this.newHeadSnapshot)) {\n      if (currentTracked[key] !== value) {\n        changedKeys.push(formatKeyToError(key))\n      }\n    }\n\n    return {\n      reason: `tracked_element_mismatch-${changedKeys.join('-')}`,\n    }\n  },\n})\n\nfunction* getSnapshotSignatures(snapshot: HeadSnapshot): IterableIterator<[string, string]> {\n  for (const detail of Object.values(snapshot.detailsByOuterHTML)) {\n    if (detail.tracked) {\n      for (const element of detail.elements) {\n        if (element instanceof HTMLMetaElement && element.getAttribute('http-equiv')) {\n          yield [element.getAttribute('http-equiv') || '', element.getAttribute('content') || '']\n        }\n      }\n    }\n  }\n}\n","import {navigator} from '@github/turbo'\n\ntype State = Record<string, unknown> & {\n  turbo?: {restorationIdentifier: string}\n  skipTurbo?: boolean\n  usr?: {skipTurbo: boolean}\n  turboCount?: number\n}\n\n// keep Turbo's history up to date with the browser's in case code calls native history API's directly\nconst patchHistoryApi = (name: 'replaceState' | 'pushState') => {\n  const oldHistory = history[name]\n\n  history[name] = function (this: History, state?: State, unused?: string, url?: string | URL | null) {\n    const skipTurbo = state?.skipTurbo || state?.usr?.skipTurbo\n\n    // we need to merge the state from turbo with the state given to pushState in case others are adding data to the state\n    function oldHistoryWithMergedState(\n      this: History,\n      turboState: State,\n      turboUnused: string,\n      turboUrl?: string | URL | null,\n    ) {\n      const currentTurboCount = history.state?.turboCount || 0\n      // Only turbo navs have the `turbo` key when pushing state.\n      const turboCount = name === 'pushState' && state?.turbo ? currentTurboCount + 1 : currentTurboCount\n      const mergedState = skipTurbo ? {...state, skipTurbo: true} : {...state, ...turboState, turboCount}\n      oldHistory.call(this, mergedState, turboUnused, turboUrl)\n    }\n\n    navigator.history.update(\n      oldHistoryWithMergedState,\n      new URL(url || location.href, location.href),\n      state?.turbo?.restorationIdentifier,\n    )\n  }\n}\n\npatchHistoryApi('replaceState')\npatchHistoryApi('pushState')\n","import {session} from '@github/turbo'\n\ninterface ProgressBar {\n  setValue(n: number): void\n  hide(): void\n  show(): void\n}\n\ninterface BrowserAdapter {\n  progressBar: ProgressBar\n}\n\nconst adapter = session.adapter as typeof session.adapter & BrowserAdapter\n\n// Start the ProgressBar at the top of the page.\nexport const beginProgressBar = () => {\n  adapter.progressBar.setValue(0)\n  adapter.progressBar.show()\n}\n\n// Complete the ProgressBar at the top of the page.\nexport const completeProgressBar = () => {\n  adapter.progressBar.setValue(1)\n  adapter.progressBar.hide()\n}\n","import {ready} from '@github-ui/document-ready'\nimport {type CacheNode, getDocumentAttributes, getTurboCacheNodes} from './utils'\n\nconst turboPageNodes: Map<string, CacheNode> = new Map()\nconst turboDocumentAttributes: Map<string, Attr[]> = new Map()\n\nexport const getCachedNode = () => turboPageNodes.get(document.location.href)\nexport const setCachedNode = (url: string, node: CacheNode) => turboPageNodes.set(url, node)\nexport const setDocumentAttributesCache = () =>\n  turboDocumentAttributes.set(document.location.href, getDocumentAttributes())\nexport const getCachedAttributes = () => turboDocumentAttributes.get(document.location.href)\n;(async () => {\n  await ready\n  setCachedNode(document.location.href, getTurboCacheNodes(document))\n  setDocumentAttributesCache()\n})()\n","import {observe} from '@github/selector-observer'\nimport {isTurboFrame, waitForStylesheets, dispatchTurboReload, replaceElementAttributes, copyScriptTag} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {getCachedAttributes, setDocumentAttributesCache} from './cache'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {inSoftNav} from '@github-ui/soft-nav/utils'\nimport {startSoftNav} from '@github-ui/soft-nav/state'\n\nlet responseFailed = false\nlet errorDocument: Document | null = null\n\nif (ssrSafeWindow) {\n  // We want to make sure that links inside a `data-turbo-frame` container also have the data attribute.\n  observe('[data-turbo-frame]', {\n    constructor: HTMLElement,\n    add(el) {\n      if (el.tagName === 'A' || el.getAttribute('data-turbo-frame') === '') return\n\n      for (const link of el.querySelectorAll('a:not([data-turbo-frame])')) {\n        link.setAttribute('data-turbo-frame', el.getAttribute('data-turbo-frame') || '')\n      }\n    },\n  })\n}\n\nssrSafeDocument?.addEventListener('turbo:click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // If we are already in a soft nav, it means the navigation is handled by a frame.\n  if (isFeatureEnabled('disable_turbo_visit') && !inSoftNav()) {\n    event.preventDefault()\n    return\n  }\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    // return early so we don't start a soft-nav\n    return\n  }\n\n  // Here is where ALL non-frame Turbo navigation starts. We start by emitting the `soft-nav:start` event with the correct `turbo` mechanism.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo')\n  }\n})\n\n// Emulate `onbeforeunload` event handler for Turbo navigations to\n// support warning a user about losing unsaved content\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', function (event) {\n  const unloadMessage = window.onbeforeunload?.(event)\n\n  if (unloadMessage) {\n    const navigate = confirm(unloadMessage)\n    if (navigate) {\n      window.onbeforeunload = null\n    } else {\n      event.preventDefault()\n      completeProgressBar()\n    }\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', event => {\n  if (event.defaultPrevented) return\n\n  const frame = event.target as Element\n  if (isTurboFrame(frame)) {\n    beginProgressBar()\n  }\n\n  // attach a Turbo specific header for visit requests so the server can track Turbo usage\n  if (frame?.tagName === 'HTML') {\n    const ev = event as CustomEvent\n    ev.detail.fetchOptions.headers['Turbo-Visit'] = 'true'\n  }\n})\n\ntype FetchRequest = {\n  readonly delegate: FetchRequestDelegate\n}\ninterface FetchRequestDelegate {\n  requestErrored(request: FetchRequest, error: Error): void\n}\ntype FrameElement = {\n  readonly delegate: FrameElementDelegate\n}\ntype FrameElementDelegate = unknown\n\n// TODO: turbo upstream will emit this event eventually https://github.com/hotwired/turbo/pull/640\n// and we can remove the types above\nconst frame = ssrSafeDocument?.createElement('turbo-frame') as unknown as FrameElement\nconst controllerPrototype = Object.getPrototypeOf(frame.delegate)\nconst originalRequestErrored = controllerPrototype.requestErrored\ncontrollerPrototype.requestErrored = function (request: FetchRequest, error: Error) {\n  this.element.dispatchEvent(\n    new CustomEvent('turbo:fetch-error', {\n      bubbles: true,\n      detail: {request, error},\n    }),\n  )\n  return originalRequestErrored.apply(this, request, error)\n}\n\n// when a frame fetch request errors due to a network error\n// we reload the page to prevent hanging the progress bar indefinitely\nssrSafeDocument?.addEventListener('turbo:fetch-error', event => {\n  // we don't want to reload the page due to an error on a form\n  // since we might throw away the users work or submit the form again\n  // other handling would be needed for this use case\n  if (event.target instanceof HTMLFormElement) {\n    return\n  }\n\n  const fetchRequest = (event as CustomEvent).detail.request\n\n  window.location = fetchRequest.location\n  event.preventDefault()\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', async event => {\n  const fetchResponse = (event as CustomEvent).detail.fetchResponse\n\n  responseFailed = fetchResponse.statusCode >= 500\n  // Turbo is misbehaving when we Drive to our 404 page, so we\n  // can force a reload if the response is 404 and prevent Turbo\n  // from continuing.\n  if (fetchResponse.statusCode === 404) {\n    dispatchTurboReload(fetchResponse.statusCode)\n    window.location = fetchResponse.location\n    event.preventDefault()\n  }\n\n  // Here we want to ensure that every time we navigate away from a page using Turbo, we set a restorationIdentifier.\n  // We have to do this because React removes the identifier to avoid an unwanted request when doing client-side navigations.\n  // But, since we are Turboing away from a page (React or not), we need to ensure that the identifier is present, so when we\n  // back navigate, the page will be refetched.\n  history.replaceState({...history.state, skipTurbo: false}, '', location.href)\n\n  if (responseFailed) {\n    const responseHTML = await fetchResponse.responseHTML\n    const trustedHTML = turboPolicy.createHTML(responseHTML, fetchResponse.response)\n    errorDocument = new DOMParser().parseFromString(trustedHTML, 'text/html')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:frame-render', event => {\n  if (isTurboFrame(event.target)) {\n    completeProgressBar()\n  }\n})\n\n// copy over new attributes on <html> to the existing page\nssrSafeDocument?.addEventListener('turbo:before-render', async event => {\n  if (!(event instanceof CustomEvent)) return\n\n  event.preventDefault()\n\n  event.detail.render = customDriveRender\n\n  await waitForStylesheets()\n\n  event.detail.resume(true)\n\n  // Update <html> attributes\n  replaceElementAttributes(document.documentElement, event.detail.newBody.ownerDocument.documentElement)\n  setDocumentAttributesCache()\n})\n\nconst nextEventLoopTick = () =>\n  new Promise<void>(resolve => {\n    setTimeout(() => resolve(), 0)\n  })\n\nconst customDriveRender = async (currentBody: HTMLBodyElement, newBody: HTMLBodyElement) => {\n  await nextEventLoopTick()\n\n  if (responseFailed && errorDocument) {\n    document.documentElement.replaceWith(errorDocument.documentElement)\n    for (const script of document.querySelectorAll('script')) {\n      const newScript = copyScriptTag(script)\n      if (newScript) script.replaceWith(newScript)\n    }\n    return\n  }\n\n  const currentTurboBody = currentBody.querySelector('[data-turbo-body]')\n  const newTurboBody = newBody.querySelector('[data-turbo-body]')\n\n  if (currentTurboBody && newTurboBody) {\n    replaceElementAttributes(currentBody, newBody)\n    currentTurboBody.replaceWith(newTurboBody)\n  } else {\n    dispatchTurboReload('missing_turbo_body')\n    window.location.reload()\n  }\n}\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  const currentDocument = document.documentElement\n  const cachedAttributes = getCachedAttributes()\n\n  if (!cachedAttributes) return\n\n  for (const attr of currentDocument.attributes) {\n    if (!cachedAttributes.find(cached => cached.nodeName === attr.nodeName)) {\n      currentDocument.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of cachedAttributes) {\n    if (currentDocument.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      currentDocument.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n})\n","import {setDocumentAttributesCache} from './cache'\nimport {markTurboHasLoaded} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {hasSoftNavFailure, inSoftNav, setSoftNavFailReason, setSoftNavMechanism} from '@github-ui/soft-nav/utils'\nimport {endSoftNav, failSoftNav, initSoftNav, renderedSoftNav, succeedSoftNav} from '@github-ui/soft-nav/state'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\n// In case this event is triggered, it means we are in a Frame navigation, so we update the mechanism (if needed).\nssrSafeDocument?.addEventListener('turbo:frame-load', event => {\n  // When going to a React page, there is a chance that the soft-nav end event finishes before the frame-load event.\n  // In that case, we don't want to start a new soft-nav event here, so we'll skip this if the soft-nav has already ended.\n  if (inSoftNav()) setSoftNavMechanism('turbo.frame')\n  // When navigating using frames, we either render here, or wait for the react-app to render.\n  renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n\n  if (!(event.target instanceof HTMLElement)) return\n\n  if (event.target.getAttribute('data-turbo-action') !== 'advance') {\n    // If we are not navigating to a new page, Turbo won't fire a `turbo:load` event, so we need to end the soft-nav here.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n  }\n})\n\n// Turbo navigations should end here, unless we are navigating to a React app. In that case, React itself will\n// end the navigation, since Turbo doesn't know when React is done rendering.\nssrSafeDocument?.addEventListener('turbo:load', event => {\n  markTurboHasLoaded()\n  const isHardLoad = Object.keys((event as CustomEvent).detail.timing).length === 0\n\n  if (inSoftNav() && !isHardLoad && !hasSoftNavFailure()) {\n    // When navigating using drive, we either render here, or wait for the react-app to render.\n    renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo']})\n    // If going to a react app, we let React succeed the soft-nav.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad && (hasSoftNavFailure() || inSoftNav())) {\n    // If going to a react app, we let React fail the soft-nav.\n    failSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad) {\n    initSoftNav()\n  }\n})\n\nssrSafeDocument?.addEventListener('beforeunload', () => endSoftNav())\n\n// Set the failure reason when we get a reload\nssrSafeDocument?.addEventListener('turbo:reload', function (event) {\n  if (!(event instanceof CustomEvent)) return\n\n  setSoftNavFailReason(event.detail.reason)\n})\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.END, setDocumentAttributesCache)\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.START, beginProgressBar)\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.END, completeProgressBar)\n","import {setCookie} from '@github-ui/cookies'\nimport timezone from '../timezone'\n\n// eslint-disable-next-line compat/compat\nwindow.requestIdleCallback(() => {\n  const value = timezone()\n  if (value) {\n    setCookie('tz', encodeURIComponent(value))\n  }\n})\n","export default function timezone(): string | void {\n  if ('Intl' in window) {\n    try {\n      const format = new window.Intl.DateTimeFormat()\n      return format.resolvedOptions().timeZone\n    } catch {\n      // ignore\n    }\n  }\n}\n","import {attr, controller, target} from '@github/catalyst'\nimport type {WebauthnGetElement} from '@github-ui/webauthn-get-element'\nimport {State} from '@github-ui/webauthn-get-element'\nimport {\n  initializeMobileAuthRequestStatusPoll,\n  hidePromptAndShowErrorMessage as showGitHubMobileErrorState,\n  resetPrompt as resetGitHubMobilePrompt,\n} from '../sessions/github-mobile-two-factor'\nimport {supported} from '@github/webauthn-json/browser-ponyfill'\nimport {smsSending, smsSuccess} from '../sessions/two-factor'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nenum SudoCredentialOptionsElementState {\n  WebAuthn = 'webauthn',\n  Password = 'password',\n  GitHubMobile = 'github_mobile',\n  TotpApp = 'app',\n  TotpSms = 'sms',\n}\n\n@controller\nexport class SudoCredentialOptionsElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr initialState: string\n  @attr webauthnAvailable: string\n  @attr githubMobileAvailable: string\n  @attr totpAppAvailable: string\n  @attr totpSmsAvailable: string\n  @attr githubMobilePromptUrl: string\n  @attr githubMobileGenericErrorMessage: string\n  @attr smsGenericErrorMessage: string\n  @attr genericErrorMessage: string\n  @attr totpSmsTriggerUrl: string\n\n  @target flashErrorMessageContainer: HTMLElement\n  @target flashErrorMessageText: HTMLElement\n  @target webauthnContainer: HTMLElement\n  @target githubMobileContainer: HTMLElement\n  @target githubMobileLoading: HTMLElement\n  @target githubMobileLanding: HTMLElement\n  @target totpAppContainer: HTMLElement\n  @target totpSmsContainer: HTMLElement\n  @target totpSmsLanding: HTMLElement\n  @target passwordContainer: HTMLElement\n  @target githubMobileNoChallengeMessage: HTMLElement\n  @target githubMobileChallengeMessage: HTMLElement\n  @target githubMobileChallengeValue: HTMLElement\n\n  @target webauthnNav: HTMLElement\n  @target githubMobileNav: HTMLElement\n  @target totpAppNav: HTMLElement\n  @target totpSmsNav: HTMLElement\n  @target totpSmsResendNav: HTMLElement\n  @target passwordNav: HTMLElement\n\n  @target webauthnGet: WebauthnGetElement\n  @target loginField: HTMLInputElement\n  @target passwordField: HTMLInputElement\n\n  #currentState: SudoCredentialOptionsElementState\n\n  connectedCallback() {\n    // set state explicitly on load to get evaluated webauthn warnings, etc\n    const stateKey = this.initialState as SudoCredentialOptionsElementState\n    this.#currentState = stateKey\n    this.reRenderPrompt(true)\n  }\n\n  reRenderPrompt(initialLoad = false): void {\n    this.resetPrompt()\n    try {\n      switch (this.#currentState) {\n        case SudoCredentialOptionsElementState.WebAuthn:\n          this.renderWebauthnOption()\n          break\n        case SudoCredentialOptionsElementState.GitHubMobile:\n          this.renderGitHubMobileOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.TotpApp:\n          this.renderTotpAppOption()\n          break\n        case SudoCredentialOptionsElementState.TotpSms:\n          this.renderTotpSmsOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.Password:\n        default:\n          this.renderPasswordOption()\n          break\n      }\n      this.reRenderNavContainer()\n    } catch (e) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      this.handleUnexpectedPromptError(e)\n    }\n  }\n\n  handleUnexpectedPromptError(unexpectedError: Error) {\n    let errorMessage = ''\n\n    switch (this.#currentState) {\n      case SudoCredentialOptionsElementState.GitHubMobile:\n        errorMessage = this.githubMobileGenericErrorMessage\n        break\n      case SudoCredentialOptionsElementState.TotpSms:\n        errorMessage = this.smsGenericErrorMessage\n        break\n      default:\n        errorMessage = this.genericErrorMessage\n    }\n\n    // if we have an unexpected error, show a generic error message\n    // and try the password prompt as a fallback to prevent the user from being presented with an empty prompt / no options\n    if (unexpectedError && this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.renderPasswordOptionWithError(errorMessage)\n      throw unexpectedError // re-throw the error so we can capture any unexpected errors with failbot/sentry\n    }\n  }\n\n  renderPasswordOptionWithError(errorMessage: string): void {\n    this.showPassword()\n    this.showErrorMessage(errorMessage)\n  }\n\n  resetPrompt(): void {\n    this.hideErrorMessage()\n    if (this.isWebAuthnAvailable()) {\n      this.hideWebAuthn()\n    }\n    if (this.isGitHubMobileAvailable()) {\n      this.hideGitHubMobile()\n    }\n    if (this.isTotpAppAvailable()) {\n      this.hideTotpApp()\n    }\n    if (this.isTotpSmsAvailable()) {\n      this.hideTotpSms()\n    }\n    this.hidePassword()\n  }\n\n  hideWebAuthn() {\n    this.safeSetElementVisibility(this.webauthnContainer, false)\n    this.safeSetElementVisibility(this.webauthnNav, false)\n  }\n\n  hideGitHubMobile() {\n    this.safeSetElementVisibility(this.githubMobileContainer, false)\n    this.safeSetElementVisibility(this.githubMobileNav, false)\n    this.safeSetElementVisibility(this.githubMobileLoading, false)\n    this.safeSetElementVisibility(this.githubMobileLanding, false)\n  }\n\n  hideTotpApp() {\n    this.safeSetElementVisibility(this.totpAppContainer, false)\n    this.safeSetElementVisibility(this.totpAppNav, false)\n  }\n\n  hideTotpSms() {\n    this.safeSetElementVisibility(this.totpSmsContainer, false)\n    this.safeSetElementVisibility(this.totpSmsLanding, false)\n    this.safeSetElementVisibility(this.totpSmsNav, false)\n    this.safeSetElementVisibility(this.totpSmsResendNav, false)\n  }\n\n  hidePassword() {\n    this.safeSetElementVisibility(this.passwordContainer, false)\n    this.safeSetElementVisibility(this.passwordNav, false)\n  }\n\n  reRenderNavContainer() {\n    if (this.isWebAuthnAvailable() && this.#currentState !== SudoCredentialOptionsElementState.WebAuthn) {\n      this.safeSetElementVisibility(this.webauthnNav, true)\n    }\n    if (this.isGitHubMobileAvailable() && this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile) {\n      this.safeSetElementVisibility(this.githubMobileNav, true)\n    }\n    if (this.isTotpAppAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpApp) {\n      this.safeSetElementVisibility(this.totpAppNav, true)\n    }\n    if (this.isTotpSmsAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsNav, true)\n    }\n    if (this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.safeSetElementVisibility(this.passwordNav, true)\n    }\n  }\n\n  renderWebauthnOption(): void {\n    this.safeSetElementVisibility(this.webauthnContainer, true)\n    this.webauthnGet?.setState(supported() ? State.Ready : State.Unsupported)\n  }\n\n  renderGitHubMobileOption(initialLoad: boolean): void {\n    try {\n      resetGitHubMobilePrompt()\n    } catch {\n      // ignore errors\n    }\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the GH mobile auth request\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.githubMobileLoading, false)\n      this.safeSetElementVisibility(this.githubMobileLanding, true)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.githubMobileLoading, true)\n      this.safeSetElementVisibility(this.githubMobileLanding, false)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n      this.initiateGitHubMobileAuthRequest()\n    }\n  }\n\n  renderTotpSmsOption(initialLoad: boolean): void {\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the text message\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.totpSmsLanding, true)\n      this.safeSetElementVisibility(this.totpSmsContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.totpSmsLanding, false)\n      this.safeSetElementVisibility(this.totpSmsContainer, true)\n      this.initiateTotpSmsRequest()\n    }\n  }\n\n  renderTotpAppOption(): void {\n    this.safeSetElementVisibility(this.totpAppContainer, true)\n  }\n\n  renderPasswordOption(): void {\n    this.safeSetElementVisibility(this.passwordContainer, true)\n    if (this.loginField) {\n      this.loginField.focus()\n    } else {\n      this.passwordField?.focus()\n    }\n  }\n\n  hasMultipleOptions(): boolean {\n    return (\n      this.isWebAuthnAvailable() ||\n      this.isGitHubMobileAvailable() ||\n      this.isTotpAppAvailable() ||\n      this.isTotpSmsAvailable()\n    )\n  }\n\n  isWebAuthnAvailable(): boolean {\n    return this.webauthnAvailable === 'true'\n  }\n\n  isGitHubMobileAvailable(): boolean {\n    return this.githubMobileAvailable === 'true'\n  }\n\n  isTotpAppAvailable(): boolean {\n    return this.totpAppAvailable === 'true'\n  }\n\n  isTotpSmsAvailable(): boolean {\n    return this.totpSmsAvailable === 'true'\n  }\n\n  showWebauthn(): void {\n    this.#currentState = SudoCredentialOptionsElementState.WebAuthn\n    this.reRenderPrompt()\n  }\n\n  showGitHubMobile(): void {\n    this.#currentState = SudoCredentialOptionsElementState.GitHubMobile\n    this.reRenderPrompt()\n  }\n\n  showTotpApp(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpApp\n    this.reRenderPrompt()\n  }\n\n  showTotpSms(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpSms\n    this.reRenderPrompt()\n  }\n\n  showPassword(): void {\n    this.#currentState = SudoCredentialOptionsElementState.Password\n    this.reRenderPrompt()\n  }\n\n  githubMobileRetry(e: Event): void {\n    e.preventDefault()\n    this.showGitHubMobile()\n  }\n\n  async initiateGitHubMobileAuthRequest(): Promise<void> {\n    const url = this.githubMobilePromptUrl\n    const csrfToken = (document.getElementById('sudo-credential-options-github-mobile-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n        return\n      }\n\n      const json = await response.json()\n      const hasChallenge = !!json.challenge\n\n      this.safeSetElementVisibility(this.githubMobileNoChallengeMessage, !hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeMessage, hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeValue, hasChallenge)\n\n      if (hasChallenge) {\n        this.githubMobileChallengeValue.textContent = json.challenge\n      }\n\n      const el = document.getElementsByClassName('js-poll-github-mobile-sudo-authenticate')[0]!\n      initializeMobileAuthRequestStatusPoll(\n        el,\n        () => this.mobileApprovedHandler(),\n        (message: string) => this.mobileFailHandler(message),\n        () => this.mobileCancelCheck(),\n      )\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n      }\n    } finally {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.safeSetElementVisibility(this.githubMobileLoading, false)\n        this.safeSetElementVisibility(this.githubMobileContainer, true)\n      }\n    }\n  }\n\n  async resendTotpSms(): Promise<void> {\n    this.hideErrorMessage()\n    // start the spinner\n    smsSending()\n    try {\n      await this.initiateTotpSmsRequest(true)\n    } catch (e) {\n      // errors are handled in the initiateTotpSmsRequest method\n    }\n    // always stop the spinner\n    document.body.classList.remove('is-sending')\n  }\n\n  async initiateTotpSmsRequest(isResend = false): Promise<void> {\n    const url = new URL(this.totpSmsTriggerUrl, window.location.origin)\n    if (isResend) {\n      url.searchParams.set('resend', 'true')\n    }\n    const csrfToken = (document.getElementById('sudo-credential-options-sms-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        const responseJson = await response.json()\n        this.showErrorMessage(responseJson.error)\n      } else if (this.#currentState === SudoCredentialOptionsElementState.TotpSms && isResend) {\n        smsSuccess()\n      }\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        this.showErrorMessage(this.smsGenericErrorMessage)\n      }\n    }\n    if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsResendNav, true)\n    }\n  }\n\n  mobileApprovedHandler(): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      const form = this.githubMobileContainer.getElementsByTagName('form')[0]!\n      requestSubmit(form)\n    }\n  }\n\n  mobileFailHandler(message: string): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      this.showErrorMessage(message)\n      showGitHubMobileErrorState()\n    }\n  }\n\n  mobileCancelCheck(): boolean {\n    return this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile\n  }\n\n  safeSetElementVisibility(elem: HTMLElement, visible: boolean): boolean {\n    if (elem) {\n      elem.hidden = !visible\n      return true\n    }\n    return false\n  }\n\n  showErrorMessage(message: string): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = message\n      this.safeSetElementVisibility(this.flashErrorMessageContainer, true)\n    }\n  }\n\n  hideErrorMessage(): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = ''\n    }\n    this.safeSetElementVisibility(this.flashErrorMessageContainer, false)\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nlet unreadCount = 0\n\nfunction markThreadAsRead() {\n  if (!document.hasFocus()) return\n  const form = document.querySelector('.js-timeline-marker-form')\n  if (form && form instanceof HTMLFormElement) requestSubmit(form)\n}\n\nconst observer =\n  'IntersectionObserver' in window\n    ? new IntersectionObserver(\n        function (entries) {\n          for (const entry of entries) {\n            if (entry.isIntersecting) {\n              clearUnread(entry.target)\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: 1.0,\n        },\n      )\n    : null\n\nobserve('.js-unread-item', {\n  constructor: HTMLElement,\n  add(el) {\n    unreadCount++\n    if (observer) {\n      observer.observe(el)\n    }\n  },\n  remove(el) {\n    unreadCount--\n    if (observer) {\n      observer.unobserve(el)\n    }\n    if (unreadCount === 0) {\n      markThreadAsRead()\n    }\n  },\n})\n\nfunction clearUnread(el: Element) {\n  el.classList.remove('js-unread-item', 'unread-item')\n}\n\n// Mark any unread comments as read if the user has marked the thread as read\n// in another tab or remotely via email notification.\nobserve('.js-discussion[data-channel-target]', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const target = event.target as Element\n      const data = (event as CustomEvent).detail.data\n      if (target.getAttribute('data-channel-target') === data.gid) {\n        for (const item of document.querySelectorAll('.js-unread-item')) {\n          clearUnread(item)\n        }\n      }\n    }),\n})\n","// Unread Item Counter\n//\n// Keeps count of how many unread items are present throughout the page. The\n// count is reflected in the page title automatically.\n//\n// To increase or decrease the page title counter, it's as simple as adding or\n// removing the `.js-unread-item` class from an element. The counter is reset and\n// the page title is cleared when there are no more elements with the\n// `.js-unread-item` class present.\n//\n// Markup\n//\n// ``` html\n// <div class=\"comment js-comment js-unread-item\">\n//   :metal:\n// </div>\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nlet unreadCounter = 0\nconst titleRe = /^\\(\\d+\\)\\s+/\n\nfunction updateTitle() {\n  const prefix = unreadCounter ? `(${unreadCounter}) ` : ''\n  if (document.title.match(titleRe)) {\n    document.title = document.title.replace(titleRe, prefix)\n  } else {\n    document.title = `${prefix}${document.title}`\n  }\n}\n\nobserve('.js-unread-item', {\n  add() {\n    unreadCounter++\n    updateTitle()\n  },\n  remove() {\n    unreadCounter--\n    updateTitle()\n  },\n})\n","//\n// Updatable Content\n//\n// Markup\n//\n//     <div class=\"js-socket-channel js-updatable-content\"\n//          data-channel=\"pull:123\"\n//          data-url=\"/pull/123?partial=commits\">\n//     </div>\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {makeSocketMessageHandler} from '@github-ui/alive-socket-channel'\n\nconst handleSocketMessage = makeSocketMessageHandler()\n\nobserve('.js-socket-channel.js-updatable-content', {\n  subscribe: el => fromEvent(el, 'socket:message', handleSocketMessage),\n})\n","import {registerStaleRecords, replaceContent} from '@github-ui/updatable-content'\nimport {ready} from '@github-ui/document-ready'\nimport {replaceState} from '@github-ui/browser-history-state'\n\nasync function reapplyPreviouslyUpdatedContent() {\n  if (!history.state || !history.state.staleRecords) return\n  await ready\n  for (const url in history.state.staleRecords) {\n    for (const urlTarget of document.querySelectorAll(\n      `.js-updatable-content [data-url='${url}'], .js-updatable-content[data-url='${url}']`,\n    )) {\n      const data = history.state.staleRecords[url]\n      if (urlTarget instanceof HTMLElement) replaceContent(urlTarget, data, true)\n    }\n  }\n  replaceState(null, '', location.href)\n}\n\nwindow.addEventListener('pagehide', registerStaleRecords)\n\ntry {\n  reapplyPreviouslyUpdatedContent()\n} catch {\n  // ignore\n}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('upload:setup', '.js-upload-avatar-image', function (event) {\n  const {form} = event.detail\n  const orgId = event.currentTarget.getAttribute('data-alambic-organization')\n  const ownerType = event.currentTarget.getAttribute('data-alambic-owner-type')\n  const ownerId = event.currentTarget.getAttribute('data-alambic-owner-id')\n  if (orgId) {\n    form.append('organization_id', orgId)\n  }\n  if (ownerType) {\n    form.append('owner_type', ownerType)\n  }\n  if (ownerId) {\n    form.append('owner_id', ownerId)\n  }\n})\n\non('upload:complete', '.js-upload-avatar-image', function (event) {\n  const {attachment} = event.detail\n  const url = `/settings/avatars/${attachment.id}`\n  dialog({content: fetchSafeDocumentFragment(document, url), detailsClass: 'upload-avatar-details'})\n})\n\non('dialog:remove', '.upload-avatar-details', async function (element) {\n  const cropForm = element.currentTarget.querySelector('#avatar-crop-form')!\n  const id = cropForm.getAttribute('data-alambic-avatar-id')!\n  const url = `/settings/avatars/${id}?op=destroy`\n\n  const csrfToken = element.currentTarget.querySelector('.js-avatar-post-csrf')!.getAttribute('value')!\n\n  const request = new Request(url, {\n    method: 'POST',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  await self.fetch(request)\n})\n","// Support linking to named anchors in user content\n//\n// Named elements in user content are prefixed with \"user-content-\" to prevent\n// DOM clobbering. This allows users to link to the unprefixed named anchors by\n// listening for hashchange and, when when no elements with an ID or name of the\n// given hash exist, looks for an element with a prefixed name.\n//\n// See https://github.com/github/github/issues/23103 for more information.\n\nimport {decodeFragmentValue, findElementByFragmentName} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\nimport {scrollIntoView} from '../sticky-scroll-into-view'\nimport {getUserContentScrolling} from '@github-ui/allow-user-content-scrolling'\n\nfunction hashchange() {\n  if (!getUserContentScrolling()) {\n    return\n  }\n\n  if (document.querySelector(':target')) {\n    return\n  }\n  const hash = decodeFragmentValue(location.hash)\n\n  // Auto-generated wiki ToCs prefix the hash with \"user-content-\". This allows users to link to the unprefixed named\n  // by clicking the markdown header  or by copying the link from the ToC.\n  const normalizedHash = hash.startsWith('user-content-') ? hash : `user-content-${hash}`\n\n  // Check for an element with the given hash as is to support links from auto-generated wiki ToCs, if not found,\n  // check for an element with the hash in lowercase to support markdown links i.e. [text](url).\n  const target =\n    findElementByFragmentName(document, normalizedHash) ??\n    findElementByFragmentName(document, normalizedHash.toLowerCase())\n\n  if (target) {\n    scrollIntoView(target)\n  }\n}\n\n// Scroll to anchor when clicked on page.\nwindow.addEventListener('hashchange', hashchange)\n\n// Scroll to anchor on turbo navigation\ndocument.addEventListener('turbo:load', hashchange)\n\n// Scroll to anchor on page load.\n;(async function () {\n  await ready\n  hashchange()\n})()\n\n// Scroll to anchor when clicking on a link that has the exact same fragment\n// identifier as already present in the URL. This won't trigger `hashchange`,\n// so we need to scroll manually.\non('click', 'a[href]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  if (currentTarget.href === location.href && location.hash.length > 1) {\n    setTimeout(function () {\n      if (!event.defaultPrevented) hashchange()\n    })\n  }\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nasync function load() {\n  await import('../user-status-submit')\n}\n\nobserve('.js-user-status-container, .js-load-user-status-submit', {\n  subscribe: el => fromEvent(el, 'click', load, {once: true}),\n})\n\n// if the form is added to the page without container click, load the submit behavior\nobserve('.user-status-dialog-fragment', {\n  add: load,\n})\n","// User list dialogs\n//\n// Handle user list creation, deletion, and editing.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\nimport {hasDirtyFields} from '@github-ui/has-interactions'\nimport {onInput} from '@github-ui/onfocus'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '@github-ui/updatable-content'\nimport {updateSocialCounts} from './social'\n\n// Communicate a generic error, not associated with a specific attribute, to the user. This is used if the\n// server does something unexpected, like returning a 500 error or reporting an unrecognized attribute.\nfunction setFlashError(form: HTMLFormElement, message?: string) {\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.textContent = message || flash.getAttribute('data-generic-message')\n    flash.hidden = false\n  }\n}\n\n// Clear any validation errors from the form. If a specific formGroup is provided, only clear errors from that\n// group. Otherwise, clear errors from all groups. In either case, flash errors should be cleared as well.\nfunction resetValidation(form: HTMLFormElement, formGroup?: HTMLElement) {\n  const container = formGroup || form\n  const notes = container.querySelectorAll<HTMLElement>('.js-user-list-error')\n  for (const note of notes) {\n    note.hidden = true\n  }\n\n  const groups = formGroup ? [formGroup] : form.querySelectorAll<HTMLElement>('.errored.js-user-list-input-container')\n  for (const group of groups) {\n    group.classList.remove('errored')\n  }\n\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.hidden = true\n  }\n}\n\n// Wire up remote form submission. Clear preexisting validation errors from the form, submit it with XHR, and interpret\n// the server's response. On success, reload the page. On failure, attempt to interpret the response as validation\n// errors and display them next to the appropriate inputs.\nremoteForm('.js-user-list-form', async function (form, wants) {\n  resetValidation(form)\n\n  const submitButton = form.querySelector<HTMLButtonElement>('[data-submitting-message]')\n  const originalButtonText = submitButton?.textContent\n  if (submitButton) {\n    // We can't use data-disable-with here because the button is re-enabled immediately after the response is received,\n    // but before we have a chance to handle it and redirect or swap out the form contents. This results in a\n    // disorienting jitter.\n    submitButton.textContent = submitButton.getAttribute('data-submitting-message')\n    submitButton.disabled = true\n  }\n\n  for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n    input.disabled = true\n  }\n\n  try {\n    const response = await wants.html()\n\n    // Let a containing element determine how to handle the response.\n    fire(form, 'user-list-form:success', response.html)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response?.status === 422) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      form.replaceWith(error.response.html)\n    } else {\n      setFlashError(form)\n\n      if (submitButton) {\n        if (originalButtonText) submitButton.textContent = originalButtonText\n        submitButton.disabled = false\n      }\n\n      for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n        input.disabled = false\n      }\n    }\n  }\n})\n\non('user-list-form:success', '.js-follow-list', event => {\n  const responseBody = event.detail\n  const targetUrlElement =\n    responseBody instanceof DocumentFragment ? responseBody.querySelector<HTMLAnchorElement>('.js-target-url') : null\n  if (targetUrlElement?.href) {\n    location.href = targetUrlElement.href\n  } else {\n    location.reload()\n  }\n})\n\n// Dismiss a validation error from a form input when you start changing it.\nfunction clearErrorsFromInput(event: Event) {\n  if (!(event.currentTarget instanceof HTMLElement)) {\n    return\n  }\n\n  const form = event.currentTarget.closest<HTMLFormElement>('.js-user-list-form')\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  if (form && formGroup) {\n    resetValidation(form, formGroup)\n  }\n}\n\nonInput('.js-user-list-form input', clearErrorsFromInput)\nonInput('.js-user-list-form textarea', clearErrorsFromInput)\n\n// Unhide the .note element containing the validation error reported by <auto-check> when there's an error to show.\non('auto-check-error', '.js-user-list-form input', function (event) {\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  const note = formGroup?.querySelector<HTMLElement>('.js-user-list-error')\n  if (note) {\n    note.hidden = false\n  }\n})\n\n// Star button UserList menu\n\n// Given a collection of UserList menu root elements, construct a map grouping them by the repository ID each\n// corresponds to.\nfunction groupRootsByRepositoryId(roots: Iterable<HTMLElement>): Map<string, HTMLElement[]> {\n  const rootsByRepositoryId = new Map<string, HTMLElement[]>()\n  for (const root of roots) {\n    const repositoryId = root\n      .querySelector<HTMLInputElement>('.js-user-lists-create-trigger')\n      ?.getAttribute('data-repository-id')\n    if (repositoryId) {\n      const existingRoots = rootsByRepositoryId.get(repositoryId)\n      if (existingRoots) {\n        existingRoots.push(root)\n      } else {\n        rootsByRepositoryId.set(repositoryId, [root])\n      }\n    }\n  }\n  return rootsByRepositoryId\n}\n\n// Perform a POST request to the batch-render endpoint to render a collection of UserList menus corresponding to the\n// repositories. Asynchronously returns a Map<repository ID> => rendered HTML generated for that repository.\n//\n// Rejects its promise on network errors, but returns an empty map on server errors.\nasync function requestMenuBatchRender(\n  batchUpdateUrl: string,\n  csrfToken: string,\n  repositoryIds: Iterable<string>,\n): Promise<Map<string, DocumentFragment>> {\n  const postData = new FormData()\n\n  // eslint-disable-next-line github/authenticity-token\n  postData.set('authenticity_token', csrfToken)\n  for (const repositoryId of repositoryIds) {\n    postData.append('repository_ids[]', repositoryId)\n  }\n\n  const response = await fetch(batchUpdateUrl, {\n    method: 'POST',\n    body: postData,\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  const updatedMenuContents = new Map<string, DocumentFragment>()\n  if (response.ok) {\n    const json = await response.json()\n    for (const key in json) {\n      updatedMenuContents.set(key, parseHTML(document, json[key]))\n    }\n  }\n  return updatedMenuContents\n}\n\n// Replace the contents of UserList menus in the DOM with the updated, rendered HTML generated for each by the batch\n// render endpoint.\nfunction replaceUserListMenuRoots(\n  renderedMenuContents: Map<string, DocumentFragment>,\n  rootsByRepositoryId: Map<string, HTMLElement[]>,\n) {\n  for (const [repositoryId, updatedMenu] of renderedMenuContents.entries()) {\n    const matchingRoots = rootsByRepositoryId.get(repositoryId) || []\n    for (const root of matchingRoots) {\n      root.replaceWith(matchingRoots.length === 1 ? updatedMenu : updatedMenu.cloneNode(true))\n    }\n  }\n}\n\n// Perform a single request to replace all UserList menus currently present in the DOM with updated versions from the\n// server.\n//\n// Expects a response in form of:\n//\n// {\n//   \"<repo id 0>\": \"<div> <!-- markup for menu for repo 0 --></div>\",\n//   \"<repo id 1>\": \"<div> <!-- markup for menu for repo 1 --></div>\",\n//   \"<repo id 2>\": \"<div> <!-- markup for menu for repo 2 --></div>\"\n// }\nasync function updateAllUserListMenus() {\n  const roots = document.querySelectorAll<HTMLElement>('.js-user-list-menu-content-root')\n  if (roots.length === 0) return\n\n  const batchUpdateUrl = roots[0]!.getAttribute('data-batch-update-url')\n  if (!batchUpdateUrl) return\n\n  const csrfToken = roots[0]!.querySelector<HTMLInputElement>('.js-user-list-batch-update-csrf')?.value\n  if (!csrfToken) return\n\n  const rootsByRepositoryId = groupRootsByRepositoryId(roots)\n  const repositoryIds = rootsByRepositoryId.keys()\n  const renderedMenuContents = await requestMenuBatchRender(batchUpdateUrl, csrfToken, repositoryIds)\n  if (renderedMenuContents.size > 0) {\n    replaceUserListMenuRoots(renderedMenuContents, rootsByRepositoryId)\n  }\n}\n\nfunction requestUserListMenuFormSubmit(form: HTMLFormElement) {\n  const promise = new Promise<void>((resolve, reject) => {\n    form.addEventListener('user-list-menu-form:success', () => resolve())\n    form.addEventListener('user-list-menu-form:error', error => reject(error))\n  })\n  requestSubmit(form)\n  return promise\n}\n\nfunction submitUserListFormOnToggle(event: Event) {\n  const detailsElement = event.target\n  if (!(detailsElement instanceof HTMLDetailsElement)) return\n  if (detailsElement.hasAttribute('open')) return\n\n  const form = detailsElement.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n  if (form && hasDirtyFields(form)) requestSubmit(form)\n\n  const triggerText = detailsElement.querySelector('.js-user-list-create-trigger-text')\n  if (triggerText) triggerText.textContent = ''\n}\n\non('toggle', '.js-user-list-menu', submitUserListFormOnToggle, {capture: true})\n\nonInput('.js-user-lists-menu-filter', (event: Event) => {\n  const target = event.currentTarget as HTMLInputElement\n  const value = target.value.trim()\n  const root = target.closest('.js-user-list-menu-content-root')\n  const triggerText = root?.querySelector('.js-user-list-create-trigger-text')\n\n  if (!triggerText) return\n  triggerText.textContent = value ? `\"${value}\"` : ''\n})\n\nremoteForm('.js-user-list-menu-form', async function (form, wants) {\n  let response: SimpleResponse\n  try {\n    response = await wants.json()\n  } catch (error) {\n    showGlobalError()\n    fire(form, 'user-list-menu-form:error', error)\n    return\n  }\n\n  // Update the star button state and counts if necessary.\n  // We only update the star count if the repo was just starred. Otherwise the count could jump every time you dismiss\n  // the menu, which would be jarring.\n  if (response.json.didStar) {\n    const togglerContainer = form.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = response.json.starCount\n    if (starCount) {\n      const socialContainer = form.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n  }\n\n  const menuContentRoot = form.closest<HTMLElement>('.js-user-list-menu-content-root[data-update-after-submit]')\n  if (menuContentRoot) {\n    // Reset checkbox state before potentially calling updateContent() to avoid the checkboxes being detected as \"dirty\"\n    // and terminating the update. They'll be checked in the updated content, assuming the repo was in fact added\n    // successfully.\n    for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-menu-item')) {\n      input.checked = input.defaultChecked\n    }\n  }\n\n  if (response.json.didCreate) {\n    // There's a new UserList to include in the menus now. Let's batch-update them all.\n    await updateAllUserListMenus()\n  } else if (menuContentRoot) {\n    // Otherwise, only update our local menu.\n    await updateContent(menuContentRoot)\n  }\n\n  fire(form, 'user-list-menu-form:success')\n})\n\n// Delete dialog\n\non('click', '.js-user-list-delete-confirmation-trigger', event => {\n  const {currentTarget} = event\n  const templateID = currentTarget.getAttribute('data-template-id')\n  if (!templateID) return\n\n  const template = document.getElementById(templateID)\n  if (!template || !(template instanceof HTMLTemplateElement)) return\n\n  const editDialog = currentTarget.closest<HTMLDetailsElement>('.js-edit-user-list-dialog')\n  if (editDialog) {\n    editDialog.open = false\n  }\n  const content = template.content.cloneNode(true)\n  const labelledBy = template.getAttribute('data-labelledby')!\n\n  dialog({content, labelledBy})\n})\n\n// Create dialog\n\non('click', '.js-user-lists-create-trigger', async function (event) {\n  const {currentTarget} = event\n  const template = document.querySelector<HTMLTemplateElement>('.js-user-list-create-dialog-template')\n  const repositoryId = event.currentTarget.getAttribute('data-repository-id')\n  const userListMenuRoot = currentTarget.closest<HTMLElement>('.js-user-list-menu-content-root')\n  const filter = userListMenuRoot?.querySelector<HTMLInputElement>('.js-user-lists-menu-filter')\n  const placeholderName = filter?.value.trim()\n\n  if (!template || !(template instanceof HTMLTemplateElement) || !repositoryId) {\n    // No template rendered on the page, or malformed button markup.\n    // Disable the button as something marginally better than silently doing nothing.\n    if (currentTarget instanceof HTMLButtonElement) {\n      currentTarget.disabled = true\n    }\n    return\n  }\n\n  const label = template.getAttribute('data-label')!\n\n  // Submit the form first if there are any dirty fields.\n  if (userListMenuRoot && hasDirtyFields(userListMenuRoot)) {\n    const userListMenuForm = userListMenuRoot.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n    if (userListMenuForm) await requestUserListMenuFormSubmit(userListMenuForm)\n  }\n\n  const content = new TemplateInstance(template, {repositoryId, placeholderName})\n  const dialogElement = await dialog({content, label})\n\n  dialogElement.addEventListener('user-list-form:success', async formEvent => {\n    const payload = (formEvent as CustomEvent).detail\n    if (!(payload instanceof DocumentFragment)) return\n\n    // Update the star button.\n    const urlTargetElement = payload.querySelector('.js-target-url')\n\n    const didStar = urlTargetElement?.getAttribute('data-did-star') === 'true'\n    if (!didStar) return\n\n    const togglerContainer = currentTarget.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = urlTargetElement?.getAttribute('data-star-count')\n    if (starCount) {\n      const socialContainer = currentTarget.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n\n    // Update all currently loaded user list menu contents to include the created list.\n    await updateAllUserListMenus()\n\n    // Then, dismiss the dialog.\n    const detailsElement = dialogElement.closest<HTMLDetailsElement>('details')\n    if (detailsElement) detailsElement.open = false\n  })\n})\n","import {hasDirtyFields} from '@github-ui/has-interactions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Add the 'data-warn-unsaved-changes' attribute to any form/container element\n// and it will be monitored for changes. If the user attempts to\n// navigate away from the page without first saving their changes, an alert\n// will warn them.\nobserve('[data-warn-unsaved-changes]', {\n  add(container) {\n    container.addEventListener('input', prepareUnsavedChangesWarning)\n    container.addEventListener('change', prepareUnsavedChangesWarning)\n    container.addEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.addEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.addEventListener('details-dialog-close', promptOnDialogClosing)\n    }\n  },\n  remove(container) {\n    container.removeEventListener('input', prepareUnsavedChangesWarning)\n    container.removeEventListener('change', prepareUnsavedChangesWarning)\n    container.removeEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.removeEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.removeEventListener('details-dialog-close', promptOnDialogClosing)\n      disableSaveChangesReminder()\n    }\n  },\n})\n\nfunction prepareUnsavedChangesWarning(event: Event) {\n  const currentTarget = event.currentTarget as Element\n\n  if (hasDirtyFields(currentTarget)) {\n    enableSaveChangesReminder(currentTarget)\n  } else {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction enableSaveChangesReminder(container: Element) {\n  // This message is ignored by most browsers.\n  // eslint-disable-next-line i18n-text/no-en\n  const message = container.getAttribute('data-warn-unsaved-changes') || 'Changes you made may not be saved.'\n\n  window.onbeforeunload = function (event: BeforeUnloadEvent): string {\n    event.returnValue = message\n    return message\n  }\n}\n\nfunction disableSaveChangesReminder() {\n  window.onbeforeunload = null\n}\n\nfunction disableSaveChangesReminderOnClosedDialogs({currentTarget}: Event) {\n  if (!(currentTarget as Element).hasAttribute('open')) {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction promptOnDialogClosing(event: Event) {\n  const dialog = event.currentTarget as Element\n  const details = dialog.closest('details[open]')\n  if (!details) {\n    return\n  }\n\n  let confirmed = true\n  const confirmationForms = dialog.querySelectorAll<HTMLFormElement>('form[data-warn-unsaved-changes]')\n  for (const form of confirmationForms) {\n    if (hasDirtyFields(form)) {\n      const message = form.getAttribute('data-warn-unsaved-changes')!\n      confirmed = confirm(message)\n      break\n    }\n  }\n\n  if (!confirmed) {\n    event.preventDefault()\n  }\n}\n","// Perform CSS transition once\n//\n// Examples\n//\n//   .foo.will-transition-once {\n//     transition: color ...;\n//   }\n//\n//   .foo.is-successful {\n//     background: green;\n//   }\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.will-transition-once', {\n  constructor: HTMLElement,\n  subscribe: el => fromEvent(el, 'transitionend', onTransitionEnd),\n})\n\nfunction onTransitionEnd(event: Event) {\n  const target = event.target as Element\n  target.classList.remove('will-transition-once')\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load issue/PR/discussion references to display the title for the tooltip from the server on hover.\n// If hovercards are enabled for the referenced type on this part of the DOM,\n// this behavior is bypassed in favor of the hovercard.\nasync function issueLabel(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n  const url = currentTarget.getAttribute('data-url')\n  if (!url || isHovercardEnabled(currentTarget)) {\n    return\n  }\n\n  const id = currentTarget.getAttribute('data-id') || ''\n  const text = currentTarget.textContent\n  const elements = document.querySelectorAll(`.js-issue-link[data-id='${id}']`)\n\n  for (const el of elements) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    const titleUrl = `${url}/title`\n    const response = await fetch(titleUrl, {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'application/json',\n      },\n    })\n    if (!response.ok) {\n      const responseError = new Error()\n      const statusText = response.statusText ? ` ${response.statusText}` : ''\n      responseError.message = `HTTP ${response.status}${statusText}`\n      throw responseError\n    }\n    const data = await response.json()\n    setLabel(elements, `${text}, ${data.title}`)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = (error.response != null ? error.response.status : undefined) || 500\n\n    const message = (() => {\n      switch (status) {\n        case 404:\n          return currentTarget.getAttribute('data-permission-text')\n        default:\n          return currentTarget.getAttribute('data-error-text')\n      }\n    })()\n\n    setLabel(elements, message || '')\n  }\n}\n\nfunction setLabel(elements: NodeList, text: string) {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.classList.add('tooltipped', 'tooltipped-ne')\n    el.setAttribute('aria-label', text)\n  }\n}\n\nfunction isHovercardEnabled(element: HTMLElement): boolean {\n  const hovercardType = element.getAttribute('data-hovercard-type')\n  switch (hovercardType) {\n    case 'issue':\n    case 'pull_request':\n      return !!element.closest('[data-issue-and-pr-hovercards-enabled]')\n    case 'discussion':\n      return !!element.closest('[data-discussion-hovercards-enabled]')\n    default:\n      return false\n  }\n}\n\nobserve('.js-issue-link', {\n  subscribe: el => fromEvent(el, 'mouseenter', issueLabel),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {onFocus, onInput, onKey} from '@github-ui/onfocus'\nimport {resetCharactersRemainingCounts, updateInputRemainingCharacters} from '../behaviors/characters-remaining'\nimport type {RGB} from 'color-convert/conversions'\nimport {changeValue} from '@github-ui/form-utils'\nimport convert from 'color-convert'\nimport {debounce} from '@github/mini-throttle'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {getUtf8StringLength} from '@github-ui/text'\nimport {remoteForm} from '@github/remote-form'\nimport {toggleDetailsTarget} from '../behaviors/details'\n\nfunction randomRGBColor(): RGB {\n  return [\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n  ]\n}\n\n// Given a button element and a hex color code, this will style the button and\n// the octicon within it based on the given color.\nfunction setColorSwatch(colorButton: HTMLButtonElement, rgb: RGB) {\n  const hsl = convert.rgb.hsl(rgb)\n  colorButton.style.setProperty('--label-r', rgb[0].toString())\n  colorButton.style.setProperty('--label-g', rgb[1].toString())\n  colorButton.style.setProperty('--label-b', rgb[2].toString())\n\n  colorButton.style.setProperty('--label-h', hsl[0].toString())\n  colorButton.style.setProperty('--label-s', hsl[1].toString())\n  colorButton.style.setProperty('--label-l', hsl[2].toString())\n}\n\n// Fill the color input field in the 'new label' modal when a button is clicked.\n// Sets the color of the button that acts as the preview of the chosen color.\nfunction setInputColorFromButton(clickedButton: HTMLButtonElement, rgb: RGB) {\n  // eslint-disable-next-line github/no-blur\n  clickedButton.blur()\n\n  const container = clickedButton.closest<HTMLElement>('form')!\n\n  const colorInput = container.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  changeValue(colorInput, `#${convert.rgb.hex(rgb)}`)\n\n  const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n}\n\nfunction addErrorToField(errorEl: HTMLElement, errorMessage: string) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.add('errored')\n  errorEl.textContent = errorMessage\n  errorEl.hidden = false\n}\n\nfunction removeErrorFromField(errorEl: HTMLElement) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.remove('errored')\n  errorEl.hidden = true\n}\n\nfunction showOrHideLabelError(errorSelector: string, form: HTMLFormElement, errorMessages?: string[] | null) {\n  const errorEl = form.querySelector<HTMLElement>(errorSelector)\n  if (!errorEl) {\n    return\n  }\n\n  if (errorMessages) {\n    addErrorToField(errorEl, errorMessages[0]!)\n  } else {\n    removeErrorFromField(errorEl)\n  }\n}\n\ninterface labelError {\n  name?: string[]\n  description?: string[]\n  color?: string[]\n}\n\nfunction showLabelErrors(form: HTMLFormElement, json: labelError) {\n  showOrHideLabelError('.js-label-name-error', form, json.name)\n  showOrHideLabelError('.js-label-description-error', form, json.description)\n  showOrHideLabelError('.js-label-color-error', form, json.color)\n}\n\nfunction hideLabelErrors(form: HTMLFormElement) {\n  showOrHideLabelError('.js-label-name-error', form, null)\n  showOrHideLabelError('.js-label-description-error', form, null)\n  showOrHideLabelError('.js-label-color-error', form, null)\n}\n\nfunction labelPreviewUrl(\n  baseUrl: string,\n  name: string,\n  color: string,\n  description: string | null,\n  labelID: string | null,\n): string {\n  const url = new URL(`${baseUrl}${encodeURIComponent(name)}`, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('color', color)\n  if (description) {\n    params.append('description', description)\n  }\n  if (labelID) {\n    params.append('id', labelID)\n  }\n  url.search = params.toString()\n  return url.toString()\n}\n\nfunction labelDescriptionFrom(form: HTMLFormElement): string | null {\n  let description = null\n  const descriptionInput = form.querySelector('.js-new-label-description-input')\n  if (descriptionInput instanceof HTMLInputElement && descriptionInput.value.trim().length > 0) {\n    description = descriptionInput.value.trim()\n  }\n  return description\n}\n\nfunction labelColorFrom(form: HTMLFormElement): string {\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  if (colorInput.checkValidity()) {\n    return colorInput.value.trim().replace(/^#/, '')\n  }\n  return 'ededed'\n}\n\nfunction labelNameFrom(form: HTMLFormElement, previewArea: HTMLElement): string {\n  const nameInput = form.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  let name = nameInput.value.trim()\n  if (name.length < 1) {\n    name = previewArea.getAttribute('data-default-name')!\n  }\n  return name\n}\n\nasync function updateLabelPreview(startEl: HTMLElement) {\n  const previewContainer = startEl.closest('.js-label-preview-container')\n  if (!previewContainer) {\n    return\n  }\n\n  const form = startEl.closest<HTMLFormElement>('.js-label-form')!\n  const fullErrorMessageEl = form.querySelector<HTMLElement>('.js-new-label-error')\n  const labelID = form.getAttribute('data-label-id')\n  const previewArea = previewContainer.querySelector<HTMLElement>('.js-label-preview')!\n  const name = labelNameFrom(form, previewArea)\n\n  // Default case of \"Label preview\" is also counted as 'invalid' but we still want to update the preview.\n  if (!form.checkValidity() && name !== 'Label preview') {\n    return\n  }\n\n  const color = labelColorFrom(form)\n  const description = labelDescriptionFrom(form)\n\n  const urlTemplate = previewArea.getAttribute('data-url-template')!\n  const url = labelPreviewUrl(urlTemplate, name, color, description, labelID)\n\n  if (previewContainer.hasAttribute('data-last-preview-url')) {\n    const lastPreviewUrl = previewContainer.getAttribute('data-last-preview-url')!\n    if (url === lastPreviewUrl) {\n      return\n    }\n  }\n\n  let fragment\n  try {\n    fragment = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = await error.response.json()\n    showLabelErrors(form, json)\n\n    if (fullErrorMessageEl) {\n      fullErrorMessageEl.textContent = json.message\n      fullErrorMessageEl.hidden = false\n    }\n\n    return\n  }\n\n  if (fullErrorMessageEl) {\n    fullErrorMessageEl.textContent = ''\n    fullErrorMessageEl.hidden = true\n  }\n\n  hideLabelErrors(form)\n\n  previewArea.textContent = ''\n  previewArea.appendChild(fragment)\n  previewContainer.setAttribute('data-last-preview-url', url)\n}\n\nfunction onLabelFormInputChange(event: Event) {\n  updateLabelPreview(event.target as HTMLInputElement)\n}\n\nfunction toggleBlankSlate(el: Element, show: boolean) {\n  const detailsContainer = el.closest<HTMLElement>('.js-details-container')!\n  detailsContainer.classList.toggle('is-empty', show)\n}\n\nfunction updateCount(delta: number) {\n  const counter = document.querySelector<HTMLElement>('.js-labels-count')!\n  const oldCount = Number(counter.textContent!)\n  const newCount = oldCount + delta\n  counter.textContent = newCount.toString()\n\n  const label = document.querySelector<HTMLElement>('.js-labels-label')!\n  label.textContent = label.getAttribute(newCount === 1 ? 'data-singular-string' : 'data-plural-string')\n  return newCount\n}\n\n// Update the preview text of the new label based on what the user types in the\n// label filter input.\nonInput('.js-label-filter-field', function (event) {\n  const filterInput = event.target as HTMLInputElement\n  const container = filterInput.closest<HTMLElement>('details-menu')!\n  const labelNameEl = container.querySelector('.js-new-label-name')\n  if (!labelNameEl) {\n    return\n  }\n  const labelName = filterInput.value.trim()\n  labelNameEl.textContent = labelName\n})\n\n// As the user filters existing labels, make sure the 'Add new label' and 'Edit labels'\n// links are visible as appropriate.\non('filterable:change', '.js-filterable-issue-labels', function (event) {\n  const menu = event.currentTarget.closest<HTMLElement>('details-menu')!\n  const addLabelButton = menu.querySelector<HTMLElement>('.js-add-label-button')\n  if (!addLabelButton) return\n\n  const filterInput = event.detail.inputField\n  const newLabelName = filterInput.value.trim().toLowerCase()\n\n  // TODO This could use namedItems.\n  let matchingExistingLabel = false\n  for (const input of menu.querySelectorAll('input[data-label-name]')) {\n    const labelName = input.getAttribute('data-label-name') || ''\n    if (labelName.toLowerCase() === newLabelName) {\n      matchingExistingLabel = true\n      break\n    }\n  }\n\n  addLabelButton.hidden = newLabelName.length === 0 || matchingExistingLabel\n})\n\n// Show the color swatches when the user focuses the color input field.\nonFocus('.js-new-label-color-input', function (input) {\n  const container = input.closest<HTMLElement>('form')!\n  const swatchesContainer = container.querySelector<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = false\n\n  input.addEventListener(\n    'blur',\n    function () {\n      swatchesContainer.hidden = true\n    },\n    {once: true},\n  )\n})\n\n// Update the color swatch as the user types new hex color codes manually into\n// the input.\nonInput('.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n  if (color.length < 1) {\n    return\n  }\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    input.classList.remove('color-fg-danger')\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  } else {\n    input.classList.add('color-fg-danger')\n  }\n})\n\n// Disable save button as the user types if they enter an invalid hex color code.\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  }\n  fire(input, 'change', false)\n\n  const form = input.closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-description-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\n// Get a random color for the new label when the user hits the button that acts as\n// a preview of the selected color.\non('click', '.js-new-label-color', async function (event) {\n  const colorButton = event.currentTarget as HTMLButtonElement\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(colorButton)\n})\n\n// Choose one of the predefined colors when it's clicked.\non('mousedown', '.js-new-label-color-swatch', function (event) {\n  const swatchButton = event.currentTarget as HTMLButtonElement\n  const color = swatchButton.getAttribute('data-color')!\n  setInputColorFromButton(swatchButton, convert.hex.rgb(color))\n  updateLabelPreview(swatchButton)\n\n  const swatchesContainer = swatchButton.closest<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = true\n})\n\non(\n  'toggle',\n  '.js-new-label-modal',\n  function (event) {\n    if ((event.target as Element).hasAttribute('open')) {\n      initLabelModal(event.target as Element)\n    }\n  },\n  {capture: true},\n)\n\n// When the new label form is displayed in the modal, set the label and its color\n// in the form fields. Also update the color of the color swatch.\nasync function initLabelModal(modal: Element) {\n  const labelNameInput = modal.querySelector<HTMLInputElement>('.js-new-label-name-input')\n  if (!labelNameInput) return\n\n  const colorInput = modal.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const rgb = randomRGBColor()\n  const hex = `#${convert.rgb.hex(rgb)}`\n  colorInput.value = hex\n  const colorButton = modal.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n\n  const labelNameEl = document.querySelector<HTMLElement>('.js-new-label-name')!\n  const labelName = labelNameEl.textContent!\n  changeValue(labelNameInput, labelName)\n  updateInputRemainingCharacters(labelNameInput)\n\n  updateLabelPreview(colorButton)\n}\n\n// When the user creates a new label, close the modal containing the 'new label'\n// form. Also update the list of available labels to choose from, so the user\n// can immediately apply their new label.\nremoteForm('.js-new-label-modal-form', async function (form, wants) {\n  const errorEl = form.querySelector<HTMLElement>('.js-new-label-error')!\n\n  let response\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    errorEl.textContent = json.message\n    errorEl.hidden = false\n  }\n\n  if (!response) {\n    return\n  }\n\n  errorEl.hidden = true // Hide error message for the form\n\n  // close modal containing the label form\n  document.querySelector<HTMLElement>('.js-new-label-modal')!.removeAttribute('open')\n\n  const menuContent = document.querySelector<HTMLElement>('.js-issue-labels-menu-content')!\n  const list = menuContent.querySelector<HTMLElement>('.js-filterable-issue-labels')!\n  const input = response.html.querySelector('input')\n  list.prepend(response.html)\n\n  // indicate to the filter-sort-list module that the list content has changed\n  list.classList.add('filter-sort-list-refresh')\n\n  // A selected menu item is inserted programmatically so we need to trigger a\n  // change event, which when trigger a details-menu-selected event.\n  if (input) input.dispatchEvent(new Event('change', {bubbles: true}))\n\n  const field = menuContent.querySelector<HTMLInputElement>('.js-label-filter-field')!\n  field.value = field.defaultValue\n  field.focus()\n})\n\n// New and Edit remote form\n// Click \"Cancel\" leaves \"edit mode\"\non('click', '.js-edit-label-cancel', function (event) {\n  const form = (event.target as Element).closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n  form.reset()\n\n  // Grab the color we just resetted to and set the background color of the\n  // refresh button to that color since resetting the form doesn't do that for us\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const color = colorInput.value\n  const refreshButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(refreshButton, convert.hex.rgb(color))\n\n  resetCharactersRemainingCounts(form)\n  updateLabelPreview(colorInput)\n\n  // If editing an existing label, hide the form on Cancel:\n  const item = event.currentTarget.closest('.js-labels-list-item')\n  if (item) {\n    const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n    /* eslint-disable-next-line github/no-d-none */\n    editForm.classList.add('d-none')\n\n    const labelPreview = item.querySelector('.js-label-preview')\n    if (labelPreview) {\n      /* eslint-disable-next-line github/no-d-none */\n      labelPreview.classList.add('d-none')\n\n      const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n      /* eslint-disable-next-line github/no-d-none */\n      labelLink.classList.remove('d-none')\n    }\n\n    const elementsToShow = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n    for (const el of elementsToShow) {\n      el.hidden = !el.hidden\n    }\n  }\n})\n\n// Replace item row with contents from server on Edit\nremoteForm('.js-update-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  hideLabelErrors(form)\n\n  const item = form.closest<HTMLElement>('.js-labels-list-item')!\n  item.replaceWith(response.html)\n})\n\n// Add new label to list and clear out the form\nremoteForm('.js-create-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  form.reset()\n  hideLabelErrors(form)\n\n  document.querySelector<HTMLElement>('.js-label-list')!.prepend(response.html)\n\n  updateCount(+1)\n\n  toggleBlankSlate(form, false)\n\n  const colorButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(form.querySelector<HTMLInputElement>('.js-new-label-name-input')!)\n\n  resetCharactersRemainingCounts(form)\n\n  const detailsContainer = form.closest('.js-details-container')\n  if (detailsContainer instanceof HTMLElement) {\n    toggleDetailsTarget(detailsContainer)\n  }\n})\n\n// Click 'New label' button\non('click', '.js-details-target-new-label', function () {\n  const createForm = document.querySelector<HTMLElement>('.js-create-label')!\n  const nameInput = createForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n})\n\n// Click \"Edit\" enters \"edit mode\"\non('click', '.js-edit-label', function (event) {\n  const item = event.currentTarget.closest<HTMLElement>('.js-labels-list-item')!\n  const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n  /* eslint-disable-next-line github/no-d-none */\n  editForm.classList.remove('d-none')\n  const nameInput = editForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n\n  const labelPreview = item.querySelector('.js-label-preview')\n  if (labelPreview) {\n    /* eslint-disable-next-line github/no-d-none */\n    labelPreview.classList.remove('d-none')\n\n    const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n    /* eslint-disable-next-line github/no-d-none */\n    labelLink.classList.add('d-none')\n  }\n\n  const elementsToHide = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n  for (const el of elementsToHide) {\n    el.hidden = !el.hidden\n  }\n})\n\n// Delete remote form\nremoteForm('.js-delete-label', async function (form, wants) {\n  const row = form.closest<HTMLElement>('.js-labels-list-item')!\n  row.querySelector<HTMLElement>('.js-label-delete-spinner')!.hidden = false\n  await wants.text()\n  const newCount = updateCount(-1)\n  toggleBlankSlate(form, newCount === 0)\n  row.remove()\n})\n\nconst delayedOnLabelFormInputChange = debounce(onLabelFormInputChange, 500)\n\n// Handle the user typing in label fields:\non('suggester:complete', '.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-description-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-color-input', delayedOnLabelFormInputChange)\n\n// Limit length of label names in the way Rails does with model validations; allows emoji:\nonKey('keypress', '.js-new-label-name-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const limit = parseInt(input.getAttribute('data-maxlength')!)\n\n  if (getUtf8StringLength(input.value) >= limit) {\n    event.preventDefault()\n  }\n})\n\n// Exclude labels on the issues page label filter\non('click', '.js-issues-label-select-menu-item', function (event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.altKey && !event.shiftKey) return\n\n  event.preventDefault()\n  event.stopPropagation()\n\n  if (event.altKey) {\n    window.location.href = new URL(\n      event.currentTarget.getAttribute('data-excluded-url')!,\n      window.location.origin,\n    ).toString()\n  }\n\n  // Users can shift click to add more labels to a group\n  if (event.shiftKey) {\n    window.location.href = new URL(\n      event.currentTarget.getAttribute('data-included-url')!,\n      window.location.origin,\n    ).toString()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonKey('keydown', '.js-issues-label-select-menu-item', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Enter') return\n  if (!event.altKey && !event.shiftKey) return\n\n  const anchor = event.currentTarget\n  event.preventDefault()\n  event.stopPropagation()\n  if (anchor instanceof HTMLAnchorElement) {\n    if (event.altKey) {\n      window.location.href = new URL(anchor.getAttribute('data-excluded-url')!, window.location.origin).toString()\n    }\n\n    if (event.shiftKey) {\n      window.location.href = new URL(anchor.getAttribute('data-included-url')!, window.location.origin).toString()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\non(\n  'click',\n  '.js-open-label-creation-modal',\n  async function (event) {\n    // Prevent menu from closing\n    event.stopImmediatePropagation()\n    const modal = await dialog({\n      content: document.querySelector<HTMLTemplateElement>('.js-label-creation-template')!.content.cloneNode(true),\n      detailsClass: 'js-new-label-modal',\n    })\n    initLabelModal(modal)\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Show/hide event settings when the user's overall thread subscription option changes.\non('change', '.js-thread-notification-setting', toggleEventSettings)\n\n// Validate event settings when the user's event selection changes.\non('change', '.js-custom-thread-notification-option', toggleEventSettings)\n\n// Show/hide event settings when the user dismisses the form.\non('reset', '.js-custom-thread-settings-form', toggleEventSettings)\n\nfunction toggleEventSettings() {\n  const eventSettingsVisible = document.querySelector<HTMLInputElement>('.js-reveal-custom-thread-settings')!.checked\n  const noEventSelected = !document.querySelector('.js-custom-thread-notification-option:checked')\n\n  const eventSettingsContainer = document.querySelector<HTMLElement>('.js-custom-thread-settings')!\n  const checkbox = document.querySelector<HTMLInputElement>('[data-custom-option-required-text]')!\n  const message =\n    eventSettingsVisible && noEventSelected ? checkbox.getAttribute('data-custom-option-required-text')! : ''\n\n  checkbox.setCustomValidity(message)\n  eventSettingsContainer.hidden = !eventSettingsVisible\n}\n","import {controller, target} from '@github/catalyst'\n\n/**\n * CollapsibleSidebarWidget creates a widget in the sidebar of which\n * content is collapsible and is loaded upon opening.\n *\n * Four classes must be set, they are scoped to the HTML element <collapsible-sidebar-widget>\n *  - .collapsible-sidebar-widget-button (the button toggling open/close state)\n *  - .collapsible-sidebar-widget-content (the inner HTML to load)\n *  - .collapsible-sidebar-widget-loader (the element that is shown while loading)\n *  - .collapsible-sidebar-widget-indicator (the element that indicates open/close)\n *\n * One class is optional\n * - .collapsible-sidebar-widget-active-hidden (hides an element when the content is open)\n *\n * Notice: This is not done in pure CSS, because we need to guard\n * the loading of the content.\n *\n * @example\n * ```html\n * <collapsible-sidebar-widget url=\"/your/url\">\n *  <div>\n *   <button type=\"button\" class=\"collapsible-sidebar-widget-button\" data-action=\"mousedown:collapsible-sidebar-widget#onMouseDown keydown:collapsible-sidebar-widget#onKeyDown\">Open</button>\n *    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"collapsible-sidebar-widget-indicator\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>\n *    <svg class=\"collapsible-sidebar-widget-loader anim-rotate\" viewBox=\"0 0 16 16\" fill=\"none\" width=\"16\" height=\"16\" ><circle cx=\"8\" cy=\"8\" r=\"7\" stroke=\"currentColor\" stroke-opacity=\"0.25\" stroke-width=\"2\" vector-effect=\"non-scaling-stroke\"></circle><path d=\"M15 8a7.002 7.002 0 00-7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" vector-effect=\"non-scaling-stroke\"></path></svg>\n *    <div class=\"collapsible-sidebar-widget-active-hidden\">Hidden content when active</div>\n *   </button>\n *   <div class=\"collapsible-sidebar-widget-content\" data-target=\"collapsible-sidebar-widget.collapsible\">Lorem Ipsum</div>\n *  </div>\n * </collapsible-sidebar-widget>\n * ```\n */\n@controller\nclass CollapsibleSidebarWidgetElement extends HTMLElement {\n  @target collapsible: HTMLElement\n\n  pendingRequest: AbortController | null\n\n  get activeClass(): string {\n    return this.getAttribute('active-class') || 'collapsible-sidebar-widget-active'\n  }\n\n  get loadingClass(): string {\n    return this.getAttribute('loading-class') || 'collapsible-sidebar-widget-loading'\n  }\n\n  get url(): string {\n    return this.getAttribute('url') || ''\n  }\n\n  get isOpen(): boolean {\n    return this.hasAttribute('open')\n  }\n\n  set isOpen(open: boolean) {\n    open ? this.setAttribute('open', '') : this.removeAttribute('open')\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      e.preventDefault()\n\n      return this.load()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onMouseDown(e: MouseEvent) {\n    e.preventDefault()\n\n    return this.load()\n  }\n\n  load() {\n    if (this.pendingRequest) {\n      return this.pendingRequest.abort()\n    }\n\n    if (!this.collapsible.hasAttribute('loaded')) {\n      this.setLoading()\n\n      return this.updateCollapsible()\n    }\n\n    if (!this.isOpen) {\n      return this.setOpen()\n    }\n\n    return this.setClose()\n  }\n\n  setLoading() {\n    this.classList.add(this.loadingClass)\n    this.classList.remove(this.activeClass)\n  }\n\n  setOpen() {\n    this.classList.add(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = true\n  }\n\n  setClose() {\n    this.classList.remove(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = false\n  }\n\n  handleAbort() {\n    this.pendingRequest = null\n    this.setClose()\n  }\n\n  async updateCollapsible() {\n    try {\n      this.pendingRequest = new AbortController()\n      this.pendingRequest.signal.addEventListener('abort', () => this.handleAbort())\n\n      const response = await fetch(this.url, {\n        signal: this.pendingRequest?.signal,\n        headers: {\n          Accept: 'text/html',\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      })\n      this.pendingRequest = null\n\n      if (!response.ok) {\n        return this.setClose()\n      }\n\n      const content = await response.text()\n      this.collapsible.innerHTML = content\n      this.collapsible.setAttribute('loaded', '')\n\n      this.setOpen()\n    } catch {\n      // The errors are not yet surfaced.\n      this.pendingRequest = null\n      return this.setClose()\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\n\n/**\n * A web component that allows inline editing of <input> fields.\n * The fields work without an outer <form>.\n *\n * @type HTMLElement\n * @example\n * ```html\n * <sidebar-memex-input update-url=\"http://localhost\" csrf-token=\"1234567890\" column-id=\"1\">\n *  <input type=\"date name=\"memexProjectColumnValues[][value]\" value=\"\" data-target=\"sidebar-memex-input.read\" data-action=\" blur:sidebar-memex-input#onBlur keydown:sidebar-memex-input#onKeyDown disabled />\n * </sidebar-memex-input>\n * ```\n */\n@controller\nclass SidebarMemexInputElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr updateUrl = ''\n  @attr csrfToken = ''\n  @attr instrumentType = ''\n  @attr columnId = 1\n\n  @targets inputs: NodeListOf<HTMLInputElement>\n  @target read: HTMLInputElement\n  @target write: HTMLElement\n  @targets parameters: NodeListOf<HTMLInputElement>\n\n  get isDisabled(): boolean {\n    return this.read?.hasAttribute('disabled')\n  }\n\n  set hasErrored(value: boolean) {\n    value ? this.setAttribute('errored', '') : this.removeAttribute('errored')\n  }\n\n  set disabled(value: boolean) {\n    value ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n  }\n\n  get hasExpanded(): boolean {\n    return this.read.getAttribute('aria-expanded') === 'true'\n  }\n\n  get detailsElement() {\n    return this.querySelector('details') ?? null\n  }\n\n  connectedCallback() {\n    this.disabled = this.read?.disabled ?? true\n\n    // Resetting disabled attribute of the element to true after closing the dropdown, so that\n    // iteration field still has cursor pointer on the pencil on subsequent hoverings (cursor style is dependant on the `disabled` attribute).\n    // As the filter text input is not focused when opening the iteration field dropdown, `onBlur` does not\n    // run when user closes the menu, so that `disabled` is not reset, like for text-based fields.\n    this.detailsElement?.addEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  disconnectedCallback() {\n    this.detailsElement?.removeEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  handleSelectMenuToggle() {\n    if (this.detailsElement && !this.detailsElement?.open) {\n      this.disabled = true\n    } else if (this.detailsElement && this.detailsElement?.open) {\n      this.disabled = false\n    }\n  }\n\n  handleDetailsSelect(e: Event) {\n    const custom = e as CustomEvent\n    const details = e.target as HTMLElement\n    const el = custom.detail?.relatedTarget as HTMLElement\n    const opened = details.closest('details')\n    const button = opened?.querySelector('[data-menu-button]')\n    const summary = opened?.querySelector('summary')\n\n    if (el.getAttribute('aria-checked') === 'true') {\n      el.setAttribute('aria-checked', 'false')\n      e.preventDefault()\n\n      for (const input of this.inputs) {\n        if (el.contains(input)) {\n          this.updateCell(input.name, '')\n\n          if (button?.innerHTML) {\n            button.innerHTML = input.placeholder\n          }\n\n          break\n        }\n      }\n\n      opened?.removeAttribute('open')\n      /**\n       * This function modifies the default behavior of the <details-menu> so that clicking on a\n       *  selected item clears an existing value. This causes focus to be lost from the <summary>\n       * which results in this element being replaced upon live update. Manually refocusing the\n       * summary element here prevents this from happening.\n       */\n      summary?.focus()\n    }\n  }\n\n  handleDetailsSelected(e: Event) {\n    const custom = e as CustomEvent\n    const el = custom.detail?.relatedTarget as HTMLElement\n    for (const input of this.inputs) {\n      if (el.contains(input)) {\n        this.updateCell(input.name, input.value)\n        break\n      }\n    }\n  }\n\n  mouseDownFocus(e: Event) {\n    if (!this.isDisabled) {\n      return\n    }\n    this.onFocus(e)\n  }\n\n  keyDownFocus(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      if (this.detailsElement) {\n        this.onSelectMenuOpen()\n      }\n      if (this.read !== document.activeElement) {\n        this.onFocus(e)\n      }\n    }\n  }\n\n  // to handle the clicks on the header (incl. pencil), so that the general mouseDownFocus doesn't interfere with opening the\n  // dropdown summary\n  mouseDownFocusHeader() {\n    if (this.detailsElement) {\n      this.onSelectMenuOpen()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onChange(e: Event) {\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      return\n    }\n\n    this.updateCell(this.read?.name, this.read?.value)\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onFocus(e: KeyboardEvent | Event) {\n    e.preventDefault()\n\n    this.disabled = false\n    this.read.disabled = false\n    this.read.focus()\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onSelectMenuOpen() {\n    if (this.detailsElement) {\n      this.detailsElement.open = true\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onBlur(e: Event) {\n    if (this.hasExpanded) {\n      e.preventDefault()\n      return\n    }\n\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      this.updateCell(this.read?.name, this.read?.value)\n    }\n\n    this.read.disabled = true\n    this.disabled = true\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (this.hasExpanded) {\n        return\n      }\n\n      // eslint-disable-next-line github/no-blur\n      this.read.blur()\n    }\n  }\n\n  async updateCell(name = '', value = '') {\n    const data = new FormData()\n    data.set(name, value)\n    data.set('ui', this.instrumentType)\n\n    for (const input of this.parameters) {\n      data.set(input.name, input.value)\n    }\n\n    try {\n      // this is an opportunistic update\n      if (this.write) {\n        const update = this.read.value\n        const formatted = this.read.type === 'date' && update ? this.format.format(Date.parse(update)) : update\n        this.write.textContent = update ? formatted : this.read.placeholder\n      }\n\n      const response = await fetch(this.updateUrl, {\n        method: 'PUT',\n        body: data,\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'Scoped-CSRF-Token': `${this.csrfToken}`,\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error('connection error')\n      }\n\n      // if there is no target to update,\n      // break here and leave the opportunistic update of the field\n      if (!this.write) {\n        return\n      }\n\n      // this is the reconciliation\n      const content = await response.json()\n      const column = content['memexProjectItem']['memexProjectColumnValues'].find(\n        (e: Record<string, unknown>) => e['memexProjectColumnId'] === Number(this.columnId),\n      )\n\n      const commit = column['value']\n      const formatted = this.parseAndFormatUpdate(commit)\n      this.write.innerHTML = value ? formatted : this.read.placeholder\n    } catch (e) {\n      this.hasErrored = true\n    }\n  }\n\n  parseAndFormatUpdate(commit: {value?: string; html?: string}) {\n    switch (this.read.type) {\n      case 'date': {\n        const update = commit.value ? Date.parse(commit.value) : undefined\n        return update ? this.format.format(update) : ''\n      }\n      case 'number': {\n        return commit.value == null ? '' : commit.value\n      }\n      default: {\n        return commit.html ?? ''\n      }\n    }\n  }\n\n  private format = Intl.DateTimeFormat('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    timeZone: 'UTC',\n  })\n}\n","import '../notifications/configure-thread-subscription-dialog'\nimport './sidebar-widget'\nimport './sidebar-memex-input'\n\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nfunction submitForm(form: Element, skipTeamsCheck = false) {\n  if (skipTeamsCheck || !reviewerTeamsCheckRequired(form)) {\n    if (form instanceof HTMLFormElement) {\n      requestSubmit(form)\n    } else {\n      previewSubmit(form)\n    }\n  }\n}\n\nfunction submitOnMenuClose(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  const form = currentTarget.closest('.js-issue-sidebar-form') || currentTarget.querySelector('.js-issue-sidebar-form')\n  submitForm(form!)\n}\n\n// On item selection, submit the form\non(\n  'details-menu-selected',\n  '.js-discussion-sidebar-menu',\n  function (event) {\n    const item = event.detail.relatedTarget\n    const menu = event.currentTarget\n    const form = item.closest('.js-issue-sidebar-form')\n    const multiple = menu.hasAttribute('data-multiple')\n\n    if (item.hasAttribute('data-clear-assignees')) {\n      const selectedInputs = menu.querySelectorAll<HTMLInputElement>('input[name=\"issue[user_assignee_ids][]\"]:checked')\n      for (const el of selectedInputs) {\n        el.disabled = false\n        el.checked = false\n      }\n\n      submitForm(form)\n    } else if (multiple) {\n      menu.closest<HTMLElement>('details')!.addEventListener('toggle', submitOnMenuClose, {once: true})\n    } else {\n      submitForm(form)\n    }\n  },\n  {capture: true},\n)\n\nfunction updateSidebar(container: Element, html: string) {\n  container.replaceWith(parseHTML(document, html))\n}\n\nfunction returnFocusToTrigger(container: HTMLElement, menuTriggerId: string) {\n  const currentSidebarTriggerEl = container.querySelector<HTMLElement>(`[data-menu-trigger=\"${menuTriggerId}\"]`)\n\n  // Returns focus to triggering element after HTML is replaced\n  currentSidebarTriggerEl?.focus()\n}\n\n// TODO Replace with data-replace-remote-form behavior.\nremoteForm('.js-issue-sidebar-form', async function (form, wants) {\n  let error: Error | undefined\n\n  try {\n    const response = await wants.html()\n    // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n    const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n    // Gets the unique ID of the current sidebar element to use to reference the trigger\n    const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n    const container = currentSidebarItemEl?.parentElement\n\n    currentSidebarItemEl!.replaceWith(response.html)\n\n    if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n  } catch (err) {\n    if (err instanceof Error) {\n      error = err\n      throw error\n    }\n  } finally {\n    form.dispatchEvent(new CustomEvent('submit:complete', {bubbles: true, detail: {error}}))\n  }\n})\n\n// Prevent suggested reviewer button on new pull request form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-suggested-reviewer', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  event.preventDefault()\n})\n\n// Prevent \"assign yourself\" button on the issue#new form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-issue-assign-self', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  button.remove()\n  // do not persist in the UI\n  document.querySelector('form#new_issue .js-submit-button-value')?.remove()\n  event.preventDefault()\n})\n\n// Allow \"unassign me\" to submit form with method DELETE\non('click', '.js-issue-unassign-self', function (event) {\n  const form = event.currentTarget.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'delete')\n  event.preventDefault()\n})\n\nfunction getCacheKey(el: Element, pageId: string) {\n  const formName = el.getAttribute('data-cache-name')\n  return `${pageId}:sidebar:${formName}`\n}\n\nfunction cacheValues(form: Element, formData: FormData, cacheKey: string) {\n  const formName = form.getAttribute('data-cache-name')\n  if (!formName) return\n\n  const data: Array<[string, FormDataEntryValue]> = []\n  for (const [key, value] of formData.entries()) {\n    if (key.indexOf(formName) === -1) continue\n    data.push([key, value])\n  }\n\n  const updated = data.filter(datum => datum[1] !== '')\n  if (updated.length > 0) {\n    sessionStorage.setItem(cacheKey, JSON.stringify(updated))\n  } else {\n    sessionStorage.removeItem(cacheKey)\n  }\n}\n\nconst hasFired = new Set<string>()\nfunction clearHasFired() {\n  hasFired.clear()\n}\n\nasync function restoreCachedValues(el: Element, cacheKey: string) {\n  const formName = el.getAttribute('data-cache-name')\n  const cache = sessionStorage.getItem(cacheKey)\n  if (!formName || !cache || hasFired.has(formName)) return\n  hasFired.add(formName)\n  const formData: Array<[string, FormDataEntryValue]> = JSON.parse(cache)\n  const inputs: HTMLInputElement[] = []\n  for (const [key, value] of formData) {\n    // Only cache string values\n    if (Object.prototype.toString.call(value) !== '[object String]') continue\n\n    const newInput = document.createElement('input')\n    newInput.type = 'hidden'\n    // The guard clause above ensures that this is a string, but the TS complier doesn't know that.\n    newInput.value = value as string\n    newInput.name = key\n    el.appendChild(newInput)\n    inputs.push(newInput)\n  }\n  try {\n    await requestPreview(el)\n    for (const input of inputs) {\n      input.remove()\n    }\n  } catch (error) {\n    hasFired.delete(formName)\n  }\n}\n\nlet isSubmitting = false\nfunction cacheValuesOnHide(form: Element, cacheKey: string) {\n  if (isSubmitting) return\n\n  const body = scopedFormData(form)\n  cacheValues(form, body, cacheKey)\n  clearHasFired()\n}\n\nobserve('[data-cacher]', {\n  add(el) {\n    const cacheKey = getCacheKey(el, getPageID())\n    restoreCachedValues(el, cacheKey)\n    window.addEventListener('pagehide', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener('turbo:before-visit', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener(\n      'submit',\n      event => {\n        if (!event.defaultPrevented) {\n          isSubmitting = true\n          // Defer the write operation to the next tick\n          setTimeout(() => {\n            for (const key of Object.keys(sessionStorage)) {\n              if (key.indexOf(cacheKey) === -1) continue\n              sessionStorage.removeItem(key)\n              clearHasFired()\n            }\n          }, 0)\n        }\n      },\n      {capture: true},\n    )\n  },\n})\n\n// Submit dummy sidebar preview \"form\".\n//\n// form - DIV element tagged with .js-issue-sidebar-form\n// extra - Array of extra form data to pass along\nasync function previewSubmit(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  await requestPreview(form, method, extra)\n  // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n  const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n  // Gets the unique ID of the current sidebar element to use to reference the trigger\n  const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n  const container = currentSidebarItemEl?.parentElement\n\n  if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n}\n\nasync function requestPreview(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  const body = scopedFormData(form)\n  if (extra) {\n    body.append(extra.name, extra.value)\n  }\n\n  const url = form.getAttribute('data-url')!\n  if (!url) return\n\n  const token = form.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  const response = await fetch(url, {\n    method,\n    body: method === 'delete' ? '' : body,\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  const html = await response.text()\n  updateSidebar(form.closest<HTMLElement>('.js-discussion-sidebar-item')!, html)\n}\n\n// Returns true (and triggers a reviewer check for \"notification spam\") if the\n// form (or div, in new PRs) contains at least one new review request for a team\nfunction reviewerTeamsCheckRequired(form: Element) {\n  // We only care about reviewers...\n  const url = form.getAttribute('data-reviewers-team-size-check-url')\n  if (!url) return false\n\n  // ...and whether there is at least one newly-selected team\n  const previouslyRequestedTeams = [...document.querySelectorAll<HTMLElement>('.js-reviewer-team')].map(elem =>\n    elem.getAttribute('data-id'),\n  )\n  const formData = form instanceof HTMLFormElement ? new FormData(form) : scopedFormData(form)\n  const allSelectedTeams = new URLSearchParams(formData as FormData & Record<string, string>).getAll(\n    'reviewer_team_ids[]',\n  )\n  const newlySelectedTeams = allSelectedTeams.filter(team => !previouslyRequestedTeams.includes(team))\n  if (newlySelectedTeams.length === 0) return false\n\n  const params = new URLSearchParams(newlySelectedTeams.map(s => ['reviewer_team_ids[]', s]))\n  triggerTeamReviewerCheck(form, `${url}?${params}`)\n  return true\n}\n\n// Asks the server if any of the newly-selected teams is too large;\n// show the dialog if so, move on and request reviews otherwise.\nasync function triggerTeamReviewerCheck(form: Element, reviewerCheckUrl: string) {\n  const response = await fetch(reviewerCheckUrl)\n  if (!response.ok) {\n    return\n  }\n\n  const dialogHtml = await response.text()\n  if (dialogHtml.match(/[^\\w-]js-large-team[^\\w-]/)) {\n    showTeamReviewerConfirmationDialog(form, dialogHtml)\n  } else {\n    submitForm(form, true)\n    return\n  }\n}\n\n// Shows dialog that requests confirmation for review requests to large teams\nfunction showTeamReviewerConfirmationDialog(form: Element, dialogHtml: string) {\n  // Add dialog to DOM\n  const container = form.querySelector<HTMLElement>('.js-large-teams-check-warning-container')!\n  while (container.firstChild) {\n    container.removeChild(container.firstChild)\n  }\n  container.appendChild(parseHTML(document, dialogHtml))\n\n  // Wire dialog actions and open it\n  const dialog = container.querySelector<HTMLDetailsElement>('details')!\n  function dialogAction(event: Event) {\n    if (!(event.target instanceof Element)) return\n    dialog.open = false\n    // Unless the user explicitly confirms, un-select the large teams before submitting\n    if (!event.target.classList.contains('js-large-teams-confirm-button')) {\n      const reviewerInputs = form.querySelectorAll<HTMLInputElement>(\"input[name='reviewer_team_ids[]']\")\n      for (const reviewerInput of reviewerInputs) {\n        if (container.querySelector(`.js-large-team[data-id='${reviewerInput.value}']`)) {\n          reviewerInput.checked = false\n        }\n      }\n    }\n    submitForm(form, true)\n    event.preventDefault()\n  }\n  container\n    .querySelector<HTMLElement>('.js-large-teams-confirm-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  container\n    .querySelector<HTMLElement>('.js-large-teams-cancel-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  dialog.addEventListener('details-dialog-close', dialogAction, {once: true})\n  dialog.open = true\n}\n\non('click', 'div.js-project-column-menu-container .js-project-column-menu-item button', async function (event) {\n  const currentTarget = event.currentTarget\n  updateProjectColumnMenuSummary(currentTarget)\n  const moveUrl = currentTarget.getAttribute('data-url')!\n  const token = currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const cardId = currentTarget.getAttribute('data-card-id')!\n  const form = new FormData()\n\n  form.append('card_id', cardId)\n  form.append('use_automation_prioritization', 'true')\n\n  event.preventDefault()\n  const response = await fetch(moveUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  // blur any active elements if they are contained within the detail\n  // to allow update-content to reload the dropdown\n  const activeElement = document.activeElement as HTMLElement\n  const container = currentTarget.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  if (activeElement && container.contains(activeElement)) {\n    try {\n      // eslint-disable-next-line github/no-blur\n      activeElement.blur()\n    } catch (e) {\n      // ignore\n    }\n  }\n})\n\nfunction updateProjectColumnMenuSummary(element: Element) {\n  const dropdown = element.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  const summary = dropdown.querySelector<HTMLElement>('.js-project-column-menu-summary')!\n  const columnName = element.getAttribute('data-column-name')!\n\n  summary.textContent = columnName\n}\n\non('click', '.js-prompt-dismiss', function (event) {\n  event.currentTarget.closest<HTMLElement>('.js-prompt')!.remove()\n})\n\n// Similar to serializeArray, but maybe scoped to a non-form.\n//\n// container - Element contained by a form to serialize the child fields for\nfunction scopedFormData(container: Element): FormData {\n  const form = container.closest<HTMLFormElement>('form')!\n  if (!form) return new FormData()\n  const formData = new FormData(form)\n  const params = formData.entries()\n  const results = new FormData()\n  for (const [name, value] of params) {\n    if (form.contains(findParam(form, name, value.toString()))) {\n      results.append(name, value)\n    }\n  }\n  return results\n}\n\nfunction findParam(form: HTMLFormElement, name: string, value: string): Element | null {\n  for (const el of form.elements) {\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el instanceof HTMLButtonElement) {\n      if (el.name === name && el.value === value) {\n        return el\n      }\n    }\n  }\n  return null\n}\n\non('click', '.js-convert-to-draft', function (event) {\n  const convertToDraftUrl = event.currentTarget.getAttribute('data-url')!\n  const token = event.currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  fetch(convertToDraftUrl, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n})\n\non('click', 'div.js-restore-item', async function (event) {\n  const unarchiveItemUrl = event.currentTarget.getAttribute('data-url')!\n  const projectItemID = event.currentTarget.getAttribute('data-column')!\n  const token = event.currentTarget.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const form = new FormData()\n\n  form.set('memexProjectItemIds[]', projectItemID)\n\n  const result = await fetch(unarchiveItemUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  if (!result.ok) {\n    throw new Error('connection error')\n  }\n\n  submitOnMenuClose(event)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('#clear-project-search-button', button => {\n  button?.setAttribute('type', 'button')\n\n  button?.addEventListener('click', () => {\n    const input = document.getElementById('project-search-input') as HTMLInputElement\n    if (input) {\n      input.value = ''\n      input.focus()\n    }\n  })\n})\n","export const SOFT_NAV_EXTERNAL_EVENTS = Object.freeze({\n  INITIAL: 'soft-nav:external:initial',\n  START: 'soft-nav:external:start',\n  SUCCESS: 'soft-nav:external:success',\n  ERROR: 'soft-nav:external:error',\n  RENDER: 'soft-nav:external:render',\n})\n","import type {\n  CLSMetricWithAttribution,\n  FCPMetricWithAttribution,\n  FIDMetricWithAttribution,\n  INPMetricWithAttribution,\n  LCPMetricWithAttribution,\n  TTFBMetricWithAttribution,\n} from 'web-vitals/attribution'\nimport type {HPCTimingEvent} from './hpc-events'\nimport type {INPMetric} from './inp/metric'\n\nexport type WebVitalMetric =\n  | CLSMetricWithAttribution\n  | FCPMetricWithAttribution\n  | FIDMetricWithAttribution\n  | INPMetricWithAttribution\n  | LCPMetricWithAttribution\n  | TTFBMetricWithAttribution\n  | INPMetric\n\nexport type SoftWebVitalMetric =\n  | CLSMetricWithAttribution\n  | FCPMetricWithAttribution\n  | FIDMetricWithAttribution\n  | INPMetricWithAttribution\n  | LCPMetricWithAttribution\n  | TTFBMetricWithAttribution\n\nexport type MetricOrHPC = WebVitalMetric | HPCTimingEvent\n\nexport function isReactLazyPayload() {\n  return Boolean(document.querySelector('react-app[data-lazy=\"true\"]'))\n}\n\nexport function isReactAlternate() {\n  return Boolean(document.querySelector('react-app[data-alternate=\"true\"]'))\n}\n\nexport function isHeaderRedesign() {\n  return Boolean(document.querySelector('header.AppHeader'))\n}\n\nexport function hasFetchedGQL(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'fetch' && e.name.includes('_graphql?'))\n}\n\nexport function hasFetchedJS(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'script')\n}\n","import {isReactLazyPayload, isReactAlternate, isHeaderRedesign} from './web-vitals'\nimport type {MetricOrHPC, SoftWebVitalMetric} from './web-vitals'\nimport {loaded} from '@github-ui/document-ready'\nimport {wasServerRendered} from '@github-ui/ssr-utils'\nimport {sendStats} from '@github-ui/stats'\nimport {sendStatToHydro} from './hydro-stats'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {getCurrentReactAppName, getLatestMechanism} from '@github-ui/soft-nav/utils'\nimport {MECHANISM_MAPPING} from '@github-ui/soft-nav/stats'\n\nconst initialRenderIsSSR = wasServerRendered()\nconst initialRenderIsLazy = isReactLazyPayload()\nconst initialRenderIsAlternate = isReactAlternate()\n\ninterface NetworkInformation extends EventTarget {\n  readonly effectiveType: string\n}\n\nexport function sendSoftVitals(metric: SoftWebVitalMetric) {\n  if (metric.navigationType !== 'soft-navigation') return\n  sendVitals(metric, {experimentalSoftNav: true})\n}\n\ninterface SendVitalsOptions {\n  experimentalSoftNav?: boolean\n  url?: string\n}\nexport function sendVitals(metric: MetricOrHPC, opts: SendVitalsOptions = {}) {\n  const {name, value} = metric\n  const stat: PlatformBrowserPerformanceWebVitalTiming = {\n    name: opts.url || window.location.href,\n    app: getCurrentReactAppName() || 'rails',\n  }\n  stat[name.toLowerCase() as Lowercase<typeof name>] = value\n\n  if (isFeatureEnabled('SAMPLE_NETWORK_CONN_TYPE')) {\n    stat.networkConnType = getConnectionType()\n  }\n\n  if (opts.experimentalSoftNav) {\n    stat.mechanism = MECHANISM_MAPPING[getLatestMechanism()]\n  }\n\n  if (name === 'HPC') {\n    stat.soft = metric.soft\n    stat.ssr = metric.ssr\n    stat.mechanism = MECHANISM_MAPPING[metric.mechanism]\n    stat.lazy = metric.lazy\n    stat.alternate = metric.alternate\n    stat.hpcFound = metric.found\n    stat.hpcGqlFetched = metric.gqlFetched\n    stat.hpcJsFetched = metric.jsFetched\n    stat.headerRedesign = isHeaderRedesign()\n  } else {\n    stat.ssr = initialRenderIsSSR\n    stat.lazy = initialRenderIsLazy\n    stat.alternate = initialRenderIsAlternate\n  }\n\n  const syntheticTest = document.querySelector('meta[name=\"synthetic-test\"]')\n  if (syntheticTest) {\n    stat.synthetic = true\n  }\n\n  sendStats({webVitalTimings: [stat]})\n\n  sendStatToHydro(metric, stat.ssr)\n\n  updateStaffBar(name, value)\n}\n\nfunction updateStaffBar(name: string, value: number) {\n  const staffBarContainer = document.querySelector('#staff-bar-web-vitals')\n  const metricContainer = staffBarContainer?.querySelector(`[data-metric=${name.toLowerCase()}]`)\n\n  if (!metricContainer) {\n    return\n  }\n\n  metricContainer.textContent = value.toPrecision(6)\n}\n\nfunction isTimingSuppported(): boolean {\n  return !!(window.performance && window.performance.timing && window.performance.getEntriesByType)\n}\n\nfunction getConnectionType() {\n  if (\n    'connection' in navigator &&\n    navigator.connection &&\n    'effectiveType' in (navigator.connection as NetworkInformation)\n  ) {\n    return (navigator.connection as NetworkInformation).effectiveType\n  }\n\n  return 'N/A'\n}\n\nexport async function sendTimingResults() {\n  if (!isTimingSuppported()) return\n\n  await loaded\n  await new Promise(resolve => setTimeout(resolve))\n\n  sendResourceTimings()\n  sendNavigationTimings()\n}\n\nconst sendResourceTimings = () => {\n  const resourceTimings = window.performance\n    .getEntriesByType('resource')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n      }),\n    )\n\n  if (resourceTimings.length) {\n    sendStats({resourceTimings}, false, 0.05)\n  }\n}\n\nconst sendNavigationTimings = () => {\n  const navigationTimings = window.performance\n    .getEntriesByType('navigation')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        activationStart: timing.activationStart,\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n        unloadEventStart: timing.unloadEventStart,\n        unloadEventEnd: timing.unloadEventEnd,\n        domInteractive: timing.domInteractive,\n        domContentLoadedEventStart: timing.domContentLoadedEventStart,\n        domContentLoadedEventEnd: timing.domContentLoadedEventEnd,\n        domComplete: timing.domComplete,\n        loadEventStart: timing.loadEventStart,\n        loadEventEnd: timing.loadEventEnd,\n        type: timing.type,\n        redirectCount: timing.redirectCount,\n      }),\n    )\n\n  if (navigationTimings.length) {\n    sendStats({navigationTimings}, false, 0.05)\n  }\n}\n","/*\n * From https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/getSelector.ts\n * I want to make sure we get element names the same way as web-vitals does.\n */\n\nconst getName = (node: Node) => {\n  const name = node.nodeName\n  return node.nodeType === 1 ? name.toLowerCase() : name.toUpperCase().replace(/^#/, '')\n}\n\nexport const getSelector = (node: Node | null | undefined, maxLen?: number) => {\n  let sel = ''\n\n  try {\n    while (node && node.nodeType !== 9) {\n      const el: Element = node as Element\n      const part = el.id\n        ? `#${el.id}`\n        : getName(el) +\n          (el.classList && el.classList.value && el.classList.value.trim() && el.classList.value.trim().length\n            ? `.${el.classList.value.trim().replace(/\\s+/g, '.')}`\n            : '')\n      if (sel.length + part.length > (maxLen || 100) - 1) return sel || part\n      sel = sel ? `${part}>${sel}` : part\n      if (el.id) break\n      node = el.parentNode\n    }\n  } catch (err) {\n    // Do nothing...\n  }\n  return sel\n}\n","import type {SoftNavMechanism} from '@github-ui/soft-nav/events'\nimport {getSelector} from './get-selector'\n\nexport interface HPCEventTarget extends EventTarget {\n  addEventListener(\n    type: 'hpc:timing',\n    listener: (event: HPCTimingEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(\n    type: 'hpc:dom-insertion',\n    listener: (event: HPCDomInsertionEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(type: string, listener: (event: Event) => void, options?: boolean | AddEventListenerOptions): void\n}\n\nexport class HPCTimingEvent extends Event {\n  name = 'HPC' as const\n  value: number\n  attribution: {\n    element?: string\n  }\n\n  constructor(\n    public soft: boolean,\n    public ssr: boolean,\n    public lazy: boolean,\n    public alternate: boolean,\n    public mechanism: SoftNavMechanism | 'hard',\n    public found: boolean,\n    public gqlFetched: boolean,\n    public jsFetched: boolean,\n    start: number,\n    element: Element | null,\n  ) {\n    super('hpc:timing')\n    this.value = performance.now() - start\n    this.attribution = {\n      element: getSelector(element),\n    }\n  }\n}\n\nexport class HPCDomInsertionEvent extends Event {\n  constructor(public element: Element | null) {\n    super('hpc:dom-insertion')\n  }\n}\n","import {wasServerRendered} from '@github-ui/ssr-utils'\nimport {onLCP} from 'web-vitals/attribution'\nimport {hasFetchedGQL, hasFetchedJS, isReactAlternate, isReactLazyPayload} from './web-vitals'\nimport {sendVitals} from './timing-stats'\nimport type {SoftNavMechanism} from '@github-ui/soft-nav/events'\nimport {HPCTimingEvent, type HPCEventTarget, HPCDomInsertionEvent} from './hpc-events'\n\n// We use an AbortController to cleanup event listeners when we soft navigate.\nlet abortController = new AbortController()\nconst INSERTION_TIMEOUT = 10000\n\nfunction isVisible(element: HTMLElement) {\n  // Safari doesn't support `checkVisibility` yet.\n  if (typeof element.checkVisibility === 'function') return element.checkVisibility()\n\n  return Boolean(element.offsetParent || element.offsetWidth || element.offsetHeight)\n}\n\nfunction setLCPasHPC(soft: boolean, found: boolean) {\n  onLCP(({value, attribution}) => {\n    window.performance.measure('HPC', {start: 'navigationStart', end: value})\n    sendVitals({\n      name: 'HPC',\n      value,\n      soft,\n      found,\n      gqlFetched: hasFetchedGQL(),\n      jsFetched: hasFetchedJS(),\n      ssr: wasServerRendered(),\n      lazy: isReactLazyPayload(),\n      alternate: isReactAlternate(),\n      mechanism: 'hard',\n      attribution: {\n        element: attribution?.element,\n      },\n    } as HPCTimingEvent)\n  })\n}\n\n// Restart HPC measurement. This will stop any ongoing HPC calls and start a new timer.\nexport function resetHPC({soft = false, mechanism = 'hard'}: {soft: boolean; mechanism?: SoftNavMechanism | 'hard'}) {\n  abortController.abort()\n  abortController = new AbortController()\n\n  // Initialize HPC\n  const hpcStart = soft ? performance.now() : 0\n  const hpc: HPCEventTarget = new EventTarget() as HPCEventTarget\n  let tabHidden = false\n  let animationFrame: number\n  let dataHPCanimationFrame: number\n\n  // Observer to listen to ALL mutations to the DOM. We need to check all added nodes\n  // for the `data-hpc` attribue. If none are found, we keep listening until all mutations are done.\n  const hpcDOMInsertionObserver = new MutationObserver(mutations => {\n    let hasDataHPC = false\n    let visibleElement = false\n    let hpcElement: Element | null = null\n    let insertionElement: Element | null = null\n\n    // if the mutation didn't add any nodes, we don't track its HPC\n    if (mutations.every(mutation => mutation.addedNodes.length === 0)) return\n\n    for (const mutation of mutations) {\n      if (mutation.type !== 'childList') continue\n\n      for (const node of mutation.addedNodes) {\n        if (!(node instanceof Element)) continue\n\n        hpcElement = node.hasAttribute('data-hpc') ? node : node.querySelector('[data-hpc]')\n        if (hpcElement) {\n          cancelAnimationFrame(animationFrame)\n          hasDataHPC = true\n          break\n        }\n\n        // we only care about visible elements\n        if (isVisible(node as HTMLElement)) {\n          insertionElement = node\n          cancelAnimationFrame(animationFrame)\n          visibleElement = true\n        }\n      }\n\n      if (hasDataHPC) break\n    }\n\n    if (hasDataHPC && hpcElement) {\n      window.performance.measure('HPC', 'navigationStart')\n      // data-hpc found, we can stop listening to mutations.\n      hpcDOMInsertionObserver.disconnect()\n      // only cancel the animation frame if the controller aborts.\n      dataHPCanimationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(\n          new HPCTimingEvent(\n            soft,\n            wasServerRendered(),\n            isReactLazyPayload(),\n            isReactAlternate(),\n            mechanism,\n            true,\n            hasFetchedGQL(),\n            hasFetchedJS(),\n            hpcStart,\n            hpcElement,\n          ),\n        )\n      })\n    } else if (visibleElement) {\n      animationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(new HPCDomInsertionEvent(insertionElement))\n      })\n    }\n  })\n  hpcDOMInsertionObserver.observe(document, {childList: true, subtree: true})\n\n  // Stop listening for HPC events if the user has interacted, as interactions\n  // can cause DOM mutations, which we want to avoid capturing for HPC.\n  const listenerOpts = {capture: true, passive: true, once: true, signal: abortController.signal}\n  const stop = () => abortController.abort()\n\n  // eslint-disable-next-line github/require-passive-events\n  document.addEventListener('touchstart', stop, listenerOpts)\n  document.addEventListener('mousedown', stop, listenerOpts)\n  document.addEventListener('keydown', stop, listenerOpts)\n  document.addEventListener('pointerdown', stop, listenerOpts)\n\n  let emulatedHPCTimer: ReturnType<typeof setTimeout>\n  let insertionFound = false\n  hpc.addEventListener(\n    'hpc:dom-insertion',\n    (e: HPCDomInsertionEvent) => {\n      insertionFound = true\n      clearTimeout(emulatedHPCTimer)\n      // Whenever we see a DOM insertion, we keep track of when it happened.\n      const event = new HPCTimingEvent(\n        soft,\n        wasServerRendered(),\n        isReactLazyPayload(),\n        isReactAlternate(),\n        mechanism,\n        false,\n        hasFetchedGQL(),\n        hasFetchedJS(),\n        hpcStart,\n        e.element,\n      )\n\n      // If no mutations happen after the timeout, we assume that the DOM is fully loaded, so we send the\n      // last seen mutation values.\n      emulatedHPCTimer = setTimeout(() => hpc.dispatchEvent(event), INSERTION_TIMEOUT)\n    },\n    {signal: abortController.signal},\n  )\n\n  hpc.addEventListener(\n    'hpc:timing',\n    (e: HPCTimingEvent) => {\n      if (!tabHidden && e.value < 60_000) sendVitals(e)\n\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  // If the stop event is triggered, we want to stop listening to DOM mutations.\n  abortController.signal.addEventListener('abort', () => {\n    cancelAnimationFrame(dataHPCanimationFrame)\n    cancelAnimationFrame(animationFrame)\n    clearTimeout(emulatedHPCTimer)\n    hpcDOMInsertionObserver.disconnect()\n  })\n\n  // If the user changes tab, we don't want to send the recorded metrics since it may send garbage data.\n  document.addEventListener(\n    'visibilitychange',\n    () => {\n      tabHidden = true\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  if (!soft) {\n    setTimeout(() => {\n      if (!insertionFound) setLCPasHPC(soft, false)\n    }, INSERTION_TIMEOUT)\n  }\n\n  // In a hard-load, if the script is evaluated after the `data-hpc` element is rendered,\n  // we default the HPC value to LCP.\n  if (!soft && document.querySelector('[data-hpc]')) {\n    setLCPasHPC(soft, true)\n    abortController.abort()\n  }\n}\n","// Based on https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/polyfills/interactionCountPolyfill.ts\ndeclare global {\n  interface Performance {\n    interactionCount: number\n  }\n}\n\n/*\n * The InteractionCountObserver tracks the number of interactions that have occurred on the page. This\n * is used to estimate INP's p98 value.\n */\nexport class InteractionCountObserver {\n  interactionCountEstimate = 0\n  minKnownInteractionId = Infinity\n  maxKnownInteractionId = 0\n  observer?: PerformanceObserver\n\n  get interactionCount() {\n    return this.observer ? this.interactionCountEstimate : performance.interactionCount || 0\n  }\n\n  teardown() {\n    if (this.observer) {\n      // take the records so a new observer will start empty\n      this.observer.takeRecords()\n      this.observer.disconnect()\n      this.observer = undefined\n    }\n  }\n\n  // from https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/polyfills/interactionCountPolyfill.ts#L29-L40\n  updateEstimate = (entries: PerformanceEventTiming[]) => {\n    for (const e of entries) {\n      if (e.interactionId) {\n        this.minKnownInteractionId = Math.min(this.minKnownInteractionId, e.interactionId)\n        this.maxKnownInteractionId = Math.max(this.maxKnownInteractionId, e.interactionId)\n\n        this.interactionCountEstimate = this.maxKnownInteractionId\n          ? (this.maxKnownInteractionId - this.minKnownInteractionId) / 7 + 1\n          : 0\n      }\n    }\n  }\n\n  observe() {\n    if ('interactionCount' in performance || this.observer) return\n\n    this.observer = new PerformanceObserver(async list => {\n      // Delay by a microtask to workaround a bug in Safari where the\n      // callback is invoked immediately, rather than in a separate task.\n      // See: https://github.com/GoogleChrome/web-vitals/issues/277\n      await Promise.resolve()\n\n      this.updateEstimate(list.getEntries() as PerformanceEventTiming[])\n    })\n\n    this.observer.observe({\n      type: 'event',\n      buffered: true,\n      durationThreshold: 0,\n    })\n  }\n}\n","export interface Interaction {\n  id: string\n  latency: number\n  entries: PerformanceEventTiming[]\n}\n\n/*\n * The InteractionList is a list of interactions that are sorted by latency DESCENDING.\n * The list has a maximum size and will remove the shortest interaction if the list is full.\n */\nexport class InteractionList {\n  interactions: Interaction[] = []\n  interactionsMap: Map<string, Interaction> = new Map()\n  maxSize: number\n\n  constructor(size: number) {\n    this.maxSize = size\n  }\n\n  get shortestInteraction() {\n    return this.interactions[this.interactions.length - 1]\n  }\n\n  get(id: string) {\n    return this.interactionsMap.get(id)\n  }\n\n  update(interaction: Interaction, entry: PerformanceEventTiming) {\n    const newLatency = Math.max(interaction.latency, entry.duration)\n    interaction.entries.push(entry)\n\n    if (newLatency !== interaction.latency) {\n      interaction.latency = Math.max(interaction.latency, entry.duration)\n      // the new value may change sorting order so we need to sort the list\n      this.sort()\n    }\n  }\n\n  add(interaction: Interaction) {\n    const shortestInteraction = this.shortestInteraction\n\n    // Only add interaction if list is not full or if the interaction is longer than the shortest one\n    if (\n      this.interactions.length <= this.maxSize ||\n      !shortestInteraction ||\n      interaction.latency > shortestInteraction.latency\n    ) {\n      this.interactionsMap.set(interaction.id, interaction)\n      this.interactions.push(interaction)\n      this.sort()\n\n      // Remove the shortest interaction if list reached the limit\n      if (this.interactions.length > this.maxSize) {\n        this.interactions.pop()\n      }\n    }\n  }\n\n  sort() {\n    this.interactions.sort((a, b) => b.latency - a.latency)\n  }\n\n  findEntry(entry: PerformanceEventTiming) {\n    return this.interactions.some((interaction: Interaction) => {\n      return interaction.entries.some(prevEntry => {\n        return entry.duration === prevEntry.duration && entry.startTime === prevEntry.startTime\n      })\n    })\n  }\n\n  // from https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/onINP.ts#L112-L123\n  estimateP98(numOfPageInteractions: number) {\n    const candidateInteractionIndex = Math.min(this.interactions.length - 1, Math.floor(numOfPageInteractions / 50))\n\n    return this.interactions[candidateInteractionIndex]\n  }\n}\n","import {getSelector} from '../get-selector'\n\ninterface INPAttribution {\n  eventTarget?: string\n}\n\n/*\n * The INP metric. This class is compatible with web-vitals' INPMetric interface that we expect to report to DataDog and Hydro.\n */\nexport class INPMetric {\n  name = 'INP' as const\n  value: number\n  entries: PerformanceEventTiming[]\n  attribution: INPAttribution\n\n  constructor(value: number, entries: PerformanceEventTiming[]) {\n    this.value = value\n    this.entries = entries\n\n    const firstEntryWithTarget = entries.find(entry => entry.target)\n    this.attribution = {\n      eventTarget: getSelector(firstEntryWithTarget?.target),\n    }\n  }\n}\n","import {InteractionCountObserver} from './interaction-count'\nimport {InteractionList, type Interaction} from './interaction-list'\nimport {INPMetric} from './metric'\n\nconst MAX_INTERACTION_ENTRIES = 10\n/*\n * The InteractionProcessor is responsible for processing PerformanceEventTiming entries and keeping track of the current INP.\n */\nexport class InteractionProcessor {\n  interactions: InteractionList = new InteractionList(MAX_INTERACTION_ENTRIES)\n  interactionCountObserver: InteractionCountObserver\n\n  constructor() {\n    this.interactionCountObserver = new InteractionCountObserver()\n    this.interactionCountObserver.observe()\n  }\n\n  get inp() {\n    const interaction = this.interactions.estimateP98(this.interactionCountObserver.interactionCount)\n\n    // Pages without interactions report INP = 0\n    if (!interaction) {\n      return new INPMetric(0, [])\n    }\n\n    return new INPMetric(interaction.latency, interaction.entries)\n  }\n\n  teardown() {\n    this.interactionCountObserver.teardown()\n  }\n\n  processEntries(entries: PerformanceEventTiming[]) {\n    for (const entry of entries) {\n      // This is a `event` type entry\n      if (entry.interactionId) {\n        this.processEntry(entry)\n        continue\n      }\n\n      // see https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/onINP.ts#L169-L189\n      if (entry.entryType === 'first-input') {\n        if (!this.interactions.findEntry(entry)) {\n          this.processEntry(entry)\n        }\n      }\n    }\n  }\n\n  processEntry(entry: PerformanceEventTiming) {\n    const existingInteraction = this.interactions.get(String(entry.interactionId))\n\n    // multiple events may be fired for the same interaction, so we'll only keep\n    // the longest duration.\n    if (existingInteraction) {\n      return this.interactions.update(existingInteraction, entry)\n    }\n\n    const interaction: Interaction = {\n      id: String(entry.interactionId),\n      latency: entry.duration,\n      entries: [entry],\n    }\n\n    this.interactions.add(interaction)\n  }\n}\n","import {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {ssrSafeDocument, ssrSafeWindow} from '@github-ui/ssr-utils'\nimport type {INPMetric} from './metric'\nimport {InteractionProcessor} from './interaction-processor'\n\nconst supportsINP =\n  // eslint-disable-next-line compat/compat\n  ssrSafeWindow && 'PerformanceEventTiming' in ssrSafeWindow && 'interactionId' in PerformanceEventTiming.prototype\n\ntype INPCallback = (inp: INPMetric, opts: {url?: string}) => void\n\n/*\n * The INPObserver is responsible for listening to Performance events and routing them to the InteractionProcessor.\n * It also manages resetting INP and reporting it when navigating or hiding a page.\n */\nexport class INPObserver {\n  cb: INPCallback\n  interactionProcessor: InteractionProcessor\n  observer?: PerformanceObserver\n  url?: string\n\n  constructor(cb: INPCallback) {\n    this.cb = cb\n    this.interactionProcessor = new InteractionProcessor()\n    this.setupListeners()\n  }\n\n  setupListeners() {\n    if (!supportsINP) return\n\n    const onHiddenOrPageHide = (event: Event) => {\n      if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n        this.report()\n      }\n    }\n\n    // Similar to web-vitals, we report the current INP when hard navigating or\n    // when the page is hidden\n    ssrSafeDocument?.addEventListener('visibilitychange', onHiddenOrPageHide, true)\n    ssrSafeDocument?.addEventListener('pagehide', onHiddenOrPageHide, true)\n\n    // SOFT_NAV_STATE.RENDER is dispatched when the soft navigation finished rendering.\n    // That means that the previous page is fully hidden so we can stop listening for its events.\n    ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.RENDER, () => {\n      this.report()\n      this.reset()\n    })\n  }\n\n  observe(initialLoad = true) {\n    if (!supportsINP) return\n\n    this.url = ssrSafeWindow?.location.href\n    this.observer = new PerformanceObserver(list => {\n      this.interactionProcessor.processEntries(list.getEntries() as PerformanceEventTiming[])\n    })\n\n    this.observer.observe({type: 'first-input', buffered: initialLoad})\n    this.observer.observe({\n      type: 'event',\n      // threshold set by web-vitals library\n      durationThreshold: 40,\n      // buffered events are important on first page load since we may have missed\n      // a few until the observer was set up.\n      buffered: initialLoad,\n    })\n  }\n\n  report() {\n    this.cb(this.interactionProcessor.inp, {url: this.url})\n  }\n\n  teardown() {\n    this.observer?.takeRecords()\n    this.observer?.disconnect()\n  }\n\n  reset() {\n    this.teardown()\n    this.interactionProcessor.teardown()\n    this.interactionProcessor = new InteractionProcessor()\n    this.observe(false)\n  }\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_EXTERNAL_EVENTS} from './external'\nimport {failSoftNav, initSoftNav, renderedSoftNav, startSoftNav, succeedSoftNav} from './state'\nimport {SOFT_NAV_STATE} from './states'\n\nexport function setup() {\n  /** Ensure that when a turbo drive navigation happens, the page title is announced */\n  ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, function (event) {\n    if (event.mechanism === 'turbo') {\n      announce(`${document.title}`)\n    }\n  })\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.INITIAL, initSoftNav)\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.START, e => {\n    startSoftNav((e as CustomEvent).detail.mechanism)\n  })\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.SUCCESS, () => succeedSoftNav())\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.ERROR, () => failSoftNav())\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.RENDER, () => renderedSoftNav())\n}\n","/*\n * Hi! The modules in this file are loaded on **every** page on github.com.\n * Please only add files here if the code does indeed need to be on every page.\n * If the code is needed on only some pages, please load it more sparingly by\n * following the docs at https://thehub.github.com/epd/engineering/dev-practicals/frontend/erb-pvc-catalyst/client-side-behaviors-with-catalyst/\n * To create a dynamically-loaded Catalyst component for your behavior instead.\n *\n */\n\nimport './github/behaviors/ajax-error'\nimport './github/behaviors/ajax-loading'\nimport './github/behaviors/ajax-pagination'\nimport './github/behaviors/analytics-events'\nimport './github/behaviors/animated-image'\nimport './github/behaviors/autocheck'\nimport './github/behaviors/autocomplete'\nimport './github/behaviors/autosearch-form'\nimport './github/behaviors/autoselect'\nimport './github/behaviors/autosubmit'\nimport './github/behaviors/avatar-reset-text'\nimport './github/behaviors/batch-deferred-content'\nimport './github/behaviors/billing-addons'\nimport './github/behaviors/blob-csv'\nimport './github/repositories/blob-header'\nimport './github/behaviors/branch-protection-integration-select'\nimport './github/behaviors/bulk-actions'\nimport './github/behaviors/bundle-download-stats'\nimport './github/behaviors/buttons'\nimport './github/behaviors/characters-remaining'\nimport './github/behaviors/check-all'\nimport './github/behaviors/clear-data-on-logout'\nimport './github/behaviors/clipboard-copy'\nimport './github/behaviors/code-nav'\nimport './github/behaviors/commenting/ajax'\nimport './github/behaviors/commenting/close'\nimport './github/behaviors/commenting/edit'\nimport './github/behaviors/commenting/focus'\nimport './github/behaviors/commenting/markdown'\nimport './github/behaviors/commenting/preview'\nimport './github/behaviors/commenting/reaction-suggestion'\nimport './github/behaviors/commits'\nimport './github/behaviors/confirm'\nimport './github/behaviors/company-name-input'\nimport './github/behaviors/company-owned'\nimport './github/behaviors/details'\nimport './github/behaviors/details-element'\nimport './github/behaviors/details-menu'\nimport './github/behaviors/dialog-helpers'\nimport './github/behaviors/disable-with'\nimport './github/behaviors/document-dropzone'\nimport './github/behaviors/encrypt'\nimport './github/behaviors/favicon'\nimport './github/behaviors/feature-preview-indicator'\nimport './github/behaviors/feature-preview-trigger'\nimport './github/behaviors/file-attachment'\nimport './github/behaviors/filter-input'\nimport './github/behaviors/filterable'\nimport './github/behaviors/fixed-offset-fragment-navigation-observer'\nimport './github/behaviors/flash'\nimport './github/behaviors/flash-observer'\nimport './github/behaviors/focus-delay'\nimport './github/behaviors/form-toggle'\nimport './github/behaviors/fuzzy-list'\nimport './github/behaviors/gfm'\nimport './github/behaviors/hash-change'\nimport './github/behaviors/header'\nimport './github/behaviors/hooks'\nimport './github/behaviors/hotkey-map'\nimport './github/behaviors/hovercards'\nimport './github/behaviors/html-validation'\nimport './github/behaviors/hydro-analytics-pageview'\nimport './github/behaviors/hydro-analytics-tracking'\nimport './github/behaviors/hydro-click-tracking'\nimport './github/behaviors/immediate-updates'\nimport './github/behaviors/include-fragment'\nimport './github/behaviors/indeterminate'\nimport './github/behaviors/jump-to-loader'\nimport './github/behaviors/keyboard-shortcuts'\nimport './github/behaviors/length-limited-input-with-warning'\nimport './github/behaviors/member-search-filter'\nimport './github/behaviors/notice'\nimport './github/behaviors/open-in-github-dev'\nimport './github/behaviors/permalink'\nimport './github/behaviors/permission-menu-form'\nimport './github/behaviors/turbo-timing'\nimport './github/behaviors/print-popup'\nimport './github/behaviors/poll-include-fragment'\nimport './github/behaviors/quick-submit'\nimport './github/behaviors/quote-selection'\nimport './github/behaviors/reactions'\nimport './github/behaviors/remote-form'\nimport './github/behaviors/removed-contents'\nimport './github/behaviors/render-editor'\nimport './github/behaviors/enrichable-markdown-render'\nimport './github/behaviors/replace-remote-form'\nimport './github/behaviors/report-long-tasks'\nimport './github/behaviors/responsive-underlinenav'\nimport './github/behaviors/saved-replies'\nimport './github/behaviors/scanning'\nimport './github/behaviors/session-resume'\nimport './github/behaviors/side-navigation'\nimport './github/behaviors/site-notifications'\nimport './github/behaviors/site-search'\nimport './github/behaviors/size-to-fit'\nimport './github/behaviors/smooth-scroll-anchor'\nimport './github/behaviors/snippet-clipboard-copy'\nimport './github/behaviors/social'\nimport './github/behaviors/socket-channel'\nimport './github/behaviors/sso-auto-replay'\nimport './github/behaviors/stale-session'\nimport './github/behaviors/statuses'\nimport './github/behaviors/sticky'\nimport './github/behaviors/sudo-required'\nimport './github/behaviors/suggesters/emoji-suggester'\nimport './github/behaviors/suggesters/issue-suggester'\nimport './github/behaviors/suggesters/mention-suggester'\nimport './github/behaviors/survey'\nimport './github/behaviors/sync-details-text'\nimport './github/behaviors/tab-container'\nimport './github/behaviors/tag-input'\nimport './github/behaviors/targetable-elements'\nimport './github/behaviors/task-list'\nimport './github/behaviors/team-members'\nimport './github/behaviors/timeline/marker'\nimport './github/behaviors/timeline/progressive'\nimport './github/behaviors/timeline/timeline-accessibility'\nimport './github/behaviors/toggler'\nimport './github/behaviors/register-service-worker'\nimport '@github-ui/turbo'\nimport './github/behaviors/tz-cookie'\nimport './github/behaviors/sudo-credential-options'\nimport './github/behaviors/unread-comments'\nimport './github/behaviors/unread-item-counter'\nimport './github/behaviors/updatable-content-observer'\nimport './github/behaviors/updatable-content-stale-object'\nimport './github/behaviors/upload-avatar'\nimport './github/behaviors/user-content'\nimport './github/behaviors/user-select-contain-polyfill'\nimport './github/behaviors/user-status-loader'\nimport './github/behaviors/user-lists'\nimport './github/behaviors/warn-unsaved-changes'\nimport './github/behaviors/will-transition-once'\nimport './github/issues/issue-link'\nimport './github/issues/labels'\nimport './github/issues/sidebar'\nimport './github/memex/search'\nimport {setup as setupSoftNav} from '@github-ui/soft-nav/setup'\nimport {setupWebVitals} from '@github-ui/web-vitals/setup'\n\nsetupSoftNav()\nsetupWebVitals()\n","import {onCLS, onFCP, onFID, onLCP, onTTFB, onINP} from 'web-vitals/attribution'\nimport {sendSoftVitals, sendTimingResults, sendVitals} from './timing-stats'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {resetHPC} from './hpc'\nimport {INPObserver} from './inp/observer'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\nexport function setupWebVitals() {\n  const useCustomINP = isFeatureEnabled('custom_inp')\n\n  sendTimingResults()\n  onCLS(sendVitals)\n  onFCP(sendVitals)\n  onFID(sendVitals)\n  onLCP(sendVitals)\n  onTTFB(sendVitals)\n\n  onLCP(sendSoftVitals, {reportSoftNavs: true})\n  onCLS(sendSoftVitals, {reportSoftNavs: true})\n\n  if (useCustomINP) {\n    const inpObserver = new INPObserver(sendVitals)\n    inpObserver.observe()\n  } else {\n    onINP(sendVitals)\n  }\n\n  // Any time we trigger a new soft navigation, we want to reset HPC.\n  ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.START, ({mechanism}) => {\n    resetHPC({soft: true, mechanism})\n  })\n\n  // Start HPC at page load.\n  resetHPC({soft: false})\n}\n","type AutoFlushingQueueEntry<ElementType> = [ElementType, string]\nclass AutoFlushingQueue<ElementType = HTMLElement> {\n  timeout: number\n  limit: number\n  elements: Array<AutoFlushingQueueEntry<ElementType>> = []\n  timer: number | null = null\n  callbacks: Array<(elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>> = []\n  index: number\n\n  constructor(timeout = 50, limit = 30) {\n    this.timeout = timeout // flush timeout in milliseconds\n    this.limit = limit // max number of elements before autoflushing\n    this.index = 0\n  }\n\n  push(element: ElementType): string {\n    const key = `item-${this.index++}`\n\n    if (this.timer) {\n      window.clearTimeout(this.timer)\n      this.timer = null\n    }\n    if (this.elements.length >= this.limit) {\n      this.flush()\n    }\n\n    this.timer = window.setTimeout(() => {\n      this.timer = null\n      this.flush()\n    }, this.timeout)\n\n    this.elements.push([element, key])\n    return key\n  }\n\n  onFlush(callback: (elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>): void {\n    this.callbacks.push(callback)\n  }\n\n  private async flush(): Promise<void> {\n    const elementsToFlush = this.elements.splice(0, this.limit)\n    if (elementsToFlush.length === 0) return\n\n    await Promise.all(this.callbacks.map(callback => callback(elementsToFlush)))\n  }\n}\n\ninterface HTMLElementWithInputs extends HTMLElement {\n  inputs: HTMLInputElement[]\n}\n\nexport class BatchLoader<ResponseType> {\n  autoFlushingQueue: AutoFlushingQueue<HTMLElementWithInputs>\n  url: string\n  callbacks: Map<string, (value: ResponseType) => void>\n  validate: (value: unknown) => asserts value is ResponseType\n\n  constructor(url: string, validator: (value: unknown) => asserts value is ResponseType) {\n    this.url = url\n    this.callbacks = new Map()\n    this.autoFlushingQueue = new AutoFlushingQueue()\n    this.autoFlushingQueue.onFlush(async elements => {\n      this.load(elements)\n    })\n    this.validate = validator\n  }\n\n  loadInBatch(element: HTMLElementWithInputs): Promise<ResponseType> {\n    const key = this.autoFlushingQueue.push(element)\n    return new Promise(resolve => this.callbacks.set(key, resolve))\n  }\n\n  async load(elements: Array<AutoFlushingQueueEntry<HTMLElementWithInputs>>) {\n    const elementsByKey = new Map<string, HTMLElementWithInputs>()\n\n    for (const [batchElement, key] of elements) {\n      elementsByKey.set(key, batchElement)\n    }\n\n    const consolidatedData = new FormData()\n\n    for (const [key, batchElement] of elementsByKey.entries()) {\n      for (const input of batchElement.inputs) {\n        consolidatedData.append(`items[${key}][${input.name}]`, input.value)\n      }\n    }\n\n    if (Array.from(consolidatedData.values()).length === 0) {\n      return\n    }\n\n    consolidatedData.set('_method', 'GET')\n    const response = await fetch(this.url, {\n      method: 'POST',\n      body: consolidatedData,\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n\n    if (response.ok) {\n      const json = await response.json()\n\n      if (!json || typeof json !== 'object' || Array.isArray(json)) {\n        throw new Error('Malformed batch response')\n      }\n\n      for (const key in json) {\n        const callback = this.callbacks.get(key)\n        if (callback) {\n          const value = json[key]\n          this.validate(value)\n          callback(value)\n        }\n      }\n    }\n  }\n}\n","// Batch Deferred Content Behavior\n//\n// Automatically fetches content for multiple placeholders with a single request.\n// Placeholders are represented as <batch-deferred-content>'s so that per-placeholder arguments can be\n// passed along to the backend for rendering. Once the response is received, each placeholder\n// will be replaced with it's relevant content.\n//\n// Batching is handled by an autoflushing queue. Once an upper limit (default 30) of placeholders\n// are found, or new placeholders stop being added to the queue, after a timeout (default 50ms),\n// a single request will be made to fetch the content for those items.\n//\n// Example Markup\n//\n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"42\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"abcdef0\">\n//   </batch-deferred-content>\n//   \n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"88\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"f000001\">\n//   </batch-deferred-content>\n//\n// Example Request\n//\n//   POST /my/batched/content/endpoint\n//   BODY {\n//     items: {\n//       item-0: {repo_id: 42, commit_oid: \"abcdef0\"},\n//       item-1: {repo_id: 88, commit_oid: \"f000001\"},\n//     }\n//   }\n//\n// Example Response\n//\n//   Content-Type: application/json\n//   BODY {\n//     item-0: \"<div>Some markup</div>\",\n//     item-1: \"<div>More markup</div>\",\n//   }\n\nimport {controller, targets} from '@github/catalyst'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {BatchLoader} from './batch-deferred-content/batch-loader'\n\nexport abstract class BaseBatchDeferredContentElement<ResponseType> extends HTMLElement {\n  inputs: HTMLInputElement[]\n  batchLoaders: Map<string, BatchLoader<ResponseType>>\n\n  abstract update(content: ResponseType): void\n  abstract validate(value: unknown): asserts value is ResponseType\n\n  async connectedCallback() {\n    const content = await this.batchLoader.loadInBatch(this)\n    this.update(content)\n  }\n\n  get batchLoader(): BatchLoader<ResponseType> {\n    const url = this.getAttribute('data-url')\n\n    if (!url) {\n      throw new Error(`${this.tagName} element requires a data-url attribute`)\n    }\n\n    let loader = this.batchLoaders.get(url)\n    if (!loader) {\n      loader = new BatchLoader(url, (value: unknown) => this.validate(value))\n      this.batchLoaders.set(url, loader)\n    }\n    return loader\n  }\n}\n\nconst batchDeferredContentLoaders: Map<string, BatchLoader<string>> = new Map()\n\n@controller\nclass BatchDeferredContentElement extends BaseBatchDeferredContentElement<string> {\n  @targets override inputs: HTMLInputElement[]\n\n  override batchLoaders = batchDeferredContentLoaders\n\n  validate(value: unknown): asserts value is string {\n    if (typeof value !== 'string') {\n      throw new Error('Batch deferred content was not a string')\n    }\n  }\n\n  update(content: string): void {\n    const docFragment = parseHTML(document, content)\n    this.replaceWith(docFragment)\n  }\n}\n","import {getUtf8StringLength} from '@github-ui/text'\nimport {onFocus} from '@github-ui/onfocus'\n\nfunction showRemainingCharacterCount(value: string, limit: number, field: HTMLTextAreaElement | HTMLInputElement) {\n  const container = field.closest('.js-characters-remaining-container')\n  if (!container) {\n    return\n  }\n\n  const remainingEl = container.querySelector<HTMLElement>('.js-characters-remaining')!\n  const suffix = String(remainingEl.getAttribute('data-suffix'))\n  const valueLength = getUtf8StringLength(value)\n  const remainingCount = limit - valueLength\n\n  if (remainingCount <= 20) {\n    remainingEl.textContent = `${remainingCount} ${suffix}`\n    remainingEl.classList.toggle('color-fg-danger', remainingCount <= 5)\n    remainingEl.setAttribute('role', 'status')\n    remainingEl.hidden = false\n  } else {\n    remainingEl.setAttribute('role', 'none')\n    remainingEl.hidden = true\n  }\n}\n\nfunction getFieldLimit(input: HTMLTextAreaElement | HTMLInputElement): number {\n  if (input.hasAttribute('data-maxlength')) {\n    return parseInt(input.getAttribute('data-maxlength') || '')\n  }\n\n  return input.maxLength\n}\n\nexport function hasExceededCharacterLimit(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  const limit = getFieldLimit(input)\n  const valueLength = getUtf8StringLength(input.value)\n  const remainingCount = limit - valueLength\n\n  return remainingCount < 0\n}\n\nexport function updateInputRemainingCharacters(input: HTMLTextAreaElement | HTMLInputElement) {\n  const limit = getFieldLimit(input)\n  showRemainingCharacterCount(input.value, limit, input)\n}\n\nexport function resetCharactersRemainingCounts(container: Element) {\n  const charContainers = container.querySelectorAll('.js-characters-remaining-container')\n\n  for (const charContainer of charContainers) {\n    const input = charContainer.querySelector<HTMLInputElement>('.js-characters-remaining-field')!\n    updateInputRemainingCharacters(input)\n  }\n}\n\nonFocus('.js-characters-remaining-field', function (input) {\n  function onInput() {\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      updateInputRemainingCharacters(input)\n    }\n  }\n  onInput()\n\n  input.addEventListener('input', onInput)\n  input.addEventListener(\n    'blur',\n    () => {\n      input.removeEventListener('input', onInput)\n    },\n    {once: true},\n  )\n})\n","// Confirm\n//\n// Prompts native confirm dialog before activating link.\n//\n// data-confirm - Message to pass to confirm().\n//\n//   <button type=\"submit\" data-confirm=\"Are you sure?\">Delete</a>\n\ndocument.addEventListener(\n  'click',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const selector =\n      'a[data-confirm], input[type=submit][data-confirm], input[type=checkbox][data-confirm], button[data-confirm]'\n\n    const currentTarget = event.target.closest(selector)\n    if (!currentTarget) return\n\n    const message = currentTarget.getAttribute('data-confirm')\n    if (!message) return\n\n    if (\n      currentTarget instanceof HTMLInputElement &&\n      currentTarget.hasAttribute('data-confirm-checked') &&\n      !currentTarget.checked\n    ) {\n      return\n    }\n\n    if (!confirm(message)) {\n      event.stopImmediatePropagation()\n      event.preventDefault()\n    }\n  },\n  true,\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Entire document is drop target.\nobserve('.js-document-dropzone', {\n  constructor: HTMLElement,\n  add(el) {\n    document.body.addEventListener('dragstart', onDragstart)\n    document.body.addEventListener('dragend', onDragend)\n    document.body.addEventListener('dragenter', onDragenter)\n    document.body.addEventListener('dragover', onDragenter)\n    document.body.addEventListener('dragleave', onBodyDragleave)\n    el.addEventListener('drop', onDrop)\n  },\n  remove(el) {\n    document.body.removeEventListener('dragstart', onDragstart)\n    document.body.removeEventListener('dragend', onDragend)\n    document.body.removeEventListener('dragenter', onDragenter)\n    document.body.removeEventListener('dragover', onDragenter)\n    document.body.removeEventListener('dragleave', onBodyDragleave)\n    el.removeEventListener('drop', onDrop)\n  },\n})\n\nexport function hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\nlet dragging: number | null = null\n\n// Highlight textarea and change drop cursor. Ensure drop target styles\n// are cleared after dragging back outside of window.\nfunction onDragenter(event: DragEvent) {\n  if (ignorePageElementDrag) return\n\n  const target = event.currentTarget as Element\n\n  if (dragging) {\n    window.clearTimeout(dragging)\n  }\n  dragging = window.setTimeout(() => target.classList.remove('dragover'), 200)\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  transfer.dropEffect = 'copy'\n  target.classList.add('dragover')\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nfunction onBodyDragleave(event: DragEvent) {\n  // Ignore leave events from children to prevent flicker.\n  if (!(event.target instanceof Element)) return\n  if (event.target.classList.contains('js-document-dropzone')) {\n    const currentTarget = event.currentTarget as Element\n    currentTarget.classList.remove('dragover')\n  }\n}\n\nfunction onDrop(event: DragEvent) {\n  const container = event.currentTarget as Element\n\n  container.classList.remove('dragover')\n  document.body.classList.remove('dragover')\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  fire(container, 'document:drop', {transfer})\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\n// Ignore image or link drags from within the page itself. Allow them to be\n// dragged onto the desktop, but ignore any drops back onto the page.\nlet ignorePageElementDrag = false\n\nfunction onDragstart() {\n  ignorePageElementDrag = true\n}\n\nfunction onDragend() {\n  ignorePageElementDrag = false\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Encrypt plain text with a public key.\nexport async function encrypt(publicKey: Uint8Array, value: string): Promise<Uint8Array> {\n  const encoder = new TextEncoder()\n  const messageBytes = encoder.encode(value)\n  const {seal} = await import('../tweetsodium')\n  return seal(messageBytes, publicKey)\n}\n\n// Decode base64 data into a byte array.\nexport function decode(encoded: string): Uint8Array {\n  const bytes = atob(encoded)\n    .split('')\n    .map(x => x.charCodeAt(0))\n  return Uint8Array.from(bytes)\n}\n\n// Encode a byte array as a base64 string.\nexport function encode(bytes: Uint8Array): string {\n  let str = ''\n  for (const byte of bytes) {\n    str += String.fromCharCode(byte)\n  }\n  return btoa(str)\n}\n\non('submit', 'form.js-encrypt-submit', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n\n  if (event.defaultPrevented || !form.checkValidity()) return\n  const plainText = form.elements.namedItem('secret_value') as HTMLTextAreaElement\n\n  // Prevent serializing plain text value in form submission.\n  plainText.disabled = true\n\n  if (!plainText.value) return\n\n  event.preventDefault()\n\n  // Submit encrypted value in hidden input.\n  const publicKey = decode(form.getAttribute('data-public-key')!)\n\n  ;(form.elements.namedItem('encrypted_value') as HTMLInputElement).value = encode(\n    await encrypt(publicKey, plainText.value),\n  )\n\n  form.submit()\n})\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is disabled.\non('submit', 'form.js-encrypt-bulk-submit', submitBulk(true))\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is not disabled.\non('submit', 'form.js-encrypt-bulk-submit-enable-empty', submitBulk(false))\n\n// Submit multiple encrypted values. If an unencrypted field is empty,\n// its associated hidden encrypted field is enabled or disabled depending on \"disableEmptyValues\".\nfunction submitBulk(disableEmptyValues: boolean) {\n  return async function (event: Event) {\n    const form = event.currentTarget as HTMLFormElement\n\n    if (event.defaultPrevented || !form.checkValidity()) return\n\n    // Submit encrypted value in hidden input.\n    const publicKey = decode(form.getAttribute('data-public-key')!)\n\n    event.preventDefault()\n    for (const element of form.elements) {\n      // Prevent serializing plain text value in form submission.\n      const formElement = element as HTMLInputElement\n      if (formElement.id.endsWith('secret')) {\n        formElement.disabled = true\n\n        if (formElement.required && !formElement.value) {\n          const message = `${formElement.name} is invalid!`\n          const template = document.querySelector<HTMLTemplateElement>('template.js-flash-template')!\n          template.after(new TemplateInstance(template, {className: 'flash-error', message}))\n          return\n        }\n\n        const encryptedValueElementName = `${formElement.name}_encrypted_value`\n        if (!formElement.value) {\n          ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).disabled = disableEmptyValues\n          continue\n        }\n\n        ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).value = encode(\n          await encrypt(publicKey, formElement.value),\n        )\n      }\n    }\n    form.submit()\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {positionedOffset} from '@primer/behaviors'\n\nobserve('.js-responsive-underlinenav', {\n  constructor: HTMLElement,\n  subscribe: nav => {\n    asyncCalculateVisibility(nav)\n    return fromEvent(window, 'resize', () => calculateVisibility(nav))\n  },\n})\n\nexport async function asyncCalculateVisibility(nav: HTMLElement) {\n  await loaded\n  calculateVisibility(nav)\n}\n\nfunction toggleItem(item: HTMLElement, hidden: boolean) {\n  // Set visibility to hidden, instead of .hidden attribute\n  // so we can still calculate distance accurately\n  item.style.visibility = hidden ? 'hidden' : ''\n  // Get tab-item name, if present, so we can match it up with the dropdown menu\n  const itemName = item.getAttribute('data-tab-item')\n  if (itemName) {\n    const itemToHide = document.querySelector<HTMLElement>(`[data-menu-item=${itemName}]`)\n    if (itemToHide instanceof HTMLElement) {\n      itemToHide.hidden = !hidden\n    }\n  }\n}\n\nfunction calculateVisibility(nav: HTMLElement) {\n  const items = nav.querySelectorAll<HTMLElement>('.js-responsive-underlinenav-item')\n  const overflowContainer = nav.querySelector<HTMLElement>('.js-responsive-underlinenav-overflow')!\n  const overflowOffset = positionedOffset(overflowContainer, nav)\n  if (!overflowOffset) {\n    return\n  }\n\n  let anyHidden = false\n  for (const item of items) {\n    const itemOffset = positionedOffset(item, nav)\n    if (itemOffset) {\n      const hidden = itemOffset.left + item.offsetWidth >= overflowOffset.left\n      toggleItem(item, hidden)\n      anyHidden = anyHidden || hidden\n    }\n  }\n  overflowContainer.style.visibility = anyHidden ? '' : 'hidden'\n}\n","import {persistResumableFields, restoreResumableFields, setForm} from '@github/session-resume'\nimport {debounce} from '@github/mini-throttle'\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport safeStorage from '@github-ui/safe-storage'\n\n// For some fields we'll save them to localStorage instead of sessionStorage\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 5,\n  throwQuotaErrorsOnSet: false,\n  sendCacheStats: true,\n})\n\nexport const restoreFieldsFromAllBackends = () => {\n  restoreResumableFields(getPageID())\n  restoreResumableFields(getPageID(), {storage: safeLocalStorage})\n}\n\nconst sessionResumableSelector = '.js-session-resumable'\nconst localStorageResumableSelector = '.js-local-storage-resumable'\n\nconst persistFieldstoAllBackends = () => {\n  persistResumableFields(getPageID(), {selector: sessionResumableSelector})\n  persistResumableFields(getPageID(), {selector: localStorageResumableSelector, storage: safeLocalStorage})\n}\n\nconst debouncedRestoreResumableFields = debounce(function () {\n  restoreFieldsFromAllBackends()\n}, 50)\n\n/**\n * Returns true while turbo is showing a \"preview\" of the route from cache: in other words between\n * the time a route is visited and the time it is loaded\n * @returns boolean\n */\nfunction isTurboRenderingCachePreview(): boolean {\n  return document.querySelector('html')?.hasAttribute('data-turbo-preview') ?? false\n}\n\n// Session Resume.\n//\n// Annotate fields to be persisted on navigation away from the current page.\n// Fields be automatically restored when the user revists the page again in\n// their current browser session (excludes seperate tabs).\n//\n// Not design for persisted crash recovery.\n\n// Listen for all form submit events and to see if their default submission\n// behavior is invoked.\nwindow.addEventListener('submit', setForm, {capture: true})\n\n// Resume field content on regular page loads.\nwindow.addEventListener('pageshow', function () {\n  restoreFieldsFromAllBackends()\n})\n\n// Resume field content on elements that are added later\n// We use a debounced version to avoid repeatedly calling it if multiple\n// fields are added\nobserve('.js-session-resumable', function () {\n  // we don't want to restore fields on turbo-cache previews as that empties the cache\n  // causing the fields to be lost when turbo re-renders with the fetched page\n  if (!isTurboRenderingCachePreview()) {\n    debouncedRestoreResumableFields()\n  }\n})\n\n// Persist resumable fields when page is unloaded\nwindow.addEventListener('pagehide', function () {\n  persistFieldstoAllBackends()\n})\n\n// preserve fields before navigating away\nwindow.addEventListener('turbo:before-fetch-response', function () {\n  persistFieldstoAllBackends()\n})\n\n// restore fields once turbo navigation has finished\nwindow.addEventListener('turbo:load', function () {\n  restoreFieldsFromAllBackends()\n})\n","// Deal with selected_link_to on repository and gist pages\nfunction updateSelectedRepoTab(meta: HTMLMetaElement) {\n  const selection = meta && meta.getAttribute('value')\n\n  if (!selection) return\n\n  for (const item of document.querySelectorAll('.js-sidenav-container-pjax .js-selected-navigation-item')) {\n    const isSelected = (item.getAttribute('data-selected-links') || '').split(' ').indexOf(selection) >= 0\n    isSelected ? item.setAttribute('aria-current', 'page') : item.removeAttribute('aria-current')\n    item.classList.toggle('selected', isSelected)\n  }\n}\n\nconst observer = new MutationObserver(mutations => {\n  for (const mutation of mutations) {\n    for (const node of mutation.addedNodes) {\n      if (!(node instanceof HTMLMetaElement)) continue\n\n      if (node.getAttribute('name') === 'selected-link') {\n        updateSelectedRepoTab(node)\n      }\n    }\n  }\n})\n\nobserver.observe(document.head, {childList: true})\n\n// This is to make sure that the selected tab is updated when using back/forward buttons.\ndocument.addEventListener('turbo:load', () => {\n  const selectedLink = document.head.querySelector<HTMLMetaElement>('meta[name=\"selected-link\"]')\n\n  if (!selectedLink) return\n\n  updateSelectedRepoTab(selectedLink)\n})\n","// Populate a form input from a suggested list of tags.\n//\n// Markup example:\n//\n//    <!-- Tag input container -->\n//    <div class=\"tag-input-container js-tag-input-container\">\n//\n//      <!-- Tag <input> wrapper -->\n//      <div class=\"tag-input js-tag-input-wrapper\">\n//\n//        <!-- List of selected tags -->\n//        <ul class=\"js-tag-input-selected-tags\">\n//\n//          <!-- Template used to generate new selected tags -->\n//          <li class=\"js-tag-input-tag js-template d-none\">\n//            <span class=\"js-placeholder-tag-name\"></span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"tag-value\">\n//          </li>\n//\n//          <!-- List of pre-selected tags (optional) -->\n//          <li class=\"js-tag-input-tag\">\n//            <span class=\"js-tag-input-tag-name\">ruby-on-rails</span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"ruby-on-rails\">\n//          </li>\n//        </ul>\n//\n//        <auto-complete src=\"<%= url %>\" for=\"popup\">\n//          <input type=\"text\" class=\"tag-input-inner\" autocomplete=\"off\" autofocus>\n//          <div class=\"js-navigation-container js-active-navigation-container\">\n//            <ul class=\"suggester\" id=\"popup\"></ul>\n//          </div>\n//        </auto-complete>\n//      </div>\n//    </div>\n//\n\nimport type AutocompleteElement from '@github/auto-complete-element'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface TagInputOptions {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement | null\n  multiTagInput: boolean\n}\n\nclass TagInput {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  form: HTMLFormElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement | null\n  multiTagInput: boolean\n\n  constructor(options: TagInputOptions) {\n    this.container = options.container\n    this.selections = options.selections\n    this.inputWrap = options.inputWrap\n    this.input = options.input\n    this.tagTemplate = options.tagTemplate\n    this.form = this.input.form!\n    this.autoComplete = options.autoComplete\n    this.multiTagInput = options.multiTagInput\n  }\n\n  // Bind a tag input to the DOM.\n  setup() {\n    this.container.addEventListener('click', (event: MouseEvent) => {\n      const target = event.target as Element\n      if (target.closest('.js-remove')) {\n        this.removeTag(event)\n      } else {\n        this.onFocus()\n      }\n    })\n    this.container.addEventListener('keydown', (event: KeyboardEvent) => {\n      // If the event isn't prevented that means the autocomplete is open but the user hasn't selected anything\n      // Handle that like the autocomplete is closed\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (event.key === 'Enter' && !(event.defaultPrevented || !this.input.value)) {\n        event.preventDefault()\n        this.selectTag(this.input.value)\n        if (this.autoComplete) {\n          this.autoComplete.open = false\n        }\n      }\n    })\n    this.input.addEventListener('focus', this.onFocus.bind(this))\n    this.input.addEventListener('blur', this.onBlur.bind(this))\n    this.input.addEventListener('keydown', this.onKeyDown.bind(this))\n    this.form.addEventListener('submit', this.onSubmit.bind(this))\n\n    this.autoComplete?.addEventListener('auto-complete-change', () => {\n      this.selectTag(this.autoComplete!.value)\n    })\n  }\n\n  // Make the tag input container look like a focused input.\n  onFocus() {\n    this.inputWrap.classList.add('focus')\n    if (this.input !== document.activeElement) this.input.focus()\n  }\n\n  // Make the tag input container *not* look like a focused input. Also submit\n  // the form if there is text in the input and the suggester is hidden.\n  onBlur() {\n    this.inputWrap.classList.remove('focus')\n    if (!this.autoComplete || (this.autoComplete && !this.autoComplete.open)) {\n      this.onSubmit()\n    }\n  }\n\n  // Taggify the last thing the user typed in case they didn't hit Enter, Tab,\n  // or a comma before clicking the form's submit button.\n  onSubmit() {\n    if (this.input.value) {\n      this.selectTag(this.input.value)\n\n      if (this.autoComplete) {\n        this.autoComplete.open = false\n      }\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent) {\n    switch (eventToHotkeyString(event)) {\n      case 'Backspace':\n        this.onBackspace()\n        break\n      case 'Enter':\n      case 'Tab':\n        this.taggifyValueWhenSuggesterHidden(event)\n        break\n      case ',':\n      case 'Space':\n        this.taggifyValue(event)\n        break\n    }\n  }\n\n  // Taggifies the entered value when the suggester is not visible. Called after an Enter\n  // or Tab is entered.\n  taggifyValueWhenSuggesterHidden(event: Event) {\n    if (this.autoComplete && !this.autoComplete.open && this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n    }\n  }\n\n  // Taggifies the entered value if it exists; called after a comma or space is entered.\n  taggifyValue(event: Event) {\n    if (this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n\n      if (this.autoComplete) {\n        this.autoComplete.open = false\n      }\n    }\n  }\n\n  // Add a new tag to the list of selections if it has not already been added.\n  selectTag(text: string) {\n    const tags = this.normalizeTag(text)\n    const selections = this.selectedTags()\n\n    let tagsAdded = false\n    for (let i = 0; i < tags.length; i++) {\n      const tag = tags[i]!\n      if (selections.indexOf(tag) < 0) {\n        this.selections.appendChild(this.templateTag(tag))\n        tagsAdded = true\n      }\n    }\n\n    if (tagsAdded) {\n      this.input.value = ''\n      fire(this.form, 'tags:changed')\n    }\n  }\n\n  // Remove a tag from the list of selections.\n  removeTag(event: Event) {\n    const target = event.target as Element\n    event.preventDefault()\n    const inputTag = target.closest<HTMLElement>('.js-tag-input-tag')!\n    inputTag.remove()\n    fire(this.form, 'tags:changed')\n  }\n\n  // Generate a new tag Node.\n  templateTag(tag: string): Element {\n    const el = this.tagTemplate.cloneNode(true) as Element\n\n    el.querySelector<HTMLInputElement>('input')!.value = tag\n    const tagName = el.querySelector<HTMLElement>('.js-placeholder-tag-name')!\n    tagName.replaceWith(tag)\n    /* eslint-disable-next-line github/no-d-none */\n    el.classList.remove('d-none', 'js-template')\n\n    return el\n  }\n\n  // Sanitize user input to remove invalid tag characters.\n  normalizeTag(text: string): string[] {\n    const sanitizedText = text.toLowerCase().trim()\n\n    if (!sanitizedText) return []\n    if (this.multiTagInput) return sanitizedText.split(/[\\s,']+/)\n\n    return [sanitizedText.replace(/[\\s,']+/g, '-')]\n  }\n\n  // Remove a tag on backspace if the input is empty.\n  onBackspace() {\n    if (!this.input.value) {\n      const lastSelection = this.selections.querySelector('li:last-child .js-remove')\n      if (lastSelection instanceof HTMLElement) lastSelection.click()\n    }\n  }\n\n  // Map matched input content to a suggester query.\n  selectedTags(): string[] {\n    const inputs = this.selections.querySelectorAll<HTMLInputElement>('input')\n    return Array.from(inputs)\n      .map(el => el.value)\n      .filter(value => value.length > 0)\n  }\n}\n\nobserve('.js-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete'),\n      multiTagInput: false,\n    }).setup()\n  },\n})\n\nobserve('.js-multi-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete'),\n      multiTagInput: true,\n    }).setup()\n  },\n})\n","function supportsUserSelectContain() {\n  const el = document.createElement('div')\n  el.style.cssText = '-ms-user-select: element; user-select: contain;'\n  return (\n    el.style.getPropertyValue('-ms-user-select') === 'element' ||\n    el.style.getPropertyValue('-ms-user-select') === 'contain' ||\n    el.style.getPropertyValue('user-select') === 'contain'\n  )\n}\nfunction handleUserSelectContain(event: Event) {\n  if (!(event.target instanceof Element)) return\n  const currentTarget = event.target.closest('.user-select-contain')\n  if (!currentTarget) return\n\n  const selection = window.getSelection()\n  if (!selection) return\n  if (!selection.rangeCount) return\n  if (!selection.rangeCount || selection.type !== 'Range') return\n\n  const container = selection.getRangeAt(0).commonAncestorContainer\n  if (currentTarget.contains(container)) return\n  selection.selectAllChildren(currentTarget)\n}\n\nif (!supportsUserSelectContain()) {\n  document.addEventListener('click', handleUserSelectContain)\n}\n","import type {CodeEditor} from './editor/code-editor'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst codeEditors: WeakMap<HTMLElement, CodeEditor> = new WeakMap()\n\nexport function getCodeEditor(el: HTMLElement): CodeEditor | undefined {\n  return codeEditors.get(el)\n}\n\nexport async function getAsyncCodeEditor(el: HTMLElement): Promise<CodeEditor> {\n  return codeEditors.get(el) || onEditorFromEvent(await nextEvent(el, 'codeEditor:ready'))\n}\n\nfunction onEditorFromEvent(event: Event): CodeEditor {\n  if (!(event instanceof CustomEvent)) throw new Error('assert: event is not a CustomEvent')\n  const editor: CodeEditor = event.detail.editor\n  if (!event.target) throw new Error('assert: event.target is null')\n  codeEditors.set(event.target as HTMLElement, editor)\n  return editor\n}\n\non('codeEditor:ready', '.js-code-editor', onEditorFromEvent)\n\nfunction nextEvent(target: EventTarget, event: string): Promise<Event> {\n  return new Promise(resolve => {\n    target.addEventListener(event, resolve, {once: true})\n  })\n}\n","import {score as fuzzyScore, hasMatch, positions} from 'fzy.js'\n\nconst getScore = (value: string, text: string, minScore: number) => {\n  if (!hasMatch(value, text)) return -Infinity\n  const score = fuzzyScore(value, text)\n  if (score < minScore) return -Infinity\n  return score\n}\nconst highlightElement = (node: HTMLElement, value: string, text: string) => {\n  node.textContent = ''\n\n  let lastPosition = 0\n  for (const i of positions(value, text)) {\n    const slice = text.slice(lastPosition, i)\n    if (slice !== '') {\n      node.appendChild(document.createTextNode(text.slice(lastPosition, i)))\n    }\n    lastPosition = i + 1\n    const mark = document.createElement('mark')\n    mark.textContent = text[i]!\n    node.appendChild(mark)\n  }\n\n  node.appendChild(document.createTextNode(text.slice(lastPosition)))\n}\n\ninterface sortAbort {\n  aborted: boolean\n}\nconst sorting: WeakMap<FuzzyListElement, sortAbort> = new WeakMap()\n\ntype FuzzyListLazyRenderCallback = (text: string) => Node\ninterface state {\n  timer: number | null\n  handler: MutationObserver\n  items: Set<Node>\n  lazyItems: Map<string, FuzzyListLazyRenderCallback>\n}\nconst states: WeakMap<FuzzyListElement, state> = new WeakMap()\n\nconst textCache: WeakMap<Node, string> = new WeakMap()\nconst getTextCache = (item: Node) => {\n  if (!textCache.has(item) && item instanceof HTMLElement) {\n    const value = (item.getAttribute('data-value') || item.textContent || '').trim()\n    textCache.set(item, value)\n    return value\n  }\n  return textCache.get(item) || ''\n}\n\nclass FuzzyListElement extends HTMLElement {\n  connectedCallback() {\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const items = new Set(list.querySelectorAll('li'))\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const inputEl = this.querySelector('input')\n    if (inputEl instanceof HTMLInputElement) {\n      inputEl.addEventListener('input', () => {\n        this.value = inputEl.value\n      })\n    }\n\n    const handler = new MutationObserver(mutations => {\n      let update = false\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && mutation.addedNodes.length) {\n          for (const item of mutation.addedNodes) {\n            if (item instanceof HTMLLIElement && !items.has(item)) {\n              const text = getTextCache(item)\n              update = update || hasMatch(this.value, text)\n              items.add(item)\n            }\n          }\n        }\n      }\n      if (update) this.sort()\n    })\n    handler.observe(list, {childList: true})\n\n    const state = {handler, items, lazyItems: new Map(), timer: null}\n    states.set(this, state)\n  }\n\n  disconnectedCallback() {\n    const state = states.get(this)\n    if (state) {\n      state.handler.disconnect()\n      states.delete(this)\n    }\n  }\n\n  addLazyItems(dataset: string[], render: FuzzyListLazyRenderCallback) {\n    const state = states.get(this)\n    if (!state) return\n    const {lazyItems} = state\n    const {value} = this\n    let update = false\n    for (const item of dataset) {\n      lazyItems.set(item, render)\n      update = update || (Boolean(value) && hasMatch(value, item))\n    }\n    if (update) this.sort()\n  }\n\n  sort() {\n    const oldSortAbort = sorting.get(this)\n    if (oldSortAbort) oldSortAbort.aborted = true\n    const sortAbort = {aborted: false}\n    sorting.set(this, sortAbort)\n    const {minScore, markSelector, maxMatches, value} = this\n    const state = states.get(this)\n    if (!state) return\n    if (!this.dispatchEvent(new CustomEvent('fuzzy-list-will-sort', {cancelable: true, detail: value}))) return\n    const {items, lazyItems} = state\n    const shouldMark = this.hasAttribute('mark-selector')\n\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const itemsToRender: Array<\n      {render: FuzzyListLazyRenderCallback; text: string; score: number} | {item: Node; score: number}\n    > = []\n\n    if (value) {\n      for (const item of items) {\n        const text = getTextCache(item)\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({item, score})\n      }\n      for (const [text, render] of lazyItems) {\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({text, render, score})\n      }\n      itemsToRender.sort((a, b) => b.score - a.score).splice(maxMatches)\n    } else {\n      let i = itemsToRender.length\n      for (const item of items) {\n        if (i >= maxMatches) break\n        itemsToRender.push({item, score: 1})\n        i += 1\n      }\n      for (const [text, render] of lazyItems) {\n        if (i >= maxMatches) break\n        itemsToRender.push({text, render, score: 1})\n        i += 1\n      }\n    }\n\n    requestAnimationFrame(() => {\n      if (sortAbort.aborted) return\n\n      // Store a reference to the checked input (if there is one) as when we\n      // append other (stale) items they could be checked, and we want to keep\n      // the originally checked item as the only checked item\n      const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n\n      list.textContent = ''\n      let offset = 0\n\n      const nextBatch = () => {\n        if (sortAbort.aborted) return\n        const end = Math.min(itemsToRender.length, offset + 100)\n        const fragment = document.createDocumentFragment()\n        for (let i = offset; i < end; i += 1) {\n          const itemToRender = itemsToRender[i]!\n          let item = null\n          if ('render' in itemToRender && 'text' in itemToRender) {\n            const {render, text} = itemToRender\n            item = render(text)\n            items.add(item)\n            textCache.set(item, text)\n            lazyItems.delete(text)\n          } else if ('item' in itemToRender) {\n            item = itemToRender.item\n          }\n          if (item instanceof HTMLElement) {\n            if (shouldMark) {\n              highlightElement(\n                markSelector ? item.querySelector(markSelector) || item : item,\n                shouldMark ? value : '',\n                getTextCache(item),\n              )\n            }\n            fragment.appendChild(item)\n          }\n        }\n        offset = end\n\n        // Loop through all items that are about to be rendered - if there are\n        // any radios that are checked that conflict with the one checked item,\n        // then reset them to unchecked state\n        let inputStateReset = false\n        if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n          for (const checkedInput of fragment.querySelectorAll('input[type=\"radio\"]:checked')) {\n            if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n              checkedInput.checked = false\n              inputStateReset = true\n            }\n          }\n        }\n\n        if (this.getAttribute('data-tab-only-first')) {\n          // Only make first button tabbable, others are navigable by arrow keys\n          // https://github.com/github/accessibility-audits/issues/6591\n          const buttons = this.querySelectorAll('button.js-emoji-button')\n          for (const button of buttons) {\n            button.setAttribute('tabindex', '-1')\n          }\n          buttons.item(0)?.setAttribute('tabindex', '0')\n        } else {\n          // Make sure that the fragments we're appending are accessible by 'tab'\n          for (const button of fragment.querySelectorAll('button[tabindex=\"-1\"]')) {\n            button.setAttribute('tabindex', '0')\n          }\n        }\n\n        list.appendChild(fragment)\n\n        // If any checked items were changed then a change event should be\n        // fired to let other observers know\n        if (checkedInputBeforeFilter && inputStateReset) {\n          checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n        }\n\n        if (end < itemsToRender.length) {\n          requestAnimationFrame(nextBatch)\n        } else {\n          list.hidden = itemsToRender.length === 0\n          const emptyEl = this.querySelector<HTMLElement>('[data-fuzzy-list-show-on-empty]')\n          if (emptyEl) {\n            emptyEl.hidden = itemsToRender.length > 0\n          }\n\n          this.dispatchEvent(new CustomEvent('fuzzy-list-sorted', {detail: itemsToRender.length}))\n        }\n      }\n\n      nextBatch()\n    })\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || ''\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value)\n  }\n\n  get markSelector(): string {\n    return this.getAttribute('mark-selector') || ''\n  }\n\n  set markSelector(value: string) {\n    if (value) {\n      this.setAttribute('mark-selector', value)\n    } else {\n      this.removeAttribute('mark-selector')\n    }\n  }\n\n  get minScore(): number {\n    return Number(this.getAttribute('min-score') || 0)\n  }\n\n  set minScore(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('min-score', String(value))\n  }\n\n  get maxMatches(): number {\n    return Number(this.getAttribute('max-matches') || Infinity)\n  }\n\n  set maxMatches(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('max-matches', String(value))\n  }\n\n  static get observedAttributes(): string[] {\n    return ['value', 'mark-selector', 'min-score', 'max-matches']\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n    const state = states.get(this)\n    if (!state) return\n    if (state.timer) window.clearTimeout(state.timer)\n    state.timer = window.setTimeout(() => this.sort(), 100)\n  }\n}\n\nexport default FuzzyListElement\n\nif (!window.customElements.get('fuzzy-list')) {\n  window.FuzzyListElement = FuzzyListElement\n  window.customElements.define('fuzzy-list', FuzzyListElement)\n}\n\ndeclare global {\n  interface Window {\n    FuzzyListElement: typeof FuzzyListElement\n  }\n}\n","import {sendStats} from '@github-ui/stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext,\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\n\ntype ShelfReferrerParams = {\n  notification_referrer_id?: string\n  notifications_before?: string\n  notifications_after?: string\n  notifications_query?: string\n}\n\nconst shelfParams: Array<keyof ShelfReferrerParams> = [\n  'notification_referrer_id',\n  'notifications_before',\n  'notifications_after',\n  'notifications_query',\n]\n\nconst sessionStorageKey = 'notification_shelf'\n\n/*\n * Stores url params for the shelf in session storage if present, and returns\n * search params without any shelf params.\n */\nexport function storeAndStripShelfParams(\n  searchParams: URLSearchParams,\n  pathname: string | null = null,\n): URLSearchParams | null {\n  if (searchParams.has('notification_referrer_id')) {\n    storeShelfParams(searchParams, pathname)\n    return deleteShelfParams(searchParams)\n  }\n  return null\n}\n\n/*\n * Loads the shelf params from sessionStorage if they are there and they match\n * the current pull request page, clear them otherwise.\n */\nexport function getStoredShelfParamsForCurrentPage(pathname: string | null = null): ShelfReferrerParams | null {\n  // If the current page is not a pull request, then the stored data will\n  // not match, so clear it and move on.\n  const currentPullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!currentPullRequestPathname) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n\n  try {\n    const str = getItem(sessionStorageKey)\n    if (!str) return null\n\n    const stored = JSON.parse(str)\n    if (!stored || !stored.pathname) throw new Error('Must have a pathname')\n\n    if (stored.pathname !== currentPullRequestPathname) {\n      throw new Error('Stored pathname does not match current pathname.')\n    }\n\n    const result: ShelfReferrerParams = {}\n\n    for (const key of shelfParams) {\n      result[key] = stored[key]\n    }\n\n    return result\n  } catch (e) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n}\n\nfunction storeShelfParams(searchParams: URLSearchParams, pathname: string | null) {\n  const pullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!pullRequestPathname) return\n\n  const params: {[key: string]: string} = {\n    pathname: pullRequestPathname,\n  }\n\n  for (const key of shelfParams) {\n    const value = searchParams.get(key)\n    if (value) params[key] = value\n  }\n\n  setItem(sessionStorageKey, JSON.stringify(params))\n}\n\nfunction deleteShelfParams(searchParams: URLSearchParams): URLSearchParams {\n  for (const key of shelfParams) {\n    searchParams.delete(key)\n  }\n  return searchParams\n}\n\n/*\n * Returns the base pathname of the current page if it's a pull request.\n *\n * `/github/github/pull/123/files` -> `/github/github/pull/123`\n */\nfunction getCurrentPullRequestPathname(pathname: string | null): string | null {\n  pathname = pathname || window.location.pathname\n  const pullRequestPathnameRegex = /^(\\/[^/]+\\/[^/]+\\/pull\\/[^/]+)/\n  const match = pathname.match(pullRequestPathnameRegex)\n  if (!match) return null\n\n  return match[0]\n}\n","/*\n * Applies state updates from a form (e.g. Mark as read/archive/unsubscribe/star) to the element\n * that represents the notification (e.g. The notification item in the list view, or the\n * notification shelf on an Issue page).\n */\nexport function updateNotificationStates(element: HTMLElement, form: HTMLFormElement) {\n  const notification = element.closest<HTMLElement>('[data-notification-id]')!\n\n  // Toggles read/unread/archive status\n  if (form.hasAttribute('data-status')) {\n    toggleNotificationStatus(notification, form.getAttribute('data-status')!)\n  }\n\n  // Toggles subscribed/unsubscribed status\n  if (form.hasAttribute('data-subscription-status')) {\n    toggleNotificationSubscriptionStatus(notification, form.getAttribute('data-subscription-status')!)\n  }\n\n  // Toggles starred/unstarred status\n  if (form.hasAttribute('data-starred-status')) {\n    toggleNotificationStarredStatus(notification, form.getAttribute('data-starred-status')!)\n  }\n}\n\nfunction toggleNotificationStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-archived', status === 'archived')\n  notification.classList.toggle('notification-unread', status === 'unread')\n  notification.classList.toggle('notification-read', status === 'read')\n}\n\nfunction toggleNotificationSubscriptionStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-unsubscribed', status === 'unsubscribed')\n}\n\nfunction toggleNotificationStarredStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-starred', status === 'starred')\n}\n","// More robust version of Range.surroundContents().\nexport function surroundContents(range: Range, newNode: Node) {\n  newNode.appendChild(range.extractContents())\n  range.insertNode(newNode)\n}\n","// Gets the current page's id for persisting fields.\n//\n// The value can be overridden by providing a normalized value in a meta tag.\n//\n//   <meta name=\"session-resume-id\" content=\"/github/github/issues/123\">.\n//\n// Defaults to the current url path.\nexport function getPageID(url?: URL): string {\n  const location = url || window.location\n\n  const metaTag = document.head && document.head.querySelector('meta[name=session-resume-id]')\n  const id = metaTag instanceof HTMLMetaElement && metaTag.content\n\n  return id || location.pathname\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch (e) {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onInput} from '@github-ui/onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n\non('click', '.js-toggle-redacted-note-content', async event => {\n  const currentButton = event.currentTarget as HTMLButtonElement\n  const noteContainer = currentButton.closest('.note')!\n  if (noteContainer) {\n    const note = noteContainer.getElementsByClassName('js-note')[0]\n    if (note) {\n      const newContent = currentButton.getAttribute('data-content')!.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n      note.innerHTML = newContent\n    }\n  }\n\n  const toggleElements = noteContainer.getElementsByClassName('js-toggle-redacted-note-content')\n  for (const elem of toggleElements) {\n    const button = elem as HTMLButtonElement\n    button.hidden = !button.hidden\n  }\n})\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null},\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100,\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","import type {updateContent} from '@github-ui/updatable-content'\n\nexport class BatchedUpdatableContent {\n  intervals: {\n    [key: number]: {\n      interval: NodeJS.Timer | null\n      targets: Set<HTMLElement>\n    }\n  } = {}\n\n  // Append each websocket update to the batch.\n  onEvent(target: HTMLElement, windowSize: number, updaterFunction: typeof updateContent) {\n    let config = this.intervals[windowSize]\n\n    if (!config) {\n      config = this.intervals[windowSize] = {\n        interval: null,\n        targets: new Set(),\n      }\n    }\n\n    config.targets.add(target)\n\n    // Early return if we've already started.\n    if (config.interval) return\n\n    const fn = () => this.onInterval(windowSize, updaterFunction)\n\n    // Start the interval loop if it hasn't been started yet.\n    config.interval = setInterval(fn, windowSize)\n  }\n\n  // Function run on the interval run.\n  onInterval = (windowSize: number, updaterFunction: typeof updateContent) => {\n    // Move the reference.\n    const config = this.intervals[windowSize]\n\n    if (!config) return\n\n    const targets = config.targets\n\n    if (targets.size === 0) return\n\n    // Clear the set so new messages can be batched up for the next iteration.\n    config.targets = new Set()\n\n    // Dispatch all queued updates.\n    for (const target of targets) {\n      // Only execute if we're attached to the DOM.\n      if (document.body.contains(target)) {\n        updaterFunction(target)\n      }\n    }\n\n    // Clear references.\n    targets.clear()\n  }\n\n  // Clear the buffer so that intervals are not run after turbolinks navigations.\n  clear = () => {\n    for (const key in this.intervals) {\n      if (Object.prototype.hasOwnProperty.call(this.intervals, key)) {\n        const config = this.intervals[key]\n        if (config) {\n          // Stop the interval.\n          if (config.interval) {\n            clearInterval(config.interval)\n            config.interval = null\n          }\n\n          config.targets.clear()\n        }\n      }\n    }\n  }\n}\n","import {updateContent} from '@github-ui/updatable-content'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {BatchedUpdatableContent} from './updatable-content-batcher'\n\nconst MINIMUM_INTERVAL = 1000\n\nconst batcher = new BatchedUpdatableContent()\n\nssrSafeWindow?.addEventListener(SOFT_NAV_STATE.END, batcher.clear)\n\nexport function makeSocketMessageHandler(updaterFunction: typeof updateContent = updateContent) {\n  return function handleSocketMessage(event: Event) {\n    const {gid, wait, event_updates} = (event as CustomEvent).detail.data\n    const container = event.target as HTMLElement\n    const target = gid ? findByGid(container, gid) : container\n\n    /**\n     * TODO: Ideally we'd have a better unique identifier to use to enable better scheduling. We'd have to introduce\n     * a DOM attribute to give a unique identifier.\n     */\n    if (target) {\n      const batched = target.getAttribute('data-batched')\n\n      const eventName = target.getAttribute('data-channel-event-name')\n      if (eventName) {\n        // If the event name is not in the event updates, we don't need to update the content.\n        if (event_updates === undefined || !event_updates.hasOwnProperty(eventName)) {\n          return\n        }\n      }\n\n      if (batched) {\n        const windowSize = Math.max(parseInt(batched) || 0, MINIMUM_INTERVAL)\n        batcher.onEvent(target, windowSize, updaterFunction)\n      } else {\n        setTimeout(updaterFunction, wait || 0, target)\n      }\n    }\n  }\n}\n\nfunction findByGid(root: HTMLElement, gid: string): HTMLElement | null {\n  if (root.getAttribute('data-gid') === gid) return root\n  for (const el of root.querySelectorAll<HTMLElement>(`[data-url][data-gid]`)) {\n    if (el.getAttribute('data-gid') === gid) {\n      return el\n    }\n  }\n  return null\n}\n","import type {AliveEvent, MetadataUpdate, Notifier, Subscription} from '@github/alive-client'\nimport {PresenceMetadataSet, SubscriptionSet, isPresenceChannel} from '@github/alive-client'\nimport {AliveSession} from './session'\nimport {debounce} from '@github/mini-throttle'\nimport {ready} from '@github-ui/document-ready'\nimport safeStorage from '@github-ui/safe-storage'\nimport {alivePolicy, InvalidSourceRelError} from '@github-ui/trusted-types-policies/alive'\nimport {isSafari} from '@braintree/browser-detection'\n\nexport interface Dispatchable {\n  dispatchEvent: (e: Event) => unknown\n}\n\nfunction isSharedWorkerSupported(): boolean {\n  // There is currently a bug in safari that causes shared workers to stop working after a while\n  // see https://github.com/github/web-systems/issues/965\n  if (isSafari()) return false\n  return 'SharedWorker' in window && safeStorage('localStorage').getItem('bypassSharedWorker') !== 'true'\n}\n\nexport function workerSrc(): string | null {\n  const url =\n    document.head.querySelector<HTMLLinkElement>(`link[rel=shared-web-socket-src]`)?.getAttribute('href') ?? ''\n  try {\n    return alivePolicy.createScriptURL(url)\n  } catch (e) {\n    if (e instanceof InvalidSourceRelError) {\n      return null\n    }\n    throw e\n  }\n}\n\nfunction socketUrl(): string | null {\n  return document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.href ?? null\n}\n\nfunction socketRefreshUrl(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-refresh-url') ??\n    null\n  )\n}\n\nfunction sessionIdentifier(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-session-id') ?? null\n  )\n}\n\n/**\n * dispatches events of type: 'socket:message' | 'socket:presence'\n */\nfunction notify(subscribers: Iterable<Dispatchable>, {channel, type, data}: AliveEvent) {\n  for (const el of subscribers) {\n    el.dispatchEvent(\n      new CustomEvent(`socket:${type}`, {\n        bubbles: false,\n        cancelable: false,\n        detail: {name: channel, data},\n      }),\n    )\n  }\n}\n\nclass AliveSessionProxy {\n  private worker: SharedWorker\n  private subscriptions = new SubscriptionSet<Dispatchable>()\n  private presenceMetadata = new PresenceMetadataSet<Dispatchable>()\n  private notify: Notifier<Dispatchable>\n\n  constructor(src: string, url: string, refreshUrl: string, sessionId: string, notifier: Notifier<Dispatchable>) {\n    this.notify = notifier\n    // eslint-disable-next-line ssr-friendly/no-dom-globals-in-constructor, compat/compat\n    this.worker = new SharedWorker(src, `github-socket-worker-v2-${sessionId}`)\n    this.worker.port.onmessage = ({data}) => this.receive(data)\n    this.worker.port.postMessage({connect: {url, refreshUrl}})\n  }\n\n  subscribe(subs: Array<Subscription<Dispatchable>>) {\n    const added = this.subscriptions.add(...subs)\n    if (added.length) {\n      this.worker.port.postMessage({subscribe: added})\n    }\n\n    // We may be adding a subscription to a presence channel which is already subscribed.\n    // In this case, we need to explicitly ask the SharedWorker to send us the presence data.\n    const addedChannels = new Set(added.map(topic => topic.name))\n    const redundantPresenceChannels = subs.reduce((redundantChannels, subscription) => {\n      const channel = subscription.topic.name\n\n      if (isPresenceChannel(channel) && !addedChannels.has(channel)) {\n        redundantChannels.add(channel)\n      }\n\n      return redundantChannels\n    }, new Set<string>())\n\n    if (redundantPresenceChannels.size) {\n      this.worker.port.postMessage({requestPresence: Array.from(redundantPresenceChannels)})\n    }\n  }\n\n  unsubscribeAll(...subscribers: Dispatchable[]) {\n    const removed = this.subscriptions.drain(...subscribers)\n    if (removed.length) {\n      this.worker.port.postMessage({unsubscribe: removed})\n    }\n\n    const updatedPresenceChannels = this.presenceMetadata.removeSubscribers(subscribers)\n    this.sendPresenceMetadataUpdate(updatedPresenceChannels)\n  }\n\n  updatePresenceMetadata(metadataUpdates: Array<MetadataUpdate<Dispatchable>>) {\n    const updatedChannels = new Set<string>()\n\n    for (const update of metadataUpdates) {\n      // update the local metadata for this specific element\n      this.presenceMetadata.setMetadata(update)\n      updatedChannels.add(update.channelName)\n    }\n\n    // Send the full local metadata for these channels to the SharedWorker\n    this.sendPresenceMetadataUpdate(updatedChannels)\n  }\n\n  sendPresenceMetadataUpdate(channelNames: Set<string>) {\n    if (!channelNames.size) {\n      return\n    }\n\n    const updatesForSharedWorker: Array<Omit<MetadataUpdate<Element>, 'subscriber'>> = []\n\n    for (const channelName of channelNames) {\n      // get all metadata for this channel (from all elements) to send to the SharedWorker\n      updatesForSharedWorker.push({\n        channelName,\n        metadata: this.presenceMetadata.getChannelMetadata(channelName),\n      })\n    }\n\n    // Send the full metadata updates to the SharedWorker\n    this.worker.port.postMessage({updatePresenceMetadata: updatesForSharedWorker})\n  }\n\n  online() {\n    this.worker.port.postMessage({online: true})\n  }\n\n  offline() {\n    this.worker.port.postMessage({online: false})\n  }\n\n  hangup() {\n    this.worker.port.postMessage({hangup: true})\n  }\n\n  private notifyPresenceDebouncedByChannel = new Map<string, Notifier<Dispatchable>>()\n  private receive(event: AliveEvent) {\n    const {channel} = event\n\n    if (event.type === 'presence') {\n      // There are times when we get a flood of messages from the SharedWorker, such as a tab that has been idle for a long time and then comes back to the foreground.\n      // Since each presence message for a channel contains the full list of users, we can debounce the events and only notify subscribers with the last one\n      let debouncedNotify = this.notifyPresenceDebouncedByChannel.get(channel)\n      if (!debouncedNotify) {\n        debouncedNotify = debounce((subscribers, debouncedEvent) => {\n          this.notify(subscribers, debouncedEvent)\n          this.notifyPresenceDebouncedByChannel.delete(channel)\n        }, 100)\n        this.notifyPresenceDebouncedByChannel.set(channel, debouncedNotify)\n      }\n\n      debouncedNotify(this.subscriptions.subscribers(channel), event)\n      return\n    }\n\n    // For non-presence messages, we can send them through immediately since they may contain different messages/data\n    this.notify(this.subscriptions.subscribers(channel), event)\n  }\n}\n\nasync function connect() {\n  const src = workerSrc()\n  if (!src) return\n\n  const url = socketUrl()\n  if (!url) return\n\n  const refreshUrl = socketRefreshUrl()\n  if (!refreshUrl) return\n\n  const sessionId = sessionIdentifier()\n  if (!sessionId) return\n\n  const createSession = () => {\n    if (isSharedWorkerSupported()) {\n      try {\n        return new AliveSessionProxy(src, url, refreshUrl, sessionId, notify)\n      } catch (_) {\n        // ignore errors.  CSP will some times block SharedWorker creation. Fall back to standard AliveSession.\n      }\n    }\n\n    return new AliveSession(url, refreshUrl, false, notify)\n  }\n  const session = createSession()\n\n  window.addEventListener('online', () => session.online())\n  window.addEventListener('offline', () => session.offline())\n  window.addEventListener('pagehide', () => {\n    if ('hangup' in session) session.hangup()\n  })\n\n  return session\n}\n\nasync function connectWhenReady() {\n  await ready\n  return connect()\n}\n\nlet sessionPromise: undefined | ReturnType<typeof connectWhenReady>\n\nexport function getSession() {\n  return (sessionPromise ||= connectWhenReady())\n}\n","import {AliveSession as BaseAliveSession} from '@github/alive-client'\nimport type {Notifier} from '@github/alive-client'\nexport class AliveSession<T> extends BaseAliveSession<T> {\n  constructor(\n    url: string,\n    private refreshUrl: string,\n    shared: boolean,\n    notify: Notifier<T>,\n  ) {\n    super(url, () => this.getUrlFromRefreshUrl(), shared, notify)\n  }\n\n  private getUrlFromRefreshUrl() {\n    return fetchRefreshUrl(this.refreshUrl)\n  }\n}\n\ntype PostUrl = {url?: string; token?: string}\nasync function fetchRefreshUrl(url: string): Promise<string | null> {\n  const data = await fetchJSON<PostUrl>(url)\n  return data && data.url && data.token ? post(data.url, data.token) : null\n}\n\nasync function fetchJSON<T>(url: string): Promise<T | null> {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (response.ok) {\n    return response.json()\n  } else if (response.status === 404) {\n    return null\n  } else {\n    throw new Error('fetch error')\n  }\n}\n\nasync function post(url: string, csrf: string): Promise<string> {\n  const response = await fetch(url, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrf,\n    },\n  })\n  if (response.ok) {\n    return response.text()\n  } else {\n    throw new Error('fetch error')\n  }\n}\n","let allowUserContentScrolling = true\n\nexport function setUserContentScrolling(setting: boolean) {\n  allowUserContentScrolling = setting\n}\n\nexport function getUserContentScrolling() {\n  return allowUserContentScrolling\n}\n","import type {CustomEventName, CustomEventDetail} from './types/custom-events'\n\nexport function emitToCodeMirror(event: CustomEventName, editorTarget: Element, detail: CustomEventDetail) {\n  if (!editorTarget) return\n\n  // codemirror 6 watches for events on its content element, not the root editor element\n  const innerEditorTarget = editorTarget.className.includes('cm-content')\n    ? editorTarget\n    : editorTarget.querySelector<HTMLDivElement>('.cm-content')\n\n  if (!innerEditorTarget) return\n\n  innerEditorTarget.dispatchEvent(new CustomEvent(event, {detail}))\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nexport function setTitle(title: string) {\n  if (!ssrSafeDocument) return\n\n  const oldTitle = ssrSafeDocument.querySelector('title')\n  const newTitle = ssrSafeDocument.createElement('title')\n  newTitle.textContent = title\n\n  if (!oldTitle) {\n    ssrSafeDocument.head.appendChild(newTitle)\n    announce(title)\n  } else if (oldTitle.textContent !== title) {\n    // only replace and announce the title if it's changed\n    oldTitle.replaceWith(newTitle)\n    announce(title)\n  }\n}\n","// This is a simple function that just returns Promise.resolve() It is used in instances when we want to queue a\n// microtask before moving onto the next operation, but want to do so in a very explicit manner: `await microtask`\n// looks a lot clearer in intent than `await void 0` or `await Promise.resolve()`.\n//\n// You would want to use `await microtask()` if you have something that needs to be done very urgently, but still\n// needs to be done asynchronously. This will _not_ yield to the browser for any UI updates or wait for idle, instead\n// it queues a task in the \"microtask\" which is run immediately after the current stack. Use this sparingly. This\n// will likely delay subsequent code for 0-10ms.\nexport function microtask(): Promise<void> {\n  return Promise.resolve()\n}\n\n// This function simply Promisifies requestAnimationFrame so it is awaitable.\n//\n// You would want to use `await animationFrame()` if you're happy to yield to the browser to complete any UI updates\n// before calling your next piece of code. This is useful if - for example - you need to wait for scroll events,\n// or CSS transitions or something. This will likely delay subsequent code for 16ms or so - much longer (30-60ms)\n// if the tab is not focussed.\nexport function animationFrame(): Promise<number> {\n  return new Promise(window.requestAnimationFrame)\n}\n\n// Rejects a promise after a timeout has elapsed. The promise is never\n// successfully fulfilled.\n//\n// Examples\n//\n//   try {\n//     const value = await Promise.race([timeout(100), somethingSlow()])\n//     console.log('Slow operation finished within the timeout', value)\n//   } catch (e) {\n//     console.log('Slow operation did not finish', e)\n//   }\n//\n// Returns a rejected Promise rejected after a timeout.\nexport async function timeout(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>((resolve, reject) => {\n    id = self.setTimeout(() => reject(new Error('timeout')), ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Fulfills a promise after a timeout has elapsed. The promise is never rejected.\n//\n// Examples\n//\n//   step1()\n//   await wait(100)\n//   step2()\n//\n// Returns a Promise fulfilled after a timeout.\nexport async function wait(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>(resolve => {\n    id = self.setTimeout(resolve, ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\nfunction whenAborted(signal: AbortSignal): Promise<never> {\n  return new Promise((resolve, reject) => {\n    const error = new Error('aborted')\n    error.name = 'AbortError'\n    if (signal.aborted) {\n      reject(error)\n    } else {\n      signal.addEventListener('abort', () => reject(error))\n    }\n  })\n}\n\nexport function taskQueue<T>(fn: (values: T[]) => unknown): (value: T) => void {\n  const queue: T[] = []\n  return function (value: T) {\n    queue.push(value)\n    if (queue.length === 1) {\n      queueMicrotask(() => {\n        const values = queue.slice(0)\n        queue.length = 0\n        fn(values)\n      })\n    }\n  }\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {trustedTypesPolicy} from './policy'\n\nconst policyName = 'jtml-no-op'\n\n// This is a temporary policy to allow us to migrate to Trusted Types without breaking existing code.\nexport const temporaryPermissiveJtmlPolicy = ghTrustedTypes.createPolicy(policyName, {\n  createHTML: (s: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => s,\n      policyName,\n      fallback: s,\n      fallbackOnError: true,\n    })\n  },\n})\n","import {temporaryPermissiveJtmlPolicy} from '@github-ui/trusted-types-policies/jtml'\n// eslint-disable-next-line no-restricted-imports\nimport {TemplateResult} from '@github/jtml'\n\n// eslint-disable-next-line no-restricted-imports\nexport {html, unsafeHTML, render} from '@github/jtml'\n\nTemplateResult.setCSPTrustedTypesPolicy(temporaryPermissiveJtmlPolicy)\nexport {TemplateResult}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {webauthnSupportLevel} from '@github-ui/webauthn-support-level'\n\nlet sudoPromptExist = false\n\n/**\n * Take a URL and add webauthn params to it.\n *\n * @param {string} oldURL - The old URL.\n * @returns {string} - The new URL with added params.\n */\nfunction urlWithParams(oldURL: string): string {\n  const newURL = new URL(oldURL, window.location.origin)\n  const params = new URLSearchParams(newURL.search.slice(1))\n  params.set('webauthn-support', webauthnSupportLevel())\n  newURL.search = params.toString()\n  return newURL.toString()\n}\n\nasync function loadPromptTemplate(): Promise<HTMLTemplateElement> {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sudo-modal]')!\n  const template = document.querySelector('.js-sudo-prompt')\n  if (template instanceof HTMLTemplateElement) {\n    return template\n  } else if (link) {\n    const fragment = await fetchSafeDocumentFragment(document, urlWithParams(link.href))\n    document.body.appendChild(fragment)\n    return document.querySelector<HTMLTemplateElement>('.js-sudo-prompt')!\n  } else {\n    throw new Error(\"couldn't load sudo prompt\")\n  }\n}\n\nlet succeeded = false\n\n/**\n * Provide a sudo prompt, and return when it has been filled in or dismissed.\n *\n * @returns {Promise<boolean>} - Resolves to `true` if the user successfully authed with sudo.\n */\nexport async function sudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  if (sudoPromptExist) return false\n  sudoPromptExist = true\n  succeeded = false\n  const template = await loadPromptTemplate()\n  const content = template.content.cloneNode(true)\n  const prompt = await dialog({content})\n\n  // open/expanded HTML5 <details> can potentially steal focus from the dialog (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details)\n  // Example bug: https://github.com/github/authentication/issues/2208\n  // close the open details element that triggered this sudo challenge\n  const details = currentTarget?.closest('details[open]') as HTMLElement\n  if (details) {\n    details.removeAttribute('open')\n  }\n\n  await new Promise<void>(resolve => {\n    prompt.addEventListener(\n      'dialog:remove',\n      function () {\n        // re-add the open attribute to the details that we closed above\n        if (details) {\n          details.setAttribute('open', 'open')\n        }\n        sudoPromptExist = false\n        resolve()\n      },\n      {once: true},\n    )\n  })\n  return succeeded\n}\n\nasync function sudoModalErrorOrClose(\n  form: HTMLFormElement,\n  wants: Kicker,\n  unauthorizedError = 'Sudo authentication failed.',\n  tooManyError = 'Too many authentication attempts. Please try again later.',\n  errorSelector = '.js-sudo-error',\n  inputElementSelector?: string,\n) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (!error.response) throw error\n    let errorMessage\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 401:\n        errorMessage = unauthorizedError\n        break\n      case 429:\n        errorMessage = tooManyError\n        break\n      default:\n        errorMessage = 'An unknown error occurred. Please try again later.'\n    }\n\n    form.querySelector<HTMLElement>(errorSelector)!.textContent = errorMessage\n    form.querySelector<HTMLElement>(errorSelector)!.hidden = false\n    if (inputElementSelector) {\n      form.querySelector<HTMLInputElement>(inputElementSelector)!.value = ''\n    }\n\n    // rethrow error if not expected, only after surfacing it in flash\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status !== 401 && error.response.status !== 429) {\n      throw error\n    }\n\n    return\n  }\n  succeeded = true\n  form.closest<HTMLElement>('details')!.removeAttribute('open')\n}\n\nremoteForm('.js-sudo-webauthn-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-github-mobile-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-totp-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants, undefined, undefined, '.flash-error', '#totp')\n})\n\nremoteForm('.js-sudo-password-form', async function (form, wants) {\n  await sudoModalErrorOrClose(\n    form,\n    wants,\n    'Incorrect password.',\n    'Too many password attempts. Please wait and try again.',\n    undefined,\n    '.js-sudo-password',\n  )\n})\n\n/**\n * Check if user is in sudo mode. If not, show a sudo prompt.\n *\n * @returns {Promise<boolean>} - Will be `true` if user is in or got in sudo mode after prompt.\n */\nexport default async function triggerSudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return sudoPrompt(currentTarget)\n}\n\nexport async function fetchSessionInSudo(): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return false\n}\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n/**\n * Replace text in a textarea with a new string and\n * place the cursor at the selectionEnd position.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @param isFocused whether the textarea is currently in focus\n * @returns The new text\n */\nexport function replaceText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n  isFocused = true,\n): string {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  setTextareaValueAndCursor(textarea, beginning + remaining, beginning.length, isFocused)\n\n  return newText\n}\n\n/**\n * Replace selected text in a textarea with a new string.\n * If the selection is empty, the old text is replaced by the\n * new text in the whole textarea.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @returns The new text\n */\nexport function replaceSelection(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n): string {\n  if (textarea.selectionStart === null || textarea.selectionEnd === null) {\n    return replaceText(textarea, oldText, newText)\n  }\n  const beginning = textarea.value.substring(0, textarea.selectionStart)\n  const remaining = textarea.value.substring(textarea.selectionEnd)\n\n  setTextareaValueAndCursor(textarea, beginning + newText + remaining, beginning.length)\n\n  return newText\n}\n\ntype InsertOptions = {\n  appendNewline?: boolean\n}\n/**\n * Inserts text into a text input and moves the cursor appropriately.\n * If the cursor happens to be in the middle of a line, or the textarea isn't empty,\n * we add a newline character before the inserted text. We also advance the cursor\n * appropriately\n * @param textarea an `<input>` or `<textarea>` element\n * @param text The text to add\n * @param appendNewline optionally adds a `\\n` character after `text`\n */\nexport function insertText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  text: string,\n  options: InsertOptions = {},\n): string {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n  const trailingNewline = options.appendNewline ? '\\n' : ''\n  const insertedText = newline + text + trailingNewline\n\n  textarea.value = beginning + insertedText + remaining\n  const newPoint = point + insertedText.length\n  textarea.selectionStart = newPoint\n  textarea.selectionEnd = newPoint\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n  return insertedText\n}\n\n/**\n * Helper function to set the value of a textarea and move the cursor to a given position.\n * Emits a `change` event.\n * @param textarea an `<input>` or `<textarea>` element\n * @param value The new value\n * @param cursor The position to move the cursor to\n * @param isFocused whether the textarea is currently in focus\n */\nfunction setTextareaValueAndCursor(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  value: string,\n  cursor: number,\n  isFocused = true,\n) {\n  textarea.value = value\n\n  if (isFocused) {\n    textarea.selectionStart = cursor\n    textarea.selectionEnd = cursor\n  }\n\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\n// Returns the character index for a given byte position, taking character encoding into account\n// Example usage for this method: highlighing text in a textarea that may contain non-UTF8 characters\n//\n// For context, in Javascript, strings are UTF16. However, Codemirror uses simple Javascript\n// indexing, that isn't Unicode aware. This leads to incorrect highlighting.\n//\n// For example, '' is represented as 4 bytes. In Javascript, it has length 2\n// and is composed of a surrogate pair (2 code points). ''.length is 2.\n// Given text string such as 'hello  world', this would be represented in hex as:\n// \n// 00000000 68 65 6c 6c 6f 20 f0 9f  92 a9 20 77 6f 72 6c 64 hello  world\n// \n// The string 'world' appears at byte positions (11, 16), but in Javascript `str.slice(11, 16)` returns 'rld'.\n// The correct position in Javascript, and codemirror, would be: (9, 14).\n//\n// When encoded using `TextEncoder#encodeInto` with '', we'd get an object with\n// the following properties: {written: 4, read: 2}. This discrepancy informs us\n// that we need to offset the start and end positions by 2.\nexport function GetCharIndexFromBytePosition(str: string, pos: number): number {\n  // The string iterator [...str] is unicode aware, and allows us to correctly\n  // iterate over each grapheme in the string. Iterating over `str[i]` would\n  // not work, as it separates the astral symbol into each of its surrogates.\n  const contents = [...str]\n  const encoder = new TextEncoder()\n\n  // Astral code points in Javascript are a surrogate pair of 2 UTF16 code units, or 4 bytes\n  const u8array = new Uint8Array(4)\n\n  for (let i = 0; i < contents.length; i++) {\n    const char = contents[i]!\n    const {written, read} = encoder.encodeInto(char, u8array)\n    if (!written || !read) {\n      return -1\n    }\n    const diff = written - read\n    if (diff === 0) {\n      continue\n    }\n\n    if (i < pos) {\n      pos -= diff\n    }\n\n    if (i >= pos) {\n      break\n    }\n  }\n\n  return pos\n}\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {isStaff} from '@github-ui/stats'\nimport {TrustedTypesPolicyError, trustedTypesPolicy} from './policy'\n\nconst policyName = 'alive'\n\nexport class InvalidSourceRelError extends TrustedTypesPolicyError {}\nexport const alivePolicy = ghTrustedTypes.createPolicy(policyName, {\n  createScriptURL: (url: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        if (!isStaff()) return url\n        if (!url.startsWith('/')) throw new InvalidSourceRelError('Alive worker src URL must start with a slash')\n        return url\n      },\n      policyName,\n      fallback: url,\n      fallbackOnError: true,\n    })\n  },\n})\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\nimport {trustedTypesPolicy} from './policy'\n\nconst policyName = 'turbo'\n\nexport const turboPolicy = ghTrustedTypes.createPolicy(policyName, {\n  createHTML: (html: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return html\n      },\n      policyName: `${policyName}-html`,\n      fallback: html,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n  createScript: (script: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return script\n      },\n      policyName: `${policyName}-script`,\n      fallback: script,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n  createScriptURL: (url: string) => {\n    return trustedTypesPolicy.apply({\n      policy: () => {\n        return url\n      },\n      policyName: `${policyName}-url`,\n      fallback: url,\n      fallbackOnError: true,\n      silenceErrorReporting: true,\n    })\n  },\n})\n","import {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\nexport interface CacheNode {\n  title: string | null | undefined\n  transients: Element[]\n  bodyClasses: string | null | undefined\n  replacedElements: Element[]\n}\n\nconst DATA_TURBO_LOADED = 'data-turbo-loaded'\n\nexport function markTurboHasLoaded() {\n  document.documentElement.setAttribute(DATA_TURBO_LOADED, '')\n}\n\nexport function hasTurboLoaded() {\n  return document.documentElement.hasAttribute(DATA_TURBO_LOADED)\n}\n\n// Check if an event target is a <turbo-frame>\nexport const isTurboFrame = (el: EventTarget | null): boolean => (el as Element)?.tagName === 'TURBO-FRAME'\n\n// Checks if two urls start with the same \"/owner/repo\" prefix.\nexport function isSameRepo(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 3).join('/')\n  const path2 = url2.split('/', 3).join('/')\n  return path1 === path2\n}\n\n// Checks if two urls start with the same \"/owner\" prefix.\nexport function isSameProfile(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 2).join('/')\n  const path2 = url2.split('/', 2).join('/')\n  return path1 === path2\n}\n\n// Wait for all stylesheets to be loaded.\nexport async function waitForStylesheets() {\n  const headStylesheets = document.head.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')\n  const loadedStylesheets = new Set([...document.styleSheets].map(stylesheet => stylesheet.href))\n  const promises = []\n\n  for (const stylesheet of headStylesheets) {\n    if (stylesheet.href === '' || loadedStylesheets.has(stylesheet.href)) continue\n    promises.push(waitForLoad(stylesheet))\n  }\n\n  await Promise.all(promises)\n}\n\nconst waitForLoad = (stylesheet: HTMLLinkElement, timeout = 2000): Promise<void> => {\n  return new Promise(resolve => {\n    const onComplete = () => {\n      stylesheet.removeEventListener('error', onComplete)\n      stylesheet.removeEventListener('load', onComplete)\n      resolve()\n    }\n\n    stylesheet.addEventListener('load', onComplete, {once: true})\n    stylesheet.addEventListener('error', onComplete, {once: true})\n    setTimeout(onComplete, timeout)\n  })\n}\n\n// Replaces all elements with `data-turbo-replace` with the ones coming from the Turbo response.\nexport const replaceElements = (html: Document, cachedElements?: Element[]) => {\n  const newElements = cachedElements || html.querySelectorAll('[data-turbo-replace]')\n  const oldElements = [...document.querySelectorAll('[data-turbo-replace]')]\n\n  for (const newElement of newElements) {\n    const oldElement = oldElements.find(el => el.id === newElement.id)\n\n    if (oldElement) {\n      oldElement.replaceWith(newElement.cloneNode(true))\n    }\n  }\n}\n\n// Adds all missing stylesheets that come from the Turbo response.\nexport const addNewStylesheets = (html: Document) => {\n  // Only add stylesheets that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')) {\n    if (\n      !document.head.querySelector(\n        `link[href=\"${el.getAttribute('href')}\"],\n           link[data-href=\"${el.getAttribute('data-href')}\"]`,\n      )\n    ) {\n      document.head.append(el)\n    }\n  }\n}\n\n// Adds all missing scripts that come from the Turbo response.\nexport const addNewScripts = (html: Document) => {\n  // Only add scripts that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLScriptElement>('script')) {\n    if (!document.head.querySelector(`script[src=\"${el.getAttribute('src')}\"]`)) {\n      executeScriptTag(el)\n    }\n  }\n}\n\n// Load and execute scripts using standard script request.\nexport const copyScriptTag = (script: HTMLScriptElement) => {\n  const {src} = script\n\n  if (!src) {\n    // we can't load a script without a source\n    return\n  }\n\n  // eslint-disable-next-line github/no-dynamic-script-tag\n  const newScript = document.createElement('script')\n  const type = script.getAttribute('type')\n  if (type) newScript.type = type\n\n  const trustedSrc = turboPolicy.createScriptURL(src)\n  newScript.src = trustedSrc\n  return newScript\n}\n\n// Load and execute scripts using standard script request.\nconst executeScriptTag = (script: HTMLScriptElement) => {\n  const newScript = copyScriptTag(script)\n\n  if (document.head && newScript) {\n    document.head.appendChild(newScript)\n  }\n}\n\n// Compares all `data-turbo-track=\"reload\"` reload with the ones coming from the Turbo response.\nexport const getChangedTrackedKeys = (html: Document): string[] => {\n  const changedKeys = []\n  for (const meta of html.querySelectorAll<HTMLMetaElement>('meta[data-turbo-track=\"reload\"]')) {\n    if (\n      document.querySelector<HTMLMetaElement>(`meta[http-equiv=\"${meta.getAttribute('http-equiv')}\"]`)?.content !==\n      meta.content\n    ) {\n      changedKeys.push(formatKeyToError(meta.getAttribute('http-equiv') || ''))\n    }\n  }\n\n  return changedKeys\n}\n\nexport const getTurboCacheNodes = (html: Document): CacheNode => {\n  const head = html.querySelector('[data-turbo-head]') || html.head\n\n  return {\n    title: head.querySelector('title')?.textContent,\n    transients: [...head.querySelectorAll('[data-turbo-transient]')].map(el => el.cloneNode(true) as Element),\n    bodyClasses: html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content,\n    replacedElements: [...html.querySelectorAll('[data-turbo-replace]')].map(el => el.cloneNode(true) as Element),\n  }\n}\n\nexport const getDocumentAttributes = () => [...document.documentElement.attributes]\n\nexport const formatKeyToError = (key: string) => key.replace(/^x-/, '').replaceAll('-', '_')\n\nexport const dispatchTurboReload = (reason: string) =>\n  document.dispatchEvent(new CustomEvent('turbo:reload', {detail: {reason}}))\n\nexport const dispatchTurboRestored = () => document.dispatchEvent(new CustomEvent('turbo:restored'))\n\nexport const replaceElementAttributes = (element: HTMLElement, newElement: HTMLElement) => {\n  for (const attr of element.attributes) {\n    if (!newElement.hasAttribute(attr.nodeName) && attr.nodeName !== 'aria-busy') {\n      element.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of newElement.attributes) {\n    if (element.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      element.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\nimport {get, parseRequestOptionsFromJSON, supported} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit} from '@github-ui/form-utils'\n\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n// An event dispatched by `WebauthnSubtleElement` when its button is submitted\nconst webauthnSubtleEvent = 'webauthn-subtle-submit'\n\nexport enum State {\n  Initializing = 'initializing',\n  Unsupported = 'unsupported',\n  Ready = 'ready',\n  Waiting = 'waiting',\n  Error = 'error',\n  Submitting = 'submitting',\n}\n\n@controller\nexport class WebauthnGetElement extends HTMLElement {\n  state: State = State.Initializing\n  @target button: HTMLButtonElement\n  @target buttonText: HTMLElement\n  // `messages` contains all the message elements.\n  @targets messages: HTMLElement[]\n  @target capitalizedDescription: HTMLElement\n  @target unsupportedMessage: HTMLElement\n  @target passkeysUnsupportedMessage: HTMLElement\n  @target waitingMessage: HTMLElement\n  @target errorMessage: HTMLElement\n  @target errorText: HTMLElement\n\n  static attrPrefix = ''\n  @attr dataJson = ''\n  @attr subtleLogin = false\n  private originalButtonText: string\n  private hasErrored = false\n  private originalErrorText: string | null\n  private passkeySupport: boolean\n\n  async connectedCallback() {\n    this.originalButtonText = this.getCurrentButtonText()\n    this.originalErrorText = this.errorText.textContent\n    this.setState(supported() ? State.Ready : State.Unsupported)\n    this.passkeySupport = await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()\n    // show the passkey unsupported message if it's present on the page (renders when the user has passkeys)\n    // and we're not already showing the webauthn unsupported message\n    if (this.state !== State.Unsupported && !this.passkeySupport && this.passkeysUnsupportedMessage) {\n      this.passkeysUnsupportedMessage.hidden = false\n    }\n    // if this get request is for login and the user doesn't have any passkeys\n    if (this.subtleLogin) {\n      this.handleWebauthnSubtle()\n    } else {\n      this.showWebauthnLoginFragment()\n    }\n  }\n\n  // Handles login specific webauthn-get behavior.\n  // Reveals and prepares webauthn-subtle behavior for the subtle webauthn login scenario.\n  handleWebauthnSubtle(): void {\n    // show the subtle UX. webauthn-get loads last so we don't need to worry about if it isn't already on the page\n    const subtle = document.querySelector<HTMLElement>('.js-webauthn-subtle')!\n    if (!subtle) {\n      return\n    }\n\n    subtle.hidden = false\n    this.updateWebauthnSubtleParentBoxVisibility(false)\n    subtle.addEventListener(webauthnSubtleEvent, () => {\n      this.showWebauthnLoginFragment()\n      // if user tries subtle passkey login from an unsupported browser, show the unsupported UX but don't trigger the prompt\n      if (this.state !== State.Unsupported) {\n        this.prompt()\n      }\n    })\n  }\n\n  // Handles login specific webauthn-get behavior.\n  // Reveals main webauthn login component and hides the webauthn subtle hint - used for the subtle:false login scenario\n  // and for switching from subtle over to the main passkey login UX after user input.\n  showWebauthnLoginFragment(): void {\n    // grab and reveal parent webauthn section that isn't a catalyst component\n    const loginFragment = document.querySelector<HTMLElement>('.js-webauthn-login-section')!\n    if (!loginFragment) {\n      return\n    }\n    loginFragment.hidden = false\n\n    // also hide the parent box for the webauthn subtle component\n    // this is nessesary when it's the only content in the login alternatives box for subtle:false logins\n    this.updateWebauthnSubtleParentBoxVisibility(true)\n  }\n\n  updateWebauthnSubtleParentBoxVisibility(hidden: boolean): void {\n    const parentDiv = document.querySelector<HTMLElement>('.js-webauthn-hint')!\n    if (!parentDiv) {\n      return\n    }\n    parentDiv.hidden = hidden\n  }\n\n  getCurrentButtonText(): string {\n    return this.buttonText.textContent || ''\n  }\n\n  setCurrentButtonText(text: string): void {\n    this.buttonText.textContent = text\n  }\n\n  setState(state: State): void {\n    // Reset to defaults\n    const retryMessage = this.button.getAttribute('data-retry-message') || this.originalButtonText\n    const buttonText = this.hasErrored ? retryMessage : this.originalButtonText\n    this.setCurrentButtonText(buttonText)\n    this.button.disabled = false\n    this.button.hidden = false\n    this.errorText.textContent = ''\n    for (const elem of this.messages) {\n      elem.hidden = true\n    }\n\n    switch (state) {\n      case State.Initializing:\n        this.button.disabled = true\n        break\n      case State.Unsupported:\n        this.button.disabled = true\n        this.unsupportedMessage.hidden = false\n        // hide the passkey specific error if we're showing the generic one\n        if (this.passkeysUnsupportedMessage) {\n          this.passkeysUnsupportedMessage.hidden = true\n        }\n        break\n      case State.Ready:\n        break\n      case State.Waiting:\n        this.waitingMessage.hidden = false\n        this.button.hidden = true\n        break\n      case State.Error:\n        this.errorMessage.hidden = false\n        this.errorText.textContent = this.originalErrorText\n        break\n      case State.Submitting:\n        this.setCurrentButtonText('Verifying')\n        this.button.disabled = true\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    this.state = state\n  }\n\n  // silent_unless_success: don't show waiting or error status. This is for automatically attempting a prompt at\n  // page/modal load time, without showing confusing UI if the browser rejects the attempt due to a missing user\n  // gesture. Most browsers allow at least one such prompt per page load, but we can't rely on it. In theory we could\n  // try to show an error to the user depending on the `get` rejection, but the spec is still in flux and browsers\n  // constantly change their mind (and have bugs). So we err on the side of not showing an error.\n  async prompt(event?: Event, silent_unless_success?: boolean): Promise<void> {\n    event?.preventDefault() // prevent default page form submission\n    this.dispatchEvent(new CustomEvent(webauthnGetEvent))\n    try {\n      if (!silent_unless_success) {\n        this.setState(State.Waiting)\n      }\n\n      const json: CredentialRequestOptionsJSON = JSON.parse(this.dataJson)\n      const signResponse = await get(parseRequestOptionsFromJSON(json))\n      this.setState(State.Submitting)\n\n      // Each `<webauthn-get>` element is currently embedded in a form (not\n      // the other way around), so we have to query for the form outside of it.\n      const form = this.closest<HTMLFormElement>('.js-webauthn-form')!\n      const responseField = form.querySelector<HTMLInputElement>('.js-webauthn-response')!\n      responseField.value = JSON.stringify(signResponse)\n      requestSubmit(form)\n    } catch (error) {\n      if (!silent_unless_success) {\n        this.hasErrored = true\n        this.setState(State.Error)\n        throw error\n      }\n    }\n  }\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n"],"names":["resultsTimeout","oldHref","currentTarget","deactivateTimer","activeSelection","previousSelection","visibilityDebounceTimeout","fetchResponse","queued","hovercardsEnabledForUser","hovercardFocusTrapAbortController","selector","on","event","target","defaultPrevented","classList","add","remove","remoteForm","form","wants","response","container","closest","html","err","status","replaceWith","fire","getItem","safeStorage","ssrSafeDocument","head","querySelector","content","analyticsEvent","element","getAttribute","analyticsEventAttributes","JSON","parse","sendEvent","map","state","join","observe","el","HTMLImageElement","parentElement","HTMLAnchorElement","parent","link","childElementCount","setAttribute","removeAttribute","clone","cloneNode","document","createElement","appendChild","replaceChild","sendStats","incrementKey","requestUrl","window","location","href","notes","WeakMap","reset","input","note","get","innerHTML","tagName","validate","htmlValidate","id","contains","generateId","Math","random","toFixed","ariaDescribedby","addEventListener","set","detail","message","text","HTMLElement","announceFromElement","isOk","append","hidden","activeElement","error","value","successMessage","toggleSubmitButton","completer","button","HTMLButtonElement","disabled","constructor","AutocompleteElement","initialize","previousController","HTMLFormElement","preventDefault","abort","url","URL","action","origin","method","formData","FormData","serialized","combineGetFormSearchParams","body","search","signal","AbortController","request","Request","toString","headers","Accept","fetch","ok","aborted","resultsContainer","getElementById","oldHeight","style","height","getComputedStyle","textContent","undefined","clearTimeout","delayResults","hasAttribute","results","resultsContent","parseHTML","firstElementChild","setTimeout","requestAnimationFrame","replaceState","onFocus","microtask","select","submit","HTMLInputElement","HTMLSelectElement","requestSubmit","debouncedSubmit","debounce","detectGravatar","gravitarUrl","fetchGravatarInfo","gravatarText","data","json","has_gravatar","subscribe","fromEvent","priceSelectors","updateTotals","itemKey","itemRawCount","params","URLSearchParams","slice","itemMinimum","parseInt","itemMaximum","itemCount","itemDelta","max","contactUs","downgradeButton","downgradeDisabledMessage","contact","toggle","planCost","paymentSummary","billing","free","is_enterprise_cloud_trial","upgrade","downgrade","extraSeats","no_additional_seats","updateSeatFields","numberOfSeats","querySelectorAll","maxSeatForPlan","popover","parentNode","length","minimumSeatsTooltip","seats","ref","selectors","obj","includes","priceCurrencyTag","default_currency","local_currency","history","className","price","span","flipTooltip","inverse","key","Object","entries","from","to","replace","newDuration","seatsField","updateDurationFields","oldDuration","planDurationText","planDurationAdjective","durationLink","planDurationInput","updateSeatFieldURLs","delete","toggleDurationUnitPrices","unitPrice","softNavigate","visible","addThrottledInputEventListener","addonField","selectedRadio","newUrl","capture","onInput","query","toLowerCase","row","trackingData","parsedTrackingData","type","context","currentSelection","item","label","open","updateBulkActions","actionsContainer","isItemSelected","bulkUrl","name","checkedItems","Array","sort","a","b","toggleMembershipTabs","membershipTabs","checked","setLocalJSON","localStorage","setItem","stringify","kind","e","report","urls","gatherBundleURLs","script","getElementsByTagName","match","src","read","getLocalJSON","previousURLs","downloadedBundles","keys","filter","bundle","write","cancelEvent","stopPropagation","loaded","requestIdleCallback","JustLoggedOutCookieName","timerCallback","clipboardCopyElementTimers","toggleCopyButton","copyIcon","checkIcon","getCookies","clearData","storage","sessionStorage","clear","deleteCookie","clipboardCopyElement","originalLabel","direction","announceSelector","announceElement","currentTimeout","fetchPopoverContents","lang","pos","path","urlStr","codeNavContext","test","updateTarget","altKey","ctrlKey","metaKey","shiftKey","popoverContent","codeNavKind","retryUrl","codeNavUrl","scrollTop","file","activeToken","unsubscribe","popoverHTML","wrapCache","onMouseMove","range","matchFromPoint","regexp","x","y","textNode","offset","caretPositionFromPoint","caret","offsetNode","caretRangeFromPoint","startContainer","startOffset","nodeType","Node","TEXT_NODE","isEmpty","replaceAll","trim","findNearestMatch","str","m","lastIndex","exec","reportError","len","index","matchedRange","createRange","setStart","setEnd","clientX","clientY","rangeElement","commonAncestorContainer","didCheckText","Set","has","fileContainer","getCodeBlockLanguage","codeBlockElement","getRowAndColumn","node","passParent","prev","previousSibling","nodeName","lineNumber","previousElementSibling","wrapper","surroundContents","clickEvent","hidePopover","addPopoverElement","temp","details","dataHydroClick","dataHydroClickHMAC","positionPopover","showPopover","resetScrollTop","onDocumentClick","onKeyup","onResize","token","cRect","repoContainer","getClientRects","rects","rect","position","zIndex","top","bottom","left","scrollY","scrollX","removeEventListener","getElementsByClassName","clearFormError","formError","handleFormError","messageSuffix","errors","isArray","formGroupValidationFormWrapper","field","changeValue","writeTab","isInViewport","getBoundingClientRect","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","click","updateContent","replaceContent","console","warn","setButtonText","hasValue","textTarget","spanText","createInputHandler","previousHasValue","newValue","Boolean","toggleFocus","focused","blurred","Element","commentField","handleInput","once","PNGScanner","fromFile","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","advance","bytes","readInt","self","dataview","getUint8","getUint16","getUint32","readChar","readShort","readLong","readString","buf","i","push","String","fromCharCode","scan","fn","resumeAt","call","buffer","DataView","imageDimensions","scanner","meta","width","ppi","inchesRatio","ppuX","ppuY","round","inputCache","CaretPosition","coords","currentChar","lookBack","textArea","substring","checkLine","xDistance","abs","fetchCaretCoords","caretIndex","caretCache","Map","getCaretCoordinates","binaryCursorSearch","lower","upper","mouseX","mouseY","iterations","bestPosition","sameLineCandidates","candidates","c","mid","floor","midCoords","findCursorPosition","endIndex","uploadedItems","pasteUrlLinksAsPlainText","defaultPlainTextPaste","urlLinks","attachmentPlaceholders","isVideo","attachment","placeholderText","prefix","isImage","disableSubmit","closestForm","submitButton","enableSubmit","onUploadCompleted","setValidityAndLinkText","imageTag","size","findAndReplacePlaceholders","placeholder","tagText","replaceText","dimensions","imageSize","alt","parameterizeName","empty","replacementText","removeFailedUpload","textToRemove","setCustomValidity","editor","getEditor","emitToCodeMirror","cursor","getSearchCursor","findNext","validity","fileUploadLoadingText","batch","selectedText","selectionStart","selectionEnd","insertedPlaceholder","replaceSelection","insertText","appendNewline","isFinished","getSelection","getCursor","toReplace","replaceRange","fileUploadMessage","uploaded","codeEditorElement","codeEditor","getCodeEditor","updateCursor","attachmentElement","updateCaret","dragEvent","setCursorPosition","textarea","newPosition","setSelectionRange","coordsChar","pageX","pageY","setCursor","focus","activateTab","tab","isPreview","writeContent","previewBody","minHeight","currentSelectedTabs","fetchPreview","previewForm","startLineNumber","side","startSide","startCommitOid","endCommitOid","baseCommitOid","commentId","dataToken","formTokenRef","elements","namedItem","cachedFetch","commentForm","TabContainerElement","pollForm","toolbar","renderPreview","relatedTarget","isPreviewPanel","memoize","uncachedFetch","hash","commentBody","onKey","toUpperCase","blur","dispatchEvent","CustomEvent","bubbles","cancelable","stopImmediatePropagation","plusOneMarker","isReactionLikeComment","matched","line","split","l","startsWith","toggleReactionSuggestion","eventTarget","reactionSuggestion","suggestionText","clearReactionSuggestion","suggestion","newCommentTextField","isShortcutAllowed","originalEvent","hotkey","corpTOSLink","regTOSLink","hints","hint","wording","autoselect","planChoice","corpTos","currentlyOpenedDetailsDropdown","autofocus","summary","closeCurrentDetailsDropdown","compose","loadDeferredContentByEvent","hashChange","menu","resetMenus","firstItem","filterableField","syncInputValue","HTMLTextAreaElement","fireMenuToggleEvent","isOpen","RemoteInputElement","activeElementId","focusEl","atLimit","loader","load","dialog","ownerDocument","show","originalText","getButtons","flat","revert","checkValidity","disabledText","afterRemote","updateFavicon","newHref","colorScheme","favicon","faviconFallback","colorSchemeSuffix","substr","lastIndexOf","newFallbackHref","n","indexOf","newFaviconName","prefersDarkColorScheme","matchMedia","matches","updateDarkFavicon","fetchFeaturePreviewIndicator","fetchIndicator","indicator","show_indicator","SOFT_NAV_STATE","SUCCESS","addListener","trigger","newDialog","fetchSafeDocumentFragment","dialogClass","closeDetails","closeHmac","hydroEventPayload","hydroEventHmac","feature","AttachmentUpload","process","delegate","startTime","performance","now","Headers","policy","header","xhr","XMLHttpRequest","upload_url","setRequestHeader","onloadstart","attachmentUploadDidStart","upload","onprogress","lengthComputable","percent","total","attachmentUploadDidProgress","uploadForm","same_origin","upload_authenticity_token","send","markComplete","attachmentUploadDidComplete","responseText","attachmentUploadDidError","uploadTiming","duration","endTime","fileType","success","asset_upload_url","asset_upload_authenticity_token","credentials","saving","resetState","saved","asset","setAttachmentAsFailed","policyErrorState","attachments","uploader","policyForm","repoId","subjectType","subject","container_type","container_id","directory","preprocess","all","messaging","trimSizeErrorMessage","code","possibleStates","Batch","sum","isSaved","every","failedAttachments","items","reduce","dragAndDropLabel","inputId","count","hasFile","transfer","types","onDocumentDrop","dataTransfer","onDocumentDragover","onFormReset","filterList","list","isVisible","options","limit","Infinity","children","display","announce","resetFilter","filterInput","panel","FilterInputElement","originalOrder","filterSortList","string","allItems","checkedInputBeforeFilter","currentItem","removeChild","found","filterSort","sortKey","compare","limited","createDocumentFragment","inputStateReset","checkedInput","Event","abortController","typeAheadCache","cache","currentQueryForList","getData","queryText","typeAhead","lastSearchResult","suggestions","users","cachedSuggestions","userResultCache","fetchQueryIfNeeded","getPreRenderedUsers","suggestedUsers","suggestedUser","login","selected","typeAheadData","pathname","trimmedText","lastSearchText","isInitialLoad","inputElement","requestHeaders","searchParams","substringMemoryFilterList","verifySsoSession","showSuggestionsHeaderOnLoad","template","existingElements","existing","cutoffPoint","nextElementSibling","queryTextEmpty","suggestionsDivider","restDivider","addItem","user","containsQueryText","matching","createReviewerItem","li","inputKey","fullName","description","avatar","class","anyVisibleNonSelectedSuggestions","selectedSuggestions","u","nonSelectedSuggestions","preSuggestionsVisibleCount","preUsersVisibleCount","labelsTypeaheadFilterList","labels","toLocaleLowerCase","createLabelItem","resultCache","labelResultCache","color","newStyle","htmlName","labelDescription","getPreRenderedLabels","renderedLabel","queryString","searchQuery","prioText","prioScore","fuzzyScore","score","autocomplete","throttleWaitInMs","onInputChange","wait","removeThrottledInputEventListener","inputField","toggleForm","filterText","itemExists","scrollTargetIntoViewIfNeeded","root","computeFixedYOffset","scrollToFragmentTarget","focusPreviousElementInDOM","visibleElements","offsetWidth","offsetHeight","offsetParent","visibility","indexOfElement","targetElement","elementBefore","flash","flashAlertContent","insertNonBreakingSpace","nonBreakingSpace","createTextNode","ALLOWED_FLASH_COOKIES","HTMLTemplateElement","displayFlash","flatMap","atob","decodeURIComponent","after","TemplateInstance","feedback","noticeHandler","chooseEvents","eventCheckbox","FuzzyListElement","fuzzyList","replyContainer","checkUrl","sslFields","protocol","checkbox","customIsSelected","hookEventsField","hookEventSelector","hookEventSelectorCollection","hookWildcardEvent","before","responseError","deliveriesDetails","registerInsecureSslVerificationDialog","disallowInsecureRadio","allowInsecureRadio","HTMLDialogElement","showModal","areCharacterKeyShortcutsEnabled","install","shortcut","validShortcuts","shortcuts","splitHotkeyString","isNonCharacterKeyShortcut","s","uninstall","isHovercardAccessibilityEnabled","isFeatureEnabled","cardContentContainer","cachedFetchSafeDocumentFragment","activatingElement","hovercardTrigger","focusIn","mouseOver","contentClass","suffix","contentClassPrefix","hideCard","cardContent","activateFn","minimumTimeout","fragment","MouseEvent","hovercardsAreEnabledForType","hovercardType","hovercardUrl","hovercardUrlFromTarget","baseHovercardUrl","subjectTag","determineEnclosingSubject","tag","forcedDelay","r","showCard","cardContentBody","child","positionCard","containerTop","containerLeft","contentClassSuffix","calculatePositions","contentWidth","contentHeight","targetX","targetY","targetHeight","targetWidth","selectRectNearestMouse","foundRect","roomBelowTarget","roomAbove","roomBelow","moreRoomAbove","targetCenterY","caretPaddingX","caretHeight","roomRight","targetCenterX","setProperty","pageYOffset","pageXOffset","setZIndexOverride","trackingElement","trackView","hovercardAriaLabelForType","hovercardPrefix","focusTrap","deactivateFn","KeyboardEvent","preventScrolling","keyupFn","cancelDeactivation","onContentsKeyDown","onFocusIn","onFocusOut","onMouseLeave","deactivateWithTimeoutFn","targetWas","onMouseOver","isLongerActivateTimeoutEnabled","onContentsMouseOver","onContentsFocusIn","isHovercardEnabledForUser","hovercardsPreference","FRAME_UPDATE","sendPageView","turbo","getSoftNavMechanism","targetEl","eventType","parts","gaEvent","category","dimensionPair","payload","hmac","hydroClientContext","sendData","indeterminate","logPageView","shortcutModalShown","showKeyboardShortcuts","contexts","metaKeyboardShortcuts","shortcutModal","labelledBy","displayLengthWarning","maxLength","warningLength","inputValueWithNewLinesFix","inputValue","remainingLength","truncatedInputValue","endsWith","warningText","warningArea","inputContainer","isFormField","eventToHotkeyString","navigator","userAgent","filterOn","currentValue","regex","currentFilters","notice","showGlobalError","opacity","confirm","buttonLabelSpan","lastTurboRequestUrl","turboMeasure","turboStartMark","turboEndMark","trackTurboTiming","getEntriesByName","mark","measure","measures","pop","turboDuration","clearMarks","clearMeasures","print","close","reload","quickSubmit","altButton","isHighlightContainer","filters","PRE","flavor","A","IMG","DIV","p","blockType","blockContent","pre","isTrusted","quote","Quote","collapsed","commentBodyClone","quoteSelectionContainer","MarkdownQuote","codeBlock","pp","div","insertMarkdownSyntax","nodeIterator","createNodeIterator","NodeFilter","SHOW_ELEMENT","acceptNode","firstChild","FILTER_ACCEPT","FILTER_SKIP","nextNode","reverse","anchorNode","insert","selection","getRangeAt","resizeObserver","ResizeObserver","entry","contentRect","hideReactionOverflow","reactionContainer","availableWidth","reactionButtons","allReactionsPopover","totalButtonWidth","remainingWidth","buttonWidth","debouncedPickReaction","comment","reactionsContainer","reactionsHeader","newReactions","newReactionButton","elementToFocus","showReactionContent","hideReactionContent","defaultText","persistSubmitButtonValue","req","catch","then","statusText","findPersistedSubmitButtonValue","beforeRemote","verifySso","contents","childNodes","PerformanceObserver","supportedEntryTypes","observer","longTasks","getEntries","entryTypes","ModalDialogElement","savedReplyNumber","Number","reply","replies","ready","MutationObserver","mutationList","mutation","attributeName","oldValue","attributes","highlightRange","blobRange","snippet","adjustStart","adjustEnd","DOMRangeFromBlob","adjustedStart","GetCharIndexFromBytePosition","adjustedEnd","endContainer","endOffset","parseColumnHighlightRange","startLine","endLine","startColumn","dataEndColumn","start","column","end","highlightColumns","performRequest","removeNotificationParams","urlWithoutNotificationParameters","cleanSearchParams","storeAndStripShelfParams","markNotificationAsRead","toggleSearchScope","enabled","remoteShelfActionForm","inboxButton","updateNotificationStates","getStoredShelfParamsForCurrentPage","newParams","includeFragmentEl","IncludeFragmentElement","baseUrl","shelfURL","emptyQuery","blurHandler","isRegularSearchInput","toggleSearchInputHotkey","unobserve","searchBar","toggleAttribute","searchInput","anchor","findFragmentTarget","originalScroll","scrollBehavior","scrollIntoView","behavior","prefersReducedMotion","abortControllers","snippetClipboardCopyTemplate","snippetClipboardCopyTemplateUnpositioned","insertSnippetClipboardCopyButton","clipboardContent","useUnpositioned","clonedZeroClipboardContainer","documentFragment","scrollableElement","timer","handleSocialResponse","newCount","isDeferredTogglerTarget","updateSocialCounts","singularSuffix","pluralSuffix","controller","replaceIncomingFocus","focusOn","checkVisibility","confirmationDialog","dialogPayload","confirmationDialogTemplate","templateSelector","confirmCsrfToken","confirmUrl","inputs","dialogElement","idleListeners","idle","isPresent","sessionChanged","reason","flashSignedIn","flashSignedOut","flashSwitched","switchedDetail","originalUserId","pageIsHidden","idleListener","watchSocketChannels","session","getSession","queueSubscribe","taskQueue","subs","queueUnsubscribe","els","unsubscribeAll","queueMetadata","updates","updatePresenceMetadata","listener","elementSubscriptions","channels","Topic","subscriber","topic","presenceChannels","subscription","channelName","isPresenceChannel","listenerSubscription","latestIdle","latestMetadata","queueMetadataOrIdleChange","metadata","IDLE_METADATA_KEY","Subscription","splice","bc","BroadcastChannel","onmessage","postingMessage","postMessage","storageArea","removeItem","broadcastMsgOnSignOut","updateStatusPosition","containerHeight","menuRect","iconRect","loadStatus","loadingArea","errorArea","onMouseEnter","closeOnToggle","closeStatusPopover","closeOnScroll","scrollEvent","checkSudo","sudoRequired","sudo","onvalue","getValue","emojiEl","onchange","provide","emojiMenu","onactivate","expander","cachedEmoji","emojiScore","aliases","emojiText","fetchEmoji","searchWithin","re","hashedScore","issueNumberScore","number","title","icons","renderResults","issues","render","icon","unsafeHTML","hideSuggestions","issueMenu","textExpander","dismiss","onclick","onkeydown","specialKeys","searchResults","queryResults","subscriptions","queriesInProgress","queryCache","basicResults","cachedJSON","basicSearchResults","isFinite","refinedResults","refinedPromise","refinedQuery","refinedQueryUrl","jsonRequest","overage","liveSuggestions","liveQuery","selectedID","selectedElement","replaceChildren","mentionMenu","usersAndTeams","scorer","fuzzyScorer","queryChars","participant","shortestMatch","indexes","j","starts","allIndexesOf","char","results1","indexesOfChars","chars","startingIndex","desc","hiddenInput","question","includeFragment","members","mentions","tip","sentence","xs","Intl","lists","ListFormat","format","last","concat","addTimelineLastModifiedHeader","isCrossDomain","requestURL","urlError","host","lastModified","getTimelineLastModified","marker","scrollToFocusTimelineEvent","urlAnchor","focusElement","focusOrLoadElement","shouldLoadElement","loadResolvedComments","commentContainer","findCommentContainer","loadDeferredContent","loadHiddenComments","loadElement","threadCommentIds","commentIds","anchorCommentId","videosReady","v","readyState","HAVE_METADATA","timeout","done","imagesReady","complete","mediaLoaded","expandDetailsIfPresent","detailsContainer","isDetailsTargetExpanded","toggleDetailsTarget","newTimelineItem","gid","currentTimelineItem","unregisterAllServiceWorkers","registrations","serviceWorker","getRegistrations","registration","unregister","preservePosition","highlightedElement","existingTimelineItems","WeakSet","setExistingTimelineItems","serviceWorkerPath","register","scope","setCSPTrustedTypesPolicy","turboPolicy","setProgressBarDelay","isVisitable","originalTrackedElementsAreIdentical","getOwnPropertyDescriptor","PageRenderer","prototype","getSnapshotSignatures","snapshot","values","detailsByOuterHTML","tracked","HTMLMetaElement","defineProperty","reloadReason","currentTracked","fromEntries","currentHeadSnapshot","changedKeys","newHeadSnapshot","formatKeyToError","patchHistoryApi","oldHistory","unused","skipTurbo","usr","update","turboState","turboUnused","turboUrl","currentTurboCount","turboCount","mergedState","restorationIdentifier","adapter","beginProgressBar","progressBar","setValue","completeProgressBar","hide","turboPageNodes","turboDocumentAttributes","getCachedNode","setCachedNode","setDocumentAttributesCache","getDocumentAttributes","getCachedAttributes","getTurboCacheNodes","responseFailed","errorDocument","ssrSafeWindow","inSoftNav","isHashNavigation","startSoftNav","unloadMessage","onbeforeunload","frame","isTurboFrame","ev","fetchOptions","controllerPrototype","getPrototypeOf","originalRequestErrored","requestErrored","apply","fetchRequest","statusCode","dispatchTurboReload","responseHTML","trustedHTML","createHTML","DOMParser","parseFromString","customDriveRender","waitForStylesheets","resume","replaceElementAttributes","newBody","nextEventLoopTick","currentBody","newScript","copyScriptTag","currentTurboBody","newTurboBody","currentDocument","cachedAttributes","attr","find","cached","nodeValue","frameNavigation","navigatingBetweenDifferentEntities","frameContainer","userProfileContainer","isSameRepo","isSameProfile","newFrame","responseLocation","parsedHTML","sourceFrame","matchingFrame","getChangedTrackedKeys","addNewStylesheets","addNewScripts","replaceElements","replaceFrameClasses","shouldScrollToTop","scrollTo","replaceBodyClassesFromRequest","replacedElements","dispatchTurboRestored","replaceBodyClassesFromCachedNodes","replaceTitle","replaceTransientTags","updateFrame","classes","bodyClasses","setTitle","transients","oldFrame","setSoftNavMechanism","renderedSoftNav","skipIfGoingToReactApp","allowedMechanisms","succeedSoftNav","markTurboHasLoaded","isHardLoad","timing","hasSoftNavFailure","failSoftNav","initSoftNav","endSoftNav","setSoftNavFailReason","END","PROGRESS_BAR","START","timezone","DateTimeFormat","resolvedOptions","timeZone","setCookie","encodeURIComponent","SudoCredentialOptionsElementState","SudoCredentialOptionsElement","connectedCallback","currentState","initialState","reRenderPrompt","initialLoad","resetPrompt","renderWebauthnOption","renderGitHubMobileOption","renderTotpAppOption","renderTotpSmsOption","renderPasswordOption","reRenderNavContainer","handleUnexpectedPromptError","unexpectedError","errorMessage","githubMobileGenericErrorMessage","smsGenericErrorMessage","genericErrorMessage","renderPasswordOptionWithError","showPassword","showErrorMessage","hideErrorMessage","isWebAuthnAvailable","hideWebAuthn","isGitHubMobileAvailable","hideGitHubMobile","isTotpAppAvailable","hideTotpApp","isTotpSmsAvailable","hideTotpSms","hidePassword","safeSetElementVisibility","webauthnContainer","webauthnNav","githubMobileContainer","githubMobileNav","githubMobileLoading","githubMobileLanding","totpAppContainer","totpAppNav","totpSmsContainer","totpSmsLanding","totpSmsNav","totpSmsResendNav","passwordContainer","passwordNav","webauthnGet","setState","supported","State","Ready","Unsupported","resetGitHubMobilePrompt","initiateGitHubMobileAuthRequest","initiateTotpSmsRequest","loginField","passwordField","hasMultipleOptions","webauthnAvailable","githubMobileAvailable","totpAppAvailable","totpSmsAvailable","showWebauthn","showGitHubMobile","showTotpApp","showTotpSms","githubMobileRetry","githubMobilePromptUrl","csrfToken","mobileFailHandler","hasChallenge","challenge","githubMobileNoChallengeMessage","githubMobileChallengeMessage","githubMobileChallengeValue","initializeMobileAuthRequestStatusPoll","mobileApprovedHandler","mobileCancelCheck","resendTotpSms","smsSending","isResend","totpSmsTriggerUrl","smsSuccess","responseJson","showGitHubMobileErrorState","elem","flashErrorMessageText","flashErrorMessageContainer","attrPrefix","unreadCount","IntersectionObserver","isIntersecting","clearUnread","rootMargin","threshold","markThreadAsRead","hasFocus","unreadCounter","titleRe","updateTitle","handleSocketMessage","makeSocketMessageHandler","reapplyPreviouslyUpdatedContent","staleRecords","urlTarget","registerStaleRecords","orgId","ownerType","ownerId","detailsClass","cropForm","hashchange","getUserContentScrolling","decodeFragmentValue","normalizedHash","findElementByFragmentName","resetValidation","formGroup","group","clearErrorsFromInput","requestMenuBatchRender","batchUpdateUrl","repositoryIds","postData","repositoryId","updatedMenuContents","updateAllUserListMenus","roots","rootsByRepositoryId","groupRootsByRepositoryId","existingRoots","renderedMenuContents","replaceUserListMenuRoots","updatedMenu","matchingRoots","prepareUnsavedChangesWarning","hasDirtyFields","enableSaveChangesReminder","returnValue","disableSaveChangesReminder","disableSaveChangesReminderOnClosedDialogs","promptOnDialogClosing","confirmed","onTransitionEnd","issueLabel","isHovercardEnabled","titleUrl","setLabel","originalButtonText","setFlashError","responseBody","targetUrlElement","DocumentFragment","detailsElement","HTMLDetailsElement","triggerText","didStar","togglerContainer","starCount","socialContainer","menuContentRoot","defaultChecked","didCreate","templateID","editDialog","userListMenuRoot","placeholderName","userListMenuForm","requestUserListMenuFormSubmit","promise","formEvent","urlTargetElement","randomRGBColor","setColorSwatch","colorButton","rgb","hsl","convert","setInputColorFromButton","clickedButton","colorInput","hex","showOrHideLabelError","errorSelector","errorMessages","errorEl","showLabelErrors","hideLabelErrors","updateLabelPreview","startEl","previewContainer","fullErrorMessageEl","labelID","previewArea","nameInput","labelColorFrom","labelDescriptionFrom","descriptionInput","labelPreviewUrl","toggleBlankSlate","updateCount","delta","counter","oldCount","initLabelModal","modal","labelNameInput","labelName","labelNameEl","updateInputRemainingCharacters","addLabelButton","newLabelName","matchingExistingLabel","swatchesContainer","swatchButton","menuContent","prepend","defaultValue","resetCharactersRemainingCounts","editForm","labelPreview","labelLink","delayedOnLabelFormInputChange","toggleEventSettings","eventSettingsVisible","noEventSelected","eventSettingsContainer","getUtf8StringLength","CollapsibleSidebarWidgetElement","activeClass","loadingClass","onKeyDown","onMouseDown","pendingRequest","collapsible","setClose","setOpen","setLoading","updateCollapsible","handleAbort","SidebarMemexInputElement","isDisabled","hasErrored","hasExpanded","handleSelectMenuToggle","disconnectedCallback","handleDetailsSelect","custom","opened","updateCell","handleDetailsSelected","mouseDownFocus","keyDownFocus","onSelectMenuOpen","mouseDownFocusHeader","onChange","onBlur","instrumentType","parameters","formatted","Date","updateUrl","commit","columnId","parseAndFormatUpdate","month","day","year","targets","submitForm","skipTeamsCheck","reviewerTeamsCheckRequired","previouslyRequestedTeams","newlySelectedTeams","allSelectedTeams","scopedFormData","getAll","team","triggerTeamReviewerCheck","previewSubmit","submitOnMenuClose","returnFocusToTrigger","menuTriggerId","currentSidebarTriggerEl","multiple","currentSidebarItemEl","currentSidebarDetailsId","Error","hasFired","restoreCachedValues","cacheKey","formName","newInput","requestPreview","isSubmitting","cacheValuesOnHide","cacheValues","updated","datum","extra","mode","updateSidebar","reviewerCheckUrl","dialogHtml","showTeamReviewerConfirmationDialog","dialogAction","reviewerInput","findParam","getCacheKey","pageId","getPageID","updateProjectColumnMenuSummary","dropdown","columnName","moveUrl","cardId","unarchiveItemUrl","projectItemID","SOFT_NAV_EXTERNAL_EVENTS","freeze","INITIAL","ERROR","RENDER","isReactLazyPayload","isReactAlternate","hasFetchedGQL","getEntriesByType","some","initiatorType","hasFetchedJS","scheduleSend","stringifyObjectValues","initialRenderIsSSR","wasServerRendered","initialRenderIsLazy","initialRenderIsAlternate","sendSoftVitals","metric","navigationType","sendVitals","experimentalSoftNav","opts","stat","app","getCurrentReactAppName","networkConnType","connection","effectiveType","mechanism","MECHANISM_MAPPING","getLatestMechanism","soft","ssr","lazy","alternate","hpcFound","hpcGqlFetched","gqlFetched","hpcJsFetched","jsFetched","headerRedesign","synthetic","webVitalTimings","sendStatToHydro","hydroStat","reactApp","react","reactPartials","partial","routePattern","attribution","buildWebVitalInformation","vitalInformation","largestShiftTarget","updateStaffBar","staffBarContainer","metricContainer","toPrecision","sendTimingResults","sendResourceTimings","sendNavigationTimings","resourceTimings","entryType","nextHopProtocol","workerStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","navigationTimings","activationStart","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectCount","getName","getSelector","maxLen","sel","part","HPCTimingEvent","HPCDomInsertionEvent","setLCPasHPC","onLCP","resetHPC","animationFrame","dataHPCanimationFrame","emulatedHPCTimer","hpcStart","hpc","EventTarget","tabHidden","hpcDOMInsertionObserver","mutations","hasDataHPC","visibleElement","hpcElement","insertionElement","addedNodes","cancelAnimationFrame","disconnect","childList","subtree","listenerOpts","passive","stop","insertionFound","InteractionCountObserver","interactionCount","interactionCountEstimate","teardown","takeRecords","updateEstimate","buffered","durationThreshold","minKnownInteractionId","maxKnownInteractionId","interactionId","min","InteractionList","shortestInteraction","interactions","interactionsMap","interaction","newLatency","latency","maxSize","findEntry","prevEntry","estimateP98","numOfPageInteractions","candidateInteractionIndex","INPMetric","firstEntryWithTarget","InteractionProcessor","inp","interactionCountObserver","processEntries","processEntry","existingInteraction","supportsINP","PerformanceEventTiming","INPObserver","setupListeners","onHiddenOrPageHide","visibilityState","interactionProcessor","cb","setupWebVitals","useCustomINP","onCLS","onFCP","onFID","onTTFB","reportSoftNavs","inpObserver","onINP","AutoFlushingQueue","flush","onFlush","callback","callbacks","elementsToFlush","BatchLoader","loadInBatch","autoFlushingQueue","elementsByKey","batchElement","consolidatedData","validator","BaseBatchDeferredContentElement","batchLoader","batchLoaders","batchDeferredContentLoaders","BatchDeferredContentElement","docFragment","getFieldLimit","hasExceededCharacterLimit","remainingCount","showRemainingCharacterCount","remainingEl","charContainer","onDragstart","onDragend","onDragenter","onBodyDragleave","onDrop","dragging","ignorePageElementDrag","dropEffect","encrypt","publicKey","messageBytes","encoder","TextEncoder","encode","seal","decode","encoded","charCodeAt","Uint8Array","byte","btoa","submitBulk","disableEmptyValues","formElement","required","encryptedValueElementName","plainText","asyncCalculateVisibility","nav","calculateVisibility","overflowContainer","overflowOffset","positionedOffset","anyHidden","itemOffset","toggleItem","itemName","itemToHide","safeLocalStorage","ttl","throwQuotaErrorsOnSet","sendCacheStats","restoreFieldsFromAllBackends","restoreResumableFields","persistFieldstoAllBackends","persistResumableFields","debouncedRestoreResumableFields","setForm","updateSelectedRepoTab","isSelected","selectedLink","TagInput","setup","removeTag","selectTag","autoComplete","bind","onSubmit","inputWrap","onBackspace","taggifyValueWhenSuggesterHidden","taggifyValue","tags","normalizeTag","selections","selectedTags","tagsAdded","templateTag","inputTag","tagTemplate","sanitizedText","multiTagInput","lastSelection","supportsUserSelectContain","cssText","getPropertyValue","rangeCount","selectAllChildren","codeEditors","getAsyncCodeEditor","onEditorFromEvent","getScore","minScore","hasMatch","highlightElement","lastPosition","positions","sorting","states","textCache","getTextCache","inputEl","handler","HTMLLIElement","lazyItems","addLazyItems","dataset","oldSortAbort","sortAbort","markSelector","maxMatches","shouldMark","itemsToRender","nextBatch","itemToRender","buttons","emptyEl","isNaN","observedAttributes","attributeChangedCallback","customElements","define","visitorPayload","visitorHmac","sendHydroEvent","shelfParams","sessionStorageKey","storeShelfParams","pullRequestPathname","getCurrentPullRequestPathname","deleteShelfParams","currentPullRequestPathname","stored","notification","toggleNotificationSubscriptionStatus","toggleNotificationStarredStatus","newNode","extractContents","insertNode","metaTag","flashClassName","removeFlash","flashContainer","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","githubMobileAuthenticateErrorAndRetry","genericHandler","addFlashMessage","importNode","getErrorAndRetryMessage","successCallback","failCallback","checkCancelCallback","poll","errorCount","csrfInput","responseJSON","assign","smsError","pane1","pane2","pane","pattern","currentButton","noteContainer","newContent","throttledInputEvents","schedule","events","inputed","onKeydownInput","keypressed","onKeyupInput","onInputInput","dispatchThrottledInputEvent","BatchedUpdatableContent","onEvent","windowSize","updaterFunction","config","intervals","interval","setInterval","onInterval","hasOwnProperty","clearInterval","batcher","event_updates","findByGid","batched","eventName","sessionPromise","notify","subscribers","channel","AliveSessionProxy","added","worker","port","addedChannels","redundantPresenceChannels","redundantChannels","requestPresence","removed","drain","updatedPresenceChannels","presenceMetadata","removeSubscribers","sendPresenceMetadataUpdate","metadataUpdates","updatedChannels","setMetadata","channelNames","updatesForSharedWorker","getChannelMetadata","online","offline","hangup","receive","debouncedNotify","notifyPresenceDebouncedByChannel","debouncedEvent","refreshUrl","sessionId","notifier","SubscriptionSet","PresenceMetadataSet","SharedWorker","connect","workerSrc","alivePolicy","createScriptURL","InvalidSourceRelError","createSession","isSafari","_","AliveSession","connectWhenReady","BaseAliveSession","getUrlFromRefreshUrl","fetchRefreshUrl","shared","fetchJSON","post","csrf","allowUserContentScrolling","setUserContentScrolling","setting","editorTarget","innerEditorTarget","oldTitle","newTitle","ms","race","queue","queueMicrotask","currentUrl","targetUrl","current","hasHash","policyName","temporaryPermissiveJtmlPolicy","ghTrustedTypes","createPolicy","trustedTypesPolicy","fallback","fallbackOnError","TemplateResult","sudoPromptExist","loadPromptTemplate","urlWithParams","oldURL","newURL","webauthnSupportLevel","succeeded","sudoPrompt","prompt","sudoModalErrorOrClose","unauthorizedError","tooManyError","inputElementSelector","triggerSudoPrompt","accept","sudoResponse","fetchSessionInSudo","oldText","newText","isFocused","beginning","remaining","setTextareaValueAndCursor","point","insertedText","newline","newPoint","u8array","written","encodeInto","diff","TrustedTypesPolicyError","isStaff","silenceErrorReporting","createScript","DATA_TURBO_LOADED","hasTurboLoaded","url1","url2","path1","headStylesheets","loadedStylesheets","styleSheets","stylesheet","promises","waitForLoad","onComplete","cachedElements","newElements","oldElements","newElement","oldElement","executeScriptTag","trustedSrc","WebauthnGetElement","getCurrentButtonText","originalErrorText","errorText","passkeySupport","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","passkeysUnsupportedMessage","subtleLogin","handleWebauthnSubtle","showWebauthnLoginFragment","subtle","updateWebauthnSubtleParentBoxVisibility","loginFragment","parentDiv","buttonText","setCurrentButtonText","retryMessage","messages","unsupportedMessage","waitingMessage","silent_unless_success","dataJson","signResponse","parseRequestOptionsFromJSON","responseField","webauthnSupported","iuvpaaSupportLevel"],"sourceRoot":""}