<% page_info title: page_title %>

<div class="Box Box--condensed">
  <div class="Box-header">
    <h3 class="Box-title">
      Arctic Code Vault Contributions displayed on user's profile
    </h3>
  </div>
  <div>
    <% if view.top_acv_contributions.size > 0 %>
      <ul>
        <li class="Box-row Box-title d-flex">
          <div class="col-2">repository ID</div>
          <div class="flex-auto">contributor email</div>
          <div class="flex-shrink-0">ignore flag</div>
        </li>
        <% view.top_acv_contributions.each do |contribution| %>
          <li class="Box-row d-flex">
            <div class="col-2"><%= contribution.repository_id %></div>
            <div class="flex-auto wb-break-word"><%= contribution.contributor_email %></div>
            <div class="flex-shrink-0">
              <%= contribution.ignore? ? "Ignored" : "Not ignored" %>
              <%= button_to(
                "Toggle",
                stafftools_user_acv_contribution_path(this_user, contribution),
                method: :patch,
                form_class: "inline-form ml-1",
                class: "btn btn-sm",
              ) %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <div class="Box-row">No contribution to display for the Arctic Code Vault badge</div>
    <% end %>
  </div>
</div>

<div class="Box Box--condensed mt-3">
  <div class="Box-header">
    <h3 class="Box-title">
      All Arctic Code Vault Contributions
    </h3>
  </div>
  <div>
    <% if view.all_acv_contributions.size > 0 %>
      <ul>
        <li class="Box-row Box-title d-flex">
          <div class="col-2">repository ID</div>
          <div class="flex-auto wb-break-word">contributor email</div>
          <div class="flex-shrink-0">ignore flag</div>
        </li>
        <% view.all_acv_contributions.each do |contribution| %>
          <li class="Box-row d-flex">
            <div class="col-2"><%= contribution.repository_id %></div>
            <div class="flex-auto wb-break-word"><%= contribution.contributor_email %></div>
            <div class="flex-shrink-0">
              <%= contribution.ignore? ? "Ignored" : "Not ignored" %>
              <%= button_to(
                "Toggle",
                stafftools_user_acv_contribution_path(this_user, contribution),
                method: :patch,
                form_class: "inline-form ml-1",
                class: "btn btn-sm",
              ) %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <div class="Box-row">
        This user has not contributed to repositories in the Arctic Code Vault.
      </div>
    <% end %>
  </div>
</div>
