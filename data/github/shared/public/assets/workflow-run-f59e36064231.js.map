{"version":3,"file":"workflow-run-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/scroll-anchoring/dist/scroll-anchoring.esm.js","app/assets/modules/github/workflow-runs/fetch.ts","app/assets/modules/github/workflow-runs/signalr-socket.ts","app/assets/modules/github/workflow-runs/annotations.ts","app/assets/modules/github/workflow-runs/approvals.ts","app/assets/modules/github/workflow-runs/graph.ts","app/assets/modules/github/workflow-runs/streaming-graph-job.ts","app/assets/modules/github/workflow-runs/job-summaries.ts","app/assets/modules/github/workflow-runs/job-summary.ts","app/assets/modules/github/workflow-runs/run-summary.ts","node_modules/@github/details-dialog-element/dist/index.js"],"sourcesContent":["function preserveAnchorNodePosition(document, callback) {\n  return preservePosition(findAnchorNode(document), callback);\n}\nfunction preservePosition(anchorNode, callback) {\n  var node = anchorNode;\n\n  if (!node) {\n    return Promise.resolve(callback());\n  }\n\n  var documentElement = node.ownerDocument.documentElement;\n\n  function computeAncestorBoundingRects(element) {\n    var rects = [];\n\n    while (element) {\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          top = _element$getBoundingC.top,\n          left = _element$getBoundingC.left;\n\n      rects.push({\n        element: element,\n        top: top,\n        left: left\n      });\n      element = element.parentElement;\n    }\n\n    return rects;\n  }\n\n  function firstAttachedBoundingRect(rects) {\n    for (var i = 0; i < rects.length; i++) {\n      var rect = rects[i];\n\n      if (documentElement.contains(rect.element)) {\n        return rect;\n      }\n    }\n  }\n\n  var origBoundingRects = computeAncestorBoundingRects(node);\n  return Promise.resolve(callback()).then(function (result) {\n    var origBoundingRect = firstAttachedBoundingRect(origBoundingRects);\n\n    if (origBoundingRect) {\n      node = origBoundingRect.element;\n      var origTop = origBoundingRect.top;\n      var origLeft = origBoundingRect.left;\n\n      var _node$getBoundingClie = node.getBoundingClientRect(),\n          top = _node$getBoundingClie.top,\n          left = _node$getBoundingClie.left;\n\n      cumulativeScrollBy(node, left - origLeft, top - origTop);\n    }\n\n    return result;\n  });\n}\nfunction findAnchorNode(document) {\n  if (document.activeElement !== document.body) {\n    return document.activeElement;\n  }\n\n  var hoverElements = document.querySelectorAll(':hover');\n  var len = hoverElements.length;\n\n  if (len) {\n    return hoverElements[len - 1];\n  }\n}\n\nfunction cumulativeScrollBy(element, x, y) {\n  var document = element.ownerDocument;\n  var window = document.defaultView;\n\n  function scrollOffsets(element) {\n    if (element.offsetParent) {\n      return {\n        top: element.scrollTop,\n        left: element.scrollLeft\n      };\n    } else {\n      return {\n        top: window.pageYOffset,\n        left: window.pageXOffset\n      };\n    }\n  }\n\n  function scrollBy(element, x, y) {\n    if (x === 0 && y === 0) {\n      return [0, 0];\n    }\n\n    var origScroll = scrollOffsets(element);\n    var top = origScroll.top + y;\n    var left = origScroll.left + x;\n\n    if (element === document || element === window || element === document.documentElement || element === document.body) {\n      document.defaultView.scrollTo(left, top);\n    } else {\n      element.scrollTop = top;\n      element.scrollLeft = left;\n    }\n\n    var newScroll = scrollOffsets(element);\n    return [newScroll.left - origScroll.left, newScroll.top - origScroll.top];\n  }\n\n  function overflowParent(el) {\n    var element = el;\n\n    if (!element.offsetParent || element === document.body) {\n      return;\n    }\n\n    while (element !== document.body) {\n      if (element.parentElement) {\n        element = element.parentElement;\n      } else {\n        return;\n      }\n\n      var _window$getComputedSt = window.getComputedStyle(element),\n          position = _window$getComputedSt.position,\n          overflowY = _window$getComputedSt.overflowY,\n          overflowX = _window$getComputedSt.overflowX;\n\n      if (position === 'fixed' || overflowY === 'auto' || overflowX === 'auto' || overflowY === 'scroll' || overflowX === 'scroll') {\n        break;\n      }\n    }\n\n    return element;\n  }\n\n  var container = overflowParent(element);\n  var cumulativeX = 0;\n  var cumulativeY = 0;\n\n  while (container) {\n    var scrolled = scrollBy(container, x - cumulativeX, y - cumulativeY);\n    cumulativeX += scrolled[0];\n    cumulativeY += scrolled[1];\n\n    if (cumulativeX === x && cumulativeY === y) {\n      break;\n    }\n\n    container = overflowParent(container);\n  }\n}\n\nexport { preserveAnchorNodePosition, preservePosition, findAnchorNode };\n","export async function fetchJson<T>(url: string): Promise<T | null> {\n  try {\n    const response = await fetch(url, {\n      credentials: 'same-origin',\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (response.ok) {\n      return await response.json()\n    }\n  } catch {\n    // Network failure\n  }\n  return null\n}\n","import type {Socket} from '@github/stable-socket'\nimport {StableSocket} from '@github/stable-socket'\nimport {fetchJson} from './fetch'\n\ninterface AuthenticatedURLResponse {\n  data: {\n    authenticated_url: string\n  }\n}\n\ninterface WsUrlLookupData {\n  logStreamWebSocketUrl: string\n}\n\nexport enum MessageType {\n  Invocation = 1,\n  StreamItem = 2,\n  Completion = 3,\n  StreamInvocation = 4,\n  CancelInvocation = 5,\n  Ping = 6,\n  Close = 7,\n}\n\n// https://github.com/dotnet/aspnetcore/blob/main/src/SignalR/docs/specs/HubProtocol.md#overview\ntype Message = HandshakeRequest | Invocation\n\ninterface HandshakeRequest {\n  protocol: string\n  version: number\n}\n\ninterface Invocation {\n  type: number\n  target: string\n  arguments: unknown[]\n}\n\nexport interface SocketData<T> {\n  target: string\n  type: number\n  arguments: T\n}\n\nexport class SignalRSocket extends EventTarget {\n  public static readonly RECORD_SEPARATOR = String.fromCharCode(0x1e)\n  // https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n  public static readonly ABNORMAL_CLOSURE = 1006\n  public static readonly POLICY_VIOLATION = 1008\n  public static readonly JITTER_MIN_MILLISECONDS = 100\n  public static readonly JITTER_MAX_MILLISECONDS = 400\n  static #instances = new Map<string, SignalRSocket>()\n\n  private globalSocket: Socket | null\n  private socketUrl: string\n  private isStreaming = false\n  private xhrConnectionUrl: string\n  private shouldTryAgainWithNewSocket = false\n\n  public static getInstance(target: string): SignalRSocket {\n    if (!SignalRSocket.#instances.has(target)) {\n      SignalRSocket.#instances.set(target, new SignalRSocket(target))\n    }\n    return SignalRSocket.#instances.get(target)!\n  }\n\n  constructor(private target: string) {\n    super()\n  }\n\n  public socketDidReceiveMessage(socket: Socket, message: string): void {\n    const record = message.split(SignalRSocket.RECORD_SEPARATOR)[0]!\n    const data = JSON.parse(record) as SocketData<unknown>\n\n    this.dispatchEvent(new CustomEvent('socketDidReceiveMessage', {detail: data}))\n\n    if (data.type === MessageType.Close) socket.close()\n  }\n\n  // Public methods\n  public socketDidOpen() {\n    this.handshake()\n  }\n\n  public socketDidClose() {\n    // Do nothing\n  }\n\n  public socketDidFinish() {\n    this.globalSocket = null\n\n    if (this.shouldTryAgainWithNewSocket) {\n      this.shouldTryAgainWithNewSocket = false\n      // Wait for 100 to 500 milliseconds before reconnecting\n      const delay =\n        Math.floor(Math.random() * SignalRSocket.JITTER_MAX_MILLISECONDS) + SignalRSocket.JITTER_MIN_MILLISECONDS\n      setTimeout(() => this.startOrContinueStreaming(this.xhrConnectionUrl, true), delay)\n    }\n  }\n\n  public socketShouldRetry(socket: Socket, code: number): boolean {\n    if (code === SignalRSocket.ABNORMAL_CLOSURE) {\n      /**\n       * AFD (Azure Front Door) abnormally closed the socket. This can happen after the websocket max time limit\n       * has been reached which is configured to 10 minutes for Actions. An abnormal closure can also sometimes\n       * randomly happen before the max time limit has been reached which stops incoming logs.\n       *\n       * Retrying with the existing socket is futile, but it is safe to discard the existing socket and create a new one.\n       */\n      this.shouldTryAgainWithNewSocket = true\n      return false\n    }\n    return !this.isFatalStatusCode(code)\n  }\n\n  public async startOrContinueStreaming(xhrConnectionUrl: string, retryingAbnormalClosure = false) {\n    if (!this.xhrConnectionUrl) this.xhrConnectionUrl = xhrConnectionUrl\n\n    if (this.isStreaming && !retryingAbnormalClosure) return\n    this.isStreaming = true\n\n    await this.tryStartNewStream(this.xhrConnectionUrl)\n  }\n\n  public closeExistingSocket() {\n    if (this.globalSocket) {\n      this.globalSocket.close()\n      this.globalSocket = null\n    }\n    return\n  }\n\n  public onStreamFailure() {\n    this.dispatchEvent(new CustomEvent('onStreamFailure'))\n  }\n\n  get reconnectWindow() {\n    // Wait for 100 to 500 milliseconds before reconnecting\n    const delay =\n      Math.floor(Math.random() * SignalRSocket.JITTER_MAX_MILLISECONDS) + SignalRSocket.JITTER_MIN_MILLISECONDS\n    return delay\n  }\n\n  // Private methods\n  private async tryStartNewStream(xhrConnectionUrl: string) {\n    try {\n      const socketUrl = await this.retrieveSocketURL(xhrConnectionUrl)\n      if (!socketUrl) return\n      this.socketUrl = socketUrl\n\n      this.globalSocket = new StableSocket(this.socketUrl, this, {timeout: 4000, attempts: 10})\n      await this.globalSocket.open()\n    } catch (e) {\n      this.onStreamFailure()\n      throw e\n    }\n  }\n\n  private handshake() {\n    const {searchParams} = new URL(this.socketUrl, window.location.origin)\n    const tenantId = searchParams.get('tenantId')\n    const runId = searchParams.get('runId')\n    if (tenantId && runId) {\n      const protocolPayload: HandshakeRequest = {\n        protocol: 'json',\n        version: 1,\n      }\n      this.sendPayload(protocolPayload)\n\n      const targetPayload: Invocation = {\n        arguments: [tenantId, +runId],\n        target: this.target,\n        type: MessageType.Invocation,\n      }\n      this.sendPayload(targetPayload)\n    }\n  }\n\n  private retrieveSocketURL = async (xhrUrl: string): Promise<string | null> => {\n    const authResult = await fetchJson<AuthenticatedURLResponse>(xhrUrl)\n    const authenticatedUrl = authResult?.data['authenticated_url']\n    if (!authenticatedUrl) return null\n    const wsResult = await fetchJson<WsUrlLookupData>(authenticatedUrl)\n    return wsResult?.logStreamWebSocketUrl ?? null\n  }\n\n  private isFatalStatusCode(code: number): boolean {\n    return code === SignalRSocket.POLICY_VIOLATION\n  }\n\n  private sendPayload(payload: Message) {\n    if (this.globalSocket) {\n      this.globalSocket.send(JSON.stringify(payload) + SignalRSocket.RECORD_SEPARATOR)\n    }\n  }\n}\n","import {attr, controller, target} from '@github/catalyst'\n\n@controller\nclass AnnotationMessageElement extends HTMLElement {\n  @target showMoreButton: HTMLButtonElement\n  @target showLessButton: HTMLButtonElement\n  @target annotationContainer: HTMLElement\n  @attr expanded = false\n\n  private annotationTextComponent: HTMLElement\n\n  connectedCallback() {\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    this.annotationTextComponent = this.annotationContainer.firstElementChild as HTMLElement\n    this.initalizeEventListeners()\n  }\n\n  static observedAttributes = ['data-expanded']\n  attributeChangedCallback() {\n    if (this.expanded) {\n      this.displayShowLessButton()\n      this.annotationContainer.classList.replace('annotation--contracted', 'annotation--expanded')\n    } else {\n      this.displayShowMoreButton()\n      this.annotationContainer.classList.replace('annotation--expanded', 'annotation--contracted')\n    }\n  }\n\n  toggleExpansion() {\n    this.expanded = !this.expanded\n  }\n\n  private calculateOverflow() {\n    if (this.annotationTextComponent) {\n      const isEllipsisPresent = this.isEllipsisActive(this.annotationTextComponent)\n      if (!this.expanded) {\n        if (isEllipsisPresent) {\n          this.displayShowMoreButton()\n        } else {\n          this.hideBothButtons()\n        }\n      } else {\n        if (!isEllipsisPresent) {\n          const wrapped = this.isAnnotationWrapped(this.annotationTextComponent)\n          if (this.expanded && wrapped) {\n            this.displayShowLessButton()\n          } else if (wrapped) {\n            this.displayShowMoreButton()\n          } else {\n            this.hideBothButtons()\n          }\n        }\n      }\n    }\n  }\n\n  private displayShowLessButton() {\n    this.setButtonHiddenProperties(false, true)\n  }\n\n  private displayShowMoreButton() {\n    this.setButtonHiddenProperties(true, false)\n  }\n\n  private hideBothButtons() {\n    this.setButtonHiddenProperties(true, true)\n  }\n\n  private setButtonHiddenProperties(isShowLessHidden: boolean, isShowMoreHidden: boolean) {\n    this.showLessButton.hidden = isShowLessHidden\n    this.showMoreButton.hidden = isShowMoreHidden\n  }\n\n  /**\n   * When the page gets resized, text overflow can change and the visibility of the toggleButton may need to\n   * be adjusted. There is no native cross-browser event that is fired when an element overflows so we listen\n   * to the resize event and use an elements computed line height to detect if overflow has happened\n   */\n  private initalizeEventListeners() {\n    if ('ResizeObserver' in window) {\n      new ResizeObserver(() => this.calculateOverflow()).observe(this.annotationTextComponent)\n    } else {\n      /* eslint-disable-next-line github/prefer-observers */ // @ts-expect-error Certain old browsers like Safari < 13.1 & IE do not have ResizeObserver\n      window.addEventListener('resize', () => this.calculateOverflow())\n    }\n  }\n\n  // from: https://stackoverflow.com/questions/7738117/html-text-overflow-ellipsis-detection\n  private isEllipsisActive(e: HTMLElement) {\n    return e.offsetWidth < e.scrollWidth\n  }\n\n  // from: https://stackoverflow.com/questions/53280724/word-wrap-detection-in-javascript\n  private isAnnotationWrapped(e: HTMLElement) {\n    const {lineHeight} = getComputedStyle(e)\n    const parsedLineHeight = parseInt(lineHeight.split('px')[0]!)\n    return e.scrollHeight > parsedLineHeight\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-show-more-environments', function (event) {\n  const button = event.target as HTMLElement\n  const container = button.closest<HTMLElement>('.js-hidden-environments-container')!\n  const hiddenEnvironments = container.querySelector('.js-hidden-environments')\n  const shownEnvironments = container.querySelector('.js-shown-environments')\n\n  if (shownEnvironments) {\n    /* eslint-disable-next-line github/no-d-none */\n    shownEnvironments.classList.add('d-none')\n  }\n\n  if (hiddenEnvironments) {\n    /* eslint-disable-next-line github/no-d-none */\n    hiddenEnvironments.classList.remove('d-none')\n  }\n})\n\n// used for new Primer gates approval dialog\non('click', '.js-gates-dialog-environment-checkbox', function (event) {\n  const checkbox = event.target as HTMLInputElement\n  const dialog = checkbox.closest<HTMLElement>('.js-gates-dialog')\n  if (dialog == null) {\n    // bail out if we don't have the Primer dialog\n    return\n  }\n\n  const rejectButton = dialog.querySelector<HTMLInputElement>('.js-gates-approval-dialog-reject-button')\n  const approveButton = dialog.querySelector<HTMLInputElement>('.js-gates-approval-dialog-approve-button')\n  const countDisplay = dialog.querySelector<HTMLInputElement>('.js-gates-approval-dialog-count-display')\n  if (rejectButton != null && approveButton != null && countDisplay != null) {\n    const checked = dialog.querySelectorAll('.js-gates-dialog-environment-checkbox:checked')\n    const invalid = checked.length === 0\n    rejectButton.disabled = invalid\n    approveButton.disabled = invalid\n    countDisplay.hidden = invalid\n    countDisplay.textContent = checked.length.toString()\n  }\n\n  const parentLabel = checkbox.closest('.ActionsApprovalOverlay-environment')\n  if (parentLabel) {\n    if (checkbox.checked) {\n      parentLabel.classList.add('selected-approval-environment')\n    } else {\n      parentLabel.classList.remove('selected-approval-environment')\n    }\n  }\n})\n","import {controller, target, targets} from '@github/catalyst'\n\nimport {loaded} from '@github-ui/document-ready'\nimport {updateContent} from '@github-ui/updatable-content'\n\nconst DRAG_THRESHOLD_PX = 5\n\nconst DESIRED_CONNECTOR_RADIUS = 24\nconst DISTANCE_BETWEEN_CARDS = 56\nconst MAX_RECURSION_DEPTH = 256\n\nclass MouseDriver {\n  private dragStartX?: number\n  private dragStartY?: number\n  private dragging: boolean\n  private lastPoint: {x: number; y: number}\n  private graph: ActionGraphElement\n\n  constructor(graph: ActionGraphElement) {\n    this.dragging = false\n    this.graph = graph\n    this.lastPoint = {\n      x: 0,\n      y: 0,\n    }\n    this.setupListener()\n  }\n\n  private setupListener() {\n    document.body.addEventListener('pointerup', () => this.up())\n    document.body.addEventListener('pointermove', e => this.move(e))\n    this.graph.addEventListener('pointerdown', e => this.down(e))\n    this.graph.addEventListener('pointermove', e => this.move(e))\n\n    // Register a capture handler, we need to be able to prevent the default action for children\n    this.graph.addEventListener('click', e => this.click(e), {\n      capture: true,\n    })\n\n    // This cannot be passive, we need to be able to prevent the default behavior\n    // eslint-disable-next-line github/require-passive-events\n    this.graph.addEventListener('wheel', (event: WheelEvent) => this.handleWheel(event), {\n      capture: false,\n      passive: false,\n    })\n  }\n\n  private updateCursor() {\n    if (this.dragging) {\n      this.graph.canvas.classList.add('dragging')\n    } else {\n      this.graph.canvas.classList.remove('dragging')\n    }\n  }\n\n  private up() {\n    this.dragging = false\n\n    this.updateCursor()\n  }\n\n  private click(event: MouseEvent) {\n    if (\n      Math.abs(this.dragStartX! - event.pageX) > DRAG_THRESHOLD_PX ||\n      Math.abs(this.dragStartY! - event.pageY) > DRAG_THRESHOLD_PX\n    ) {\n      // Mouse has been moved while dragging, cancel the default action (e.g., a click on another interactive\n      // element in the graph)\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }\n\n  private down(event: PointerEvent) {\n    if (\n      // Only track the main (i.e., left) mouse button\n      event.button !== 0 ||\n      // This event is fired continously when using touch, only handle it the first time\n      this.dragging\n    ) {\n      return\n    }\n\n    this.dragging = true\n\n    // Store the inital position of this drag operation\n    this.dragStartX = event.pageX\n    this.dragStartY = event.pageY\n\n    // Store the last x/y position for the delta calculation once the pointer is moved\n    this.lastPoint.x = event.pageX\n    this.lastPoint.y = event.pageY\n\n    this.updateCursor()\n  }\n\n  private move(e: PointerEvent) {\n    const x = e.pageX\n    const y = e.pageY\n\n    if (this.dragging) {\n      const dx = e.pageX - this.lastPoint.x\n      const dy = e.pageY - this.lastPoint.y\n\n      this.graph.dragMove(dx, dy)\n    }\n\n    this.lastPoint.x = x\n    this.lastPoint.y = y\n  }\n\n  private handleWheel(e: WheelEvent) {\n    const oldZoom = this.graph.getCurrentZoom()\n    this.graph.setNormalizedZoom(this.graph.getCurrentZoom() - e.deltaY / 100)\n    this.graph.setFitToWindowBtnEnabled(true)\n    this.moveZoomOffset(e, oldZoom)\n    e.stopPropagation()\n    e.stopImmediatePropagation()\n    e.preventDefault()\n  }\n\n  private moveZoomOffset(e: WheelEvent, oldZoom: number) {\n    // This moves the graph so that the scale is centered to the mouse pointer\n    const box = this.graph.visualGraph.getBoundingClientRect()\n    const ratio = (this.graph.getCurrentZoom() - oldZoom) / oldZoom\n    const distanceX = e.clientX - box.left\n    const distanceY = e.clientY - box.top\n\n    const dx = distanceX * ratio * -1\n    const dy = distanceY * ratio * -1\n    this.graph.dragMove(dx, dy)\n  }\n}\n\nclass KeyDriver {\n  private graph: ActionGraphElement\n\n  constructor(graph: ActionGraphElement) {\n    this.graph = graph\n    this.graph.addEventListener('keydown', (event: KeyboardEvent) => this.down(event))\n  }\n\n  private moveBothX(x: number) {\n    this.graph.dragMove(x, 0)\n  }\n\n  private moveBothY(y: number) {\n    this.graph.dragMove(0, y)\n  }\n\n  private down(e: KeyboardEvent) {\n    // TODO: Refactor to use data-hotkey\n    /* eslint eslint-comments/no-use: off */\n    /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n    let handled = true\n\n    switch (e.key) {\n      case 'ArrowLeft':\n        this.moveBothX(100)\n        break\n      case 'ArrowUp':\n        this.moveBothY(30)\n        break\n      case 'ArrowRight':\n        this.moveBothX(-100)\n        break\n      case 'ArrowDown':\n        this.moveBothY(-30)\n        break\n      default:\n        handled = false\n    }\n\n    if (handled) {\n      e.preventDefault()\n    }\n    /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n  }\n}\n\ntype Direction = '' | 'up' | 'down'\n\ntype Rect = {\n  x: number\n  y: number\n  w: number\n  h: number\n\n  adjust: number\n}\n\ntype LineTarget = {\n  id: string\n\n  rect: Rect\n\n  isGroup: boolean\n}\n\ntype Line = {\n  path: SVGPathElement\n\n  from: LineTarget\n\n  to: LineTarget\n\n  direction: Direction\n}\n\ntype DependencyNode = {\n  incoming: string[]\n\n  outgoing: string[]\n}\n\nconst HIGHLIGHT_CLASS = 'active'\nconst HIGHLIGHT_CLASS_IN = 'active--in'\nconst HIGHLIGHT_CLASS_OUT = 'active--out'\n\n@controller\nclass ActionGraphElement extends HTMLElement {\n  @target canvas: HTMLDivElement\n  @target visualGraph: HTMLDivElement\n  @target zoomFit: HTMLButtonElement\n  @target zoomIn: HTMLButtonElement\n  @target zoomOut: HTMLButtonElement\n  @target stages: HTMLElement\n  @target connectorLineHighlights: SVGElement\n  @targets connectorLines: SVGElement[]\n  @targets paths: SVGPathElement[]\n  @targets pathHighlights: SVGPathElement[]\n  @targets jobs: HTMLDivElement[]\n  @targets matrices: HTMLDivElement[]\n\n  readonly ZOOM_INCREMENT = 0.25\n  readonly MAX_ZOOM = 1\n  private currentZoom = 1\n  private minZoom = 1\n\n  private allHighlightedGroupIds: string[] = []\n  private dependencies: {[id: string]: DependencyNode} = {}\n\n  async connectedCallback() {\n    // add mouse and keyboard drivers\n    new MouseDriver(this)\n    new KeyDriver(this)\n\n    document.addEventListener('run-sidebar-job-enter', e => this.jobEnter(e))\n    document.addEventListener('run-sidebar-job-leave', () => this.jobLeave())\n\n    await loaded\n    this.drawLines()\n    this.fitToWindow()\n\n    this.visualGraph.style.opacity = '1'\n  }\n\n  public cancelEvent(e: MouseEvent) {\n    // 1. Firefox doesn't honor the `draggable=\"false\"` attribute, the only way to prevent HTML5 drag/drop\n    // API placeholders from showing up is to cancel the `dragstart` event\n    // 2. Safari always displays a text cursor when dragging unless we cancel the selectionstart event\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  // When a job on the graph is updated, call drawLines in case the job changed in size\n  public async updateJob({target: job}: {target: HTMLElement}) {\n    await updateContent(job)\n    this.drawLines()\n  }\n\n  // Click on one of the expand matrix buttons\n  public async expandMatrix(e: Event) {\n    const el = e.target as HTMLElement\n    const url = el.closest('button')?.getAttribute('data-update-url')\n    const matrix = el.closest('.js-graph-matrix') as HTMLElement\n\n    if (!matrix || !url) {\n      return\n    }\n    matrix.setAttribute('data-url', url)\n\n    await updateContent(matrix)\n\n    this.fitToWindow(false)\n    this.drawLines()\n  }\n\n  public getCurrentZoom(): number {\n    return this.currentZoom\n  }\n\n  public dragMove(dx: number, dy: number) {\n    const x = Math.round((parseFloat(this.visualGraph.getAttribute('data-x')!) || 0) + dx)\n    const y = Math.round((parseFloat(this.visualGraph.getAttribute('data-y')!) || 0) + dy)\n\n    this.visualGraph.style.transform = `translate(${x}px, ${y}px)`\n    this.visualGraph.setAttribute('data-x', `${x}`)\n    this.visualGraph.setAttribute('data-y', `${y}`)\n    this.setFitToWindowBtnEnabled(true)\n  }\n\n  public setFitToWindowBtnEnabled(enabled: boolean) {\n    this.zoomFit.disabled = !enabled\n  }\n\n  public setNormalizedZoom(zoom: number) {\n    let newZoom = zoom\n\n    if (newZoom < this.minZoom) {\n      newZoom = this.minZoom\n    } else if (zoom > this.MAX_ZOOM) {\n      newZoom = this.MAX_ZOOM\n    }\n\n    this.setZoom(newZoom)\n  }\n\n  // Click on Zoom IN button\n  private in() {\n    this.zoomOut.disabled = false\n    this.setFitToWindowBtnEnabled(true)\n    this.setNormalizedZoom(this.currentZoom + this.ZOOM_INCREMENT)\n  }\n\n  // Click on Zoom OUT button\n  private out() {\n    this.zoomIn.disabled = false\n    this.setFitToWindowBtnEnabled(true)\n    this.setNormalizedZoom(this.currentZoom - this.ZOOM_INCREMENT)\n  }\n\n  // Click on fit button\n  private fit() {\n    this.setFitToWindowBtnEnabled(false)\n    this.fitToWindow()\n  }\n\n  private setZoomInBtnDisabled(disabled: boolean) {\n    this.zoomIn.disabled = disabled\n  }\n\n  private setZoomOutBtnDisabled(disabled: boolean) {\n    this.zoomOut.disabled = disabled\n  }\n\n  private setZoom(zoom: number) {\n    this.currentZoom = zoom\n    this.setZoomInBtnDisabled(this.MAX_ZOOM === this.currentZoom)\n    this.setZoomOutBtnDisabled(this.minZoom === this.currentZoom)\n    this.stages.style.transform = `scale(${this.currentZoom})`\n  }\n\n  private fitToWindow(applyTransformation = true) {\n    // Make sure the canvas fits inside the window with some horizontal/vertical buffer\n    const canvasWidth = this.clientWidth - 48\n    const canvasHeight = this.clientHeight - 75\n    const workflowWidth = this.stages.clientWidth\n    const workflowHeight = this.stages.clientHeight\n\n    const xZoom = canvasWidth / workflowWidth\n    const yZoom = canvasHeight / workflowHeight\n    const zoom = Math.min(Math.min(xZoom, yZoom), this.MAX_ZOOM)\n    this.minZoom = Math.min(zoom, this.MAX_ZOOM)\n\n    // Move the graph to its origin (0,0) and zoom\n    if (applyTransformation) {\n      this.setZoom(zoom)\n      this.visualGraph.style.transform = 'translate(0, 0)'\n      this.visualGraph.setAttribute('data-x', '0')\n      this.visualGraph.setAttribute('data-y', '0')\n    }\n  }\n\n  private mouseEnter(e: MouseEvent) {\n    this.setHighlightedGroup((e.target as HTMLElement).id)\n  }\n\n  private mouseLeave() {\n    this.clearHighlightedGroups()\n  }\n\n  private jobEnter(e: Event) {\n    const jobId = (e as CustomEvent).detail?.jobId\n    if (!jobId) {\n      return\n    }\n\n    let groupChild = this.matrices.find(m => m.getAttribute('data-job-id') === jobId)\n    if (!groupChild) {\n      groupChild = this.jobs.find(j => j.getAttribute('data-job-id') === jobId)\n    }\n    const groupId = groupChild?.getAttribute('data-group-id')\n    if (groupId) {\n      this.setDownstreamHighlightGroups(groupId)\n    }\n  }\n\n  private jobLeave() {\n    this.clearHighlightedGroups()\n  }\n\n  // Highlight all groups downstream of the given node\n  private setDownstreamHighlightGroups(id: string) {\n    this.allHighlightedGroupIds = [id]\n\n    this.visualGraph.classList.add(HIGHLIGHT_CLASS)\n\n    // Highlight the given element and its outgoing dependencies\n    this.toggleClasses(id, [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_OUT], true)\n\n    // Highlight connector lines between the set of highlighted groups\n    this.connectorLineHighlights.classList.add(HIGHLIGHT_CLASS)\n\n    if (!this.dependencies[id]) {\n      // No connections for this node, no need to highlight any connected nodes or lines\n      return\n    }\n\n    const downstreamGroups = new Set(this.getDownstreamIds(id, 0))\n\n    // Highlight all downstream groups\n    for (const g of downstreamGroups) {\n      this.toggleClasses(g, [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_IN, HIGHLIGHT_CLASS_OUT], true)\n    }\n\n    this.allHighlightedGroupIds = this.allHighlightedGroupIds.concat([...downstreamGroups])\n\n    for (const p of this.pathHighlights) {\n      const from = p.getAttribute('data-from')!\n      const to = p.getAttribute('data-to')!\n\n      // Highlight all connectors between the node and a downstream group OR between two downstream groups\n      if ((from === id || downstreamGroups.has(from)) && downstreamGroups.has(to)) {\n        p.classList.add(HIGHLIGHT_CLASS)\n      }\n    }\n  }\n\n  // Highlight groups immediately before or after the given node\n  private setHighlightedGroup(id: string) {\n    this.allHighlightedGroupIds = [id]\n\n    this.visualGraph.classList.add(HIGHLIGHT_CLASS)\n\n    // Highlight the given element and its dependencies\n    this.toggleClasses(id, [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_IN, HIGHLIGHT_CLASS_OUT], true)\n\n    // Highlight connector lines between the set of highlighted groups\n    this.connectorLineHighlights.classList.add(HIGHLIGHT_CLASS)\n\n    if (!this.dependencies[id]) {\n      // No connections for this node, no need to highlight any connected nodes or lines\n      return\n    }\n\n    for (const dep of this.dependencies[id]?.incoming ?? []) {\n      this.toggleClasses(dep, [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_IN], true)\n    }\n\n    for (const dep of this.dependencies[id]?.outgoing ?? []) {\n      this.toggleClasses(dep, [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_OUT], true)\n    }\n\n    const highlightGroups = new Set([id, ...this.dependencies[id].incoming, ...this.dependencies[id].outgoing])\n    this.allHighlightedGroupIds = [...highlightGroups]\n\n    for (const p of this.pathHighlights) {\n      const from = p.getAttribute('data-from')!\n      const to = p.getAttribute('data-to')!\n\n      // We want the highlighted node to be either the input or the output of this connector and the other\n      // end needs to be in the set of highlighted nodes.\n      if ((from === id || to === id) && (highlightGroups.has(from) || highlightGroups.has(to))) {\n        p.classList.add(HIGHLIGHT_CLASS)\n      }\n    }\n  }\n\n  private getDownstreamIds(id: string, depth: number) {\n    if (depth >= MAX_RECURSION_DEPTH) {\n      return []\n    }\n    let result: string[] = []\n\n    for (const d of this.dependencies[id]?.incoming ?? []) {\n      result.push(d)\n      result = result.concat(this.getDownstreamIds(d, depth + 1))\n    }\n\n    return result\n  }\n\n  private toggleClasses(id: string, classes: string[], force: boolean) {\n    const highlightedElement = document.getElementById(id)\n\n    if (!highlightedElement) {\n      return\n    }\n\n    for (const c of classes) {\n      highlightedElement.classList.toggle(c, force)\n    }\n  }\n\n  private clearHighlightedGroups() {\n    this.visualGraph.classList.remove(HIGHLIGHT_CLASS)\n\n    if (this.allHighlightedGroupIds.length === 0) {\n      return\n    }\n\n    const highlightClasses = [HIGHLIGHT_CLASS, HIGHLIGHT_CLASS_IN, HIGHLIGHT_CLASS_OUT]\n\n    for (const g of this.allHighlightedGroupIds) {\n      const element = document.getElementById(g)\n      if (element) {\n        for (const c of highlightClasses) {\n          element.classList.remove(c)\n        }\n      }\n    }\n\n    for (const p of this.pathHighlights) {\n      p.classList.remove(HIGHLIGHT_CLASS)\n    }\n\n    this.allHighlightedGroupIds = []\n  }\n\n  private drawLines() {\n    // Adjust size of lines svg\n    for (const connectorLines of this.connectorLines) {\n      connectorLines.setAttribute('width', `${this.stages.clientWidth}`)\n      connectorLines.setAttribute('height', `${this.stages.clientHeight}`)\n    }\n\n    // Pre-compute the lines and calculate the overall curve radius\n    let radius = DESIRED_CONNECTOR_RADIUS\n\n    this.dependencies = {}\n\n    const lines: Line[] = this.paths.reduce((linesAcc, p) => {\n      const from = this.getLineTarget(p.getAttribute('data-from'))\n      const to = this.getLineTarget(p.getAttribute('data-to'))\n      if (!from || !to) {\n        return linesAcc\n      }\n\n      const line: Line = {\n        path: p,\n        from,\n        to,\n        direction: this.getPathDirection(from, to),\n      }\n\n      if (line.direction !== '') {\n        const verticalDistanceHalf = Math.abs(from.rect.y - to.rect.y) / 2\n        radius = Math.min(radius, verticalDistanceHalf)\n      }\n\n      // Store dependency information (both directions)\n      for (const [origin, dest, direction] of [\n        [from.id, to.id, 'incoming'],\n        [to.id, from.id, 'outgoing'],\n      ] as Array<[string, string, keyof DependencyNode]>) {\n        if (!this.dependencies[origin]) {\n          this.dependencies[origin] = {\n            incoming: [],\n            outgoing: [],\n            [direction]: [dest],\n          }\n        } else {\n          this.dependencies[origin][direction].push(dest)\n        }\n      }\n\n      linesAcc.push(line)\n      return linesAcc\n    }, [] as Line[])\n\n    // Update the actual lines with the calculated radius\n    for (const line of lines) {\n      this.renderLine(line, radius)\n    }\n  }\n\n  private getLineTarget(id: string | null): LineTarget | undefined {\n    if (!id) {\n      return\n    }\n    const element = document.getElementById(id)\n    if (!element) {\n      return\n    }\n    const rect = this.getRect(element)\n\n    return {\n      id,\n      rect,\n      isGroup: !!element?.classList?.contains('WorkflowCard-group'),\n    }\n  }\n\n  private renderLine(line: Line, radius: number) {\n    const pathString = this.getPath(radius, line.from, line.to, line.direction)\n    line.path.setAttribute('d', pathString)\n  }\n\n  private getPathDirection(from: LineTarget, to: LineTarget): Direction {\n    const fromRect = from.rect\n    const toRect = to.rect\n\n    if (fromRect.y === toRect.y) {\n      return ''\n    }\n\n    if (fromRect.x < toRect.x) {\n      return fromRect.y > toRect.y ? 'up' : 'down'\n    }\n\n    return fromRect.y > toRect.y ? 'down' : 'up'\n  }\n\n  private getRect(el: HTMLElement): Rect {\n    let yAdjust = 23\n    if (el.classList && el.classList.contains('WorkflowCard-group')) {\n      yAdjust = 39 // This matches `top` in the SCSS\n    }\n\n    // Horizontal alignment\n    // There a different scenario here, we want to maintain a constant gap between stages/columns\n    // but the column width can be different depending on whether there are only groups, or\n    // only jobs, or both. So we determine the horizontal width marked with X in the following\n    // diagram:\n    // +------------+---+--------+\n    // |X+--------+ |   +--------+\n    // |X|  Job   | | G |  Job   |\n    // |X+--------+ | A +--------+\n    // |            | P |        |\n    // +------------+   |        |\n    // |   Group    |   |        |\n    // +------------+---+--------+\n\n    const offsetParent = el.parentElement!\n    const offsetX = el.offsetLeft - offsetParent.offsetLeft\n\n    return {\n      x: el.offsetLeft || 0,\n      y: yAdjust + (el.offsetTop || 0),\n      h: el.offsetHeight || 0,\n      w: el.offsetWidth || 0,\n      adjust: offsetX,\n    }\n  }\n\n  private getPath(radius: number, from: LineTarget, to: LineTarget, direction: Direction): string {\n    const xAdjust = to.rect.adjust\n    const fromRect = from.rect\n    const toRect = to.rect\n\n    if (fromRect.y === toRect.y) {\n      // Straight line\n      return `M ${fromRect.x + fromRect.w} ${fromRect.y} H ${toRect.x}`\n    } else if (direction === 'down') {\n      const startCurveX1 =\n        toRect.x -\n        DISTANCE_BETWEEN_CARDS / 2 - // half the distance between cards\n        radius -\n        xAdjust\n      const startCurveY1 = fromRect.y\n      const startCurveX2 = startCurveX1 + radius\n      const startCurveY2 = toRect.y - radius\n\n      return `\n      M ${fromRect.x + fromRect.w} ${fromRect.y}\n      H ${startCurveX1}\n      C ${startCurveX1 + radius / 2} ${startCurveY1} ${startCurveX1 + radius} ${startCurveY1 + radius / 2} ${\n        startCurveX1 + radius\n      } ${startCurveY1 + radius}\n      V ${startCurveY2}\n      C ${startCurveX2} ${startCurveY2 + radius / 2} ${startCurveX2 + radius / 2} ${startCurveY2 + radius} ${\n        startCurveX2 + radius\n      } ${startCurveY2 + radius}\n      H ${toRect.x}`\n    } else if (direction === 'up') {\n      const startCurveX1 =\n        toRect.x -\n        DISTANCE_BETWEEN_CARDS / 2 - // half the distance between cards\n        radius -\n        xAdjust\n      const startCurveY1 = fromRect.y\n      const startCurveX2 = startCurveX1 + radius\n      const startCurveY2 = toRect.y + radius\n\n      return `\n      M ${fromRect.x + fromRect.w} ${fromRect.y}\n      H ${startCurveX1}\n      C ${startCurveX1 + radius / 2} ${startCurveY1} ${startCurveX1 + radius} ${startCurveY1 - radius / 2} ${\n        startCurveX1 + radius\n      } ${startCurveY1 - radius}\n      V ${startCurveY2}\n      C ${startCurveX2} ${startCurveY2 - radius / 2} ${startCurveX2 + radius / 2} ${startCurveY2 - radius} ${\n        startCurveX2 + radius\n      } ${startCurveY2 - radius}\n      H ${toRect.x}`\n    }\n\n    return ''\n  }\n}\n","import type {SocketData} from './signalr-socket'\nimport {MessageType, SignalRSocket} from './signalr-socket'\nimport {attr, controller, target} from '@github/catalyst'\nimport {updateContent} from '@github-ui/updatable-content'\n\ninterface StepProgressUpdate {\n  runId: number\n  timelineId: string\n  parentRecordId: string\n  stepRecordId: string\n  stepNumber: number\n  changeId: number\n  stepCompleted: boolean\n}\n\ninterface StepUpdate {\n  workflowRunBackendId: string\n  workflowJobRunBackendId: string\n  stepId: string\n  stepNumber: number\n  changeOrder: number\n  status: number\n}\n\n@controller\nclass StreamingGraphJobElement extends HTMLElement {\n  @target name: HTMLElement\n  @target tooltip: HTMLElement\n  @target ellipsis: HTMLElement\n\n  @attr streamingUrl = ''\n  @attr shouldStream = false\n  @attr stepsFromResults = false\n  #abortController = new AbortController()\n  #streamingLogSocket = SignalRSocket.getInstance('WatchRunStepsProgressAsync')\n  #seenJobs = new Set()\n\n  #mutationObserver = new MutationObserver(() => {\n    this.showTooltip()\n  })\n\n  connectedCallback() {\n    this.#mutationObserver.observe(this, {attributes: true, childList: true, subtree: true})\n\n    const xhrConnectionUrl = this.streamingUrl\n    const {signal} = this.#abortController\n\n    if (this.stepsFromResults) {\n      this.addEventListener('socket:message', this.handleAliveEvent.bind(this))\n    }\n\n    if (!this.shouldStream || !xhrConnectionUrl || this.allRunsConcluded() || this.stepsFromResults) {\n      this.#abortController.abort()\n      this.#streamingLogSocket.closeExistingSocket()\n      return\n    }\n\n    this.#streamingLogSocket.startOrContinueStreaming(xhrConnectionUrl)\n    this.#streamingLogSocket.addEventListener(\n      'socketDidReceiveMessage',\n      event => {\n        if (!(event instanceof CustomEvent)) return\n\n        this.processSocketMessage(event.detail)\n      },\n      {signal},\n    )\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('socket:message', this.handleAliveEvent.bind(this))\n    this.#abortController.abort()\n    this.#mutationObserver.disconnect()\n  }\n\n  processSocketMessage(data: SocketData<StepProgressUpdate[][]>) {\n    if (data.type === MessageType.Ping) {\n      // ping message, we can safely ignore\n      return\n    }\n\n    if (data.target === 'stepProgressUpdates') {\n      for (const args of data.arguments) {\n        for (const stepUpdate of args) {\n          this.#seenJobs.add(stepUpdate.parentRecordId)\n        }\n      }\n    }\n\n    this.handleStepUpdated()\n  }\n\n  handleAliveEvent(event: Event) {\n    const aliveData = (event as CustomEvent)?.detail\n    if (!aliveData) return\n    const channel = aliveData.name?.split(':')?.[0]\n    switch (channel) {\n      case 'actions_results': {\n        const messageKind = aliveData.data.kind\n        if (messageKind === 1) {\n          // StepsUpdate\n          const stepUpdate = aliveData.data.data as StepUpdate[]\n          if (stepUpdate.length > 1 && !!stepUpdate[0]) {\n            this.#seenJobs.add(stepUpdate[0].workflowJobRunBackendId)\n            this.handleStepUpdated()\n          }\n        }\n        break\n      }\n      default:\n      // Do nothing if no other matches\n    }\n  }\n\n  handleStepUpdated() {\n    for (const jobID of [...this.#seenJobs]) {\n      const container = document.querySelector(`streaming-graph-job[data-external-id=\"${jobID}\"]`) as HTMLElement\n\n      if (container) {\n        // if the job doesn't have a container on the graph, we'll ignore for now.\n        // if the number of jobs changes, the action-graph parent element should\n        // live update from WS and re-render the graph\n\n        const isConcluded = container.getAttribute('data-concluded') === 'true'\n        const hasURL = !!container.getAttribute('data-url')\n        if (!isConcluded && hasURL) {\n          // only update the container if it's not concluded, sometimes the normal\n          // alive socket updates the job component before the socket msg comes\n          updateContent(container)\n        }\n      }\n    }\n  }\n\n  allRunsConcluded() {\n    return document.querySelectorAll(\"streaming-graph-job[data-concluded='false']\").length === 0\n  }\n\n  showTooltip() {\n    if (!this.tooltip) return // if no tooltips return early, will only occur while FF isn't fully rolled out\n    const isTruncated = this.name.scrollWidth > this.name.clientWidth\n    const hasEllipsis = this.ellipsis != null\n\n    if (isTruncated || hasEllipsis) {\n      this.tooltip.style.display = ''\n    } else {\n      this.tooltip.style.display = 'none'\n    }\n  }\n}\n","import {controller} from '@github/catalyst'\n\n@controller\nclass JobSummariesElement extends HTMLElement {\n  connectedCallback() {\n    // Event listener is placed on the document since we need to check for any click outside the targetted summary\n    document.addEventListener('click', this.checkForHashReset.bind(this))\n  }\n\n  disonnectedCallback() {\n    document.removeEventListener('click', this.checkForHashReset.bind(this))\n  }\n\n  /**\n   * Checks if the click was _outside_ the targetted summary, reset the hash and scroll\n   * Based on: https://github.com/github/github/blob/df25b4c8377d91e73274a8b625784a6ae7413f4a/app/assets/modules/github/behaviors/targetable-elements.ts#L23\n   */\n  checkForHashReset(event: MouseEvent) {\n    const targetElement = this.querySelector('job-summary:target')\n    if (!targetElement) return\n\n    if (!(event.target instanceof HTMLElement)) return\n    if (targetElement.contains(event.target)) return\n\n    const prevScrollHeight = window.scrollY\n\n    window.location.hash = ''\n    window.history.replaceState(null, '', window.location.pathname + window.location.search)\n\n    if (prevScrollHeight) {\n      window.scrollTo({top: prevScrollHeight})\n    }\n  }\n}\n","import {attr, controller, target} from '@github/catalyst'\nimport type {IncludeFragmentElement} from '@github/include-fragment-element'\n\n@controller\nclass JobSummaryElement extends HTMLElement {\n  @target fragment: IncludeFragmentElement | null\n  @target loadButton: HTMLButtonElement | null\n  @target retryButton: HTMLButtonElement | null\n  @target loader: HTMLDivElement | null\n  @target error: HTMLDivElement | null\n  @attr contentPath: string\n\n  connectedCallback() {\n    if (!this.isLoaded()) {\n      this.preloadIfPermalink()\n    }\n    if (this.fragment) {\n      this.fragment.addEventListener('error', this.handleFragmentError.bind(this))\n    }\n  }\n\n  isLoaded(): boolean {\n    return !this.fragment\n  }\n\n  /**\n   * Replace the fragment's `src` attribute with `data-content-path`, <include-fragment> will do the rest\n   */\n  loadSummary() {\n    if (!this.fragment) {\n      return\n    }\n\n    if (this.loadButton) {\n      this.loadButton.hidden = true\n    }\n\n    if (this.error) {\n      this.error.hidden = true\n    }\n\n    if (this.loader) {\n      this.loader.hidden = false\n    }\n\n    this.fragment.src = new URL(this.contentPath, window.location.origin).toString()\n  }\n\n  /**\n   * If the summary failed to load, remove the `src` attribute and force the fragment to reload\n   */\n  retrySummary() {\n    if (!this.fragment) {\n      return\n    }\n\n    this.fragment.src = ''\n    this.loadSummary()\n  }\n\n  /**\n   * When the <include-fragment> request fails (client side), hide the loader and show error element\n   * https://github.com/github/include-fragment-element#events\n   */\n  private handleFragmentError() {\n    if (this.loader) {\n      this.loader.hidden = true\n    }\n\n    if (this.error) {\n      this.error.hidden = false\n    }\n  }\n\n  /**\n   * Check if the window's hash is equal to the element's anchor (ie: `#summary-123`) and if so, preload the summary\n   */\n  private preloadIfPermalink() {\n    if (`#${this.id}` === window.location.hash) {\n      this.loadSummary()\n    }\n  }\n}\n","import {controller} from '@github/catalyst'\n\n@controller\nclass RunSummaryElement extends HTMLElement {\n  mouseEnterRerun(e: MouseEvent) {\n    const jobId = (e.target as HTMLElement).getAttribute('data-job-id')\n    if (jobId) {\n      this.dispatchEvent(new CustomEvent('run-sidebar-job-enter', {detail: {jobId}, bubbles: true}))\n    }\n  }\n\n  mouseLeaveRerun() {\n    this.dispatchEvent(new CustomEvent('run-sidebar-job-leave', {bubbles: true}))\n  }\n}\n","const CLOSE_ATTR = 'data-close-dialog';\nconst CLOSE_SELECTOR = `[${CLOSE_ATTR}]`;\nfunction autofocus(el) {\n    let autofocusElement = Array.from(el.querySelectorAll('[autofocus]')).filter(focusable)[0];\n    if (!autofocusElement) {\n        autofocusElement = el;\n        el.setAttribute('tabindex', '-1');\n    }\n    autofocusElement.focus();\n}\nfunction keydown(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    if (event.key === 'Escape' || event.key === 'Esc') {\n        toggleDetails(details, false);\n        event.stopPropagation();\n    }\n    else if (event.key === 'Tab') {\n        restrictTabBehavior(event);\n    }\n}\nfunction focusable(el) {\n    return el.tabIndex >= 0 && !el.disabled && visible(el);\n}\nfunction visible(el) {\n    return (!el.hidden &&\n        (!el.type || el.type !== 'hidden') &&\n        (el.offsetWidth > 0 || el.offsetHeight > 0));\n}\nfunction restrictTabBehavior(event) {\n    if (!(event.currentTarget instanceof Element))\n        return;\n    const dialog = event.currentTarget.querySelector('details-dialog');\n    if (!dialog)\n        return;\n    event.preventDefault();\n    const elements = Array.from(dialog.querySelectorAll('*')).filter(focusable);\n    if (elements.length === 0)\n        return;\n    const movement = event.shiftKey ? -1 : 1;\n    const root = dialog.getRootNode();\n    const currentFocus = dialog.contains(root.activeElement) ? root.activeElement : null;\n    let targetIndex = movement === -1 ? -1 : 0;\n    if (currentFocus instanceof HTMLElement) {\n        const currentIndex = elements.indexOf(currentFocus);\n        if (currentIndex !== -1) {\n            targetIndex = currentIndex + movement;\n        }\n    }\n    if (targetIndex < 0) {\n        targetIndex = elements.length - 1;\n    }\n    else {\n        targetIndex = targetIndex % elements.length;\n    }\n    elements[targetIndex].focus();\n}\nfunction allowClosingDialog(details) {\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return true;\n    return dialog.dispatchEvent(new CustomEvent('details-dialog-close', {\n        bubbles: true,\n        cancelable: true\n    }));\n}\nfunction onSummaryClick(event) {\n    if (!(event.currentTarget instanceof Element))\n        return;\n    const details = event.currentTarget.closest('details');\n    if (!details || !details.hasAttribute('open'))\n        return;\n    if (!allowClosingDialog(details)) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n}\nfunction toggle(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return;\n    if (details.hasAttribute('open')) {\n        const root = 'getRootNode' in dialog ? dialog.getRootNode() : document;\n        if (root.activeElement instanceof HTMLElement) {\n            initialized.set(dialog, { details, activeElement: root.activeElement });\n        }\n        autofocus(dialog);\n        details.addEventListener('keydown', keydown);\n    }\n    else {\n        for (const form of dialog.querySelectorAll('form')) {\n            form.reset();\n        }\n        const focusElement = findFocusElement(details, dialog);\n        if (focusElement)\n            focusElement.focus();\n        details.removeEventListener('keydown', keydown);\n    }\n}\nfunction findFocusElement(details, dialog) {\n    const state = initialized.get(dialog);\n    if (state && state.activeElement instanceof HTMLElement) {\n        return state.activeElement;\n    }\n    else {\n        return details.querySelector('summary');\n    }\n}\nfunction toggleDetails(details, open) {\n    if (open === details.hasAttribute('open'))\n        return;\n    if (open) {\n        details.setAttribute('open', '');\n    }\n    else if (allowClosingDialog(details)) {\n        details.removeAttribute('open');\n    }\n}\nfunction loadIncludeFragment(event) {\n    const details = event.currentTarget;\n    if (!(details instanceof Element))\n        return;\n    const dialog = details.querySelector('details-dialog');\n    if (!(dialog instanceof DetailsDialogElement))\n        return;\n    const loader = dialog.querySelector('include-fragment:not([src])');\n    if (!loader)\n        return;\n    const src = dialog.src;\n    if (src === null)\n        return;\n    loader.addEventListener('loadend', () => {\n        if (details.hasAttribute('open'))\n            autofocus(dialog);\n    });\n    loader.setAttribute('src', src);\n    removeIncludeFragmentEventListeners(details);\n}\nfunction updateIncludeFragmentEventListeners(details, src, preload) {\n    removeIncludeFragmentEventListeners(details);\n    if (src) {\n        details.addEventListener('toggle', loadIncludeFragment, { once: true });\n    }\n    if (src && preload) {\n        details.addEventListener('mouseover', loadIncludeFragment, { once: true });\n    }\n}\nfunction removeIncludeFragmentEventListeners(details) {\n    details.removeEventListener('toggle', loadIncludeFragment);\n    details.removeEventListener('mouseover', loadIncludeFragment);\n}\nconst initialized = new WeakMap();\nclass DetailsDialogElement extends HTMLElement {\n    static get CLOSE_ATTR() {\n        return CLOSE_ATTR;\n    }\n    static get CLOSE_SELECTOR() {\n        return CLOSE_SELECTOR;\n    }\n    constructor() {\n        super();\n        initialized.set(this, { details: null, activeElement: null });\n        this.addEventListener('click', function ({ target }) {\n            if (!(target instanceof Element))\n                return;\n            const details = target.closest('details');\n            if (details && target.closest(CLOSE_SELECTOR)) {\n                toggleDetails(details, false);\n            }\n        });\n    }\n    get src() {\n        return this.getAttribute('src');\n    }\n    set src(value) {\n        this.setAttribute('src', value || '');\n    }\n    get preload() {\n        return this.hasAttribute('preload');\n    }\n    set preload(value) {\n        value ? this.setAttribute('preload', '') : this.removeAttribute('preload');\n    }\n    connectedCallback() {\n        this.setAttribute('role', 'dialog');\n        this.setAttribute('aria-modal', 'true');\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const details = this.parentElement;\n        if (!details)\n            return;\n        const summary = details.querySelector('summary');\n        if (summary) {\n            if (!summary.hasAttribute('role'))\n                summary.setAttribute('role', 'button');\n            summary.addEventListener('click', onSummaryClick, { capture: true });\n        }\n        details.addEventListener('toggle', toggle);\n        state.details = details;\n        updateIncludeFragmentEventListeners(details, this.src, this.preload);\n    }\n    disconnectedCallback() {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        details.removeEventListener('toggle', toggle);\n        removeIncludeFragmentEventListeners(details);\n        const summary = details.querySelector('summary');\n        if (summary) {\n            summary.removeEventListener('click', onSummaryClick, { capture: true });\n        }\n        state.details = null;\n    }\n    toggle(open) {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        toggleDetails(details, open);\n    }\n    static get observedAttributes() {\n        return ['src', 'preload'];\n    }\n    attributeChangedCallback() {\n        const state = initialized.get(this);\n        if (!state)\n            return;\n        const { details } = state;\n        if (!details)\n            return;\n        updateIncludeFragmentEventListeners(details, this.src, this.preload);\n    }\n}\nexport default DetailsDialogElement;\nif (!window.customElements.get('details-dialog')) {\n    window.DetailsDialogElement = DetailsDialogElement;\n    window.customElements.define('details-dialog', DetailsDialogElement);\n}\n"],"names":["preserveAnchorNodePosition","document","callback","preservePosition","findAnchorNode","activeElement","body","hoverElements","querySelectorAll","len","length","anchorNode","node","Promise","resolve","documentElement","ownerDocument","origBoundingRects","computeAncestorBoundingRects","element","rects","_element$getBoundingC","getBoundingClientRect","top","left","push","parentElement","then","result","origBoundingRect","firstAttachedBoundingRect","i","rect","contains","origTop","origLeft","_node$getBoundingClie","cumulativeScrollBy","x","y","window","defaultView","scrollOffsets","offsetParent","scrollTop","scrollLeft","pageYOffset","pageXOffset","overflowParent","el","_window$getComputedSt","getComputedStyle","position","overflowY","overflowX","container","cumulativeX","cumulativeY","scrolled","scrollBy","origScroll","scrollTo","newScroll","fetchJson","url","response","fetch","credentials","headers","Accept","ok","json","MessageType","SignalRSocket","EventTarget","getInstance","target","instances","has","set","get","socketDidReceiveMessage","socket","message","data","JSON","parse","split","RECORD_SEPARATOR","dispatchEvent","CustomEvent","detail","type","close","socketDidOpen","handshake","socketDidClose","socketDidFinish","globalSocket","shouldTryAgainWithNewSocket","setTimeout","startOrContinueStreaming","xhrConnectionUrl","Math","floor","random","JITTER_MAX_MILLISECONDS","JITTER_MIN_MILLISECONDS","socketShouldRetry","code","ABNORMAL_CLOSURE","isFatalStatusCode","retryingAbnormalClosure","isStreaming","tryStartNewStream","closeExistingSocket","onStreamFailure","reconnectWindow","socketUrl","retrieveSocketURL","StableSocket","timeout","attempts","open","e","searchParams","URL","location","origin","tenantId","runId","sendPayload","protocol","version","targetPayload","arguments","POLICY_VIOLATION","payload","send","stringify","constructor","xhrUrl","authResult","authenticatedUrl","wsResult","logStreamWebSocketUrl","String","Map","AnnotationMessageElement","HTMLElement","connectedCallback","annotationTextComponent","annotationContainer","firstElementChild","initalizeEventListeners","attributeChangedCallback","expanded","displayShowLessButton","classList","replace","displayShowMoreButton","toggleExpansion","calculateOverflow","isEllipsisPresent","isEllipsisActive","wrapped","isAnnotationWrapped","hideBothButtons","setButtonHiddenProperties","isShowLessHidden","isShowMoreHidden","showLessButton","hidden","showMoreButton","ResizeObserver","observe","addEventListener","offsetWidth","scrollWidth","lineHeight","parsedLineHeight","parseInt","scrollHeight","observedAttributes","attr","controller","on","event","button","closest","hiddenEnvironments","querySelector","shownEnvironments","add","remove","checkbox","dialog","rejectButton","approveButton","countDisplay","checked","invalid","disabled","textContent","toString","parentLabel","MouseDriver","setupListener","up","move","graph","down","click","capture","handleWheel","passive","updateCursor","dragging","canvas","abs","dragStartX","pageX","dragStartY","pageY","preventDefault","stopPropagation","lastPoint","dx","dy","dragMove","oldZoom","getCurrentZoom","setNormalizedZoom","deltaY","setFitToWindowBtnEnabled","moveZoomOffset","stopImmediatePropagation","box","visualGraph","ratio","distanceX","clientX","distanceY","clientY","KeyDriver","moveBothX","moveBothY","handled","key","HIGHLIGHT_CLASS","HIGHLIGHT_CLASS_IN","HIGHLIGHT_CLASS_OUT","ActionGraphElement","jobEnter","jobLeave","loaded","drawLines","fitToWindow","style","opacity","cancelEvent","updateJob","job","updateContent","expandMatrix","getAttribute","matrix","setAttribute","currentZoom","round","parseFloat","transform","enabled","zoomFit","zoom","newZoom","minZoom","MAX_ZOOM","setZoom","in","zoomOut","ZOOM_INCREMENT","out","zoomIn","fit","setZoomInBtnDisabled","setZoomOutBtnDisabled","stages","applyTransformation","canvasWidth","clientWidth","canvasHeight","clientHeight","min","mouseEnter","setHighlightedGroup","id","mouseLeave","clearHighlightedGroups","jobId","groupChild","matrices","find","m","jobs","j","groupId","setDownstreamHighlightGroups","allHighlightedGroupIds","toggleClasses","connectorLineHighlights","dependencies","downstreamGroups","Set","getDownstreamIds","g","p","concat","pathHighlights","from","to","dep","incoming","outgoing","highlightGroups","depth","d","classes","force","highlightedElement","getElementById","c","toggle","highlightClasses","connectorLines","radius","line","paths","reduce","linesAcc","getLineTarget","path","direction","getPathDirection","verticalDistanceHalf","dest","renderLine","getRect","isGroup","pathString","getPath","fromRect","toRect","yAdjust","offsetX","offsetLeft","offsetTop","h","offsetHeight","w","adjust","xAdjust","startCurveX1","DISTANCE_BETWEEN_CARDS","startCurveY1","startCurveX2","startCurveY2","targets","StreamingGraphJobElement","mutationObserver","attributes","childList","subtree","streamingUrl","signal","abortController","stepsFromResults","handleAliveEvent","bind","shouldStream","allRunsConcluded","abort","streamingLogSocket","processSocketMessage","disconnectedCallback","removeEventListener","disconnect","Ping","args","stepUpdate","seenJobs","parentRecordId","handleStepUpdated","aliveData","name","messageKind","kind","workflowJobRunBackendId","jobID","isConcluded","hasURL","showTooltip","tooltip","isTruncated","hasEllipsis","ellipsis","display","AbortController","MutationObserver","JobSummariesElement","checkForHashReset","disonnectedCallback","targetElement","prevScrollHeight","scrollY","hash","history","replaceState","pathname","search","JobSummaryElement","isLoaded","preloadIfPermalink","fragment","handleFragmentError","loadSummary","loadButton","error","loader","src","contentPath","retrySummary","RunSummaryElement","mouseEnterRerun","bubbles","mouseLeaveRerun","CLOSE_ATTR","CLOSE_SELECTOR","autofocus","autofocusElement","Array","filter","focusable","focus","keydown","details","currentTarget","Element","toggleDetails","restrictTabBehavior","elements","movement","shiftKey","root","getRootNode","currentFocus","targetIndex","currentIndex","indexOf","tabIndex","allowClosingDialog","DetailsDialogElement","cancelable","onSummaryClick","hasAttribute","initialized","form","reset","focusElement","findFocusElement","state","removeAttribute","loadIncludeFragment","removeIncludeFragmentEventListeners","updateIncludeFragmentEventListeners","preload","once","WeakMap","value","summary","customElements","define"],"sourceRoot":""}