{"version":3,"file":"chunk-app_components_billing_settings_upgrade_manage-subscription-element_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/@github/mini-throttle/dist/decorators.js","node_modules/@github/mini-throttle/dist/index.js","app/components/billing/settings/upgrade/manage-subscription-element.ts"],"sourcesContent":["import { debounce as db, throttle as th } from './index';\nexport function throttle(wait = 0, opts = {}) {\n    return (proto, name, descriptor) => {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new Error('debounce can only decorate functions');\n        }\n        const fn = descriptor.value;\n        descriptor.value = th(fn, wait, opts);\n        Object.defineProperty(proto, name, descriptor);\n    };\n}\nexport function debounce(wait = 0, opts = {}) {\n    return (proto, name, descriptor) => {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new Error('debounce can only decorate functions');\n        }\n        const fn = descriptor.value;\n        descriptor.value = db(fn, wait, opts);\n        Object.defineProperty(proto, name, descriptor);\n    };\n}\n","export function throttle(callback, wait = 0, { start = true, middle = true, once = false } = {}) {\n    let innerStart = start;\n    let last = 0;\n    let timer;\n    let cancelled = false;\n    function fn(...args) {\n        if (cancelled)\n            return;\n        const delta = Date.now() - last;\n        last = Date.now();\n        if (start && middle && delta >= wait) {\n            innerStart = true;\n        }\n        if (innerStart) {\n            innerStart = false;\n            callback.apply(this, args);\n            if (once)\n                fn.cancel();\n        }\n        else if ((middle && delta < wait) || !middle) {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                last = Date.now();\n                callback.apply(this, args);\n                if (once)\n                    fn.cancel();\n            }, !middle ? wait : wait - delta);\n        }\n    }\n    fn.cancel = () => {\n        clearTimeout(timer);\n        cancelled = true;\n    };\n    return fn;\n}\nexport function debounce(callback, wait = 0, { start = false, middle = false, once = false } = {}) {\n    return throttle(callback, wait, { start, middle, once });\n}\n","import {controller, target} from '@github/catalyst'\nimport {debounce} from '@github/mini-throttle/decorators'\n\n@controller\nexport class ManageSubscriptionElement extends HTMLElement {\n  @target view_mode_container: HTMLElement\n  @target edit_mode_container: HTMLElement\n  @target seats: HTMLInputElement\n  @target add_seats: HTMLElement\n  @target remove_seats: HTMLElement\n  @target min_error: HTMLElement\n  @target max_error: HTMLElement\n  @target current_seats: HTMLElement\n\n  // Target elements that re-render when we update the seats input field\n  @target current_price: HTMLElement\n  @target payment_increase_container: HTMLElement\n  @target payment_increase: HTMLElement\n  @target payment_decrease_container: HTMLElement\n  @target payment_decrease: HTMLElement\n  @target payment_due: HTMLElement\n  @target payment_due_notice: HTMLElement\n  @target sales_tax_notice: HTMLElement\n\n  #priceAbortController: AbortController | null = null\n\n  async fetchAndUpdateCalculatedPrice(seats: number | string = this.seats.value) {\n    this.#priceAbortController?.abort()\n\n    const {signal} = (this.#priceAbortController = new AbortController())\n\n    const url = `${this.getAttribute('data-price-url')}?seats=${seats}`\n    const response = await fetch(url, {\n      signal,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'application/json',\n      },\n    })\n    if (!response.ok) {\n      return\n    }\n    const prices = await response.json()\n    const updateKeys = [\n      'current_price',\n      'payment_increase',\n      'payment_decrease',\n      'payment_due',\n      'payment_due_notice',\n      'sales_tax_notice',\n    ]\n    for (const key of updateKeys) {\n      const element = this[key as keyof HTMLElement]\n      const value = prices[key as keyof string]\n      if (element && value) {\n        this.replaceTextNode(element as HTMLElement, value)\n      }\n    }\n    this.payment_increase_container.hidden = prices.payment_increase === null\n    this.payment_decrease_container.hidden = prices.payment_decrease === null\n\n    if (signal.aborted) {\n      return\n    }\n  }\n\n  replaceTextNode(element: HTMLElement, text: string) {\n    element.replaceChildren(document.createTextNode(text))\n  }\n\n  @debounce(200)\n  debouncedUpdatePrice() {\n    this.fetchAndUpdateCalculatedPrice()\n  }\n\n  async validateAndUpdatePrice() {\n    this.replaceWithValidSeats()\n    await this.fetchAndUpdateCalculatedPrice()\n  }\n\n  validateSeats(seats: string): [clampedSeats: string, hasMinError: boolean, hasMaxError: boolean] {\n    const value = Number(seats)\n    const minimumSeats = Number(this.seats.min)\n    const maximumSeats = Number(this.seats.max)\n    if (!value || value < minimumSeats) {\n      return [minimumSeats.toString(), true, false]\n    } else if (value > maximumSeats) {\n      return [maximumSeats.toString(), false, true]\n    } else {\n      return [seats, false, false]\n    }\n  }\n\n  replaceWithValidSeats(seats = this.seats.value) {\n    const [clampedSeats, hasMinError, hasMaxError] = this.validateSeats(seats)\n    this.seats.value = clampedSeats\n    this.min_error.hidden = !hasMinError\n    this.max_error.hidden = !hasMaxError\n    this.current_seats.hidden = hasMinError || hasMaxError\n  }\n\n  async addSeats() {\n    const seats = Math.max(0, Number(this.seats.value) + 1)\n    this.replaceWithValidSeats(seats.toString())\n    await this.fetchAndUpdateCalculatedPrice()\n  }\n\n  async removeSeats() {\n    const seats = Math.max(0, Number(this.seats.value) - 1)\n    this.replaceWithValidSeats(seats.toString())\n    await this.fetchAndUpdateCalculatedPrice()\n  }\n\n  enterEditMode() {\n    this.view_mode_container.hidden = true\n    this.edit_mode_container.hidden = false\n  }\n\n  enterViewMode() {\n    this.view_mode_container.hidden = false\n    this.edit_mode_container.hidden = true\n  }\n}\n"],"names":["debounce","wait","opts","proto","name","descriptor","value","fn","Object","defineProperty","throttle","callback","start","middle","once","timer","innerStart","last","cancelled","args","delta","Date","now","apply","cancel","clearTimeout","setTimeout","ManageSubscriptionElement","HTMLElement","fetchAndUpdateCalculatedPrice","seats","priceAbortController","abort","signal","AbortController","url","getAttribute","response","fetch","headers","Accept","ok","prices","json","key","element","replaceTextNode","payment_increase_container","hidden","payment_increase","payment_decrease_container","payment_decrease","aborted","text","replaceChildren","document","createTextNode","debouncedUpdatePrice","validateAndUpdatePrice","replaceWithValidSeats","validateSeats","Number","minimumSeats","min","maximumSeats","max","toString","clampedSeats","hasMinError","hasMaxError","min_error","max_error","current_seats","addSeats","Math","removeSeats","enterEditMode","view_mode_container","edit_mode_container","enterViewMode","target","controller"],"sourceRoot":""}