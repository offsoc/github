<%# erblint:counter DeprecatedComponentsCounter 1 %>
<%= form_tag(
  achievement_visibility_path(current_user, achievement.achievable_slug),
  method: current_hidden_status_form_method,
) do %>
  <%= render Primer::ButtonComponent.new(
    id: "achievement-detail-visibility-#{achievement.achievable_slug}-#{achievement.id}",
    border_radius: 3, classes: "achievement-detail-close Box-btn-octicon btn-octicon",
    bg: :emphasis,
    color: :on_emphasis,
    position: :absolute,
    top: 0,
    left: 0,
    m: 2,
    p: 0,
    type: :submit,
    test_selector: [
      "achievement",
      "detail",
      "visibility",
      achievement.achievable_slug,
      achievement.id,
      current_hidden_status_form_method,
    ].join("-"),
  ) do %>
    <%= primer_octicon(icon: current_hidden_status_icon, color: :on_emphasis, m: 0) %>
    <%= render Primer::Alpha::Tooltip.new(
      for_id: "achievement-detail-visibility-#{achievement.achievable_slug}-#{achievement.id}",
      type: :description,
      text: current_hidden_status_text,
      direction: :se,
    ) %>
  <% end %>
<% end %>
