syntax = "proto3";
package git_hub.launch.pbtypes.launch;

option go_package = "github.com/github/launch/services/pbtypes/launchtypes";

import "pbtypes/github.proto";

message ExecutionPlan {
    enum NodeType {
        NODETYPE_UNKNOWN = 0;
        NODETYPE_WORKFLOW = 1;
        NODETYPE_ACTION = 2;
    }
    message Node {
        // The flow or task identifier
        Identity id = 1;
        reserved 2; // was 'string type'
        int64 depth = 3;
        NodeType type = 4;
    }
    // Edge represents a connection between two nodes
    message Edge {
        Identity from = 1;
        Identity to = 2;
    }
    // The flow identifier for the start of the execution plan
    Identity flowStart = 1;
    // A collection of nodes that are referenced in the execution plan
    repeated Node nodes = 2;
    // A collection of edges that connect the nodes referenced in the execution plan
    repeated Edge edges = 3;
}

// Identifier represents a unique flow or task
message Identity {
    string name = 1;
}

message WorkflowBuildDetails {
    string event = 1;
    ExecutionPlan plan = 2;
}
