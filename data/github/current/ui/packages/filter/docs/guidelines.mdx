import { Meta, Story } from '@storybook/blocks';

<Meta title="Recipes/Filter/Documentation/Guidelines" />

# Guidelines

## üß† Anatomy

The filter component consists of a filter input and a filter button. The filter button, when clicked, opens the advanced filter dialog for a more approachable filtering experience.

![
'Advanced filters' dialog with dropdowns for 'Author', 'Organization', 'Comments', 'Created', and 'Text', and a 'Filter by author' sub-menu open with multiple author names and checkboxes.](https://github.com/primer/design/assets/980622/c7d4fd94-b082-4bf5-a3f7-ec8bdda35849)

The advanced filter dialog, accessible via the filter button, offers a simplified visual representation of our filter syntax. This empowers users to understand the nuances of our filter system without having to consult our documentation.

![](https://github.com/primer/design/assets/980622/7c7000ba-ed17-4a21-a1cf-c3962fade289)

## üóÇÔ∏è Variants

The filter component offers versatility, as it can function independently as a filter button, an input field, or a combination of both. This flexibility accommodates various layout needs.
We highly recommend utilizing the full option whenever possible to keep familiarity throughout different experiences.

![An advanced filter dialog with a select panel placed over it. The filter dialog demonstrates multiple chained "Where" and "And" qualifiers. The select panel shows UI that allows a user to filter by author.](https://github.com/primer/design/assets/980622/db435317-3aba-491e-8caf-c74837b0de89)

## üì´ Submission

There are several methods for submitting the filter query, and the choice often relies on its context or technical constraints.

<table>
  <tr>
    <td>**Submission**</td>
    <td>**Description**</td>
    <td>**Prop**</td>
    <td>**Example**</td>
  </tr>

  <tr>
    <td>Explicit (recommended)</td>
    <td>Submits when you press `Enter` inside the input or click the submit button. A submit button is added after the input.</td>
    <td>`onSubmit`</td>
    <td>[View](?path=/story/recipes-filter-examples--default)</td>
  </tr>

  <tr>
    <td>Automatic</td>
    <td>Submits as you type each letter or apply a suggestion. It's advisable to wrap the callback in a debounce method to avoid overloading servers with rapid consecutive inputs</td>
    <td>`onChange`</td>
    <td>[View](?path=/story/recipes-filter-examples--no-on-submit)</td>
  </tr>

  <tr>
    <td>Form</td>
    <td>Data is submitted only when the entire form is submitted.</td>
    <td>None. Enclose it within a `Form` instead.</td>
    <td>[View](?path=/story/recipes-filter-examples--form)</td>
  </tr>
</table>

## üîÑ Loading suggestions

When you need information like users, labels, or repositories, our component has to talk to our API. Sometimes, this API can be a bit slow to answer.

This means the user might have to wait a bit before they see new suggestions pop up on your screen. If it takes longer than usual to get your information, we show a skeleton loader.
This is just a way of letting the user know that our system is still working on getting data.

![Filter component with an active query 'label: bug commenter:' in the input; a suggestions dropdown with grey shimmering placeholders.](https://github.com/primer/design/assets/980622/a6f18bc6-3e02-4bef-87d7-964ca593e4ac)

## üî§ Freeform text

When you use a variant that includes the freeform text filter input, any text searches you do are processed by the `text` provider. This lets you filter for any words or phrases you want in the advanced filter dialog too.

The `text` provider can search through all the content you're showing. So, if your list/table has lots of metadata, we suggest that the search should bring up every row where the value you're looking for appears in any applicable metadata content.

Also, it's a good idea to have extra providers for searching specific metadata. Let's say your table has columns named `Full name` and `City`.
The `text` provider should search both these columns. But you can also set up two more providers, `fullname` and `city`, each designed to search only in their respective columns.

![Filter input with value 'my text' and the advanced filter dialog showing a rule with qualifier 'text', operator 'is' and value 'my text'.](https://github.com/primer/design/assets/980622/62382863-88d2-463f-8bf5-491510bcb876)

## Revert

If the filter input comes with pre-filled information when the user first arrives on the page, they might want to alter it later. If the user can't undo their changes using the sidebar ([a feature we're considering adding in the future](https://github.com/github/design-infrastructure/discussions/2949)), then we should [include a link that allows the user to return to the original filter settings](?path=/story/recipes-filter-examples--with-revert).

![Search interface with label:high typed into query box and option to revert filter changes](https://github.com/primer/design/assets/980622/0e8bda10-e329-4cf1-b175-d9ffd672da56)

## ü´µ Dos and Don'ts

### Simple

Although the filter input is an excellent tool for complex filtering, for simpler or single-filter tasks, it's advisable to use a [select panel](https://primer.style/components/selectpanel) instead and avoid this component entirely.

![](https://github.com/primer/design/assets/980622/8e1347e6-2244-41fd-9925-92427653c428)

### Width

Since just a handful of filters can occupy considerable space in the input field, it's essential to utilize the full width and avoid restricting it.

![](https://github.com/primer/design/assets/980622/58cdbaec-2251-4056-b461-1eb0038b2d81)
