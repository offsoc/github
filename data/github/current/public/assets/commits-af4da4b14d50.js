"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["commits","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{15570:(e,t,n)=>{n.d(t,{A:()=>i});let i={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3"}},58323:(e,t,n)=>{n.d(t,{A:()=>i});let i={visibilityHidden:"DiffFindPopover-module__visibilityHidden--HCMWu",visibilityVisible:"DiffFindPopover-module__visibilityVisible--AknNV",defaultStyles:"DiffFindPopover-module__defaultStyles--IjqxB",stickyStyles:"DiffFindPopover-module__stickyStyles--oNP5J",notStickyStyles:"DiffFindPopover-module__notStickyStyles--_E6rW"}},50156:(e,t,n)=>{n.d(t,{A:()=>i});let i={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",visibilityVisible:"DiffHighlightedOverlay-module__visibilityVisible--zJWJ5",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"}},98576:(e,t,n)=>{n.d(t,{A:()=>i});let i={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ"}},66924:(e,t,n)=>{n.d(t,{A:()=>i});let i={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_"}},23421:(e,t,n)=>{n.d(t,{A:()=>i});let i={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"}},20767:(e,t,n)=>{n.d(t,{A:()=>i});let i={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"}},91160:(e,t,n)=>{n.d(t,{M:()=>i});function i(e){if(null==e)throw Error("Failed to load page data.")}},62353:(e,t,n)=>{n.d(t,{V3:()=>d,_y:()=>o,wk:()=>s});var i=n(95140),r=n(92836);let a={cursorNavigationHopWordLeft:{hotkey:"Alt+ArrowLeft,Ctrl+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationHopWordRight:{hotkey:"Alt+ArrowRight,Ctrl+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationTopOfPage:{hotkey:"Meta+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationBottomOfPage:{hotkey:"Meta+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationEnd:{hotkey:"End,Meta+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"]},cursorNavigationHome:{hotkey:"Home,Meta+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"]},cursorNavigationPageUp:{hotkey:"PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"]},cursorNavigationPageDown:{hotkey:"PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"]},cursorNavigationArrowDown:{hotkey:"ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"]},cursorNavigationArrowUp:{hotkey:"ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"]},cursorNavigationArrowLeft:{hotkey:"ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"]},cursorNavigationArrowRight:{hotkey:"ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"]},cursorNavigationShiftHopWordLeft:{hotkey:"Alt+Shift+ArrowLeft,Ctrl+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftHopWordRight:{hotkey:"Alt+Shift+ArrowRight,Ctrl+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationShiftTopOfPage:{hotkey:"Meta+Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftBottomOfPage:{hotkey:"Meta+Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftEnd:{hotkey:"Shift+End,Meta+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"],modifierRequired:!0},cursorNavigationShiftHome:{hotkey:"Shift+Home,Meta+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"],modifierRequired:!0},cursorNavigationShiftPageUp:{hotkey:"Shift+PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"],modifierRequired:!0},cursorNavigationShiftPageDown:{hotkey:"Shift+PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"],modifierRequired:!0},cursorNavigationShiftArrowDown:{hotkey:"Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftArrowUp:{hotkey:"Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftArrowLeft:{hotkey:"Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftArrowRight:{hotkey:"Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationHighlightLine:{text:"J",hotkey:"Shift+J",useWhileBlobFocused:!0,noModifierHotkey:["J"],modifierRequired:!0},cursorNavigationGoLineUp:{hotkey:"Ctrl+p",useWhileBlobFocused:!0,noModifierHotkey:["p"],modifierRequired:!0},cursorNavigationOpenHelpDialog:{hotkey:"Alt+F1,Control+Alt+\u02D9,Control+Alt+h",useWhileBlobFocused:!0,noModifierHotkey:["F1","h","\u02D9"],modifierRequired:!0},cursorNavigationGoLineDown:{hotkey:"Ctrl+n",useWhileBlobFocused:!0,noModifierHotkey:["n"],modifierRequired:!0},cursorNavigationEnter:{text:"\u2318 Enter",hotkey:"Meta+Enter",useWhileBlobFocused:!0,noModifierHotkey:["Enter"],modifierRequired:!0},cursorNavigationSpace:{hotkey:" ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!1},cursorNavigationShiftSpace:{hotkey:"Shift+ ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!0},expandAndFocusLineContextMenu:{text:"Shift Alt C",hotkey:"Alt+Shift+C,Alt+Shift+\xc7",useWhileBlobFocused:!0,noModifierHotkey:["C"],modifierRequired:!0},copyFilePathShortcut:{text:"\u2318 shift .",hotkey:"Meta+Shift+>",useWhileBlobFocused:!0,noModifierHotkey:["."],modifierRequired:!0},copyPermalinkShortcut:{text:"\u2318 shift ,",hotkey:"Meta+Shift+<",useWhileBlobFocused:!0,noModifierHotkey:[","],modifierRequired:!0},copyRawContentShortcut:{text:"\u2318 shift c",hotkey:"Meta+Shift+C",useWhileBlobFocused:!0,noModifierHotkey:["c"],modifierRequired:!0},downloadRawContentShortcut:{text:"\u2318 shift s",hotkey:"Meta+Shift+S",useWhileBlobFocused:!0,noModifierHotkey:["s"],modifierRequired:!0},editFileShortcut:{hotkey:"e,Shift+E",useWhileBlobFocused:!0,noModifierHotkey:["e","E"]},goToLineShortcut:{text:"l",hotkey:"l,Shift+L",ariaKeyShortcuts:"l",useWhileBlobFocused:!0,noModifierHotkey:["l","L"]},alternativeGoToLineShortcut:{hotkey:"Mod+Alt+g",ariaKeyShortcuts:"Mod+Alt+g",useWhileBlobFocused:!0,noModifierHotkey:["g","G"]},findInFileShortcut:{hotkey:"Meta+f, F3",text:"\u2318 f",ariaKeyShortcuts:"Meta+F",useWhileBlobFocused:!0,noModifierHotkey:["f","F3"],modifierRequired:!0},findFilesShortcut:{hotkey:"t,Shift+T",useWhileBlobFocused:!0,noModifierHotkey:["t","T"]},findSelectionShortcut:{hotkey:"Meta+e",useWhileBlobFocused:!0,noModifierHotkey:["e"],modifierRequired:!0},findNextShortcut:{hotkey:"Mod+g"},findPrevShortcut:{hotkey:"Mod+Shift+G"},openWithGitHubDevShortcut:{hotkey:"., Meta+Shift+/",useWhileBlobFocused:!0,noModifierHotkey:["."]},openWithGitHubDevInNewWindowShortcut:{hotkey:"Shift+.,Shift+>,>",useWhileBlobFocused:!0,noModifierHotkey:[">"]},permalinkShortcut:{hotkey:"y,Shift+Y",useWhileBlobFocused:!0,noModifierHotkey:["y","Y"]},searchShortcut:{hotkey:"/",useWhileBlobFocused:!0,noModifierHotkey:["/"]},selectAllShortcut:{hotkey:"Meta+a",useWhileBlobFocused:!0,noModifierHotkey:["a"],modifierRequired:!0},selectEditTabShortcut:{hotkey:"Mod+Shift+P"},submitCommitDialogShortcut:{hotkey:"Mod+Enter"},refSelectorShortcut:{hotkey:"w",text:"w",useWhileBlobFocused:!0,noModifierHotkey:["w"]},escapeRightClickMenu:{hotkey:"Escape",useWhileBlobFocused:!0,noModifierHotkey:["Escape"]},toggleFocusedPaneShortcut:{hotkey:"Meta+F6,Meta+Shift+F6",useWhileBlobFocused:!0,noModifierHotkey:["F6"],modifierRequired:!0},toggleSymbolsShortcut:{hotkey:"Meta+i",useWhileBlobFocused:!0,noModifierHotkey:["i"],modifierRequired:!0},toggleTreeShortcut:{hotkey:"Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"],modifierRequired:!0},viewBlameShortcut:{hotkey:"b,Shift+B,Meta+/ Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"]},viewCodeShortcut:{hotkey:"Meta+/ Meta+c",useWhileBlobFocused:!0,modifierRequired:!0},viewPreviewShortcut:{hotkey:"Meta+/ Meta+p"},viewRawContentShortcut:{text:"\u2318 / \u2318 r",hotkey:"Meta+/ Meta+r",useWhileBlobFocused:!0,noModifierHotkey:["r"],modifierRequired:!0},findSymbolShortcut:{hotkey:"r,Shift+R",useWhileBlobFocused:!0,noModifierHotkey:["r","R"],modifierRequired:!1}},l=new Map;function s(){let e=(0,r.X)(["mac"]),[t]=(0,i.I)(()=>!1,!0,[]),n=0;if(e?n=1:t||(n=2),!l.has(n)){var s,o;let i=a;e||t||(i=Object.keys(s=i).reduce((e,t)=>{let n=s[t];return e[t]={hotkey:n.hotkey?.replace(/Meta/g,"Control"),text:n.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:n.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:n.useWhileBlobFocused,modifierRequired:n.modifierRequired,noModifierHotkey:n.noModifierHotkey},e},{})),t&&(i=Object.keys(o=i).reduce((e,t)=>{let n=o[t];return e[t]={hotkey:void 0,text:n.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:n.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:n.useWhileBlobFocused,modifierRequired:n.modifierRequired,noModifierHotkey:n.noModifierHotkey},e},{})),l.set(n,i)}return l.get(n)}function o(){let e=s();return Object.keys(e).reduce((t,n)=>{let i=e[n];if(i.useWhileBlobFocused&&i.noModifierHotkey&&i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}function d(){let e=s();return Object.keys(e).reduce((t,n)=>{let i=e[n];if(i.useWhileBlobFocused&&i.noModifierHotkey&&!i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}},37363:(e,t,n)=>{n.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){try{this.worker=new Worker(e)}catch(e){console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){this.job=e,this.terminated=!1}}},76391:(e,t,n)=>{n.d(t,{N:()=>DebouncedWorkerManager});let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if(this.debounceOverrideCondition&&this.debounceOverrideCondition(e))return this.delayId&&clearTimeout(this.delayId),this.postNow(e);this.idle()?(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.postNow(e)},this.delayMs)):this.nextRequest=e}postNow(e){this.currentRequest=e,this.worker.postMessage(e)}idle(){return!this.currentRequest}terminate(){this.worker.terminate()}constructor(e,t=200,n){this.worker=e,this.delayMs=t,this.debounceOverrideCondition=n,this.currentRequest=void 0,this.nextRequest=void 0,this.worker.onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),this.nextRequest?(this.postNow(this.nextRequest),this.nextRequest=void 0):this.currentRequest=void 0}}}},33938:(e,t,n)=>{var i,r=n(86233),a=n(79840),l=n(9449),s=n(89504),o=n(86584),d=n(82897),c=n(55293);function u(e){let t=(0,d.B)(),[n]=(0,c.useState)(t?.repo),[i]=(0,c.useState)(t?.currentUser);return(0,l.jsx)(o.Q,{user:i,children:(0,l.jsx)(s.d,{repository:n,children:e.children})})}try{u.displayName||(u.displayName="App")}catch{}var f=n(36220),h=n(76515),m=n(88234),p=n(83056),g=n(83028),x=n(97156),y=n(90600),b=n(95140),v=n(69144),j=n(93653),C=n(18312),N=n(84116),w=n(56226),k=n(15820),L=n(22084),S=n(13894),D=n(92979),I=n(59857),A=n(85053),_=n(86519),E=n(55847),R=n(80577),T=n(83808),F=n(87213),M=n(47373),O=n(94034),P=n(11732),H=n(29367),B=n(15941),$=n(7512),U=n(30729),W=n(94153);function V({data:e}){let t=(0,s.t)();return e.loading||0!==e.branches.length?(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-wrap fgColor-muted border-bottom p-3 gap-1",children:[(0,l.jsx)(U.A,{className:"mr-1",icon:I.GitBranchIcon}),e.loading?(0,l.jsx)(D.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,l.jsxs)("div",{children:[(0,l.jsx)(z,{branch:n,repo:t}),i!==e.branches.length-1?(0,l.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null}function z({branch:e,repo:t}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.A,{className:"mx-1",href:(0,p.WJ)({owner:t.ownerLogin,repo:t.name,branch:e.branch}),children:e.branch}),e.prs.length>0?(0,l.jsxs)(l.Fragment,{children:["(",e.prs.map((t,n)=>(0,l.jsxs)(c.Fragment,{children:[(0,l.jsx)(q,{pullRequest:t}),n!==e.prs.length-1?(0,l.jsx)(l.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})}function q({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,r=i?`${t.ownerLogin}/${t.name}`:"";return(0,l.jsxs)(_.A,{href:(0,p.oD)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,p.i9)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[r,"#",n]})}try{V.displayName||(V.displayName="CommitBranchInfo")}catch{}try{z.displayName||(z.displayName="BranchFragment")}catch{}try{q.displayName||(q.displayName="PullRequestLink")}catch{}var G=n(87330),K=n(17909),X=n(86079);function Q({data:e}){let t=(0,s.t)();if(0===e.tags.length)return null;let n=e.tags.length>2&&e.tags.length<25,i=e.tags.length>=25;return(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-wrap border-bottom p-3 gap-1",children:[(0,l.jsx)(U.A,{className:"mr-2",icon:I.TagIcon}),(0,l.jsx)(_.A,{href:(0,p.cp)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),n?(0,l.jsx)(Y,{tags:e.tags,repo:t}):null,i?(0,l.jsx)(J,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,l.jsx)(_.A,{href:(0,p.cp)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})}function Y({tags:e,repo:t}){let[n,i]=(0,c.useState)(!1),r=(0,c.useRef)(null),a=(0,c.useCallback)(()=>{i(!0),requestAnimationFrame(()=>r.current?.focus())},[]);return n?(0,l.jsx)(l.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,l.jsx)(_.A,{ref:0===n?r:null,href:(0,p.cp)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,l.jsx)(G.K,{"aria-label":"Show more tags",unsafeDisableTooltip:!0,icon:I.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:a})}function J({tags:e,repo:t}){let[n,i]=(0,c.useState)(!1),r=(0,c.useRef)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.K,{"aria-label":"Show all tags",unsafeDisableTooltip:!0,icon:I.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:r}),n&&(0,l.jsx)(X.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:r,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,l.jsx)(K.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,l.jsx)(K.l.LinkItem,{href:(0,p.cp)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{Q.displayName||(Q.displayName="CommitTagInfo")}catch{}try{Y.displayName||(Y.displayName="ExpandedTags")}catch{}try{J.displayName||(J.displayName="CommitTagsDialog")}catch{}var Z=n(65481);function ee(){return(0,l.jsxs)(Z.A,{variant:"warning",className:"mb-4",children:[(0,l.jsx)(U.A,{icon:I.AlertIcon,className:"mr-2"}),(0,l.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{ee.displayName||(ee.displayName="SpoofedCommitWarningBanner")}catch{}var et=n(75177),en=n(1719);function ei({oid:e,repo:t}){return(0,en.N)(e,t.id)?(0,l.jsxs)(Z.A,{className:"mb-4",children:[(0,l.jsx)(et.A,{as:"img",src:"/images/modules/commit/flowers@2x.png",alt:"flower image",className:"mr-4 mt-1 float-left",sx:{width:"88px",height:"49px"}}),(0,l.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,l.jsx)("p",{children:"We will miss you."})]}):null}try{ei.displayName||(ei.displayName="WeirichCommitBanner")}catch{}let er={badgeLabel:"Alpha",feedbackLink:"https://github-grid.enterprise.slack.com/archives/C0357UQ03KN"},ea={badgeLabel:"Beta",feedbackLink:"https://gh.io/diff-refresh-feedback"};function el({commit:e,commitInfo:t}){let{feedbackLink:n,badgeLabel:i}=(0,k.u)("diff_ux_refresh_beta")?ea:er,r=(0,s.t)(),{helpUrl:a}=(0,T.D)(),o=(0,F.I)(`${(0,p.$Q)({owner:r.ownerLogin,repo:r.name,commitish:e.oid})}/deferred_commit_data`),d="";try{d=o?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,l.jsxs)("div",{children:[t.loading||0!==t.branches.length?null:(0,l.jsx)(ee,{}),(0,l.jsx)(ei,{oid:e.oid,repo:r}),(0,l.jsxs)($.Z,{children:[(0,l.jsxs)("div",{className:"d-flex flex-column bgColor-muted p-3 border-bottom rounded-top-2",children:[(0,l.jsxs)("div",{className:"d-flex flex-justify-end flex-md-justify-between flex-column-reverse flex-md-row gap-2",children:[(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-wrap gap-2",children:[(0,l.jsx)(L.yx,{html:e.shortMessageMarkdown,className:"markdown-title f4 text-semibold"}),(0,l.jsx)(O.d,{oid:e.oid,status:o?.statusCheckStatus?.state,descriptionString:d,repo:r})]}),(0,l.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-justify-between flex-md-justify-end",children:[(0,l.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,l.jsx)(A.A,{className:"v-align-middle",variant:"success",children:i}),(0,l.jsx)(_.A,{href:n,target:"_blank",rel:"noopener noreferrer",className:"no-wrap",children:"Give feedback"})]}),(0,l.jsx)(R.m,{text:"Browse the repository at this point in the history",children:(0,l.jsx)(E.Q,{as:_.A,href:(0,p.IO)({repo:r,action:"tree",commitish:e.oid}),leadingVisual:I.FileCodeIcon,children:"Browse files"})})]})]}),e.bodyMessageHtml&&(0,l.jsx)(L.yx,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pt-2 f6 fgColor-muted wb-break-word text-mono"})]}),(0,l.jsx)(V,{data:t}),(0,l.jsx)(Q,{data:t}),(0,l.jsxs)("div",{className:"d-flex flex-justify-between p-3 gap-2 flex-column flex-md-row",children:[(0,l.jsx)(P.j,{commit:e,repo:r,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},children:o?o.signatureInformation?(0,l.jsx)("div",{className:"pl-2",children:(0,l.jsx)(S.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:o.verifiedStatus,signature:{helpUrl:a,...o.signatureInformation}})}):null:(0,l.jsx)(D.O,{className:"ml-2",variant:"rounded",width:H._e})}),(0,l.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,t)=>(0,l.jsxs)(c.Fragment,{children:[0!==t?" + ":"",(0,l.jsx)(_.A,{to:(0,p.$Q)({owner:r.ownerLogin,repo:r.name,commitish:e})+new URL(x.fV.origin+x.fV.pathname+x.fV.search,x.fV.origin).search,as:w.N,className:"color-fg-default Link--inTextBlock","data-hovercard-url":(0,p.fQ)({owner:r.ownerLogin,repo:r.name,commitish:e}),children:(0,M.F)(e)})]},e))," commit ",(0,l.jsx)("span",{className:"fgColor-default",children:(0,M.F)(e.oid)}),(0,l.jsx)(B.w,{sha:e.oid,direction:"sw"})]})]})]})]})}try{el.displayName||(el.displayName="CommitInfo")}catch{}var es=n(56628),eo=n(94407);function ed({unavailableReason:e,commit:t,commitInfo:n}){let i=ec[e];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(es.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:[(0,l.jsx)("h1",{className:"sr-only",children:t.shortMessage}),(0,l.jsx)(el,{commit:t,commitInfo:n})]}),(0,l.jsxs)(eo.A,{children:[(0,l.jsx)(eo.A.Visual,{children:i.visual}),(0,l.jsx)(eo.A.Heading,{children:i.heading}),(0,l.jsx)(eo.A.Description,{children:i.description}),i.secondaryAction]})]})}let ec={corrupt:{visual:(0,l.jsx)(I.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,l.jsx)(eo.A.SecondaryAction,{href:(0,p.y2)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,l.jsx)(I.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,l.jsx)(eo.A.SecondaryAction,{href:(0,p.y2)(),children:"Please contact support for more information"})},timeout:{visual:(0,l.jsx)(I.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,l.jsx)(I.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{ed.displayName||(ed.displayName="CommitUnavailable")}catch{}var eu=n(62353),ef=n(67726),eh=n(73627),em=n(41631),ep=n(35822),eg=n(27788),ex=n(84928);let ey="/users/diffview",eb=(0,c.createContext)({hideWhitespace:!1,splitPreference:"split",updateHideWhitespace:()=>{},updateSplitPreference:()=>{}});function ev({viewSettings:e,children:t}){let n=(0,eg.Z)(),i=function(e){let t=e,[n]=(0,eg.o)(),i=n.get("diff");return("split"===i||"unified"===i)&&(t=i),t}(e.splitPreference),r=function(e){let t=e,[n]=(0,eg.o)(),i=n.get("w");return"1"===i?t=!0:"0"===i&&(t=!1),t}(e.hideWhitespace),[a,s]=(0,c.useState)(i),[o,d]=(0,c.useState)(r),u=function(){let e=(0,ex.W)(`${ey}?diff=split`,"post"),t=(0,ex.W)(`${ey}?diff=unified`,"post");return async function(n){"split"===n?await e():"unified"===n&&await t()}}(),f=(0,c.useCallback)(e=>{(function(e,t){let n=new URL(window.location.href,window.location.origin);if(t){let i=encodeURIComponent(t);n.searchParams.set(e,i)}else n.searchParams.delete(e);window.history.replaceState({path:n.toString()},"",n.toString())})("diff",e),s(e),u(e)},[u]),h=(0,c.useCallback)(e=>{d(e),n(`${window.location.pathname}?w=${e?"1":"0"}`)},[n]),m=(0,c.useMemo)(()=>({hideWhitespace:o,splitPreference:a,updateHideWhitespace:h,updateSplitPreference:f}),[o,a,h,f]);return(0,l.jsx)(eb.Provider,{value:m,children:t})}function ej(){return(0,c.useContext)(eb)}try{eb.displayName||(eb.displayName="DiffViewSettingsContext")}catch{}try{ev.displayName||(ev.displayName="DiffViewSettingsProvider")}catch{}var eC=n(28784);let eN={extraDiffEntries:[],loading:!0,error:!1};var ew=n(48058);function ek(e){if(!e)return"";let t=e.lastIndexOf(".");return!t||t<0?ew.F7:`.${e.substring(t+1)}`}let eL=(e,t=0)=>`calc(${e}px + ${t}px)`,eS={position:"sticky",zIndex:1,backgroundColor:"canvas.default","&::before":{bg:"canvas.default",content:'""',position:"absolute",display:"block",height:"100%",width:"calc(100% + 30px)",ml:"-14px",mr:-3}};var eD=n(30792),eI=n(65568),eA=n(6256),e_=n(71878),eE=n(20594);async function eR(e,t,n){let i=await (0,eC.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function eT({repo:e,sha1:t,sha2:n,entry:i}){let r=await (0,eC.Sr)((0,eE.RD)((0,p.ux)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n})));if(r.ok){let e=await r.json();return(0,eE.Av)(e),e.diffLines}}var eF=n(81602),eM=n(281);function eO({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:r}){return(0,l.jsxs)(eM.W,{children:[(0,l.jsx)(eM.W.Anchor,{children:(0,l.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,l.jsx)(I.KebabHorizontalIcon,{})})}),(0,l.jsx)(eM.W.Overlay,{children:(0,l.jsxs)(K.l,{children:[(0,l.jsxs)(K.l.LinkItem,{href:(0,p.nD)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,l.jsx)(K.l.LeadingVisual,{children:(0,l.jsx)(I.EyeIcon,{})}),"View file"]}),(0,l.jsxs)(K.l.Item,{inactiveText:"Action unavailable",children:[(0,l.jsx)(K.l.LeadingVisual,{children:(0,l.jsx)(I.PencilIcon,{})}),"Edit file"]}),(0,l.jsxs)(K.l.Item,{inactiveText:"Action unavailable",children:[(0,l.jsx)(K.l.LeadingVisual,{children:(0,l.jsx)(I.TrashIcon,{})}),"Delete file"]}),r&&(0,l.jsx)(eF.$,{...r})]})})]})}try{eO.displayName||(eO.displayName="BlobActionsMenu")}catch{}let eP=(0,c.memo)(function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:r}){let{loaded:a,richDiffData:o}=function(e,t,n,i){let r=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,a=(0,s.t)(),[l,o]=(0,c.useState)(r),[d,u]=(0,c.useState)(t),f=(0,c.useCallback)(async()=>{let t=await (0,eC.lS)(`${(0,p.$Q)({owner:a.ownerLogin,repo:a.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&u(await t.json()),o(!0)},[e,n,a]);return(0,c.useEffect)(()=>{r||f()},[r,f]),{loaded:l,richDiffData:d}}(e,{proseDiffHtml:n,fileRendererInfo:i},t,r);return(0,l.jsx)(f.Uz,{dependencyDiffPath:r,fileRendererInfo:o.fileRendererInfo,loading:!a,proseDiffHtml:o.proseDiffHtml})});try{eP.displayName||(eP.displayName="CommitRichDiff")}catch{}let eH={isInMergeQueue:!1,state:"OPEN"},eB=c.memo(c.forwardRef(e$));function e$({prId:e,diffMatches:t,focusedSearchResult:n,diffEntryData:i,splitPreference:r,contextLinePathURL:a,recalcTotalHeightOfVirtualWindow:s,helpUrl:u,headerStickyOffset:h=0,repo:m,oid:p,index:g,ignoreWhitespace:x,virtualizerScrollTo:y},b){let v=(0,o.i)(),j=function(){let e=(0,d.B)(),{commit:t,commentInfo:n}=e,i=(0,e_.I)({commit:t,repo:e.repo,viewerCanReply:n.canComment}),{addComment:r,deleteComment:a,editComment:l,hideComment:s,unhideComment:o}=(0,eA.X)(),{findInlineComment:u}=(0,eI.B)(),f=(0,c.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:a})=>{let[l,s]=a.id.split("::");if(!l||!s){n(Error("Invalid threadId"));return}r(i,e,s).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))})},[r]),h=(0,c.useCallback)(({text:e,diffLine:t,filePath:n,onCompleted:i,onError:a})=>{t&&t.position&&r(e,n,t.position.toString()).then(e=>{if(e.comment){let r=e.comment.id,a=`${n}::${t.position}`;i?.(a,r)}else a?.(Error("Failed to add comment"))})},[r]),m=(0,c.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let r=u(e.id);if(!r){i(Error("Comment not found"));return}l(t,{id:r.id,bodyVersion:r.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))})},[l,u]),p=(0,c.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=u(e);if(!i){n?.(Error("Comment not found"));return}a(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))})},[a,u]),g=(0,c.useCallback)(({commentId:e,reason:t,onCompleted:n,onError:i})=>{let r=u(e);if(!r){i?.(Error("Comment not found"));return}s(r.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))})},[u,s]),x=(0,c.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=u(e);if(!i){n?.(Error("Comment not found"));return}o(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))})},[u,o]);return(0,c.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,lazyFetchEditHistory:!0,addThread:h,addThreadReply:f,deleteComment:p,editComment:m,pendingSuggestedChangesBatch:[],submitSuggestedChanges:ef.l,addSuggestedChangeToPendingBatch:ef.l,removeSuggestedChangeFromPendingBatch:ef.l,addFileLevelThread:ef.l,resolveThread:ef.l,unresolveThread:ef.l,hideComment:g,unhideComment:x,fetchThread:i,commentBoxConfig:{pasteUrlsAsPlainText:!1,useMonospaceFont:!1}}),[h,f,p,m,i,g,x])}(),C=(0,c.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:ef.l,incrementActiveMarker:ef.l,onActivateGlobalMarkerNavigation:ef.l}),[]),N=(0,d.B)().commentInfo,{getThreadDataByPathAndPosition:w}=(0,eI.B)(),[k,L]=(0,c.useState)(eU(i.current[g],w)),S=(0,c.useCallback)(e=>{L(eU(e,w))},[w]),[D,I]=(0,c.useState)(k.collapsed),[A,_]=(0,c.useState)(k.defaultToRichDiff),[E,R]=(0,c.useState)(k.diffManuallyExpanded),T=(0,c.useRef)(!1),{fetchInjectedContextLines:F,fetchDiffLines:M}={fetchInjectedContextLines:eR,fetchDiffLines:eT},O=(0,c.useRef)([]),P=(0,c.useCallback)(async e=>{O.current.push(e);let t=await F(O.current,a,k.pathDigest);if(void 0!==t){let e={...k};e.diffLines=t.diffEntryWithContext,S(e),i.current[g]=e,s()}},[a,i,k,g]),H=async()=>{O.current=[],T.current||((k.newTreeEntry?.lineCount??0)<5e3?O.current.push({start:1,end:Math.max(k.oldTreeEntry?.lineCount??0,k.newTreeEntry?.lineCount??0)}):O.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],r=e[t+1<e.length?t+1:e.length-1],a=i?.blobLineNumber,l=r?.blobLineNumber;a&&l&&(n.push({start:a,end:a+40}),n.push({start:Math.max(l-40,1),end:l}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(k.diffLines,k.newTreeEntry?.lineCount??0)),T.current=!T.current;let e=await F(O.current,a,k.pathDigest);if(void 0!==e){let t={...k};t.diffLines=e.diffEntryWithContext,S(t),i.current[g]=t,s()}},B=(0,c.useCallback)(async()=>{if(0===k.diffLines.length){let e=await M({repo:m,sha1:k.oldOid,sha2:k.newOid,entry:k.diffNumber.toString()});if(!e)return;let t={...k};t.diffLines=e,S(t),i.current[g]=t}k.diffManuallyExpanded=!0,i.current[g].diffManuallyExpanded=!0,R(!0),s(),requestAnimationFrame(()=>{y?.(g,{align:"center"})})},[i,k,g,s]);(0,c.useEffect)(()=>{S(i.current[g]),O.current=[]},[x,g,i,p,m.name,m.ownerLogin,k.path,S]);let $=(0,c.useMemo)(()=>{if(T.current||(i.current[g]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=i.current[g]?.diffLines?.length||0,t=i.current[g]?.diffLines?.[e-1]?.blobLineNumber||0,n=i.current[g]?.newTreeEntry?.lineCount||0;return t<n||e-1<n},[i.current[g]?.diffLines,i.current[g]?.newTreeEntry?.lineCount,g,i]),U=(0,c.useMemo)(()=>({avatarUrl:v?.avatarURL??"",diffViewPreference:r,isSiteAdmin:!1,login:v?.login??"",tabSizePreference:v?.tabSize??8,viewerCanComment:N.canComment,viewerCanApplySuggestion:!1}),[r,v?.avatarURL,v,v?.login,v?.tabSize]),W=(0,c.useMemo)(()=>{if(e&&k.copilotChatReferenceData)return{referenceData:k.copilotChatReferenceData,queryVariables:{pullRequestId:e,startOid:k.oldOid,endOid:k.newOid}}},[k,e]);return(0,l.jsxs)("div",{className:"position-relative",ref:b,children:[(0,l.jsx)(et.A,{sx:{...eS,top:[eL(56,h),eL(64,h)]},children:(0,l.jsx)(eD.B,{areLinesExpanded:T.current,canExpandOrCollapseLines:$,defaultToRichDiff:k.defaultToRichDiff,fileLinkHref:`#diff-${k.pathDigest}`,isCollapsed:D,canToggleRichDiff:k.canToggleRichDiff,linesAdded:k.linesAdded,linesDeleted:k.linesDeleted,newMode:k.newTreeEntry?.mode,newPath:k.newTreeEntry?.path,oldMode:k.oldTreeEntry?.mode,oldPath:k.oldTreeEntry?.path,patchStatus:k.status,path:k.path,onToggleExpandAllLines:H,onToggleFileCollapsed:()=>{k.collapsed=!D,i.current[g].collapsed=!D,I(!D)},onToggleDiffDisplay:e=>_(e),rightSideContent:(0,l.jsx)(eO,{oid:"REMOVED"===k.status&&k.deletedSha?k.deletedSha:p,path:k.path,repo:m,isViewable:!k.isSubmodule,copilotDiffChatProps:W})})}),D?null:(0,l.jsx)("div",{className:"border position-relative rounded-bottom-2",children:A?(0,l.jsx)(eP,{commitOid:p,path:k.path,proseDiffHtml:k.proseDifffHtml,fileRendererInfo:k.renderInfo,dependencyDiffPath:k.dependencyDiffPath}):(0,l.jsx)(f.T5,{diffContext:"commit",copilotChatReferenceData:e?k.copilotChatReferenceData:void 0,searchResults:t,focusedSearchResult:n,diffEntryData:k,baseHelpUrl:u,commentingEnabled:!0,commentBatchPending:!1,repositoryId:m.id.toString(),subject:eH,subjectId:e?.toString()??"",viewerData:U,newCommitOid:k.newOid,oldCommitOid:k.oldOid,addInjectedContextLines:P,commentingImplementation:j,markerNavigationImplementation:C,diffLinesManuallyUnhidden:E,onHandleLoadDiff:B})})]})}function eU(e,t){for(let n of e.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{eB.displayName||(eB.displayName="Diff")}catch{}try{e$.displayName||(e$.displayName="DiffUnmemoized")}catch{}let eW=c.memo(eV);function eV(){return(0,l.jsx)("div",{className:"pt-3",children:(0,l.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,l.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,l.jsx)(D.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,l.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,l.jsx)(D.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(D.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(D.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(D.O,{height:"sm",variant:"rounded",width:"random"})]})]})})}try{eW.displayName||(eW.displayName="LoadingContentBlock")}catch{}try{eV.displayName||(eV.displayName="LoadingContentBlockUnmemoized")}catch{}function ez({diffEntryData:e,contextLinePathURL:t,selectedPathDigest:n,unselectedFileExtensions:i,repo:r,oid:a,ignoreWhitespace:s,commitInfo:o,searchTerm:u,setSearchTerm:m,isStickied:g}){let b=ej(),v=(0,d.B)(),j=(0,c.useCallback)(()=>N({}),[]),[C,N]=(0,c.useState)({}),w=(0,c.useRef)(e),{findInDiffWorkerPath:k}=(0,T.D)(),L=(0,c.useRef)(e),S=(0,c.useRef)(e.length>40),D=(0,c.useRef)(null),[I,A]=(0,c.useState)(s),_=(0,c.useRef)(0),[E,R]=(0,c.useState)(a),{diffFindOpen:F,setDiffFindOpen:M}=(0,f.K_)(),{findInFileShortcut:O}=(0,eu.wk)(),P=(0,c.useRef)(null),{focusedSearchResult:H,setFocusedSearchResult:B,searchResults:$,currentIndex:U,setCurrentIndex:W}=(0,f.xB)(w.current,u,k,C);function V(){M(!0);let e=window.getSelection()?.toString();e&&m(e),F&&P?.current?.focus()}(0,c.useEffect)(()=>{i&&i.size>0?w.current=L.current.filter(e=>!i.has(ek(e.path))):w.current=L.current,S.current=w.current.length>40,j()},[i?.size]),(0,c.useEffect)(()=>{w.current=e,L.current=e,S.current=w.current.length>40,j(),A(s),R(a)},[v.path]);let z=(0,eh.X)(),q=(0,p.gq)({owner:v.repo.ownerLogin,repo:v.repo.name,commitish:v.commit.oid}),G=function(e,t,n,i,r,a){let[l,s]=(0,c.useState)(eN),o=(0,c.useRef)([]),d=(0,c.useRef)(n);return(0,c.useEffect)(()=>{if(!i||!r)return;let a=!1,l=async(e,t,n)=>{s(eN);let r=await (0,eC.lS)(`${i}?start_entry=${e}&bytes=${t}&lines=${n}`);if(!a)try{if(r.ok){let e=await r.json();e&&(e.loading=e.loadMore,o.current=o.current.concat(e.extraDiffEntries),e.extraDiffEntries=o.current,e.loadMore&&d.current!==e.asyncDiffLoadInfo.startIndex?(d.current=e.asyncDiffLoadInfo.startIndex,s(e),setTimeout(()=>l(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(d.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,s(e)))}else s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}catch(e){s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}};return l(n,e,t),function(){a=!0}},[e,t,r,n,i,a]),(0,c.useEffect)(()=>{o.current=[],d.current=n},[i,n,a]),l}(v.asyncDiffLoadInfo.byteCount,v.asyncDiffLoadInfo.lineShownCount,v.asyncDiffLoadInfo.startIndex,q,v.moreDiffsToLoad,s);(0,c.useEffect)(()=>{let e=w.current.concat(G.extraDiffEntries);i&&i.size>0?w.current=e.filter(e=>!i.has(ek(e.path))):w.current=e,L.current=e,S.current=w.current.length>40,j()},[G.extraDiffEntries.length]);let K=(0,c.useRef)(null),X=(0,em.h)({parentRef:K,size:w.current.length,estimateSize:(0,c.useCallback)(e=>{var t;let n;return t=w.current[e],n=67,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&(n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n)},[w.current.length,C]),useVirtualImpl:em.Y,rangeExtractor(e){let t=x.fV.hash.substring(1),n=(0,h.pd)(t),i=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),r=w.current.findIndex(e=>e.pathDigest===i),a=w.current.findIndex(e=>n?.endsWith(e.pathDigest));return r<0&&a<0?(0,ep.v)(e):Array.from(new Set([...(0,ep.v)(e),...[r,a].filter(e=>e>-1)])).sort((e,t)=>e-t)}});return(0,c.useEffect)(()=>{let e=n.includes("R"),t=n.includes("L"),i=t||e,r=i?t?n.split("L")[0]:n.split("R")[0]:n,a=eq(r??n,w.current);if(-1===a){if(G.error&&null!==D){let e=D.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(S.current)X.scrollToIndex(a,{align:"center"}),requestAnimationFrame(()=>{if(i&&eG(K,n));else{let e=K.current?.querySelectorAll(`[aria-label="collapse file: ${w.current[a]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(i&&eG(K,n));else{let e=K.current?.querySelectorAll(`[data-diff-anchor=diff-${r}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(x.cg?.scrollY??0)-67-60;x.cg?.scrollTo(0,t);let n=K.current?.querySelectorAll(`[aria-label="collapse file: ${w.current[a]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[n,G]),(0,l.jsxs)("div",{"data-hpc":!0,ref:K,children:[!S.current&&w.current.map((e,n)=>(0,l.jsx)("div",{style:{paddingTop:0===n?0:16,left:3,right:3},children:(0,l.jsx)(eB,{prId:o?.branches[0]?.prs[0]?.globalRelayId,diffEntryData:w,index:n,splitPreference:b.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:ef.l,repo:r,helpUrl:z.helpUrl,oid:E,ignoreWhitespace:I})},e.pathDigest)),S.current&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.ak,{commands:{"commit-diff-view:open-find":V}}),(0,l.jsx)("button",{hidden:!0,"data-hotkey":O.hotkey,onClick:V}),F&&(0,l.jsx)(f.qj,{inputContainer:P,currentPathDigestIndex:_,stickied:g,searchTerm:u,focusedSearchResult:H,currentIndex:U,setCurrentIndex:W,setFocusedSearchResult:B,setSearchTerm:m,searchResults:$,scrollDiffCellIntoView:e=>{let t=eq(e?.pathDigest??"",w.current);-1!==t&&(X.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{(function(e,t){let n=x.XC?.getElementById(`match-${t}-${e}`);n&&n.scrollIntoView({block:"center"})})(e?.indexWithinDigest??0,e?.pathDigest??"")}))},onClose:()=>{M(!1)}}),(0,l.jsx)("div",{style:{height:X.totalSize,width:"100%",position:"relative"},children:X.virtualItems.map(e=>{let n,i;let a=w.current[e.index];return($.has(a?.pathDigest??"")&&(n=$.get(a?.pathDigest??"")??[]),H&&a?.pathDigest===H?.pathDigest&&(i=H?.indexWithinDigest??-1),a)?(0,l.jsx)("div",{ref:e.measureRef,"data-key":e.key,style:{position:"absolute",paddingTop:0===e.index?0:16,left:3,right:3,transform:`translateY(${e.start}px)`},children:(0,l.jsx)(eB,{prId:o?.branches[0]?.prs[0]?.globalRelayId,diffMatches:n,focusedSearchResult:i,diffEntryData:w,index:e.index,splitPreference:b.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:j,headerStickyOffset:-e.start,helpUrl:z.helpUrl,repo:r,oid:E,ignoreWhitespace:I,virtualizerScrollTo:X.scrollToIndex})},a.pathDigest):null})})]}),v.moreDiffsToLoad&&(0,l.jsxs)(l.Fragment,{children:[G.loading&&(0,l.jsx)(eW,{}),G.error&&(0,l.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:D,children:(0,l.jsx)(Z.A,{variant:"danger",tabIndex:0,children:(0,l.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function eq(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function eG(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{ez.displayName||(ez.displayName="Diffs")}catch{}var eK=n(73729),eX=n(69909);function eQ(){let{splitPreference:e,updateSplitPreference:t}=ej();return(0,l.jsxs)(K.l.Group,{selectionVariant:"single",children:[(0,l.jsx)(K.l.GroupHeading,{children:"Layout"}),(0,l.jsx)(K.l.Item,{selected:"unified"===e,onSelect:()=>t("unified"),children:"Unified"}),(0,l.jsx)(K.l.Item,{selected:"split"===e,onSelect:()=>t("split"),children:"Split"})]})}try{eQ.displayName||(eQ.displayName="DiffViewPreferenceToggle")}catch{}function eY(){let{hideWhitespace:e,updateHideWhitespace:t}=ej();return(0,l.jsxs)(K.l.Group,{selectionVariant:"single",variant:"subtle",children:[(0,l.jsx)(K.l.GroupHeading,{children:"Whitespace"}),(0,l.jsx)(K.l.Item,{selected:e,onSelect:()=>t(!e),children:"Hide whitespace"})]})}try{eY.displayName||(eY.displayName="DiffWhitespaceToggle")}catch{}function eJ(){return(0,l.jsxs)(eM.W,{children:[(0,l.jsx)(eM.W.Anchor,{children:(0,l.jsx)("button",{className:"Button Button--iconOnly Button--invisible ml-2","aria-label":"Diff view settings",children:(0,l.jsx)(I.GearIcon,{})})}),(0,l.jsx)(eM.W.Overlay,{children:(0,l.jsxs)(K.l,{children:[(0,l.jsx)(eQ,{}),(0,l.jsx)(K.l.Divider,{}),(0,l.jsx)(eY,{})]})})]})}try{eJ.displayName||(eJ.displayName="DiffViewSettings")}catch{}function eZ({treeToggleElement:e,headerInfo:t}){let n=(0,c.useRef)(null),i=function(e){let[t,n]=(0,c.useState)(!1),i=(0,c.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,c.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t}(n),r=i?{display:["none","inherit"]}:{};return(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:n,children:[(0,l.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,l.jsxs)(eK.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,l.jsxs)(eD.C,{sx:r,isAddition:!0,children:["+",t.additions]}),(0,l.jsxs)(eD.C,{sx:r,isAddition:!1,children:["-",t.deletions]}),(0,l.jsx)(eX.A,{sx:{fontSize:0,ml:2,color:"fg.muted",whiteSpace:"nowrap",...r},children:"lines changed"})]}),(0,l.jsxs)("div",{className:"d-flex",children:[i&&(0,l.jsx)(e0,{}),(0,l.jsx)(eJ,{})]})]})}let e0=()=>(0,l.jsx)(E.Q,{leadingVisual:I.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{eZ.displayName||(eZ.displayName="DiffsHeader")}catch{}try{e0.displayName||(e0.displayName="GoToTopButton")}catch{}var e1=n(70170),e2=n(49078),e9=n(42024);let e5="diff_file_tree";function e3({diffs:e,onFileSelected:t,diffsHeader:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let[a,s]=(0,c.useState)(""),{getCommentCountByPath:o}=(0,eI.B)(),d=(0,c.useRef)(null),u=(0,c.useMemo)(()=>new Set(e.map(e=>ek(e.path))),[e]),f=e;i&&i.size>0&&(f=f.filter(e=>!i.has(ek(e.path))));let h=(a?f.filter(e=>e.path.toLowerCase().includes(a.toLowerCase())):f).map(e=>{let t=o(e.path);return{...e,totalCommentsCount:t??0}});return(0,l.jsxs)("div",{className:"d-flex flex-column gap-2",id:e5,children:[(0,l.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,l.jsx)("div",{className:"d-md-none",ref:d,children:n}),(0,l.jsx)(e7,{filterText:a,onFilterTextChange:s,fileExtensions:u,unselectedFileExtensions:i,onFileExtensionsChange:r}),(0,l.jsx)(e2.oj,{diffs:h,onSelect:e=>{t(e,(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?"close_tree":void 0)}})]})}function e7({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let a=(0,c.useRef)((0,e1.s)(e=>t(e),250));return(0,l.jsx)(ew.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>a.current(e),onFilterChange:(e,t)=>{r(e,t.extension)}})}try{e3.displayName||(e3.displayName="FileTree")}catch{}try{e7.displayName||(e7.displayName="FileFilter")}catch{}function e4({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i}){let r=ej(),a=(0,c.useRef)(e),s=(0,eh.X)(),o=(0,d.B)();return(0,l.jsx)("div",{"data-hpc":!0,children:e.map((e,d)=>(0,l.jsx)("div",{className:0===d?"pt-0":"pt-3",children:(0,l.jsx)(eB,{prId:void 0,diffEntryData:a,index:d,helpUrl:s.helpUrl,splitPreference:r.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:ef.l,repo:n,ignoreWhitespace:o.ignoreWhitespace,oid:i})},e.pathDigest))})}try{e4.displayName||(e4.displayName="SSRDiffs")}catch{}var e8=n(15617);async function e6({repo:e,commitOid:t}){let n=await (0,eC.Sr)((0,eE.RD)((0,p.cl)({owner:e.ownerLogin,repo:e.name,commitOid:t})));if(n.ok){let e=await n.json();return(0,eE.Av)(e),e}throw Error("Failed to fetch comment data")}var te=n(94977),tt=n(20053);let tn=c.forwardRef(({expanded:e,testid:t,ariaLabel:n,ariaControls:i,onToggleExpanded:r,alignment:a,dataHotkey:s,className:o,tooltipDirection:d},c)=>(0,l.jsx)(te.A,{"aria-label":n,id:`expand-button-${t}`,direction:d,children:(0,l.jsx)(G.K,{unsafeDisableTooltip:!0,ref:c,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":i,icon:e?"left"===a?I.SidebarExpandIcon:I.SidebarCollapseIcon:"left"===a?I.SidebarCollapseIcon:I.SidebarExpandIcon,"data-hotkey":s,onClick:e=>{r(e)},variant:"invisible",className:(0,tt.$)(o,"fgColor-muted")})}));tn.displayName="ExpandButton";let ti=(0,g.E7)();function tr(){(0,v.L)(!0);let e=(0,d.B)(),{splitPagePaneHiddenSx:t,splitPageContentHidden:n,treeToggleElement:i,collapseTree:r}=function(e,t){let n=async function(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,eC.DI)((0,p.h6)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})},[i]=(0,b.I)(()=>!1,!0,[]),r=(0,o.i)(),a=(0,c.useRef)(null),s=(0,c.useRef)(null),[d,u]=(0,c.useState)(t),[f,h]=(0,c.useState)(!1),m=(0,c.useCallback)(()=>{(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?(h(!0),requestAnimationFrame(()=>s.current?.focus())):(u(!0),n(!0,r),requestAnimationFrame(()=>a.current?.focus()))},[r,n]),g=(0,c.useCallback)(()=>{(0,e9.nn)(window.innerWidth)<=e9.Gy.medium?(h(!1),requestAnimationFrame(()=>s.current?.focus())):(u(!1),n(!1,r),requestAnimationFrame(()=>a.current?.focus()))},[r,n]),x=(0,c.useMemo)(()=>(0,l.jsx)(tn,{expanded:d,alignment:"left",ariaLabel:d?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:a,onToggleExpanded:()=>{d?g():m()},className:"d-none d-md-flex position-relative"}),[d,e,g,m]),y=(0,c.useMemo)(()=>(0,l.jsx)(tn,{expanded:f,alignment:"left",ariaLabel:f?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{f?g():m()},className:"d-md-none position-relative"}),[f,e,g,m]),v=(0,c.useMemo)(()=>(0,l.jsxs)(l.Fragment,{children:[y,x]}),[y,x]);return{splitPagePaneHiddenSx:i&&!t?{display:"none"}:{flexDirection:["column","column","inherit"],"@media screen and (max-width: 768px)":f?{mt:-3}:{display:"none"},"@media screen and (min-width: 769px)":d?{height:"100vh",maxHeight:"100vh !important"}:{display:"none"}},splitPageContentHidden:{narrow:f,regular:!1},expandTree:m,collapseTree:g,treeToggleElement:v,treeToggleRef:a}}(e5,e.fileTreeExpanded),[a,u]=(0,c.useState)(new Set),[g]=(0,b.I)(()=>!1,!0,[]),[w,k]=(0,c.useState)(""),[L,S]=(0,c.useState)(""),[D,I]=(0,c.useState)(!1),A=(0,c.useCallback)((e,t)=>{(0,h.pk)(`diff-${e.pathDigest}`),k(e.pathDigest),"close_tree"===t&&r()},[r]),_=function(e){let t=(0,s.t)(),[n,i]=(0,c.useState)({branches:[],tags:[],loading:!0});return(0,c.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let r=await (0,eC.lS)((0,p.jn)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(r.ok){let e=await r.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch(e){i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n}(e.commit.oid),E=(0,p.t0)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid}),R=(0,c.useCallback)((e,t)=>{let n=new Set(a);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),u(n)},[a]);(0,c.useEffect)(()=>{u(new Set)},[e.commit]),(0,c.useEffect)(()=>{let e=x.cg?.location.hash;if(e?.indexOf("diff-")!==-1){let t=e?.split("diff-");t&&2===t.length&&k(t[1]??"")}},[]);let T=(0,c.useMemo)(()=>({hideWhitespace:e.ignoreWhitespace,splitPreference:e.splitViewPreference}),[e.ignoreWhitespace,e.splitViewPreference]);(0,c.useEffect)(()=>{(x.cg?.scrollY??0)>0&&x.cg?.scrollTo(0,0)},[e.path]);let{deferredCommentData:F,state:M}=function(e,t){let[n,i]=(0,c.useState)(void 0),[r,a]=(0,c.useState)("initial");return(0,c.useEffect)(()=>{i(void 0),a("loading"),(async()=>{i(await e6({repo:e,commitOid:t})),a("loaded")})()},[t,e]),{deferredCommentData:n,state:r}}(e.repo,e.commit.oid),O=F?.threadMarkers,P=()=>(0,l.jsx)(eZ,{treeToggleElement:i,headerInfo:e.headerInfo});if(e.unavailableReason)return(0,l.jsx)(ed,{commit:e.commit,commitInfo:_,unavailableReason:e.unavailableReason});let[H,B]=function(e){let t=e.findIndex(e=>void 0===e.oldOid)-1;return[-2===t?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))]}(e.diffEntryData);return(0,l.jsx)(C.RelayEnvironmentProvider,{environment:ti,children:(0,l.jsxs)(eI.r,{initialFiles:O,children:[(0,l.jsx)(y.ak,{commands:{"commit-diff-view:create-permalink":()=>{let t=(0,p.$Q)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid});window.history.pushState(null,document.title,t)}}}),(0,l.jsxs)(j.O7,{children:[(0,l.jsxs)(j.O7.Header,{children:[(0,l.jsx)("h1",{className:"sr-only",children:e.commit.shortMessage}),(0,l.jsx)(el,{commit:e.commit,commitInfo:_})]}),(0,l.jsx)(j.O7.Pane,{position:"start",sticky:!0,sx:t,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,children:(0,l.jsx)(e3,{diffs:B,onFileSelected:A,unselectedFileExtensions:a,diffsHeader:(0,l.jsx)(P,{}),onFileExtensionsChange:R})}),(0,l.jsx)(j.O7.Content,{as:"div",width:"full",hidden:n,padding:"none",sx:{p:[3,3,3,4],pt:[0,0,0,0]},children:(0,l.jsx)(f.Yj,{children:(0,l.jsxs)(ev,{viewSettings:T,children:[(0,l.jsx)(P,{}),g?(0,l.jsx)(e4,{diffEntryData:H,contextLinePathURL:E,repo:e.repo,oid:e.commit.oid}):(0,l.jsx)(f.cP,{searchTerm:L,setSearchTerm:S,children:(0,l.jsx)(ez,{commitInfo:_,isStickied:D,searchTerm:L,setSearchTerm:S,ignoreWhitespace:e.ignoreWhitespace,diffEntryData:H,contextLinePathURL:E,unselectedFileExtensions:a,selectedPathDigest:w,repo:e.repo,oid:e.commit.oid})}),(0,l.jsx)(e8.c,{comments:F?.discussionComments?.comments,commentCount:F?.discussionComments?.count,canLoadMore:F?.discussionComments?.canLoadMore,subscribed:F?.subscribed,providerState:M,repo:e.repo,commitOid:e.commit.oid,children:(0,l.jsx)(N.$,{commit:e.commit,commentInfo:e.commentInfo})}),(0,l.jsx)(m.nq,{})]})})})]})]})})}try{tr.displayName||(tr.displayName="Commit")}catch{}try{(i=DiffsHeader).displayName||(i.displayName="DiffsHeader")}catch{}function ta({url:e}){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,l.jsxs)(_.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})})}try{ta.displayName||(ta.displayName="CommitHelpMessage")}catch{}let tl=(0,c.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function ts({filters:e,children:t}){return(0,l.jsx)(tl.Provider,{value:e,children:t})}function to(){return(0,c.useContext)(tl)}try{tl.displayName||(tl.displayName="FilterContext")}catch{}try{ts.displayName||(ts.displayName="FilterProvider")}catch{}var td=n(64855),tc=n(38553),tu=n(23925),tf=n(20290);function th(){let e=to();return e.newPath&&e.originalBranch}function tm(){let e=(0,s.t)(),t=to();return th()?(0,l.jsx)(tf.s,{sx:{pt:1,pb:0},children:(0,l.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,l.jsx)(tf.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,l.jsx)(w.N,{to:(0,p.Gp)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function tp(){let e=(0,tu.ej)();return e?.hasRenameCommits?(0,l.jsx)(tf.s,{children:(0,l.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,l.jsx)(tf.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,l.jsx)(w.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function tg(){let e=(0,tu.ej)();return e?.hasRenameCommits?null:(0,l.jsx)(tf.s,{clipTimeline:"bottom",children:(0,l.jsx)(tf.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function tx(){let e=to(),t=(0,tu.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(tf.s,{leadingVisual:(0,l.jsx)(tc.A,{size:"small"})}),!t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tp,{}),(0,l.jsx)(tg,{})]})]})}try{tm.displayName||(tm.displayName="RenamedToHistory")}catch{}try{tp.displayName||(tp.displayName="RenamedFromHistory")}catch{}try{tg.displayName||(tg.displayName="EndOfFileHistory")}catch{}try{tx.displayName||(tx.displayName="EndOfFile")}catch{}function ty({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i=to(),r=(0,s.t)(),a=(0,F.wu)(t);return(0,l.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,l.jsx)(td.f,{leadingContent:(0,l.jsx)(tm,{}),commitGroups:e,trailingContent:(0,l.jsx)(tx,{}),repository:r,deferredCommitData:a,shouldClipTimeline:function(){let e=th(),t=to();return!e&&!t.pagination.hasPreviousPage}(),currentBlobPath:i.currentBlobPath,softNavToCommit:n})]})}try{ty.displayName||(ty.displayName="CommitList")}catch{}var tb=n(58143),tv=n(52876),tj=n(62689),tC=n(84929),tN=n(71649),tw=n(5225);async function tk(e){let t=await (0,eC.lS)(e);return t.ok?await t.json():void 0}let tL=new Map,tS=(0,tw.A)(tk,{cache:tL});function tD(e,t){let n=new URL(x.fV.origin+x.fV.pathname+x.fV.search,x.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var tI=n(6907);let tA=(0,c.lazy)(()=>Promise.resolve().then(n.bind(n,11228)).then(e=>({default:e.DatePicker}))),t_=()=>(0,l.jsx)(U.A,{icon:I.CalendarIcon,className:"fgColor-muted",sx:{my:"2px"}});function tE({repo:e,refInfo:t,path:n,author:i,contributorsUrl:r,since:a,until:o,sx:d={}}){let u=t.name;u===t.currentOid&&(u=(0,M.F)(t.currentOid));let f=(0,eg.Z)(),h=function(e){let t=(0,s.t)(),[n,i]=(0,c.useState)({users:[],error:!1,loading:!0});return(0,c.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await tS(e);if(t)return;let r=[],a=!1;try{n?r=n.authors:a=!0}catch(e){a=!0}i({users:r,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n}(r),m=c.useMemo(()=>{let e=(0,tC.H)(a??""),t=(0,tC.H)(o??"");return(0,tN.f)(e)&&(0,tN.f)(t)?{from:e,to:t}:null},[a,o]),g=n?.split("/");return(0,l.jsxs)(et.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:2,...d},children:[n&&(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,l.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,l.jsxs)(tj.A,{className:"ml-1",children:[(0,l.jsx)(tj.A.Item,{href:(0,p.Gp)({owner:e.ownerLogin,repo:e.name}),children:e.name}),g.map((n,i,r)=>{let a=(0,p.Gp)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:r.slice(0,i+1).join("/")}),s=i===r.length-1;return(0,l.jsx)(tj.A.Item,{sx:{whiteSpace:"normal",...s?{fontWeight:"bold"}:{}},href:a,selected:s,children:n},a)})]}),(0,l.jsxs)("div",{className:"no-wrap",children:[(0,l.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,l.jsx)(W.A,{href:(0,p.IO)({repo:e,commitish:t.name,action:"tree"}),children:u})]})]})}),!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,l.jsx)(tb.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,p.Gp)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,l.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,l.jsx)(tv.T,{defaultText:"All users",width:"medium",usersState:h,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&f(tD({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,l.jsx)(K.l.LinkItem,{href:tD({},["author"]),children:"View commits for all users"})}),(0,l.jsxs)(c.Suspense,{fallback:(0,l.jsx)(E.Q,{leadingVisual:t_,trailingVisual:I.TriangleDownIcon,children:"All time"}),children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,l.jsx)(tA,{variant:"range",value:m,maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e){f(tD({},["since","until"]));return}let t=function(e){if(e)return{startDate:(0,tI.x)(e.from,{representation:"date"}),endDate:(0,tI.x)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:n,endDate:i}=t;f(tD({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,l.jsx)(E.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:t_,trailingVisual:I.TriangleDownIcon,children:e})})]})]})]})}try{tA.displayName||(tA.displayName="DatePicker")}catch{}try{t_.displayName||(t_.displayName="StyledCalendarIcon")}catch{}try{tE.displayName||(tE.displayName="ListHeader")}catch{}var tR=n(6185);function tT({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};return t||n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eK.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,l.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,l.jsxs)(tR.A,{children:[(0,l.jsx)(E.Q,{as:w.N,to:tF(e,!1),className:"fgColor-accent text-normal",...i(!t),tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,l.jsx)(U.A,{icon:I.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,l.jsx)(E.Q,{as:w.N,to:tF(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,l.jsx)(U.A,{icon:I.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]}):null}function tF(e,t){return tD(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{tT.displayName||(tT.displayName="Pagination")}catch{}var tM=n(31881);function tO({children:e,title:t}){return(0,l.jsxs)(tM.M,{rowGap:"none",children:[(0,l.jsx)(tM.M.Header,{divider:"line",sx:{mb:3},children:(0,l.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,l.jsx)(eK.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,l.jsx)(tM.M.Content,{as:"div",children:(0,l.jsx)("div",{children:e})})]})}try{tO.displayName||(tO.displayName="Layout")}catch{}var tP=n(71078);function tH(){let e=(0,s.t)(),t=(0,T.D)(),n=(0,d.B)(),i=n.filters,r=n.commitGroups,a=n.metadata.softNavToCommit,o=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,c.useEffect)(()=>{if(!x.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,l.jsx)(ts,{filters:n.filters,children:(0,l.jsxs)(tO,{title:"Commits",children:[(0,l.jsx)(tE,{repo:e,contributorsUrl:n.metadata.deferredContributorUrl,since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,sx:{mb:3}}),0===r.length&&(0,l.jsx)(tP.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:o}),r.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ty,{commitGroups:r,deferredDataUrl:n.metadata.deferredDataUrl,softNavToCommit:a}),(0,l.jsx)(tT,{paginationInfo:i.pagination})]}),n.metadata.showProfileHelp&&(0,l.jsx)(ta,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{tH.displayName||(tH.displayName="Commits")}catch{}(0,a.Q)("commits",()=>({App:u,routes:[(0,r.a)({path:"/:owner/:repo/commits",Component:tH}),(0,r.a)({path:"/:owner/:repo/commits/:ref",Component:tH}),(0,r.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:tH}),(0,r.a)({path:"/:owner/:repo/commit/:oid",Component:tr}),(0,r.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:tr}),(0,r.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:tr})]}))},87213:(e,t,n)=>{n.d(t,{I:()=>o,d_:()=>d,wu:()=>s});var i=n(20594),r=n(28784),a=n(55293),l=n(23925);function s(e,t){let[n,s]=(0,a.useState)(l.UI);return(0,a.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{s(l.UI);let n=await (0,r.Sr)((0,i.RD)(e));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&((0,i.Av)(e),s(e))}else s(l.Xx)}catch(e){s(l.Xx)}})(),function(){t=!0}},[e,t]),n}function o(e){let[t,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{e&&(async()=>{let t=await (0,r.Sr)((0,i.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,i.Av)(e),n(e.data))}}catch(e){}})()},[e]),t}function d(e,t,n,i){let[s,o]=(0,a.useState)(l.UI),d=(0,a.useRef)([...Array(n)]),c=(0,a.useRef)(t);return(0,a.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let a=await (0,r.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(a.ok){let e=await a.json();if(e){let t=0;for(let n=c.current;n<e.nextIndex;n++)d.current[n]=e.deferredCommits[t],t++;e.deferredCommits=d.current,e.loadMore&&c.current!==e.nextIndex?(c.current=e.nextIndex,o(e),setTimeout(()=>i(e.nextIndex),0)):(c.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:d.current}))}catch(e){o(e=>({...e,loading:!1,deferredCommits:d.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,a.useEffect)(()=>{d.current=[],c.current=t},[e,i,t]),s}},42516:(e,t,n)=>{n.d(t,{$S:()=>i.$,H1:()=>l.H,L4:()=>u.L,Su:()=>r.S,UA:()=>s.U,c7:()=>a.c,cT:()=>o.c,i4:()=>d.i,uo:()=>c.u}),n(91805);var i=n(96985),r=n(21685),a=n(37045),l=n(36470),s=n(25607),o=n(54465),d=n(14233),c=n(14993),u=n(89793);n(71918),n(35993)},81773:(e,t,n)=>{n.d(t,{p:()=>i});function i(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}},89793:(e,t,n)=>{n.d(t,{L:()=>d});var i=n(74572),r=n(55293);let{getItem:a,removeItem:l,setItem:s}=(0,i.D)("localStorage"),o=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:d,threadId:c,fileLevelComment:u}){let f,h;let m=(0,r.useMemo)(()=>c||(c??o({diffSide:e,filePath:t,line:i,subjectId:d},u)),[e,t,i,d,c,u]),{hasPersistedComment:p,removePersistedCommentFromStorage:g}=(f=a(m),h=!!f?.text?.trim(),(0,r.useEffect)(()=>{h&&n?.(f)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{l(m),h=!1,f=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),s(m,t)},removePersistedCommentFromStorage:g}}},76919:(e,t,n)=>{function i(e,t){return t.some(t=>r(t,e))}function r(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&a(e.suggestion,t.suggestion)}n.d(t,{EJ:()=>o,Lm:()=>d,c0:()=>i,o_:()=>s,yM:()=>r});let a=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),l={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function s({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:s,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(t)return{isValid:!1,reason:l.IS_OUTDATED};if(n)return{isValid:!1,reason:l.IS_PENDING};if(i)return{isValid:!1,reason:l.IS_RESOLVED};if(r)return{isValid:!1,reason:l.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:l.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!s)return{isValid:!1,reason:l.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:l.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:l.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:l.DELETED_LINES};let u=d?.sourceContentFromDiffLines,f=e.suggestion.join("\n");return 0!==e.suggestion.length&&f===u?{isValid:!1,reason:l.UNCHANGED_CODE}:{isValid:!0}}function o(e,t){let n={isValid:!1,reason:l.INVALID_RANGE},i={isValid:!1,reason:l.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},71918:(e,t,n)=>{var i=n(67726);n(35993),i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l},35993:(e,t,n)=>{var i;n.d(t,{U:()=>i}),function(e){e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING"}(i||(i={}))},19255:(e,t,n)=>{n.d(t,{e:()=>i});function i(){document.querySelector('#__primerPortalRoot__ div[role="dialog"]')&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},7338:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(r());if(!i)return n;let a=i.groups.fence;if(!a)return n;let l=a.includes("~")?"~":"`",s=t.match(function(e,t){let n=r([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(l,a.length));if(!s)return n;let o=0,d=i.groups.indent;""!==d&&(o=d.length);let c=s.groups.suggestion;if(o>0){let e=RegExp(`^ {0,${o}}`,"m");c=c.replace(e,"")}return n.push(c),e(t.slice(s.index+s[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function r(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},822:(e,t,n)=>{n.d(t,{HS:()=>a,Oc:()=>r,Tv:()=>o,Xr:()=>SymbolChangedEvent,f7:()=>l,fD:()=>s,qR:()=>i});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function r(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function a(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function l(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function s(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function o(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},89426:(e,t,n)=>{n.d(t,{C6:()=>a,G7:()=>i,wh:()=>r,xP:()=>l});let i="tree-comparison",r={explain:"explain",conversation:"conversation",suggest:"suggest",askDocs:"ask-docs",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request"},a=["exception","filtered","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],l=["bing-search","codesearch","kb-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data","support-search"]},38959:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_Comparison",selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:e,storageKey:null}],type:"PullRequestComparison",abstractKey:null}}();i.hash="fb70959c69497160ff44b9b0c7820e08";let r=i},58231:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},t=[e,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_DiffEntry",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:t,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null}}();i.hash="f853615ae640634aad832da060f944cf";let r=i},53706:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"pullRequestId"},n={defaultValue:null,kind:"LocalArgument",name:"startOid"},i=[{kind:"Variable",name:"id",variableName:"pullRequestId"}],r=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l],storageKey:null},l],storageKey:null},l];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,n,e],kind:"Operation",name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},l],storageKey:null}]},params:{id:"fb6fd29b2f37f48929378e605adb454a",metadata:{},name:"DiffChatWrapper_ComparisonQuery",operationKind:"query",text:null}}}();i.hash="e34cdc5b305060e84f51c908a09989a0";let r=i},71324:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"diffEntryId"}],t=[{kind:"Variable",name:"id",variableName:"diffEntryId"}],n={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},i=[n,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],type:"PullRequestDiffEntry",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:i,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7c9df64c41ef33594dd0882be84ef373",metadata:{},name:"DiffChatWrapper_DiffEntryQuery",operationKind:"query",text:null}}}();i.hash="064698bd6869b0c7d063a68d0b3666d8";let r=i},45307:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"isCopilotDotcomChatEnabled",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"16bed8244ee96ad06b6638dbb86dd0ff",metadata:{},name:"DiffChatWrapper_ViewerQuery",operationKind:"query",text:null}}}();i.hash="4d1f99d4dad28f392f7ea1a3cecbcfff";let r=i},54371:(e,t,n)=>{n.d(t,{Kf:()=>o,hQ:()=>d});var i=n(55293),r=n(18312);let a=n(38959),l=n(58231),s=({oldCommit:e,newCommit:t},{oldTreeEntry:n,newTreeEntry:i,...r},a)=>{if(r.isBinary||r.isSubmodule||r.isLfsPointer||!i||(n?.size??0)>1048576||(i.size??0)>1048576)return;let l=n||!a?t.oid:a;return{type:"file-diff",id:`diff-${r.pathDigest}`,url:r.rawUrl??"",baseFile:n?{type:"file",repoID:e.repository.databaseId??0,repoName:e.repository.name,repoOwner:e.repository.owner.login,path:n.path??"",commitOID:e.oid,url:`${e.repository.url}/raw/${e.oid}/${n.path}`,ref:e.oid}:null,headFile:{type:"file",repoID:t.repository.databaseId??0,repoName:t.repository.name,repoOwner:t.repository.owner.login,path:i.path??"",commitOID:l,url:`${t.repository.url}/raw/${l}/${i.path}`,ref:l},head:null,base:null}},o=(e,t,n)=>{let o=(0,r.useFragment)(a,e),d=(0,r.useFragment)(l,t);return(0,i.useMemo)(()=>s(o,d,n),[o,d,n])},d=(e,t)=>{let n=(0,r.useFragment)(a,e);return(0,i.useMemo)(()=>s(n,t),[n,t])}},30792:(e,t,n)=>{n.d(t,{B:()=>g,C:()=>h});var i=n(9449),r=n(20053),a=n(59857),l=n(86519),s=n(30729),o=n(58081),d=n(80577),c=n(63808),u=n(38510),f=n(75177);function h({children:e,isAddition:t,sx:n}){return(0,i.jsx)(f.A,{sx:{color:t?"success.fg":"danger.fg",ml:1,fontWeight:"bold",fontSize:0,...n},children:e})}try{h.displayName||(h.displayName="LinesChangedCounterLabel")}catch{}let m={"diff-file-header":"DiffFileHeader-module__diff-file-header--TjXyn",collapsed:"DiffFileHeader-module__collapsed--FPwYM","file-name":"DiffFileHeader-module__file-name--mY1O5"};function p({newPath:e,oldPath:t,status:n}){let r=e&&e.startsWith("."),l=t&&t.startsWith("."),s=r?(0,i.jsxs)(i.Fragment,{children:["\u200E",e]}):(0,i.jsx)(i.Fragment,{children:e}),o=l?(0,i.jsxs)(i.Fragment,{children:["\u200E",t]}):(0,i.jsx)(i.Fragment,{children:t});return"RENAMED"===n?(0,i.jsxs)("code",{children:[o," ",(0,i.jsx)(a.ArrowRightIcon,{})," ",s]}):"DELETED"===n||"REMOVED"===n?(0,i.jsx)("code",{children:o}):(0,i.jsx)("code",{children:s})}function g({additionalLeftSideContent:e,areLinesExpanded:t,canExpandOrCollapseLines:n,defaultToRichDiff:f,isCollapsed:g,canToggleRichDiff:x,linesAdded:y,linesDeleted:b,fileLinkHref:v,fileLinkRef:j,newMode:C,newPath:N,oldMode:w,oldPath:k,onCopyPath:L,onHeaderClick:S,onToggleDiffDisplay:D,onToggleExpandAllLines:I,onToggleFileCollapsed:A,patchStatus:_,path:E,rightSideContent:R}){return(0,i.jsxs)("div",{className:(0,r.$)(m["diff-file-header"],g?m.collapsed:""),children:[(0,i.jsx)("button",{onClick:A,className:"Button Button--iconOnly Button--invisible flex-shrink-0","aria-label":g?`expand file: ${E}`:`collapse file: ${E}`,children:g?(0,i.jsx)(a.ChevronRightIcon,{}):(0,i.jsx)(a.ChevronDownIcon,{})}),e,(0,i.jsxs)("div",{className:"d-flex px-1 flex-items-center flex-1 overflow-hidden",children:[(0,i.jsx)("h3",{className:(0,r.$)(m["file-name"]),children:(0,i.jsx)(l.A,{className:"Link--primary",href:v,onClick:S,ref:j,children:(0,i.jsx)(p,{newPath:N,oldPath:k,status:_})})}),(0,i.jsx)(u.T,{className:"ml-1 flex-shrink-0",textToCopy:N??k??"",ariaLabel:"Copy file name to clipboard",tooltipProps:{direction:"s",anchorSide:"outside-bottom"},onCopy:L,avoidStyledComponent:!0,hasPortalTooltip:!0}),(0,c._$)(_,w,C)&&(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("code",{children:w}),(0,i.jsx)(s.A,{icon:a.ArrowRightIcon,sx:{mx:1}}),(0,i.jsx)("code",{children:C})]}),n&&I&&(0,i.jsx)(d.m,{text:t?`collapse non diff lines: ${E}`:`expand all lines: ${E}`,direction:"s",children:(0,i.jsx)("button",{onClick:I,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${t?"":"js-expand-all-difflines-button"}`,"aria-label":t?`collapse non diff lines: ${E}`:`expand all lines: ${E}`,"data-file-path":E,children:t?(0,i.jsx)(a.FoldIcon,{}):(0,i.jsx)(a.UnfoldIcon,{})})})]}),(0,i.jsxs)("div",{className:"d-flex mr-2 flex-justify-end flex-1",children:[y>0&&(0,i.jsxs)(h,{isAddition:!0,children:["+",y]}),b>0&&(0,i.jsxs)(h,{isAddition:!1,children:["-",b]})]}),x&&(0,i.jsxs)(o.I,{"aria-label":"File view",size:"small",sx:{mx:2},onChange:D?e=>D(1===e):void 0,children:[(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the source diff",defaultSelected:!f,icon:a.CodeIcon}),(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the rich diff",defaultSelected:f,icon:a.FileIcon})]}),R]})}try{p.displayName||(p.displayName="FileName")}catch{}try{g.displayName||(g.displayName="DiffFileHeader")}catch{}},63808:(e,t,n)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function r(e,t,n){return"MODIFIED"===e&&t!==n}function a(e){return"COPIED"===e.status&&!i(e)}function l(e){return"RENAMED"===e.status&&!i(e)}function s(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function o(e){return!!e.truncatedReason}n.d(t,{HI:()=>o,Jc:()=>a,_$:()=>r,dK:()=>l,lO:()=>s,l_:()=>u,s8:()=>h,xW:()=>f});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],c=/^maximum file count exceeded/;function u(e){let t=e;return d.includes(e)?t="Sorry, we could not display the changes to this file because there were too many other changes to display.":c.test(e)&&(t="Sorry, we could not display the changes to this file because there were too many other files to display."),t}function f(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},49078:(e,t,n)=>{n.d(t,{oj:()=>S,EB:()=>j,sK:()=>b});var i=n(9449),r=n(59857),a=n(55293),l=n(72512),s=n(68976),o=n(76515);function d(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function c(e,t){var n=d(e,t,"get");return n.get?n.get.call(e):n.value}function u(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function f(e,t,n){var i=d(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function h(e,t){return e.name.localeCompare(t.name)}function m(e,t){return e.fileName.localeCompare(t.fileName)}function p(e){return e.diff}var g=new WeakMap;let FileNode=class FileNode{constructor(e){u(this,g,{writable:!0,value:void 0}),this.diff=e,this.filePath=this.diff.path,f(this,g,this.filePath.split("/")),this.fileName=c(this,g)[c(this,g).length-1],this.directoryParts=c(this,g).slice(0,c(this,g).length-1)}};var x=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=c(this,x).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),c(this,x).set(e,t)}return t}sort(){for(let e of(this.directories.sort(h),this.files.sort(m),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(p);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){u(this,x,{writable:!0,value:void 0}),this.name=e,this.path=t,this.directories=[],this.files=[],f(this,x,new Map)}};function y(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function b(e){return y(e.filter(e=>!!e)).getOrderedDiffs()}var v=n(30729);function j({status:e}){switch(e){case"ADDED":case"COPIED":return(0,i.jsx)(v.A,{size:16,icon:r.FileAddedIcon,className:"fgColor-success"});case"DELETED":case"REMOVED":return(0,i.jsx)(v.A,{size:16,icon:r.FileRemovedIcon,className:"fgColor-danger"});case"RENAMED":return(0,i.jsx)(v.A,{size:16,icon:r.FileMovedIcon,className:"fgColor-attention"});default:return(0,i.jsx)(v.A,{size:16,icon:r.FileIcon,className:"fgColor-muted"})}}try{j.displayName||(j.displayName="FileStatusIcon")}catch{}var C=n(27500),N=n(90600),w=n(97156);let k=(0,a.memo)(function({file:e,depth:t,hash:n,onSelect:o}){let d=a.useRef(null),c=(0,C.Z)({focusRowRef:d,mouseRowRef:d}),u=(e.diff.totalCommentsCount??0)+(e.diff.totalAnnotationsCount??0),f=(0,a.useCallback)(()=>{d.current?.tabIndex===0&&d.current?.focus()},[d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":f}}),(0,i.jsxs)(l.G.Item,{defaultExpanded:!0,"aria-level":t,current:e.diff.pathDigest===n,id:e.diff.path,onSelect:()=>o?.(e.diff),ref:d,children:[(0,i.jsx)(l.G.LeadingVisual,{children:(0,i.jsx)(j,{status:e.diff.changeType})}),e.fileName,c&&(0,i.jsx)(s.m,{"data-testid":`${e.fileName}-item-tooltip`,id:`${e.fileName}-item-tooltip`,contentRef:d,"aria-label":e.fileName,open:!0,direction:"ne"}),!!u&&(0,i.jsxs)("span",{className:"sr-only",children:["has ",u<10?u:"9+"," ",u>1?"comments":"comment"]}),!!u&&(0,i.jsx)(l.G.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[(0,i.jsx)(r.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:u<10?u:"9+"})]})})]})]})});function L({directory:e,depth:t=0,leadingPath:n="",...r}){let d=n?`${n}/`:"",[c,u]=a.useState(""),f=a.useRef(null),h=(0,a.useCallback)(()=>{u(((0,o.pd)(w.fV.hash??"")??"").replace("diff-",""))},[u]);(0,a.useEffect)(()=>(window.addEventListener("hashchange",h),()=>{window.removeEventListener("hashchange",h)}),[h]);let m=a.useRef(null),p=(0,C.Z)({focusRowRef:m,mouseRowRef:f}),g=(0,a.useCallback)(()=>{m.current?.tabIndex===0&&m.current?.focus()},[m]);if(!e.files.length&&1===e.directories.length)return(0,i.jsx)(i.Fragment,{children:e.directories.map(n=>(0,i.jsx)(L,{depth:0===t?1:t,directory:n,leadingPath:`${d}${e.name}`,...r},n.path))});function x(){return(0,i.jsxs)(i.Fragment,{children:[e.files.map(e=>(0,i.jsx)(k,{depth:t+1,file:e,hash:c,...r},e.filePath)),e.directories.map(e=>(0,i.jsx)(L,{depth:t+1,directory:e,...r},e.path))]})}return 0===t?x():(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":g}}),(0,i.jsxs)(l.G.Item,{ref:m,defaultExpanded:!0,id:e.path,children:[(0,i.jsx)(l.G.LeadingVisual,{children:(0,i.jsx)(l.G.DirectoryIcon,{})}),(0,i.jsx)("span",{ref:f,children:`${d}${e.name}`}),p&&(0,i.jsx)(s.m,{"data-testid":`${e.name}-directory-item-tooltip`,id:`${e.name}-directory-item-tooltip`,contentRef:m,"aria-label":`${d}${e.name}`,open:!0,direction:"ne"}),(0,i.jsx)(l.G.SubTree,{children:x()})]},e.path)]})}let S=(0,a.memo)(function({diffs:e,...t}){let n=y(e);return(0,i.jsx)(l.G,{"aria-label":"File Tree",children:(0,i.jsx)(L,{directory:n,...t})})});try{k.displayName||(k.displayName="File")}catch{}try{L.displayName||(L.displayName="Directory")}catch{}try{S.displayName||(S.displayName="DiffFileTree")}catch{}},73387:(e,t,n)=>{n.d(t,{W:()=>r,y:()=>a});var i=n(94120);let r={ArrowLeft:i.z0.ArrowHorizontal,ArrowDown:i.z0.ArrowVertical,ArrowUp:i.z0.ArrowVertical,ArrowRight:i.z0.ArrowHorizontal,h:i.z0.HL,j:i.z0.JK,k:i.z0.JK,l:i.z0.HL,a:i.z0.AD,s:i.z0.WS,w:i.z0.WS,d:i.z0.AD,Tab:i.z0.Tab,Home:i.z0.HomeAndEnd,End:i.z0.HomeAndEnd,PageUp:i.z0.PageUpDown,PageDown:i.z0.PageUpDown,Backspace:i.z0.Backspace},a=i.z0.ArrowAll|i.z0.PageUpDown|i.z0.HomeAndEnd|i.z0.AD},26443:(e,t,n)=>{n.d(t,{Wi:()=>i.W,tT:()=>r.t,yC:()=>i.y});var i=n(73387),r=n(55141)},55141:(e,t,n)=>{n.d(t,{t:()=>i});let i={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}}},36220:(e,t,n)=>{n.d(t,{Dd:()=>o.Dd,K_:()=>s.K,N0:()=>o.N0,T5:()=>i.T,Uz:()=>a.U,Yj:()=>l.Y,cP:()=>s.c,qj:()=>r.q,xB:()=>d.x});var i=n(16385),r=n(72360);n(5242);var a=n(32612),l=n(50990),s=n(68950),o=n(76515),d=n(54577);n(86084)},16340:(e,t,n)=>{n.d(t,{F:()=>i});function i(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData.totalCount??0,a=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:a,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}},77321:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(51888),r=n(9393);function a({selectedDiffRowRange:e,leftLines:t,rightLines:n}){let a=!!n,{startOrientation:l,endOrientation:s}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let o=f(l).findIndex(t=>(0,r.a2)(t,e.startLineNumber,e.startOrientation)),d=f(s).findIndex(t=>(0,r.a2)(t,e.endLineNumber,e.endOrientation)),c=o>=0&&d>=0;function u(e){if(!c||(0,r.Po)(e))return!1;let t=f((0,i.XU)(e.type)).indexOf(e);return t>=o&&t<=d}function f(e){return a&&"left"!==("string"==typeof e?e:(0,i.XU)(e.type))?n:t}let h=f("left").filter(e=>u(e)),m=f("right").filter(e=>u(e));return{isRowSelected:u,selectedRightLines:m,selectedLeftLines:h}}},76515:(e,t,n)=>{function i(e,t){return`${"left"===t?"L":"R"}${e}`}function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function a(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function l(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function s(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function o(e){c(d(e))}function d(e){let t=i(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=i(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function c(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}n.d(t,{Dd:()=>a,N0:()=>l,ZD:()=>s,i8:()=>o,j$:()=>d,pd:()=>r,pk:()=>c})},86084:(e,t,n)=>{var i;function r({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},a=e.reduce((n,i,a)=>{if(r[a])return n;r[a]=!0;let s=l(t,[e[a]]),o=s.next();for(;!o.done&&n.size<200;){let{resultsWithinDiff:t}=o.value;n.set(e[a]?.pathDigest??"",t),o=s.next()}return n},new Map);if(a.size<200&&i){let n=l(t,e,a.size),i=n.next();for(;!i.done&&a.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;a.set(e[r]?.pathDigest??"",t),i=n.next()}}return a}(n,a(t),i):function(e,t){let n=new Map,i=l(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:a}=r.value;n.set(e[a]?.pathDigest??"",t),r=i.next()}return n}(n,a(t)),query:t}}function a(e){return{kind:0,regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*l(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],a=0;for(let l=0;l<n.diffLines.length;l++){let s,o;s=t[i]?.diffLines[l]?.type==="HUNK"?n.diffLines[l]?.text:n.diffLines[l]?.text?.substring(1);let d=n.diffLines[l];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:a,matchContent:e,column:t,diffLineNumIndex:l,isHunk:(d?.type==="HUNK")??!1,hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:s}),a++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}n.d(t,{f:()=>r}),function(e){e[e.Text=0]="Text",e[e.Symbol=1]="Symbol"}(i||(i={}))},14903:(e,t,n)=>{n.d(t,{u:()=>GridNavigator});var i=n(9393);let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n;let i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(r)&&this.savedColumnIndex&&(a=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(r-1)?(this.saveColumnIndex(a),n=this.grid[r-1]?.[0]):n=this.grid[r-1]?.[a];break;case"ArrowDown"===e:this.isHunkRow(r+1)?(this.saveColumnIndex(a),n=this.grid[r+1]?.[0]):n=this.grid[r+1]?.[a];break;case"ArrowLeft"===e:n=this.grid[r]?.[a-1];break;case"ArrowRight"===e:n=this.grid[r]?.[a+1];break;case"PageUp"===e:{this.saveColumnIndex(a);let e=this.getPreviousHunkRowIndex(r);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(a);let e=this.getNextHunkRowIndex(r),t=0;e||(e=this.grid.length-1,t=a),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[r]?.[0];break;case"End"===e:{let e=this.grid[r];if(e&&!this.isHunkRow(r)){let t=e.length-1;n=this.grid[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t;let n=this.lastSelectedGridCell||this.focusedGridCell,i=this.cellIdToGridLocation.get(n?.cellId??"");if(!i)return;let[r,a]=i;if(("ArrowUp"!==e||!(r<=1))&&("ArrowDown"!==e||r!==this.grid.length-1)){if("ArrowUp"===e){let e=r-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e--}if("ArrowDown"===e){let e=r+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let r=(0,i.qX)(this.fileAnchor,e,t),a=(0,i.u6)(r,0),l=this.cellIdToGridLocation.get(a);if(!l)return!1;let[s]=l;return!!n===this.isHunkRow(s)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty:return n?.[t-2];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let r=[],a=e[n];if(void 0!==a){if(this.isSplitDiff){let e=(t||[])[n],l=(0,i.qX)(this.fileAnchor,a,e);(0,i.Po)(a)||"HUNK"!==a.type?this.initializeSplitDiffCodeRow({leftLine:a,rightLine:e,row:r,rowIdentifier:l,rowIndex:n}):this.initializeHunkRow(r,l,n)}else{let e=(0,i.qX)(this.fileAnchor,a,a);(0,i.Po)(a)||"HUNK"!==a.type?this.initializeUnifiedDiffCodeRow({diffLine:a,row:r,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(r,e,n)}this.grid.push(r)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:r,rowIdentifier:a,rowIndex:l}){let s;let o=(0,i.u6)(a,e);(0,i.Po)(t)||"left"!==n||(s=t?.left),(0,i.Po)(t)||"right"!==n||(s=t?.right),r.push({lineNumber:s,orientation:n,isHunk:!1,isEmpty:(0,i.Po)(t),cellId:(0,i.u6)(a,e),columnIndex:e}),this.cellIdToGridLocation.set(o,[l,e])}initializeHunkRow(e,t,n){let r=(0,i.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:r,columnIndex:0}),this.cellIdToGridLocation.set(r,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:r}){let a=(0,i.Po)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:r})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,r){this.fileAnchor=e,this.isSplitDiff=t,this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set,this.initializeGrid(n,i),this.focusFirstGridCell(r)}}},81904:(e,t,n)=>{n.d(t,{Fs:()=>l,fR:()=>s,wj:()=>r});var i=n(9393);let r={finalLineId:"final-hunk-header-line"};function a(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function l(e,t){if("HUNK"===e.type&&e.__id===r.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(a).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function s(e){let t=[],n=0;for(let a=1;a<e.length;a++){let l=e[a],s=a===e.length-1;if(l&&!(0,i.Po)(l)){if("HUNK"===l.type){let s;let o=e[n];if(!o||(0,i.Po)(o))continue;let d=a-1;for(;(!s||(0,i.Po)(s))&&(s=e[d],-1!=--d););s&&!(0,i.Po)(s)&&t.push({startBlobLineNumber:o.blobLineNumber,endBlobLineNumber:s.blobLineNumber}),l.__id===r.finalLineId&&t.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:l.blobLineNumber+20}),n=a;continue}if(s){let r=e[n];r&&!(0,i.Po)(r)&&t.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:l.blobLineNumber})}}}return t}},9393:(e,t,n)=>{n.d(t,{Ji:()=>h,Ls:()=>w,Mk:()=>p,On:()=>o,Po:()=>u,S4:()=>b,YY:()=>v,ZC:()=>g,_S:()=>m,a1:()=>N,a2:()=>s,j2:()=>x,oE:()=>j,pI:()=>y,qK:()=>f,qX:()=>d,u6:()=>c});var i=n(51888),r=n(12480),a=n(6024),l=n(76515);function s(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.XU)(e.type)===n&&e.right===t}function o(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let a of t)if(a&&(i||(i=s(a,e.startLineNumber,e.startOrientation)),r||(r=s(a,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation,firstSelectedLineNumber:e.endLineNumber}:e}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===a.V}function f(e){return!!e&&e!==a.V}function h(e){return"CONTEXT"===e.type}function m(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}function p(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(a.V);for(;n.length<t.length;)n.push(a.V)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function g(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:n}){let i;let{origin:r,pathname:a}=window.location;if(t?i=(0,l.j$)(t):e&&(i=function(e,t){let n=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return(0,l.j$)({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)),i)return`${r}${a}#${i}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a=e?`${(0,r.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(a+=`${(0,r.U0)()?"\u2325":"Alt + "}`),t&&(a+=`${(0,r.U0)()?"\u21E7":"Shift + "}`),a+=i}function b({hasThreads:e}){return e?"96px":"30px"}function v({shouldAlignRight:e}){return e?"11px":"40px"}function j({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let a="";return e&&(a+=(0,r.U0)()?"Command+":"Control+"),n&&(a+=(0,r.U0)()?"Option+":"Alt+"),t&&(a+="Shift+"),a+=i}let C=["ADDITION","DELETION","CONTEXT"],N=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!u(e)&&C.includes(e.type)):!u(e)&&C.includes(e.type)},w=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=m(g(e.html),e.type);return t}).join("\n"):""},35538:(e,t,n)=>{n.d(t,{z:()=>i});function i(e){return null!=e}},61387:(e,t,n)=>{n.d(t,{V:()=>i});function i(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}},78896:(e,t,n)=>{n.d(t,{e:()=>d});var i=n(55293),r=n(24361),a=n(50990),l=n(27267),s=n(30841),o=n(71312);function d({cellId:e,actionBarRef:t}){let{replaceSelectedDiffRowRange:n}=(0,a.o)(),{fileAnchor:d}=(0,l.s)(),[c,u]=(0,i.useState)(t),{annotations:f,openDialog:h,closeDialog:m,selectedAnnotationId:p,selectAnnotationId:g,selectedThreadId:x,selectThreadId:y,openContextMenuCell:b,openNewConversationCell:v,openMarkerDetailsCell:j,openMarkersListCell:C,updateVisibleThreads:N,threads:w,threadConnectionId:k,anyMenuOpen:L}=(0,r._)(),{sendAnalyticsEvent:S}=(0,o.s)(),D=(0,i.useMemo)(()=>v?.cellId===e,[e,v]),I=(0,i.useMemo)(()=>v?.withSuggestedChange,[v]),A=(0,i.useCallback)(t=>{h("new-conversation",e,t)},[e,h]),_=(0,i.useCallback)(()=>{A()},[A]),E=(0,i.useCallback)(()=>{u(t),A(),S("diff.start_new_conversation","PLUS_ICON")},[t,A,S]),R=(0,i.useCallback)(()=>{A({withSuggestedChange:!0}),S("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[A,S]),T=(0,i.useCallback)(()=>{u(t),A({withSuggestedChange:!0}),S("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,A,S]),F=(0,i.useCallback)(()=>{m("new-conversation")},[m]),M=(0,i.useMemo)(()=>b===e,[e,b]),O=(0,i.useCallback)(()=>{h("context-menu",e)},[e,h]),P=(0,i.useCallback)(()=>{u(t),O()},[t,O]),H=(0,i.useCallback)(()=>{m("context-menu")},[m]),B=(0,i.useCallback)(()=>{M?H():O()},[H,M,O]),$=(0,i.useCallback)(()=>{u(t),B()},[t,B]),U=(0,i.useMemo)(()=>j===e?x:void 0,[e,j,x]),W=(0,i.useMemo)(()=>j===e?p:void 0,[e,j,p]),V=(0,i.useCallback)(()=>{h("marker-details",e)},[e,h]),z=(0,i.useCallback)(()=>{m("marker-details")},[m]),q=(0,s.K)((e,t={skipLineSelection:!1})=>{if(y(e),V(),t.skipLineSelection)return;let i=w.find(t=>t.id===e);if(i&&i.diffSide&&i.line){let e=i.startLine??i.line,t=i.startDiffSide??i.diffSide;n({diffAnchor:d,endLineNumber:i.line,endOrientation:"LEFT"===i.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),G=(0,s.K)((e,t={skipLineSelection:!1})=>{if(g(e),V(),t.skipLineSelection)return;let i=f.find(t=>t.id===e);i&&n({diffAnchor:d,endLineNumber:i.location.end.line,endOrientation:"right",startLineNumber:i.location.start.line,startOrientation:"right",firstSelectedLineNumber:i.location.start.line,firstSelectedOrientation:"right"})}),K=(0,i.useCallback)(()=>{h("marker-list",e)},[e,h]),X=(0,i.useCallback)(()=>{m("marker-list")},[m]),Q=(0,i.useCallback)(e=>{let t=N(e);if(!t?.length&&!f.length)return;let n=t&&t[0],i=t&&1===t.length&&n&&!f.length,r=f[0],a=1===f.length&&r&&!t?.length;i?q(n.id):a?G(r.id):K()},[f,K,G,q,N]);return{isNewConversationDialogOpen:D,startNewConversation:_,startNewConversationFromActionBar:E,closeNewConversationDialog:F,startNewConversationWithSuggestedChange:R,startNewConversationFromActionBarWithSuggestedChange:T,shouldStartNewConversationWithSuggestedChange:I,isContextMenuOpen:M,openContextMenu:O,openContextMenuFromActionBar:P,closeContextMenu:H,toggleContextMenu:B,toggleContextMenuFromActionBar:$,optimizedSelectedThreadId:U,optimizedSelectedAnnotationId:W,selectThread:q,selectAnnotation:G,openMarkerDetailsDialog:V,closeConversationDetailsDialog:z,isMarkerListDialogOpen:C===e,openMarkerListDialog:K,closeMarkerListDialog:X,openMarkerOrListDialogFromActionBar:(0,i.useCallback)(e=>{Q(e),u(t)},[t,Q]),openMarkerOrListDialog:(0,i.useCallback)(e=>{Q(e)},[Q]),annotations:f,returnFocusRef:c,threadConnectionId:k,threads:w,anyMenuOpen:L}}},64553:(e,t,n)=>{n.d(t,{l:()=>l});var i=n(55293),r=n(24361),a=n(63681);function l({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:l}=(0,r._)(),[s,o]=(0,i.useState)(!1),d=(0,i.useCallback)(()=>{t()},[t]),c=(0,i.useCallback)(t=>{!l&&(e.current&&e.current.contains(t.relatedTarget)||n())},[l,e,n]),u=(0,i.useCallback)(()=>{t()},[t]),f=(0,i.useCallback)(()=>{!l&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[l,e,n]);return{isActionBarFocused:s,handleCellBlur:c,handleCellFocus:d,handleCellMouseEnter:u,handleCellMouseLeave:f,handleActionBarBlur:(0,i.useCallback)(t=>{e.current&&!l&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&o(!1):(n(),o(!1)))},[l,e,n]),handleActionBarFocusCapture:(0,i.useCallback)(e=>{l||(e.stopPropagation(),o(!0))},[l]),handleActionBarKeydownCapture:(0,i.useCallback)(e=>{!l&&(0,a.g)(e.key)&&e.stopPropagation()},[l])}}},54577:(e,t,n)=>{n.d(t,{x:()=>s});var i=n(37363),r=n(55293),a=n(76391),l=n(86084);function s(e,t,n,s){let[o,d]=(0,r.useState)(new Map),[c,u]=(0,r.useState)(void 0),[f,h]=(0,r.useState)(0),m=r.useRef();!m.current&&t&&(m.current=new a.N(new i.z(n,l.f),200,e=>1!==e.query.length));let p=(0,r.useRef)(t);p.current=t;let g=(0,r.useRef)("");(0,r.useEffect)(()=>function(){m.current?.terminate()},[]);let x=(0,r.useRef)([]);return m.current&&e!==x.current&&(m.current.onResponse=e=>{e.query===p.current&&(d(e.matchingDiffs),g.current=p.current)},x.current=e),(0,r.useEffect)(()=>{if(!e||!m.current||!g.current||""===g.current){d(new Map),u(void 0);return}d(new Map),u(void 0),m.current.post({query:g.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,r.useEffect)(()=>{if(e&&m.current){if(""===t)d(new Map),u(void 0),h(0),g.current="";else{if(!(t.length>0&&t.length<=1e3))return;let n=g.current.length>0&&t.startsWith(g.current);m.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:n?o:void 0}),h(0)}}},[t,s]),{focusedSearchResult:c,setFocusedSearchResult:u,searchResults:o,currentIndex:f,setCurrentIndex:h}}},23247:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(97177),r=n(27267);function a(){let{nextHunk:e,currentHunk:t,previousHunk:n}=(0,r.s)(),{addInjectedContextLines:a}=(0,i.y)(),l=!!t&&0!==t.startBlobLineNumber,s=!!t&&!!e;return{expandStartOfHunk:()=>{l&&t&&a({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{s&&t&&a({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&a({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:s,canExpandStartOfHunk:l}}},5679:(e,t,n)=>{n.d(t,{R:()=>l});var i=n(55293),r=n(9393);function a(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function l(e,t,n,l,s,o){(0,i.useEffect)(()=>{if(s&&document.activeElement){let i=function(e,t,n){let i=[];for(let a=0;a<t.length;a++){let l=t[a],s=n?.[a]??l,o=!(0,r.Po)(l)&&l?.type==="HUNK";l&&s&&!e.hasLine(l,s,o)&&i.push(l)}return i}(s,t,o);if(0!==i.length){if(document.activeElement===document.body){let l,s,o;let d=t.indexOf(i[i.length-1]),c=t[d+1],u=i[0];c&&!(0,r.Po)(c)&&"HUNK"===c.type&&(l=(0,r.u6)((0,r.qX)(e,c,c),0),s=document.querySelector(`[data-grid-cell-id=${l}]`),o=s?.querySelector("button[data-direction=down], button[data-direction=all]")),o||(l=(0,r.u6)((0,r.qX)(e,u,u),0),s=document.querySelector(`[data-grid-cell-id=${l}]`),o=s?.querySelector("button[data-direction=up], button[data-direction=all]")),l&&s&&(o?o.focus():s.focus(),n.focusGridCell(l),a(s))}else if("BUTTON"===document.activeElement.tagName)a(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=l.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,o,s,l])}},63681:(e,t,n)=>{n.d(t,{e:()=>d,g:()=>o});var i=n(82678),r=n(55293),a=n(14903),l=n(5679),s=n(26443);function o(e){return e in s.Wi&&(s.Wi[e]&s.yC)>0}function d({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:o,leftLines:d,replaceSelectedDiffRowRangeFromGridCells:c,rightLines:u,selectedDiffRowRange:f,updateSelectedDiffRowRange:h}){let m=(0,r.useRef)(),p=(0,r.useMemo)(()=>new a.u(n,o,d,u,m.current?.focusedGridCell?.cellId),[n,o,d,u]);(0,r.useEffect)(()=>{m.current=p},[p]),(0,l.R)(n,d,p,t,m.current,u),function(e,t){let n=(0,r.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,r.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])}(t,p);let g=(0,r.useCallback)((t,i,r)=>{let a=p.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=p.getFirstCodeCell(),t=p.getLastCodeCell();if(!e||!t)return i;return c({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=p.getNextSelectableCell("ArrowDown");if(!e||!a)return i;return f?.firstSelectedLineNumber?h(n,e.lineNumber,e.orientation,!0):c({diffAnchor:n,focusedGridCell:a,startGridCell:a,endGridCell:e}),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=p.getNextSelectableCell("ArrowUp");if(!e||!a)return i;return f?.firstSelectedLineNumber?h(n,e.lineNumber,e.orientation,!0):c({diffAnchor:n,focusedGridCell:a,startGridCell:e,endGridCell:a}),i}default:{let t=p.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),p.clearLastSelectedCell(),n??void 0}}},[p,f,h,n,c,e]);return(0,i.G)({containerRef:t,bindKeys:s.yC,getNextFocusable:g,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous"},[g]),{gridNavigator:p}}},7370:(e,t,n)=>{n.d(t,{w:()=>a});var i=n(50990),r=n(9393);function a(e){let{selectedDiffRowRange:t,selectedDiffLines:n,getDiffLinesByDiffAnchor:a}=(0,i.o)();return{getUnifiedDiffLineCode:()=>{let n=a(e);if(!n||!t)return"";let{startOrientation:i,endOrientation:l,startLineNumber:s,endLineNumber:o}=t,d=0,c=0;return n.length>1&&(d=n.findIndex(e=>"left"===i?e.left===s:e.right===s),c=n.findIndex(e=>"left"===l?e.left===o:e.right===o)),(0,r.Ls)(n.slice(d,c+1))},getSplitDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let i=a(e)?.find(e=>"left"===t?e.left===n:e.right===n);return i?(0,r.Ls)([i]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,r.Ls)(n.leftLines):(0,r.Ls)(n.rightLines)}}},30841:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(51012),r=n(55293);let a=e=>{let t=(0,r.useRef)(e);return(0,i.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,r.useCallback)((...e)=>t.current?.(...e),[])}},52019:(e,t,n)=>{n.d(t,{S:()=>c,n:()=>d});var i=n(55293),r=n(50990),a=n(9393),l=n(71312),s=n(30841),o=n(76919);function d(e){let t=(0,o.Lm)(e),n=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),i=n.every(e=>"DELETION"!==e.type),r=n?.map(e=>a._S(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:n.length>0&&!!i,showSuggestChangesButton:!1,sourceContentFromDiffLines:r,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,n){let{sendAnalyticsEvent:o}=(0,l.s)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,r.o)(),u=(0,s.K)(function(n,i){if(!e)return;let r=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:r,showSuggestChangesButton:r,sourceContentFromDiffLines:r?function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,a.Ls)(n);if(!t)return"";let[i]=(0,a._S)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{o("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:i}});return(0,i.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:n}),[c,u,n])}},6024:(e,t,n)=>{n.d(t,{V:()=>i});let i="empty-diff-line"},57442:(e,t,n)=>{n.d(t,{M_:()=>i,Nc:()=>l,Uk:()=>a});var i,r=n(55293);let a="500px";function l(e){let[t,n]=function(e){let[t,n]=(0,r.useState)(e),i=(0,r.useRef)(t);return[i,e=>{i.current=e,n(e)}]}("LOADING"),i=(0,r.useRef)(null),a=(0,r.useRef)(null),l=(0,r.useRef)(null),d=(0,r.useRef)({untimed:!0}),c=(0,r.useCallback)(t=>(function(e,t,n,i,r,a,l){if(e.origin!==t)return;let s=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!s){a("ERROR");return}let d=s.body,c=null!=s.payload?s.payload:void 0,u=n.current?.contentWindow;switch(d){case"hello":(r.current??{untimed:!0}).hello=Date.now(),o(u,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),o(u,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":c&&l(c.error??null),a("ERROR");break;case"loading":a("LOADING");break;case"loaded":a("LOADED");break;case"ready":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`),a("READY");break;case"resize":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`);break;case"code_rendering_service:container:get_size":o(u,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let n=e.getAttribute("data-content");if(!n)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(n).data,width:t.getBoundingClientRect().width}}};o(e.contentWindow,i)}(n.current,i.current)}})(t,e,a,l,d,n,e=>i.current=e),[e,n]);return(0,r.useEffect)(()=>{s(d.current);let e=e=>{("LOADING"===t.current||"LOADED"===t.current)&&(!e||d.current.hello)&&n("ERROR")};return d.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{s(d.current)}},[t,n]),(0,r.useEffect)(()=>(window.addEventListener("message",c),()=>window.removeEventListener("message",c)),[c]),{renderState:t.current,errorMsg:i.current,iFrameRef:a,containerRef:l}}function s(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function o(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}!function(e){e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY"}(i||(i={}))},27500:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(55293);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=i.useState(!1);return i.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),n}},69144:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(55293);function r(e){(0,i.useEffect)(()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},[e])}},84928:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(55293),r=n(20826);function a(e,t){let n=(0,r.H)(e,t);return(0,i.useCallback)(async i=>{let r=t;if(!n)throw Error(`No authenticity token found for method ${r} and path ${e}`);return i||(i={}),l(i,"X-Requested-With","XMLHttpRequest"),i.body instanceof URLSearchParams&&"delete"===r&&(i.body.append("_method","delete"),r="post"),i.body instanceof URLSearchParams||i.body instanceof FormData?i.body.append("authenticity_token",n):l(i,"Scoped-CSRF-Token",n),await fetch(e,{...i,method:r})},[e,t,n])}function l(e,t,n){e.headers??(e.headers=new Headers);let i=e.headers;if(i instanceof Headers)i.set(t,n);else if(Array.isArray(i)){let e=i.findIndex(([e])=>e===t);-1===e?i.push([t,n]):i[e]=[t,n]}else i[t]=n}},41631:(e,t,n)=>{n.d(t,{Y:()=>l,h:()=>o});var i=n(55293),r=n(35822);let a=e=>e;function l(e){let t=i.useRef({}),n=i.useRef({}),l=(e,n)=>{t.current[e](n)},s=i.useRef(l);s.current=l;let o=i.useRef(new ResizeObserver(e=>{for(let t of e){let e=t.target,n="data-key",i=e.getAttribute(n);if(null===i)throw Error(`Value not found, for '${n}' attribute`);s.current(i,e)}}));i.useEffect(()=>{let e=o.current;return()=>{e.disconnect()}},[]);let{size:d,keyExtractor:c=a}=e,u=i.useMemo(()=>{let e=e=>t=>{n.current[e]&&o.current.unobserve(n.current[e]),t&&(s.current(e,t),o.current.observe(t)),n.current[e]=t},t={};for(let n=0;n<d;n++){let i=c(n);t[i]=e(i)}return t},[d,c]),f=(0,r.z)(e),h=f.virtualItems.map(e=>(t.current[e.key]=e.measureRef,{...e,measureRef:u[e.key]}));return{...f,virtualItems:h}}var s=n(51012);function o({additionalScrollOffset:e=0,scrollToFn:t,horizontal:n,parentRef:a,useVirtualImpl:l=r.z,...o}){let d=(0,i.useRef)(window),c=(0,i.useCallback)(()=>{let e=a.current?.getBoundingClientRect(),t=e?.top??0,i=e?.left??0;return n?-1*i:-1*t},[n,a]),u=(0,i.useCallback)(t=>{let i=t+((a.current?.getBoundingClientRect().top??0)+window.scrollY)+e;d.current?.scroll({top:n?0:i,left:n?i:0})},[e,n,a]);return l({...o,horizontal:n,parentRef:a,scrollToFn:t||u,onScrollElement:d,scrollOffsetFn:c,useObserver:()=>(function(e){let[t,n]=(0,i.useState)({height:0,width:0}),r=e.current;return(0,s.N)(()=>{if(!r)return;let e=()=>{let e={height:r.innerHeight,width:r.innerWidth};n(t=>t.height!==e.height||t.width!==e.width?e:t)};return e(),r.addEventListener("resize",e),()=>{r.removeEventListener("resize",e)}},[r]),t})(d)})}},52876:(e,t,n)=>{n.d(t,{T:()=>b});var i=n(9449),r=n(22868),a=n(59857),l=n(281),s=n(75177),o=n(30729),d=n(17909),c=n(44981),u=n(38553),f=n(65481),h=n(55293),m=n(76024);let p=h.memo(function({user:e,isCurrent:t,onSelect:n}){return(0,i.jsxs)(d.l.Item,{selected:t,onSelect:()=>{n&&n(e)},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(r.r,{src:e.primaryAvatarUrl,square:e.path.startsWith("/apps/")})}),e.login,(0,i.jsx)(d.l.Description,{children:e.name})]})});try{p.displayName||(p.displayName="UserItem")}catch{}function g(e){return e.users.length>20?(0,i.jsx)(y,{...e}):(0,i.jsx)(x,{...e})}function x({users:e,currentUser:t,onSelect:n,sx:r={}}){return(0,i.jsx)(s.A,{sx:{maxHeight:330,overflowY:"auto",...r},children:e.map(e=>(0,i.jsx)(p,{user:e,isCurrent:e.login===t?.login,onSelect:n},e.login))})}function y({users:e,currentUser:t,onSelect:n,sx:r={}}){return(0,i.jsx)(m.F,{items:e,itemHeight:33,sx:{maxHeight:330,overflowY:"auto",...r},makeKey:e=>e.login,renderItem:e=>(0,i.jsx)(p,{user:e,isCurrent:e.login===t?.login,onSelect:n},e.login)})}try{g.displayName||(g.displayName="UsersList")}catch{}try{x.displayName||(x.displayName="FullUsersList")}catch{}try{y.displayName||(y.displayName="VirtualUsersList")}catch{}function b(e){let{defaultText:t,usersState:n,currentUser:c,onSelect:u,hotKey:f,onOpenChange:m,renderCustomFooter:p,size:x,showTypedInUser:y=!1,width:b="large",label:w=""}=e,[k,L]=(0,h.useState)(""),S=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(n.users,k);return(0,i.jsx)("div",{children:(0,i.jsxs)(l.W,{onOpenChange:m,children:[(0,i.jsx)(l.W.Button,{"data-hotkey":f,size:x,"data-testid":"user-selector-button",children:(0,i.jsxs)(s.A,{sx:{display:"flex"},children:[(0,i.jsx)(s.A,{sx:{mr:2},children:c?(0,i.jsx)(r.r,{size:16,src:c.primaryAvatarUrl,square:c.path.startsWith("/apps/")}):(0,i.jsx)(o.A,{icon:a.PeopleIcon,size:"small",sx:{color:"fg.muted"}})}),(0,i.jsx)(s.A,{sx:{maxWidth:125,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c?(0,i.jsxs)("span",{children:[w,c.login]}):(0,i.jsx)("span",{children:t})})]})}),(0,i.jsx)(l.W.Overlay,{width:b,children:(0,i.jsxs)(d.l,{showDividers:!0,selectionVariant:"single",children:[(0,i.jsx)(v,{defaultText:k,onFilterChange:L}),(0,i.jsx)(d.l.Divider,{}),n.loading?(0,i.jsx)(j,{}):n.error?(0,i.jsx)(C,{}):0===S.length?(0,i.jsx)(N,{showTypedInUser:y,filterText:k,onSelect:u}):(0,i.jsx)(g,{users:S,currentUser:c,onSelect:u,sx:p?{pb:"10px",pt:1}:{pt:1}}),p&&(0,i.jsx)(d.l.Divider,{sx:{marginTop:0}}),p?.()]})})]})})}function v({onFilterChange:e,defaultText:t}){return(0,i.jsx)(d.l.Group,{sx:{px:2},children:(0,i.jsx)(c.A,{leadingVisual:a.SearchIcon,value:t,sx:{width:"100%"},placeholder:"Find a user...",onChange:t=>e(t.target.value)})})}function j(){return(0,i.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,i.jsx)(u.A,{size:"medium","aria-label":"Loading users..."})})}function C(){return(0,i.jsx)(f.A,{variant:"danger",children:"Could not load users"})}function N({showTypedInUser:e,filterText:t,onSelect:n}){return e?(0,i.jsx)(d.l.Item,{sx:{display:"flex",justifyContent:"center",mb:2},onSelect:()=>{n&&n({login:t,name:t,path:"",primaryAvatarUrl:""})},children:(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)(s.A,{as:"span",sx:{fontWeight:600},children:t})]})}):(0,i.jsx)(s.A,{sx:{p:3,display:"flex",justifyContent:"center"},children:"Nothing to show"})}try{b.displayName||(b.displayName="UserSelector")}catch{}try{v.displayName||(v.displayName="UserFilter")}catch{}try{j.displayName||(j.displayName="Loading")}catch{}try{C.displayName||(C.displayName="LoadingFailed")}catch{}try{N.displayName||(N.displayName="UsersZeroState")}catch{}},93461:(e,t,n)=>{n.d(t,{R:()=>s});var i=n(9449),r=n(97021),a=n(87861),l=n(23449);function s({hideActions:e,lazyFetchEditHistory:t=!1,...n}){let s=null;return s=t?(0,i.jsx)(r.$N,{id:n.comment.id}):(0,i.jsx)(r.WT,{editHistory:n.comment}),(0,i.jsx)(a.v,{...n,actions:e?void 0:(0,i.jsx)(l.p,{...n,editHistoryComponent:s})})}try{s.displayName||(s.displayName="CommentHeader")}catch{}},96711:(e,t,n)=>{n.d(t,{z:()=>a});var i=n(9449),r=n(75177);let a=({onClick:e,id:t,children:n})=>(0,i.jsx)(r.A,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{a.displayName||(a.displayName="CompactCommentButton")}catch{}},71078:(e,t,n)=>{n.d(t,{M:()=>u});var i=n(9449),r=n(38510),a=n(67726),l=n(59857),s=n(44981),o=n(94407),d=n(7512);let c={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,i.jsx)(l.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,i.jsx)(l.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function u({timeoutMessage:e,unavailableMessage:t}){let n=c[""!==e?"timeout":"unavailable"],u=t??n.description;return(0,i.jsx)(d.Z,{children:(0,i.jsx)("div",{"data-hpc":!0,children:(0,i.jsxs)(o.A,{border:!1,spacious:!0,children:[(0,i.jsx)(o.A.Visual,{children:n.icon}),(0,i.jsx)(o.A.Heading,{children:n.heading}),(0,i.jsx)(o.A.Description,{children:u}),n.showTextInput&&(0,i.jsx)(s.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:a.l,readOnly:!0,size:"large",trailingAction:(0,i.jsx)(s.A.Action,{onClick:()=>(0,r.D)(e),icon:l.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{u.displayName||(u.displayName="CommitsBlankState")}catch{}},91805:(e,t,n)=>{n.d(t,{U:()=>c});var i=n(9449),r=n(69404),a=n(75177),l=n(55293),s=n(89793),o=n(7338),d=n(21685);function c({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:c,fileLevelComment:u,filePath:f,focusOnMount:h,isReplying:m,lineNumber:p,onAddComment:g,onCancelComment:x,onPersistedCommentExists:y,quotedText:b="",side:v,subjectId:j,threadId:C,suggestedChangesConfig:N}){let[w,k]=(0,l.useState)(b),[L,S]=(0,l.useState)(!1),[D,I]=(0,l.useState)(),A=(0,l.useRef)(null),{persistCommentToStorage:_,removePersistedCommentFromStorage:E}=(0,s.L)({diffSide:v,filePath:f,line:p,subjectId:j,threadId:C,handlePersistedCommentExists:({text:e})=>{e&&(k(e),y?.())},fileLevelComment:!!u});(0,l.useEffect)(()=>{h&&setTimeout(()=>{A.current?.scrollIntoView({behavior:"smooth",block:"end"}),A.current?.focus()},100)},[h]);let R=({submitBatch:e})=>{S(!0),I(void 0);let t=(0,o.u)(w,N?.sourceContentFromDiffLines??"");if(!t.isValid){I(t.errorMessage),S(!1);return}g?.({commentText:w,onCompleted(){S(!1),M()},onError(e){S(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),I(t)},submitBatch:e})},T=()=>R({submitBatch:!1}),F=()=>R({submitBatch:!0}),M=()=>{E(),k(""),x?.()},O={footer:{justifyContent:m?"end":"space-between","> div:first-child":{display:c||m?"none":"flex"},...c&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(d.S,{ref:A,label:"Add diff comment",sx:O,value:w,onChange:e=>{I(void 0),_({text:e}),k(e)},onPrimaryAction:t?T:F,userSettings:n,suggestedChangesConfig:N,markdownErrorMessage:D,children:[x&&(0,i.jsx)(r.x,{disabled:L,sx:{py:1,px:2},variant:"default",onClick:M,children:"Cancel"}),!e&&(0,i.jsx)(r.x,{disabled:L||!w.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:F,children:m?"Reply":"Add comment"}),t&&(0,i.jsx)(r.x,{disabled:L||!w.length,sx:{py:1,px:2},variant:"primary",onClick:T,children:e?"Add review comment":"Start a review"})]})})}try{c.displayName||(c.displayName="AddCommentEditor")}catch{}},76889:(e,t,n)=>{n.d(t,{Y:()=>p});var i=n(9449),r=n(82667),a=n(22868),l=n(59857),s=n(30729),o=n(75177),d=n(69909),c=n(30631),u=n(55847),f=n(35993),h=n(83994);let m={[f.U.Failure]:(0,i.jsx)(s.A,{icon:l.StopIcon,sx:{fill:"danger.fg"}}),[f.U.Warning]:(0,i.jsx)(s.A,{icon:l.AlertIcon,sx:{fill:"attention.fg"}}),[f.U.Notice]:(0,i.jsx)(s.A,{icon:l.InfoIcon,sx:{fill:"fg.muted"}})};function p({annotation:e,ghostUser:t=r.t.ghostUser}){let n=e.checkSuite.app;return(0,i.jsxs)(o.A,{sx:{borderLeft:"6px solid",borderColor:h.GF[e.annotationLevel].primaryColor,p:4},children:[(0,i.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[m[e.annotationLevel],(0,i.jsx)(d.A,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:h.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(d.A,{sx:{color:h.GF[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,i.jsx)(o.A,{sx:{mb:3,mt:1},children:e.message&&(0,i.jsx)(d.A,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(o.A,{sx:{flexGrow:2},children:[(0,i.jsx)(a.r,{src:n?.logoUrl??t.avatarUrl,alt:`${n?.name??t.login} avatar image`,"data-testid":"check-suite-app-avatar"}),(0,i.jsxs)(c.A,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuite.name} / ${e.checkRun.name}`,children:[(0,i.jsx)(d.A,{sx:{fontWeight:600,fontSize:0},children:e.checkSuite.name})," /"," ",(0,i.jsx)(d.A,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(u.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{p.displayName||(p.displayName="Annotation")}catch{}},23129:(e,t,n)=>{n.d(t,{O:()=>d});var i=n(9449),r=n(59857),a=n(75177),l=n(87330),s=n(76889),o=n(43235);function d({annotation:e,markerNavigationImplementation:t,onClose:n,ghostUser:d}){return(0,i.jsxs)(a.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(a.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsx)(o.k,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,i.jsx)(l.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:r.XIcon,variant:"invisible",onClick:n})})]})}),(0,i.jsx)(s.Y,{annotation:e,ghostUser:d})]})}try{d.displayName||(d.displayName="AnnotationDialog")}catch{}},83994:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>o,Xh:()=>l});var i=n(9449),r=n(38267),a=n(35993);function l({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:a}){return(0,i.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let s=(0,r.i7)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,r.Ay)(l).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],s),d={[a.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[a.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[a.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{l.displayName||(l.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},59028:(e,t,n)=>{n.d(t,{z:()=>h});var i=n(9449),r=n(75177),a=n(55293),l=n(61122),s=n(76919),o=n(67418),d=n(34676),c=n(96985),u=n(33282),f=n(60573);function h({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,l.W)(),[h,m]=(0,a.useState)(!1),p=(0,a.useRef)(),{pendingSuggestedChangesBatch:g,submitSuggestedChanges:x}=e,y=(0,s.c0)(t,g),b=0===g.length,{isValid:v,reason:j}=(0,s.EJ)(t,g),C=(0,a.useMemo)(()=>y?g:[t],[y,g,t]),N=(0,a.useCallback)(e=>{m(e),n?.(e)},[n]),w=(0,a.useCallback)(()=>{if(N(!1),p.current){let e=p.current.current;setTimeout(()=>e?.focus())}},[N]),k=(0,a.useCallback)(e=>{N(!0),p.current=e},[N,p]),L=(0,a.useCallback)((e,t,n)=>{x({suggestedChanges:C,commitMessage:e,onCompleted:()=>{w(),n()},onError:t})},[w,x,C]);return(0,i.jsxs)(r.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[y&&(0,i.jsx)(f.B,{commentingImplementation:e,suggestedChange:t,onOpenDialog:k}),!y&&!v&&j&&(0,i.jsx)(u.s,{reason:j,sx:{m:0}}),!y&&b&&(0,i.jsx)(d.a,{commentingImplementation:e,suggestedChange:t,onOpenDialog:k}),!y&&v&&!b&&(0,i.jsx)(o.k,{commentingImplementation:e,suggestedChange:t}),h&&(0,i.jsx)(c.$,{authorLogins:C.map(e=>e.authorLogin),batchSize:C.length,onClose:w,onCommit:L})]})}try{h.displayName||(h.displayName="CodeSuggestionActions")}catch{}},67418:(e,t,n)=>{n.d(t,{k:()=>s});var i=n(9449),r=n(71312),a=n(75177),l=n(55847);function s({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,r.s)();return(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(l.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{s.displayName||(s.displayName="AddToExistingBatch")}catch{}},34676:(e,t,n)=>{n.d(t,{a:()=>m});var i=n(9449),r=n(71312),a=n(59857),l=n(75177),s=n(6185),o=n(55847),d=n(87330),c=n(281),u=n(17909),f=n(55293);let h={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function m({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:m}=(0,r.s)(),[p,g]=(0,f.useState)(h.addSuggestionToBatch),[x,y]=(0,f.useState)(!1),b=(0,f.useRef)(null),v=(0,f.useRef)(null),j=()=>y(!x),{addSuggestedChangeToPendingBatch:C}=e,N=(0,f.useCallback)(()=>{p===h.addSuggestionToBatch&&(C(n),m("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),p===h.applySuggestion&&t(v)},[C,t,p,m,n]);return(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(s.A,{children:[(0,i.jsx)(o.Q,{variant:"primary",onClick:N,ref:v,children:p.text}),(0,i.jsx)(d.K,{unsafeDisableTooltip:!0,ref:b,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:a.TriangleDownIcon,size:"medium",variant:"primary",onClick:j}),(0,i.jsx)(c.W,{anchorRef:b,open:x,onOpenChange:j,children:(0,i.jsx)(c.W.Overlay,{width:"medium",children:(0,i.jsx)(u.l,{selectionVariant:"single",children:Object.keys(h).map(e=>{let t=h[e];return(0,i.jsx)(u.l.Item,{selected:p===t,onSelect:()=>g(t),children:t.text},e)})})})})]})})}try{m.displayName||(m.displayName="ApplyOrAddToBatch")}catch{}},96985:(e,t,n)=>{n.d(t,{$:()=>y});var i=n(9449),r=n(71312),a=n(73272),l=n(94120),s=n(82678),o=n(75177),d=n(38553),c=n(66889),u=n(44981),f=n(61043),h=n(86079),m=n(55293);function p({children:e,footerButtons:t}){let{containerRef:n}=(0,s.G)({bindKeys:l.z0.ArrowHorizontal|l.z0.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(h.l.Footer,{ref:n,children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(h.l.Buttons,{buttons:t})}),e]})}):null}let g={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case g.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case g.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function y({authorLogins:e,batchSize:t,onClose:n,onCommit:l}){let s=(0,a.A)(),{sendAnalyticsEvent:y}=(0,r.s)(),[b,v]=(0,m.useState)(!1),[j,C]=(0,m.useState)(),[N,w]=(0,m.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),k=(0,m.useCallback)((e,t,n)=>{if(!s())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",v(!1),C(i)},[s]),L=(0,m.useCallback)(()=>{s()&&(v(!1),j&&C(void 0))},[j,s]),S=(0,m.useCallback)(()=>{b||(v(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),l(`${N.commitMessage}

${N.extendedDescription}`,k,L))},[t,N.commitMessage,N.extendedDescription,L,k,b,l,y]);return(0,i.jsxs)(h.l,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(p,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(o.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",b&&(0,i.jsx)(d.A,{size:"small",sx:{ml:1}})]}),onClick:S,buttonType:"primary"}],children:j&&(0,i.jsx)(c.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:j})}),onClose:n,children:[(0,i.jsxs)(c.A,{sx:{mb:2},children:[(0,i.jsx)(c.A.Label,{children:"Commit message"}),(0,i.jsx)(u.A,{block:!0,name:"commit_message",onChange:e=>w({type:g.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:N.commitMessage})]}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(c.A.Label,{children:"Extended description (optional)"}),(0,i.jsx)(f.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>w({type:g.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:N.extendedDescription})]})]})}try{p.displayName||(p.displayName="DialogFooter")}catch{}try{y.displayName||(y.displayName="ApplySuggestionDialog")}catch{}},33282:(e,t,n)=>{n.d(t,{s:()=>l});var i=n(9449),r=n(75177),a=n(69909);function l({reason:e,sx:t}){return(0,i.jsx)(r.A,{sx:{m:2,...t},children:(0,i.jsx)(a.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{l.displayName||(l.displayName="CodeSuggestionUnavailable")}catch{}},60573:(e,t,n)=>{n.d(t,{B:()=>d});var i=n(9449),r=n(71312),a=n(75177),l=n(85053),s=n(55847),o=n(55293);function d({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let d=(0,o.useRef)(null),c=(0,o.useCallback)(()=>{t(d)},[t]),u=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:f}=(0,r.s)();return(0,i.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(l.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(a.A,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(s.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),f("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(s.Q,{ref:d,size:"medium",count:u,variant:"primary",onClick:c,children:`Apply suggestion${u>1?"s":""}`})]})]})}try{d.displayName||(d.displayName="CommitOrRemoveFromBatch")}catch{}},21685:(e,t,n)=>{n.d(t,{S:()=>s});var i=n(9449),r=n(35678),a=n(55293),l=n(14993);let s=(0,a.forwardRef)(({children:e,...t},n)=>{let a=(0,l.n)();return(0,i.jsx)(r.h,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:a??void 0,showLabel:!1})});s.displayName="ConversationCommentBox"},43235:(e,t,n)=>{n.d(t,{k:()=>d});var i=n(9449),r=n(59857),a=n(69909),l=n(75177),s=n(87330);function o({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,i.jsxs)(a.A,{sx:{color:"fg.muted"},children:[(0,i.jsx)(a.A,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,i.jsx)(a.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function d({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:a,decrementActiveMarker:d,filteredMarkers:c}=t;return c.find(t=>t.id===e)&&c.length>1?(0,i.jsxs)(l.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:r.ChevronLeftIcon,variant:"invisible",onClick:()=>{d(e),n()}}),(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:r.ChevronRightIcon,variant:"invisible",onClick:()=>{a(e),n()}}),(0,i.jsx)(l.A,{sx:{ml:1},children:(0,i.jsx)(o,{markerId:e,markers:c})})]}):null}try{o.displayName||(o.displayName="MarkerPosition")}catch{}try{d.displayName||(d.displayName="GlobalMarkerNavigation")}catch{}},37045:(e,t,n)=>{n.d(t,{c:()=>h});var i=n(9449),r=n(67726),a=n(85349),l=n(75177),s=n(38553),o=n(55293),d=n(61122),c=n(23129),u=n(21746),f=n(7498);function h(e){return(0,i.jsx)(d.j,{children:(0,i.jsx)(m,{...e})})}function m({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:h,conversationListThreads:m,isMarkerListOpen:p,fileAnchor:g,filePath:x,onAnnotationSelected:y,onCloseConversationDialog:b,onCloseConversationList:v,onThreadSelected:j,returnFocusRef:C,selectedAnnotationId:N,selectedThreadId:w,threadsConnectionId:k,markerNavigationImplementation:L,suggestedChangesConfig:S,ghostUser:D,...I}){let{isDialogOpen:A}=(0,d.W)(),[_,E]=(0,o.useState)(),{fetchThread:R}=t,T=(0,o.useCallback)(()=>!A&&b(),[A,b]),F=async e=>{E(void 0);let t=m.find(t=>t.id===e)?.isOutdated;E(await R(e,t))},M=(0,o.useMemo)(()=>{if(g&&_&&_.subject?.startDiffSide&&_.subject?.endDiffSide&&_.subject?.startLine&&_.subject?.endLine&&S?.configureSuggestedChangesFromLineRange){let e=_.subject?.startLine??_?.subject?.endLine,t=_.subject?.startDiffSide??_?.subject?.endDiffSide,n={diffAnchor:g,endLineNumber:_?.subject?.endLine,endOrientation:_.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return S?.configureSuggestedChangesFromLineRange(n)}},[g,_,S]);(0,o.useEffect)(()=>{!w&&_?E(void 0):w&&w!==_?.id&&F(w)},[R,w]);let O=w||N,P=N?e.find(e=>e.id===N):void 0;return(0,i.jsx)(i.Fragment,{children:O?(0,i.jsx)(a.T,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${w?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:C,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:r.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:T,children:_?(0,i.jsx)(f.h,{commentingImplementation:t,filePath:x,thread:_,threads:m,threadsConnectionId:k,onClose:T,onThreadSelected:j,onRefreshThread:F,markerNavigationImplementation:L,suggestedChangesConfig:M,ghostUser:D,...I}):P?(0,i.jsx)(c.O,{annotation:P,markerNavigationImplementation:L,onClose:T,ghostUser:D}):(0,i.jsxs)(l.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(s.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]})}):p&&(0,i.jsx)(u.h,{anchorRef:h,annotations:e,handleOpenChange:v,threads:m,onShowCommentThread:j,onShowAnnotation:y,ghostUser:D})})}try{h.displayName||(h.displayName="Markers")}catch{}try{m.displayName||(m.displayName="MarkersInternal")}catch{}},21746:(e,t,n)=>{n.d(t,{h:()=>h});var i=n(9449),r=n(82667),a=n(22868),l=n(59857),s=n(281),o=n(17909),d=n(75177),c=n(69909),u=n(30729),f=n(83994);function h({anchorRef:e,annotations:t,handleOpenChange:n,threads:h,onShowAnnotation:m,onShowCommentThread:p,ghostUser:g=r.t.ghostUser}){function x(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,i.jsx)(s.W,{anchorRef:e,open:!0,onOpenChange:n,children:(0,i.jsx)(s.W.Overlay,{width:"small",children:(0,i.jsx)("div",{children:(0,i.jsxs)(o.l,{children:[t.map(e=>(0,i.jsxs)(o.l.Item,{onSelect:()=>m(e.id),children:[(0,i.jsx)(o.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(f.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,i.jsxs)(d.A,{sx:{...x(2)},children:[e.checkSuite.name," /"," ",(0,i.jsx)(c.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,i.jsx)(o.l.Description,{variant:"block",children:(0,i.jsx)(d.A,{sx:{...x(1)},children:e.title})}),(0,i.jsx)(o.l.TrailingVisual,{children:(0,i.jsx)(u.A,{icon:l.ArrowRightIcon})})]},e.id)),h.map(e=>(0,i.jsxs)(o.l.Item,{onSelect:()=>p(e.id),children:[(0,i.jsx)(o.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(a.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??g.avatarUrl})}),"Thread by ",e.author.login,(0,i.jsxs)(o.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,i.jsx)(o.l.TrailingVisual,{children:(0,i.jsx)(u.A,{icon:l.ArrowRightIcon})})]},e.id))]})})})})}try{h.displayName||(h.displayName="MarkersListActionMenu")}catch{}},36470:(e,t,n)=>{n.d(t,{H:()=>h});var i=n(9449),r=n(96711),a=n(71312),l=n(75177),s=n(55293),o=n(81773),d=n(76919),c=n(91805),u=n(25607),f=n(14233);function h({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:h,commentsConnectionId:m,filePath:p,hideDiffPreview:g,onRefreshThread:x,repositoryId:y,subject:b,subjectId:v,tabSize:j,thread:C,threadsConnectionId:N,shouldLimitHeight:w=!0,suggestedChangesConfig:k,viewerData:L,ghostUser:S}){let[D,I]=(0,s.useState)(!1),[A,_]=(0,s.useState)(void 0),{sendAnalyticsEvent:E}=(0,a.s)(),{addThreadReply:R}=h,T=e=>{_(e),I(!0)};if(null===C.commentsData.comments||C.commentsData.comments.length<1)return null;let F=(0,d.Lm)(C),M="LINE"===C.subjectType?{lineRange:F}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)(l.A,{sx:w?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!g&&C.isOutdated&&(0,i.jsx)(f.i,{tabSize:j??4,thread:C}),C.commentsData.comments.map((e,t)=>(0,i.jsx)(u.U,{isAnchorable:!0,index:t,isLastChild:t===C.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:C.commentsData.__id,commentingImplementation:h,filePath:p,isOutdated:C.isOutdated,repositoryId:y,subject:b,subjectId:v,threadId:C.id,onRefreshThread:x,onQuoteReply:T,threadCommentCount:C.commentsData.comments.length,threadsConnectionId:N,isThreadResolved:!!C.isResolved,suggestedChangesConfig:k,applySuggestedChangesValidationData:M,viewerData:L,ghostUser:S},e.id)),C.viewerCanReply&&(0,i.jsxs)(l.A,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[D&&(0,i.jsx)(c.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:h.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:p,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{I(!1),E("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:y,quotedText:A,subjectId:v,threadId:C.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=[];C.commentsData.__id&&r.push(C.commentsData.__id),m&&r.push(m),R({commentsConnectionIds:r,filePath:p,thread:C,text:e,submitBatch:i,onCompleted:e=>{e&&(0,o.p)(e.toString()),t?.(),x?.(C.id)},onError:n,threadsConnectionId:N}),E("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:k}),!D&&(0,i.jsx)(r.z,{onClick:()=>{E("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),I(!0)},children:"Write a reply"})]})]})})}try{h.displayName||(h.displayName="ReviewThread")}catch{}},25607:(e,t,n)=>{n.d(t,{U:()=>v});var i=n(9449),r=n(35678),a=n(93461),l=n(82667),s=n(67726),o=n(67482),d=n(34306),c=n(22084),u=n(97156),f=n(54156),h=n(75177),m=n(55293),p=n(81773),g=n(89793),x=n(7338),y=n(21685),b=n(59158);function v({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:v,isThreadResolved:j,anchorPrefix:C="r",comment:N,commentingImplementation:w,filePath:k,hideActions:L,onRefreshThread:S,onQuoteReply:D=s.l,subjectId:I,subject:A,threadCommentCount:_,threadId:E,threadsConnectionId:R,suggestedChangesConfig:T,applySuggestedChangesValidationData:F,viewerData:M,ghostUser:O=l.t.ghostUser}){let{addToast:P}=(0,f.Y6)(),[H,B]=(0,m.useState)(!1),[$,U]=(0,m.useState)(N.isHidden),[W,V]=(0,m.useState)(N.body),[z,q]=(0,m.useState)(!1),[G,K]=(0,m.useState)(),{persistCommentToStorage:X,removePersistedCommentFromStorage:Q}=(0,g.L)({subjectId:I,filePath:k,fileLevelComment:"FILE"===N.subjectType,threadId:N.id,handlePersistedCommentExists:({text:e})=>{e&&V(e)}}),{editComment:Y,deleteComment:J,hideComment:Z,unhideComment:ee,lazyFetchReactionGroups:et,lazyFetchEditHistory:en}=w,ei=(0,m.useRef)(null),er=(0,m.useRef)(null),ea=()=>{ei.current?.focus()};(0,m.useEffect)(()=>{H&&setTimeout(ea)},[H]);let el=(0,m.useCallback)(()=>{q(!0);let e=(0,x.u)(W,T?.sourceContentFromDiffLines??"");if(!e.isValid){K(e.errorMessage),q(!1);return}Y({text:W,comment:N,onCompleted:()=>{B(!1),q(!1),Q(),S?.(E)},onError:()=>{q(!1),P({type:"error",message:"Failed to update comment"})}})},[P,W,N,Y,S,Q,T,E]),es=N.currentDiffResourcePath?.split("#r").pop(),eo=es?`${C}${es}`:void 0,ed=eo&&u.fV?new URL(`${u.fV.pathname}#${eo}`,u.fV.origin).toString():void 0,ec=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&es&&eo&&window.location.hash.split("#").pop()===eo&&((0,p.p)(es,C),ec.current?.focus())},[C,eo,es,e]);let eu={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},ef=t>0,eh=t>1,em=w.suggestedChangesEnabled,ep=H?"editing":$?"hidden":"visible";return(0,i.jsxs)(h.A,{ref:ec,id:e?eo:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eu,":focus":eu,pb:ef?0:2},children:[eh&&(0,i.jsx)(h.A,{sx:{display:"flex",pl:ef?1:0},children:(0,i.jsx)(h.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(h.A,{sx:{px:3,pt:eh?0:2,pb:0},children:(0,i.jsx)(a.R,{headingProps:{as:"h5"},avatarUrl:N.author?.avatarUrl??O.avatarUrl,comment:{...N,url:ed??"",referenceText:N.reference.text??`#${N.reference.number}`},commentRef:ec,deleteComment:()=>{J({commentId:N.id,onCompleted:()=>{S?.(E)},onError:()=>{q(!1),P({type:"error",message:"Failed to delete comment"})},threadCommentCount:_,threadId:E,threadsConnectionId:R,filePath:k})},editComment:()=>{B(!0)},hideComment:e=>{Z({commentId:N.id,reason:e,onCompleted:()=>{S?.(E)},onError:()=>{q(!1),P({type:"error",message:"Failed to hide comment"})}})},onMinimize:U,isMinimized:$,commentAuthorLogin:N.author?.login??O.login,navigate:s.l,commentSubjectAuthorLogin:N.reference?.author?.login??"",commentSubjectType:w.commentSubjectType,onReplySelect:D,unhideComment:()=>{ee({commentId:N.id,onCompleted:()=>{S?.(E)},onError:()=>{q(!1),P({type:"error",message:"Failed to unhide comment"})}})},hideActions:L,lazyFetchEditHistory:en,isReply:!0})}),(0,i.jsxs)(h.A,{sx:{display:"flex",pl:ef?1:0},children:[ef&&(0,i.jsx)(h.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===ep&&(0,i.jsx)(h.A,{sx:{pr:2,pl:ef?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(y.S,{ref:ei,label:"Update comment",value:W,onChange:e=>{X({text:e}),V(e),K(void 0)},onPrimaryAction:el,userSettings:w.commentBoxConfig,suggestedChangesConfig:T,markdownErrorMessage:G,children:[(0,i.jsx)(r.x,{variant:"default",onClick:()=>{B(!1),Q(),V(N.body)},children:"Cancel"}),(0,i.jsx)(r.x,{disabled:z||!W.length,variant:"primary",onClick:el,children:"Update"})]})}),"visible"===ep&&(0,i.jsx)(h.A,{sx:ef?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:N.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.oG,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${N.id}`,html:N.bodyHTML,sx:{mt:1,fontSize:1}}),(0,i.jsx)(h.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:et?(0,i.jsx)(m.Suspense,{fallback:(0,i.jsx)(d.e,{}),children:(0,i.jsx)(o.ReactionViewerQueryComponent,{id:N.id})}):(0,i.jsx)(o.ReactionViewer,{reactionGroups:N,subjectId:N.id})}),em&&F&&(0,i.jsx)(b.v,{comment:N,commentBodyRef:er,commentingImplementation:w,filePath:k,isOutdated:v,isThreadResolved:j,threadId:E,suggestedChangesConfig:T,applySuggestedChangesValidationData:F,subject:A,viewerData:M})]})})]})]})}try{v.displayName||(v.displayName="ReviewThreadComment")}catch{}},7498:(e,t,n)=>{n.d(t,{h:()=>y});var i=n(9449),r=n(54156),a=n(71312),l=n(59857),s=n(69909),o=n(75177),d=n(85053),c=n(87330),u=n(38553),f=n(80577),h=n(55293),m=n(43235),p=n(36470);function g({children:e}){return(0,i.jsx)(s.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function x({thread:e}){if(!e?.diffSide||!e.line||!e.startLine||!e.startDiffSide)return null;let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(s.A,{sx:{color:"fg.muted"},children:["\xb7 Comment on lines"," ",(0,i.jsxs)(g,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(g,{children:[n,e.line]})]})}function y({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:s,thread:g,threads:y,threadsConnectionId:b,markerNavigationImplementation:v,ghostUser:j,...C}){let{sendAnalyticsEvent:N}=(0,a.s)(),{resolveThread:w,unresolveThread:k,resolvingEnabled:L}=e,S=y.find(e=>e.id===g.id),D=g.commentsData.comments.length>0,I=!!g.isResolved,{addToast:A}=(0,r.Y6)(),_=S?.commentsConnectionId;return D?(0,i.jsxs)(o.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(o.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.k,{markerId:g.id,markerNavigationImplementation:v,onNavigate:n}),(0,i.jsx)(x,{thread:S})]}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[I&&(0,i.jsx)(d.A,{variant:"done",size:"large",children:"Resolved"}),L&&(0,i.jsx)(f.m,{text:I?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(c.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:I?l.CheckCircleFillIcon:l.CheckCircleIcon,sx:{color:I?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:I?()=>{k({thread:g,onCompleted:()=>s(g.id),onError:()=>{A({type:"error",message:"Failed to unresolve thread"})}}),N("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{w({thread:g,onCompleted:()=>s(g.id),onError:()=>{A({type:"error",message:"Failed to resolve thread"})}}),N("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,i.jsx)(c.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:l.XIcon,variant:"invisible",onClick:n})]})]})}),(0,i.jsx)(h.Suspense,{fallback:(0,i.jsxs)(o.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(u.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(p.H,{commentingImplementation:e,commentsConnectionId:_,filePath:t,onRefreshThread:s,thread:g,threadsConnectionId:b,...C,ghostUser:j})})]}):null}try{g.displayName||(g.displayName="Emphasis")}catch{}try{x.displayName||(x.displayName="MultineLineThreadBanner")}catch{}try{y.displayName||(y.displayName="ReviewThreadDialog")}catch{}},54465:(e,t,n)=>{n.d(t,{c:()=>d});var i=n(9449),r=n(67726),a=n(71312),l=n(85349),s=n(55293),o=n(20189);function d({align:e="end",anchorRef:t,isOpen:n,returnFocusRef:d,onCloseCommentDialog:c,suggestedChangesConfig:u,...f}){let{sendAnalyticsEvent:h}=(0,a.s)(),m=(0,s.useMemo)(()=>{if(n&&u?.configureSuggestedChangesFromLineRange)return u.configureSuggestedChangesFromLineRange(u?.selectedDiffRowRange,u?.shouldStartNewConversationWithSuggestedChange)},[n,u]);return n?(0,i.jsx)(l.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",returnFocusRef:d,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:r.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:c,children:(0,i.jsx)(o.O,{onClose:()=>{c(),h("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...f})}):null}try{d.displayName||(d.displayName="StartConversation")}catch{}},20189:(e,t,n)=>{n.d(t,{O:()=>u});var i=n(9449),r=n(22868),a=n(59857),l=n(75177),s=n(73729),o=n(87330),d=n(81773),c=n(91805);function u({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:u,onAddComment:f,onClose:h,viewerData:m,threadsConnectionId:p,...g}){return(0,i.jsxs)(l.A,{sx:{px:2,pb:2,pt:1},children:[(0,i.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(s.A,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,i.jsx)(r.r,{alt:m.login,size:24,src:m.avatarUrl||"",sx:{mr:2}}),(0,i.jsx)("span",{children:e??"Add a comment"})]}),h&&(0,i.jsx)(o.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:a.XIcon,onClick:h,"aria-label":"Cancel"})]}),(0,i.jsx)(c.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:u,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:r})=>{f({text:e,onError:i,onCompleted:(e,n)=>{n&&(0,d.p)(n.toString()),t?.(e,n)},submitBatch:r,filePath:n,threadsConnectionId:p})},onCancelComment:h,side:t?"LEFT":"RIGHT",...g})]})}try{u.displayName||(u.displayName="StartThreadComment")}catch{}},14233:(e,t,n)=>{n.d(t,{i:()=>p});var i=n(9449),r=n(51888),a=n(88234),l=n(22084),s=n(75177),o=n(69909),d=n(20053),c=n(55293);function u({line:e,children:t}){return(0,i.jsx)("td",{className:"diff-line-number",style:{backgroundColor:(0,r.gK)(e.type,!0),textAlign:"center"},children:(0,i.jsx)("code",{children:t})})}function f({line:e}){return(0,i.jsx)("td",{colSpan:4,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},valign:"top",children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row"},children:[(0,i.jsx)(a.P4,{}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(l.mo,{className:"diff-text-inner color-fg-muted",html:e.html})})]})})}function h({line:e,tabSize:t}){let n="HUNK"===e.type,s="ADDITION"!==e.type,o="DELETION"!==e.type,{getTextIndent:h,getPaddingLeft:m}=(0,c.useMemo)(()=>(0,a.oW)(e.text,t),[e,t]),p="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,i.jsxs)("tr",{children:[n&&(0,i.jsx)(f,{line:e}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u,{line:e,children:s&&e.left}),(0,i.jsx)(u,{line:e,children:o&&e.right}),(0,i.jsx)("td",{className:"diff-text-cell",style:{backgroundColor:(0,r.gK)(e.type,!1)},children:(0,i.jsxs)("code",{className:(0,d.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[!!p&&(0,i.jsx)("span",{className:"diff-text-marker",children:p}),(0,i.jsx)(l.mo,{className:"diff-text-inner",html:e.html,style:{backgroundColor:(0,r.gK)(e.type,!1),paddingLeft:m(),textIndent:h()}})]})})]})]})}function m({sx:e,lines:t,lineWidth:n,tabSize:r}){let l=t.map((e,t)=>(0,i.jsx)(h,{line:e,tabSize:r},t));return(0,i.jsx)(s.A,{as:"table",className:"tab-size","data-tab-size":r,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,i.jsx)(a.Qe,{lineWidth:n,children:l})})}function p({sx:e,tabSize:t,thread:n,hideHeaderDetails:l,diffTableSx:d}){if(!n.subject?.diffLines||n.subject?.diffLines.length<1)return null;let c=(0,r.c7)(n.subject.diffLines);return(0,i.jsxs)(s.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!l&&(0,i.jsx)(s.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(o.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,a.Ah)({originalStartLine:n.subject.originalStartLine,originalEndLine:n.subject.originalEndLine,startDiffSide:n.subject.startDiffSide,endDiffSide:n.subject.endDiffSide}),", commit ",(0,i.jsx)("code",{children:n.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(m,{lineWidth:c,lines:n.subject.diffLines,tabSize:t,sx:d})]})}try{u.displayName||(u.displayName="StaticLineNumberCell")}catch{}try{f.displayName||(f.displayName="StaticHunkCell")}catch{}try{h.displayName||(h.displayName="StaticUnifiedDiffRow")}catch{}try{m.displayName||(m.displayName="StaticUnifiedDiffLines")}catch{}try{p.displayName||(p.displayName="StaticUnifiedDiffPreview")}catch{}},59158:(e,t,n)=>{n.d(t,{v:()=>c});var i=n(9449),r=n(51012),a=n(55293),l=n(56940),s=n(76919),o=n(59028),d=n(33282);function c({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:c,filePath:u,isOutdated:f,isThreadResolved:h,subject:m,suggestedChangesConfig:p,threadId:g,viewerData:x}){let y=function(e,t,n,i,l){let[s,o]=(0,a.useState)();return(0,r.N)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let a of r){let r=a?.closest("div.js-suggested-changes-blob");if(!r)continue;let s=[...r.querySelectorAll(".js-blob-code-addition")];l.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:a,suggestion:s.map(e=>e.textContent),lineRange:l.lineRange,threadId:i})}o(e)}},[l.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),s}(n,t,u,g,e);return(0,i.jsx)(i.Fragment,{children:y?.length&&y.map(n=>{let{isValid:r,reason:a}=(0,s.o_)({suggestedChange:n,isOutdated:f,isPending:"PENDING"===t.state,isResolved:h,pullRequestIsClosed:m?.state!=="OPEN",pullRequestIsInMergeQueue:!!m?.isInMergeQueue,userCanApplySuggestion:!!x?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:p});return!r&&a?(0,l.createPortal)((0,i.jsx)(d.s,{reason:a}),n.ref):(0,l.createPortal)((0,i.jsx)(o.z,{commentingImplementation:c,suggestedChange:n}),n.ref)})})}try{c.displayName||(c.displayName="SuggestedChangeView")}catch{}},14993:(e,t,n)=>{n.d(t,{n:()=>a,u:()=>l});var i=n(55293);let r=(0,i.createContext)(null),a=()=>(0,i.useContext)(r),l=r.Provider;try{r.displayName||(r.displayName="ConversationMarkdownSubjectContext")}catch{}},61122:(e,t,n)=>{n.d(t,{W:()=>s,j:()=>l});var i=n(9449),r=n(55293);let a=(0,r.createContext)({});function l({children:e}){let[t,n]=(0,r.useState)(!1),l=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(a.Provider,{value:l,children:e})}let s=()=>(0,r.useContext)(a);try{a.displayName||(a.displayName="DialogStateContext")}catch{}try{l.displayName||(l.displayName="DialogStateProvider")}catch{}},81602:(e,t,n)=>{n.d(t,{$:()=>d});var i=n(9449),r=n(59857),a=n(17909),l=n(38553),s=n(23246),o=n(79476);let d=e=>(0,i.jsx)(o.B,{errorFallback:(0,i.jsx)(c,{}),suspenseFallback:(0,i.jsx)(u,{}),Component:f,...e}),c=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]})]}),u=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(l.A,{size:"small"})}),"Copilot is loading..."]})]}),f=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsx)(s.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(r.CopilotIcon,{}),fileDiffReference:e.fileDiffReference})]});try{d.displayName||(d.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}try{c.displayName||(c.displayName="MenuItemError")}catch{}try{u.displayName||(u.displayName="MenuItemLoading")}catch{}try{f.displayName||(f.displayName="BaseCopilotDiffChatBlobActionsMenuItems")}catch{}},19987:(e,t,n)=>{n.d(t,{w:()=>h});var i=n(9449),r=n(59857),a=n(17909),l=n(38553),s=n(281),o=n(55293),d=n(78017),c=n(23246),u=n(39037),f=n(79476);let h=({selectedRange:e,...t})=>(0,i.jsx)(f.B,{errorFallback:(0,i.jsx)(m,{}),suspenseFallback:(0,i.jsx)(p,{}),componentProps:{selectedRange:e},Component:g,...t}),m=()=>(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]}),p=()=>(0,i.jsxs)(a.l.Item,{disabled:!0,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(l.A,{size:"small"})}),"Copilot is loading..."]}),g=({fileDiffReference:e,selectedRange:t})=>{let n=(0,o.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(s.W,{children:[(0,i.jsx)(s.W.Anchor,{children:(0,i.jsxs)(a.l.Item,{children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(s.W.Overlay,{children:(0,i.jsxs)(a.l,{children:[(0,i.jsx)(c.t,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(u.e,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(d.i,{fileDiffReference:n,eventContext:{prx:!0}})]})})]})};try{h.displayName||(h.displayName="CopilotDiffChatContextMenu")}catch{}try{m.displayName||(m.displayName="MenuItemError")}catch{}try{p.displayName||(p.displayName="MenuItemLoading")}catch{}try{g.displayName||(g.displayName="BaseCopilotDiffChatContextMenu")}catch{}},79476:(e,t,n)=>{n.d(t,{B:()=>p,x:()=>f});var i=n(9449),r=n(91160),a=n(44196),l=n(55293),s=n(18312),o=n(54371);let d=n(45307),c=n(53706),u=n(71324),f=({children:e})=>{let{viewer:t}=(0,s.useLazyLoadQuery)(d,{});return t.isCopilotDotcomChatEnabled?(0,i.jsx)(i.Fragment,{children:e}):null},h=({Component:e,componentProps:t,queryVariables:n})=>{let{pullRequest:a}=(0,s.useLazyLoadQuery)(c,n),{diffEntry:l}=(0,s.useLazyLoadQuery)(u,n);(0,r.M)(a?.comparison),(0,r.M)(l);let d=(0,o.Kf)(a.comparison,l);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},m=({Component:e,componentProps:t,referenceData:n,queryVariables:a})=>{let{pullRequest:l}=(0,s.useLazyLoadQuery)(c,a);(0,r.M)(l?.comparison);let d=(0,o.hQ)(l?.comparison,n);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},p=({Component:e,componentProps:t,errorFallback:n=null,suspenseFallback:r=null,...s})=>(0,i.jsx)(a.t,{fallback:n,children:(0,i.jsx)(l.Suspense,{fallback:r,children:(0,i.jsx)(f,{children:s.referenceData?(0,i.jsx)(m,{Component:e,componentProps:t,referenceData:s.referenceData,queryVariables:s.queryVariables}):(0,i.jsx)(h,{Component:e,componentProps:t,queryVariables:s.queryVariables})})})});try{f.displayName||(f.displayName="CopilotCodeChatAccessLoader")}catch{}try{h.displayName||(h.displayName="CopilotCodeChatReferenceLoader")}catch{}try{m.displayName||(m.displayName="CopilotCodeChatComparisonLoader")}catch{}try{p.displayName||(p.displayName="DiffChatWrapper")}catch{}},78017:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(9449),r=n(822),a=n(51848),l=n(54156),s=n(17909);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:o}=(0,l.Y6)();return(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,r.Oc)(e),o({message:"Reference added to thread",type:"success"}),(0,a.BI)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},23246:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(9449),r=n(822),a=n(89426),l=n(51848),s=n(17909);let o=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:o})=>(0,i.jsxs)(s.l.Item,{onSelect:()=>{(0,r.qR)({intent:a.wh.conversation,references:[e]}),(0,l.BI)("copilot.file-diff.discuss",n),o?.()},children:[t&&(0,i.jsx)(s.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{o.displayName||(o.displayName="DiffLinesDiscussMenuItem")}catch{}},39037:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(9449),r=n(822),a=n(89426),l=n(51848),s=n(17909);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,r.qR)({content:"Explain",intent:a.wh.explainFileDiff,references:[e]}),(0,l.BI)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{o.displayName||(o.displayName="DiffLinesExplainMenuItem")}catch{}},48058:(e,t,n)=>{n.d(t,{Fv:()=>m,kF:()=>p,F7:()=>h});var i=n(9449),r=n(59857),a=n(44981),l=n(281),s=n(87330),o=n(38553),d=n(17909),c=n(55293),u=n(20053);let f={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},h="No extension";function m({filterText:e,onFilterTextChange:t}){return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(a.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:e,onChange:e=>t?.(e.target.value)}),(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Anchor,{children:(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(l.W.Overlay,{className:(0,u.$)(f.filterLoadingHeight),children:(0,i.jsx)("div",{className:(0,u.$)("d-flex","flex-column","flex-justify-center","flex-items-center",f.filterLoadingHeight),children:(0,i.jsx)(o.A,{size:"medium"})})})]})]})}function p({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:o,onFilterChange:u,additionalFilterGroups:f}){let[m,p]=(0,c.useState)(e),g=(e,t)=>{u?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Array.from(n||[]).filter(e=>e!==h).sort(),y=e=>!o?.has(e),b=n?.has(h);return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(a.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:m,onChange:e=>{p(e.target.value),t?.(e.target.value)}}),(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Anchor,{children:(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsxs)(d.l,{children:[(0,i.jsxs)(d.l.Group,{selectionVariant:"multiple",children:[(0,i.jsx)(d.l.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,i.jsx)(d.l.Item,{selected:t,onSelect:()=>g(!t,e),children:`${e}`},e)}),b&&(0,i.jsx)(d.l.Item,{selected:y(h),onSelect:()=>g(!y(h),h),children:h},h)]}),f]})})]})]})}try{m.displayName||(m.displayName="FileFilterLoading")}catch{}try{p.displayName||(p.displayName="FileFilterShared")}catch{}},6102:(e,t,n)=>{n.d(t,{E:()=>C});var i=n(9449),r=n(59857),a=n(64515),l=n(6185),s=n(55847),o=n(87330),d=n(281),c=n(17909),u=n(55293),f=n(97177),h=n(27267),m=n(78896),p=n(64553),g=n(47765),x=n(19145),y=n(27621);let b={position:"absolute",right:"-16px",top:"0px",zIndex:2},v="24px",j="30px",C=(0,u.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:C,showStartConversation:N,hasDraftComment:w,copilotChatReferenceData:k},L){let S=(0,u.useRef)(null),D=(0,u.useRef)(null),{commentingEnabled:I}=(0,f.y)(),{diffLine:A,isRowSelected:_}=(0,h.s)(),E=(0,u.useRef)(null),R=S.current?S:D;(0,a.T)(L,R);let T=A.threadsData?.totalCommentsCount||0,F=A.annotationsData?.totalCount||0,{isActionBarFocused:M,handleActionBarBlur:O,handleActionBarFocusCapture:P,handleActionBarKeydownCapture:H}=(0,p.l)({cellRef:C}),{annotations:B,isContextMenuOpen:$,openMarkerOrListDialogFromActionBar:U,startNewConversationFromActionBar:W,startNewConversationFromActionBarWithSuggestedChange:V,anyMenuOpen:z,threads:q,toggleContextMenu:G,toggleContextMenuFromActionBar:K}=(0,m.e)({cellId:n,actionBarRef:E}),X=(0,u.useCallback)(e=>{_&&e.preventDefault()},[_]);return(0,i.jsx)("div",{"aria-hidden":!M,style:{...b},className:"d-flex flex-row",children:(0,i.jsxs)(l.A,{onBlur:O,onClick:X,onFocusCapture:P,onKeyDownCapture:H,children:[I&&(0,i.jsxs)(i.Fragment,{children:[T+F>0&&(0,i.jsx)(s.Q,{ref:S,"aria-expanded":z,"aria-label":"View conversations",size:"small",sx:{pt:0,pb:0,px:1,height:v},onClick:e=>{(1===q.length||1===B.length)&&e.preventDefault(),U()},children:(0,i.jsx)(g.A,{})}),N&&(0,i.jsx)(i.Fragment,{children:w?(0,i.jsx)(s.Q,{"aria-label":"Start conversation (comment in progress)",size:"small",sx:{pt:0,pb:0,px:1,width:j,height:v},onClick:W,children:(0,i.jsx)(y.f,{authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Start conversation",ref:D,icon:r.PlusIcon,size:"small",sx:{width:j,height:v,color:"fg.muted"},onClick:W})})]}),(0,i.jsx)(o.K,{unsafeDisableTooltip:!0,ref:E,"aria-haspopup":"true","aria-label":"More actions",icon:r.TriangleDownIcon,size:"small",sx:{width:v,height:v,color:"fg.muted"},onClick:K}),(0,i.jsx)(d.W,{anchorRef:E,open:$,onOpenChange:G,children:(0,i.jsx)(d.W.Overlay,{width:"medium",children:(0,i.jsx)(c.l,{children:(0,i.jsx)(x.Bv,{copilotChatReferenceData:k,showStartConversation:N,handleViewMarkersSelection:U,startConversationCurrentLine:W,startConversationWithSuggestedChange:V})})})})]})})});C.displayName="ActionBar"},47765:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(9449),r=n(20053),a=n(22868),l=n(90305),s=n(69909),o=n(83994),d=n(55293),c=n(15570),u=n(27267),f=n(97177);function h({shouldAnimateRef:e}){let{diffLine:t}=(0,u.s)(),{ghostUser:n}=(0,f.y)();(0,d.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let h=(t.threadsData?.totalCommentsCount||0)+(t.annotationsData?.totalCount||0);if(0===h)return null;let m={},p=[];t.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&p.push({id:e.id,level:e.annotationLevel})}),t.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?m[e?.author.login]=e.author:n?.login&&(m[n.login]=n)}));let g=[...p.sort((e,t)=>(o.GF[e.level]?.priority||0)<(o.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(o.S,{annotationLevel:t.level},t.id):(0,i.jsx)(o.Xh,{annotationLevel:t.level},t.id)),...Object.keys(m).map(e=>{let t=m[e]?.login,r=m[e]?.avatarUrl??(n?.avatarUrl||" ");return(0,i.jsx)(a.r,{alt:t,size:20,src:r},t)})].slice(0,3),x=h>9?"9+":`${h}`;return(0,i.jsxs)("div",{className:(0,r.$)("d-flex","flex-justify-between","flex-items-center",c.A.commentIndicatorContainer),children:[(0,i.jsx)(l.A,{disableExpand:!0,sx:{maxWidth:"40px","--avatar-stack-three-plus-min-width":"32px"},children:g}),(0,i.jsx)(s.A,{sx:{color:"fg.default",ml:1,fontSize:0,fontWeight:400,fontVariantNumeric:"tabular-nums",width:"2ch",textAlign:"start"},children:x})]})}try{h.displayName||(h.displayName="CommentIndicator")}catch{}},72360:(e,t,n)=>{n.d(t,{q:()=>m});var i=n(9449),r=n(62353),a=n(59857),l=n(85053),s=n(87330),o=n(44981),d=n(30729),c=n(55293),u=n(20053),f=n(58323),h=n(90600);let m=(0,c.memo)(function({inputContainer:e,currentPathDigestIndex:t,stickied:n,searchTerm:m,searchResults:p,setSearchTerm:g,focusedSearchResult:x,currentIndex:y,setCurrentIndex:b,setFocusedSearchResult:v,onClose:j,scrollDiffCellIntoView:C}){let{findInFileShortcut:N}=(0,r.wk)(),[w,k]=(0,c.useState)(!0),L=(0,c.useRef)([]),S=(0,c.useRef)(0),D=()=>{g(""),v(void 0),t.current=0},I=e=>{if(void 0===x||""===x.pathDigest){t.current=0,v({pathDigest:L.current[0]??"",indexWithinDigest:0});return}1===e?(b(y===S.current-1?0:y+1),x.indexWithinDigest===p.get(x.pathDigest).length-1?(t.current=t.current+1,t.current===L.current.length&&(t.current=0),x.pathDigest=L.current[t.current]??"",x.indexWithinDigest=0):x.indexWithinDigest=x.indexWithinDigest+1):(b(0===y?S.current-1:y-1),0===x.indexWithinDigest?(t.current=t.current-1,-1===t.current&&(t.current=L.current.length-1),x.pathDigest=L.current[t.current]??"",x.indexWithinDigest=p.get(x.pathDigest).length-1):x.indexWithinDigest=x.indexWithinDigest-1),v(x)};return(0,c.useEffect)(()=>{e.current?.focus(),e.current?.select()},[e]),(0,c.useEffect)(()=>{L.current=Array.from(p.keys()),t.current=0,v({pathDigest:L.current[0]??"",indexWithinDigest:0});let e=0;for(let t of p.values())e+=t.length;S.current=e},[t,p,p.size,v]),(0,c.useEffect)(()=>{p.size>0&&void 0!==x&&C(x)},[p,x,y]),(0,i.jsxs)("div",{className:(0,u.$)(f.A.defaultStyles,n&&f.A.stickyStyles,!n&&f.A.notStickyStyles),children:[(0,i.jsx)(h.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>I(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>I(-1),"pull-requests-diff-view:close-find":j}}),(0,i.jsxs)(h.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>I(1),"pull-requests-diff-view:jump-to-previous-result":()=>I(-1)},children:[(0,i.jsxs)("div",{className:"py-2 pl-3 pr-2 d-flex flex-justify-center flex-items-center flex-row f6 borderColor-default border-bottom",children:[(0,i.jsxs)("div",{className:"d-flex flex-row flex-items-baseline",children:[(0,i.jsx)("h5",{className:"fgColor-default pr-2 text-bold",children:"Find"}),(0,i.jsxs)("span",{className:(0,u.$)("find-text-help-tooltip","fgColor-subtle",w&&f.A.visibilityVisible,!w&&f.A.visibilityHidden),children:["Press ",(0,i.jsx)(l.A,{children:N.text})," again to open the browser's find menu"]})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,variant:"invisible",size:"small",onClick:j,icon:a.XIcon,className:"fgColor-subtle","aria-label":"Close find in file"})]}),(0,i.jsx)("div",{className:"pl-2 pr-2 pt-2 pb-2",children:(0,i.jsx)(o.A,{ref:e,className:"pl-1 border-0 box-shadow-none",validationStatus:S.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,i.jsx)(d.A,{icon:a.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in file input",placeholder:"Search this diff",value:m,block:!0,onChange:e=>{e.target.value?(k(!1),g(e.target.value),b(0)):(k(!0),D())},trailingAction:(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[(0,i.jsxs)("span",{className:"text-small fgColor-subtle m-2 text-center",children:[0===p.size||void 0===x?0:y+1,"/",S.current]}),(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{I(-1)},icon:a.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search",className:"fgColor-subtle"}),(0,i.jsx)(s.K,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{I(1)},icon:a.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search",className:"fgColor-subtle"})]}),onKeyDown:t=>{(t.metaKey||t.ctrlKey)&&("f"===t.key||"F"===t.key)&&(w?j():(k(!0),t.preventDefault(),e.current?.focus(),e.current?.select()))}})})]})]})});try{m.displayName||(m.displayName="DiffFindPopover")}catch{}},75231:(e,t,n)=>{n.d(t,{p:()=>l});var i=n(9449),r=n(50156),a=n(20053);function l({searchResults:e,focusedSearchResult:t,className:n,styleObject:l}){let s=0,o=e[0]?.text??"",d=e[0]?.diffLineNumIndex??-1,c=`overlay-${d}-${o}`;return(0,i.jsxs)("span",{className:(0,a.$)(n,"position-absolute",r.A.userSelectNone,!e[0].isHunk&&r.A.nonHunkStyles),style:{...l},children:[e.map(e=>{var n,l;let d=e.indexWithinPathDigest===t,c=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:(0,a.$)(r.A.visibilityHidden,r.A.userSelectNone),children:o.substring(s,e.column)}),(0,i.jsx)("span",{className:(0,a.$)(r.A.userSelectNone,d&&r.A.focusedResultStyles,!d&&r.A.nonFocusedResultStyles),children:(0,i.jsx)("span",{className:(0,a.$)(!d&&r.A.visibilityHidden),id:(n=e.indexWithinPathDigest,l=e.pathDigest,`match-${l}-${n}`),children:o.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return s=e.columnEnd,c}),(0,i.jsx)("span",{className:(0,a.$)(r.A.visibilityHidden,r.A.userSelectNone),children:o.substring(s)})]},c)}try{l.displayName||(l.displayName="DiffHighlightedOverlay")}catch{}},46141:(e,t,n)=>{n.d(t,{A:()=>a,r:()=>r});var i=n(9449);function r(e,t,n){let i=e.threadsData?.totalCount||0,r=t.threadsData?.totalCount||0;if(0===i&&0===r)return;let a=e.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",l=t.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",s="";1===i?s=`has conversation started by @${a}.`:i>1&&(s="has conversations.");let o="";1===r?o=`has conversation started by @${l}.`:r>1&&(o="has conversations.");let d="";if("LEFT"===n){let e=`${s.charAt(0).toUpperCase()}${s.slice(1)}`,t=`${o.length>1?"Modified line":""} ${o}`;d=`${e} ${t}`}else{let e=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,t=`${s.length>1?"Original line":""} ${s}`;d=`${e} ${t}`}return d}function a({summary:e}){return""===e?null:(0,i.jsx)("div",{className:"sr-only","data-testid":"pr-diffline-summary",children:e.trimStart().trimEnd()})}try{a.displayName||(a.displayName="DiffLineScreenReaderSummary")}catch{}},19145:(e,t,n)=>{n.d(t,{Bv:()=>x,_g:()=>S,eD:()=>y});var i=n(9449),r=n(19987),a=n(65862),l=n(90600),s=n(59857),o=n(17909),d=n(55293),c=n(97177),u=n(27267),f=n(24361),h=n(50990),m=n(16340),p=n(23247),g=n(90962);function x({showStartConversation:e,copilotChatReferenceData:t,handleViewMarkersSelection:n,startConversationCurrentLine:r,startConversationWithSuggestedChange:a}){return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(g._,{handleStartConversation:r,handleStartConversationWithSuggestedChange:a}),(0,i.jsx)(j,{handleViewMarkersSelection:n}),(0,i.jsx)(b,{copilotChatReferenceData:t}),(0,i.jsx)(k,{}),(0,i.jsx)(v,{}),(0,i.jsx)(l.Vr,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,i.jsx)(s.LinkIcon,{})}),(0,i.jsx)(L,{}),(0,i.jsx)(S,{})]})}function y(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L,{}),(0,i.jsx)(v,{})]})}let b=({copilotChatReferenceData:e})=>{let{diffEntryId:t}=(0,u.s)(),{subjectId:n,oldCommitOid:a,newCommitOid:l}=(0,c.y)(),{selectedDiffRowRange:s}=(0,h.o)(),o=(0,d.useMemo)(()=>e&&n&&a&&l?{referenceData:e,queryVariables:{pullRequestId:n,startOid:a,endOid:l}}:t&&n&&a&&l?{queryVariables:{diffEntryId:t,pullRequestId:n,startOid:a,endOid:l}}:void 0,[t,l,a,n,e]);return o?(0,i.jsx)(r.w,{selectedRange:s,...o}):null};function v(){let{fileAnchor:e}=(0,u.s)();return(0,i.jsxs)(o.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(o.l.LeadingVisual,{children:(0,i.jsx)(s.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(o.l.TrailingVisual,{children:(0,i.jsx)(a.z,{keys:"Mod+a"})})]})}function j({handleViewMarkersSelection:e}){let{commentingEnabled:t}=(0,c.y)(),{isSplit:n}=(0,u.s)();return t?n?(0,i.jsx)(C,{handleViewMarkersSelection:e}):(0,i.jsx)(N,{onSelect:()=>e()}):null}function C({handleViewMarkersSelection:e}){let{originalLineHasThreads:t,modifiedLineHasThreads:n,isLeftSide:r}=(0,u.s)(),{annotations:a}=(0,f._)(),l=a.length>0;return r?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(w,{text:"View markers",onSelect:()=>e("LEFT")}),(n||l)&&(0,i.jsx)(w,{text:"View markers, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(n||l)&&(0,i.jsx)(w,{text:"View markers",onSelect:()=>e("RIGHT")}),t&&(0,i.jsx)(w,{text:"View markers, original line",onSelect:()=>e("LEFT")})]})}function N({onSelect:e}){let{ghostUser:t}=(0,c.y)(),{diffLine:n}=(0,u.s)(),{annotations:r}=(0,f._)();return n&&(0,m.F)(n.threadsData,t).length>0||r.length>0?(0,i.jsx)(w,{text:"View markers",onSelect:()=>e()}):null}function w({onSelect:e,text:t}){return(0,i.jsxs)(o.l.Item,{onSelect:e,children:[(0,i.jsx)(o.l.LeadingVisual,{children:(0,i.jsx)(s.CommentDiscussionIcon,{})}),t]})}function k(){return(0,i.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,i.jsx)(l.Vr,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,i.jsx)(s.CopyIcon,{})})})}function L(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=(0,p.A)();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(l.Vr,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,i.jsx)(s.FoldUpIcon,{})}),t&&(0,i.jsx)(l.Vr,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,i.jsx)(s.FoldDownIcon,{})})]})}function S(){let{previousHunk:e,nextHunk:t}=(0,u.s)(),{fileAnchor:n}=(0,u.s)();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(o.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(o.l.LeadingVisual,{children:(0,i.jsx)(s.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(o.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(o.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(o.l.LeadingVisual,{children:(0,i.jsx)(s.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(o.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{x.displayName||(x.displayName="CellContextMenu")}catch{}try{y.displayName||(y.displayName="EmptyCellContextMenu")}catch{}try{b.displayName||(b.displayName="CopilotListItems")}catch{}try{v.displayName||(v.displayName="SelectAllListItem")}catch{}try{j.displayName||(j.displayName="ViewMarkerListItems")}catch{}try{C.displayName||(C.displayName="SplitDiffMarkersListItems")}catch{}try{N.displayName||(N.displayName="UnifiedDiffMarkerListItem")}catch{}try{w.displayName||(w.displayName="MarkerListItem")}catch{}try{k.displayName||(k.displayName="CopyContentListItems")}catch{}try{L.displayName||(L.displayName="ExpandHunksListItems")}catch{}try{S.displayName||(S.displayName="JumpToHunkListItems")}catch{}},5242:(e,t,n)=>{n.d(t,{KD:()=>H,gG:()=>M,hA:()=>P,wo:()=>O});var i=n(9449),r=n(42516),a=n(38510),l=n(88234),s=n(22084),o=n(90600),d=n(83296),c=n(59857),u=n(20053),f=n(55293),h=n(97177),m=n(27267),p=n(24361),g=n(50990),x=n(9393),y=n(78896),b=n(7370),v=n(64553),j=n(23247),C=n(63681),N=n(52019),w=n(6102),k=n(47765),L=n(19145),S=n(27621),D=n(281),I=n(17909),A=n(75231),_=n(46141);function E(e){let{rowId:t}=(0,m.s)();if(t)return(0,x.u6)(t,e)}function R(e,t){let{selectedDiffRowRange:n}=(0,g.o)();return(0,f.useMemo)(()=>{let i="Add a comment to",r=!!n&&n.startLineNumber!==n.endLineNumber;if(n&&r){let e={left:"L",right:"R"},t=e[n.startOrientation],r=e[n.endOrientation];i+=n.startLineNumber!==n.endLineNumber?` lines ${t}${n.startLineNumber} to ${r}${n.endLineNumber}`:` line ${t}${n.startLineNumber}`}else{let n=t&&!(0,x.Ji)(e)?"L":"R";i+=` line ${n}${e.blobLineNumber}`}return i},[e,t,n])}let T=(0,f.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:r,handleDiffCellClick:l,handleDiffSideCellSelectionBlocking:s,lineAnchor:c,commentDialogOpen:u,startConversation:h,...p},y){let{diffLine:v,isRowSelected:C,isLeftSide:N,isSplit:w}=(0,m.s)(),k=(0,f.useRef)(null);(0,f.useImperativeHandle)(y,()=>k.current,[]);let[L,S]=(0,f.useState)(!1),{clearSelectedDiffRowRange:A,selectedDiffRowRange:_}=(0,g.o)(),{fileAnchor:R,filePath:T}=(0,m.s)(),{expandStartOfHunk:F,expandEndOfHunk:M,expandEndOfPreviousHunk:O}=(0,j.A)(),{getUnifiedDiffLineCode:P,getSplitDiffSingleLineCode:H,getSplitDiffMultiLineCode:B}=(0,b.w)(R),$=(0,f.useRef)(null),U=(0,d.U)(e=>{if(!e.target)return;let t=e.target;!L||$.current?.contains(t)||k.current?.contains(t)||2!==e.button?k.current?.contains(t)&&e.target.closest("button")?.contains(t)&&S(!1):S(!1)});(0,f.useEffect)(()=>{L?document.addEventListener("mousedown",U):document.removeEventListener("mousedown",U)},[U,L]),(0,f.useEffect)(()=>()=>document.removeEventListener("mousedown",U),[]);let W=()=>!!document.getElementById("conversation-dialog"),V=()=>!(u||L||W())&&(!C&&_&&A(),S(!0),!0),z=(0,f.useCallback)(e=>{e.shiftKey&&e.preventDefault(),s?.(e)},[s]);return(0,i.jsxs)(o.tL,{as:"td",commands:{"github:open-context-menu":V,"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(w){void 0===_||_?.startOrientation===_?.endOrientation&&_?.startLineNumber===_?.endLineNumber?(0,a.D)(H(N?"left":"right",N?v?.left:v?.right)):(0,a.D)(B(N?"left":"right"));return}(0,a.D)(P())},"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${T}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))},"pull-requests-diff-view:expand-hunk-up":F,"pull-requests-diff-view:expand-hunk-down":()=>{if(v?.type==="HUNK"){O();return}M()},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,x.j2)({line:v,range:_,fileAnchor:R});e&&(0,a.D)(e)},"pull-requests-diff-view:start-conversation-current":h},ref:k,"data-grid-cell-id":E(r),"data-line-anchor":c,"data-selected":C,role:"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${r<3?"left-side":""}`:"focusable-grid-cell",onBlur:e=>e.target.ariaSelected="false",onClick:l,onContextMenu:e=>{V()&&e.preventDefault()},onFocus:e=>e.target.ariaSelected="true",onMouseDown:z,...p,children:[e,t&&L&&(0,i.jsx)(D.W,{anchorRef:k,open:!0,onOpenChange:S,children:(0,i.jsx)(D.W.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(I.l,{children:t})})})]})});function F(){return(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(c.KebabHorizontalIcon,{})})}function M({summary:e,searchResultsForLine:t,focusedSearchResult:n,columnIndex:a,lineAnchor:o,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,filePath:b,tabSize:j,copilotChatReferenceData:C}){let{diffLine:D,fileAnchor:I,isLeftSide:F}=(0,m.s)(),{getTextIndent:M,getPaddingLeft:O}=(0,f.useMemo)(()=>(0,l.oW)(D.text,j),[D,j]),[P,H]=(0,x._S)(D.html,D.type),$=H&&["+","-"].includes(H),{isActionBarVisible:U}=(0,p._)(),{selectedDiffRowRange:W,selectedDiffLines:V}=(0,g.o)(),{commentBatchPending:z,commentingEnabled:q,commentingImplementation:G,markerNavigationImplementation:K,repositoryId:X,subjectId:Q,subject:Y,viewerData:J}=(0,h.y)(),{hasPersistedComment:Z}=(0,r.L4)({diffSide:F?"LEFT":"RIGHT",filePath:b,line:D.blobLineNumber,subjectId:Q,fileLevelComment:!1}),ee=(0,f.useMemo)(()=>{var e;return e=J.viewerCanComment,q&&e&&(0,x.a1)(D,V)},[q,J,D,V]),et=(0,f.useRef)(null),en=(0,f.useRef)(null),ei=(0,x.YY)({shouldAlignRight:Z||!ee}),er=!!D.threadsData?.threads?.length||!!D.annotationsData?.annotations?.length,ea=(0,x.S4)({hasThreads:er}),el=R(D,!!F),es=E(a),{handleCellBlur:eo,handleCellFocus:ed,handleCellMouseEnter:ec,handleCellMouseLeave:eu}=(0,v.l)({cellRef:en}),{annotations:ef,isNewConversationDialogOpen:eh,shouldStartNewConversationWithSuggestedChange:em,startNewConversation:ep,startNewConversationWithSuggestedChange:eg,openMarkerOrListDialog:ex,selectAnnotation:ey,selectThread:eb,isMarkerListDialogOpen:ev,closeNewConversationDialog:ej,closeMarkerListDialog:eC,closeConversationDetailsDialog:eN,returnFocusRef:ew,optimizedSelectedAnnotationId:ek,optimizedSelectedThreadId:eL,threadConnectionId:eS,threads:eD}=(0,y.e)({cellId:es,actionBarRef:et});(0,f.useEffect)(()=>{if(!K)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=K;if(e){let n=eD.map(e=>e.id),i=ef.map(e=>e.id);n.includes(e)?(eb(e,{skipLineSelection:!0}),t()):i.includes(e)&&(ey(e,{skipLineSelection:!0}),t())}},[eb,eD,K,ef,ey]);let eI=(0,N.S)(G?.suggestedChangesEnabled,D,em),eA=(0,f.useRef)(!0),{ghostUser:e_}=(0,h.y)();return(0,i.jsxs)(T,{ref:en,columnIndex:a,commentDialogOpen:eh,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,lineAnchor:o,startConversation:ep,ContextMenu:(0,i.jsx)(L.Bv,{copilotChatReferenceData:C,showStartConversation:ee,handleViewMarkersSelection:ex,startConversationCurrentLine:ep,startConversationWithSuggestedChange:eg}),className:(0,u.$)(`diff-text-cell ${F?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":F&&"HUNK"!==D.type}),style:{backgroundColor:B(D.type,!1),paddingRight:ea},onBlur:eo,onFocus:ed,onMouseEnter:ec,onMouseLeave:eu,children:[(0,i.jsxs)("code",{className:(0,u.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===D.type,deletion:"DELETION"===D.type}),children:[$&&(0,i.jsx)("span",{className:"diff-text-marker",children:H}),t&&t.length>0&&(0,i.jsx)(A.p,{searchResults:t,focusedSearchResult:n,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),styleObject:{paddingLeft:O(),textIndent:M()}}),(0,i.jsx)(s.mo,{html:P,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),style:{paddingLeft:O(),textIndent:M()}})]}),U&&(0,i.jsx)(w.E,{copilotChatReferenceData:C,authorAvatarUrl:J.avatarUrl,authorLogin:J.login,ref:et,cellId:es,cellRef:en,hasDraftComment:Z,showStartConversation:ee}),G&&K&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.c7,{annotations:ef,batchPending:z,batchingEnabled:G.batchingEnabled,commentingImplementation:{...G,deleteComment:({onCompleted:e,...t})=>{G&&D&&G.deleteComment({...t,onCompleted:()=>{e?.(),eD.length<=1&&(eN(),setTimeout(()=>en.current?.focus()))},filePath:b})}},conversationAnchorRef:en,conversationListAnchorRef:ew,conversationListThreads:eD,fileAnchor:I,filePath:b,isMarkerListOpen:ev,repositoryId:X,returnFocusRef:ew,selectedAnnotationId:ek,selectedThreadId:eL,subjectId:Q,subject:Y,suggestedChangesConfig:eI,threadsConnectionId:eS,onCloseConversationDialog:eN,onCloseConversationList:eC,onAnnotationSelected:ey,onThreadSelected:eb,markerNavigationImplementation:K,viewerData:J,ghostUser:e_}),(0,i.jsx)(r.cT,{addCommentDialogTitle:el,anchorRef:en,batchPending:z,batchingEnabled:G.batchingEnabled,commentBoxConfig:G.commentBoxConfig,filePath:b,isLeftSide:!!F,isOpen:eh,lineNumber:D.blobLineNumber,repositoryId:X,returnFocusRef:ew,subjectId:Q,suggestedChangesConfig:eI,threadsConnectionId:eS,viewerData:J,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!G||!D)return;let{leftLines:i,rightLines:r}=V;if(W){let e="left"===W.endOrientation?i:r,n=e[e.length-1];n&&(0,x.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}G.addThread({...n,diffLine:D,isLeftSide:F,selectedDiffRowRange:W,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eb(t)}})},onCloseCommentDialog:ej})]}),!U&&(0,i.jsxs)("div",{"aria-hidden":"true",style:{right:ei},className:"position-absolute top-0 d-flex user-select-none",children:[(0,i.jsx)(k.A,{shouldAnimateRef:eA}),Z&&(0,i.jsx)(S.f,{authorAvatarUrl:J.avatarUrl,authorLogin:J.login,sx:{ml:"9px",mt:"2px",height:"20px"}})]}),e&&(0,i.jsx)(_.A,{summary:e})]})}function O({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,filePath:l,copilotChatReferenceData:s,...o}){let d=(0,f.useRef)(null),c=E(t),{commentBatchPending:u,commentingEnabled:p,commentingImplementation:b,repositoryId:j,subject:C,subjectId:w,markerNavigationImplementation:k,viewerData:S}=(0,h.y)(),{diffLine:D,fileAnchor:I,isLeftSide:A}=(0,m.s)(),{selectedDiffRowRange:_,selectedDiffLines:F}=(0,g.o)(),M=R(D,!!A),O=(0,f.useMemo)(()=>{var e;return e=S.viewerCanComment,p&&e&&(0,x.a1)(D,F)},[p,S,D,F]),{handleCellBlur:P,handleCellFocus:H,handleCellMouseEnter:$,handleCellMouseLeave:U}=(0,v.l)({cellRef:d}),{ghostUser:W}=(0,h.y)(),{annotations:V,isNewConversationDialogOpen:z,shouldStartNewConversationWithSuggestedChange:q,startNewConversation:G,startNewConversationWithSuggestedChange:K,openMarkerOrListDialog:X,isMarkerListDialogOpen:Q,closeConversationDetailsDialog:Y,closeMarkerListDialog:J,selectAnnotation:Z,selectThread:ee,closeNewConversationDialog:et,returnFocusRef:en,optimizedSelectedThreadId:ei,optimizedSelectedAnnotationId:er,threadConnectionId:ea,threads:el}=(0,y.e)({cellId:c,actionBarRef:d}),es=(0,N.S)(b?.suggestedChangesEnabled,D,q);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{ref:d,className:"diff-line-number",columnIndex:t,commentDialogOpen:z,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,startConversation:G,style:{backgroundColor:B(D.type,!0),textAlign:"center"},ContextMenu:(0,i.jsx)(L.Bv,{copilotChatReferenceData:s,showStartConversation:O,handleViewMarkersSelection:X,startConversationCurrentLine:G,startConversationWithSuggestedChange:K}),onBlur:P,onFocus:H,onMouseEnter:$,onMouseLeave:U,...o,children:(0,i.jsx)("code",{children:e})}),b&&k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.c7,{annotations:V,batchPending:u,batchingEnabled:b.batchingEnabled,commentingImplementation:{...b,deleteComment:({onCompleted:e,...t})=>{b&&D&&b.deleteComment({...t,onCompleted:()=>{e?.(),el.length<=1&&(Y(),setTimeout(()=>d.current?.focus()))},filePath:l})}},conversationAnchorRef:d,conversationListAnchorRef:en,conversationListThreads:el,fileAnchor:I,filePath:l,isMarkerListOpen:Q,repositoryId:j,returnFocusRef:en,selectedAnnotationId:er,selectedThreadId:ei,subjectId:w,subject:C,suggestedChangesConfig:es,threadsConnectionId:ea,markerNavigationImplementation:k,onCloseConversationDialog:Y,onCloseConversationList:J,onThreadSelected:ee,onAnnotationSelected:Z,viewerData:S,ghostUser:W}),(0,i.jsx)(r.cT,{addCommentDialogTitle:M,align:"start",anchorRef:d,batchPending:u,batchingEnabled:b.batchingEnabled,commentBoxConfig:b.commentBoxConfig,filePath:l,isLeftSide:!!A,isOpen:z,lineNumber:D.blobLineNumber,repositoryId:j,returnFocusRef:en,subjectId:w,suggestedChangesConfig:es,threadsConnectionId:ea,viewerData:S,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!b||!D)return;let{leftLines:i,rightLines:r}=F;if(_){let e="left"===_.endOrientation?i:r,n=e[e.length-1];n&&(0,x.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}b.addThread({...n,diffLine:D,selectedDiffRowRange:_,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),ee(t)}})},onCloseCommentDialog:et})]})]})}function P({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:r}){let a=(0,f.useRef)(null),[l,o]=function(e){let[t,n]=(0,f.useState)(!1),[i,r]=(0,f.useState)(!1),a=(0,f.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),l=(0,f.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),s=(0,f.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]);return[{onFocus:l,onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:s,onFocusCapture:(0,f.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,f.useCallback)(e=>{(0,C.g)(e.key)&&e.stopPropagation()},[])}]}(a),{diffLine:d}=(0,m.s)();return(0,i.jsx)(T,{ref:a,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...l,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(o)??(0,i.jsx)(F,{}),(0,i.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,i.jsx)(A.p,{searchResults:n,focusedSearchResult:r,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type})}),(0,i.jsx)(s.mo,{className:"diff-text-inner color-fg-muted",html:d.html})]})]})})}function H({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(T,{ContextMenu:(0,i.jsx)(L.eD,{}),className:(0,u.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}function B(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-addition-bgColor-num, var(--color-diff-blob-addition-num-bg))":"var(--diffBlob-addition-bgColor-line, var(--color-diff-blob-addition-line-bg))";case"DELETION":return t?"var(--diffBlob-deletion-bgColor-num, var(--color-diff-blob-deletion-num-bg))":"var(--diffBlob-deletion-bgColor-line, var(--color-diff-blob-deletion-line-bg))";case"HUNK":case"EMPTY":return t?"var(--diffBlob-hunk-bgColor-num, var(--color-diff-blob-hunk-num-bg))":"var(--bgColor-accent-muted, var(--color-accent-subtle))";default:return}}try{T.displayName||(T.displayName="Cell")}catch{}try{F.displayName||(F.displayName="HunkKebabIcon")}catch{}try{M.displayName||(M.displayName="ContentCell")}catch{}try{O.displayName||(O.displayName="LineNumberCell")}catch{}try{P.displayName||(P.displayName="HunkCell")}catch{}try{H.displayName||(H.displayName="EmptyCell")}catch{}},73724:(e,t,n)=>{n.d(t,{BD:()=>h,Pd:()=>m});var i=n(9449),r=n(51888),a=n(55293),l=n(5242),s=n(24361),o=n(97177),d=n(27267),c=n(9393);let u=({summary:e,resultsForLine:t,focusedSearchResult:n,handleDiffSideCellSelectionBlocking:r,handleDiffRowClick:c,lineAnchor:u,filePath:f,copilotChatReferenceData:h})=>{let{diffLine:m,isLeftSide:p,isSplit:g}=(0,d.s)(),{viewerData:x}=(0,o.y)(),{tabSizePreference:y}=x,b="ADDITION"!==m.type,v=!g||p,j=v&&!b,C="DELETION"!==m.type,N=!g||!p,w=N&&!C,k=(0,a.useCallback)(e=>{m.left&&c(e,m.left,"left",e.shiftKey)},[c,m.left]),L=(0,a.useCallback)(e=>{m.right&&c(e,m.right,"right",e.shiftKey)},[c,m.right]),S=(0,a.useCallback)(()=>{r&&r("left")},[r]),D=(0,a.useCallback)(()=>{r&&r("right")},[r]);return(0,i.jsxs)(s.M,{line:m,children:[v&&(0,i.jsx)(l.wo,{copilotChatReferenceData:h,columnIndex:0,filePath:f,handleDiffCellClick:j?L:k,handleDiffSideCellSelectionBlocking:D,children:b&&m.left}),N&&(0,i.jsx)(l.wo,{copilotChatReferenceData:h,columnIndex:g?2:1,filePath:f,handleDiffCellClick:w?k:L,handleDiffSideCellSelectionBlocking:S,children:C&&m.right}),(0,i.jsx)(l.gG,{copilotChatReferenceData:h,columnIndex:g?p?1:3:2,filePath:f,handleDiffCellClick:p?k:L,lineAnchor:u,tabSize:y,handleDiffSideCellSelectionBlocking:p?D:S,searchResultsForLine:t,focusedSearchResult:n,summary:e})]})},f=({summary:e,resultsForLine:t,focusedSearchResult:n,fileAnchor:a,filePath:s,handleDiffRowClick:o,handleDiffSideCellSelectionBlocking:u,copilotChatReferenceData:f})=>{let{diffLine:h,isLeftSide:p}=(0,d.s)();if((0,c.Po)(h))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.KD,{columnIndex:p?0:2}),(0,i.jsx)(l.KD,{columnIndex:p?1:3,showRightBorder:p})]});let g=p?"left":(0,r.XU)(h.type),x="left"===g?h.left:h.right,y=(0,r.IQ)(a,g,x??0);switch(h.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(m,{copilotChatReferenceData:f,filePath:s,handleDiffRowClick:o,handleDiffSideCellSelectionBlocking:u,lineAnchor:y,resultsForLine:t,focusedSearchResult:n,summary:e});default:throw Error(`cannot handle type ${h.type}`)}},h=a.memo(f),m=a.memo(u);try{u.displayName||(u.displayName="CodeDiffLineUnmemoized")}catch{}try{f.displayName||(f.displayName="DiffLineSideUnmemoized")}catch{}try{h.displayName||(h.displayName="DiffLineSide")}catch{}try{m.displayName||(m.displayName="CodeDiffLine")}catch{}},16385:(e,t,n)=>{n.d(t,{T:()=>C});var i=n(9449),r=n(63808),a=n(88234),l=n(51888),s=n(86519),o=n(55293),d=n(50990),c=n(9393),u=n(9370),f=n(81904),h=n(47382),m=n(12785),p=n(41955),g=n(97177),x=n(61387),y=n(98576),b=n(20053),v=n(97156);function j({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let C=(0,o.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:C,diffLinesManuallyUnhidden:N,baseHelpUrl:w,onHandleLoadDiff:k,copilotChatReferenceData:L,...S}){let D=(0,o.useRef)(null),[I,A]=(0,o.useState)(null),_=C.newTreeEntry?.lineCount??C.oldTreeEntry?.lineCount??0,E=(0,o.useMemo)(()=>{let e=C.diffLines[C.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<_?C.diffLines.concat({__id:f.wj.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):C.diffLines},[C.diffLines,_]),{diffViewPreference:R,tabSizePreference:T}=S.viewerData,{selectedDiffRowRange:F,replaceSelectedDiffRowRange:M,replaceSelectedDiffRowRangeFromGridCells:O,clearSelectedDiffRowRange:P,updateDiffLines:H,updateSelectedDiffRowRange:B}=(0,d.o)(),$=`diff-${C.pathDigest}`,U=$===F?.diffAnchor;(0,o.useEffect)(()=>{if(!U)return;let e=(0,c.On)(F,E);e&&e!==F&&M(e)},[E,F,U,M]);let W=v.cg?.location.search,V=(0,o.useMemo)(()=>"split"===new URLSearchParams(W).get("diff")||"split"===R,[W,R]),z=(0,l.c7)(E),q=(0,o.useCallback)(e=>{A(e)},[A]),G=(0,o.useCallback)((e,t,n,i)=>{!(0,x.V)(e.target)&&(e.defaultPrevented||B($,t,n,i))},[$,B]);if(C.isBinary)return(0,i.jsx)(j,{diffAnchor:$,children:"Binary file not shown."});if((0,r.dK)(C))return(0,i.jsx)(j,{diffAnchor:$,children:"File renamed without changes."});if((0,r.Jc)(C))return(0,i.jsx)(j,{diffAnchor:$,children:"File copied without changes."});if((0,r._$)(C.status,C.oldTreeEntry?.mode,C.newTreeEntry?.mode))return(0,i.jsx)(j,{diffAnchor:$,children:"File mode changed."});if((0,r.HI)(C))return(0,i.jsx)(j,{diffAnchor:$,children:(0,r.l_)(C.truncatedReason)});if((0,r.s8)(C))return(0,i.jsx)(j,{diffAnchor:$,children:"Whitespace-only changes."});if(!N&&(0,r.lO)(C))return(0,i.jsx)(u.A,{onLoadDiff:k,children:"This file was deleted."});if(!N&&(0,r.xW)(C))return(0,i.jsxs)(u.A,{helpText:"customizing how changed files appear on GitHub.",helpUrl:`${w}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:k,children:["Some generated files are not rendered by default. Learn more about"," "]});if(N&&C.isTooBig&&0===C.diffLines.length)return(0,i.jsxs)(j,{diffAnchor:$,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(s.A,{inline:!0,href:`${w}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});if(!N&&C.isTooBig)return C.diffLines.length>0?(0,i.jsx)(u.A,{onLoadDiff:k,children:"Large diffs are not rendered by default."}):(0,i.jsxs)(j,{diffAnchor:$,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(s.A,{inline:!0,href:`${w}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});let K={searchResults:e,diffContext:t,focusedSearchResult:n,clearSelectedDiffRowRange:P,diffEntryId:C.objectId,diffLines:E,fileAnchor:$,fileLineCount:_,filePath:C.path,handleDiffRowClick:G,handleDiffSideCellSelectionBlocking:q,replaceSelectedDiffRowRangeFromGridCells:O,selectedDiffRowRange:U?F:null,tableRef:D,updateDiffLines:H,updateSelectedDiffRowRange:B,copilotChatReferenceData:L};return C.diffLines?(0,i.jsxs)(g.m,{...S,children:[U&&(0,i.jsx)(h.o,{selectedLineRange:F,tableRef:D}),(0,i.jsx)("table",{ref:D,className:(0,b.$)("tab-size","width-full",y.A.tableLayoutFixed),"data-block-diff-cell-selection":I,"data-diff-anchor":$,"data-tab-size":T,"data-testid":"diff-content","data-paste-markdown-skip":!0,role:"grid",style:{"--line-number-cell-width":`${z}px`},children:V?(0,i.jsx)(a.wj,{lineWidth:z,children:(0,i.jsx)(m.A,{...K})}):(0,i.jsx)(a.Qe,{lineWidth:z,children:(0,i.jsx)(p.A,{...K})})})]}):null});try{j.displayName||(j.displayName="PlainTextStatus")}catch{}try{C.displayName||(C.displayName="DiffLines")}catch{}},46347:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(9449),r=n(20053),a=n(38510),l=n(71312),s=n(59857),o=n(281),d=n(17909),c=n(55293),u=n(27267),f=n(9393),h=n(23247),m=n(19145),p=n(5242),g=n(66924);function x({direction:e,icon:t,label:n,onClick:a,ariaLabel:s,className:o,...d}){let{sendAnalyticsEvent:c}=(0,l.s)();return(0,i.jsx)("button",{onClick:()=>{a(),c("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,r.$)("Button Button--iconOnly Button--invisible",g.A["expand-button-line"],o),"aria-label":s??n,"data-direction":e,...d,children:(0,i.jsx)(t,{})})}function y({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:r}){let{fileLineCount:l,diffLine:o}=(0,u.s)(),{expandStartOfHunk:d,expandEndOfPreviousHunk:m}=(0,h.A)(),y=!t,v=!e,j=0===o.blobLineNumber,C=y||v,N=v&&o.blobLineNumber===l,w=(0,c.useMemo)(()=>!C&&!(o.blobLineNumber<=0)&&(o.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-o.blobLineNumber>=20),[C,o,e,t]),k=(0,c.useMemo)(()=>!C&&!N&&o.blobLineNumber-t.blobLineNumber>20,[C,N,o,t]),L=(0,c.useMemo)(()=>!(o.blobLineNumber<=0)&&!j&&!!y,[y,j,o]),S=(0,c.useMemo)(()=>!y&&!N&&!!v,[y,v,N]),D=(0,c.useMemo)(()=>{switch(!0){case w:return"expand-all";case k:return"expand-up-and-down";case L:return"expand-up";case S:return"expand-down"}},[w,k,L,S]),I=()=>d(),A=()=>m(),_=()=>d();return(0,i.jsx)(p.hA,{searchResultsForLine:n,focusedSearchResult:r,renderHunkButton:n=>{switch(D){case"expand-all":return(0,i.jsx)(x,{...n,direction:"all",icon:s.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:_});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(x,{...n,direction:"down",icon:s.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:g.A["expand-up-and-down"],onClick:A}),(0,i.jsx)(x,{...n,direction:"up",icon:s.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:g.A["expand-up-and-down"],onClick:I})]});case"expand-up":return(0,i.jsx)(x,{...n,direction:"up",icon:s.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:I});case"expand-down":return(0,i.jsx)(x,{...n,direction:"down",icon:s.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:A});default:return null}},ContextMenu:(0,i.jsx)(b,{handleCopyContent:()=>{let[e]=(0,f._S)((0,f.ZC)(o.html),o.type);(0,a.D)(e)},handleExpandAbove:I,handleExpandAll:_,handleExpandBelow:A,shouldCopyContent:!!o.html,shouldExpandAbove:k||L,shouldExpandBelow:k||S})})}function b({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:r,handleExpandBelow:a,handleExpandAbove:l,handleCopyContent:c}){let u={includeShiftKey:!0,key:"["},h={key:"]"},p={key:"["},g={key:"C"};return(0,i.jsx)(o.W.Overlay,{width:"medium",children:(0,i.jsxs)(d.l,{children:[(0,i.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(u),onSelect:r,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(s.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f.pI)(u)}`})})]}),t?(0,i.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(h),onSelect:l,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(s.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f.pI)(h)}`})})]}):null,e?(0,i.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(p),onSelect:a,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(s.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f.pI)(p)}`})})]}):null,(0,i.jsx)(m._g,{}),n?(0,i.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(g),onSelect:c,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(s.CopyIcon,{})}),"Copy",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f.pI)(g)}`})})]}):null]})})}try{x.displayName||(x.displayName="ExpandButtonLine")}catch{}try{y.displayName||(y.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{b.displayName||(b.displayName="HunkContextMenu")}catch{}},9370:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(9449),r=n(20053),a=n(55847),l=n(86519),s=n(23421);function o({children:e,helpText:t,helpUrl:n,onLoadDiff:o}){let d=n&&t;return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted",children:(0,i.jsxs)("div",{className:(0,r.$)(s.A.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center",children:[(0,i.jsx)(a.Q,{className:"h4 mx-auto",variant:"invisible",onClick:()=>o(),children:"Load Diff"}),(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,d&&(0,i.jsx)(l.A,{inline:!0,href:n,children:t})]})]})]})})}let d=o;try{o.displayName||(o.displayName="HiddenDiffPatch")}catch{}},27621:(e,t,n)=>{n.d(t,{f:()=>l});var i=n(9449),r=n(224),a=n(59857);function l({authorAvatarUrl:e,authorLogin:t,sx:n}){return(0,i.jsx)(r.k,{altText:`${t}'s avatar image with pending indicator`,icon:a.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",opacity:.5,...n}})}try{l.displayName||(l.displayName="InProgressCommentIndicator")}catch{}},32612:(e,t,n)=>{n.d(t,{U:()=>s});var i=n(9449),r=n(69759),a=n(22084),l=n(38553);function s({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:s}){return s?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(l.A,{size:"large"})}):n?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(a.oG,{html:n})}):t?(0,i.jsx)(r.default,{...t}):e?(0,i.jsx)("include-fragment",{src:e,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(l.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{s.displayName||(s.displayName="RichDiff")}catch{}},47382:(e,t,n)=>{n.d(t,{o:()=>d});var i=n(9449),r=n(20053),a=n(51012),l=n(58748),s=n(55293),o=n(20767);function d({selectedLineRange:e,tableRef:t}){let[n,d]=(0,s.useState)(null),c=(0,s.useCallback)(()=>{if(!t.current)return;let e=t.current.querySelectorAll('td[data-selected="true"]');if(0===e.length){d(null);return}let n=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(t.current).getBoundingClientRect(),i=0,r=Number.MAX_SAFE_INTEGER,a=0,l=Number.MAX_SAFE_INTEGER;for(let t of e){let e=t.getBoundingClientRect();i=Math.max(i,e.bottom-n.top),r=Math.min(r,e.left-n.left),a=Math.max(a,e.right-n.left),l=Math.min(l,e.top-n.top)}d({left:r-1,height:i-l+2,top:l-1,width:a-r+2})},[t]);return((0,a.N)(()=>{c()},[e,t,c]),(0,l.w)(c,t),n)?(0,i.jsx)("div",{className:(0,r.$)("position-absolute","borderColor-accent-emphasis",o.A.overlay),style:n,children:(0,i.jsx)("div",{className:(0,r.$)("width-full","height-full","bgColor-accent-emphasis",o.A.overlayOpacity)})}):null}try{d.displayName||(d.displayName="SelectedDiffLinesOverlay")}catch{}},12785:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(9449),r=n(55293),a=n(27267),l=n(16340),s=n(77321),o=n(81904),d=n(9393),c=n(63681),u=n(6024),f=n(73724),h=n(46347),m=n(97177),p=n(46141);let g=(0,r.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:g,diffEntryId:x,diffLines:y,fileAnchor:b,fileLineCount:v,filePath:j,handleDiffRowClick:C,handleDiffSideCellSelectionBlocking:N,replaceSelectedDiffRowRangeFromGridCells:w,selectedDiffRowRange:k,tableRef:L,updateDiffLines:S,updateSelectedDiffRowRange:D,copilotChatReferenceData:I}){let{leftLines:A,rightLines:_}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,r.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(u.V);for(;n.length<t.length;)n.push(u.V)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":i();let[e,a]=function(e){let t=e.threadsData?.threads?.filter(e=>e?.diffSide==="LEFT")??null,n={...e,threadsData:{...e.threadsData,threads:t,totalCommentsCount:t?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:t?.length??0},annotationsData:{totalCount:0,annotations:[]}},i=e.threadsData?.threads?.filter(e=>e?.diffSide==="RIGHT")??null;return[n,{...e,threadsData:{...e.threadsData,threads:i,totalCommentsCount:i?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:i?.length??0}}]}(r);t.push(e),n.push(a);break;case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(y),{ghostUser:E}=(0,m.y)();(0,c.e)({clearSelectedDiffRowRange:g,containerRef:L,fileAnchor:b,isSplitDiff:!0,leftLines:A,replaceSelectedDiffRowRangeFromGridCells:w,rightLines:_,selectedDiffRowRange:k,updateSelectedDiffRowRange:D});let R=(0,r.useMemo)(()=>{if(k)return(0,s.A)({selectedDiffRowRange:k,leftLines:A,rightLines:_})},[k,A,_]);(0,r.useEffect)(()=>{S(b,y)},[y,b,S]);let T=(0,r.useMemo)(()=>(0,o.fR)(A),[A]),F=new Map,M=new Map,O=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(F.has(n.leftLineNumber)?F.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&F.set(n.leftLineNumber,[n]),O.has(n.hunkLineNumber)?O.get(n.hunkLineNumber)?.push(n):n.isHunk&&O.set(n.hunkLineNumber,[n]),M.has(n.rightLineNumber)?M.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&M.set(n.rightLineNumber,[n]))}let P=[];for(let e=0;e<A.length;e++){let s=A[e],c=_[e],u=A[e-1],m=(0,d.Po)(A[e+1])?_[e+1]:A[e+1],g=(0,d.qK)(s)&&"HUNK"===s.type,y=(0,d.qX)(b,s,c),w=(0,d.Po)(s)?(0,d.Po)(c)?void 0:c:s;if(!w)continue;let k=(0,d.Po)(s)?void 0:s.threadsData,L=(0,d.Po)(c)?void 0:c.threadsData,{currentHunk:S,nextHunk:D,previousHunk:H}=(0,o.Fs)(w,T),B=F.get((0,d.Po)(s)?-2:s.left??-2),$=M.get((0,d.Po)(c)?-2:c.right??-2),U=O.get(w.blobLineNumber),W=U?.[0]?.rightLineNumber===c?.right?n:void 0,V=B?.[0]?.leftLineNumber===s?.left?n:void 0,z=$?.[0]?.rightLineNumber===c?.right?n:void 0,q=(0,p.r)(s,c,"LEFT"),G=(0,p.r)(s,c,"RIGHT"),K=(0,l.F)(L,E),X=(0,l.F)(k,E),Q={currentHunk:S,diffEntryId:x,fileAnchor:b,fileLineCount:v,filePath:j,isRowSelected:R?.isRowSelected(s)||R?.isRowSelected(c),modifiedLineThreadsConnectionId:L?.__id,nextHunk:D,originalLineThreadsConnectionId:k?.__id,previousHunk:H,rowId:y,isSplit:!0,diffContext:t};P.push((0,i.jsx)(r.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:g?(0,i.jsx)(a._,{...Q,diffLine:w,modifiedLineThreads:K,originalLineThreads:X,children:(0,i.jsx)(h.A,{nextLine:m,prevLine:u,focusedSearchResult:W,resultsForLine:U})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a._,{...Q,diffLine:s,isLeftSide:!0,children:(0,i.jsx)(f.BD,{summary:q,copilotChatReferenceData:I,fileAnchor:b,filePath:j,handleDiffRowClick:C,handleDiffSideCellSelectionBlocking:N,resultsForLine:B,focusedSearchResult:V})}),(0,i.jsx)(a._,{...Q,diffLine:c,children:(0,i.jsx)(f.BD,{summary:G,copilotChatReferenceData:I,fileAnchor:b,filePath:j,handleDiffRowClick:C,handleDiffSideCellSelectionBlocking:N,resultsForLine:$,focusedSearchResult:z})})]})})},y))}return(0,i.jsx)(i.Fragment,{children:P})}),x=g;try{g.displayName||(g.displayName="SplitDiffLines")}catch{}},90962:(e,t,n)=>{n.d(t,{_:()=>x});var i=n(9449),r=n(59857),a=n(17909),l=n(55293),s=n(97177),o=n(27267),d=n(50990),c=n(9393),u=n(65862),f=n(90600);let h={left:"L",right:"R"},m="Start conversation",p="Suggest change";function g(e,t,n){let i=n&&!(0,c.Ji)(t)?h.left:h.right;return`${e} on line ${i}${t.blobLineNumber}`}function x({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,x,y;let{selectedDiffRowRange:b,selectedDiffLines:v,replaceSelectedDiffRowRange:j}=(0,d.o)(),{commentingEnabled:C}=(0,s.y)(),{diffLine:N,isLeftSide:w,isSplit:k,diffContext:L}=(0,o.s)(),S=(0,l.useMemo)(()=>v.leftLines[0],[v.leftLines]),D=(0,l.useMemo)(()=>v.leftLines[v.leftLines.length-1],[v.leftLines]),I=(0,l.useMemo)(()=>v.leftLines.every(e=>!(0,c.Po)(e)&&"DELETION"!==e.type),[v.leftLines]),A=(0,l.useMemo)(()=>v.rightLines[0],[v.rightLines]),_=(0,l.useMemo)(()=>v.rightLines[v.rightLines.length-1],[v.rightLines]),E=(0,l.useMemo)(()=>0===v.rightLines.length,[v.rightLines]),R=(0,l.useMemo)(()=>0===v.leftLines.length,[v.leftLines]),T=(0,l.useMemo)(()=>!(v.leftLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||v.rightLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[v.leftLines,v.rightLines]),F=(0,l.useCallback)((n,i)=>{!(!b||!D||!S||(0,c.Po)(D)||(0,c.Po)(S))&&S.left&&D.left&&(j({diffAnchor:b.diffAnchor,endLineNumber:D.left,endOrientation:"left",startLineNumber:S.left,startOrientation:"left",firstSelectedLineNumber:S.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[b,D,S,j,e,t]),M=(0,l.useCallback)((n,i)=>{!(!b||!_||!A||(0,c.Po)(_)||(0,c.Po)(A))&&A.right&&_.right&&(j({diffAnchor:b.diffAnchor,endLineNumber:_.right,endOrientation:"right",startLineNumber:A.right,startOrientation:"right",firstSelectedLineNumber:A.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[b,_,A,j,e,t]),O="DELETION"!==N.type&&("pr"===L||void 0===L),P=(0,l.useMemo)(()=>!!b&&(b.startOrientation!==b.endOrientation||b.startLineNumber!==b.endLineNumber),[b]);if(!C)return null;let H=!1,B=!1;if(b&&P){let t=h[b.startOrientation],l=h[b.endOrientation];return y=` on lines ${t}${b.startLineNumber}-${l}${b.endLineNumber}`,!(0,c.Po)(S)&&!(0,c.Po)(D)&&S&&D&&(H=!0,n=S.left===D.left?E?` on line L${S.left}`:`, original line L${S.left}`:E?` on lines L${S.left}-L${D.right}`:`, original lines L${S.left}-L${D.left}`),!(0,c.Po)(A)&&!(0,c.Po)(_)&&A&&_&&(B=!0,x=A.right===_.right?R||k&&T?` on line R${A.right}`:`, modified line R${_.right}`:R||k&&T?` on lines R${A.right}-R${_.right}`:`, modified lines R${A.right}-R${_.right}`),(0,i.jsx)(i.Fragment,{children:k?(0,i.jsx)(i.Fragment,{children:T?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.l.Item,{onSelect:M,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+x,(0,i.jsx)(a.l.TrailingVisual,{children:(0,i.jsx)(u.z,{keys:"Alt+n"})})]}),(0,i.jsxs)(a.l.Item,{onSelect:e=>M(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),p+x]})]}):(0,i.jsxs)(i.Fragment,{children:[H?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.l.Item,{onSelect:F,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+n,(0,i.jsx)(a.l.TrailingVisual,{children:(0,i.jsx)(u.z,{keys:E?"Alt+n":"Alt+Shift+N"})})]}),I&&(0,i.jsxs)(a.l.Item,{onSelect:e=>F(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),p+n]})]}):null,B?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.l.Item,{onSelect:M,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+x,(0,i.jsx)(a.l.TrailingVisual,{children:(0,i.jsx)(u.z,{keys:"Alt+n"})})]}),(0,i.jsxs)(a.l.Item,{onSelect:e=>M(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),p+x]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(r.PlusIcon,{}),children:m+y}),O&&I&&(0,i.jsxs)(a.l.Item,{onSelect:e,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),p+y]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(r.PlusIcon,{}),children:g(m,N,w)}),O&&(0,i.jsxs)(a.l.Item,{onSelect:e,children:[(0,i.jsx)(a.l.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),g(p,N,w)]})]})}try{x.displayName||(x.displayName="StartConversationContextMenuItems")}catch{}},41955:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(9449),r=n(51888),a=n(55293),l=n(27267),s=n(77321),o=n(81904),d=n(9393),c=n(63681),u=n(73724),f=n(46347),h=n(46141);let m=(0,a.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:m,diffEntryId:p,diffLines:g,fileLineCount:x,fileAnchor:y,filePath:b,tableRef:v,selectedDiffRowRange:j,handleDiffRowClick:C,updateDiffLines:N,updateSelectedDiffRowRange:w,replaceSelectedDiffRowRangeFromGridCells:k,copilotChatReferenceData:L}){(0,c.e)({clearSelectedDiffRowRange:m,containerRef:v,fileAnchor:y,isSplitDiff:!1,leftLines:g,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:j,updateSelectedDiffRowRange:w});let S=(0,a.useMemo)(()=>{if(j)return(0,s.A)({selectedDiffRowRange:j,leftLines:g})},[j,g]),D=(0,a.useMemo)(()=>(0,o.fR)(g.map(e=>e)),[g]);(0,a.useEffect)(()=>{N(y,g)},[g,y,N]);let I=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&I.has(n.diffLineNumIndex)?I.get(n.diffLineNumIndex)?.push(n):e&&I.set(n.diffLineNumIndex,[n]))}let A=g.map((e,s)=>{let c=g[s+1],m=g[s-1],v="HUNK"===e.type,j=(0,r.IQ)(y,(0,r.XU)(e.type),e.blobLineNumber),{currentHunk:N,nextHunk:w,previousHunk:k}=(0,o.Fs)(e,D),A=I.get(s),_=s===A?.[0]?.diffLineNumIndex?n:void 0,E=(0,h.r)(e,e,"RIGHT"),R=S?.isRowSelected(e),T=(0,d.qX)(y,e,e),F={diffEntryId:p,diffLine:e,currentHunk:N,fileAnchor:y,fileLineCount:x,filePath:b,isLeftSide:"DELETION"===e.type,isSplit:!1,nextHunk:w,previousHunk:k,diffContext:t};return(0,i.jsx)(a.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:(0,i.jsx)(l._,{...F,isRowSelected:R,rowId:T,children:v?(0,i.jsx)(f.A,{nextLine:c,prevLine:m,focusedSearchResult:_,resultsForLine:A},s):(0,i.jsx)(u.Pd,{filePath:b,copilotChatReferenceData:L,handleDiffRowClick:C,lineAnchor:j,resultsForLine:A,focusedSearchResult:_,summary:E},s)})})},s)});return(0,i.jsx)(i.Fragment,{children:A})}),p=m;try{m.displayName||(m.displayName="UnifiedDiffLines")}catch{}},97177:(e,t,n)=>{n.d(t,{m:()=>s,y:()=>o});var i=n(9449),r=n(26443),a=n(55293);let l=(0,a.createContext)(null);function s({children:e,...t}){let n=!!t.commentingImplementation,s=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==s)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let o=t?.ghostUser??r.tT.ghostUser,d=(0,a.useMemo)(()=>({ghostUser:o,...t}),[...Object.values(t),o]);return(0,i.jsx)(l.Provider,{value:d,children:e})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{l.displayName||(l.displayName="DiffContext")}catch{}try{s.displayName||(s.displayName="DiffContextProvider")}catch{}},68950:(e,t,n)=>{n.d(t,{K:()=>s,c:()=>l});var i=n(9449),r=n(55293);let a=(0,r.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function l({children:e,searchTerm:t,setSearchTerm:n}){let l=(0,r.useRef)(""),[s,o]=(0,r.useState)(!1),d=(0,r.useCallback)(e=>{e&&""===t&&""!==l.current?n(l.current):e||""===t||(l.current=t,n("")),o(e)},[t,n]),c=(0,r.useMemo)(()=>({diffFindOpen:s,setDiffFindOpen:d}),[s,d]);return(0,i.jsx)(a.Provider,{value:c,children:e})}function s(){return(0,r.useContext)(a)}try{a.displayName||(a.displayName="DiffFindOpenContext")}catch{}try{l.displayName||(l.displayName="DiffFindOpenProvider")}catch{}},27267:(e,t,n)=>{n.d(t,{_:()=>l,s:()=>s});var i=n(9449),r=n(55293);let a=(0,r.createContext)(null);function l({children:e,currentHunk:t,diffEntryId:n,diffLine:l,fileAnchor:s,fileLineCount:o,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineThreadsConnectionId:m,nextHunk:p,originalLineThreads:g,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b,diffContext:v}){let j=(0,r.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:l,fileAnchor:s,fileLineCount:o,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineHasThreads:h&&h.length>0,modifiedLineThreadsConnectionId:m,nextHunk:p,originalLineThreads:g,originalLineHasThreads:g&&g.length>0,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b,diffContext:v}),[t,n,l,s,o,d,c,u,f,h,m,p,g,x,y,b,v]);return(0,i.jsx)(a.Provider,{value:j,children:e})}function s(){let e=(0,r.useContext)(a);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{a.displayName||(a.displayName="DiffLineContext")}catch{}try{l.displayName||(l.displayName="DiffLineContextProvider")}catch{}},24361:(e,t,n)=>{n.d(t,{M:()=>h,_:()=>m});var i=n(9449),r=n(55293),a=n(19255),l=n(16340),s=n(27267),o=n(97177),d=n(35538);let c="thread",u="annotation",f=(0,r.createContext)(null);function h({children:e,line:t}){let[n,l]=(0,r.useState)(!1),[h,m]=(0,r.useState)(),[g,x]=(0,r.useState)(),[y,b]=(0,r.useState)(),[v,j]=(0,r.useState)(),[C,N]=(0,r.useState)(),{ghostUser:w}=(0,o.y)(),{originalLineThreads:k,modifiedLineThreads:L,originalLineThreadsConnectionId:S,modifiedLineThreadsConnectionId:D}=(0,s.s)(),[I,A]=(0,r.useState)(),{threads:_,threadConnectionId:E}=p({line:t,side:I,originalLineThreads:k,modifiedLineThreads:L,originalLineThreadsConnectionId:S,modifiedLineThreadsConnectionId:D,ghostUser:w}),R=(0,r.useMemo)(()=>!!h||!!g||!!y||!!v,[h,y,g,v]),T=(0,r.useCallback)(()=>{l(!0)},[]),F=(0,r.useCallback)(()=>{l(!1)},[]),M=(0,r.useCallback)(e=>{e?N({id:e,kind:c}):N(void 0)},[]),O=C?.kind===c?C.id:void 0,P=C?.kind===u?C.id:void 0,H=(0,r.useCallback)(e=>{e?N({id:e,kind:u}):N(void 0)},[]),B=(0,r.useCallback)((e,t,n)=>{switch((0,a.e)(),e){case"context-menu":m(t),j(void 0),b(void 0),x(void 0);break;case"new-conversation":j({cellId:t,withSuggestedChange:n?.withSuggestedChange}),m(void 0),b(void 0),x(void 0);break;case"marker-details":b(t),m(void 0),x(void 0),j(void 0);break;case"marker-list":x(t),m(void 0),j(void 0),b(void 0)}},[]),$=(0,r.useCallback)(e=>{switch(e){case"context-menu":m(void 0);break;case"new-conversation":j(void 0);break;case"marker-details":b(void 0);break;case"marker-list":x(void 0)}},[]),U=(0,r.useCallback)(e=>(A(e),p({line:t,side:e,modifiedLineThreads:L,modifiedLineThreadsConnectionId:D,originalLineThreads:k,originalLineThreadsConnectionId:S,ghostUser:w}).threads),[t,L,D,k,S,w]),W=(0,r.useMemo)(()=>t.annotationsData?.annotations?.filter(d.z)??[],[t.annotationsData?.annotations]),V=(0,r.useMemo)(()=>({annotations:W,isActionBarVisible:n,showActionBar:T,hideActionBar:F,selectThreadId:M,selectAnnotationId:H,closeDialog:$,openDialog:B,anyMenuOpen:R,selectedThreadId:O,selectedAnnotationId:P,openContextMenuCell:h,openMarkersListCell:g,openMarkerDetailsCell:y,openNewConversationCell:v,threads:_,updateVisibleThreads:U,threadConnectionId:E}),[W,n,T,F,M,H,$,B,R,O,P,h,g,y,v,_,E,U]);return(0,i.jsx)(f.Provider,{value:V,children:e})}function m(){let e=(0,r.useContext)(f);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function p({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,originalLineThreadsConnectionId:r,modifiedLineThreadsConnectionId:a,ghostUser:s}){switch(t){case"LEFT":return{threads:n||[],threadConnectionId:r};case"RIGHT":return{threads:i||[],threadConnectionId:a};case void 0:return{threads:(0,l.F)(e.threadsData,s),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{f.displayName||(f.displayName="MarkersDialogContext")}catch{}try{h.displayName||(h.displayName="MarkersDialogContextProvider")}catch{}},50990:(e,t,n)=>{n.d(t,{Y:()=>m,o:()=>f});var i=n(9449),r=n(7572),a=n(97156),l=n(55293),s=n(77321),o=n(76515),d=n(30841),c=n(9393);let u=(0,l.createContext)(null);function f(){let e=(0,l.useContext)(u);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function h(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function m({children:e}){let t=(0,l.useRef)(new Map),n=(0,d.K)(e=>{if(!e)return;let n=e.diffAnchor,i=t.current.get(n);if(!i)return;let{leftLines:r,rightLines:a}=(0,c.Mk)(i);return(0,s.A)({selectedDiffRowRange:e,leftLines:r,rightLines:a})}),[f,m]=(0,l.useState)(()=>(0,o.ZD)(a.fV.hash)),[p,g]=(0,l.useState)(()=>{if(f){let e=n(f);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),x=(0,d.K)(e=>{let t=n(e);g(t?{leftLines:t.selectedLeftLines,rightLines:t.selectedRightLines||[]}:{leftLines:[],rightLines:[]})}),y=(0,d.K)((e,t,n,i)=>{if(!t||!n)return;let r=i&&f&&f.diffAnchor===e?t<=f.firstSelectedLineNumber?{...f,startLineNumber:t,startOrientation:n,endLineNumber:f.firstSelectedLineNumber,endOrientation:f.firstSelectedOrientation}:{...f,startLineNumber:f.firstSelectedLineNumber,startOrientation:f.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};h(r),m(r),x(r),(0,o.i8)(r)}),b=(0,d.K)(e=>{h(e),m(e),x(e),(0,o.i8)(e)}),v=(0,d.K)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{b({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),j=(0,d.K)(()=>{f&&(m(void 0),x(void 0),(0,r.i)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),C=(0,d.K)((e,n)=>{t.current.set(e,n),f?.diffAnchor===e&&x(f)}),N=(0,d.K)(e=>t.current.get(e)),w=(0,l.useMemo)(()=>({selectedDiffRowRange:f,updateSelectedDiffRowRange:y,clearSelectedDiffRowRange:j,replaceSelectedDiffRowRange:b,replaceSelectedDiffRowRangeFromGridCells:v,updateDiffLines:C,selectedDiffLines:p,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:N}),[f,y,j,b,v,p,C,n,N]);return(0,i.jsx)(u.Provider,{value:w,children:e})}try{u.displayName||(u.displayName="SelectedDiffRowRange")}catch{}try{m.displayName||(m.displayName="SelectedDiffRowRangeContextProvider")}catch{}},69759:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(9449),r=n(95140),a=n(65481),l=n(75177),s=n(38553),o=n(69909),d=n(55293),c=n(57442);function u({identityUuid:e,size:t,type:n,url:o}){let[d]=(0,r.I)(()=>window.location.origin,"https://www.github.com",[]),u=new URL(o,d).origin,{renderState:h,errorMsg:m,iFrameRef:p,containerRef:g}=(0,c.Nc)(u);if("ipynb"===n&&t>3e7||t>2e8)return(0,i.jsx)(a.A,{variant:"danger",children:"Sorry, this is too big to display."});let x=h!==c.M_.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"},y={height:c.Uk,padding:0,background:"none"};return(0,i.jsx)(l.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,i.jsxs)(l.A,{"data-hpc":!0,"data-host":u,"data-type":n,ref:g,sx:{width:1024,...h!==c.M_.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...h===c.M_.READY?y:{}},children:[h===c.M_.ERROR?(0,i.jsx)(f,{error:m}):h!==c.M_.READY?(0,i.jsx)(s.A,{size:"large",sx:{mx:"auto"}}):null,h!==c.M_.ERROR&&(0,i.jsx)(l.A,{as:"iframe",ref:p,src:`${o}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...x},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function f({error:e}){if(!e)return(0,i.jsx)(a.A,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,i.jsxs)(a.A,{variant:"danger",children:[(0,i.jsx)(o.A,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,i.jsx)("p",{children:t.map((e,t)=>(0,i.jsxs)(d.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{u.displayName||(u.displayName="FileRendererBlob")}catch{}try{f.displayName||(f.displayName="FileRendererErrorMessage")}catch{}},86233:(e,t,n)=>{n.d(t,{a:()=>i});function i({path:e,Component:t,shouldNavigateOnError:n,transitionType:i,children:r}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let n=`${e.pathname}${e.search}`;t=await window.fetch(n,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom","X-React-Router":"json"}})}catch(e){return{type:n?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:n?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:n?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:i,children:r}}},42024:(e,t,n)=>{n.d(t,{Gy:()=>i,LB:()=>c,lm:()=>d,nn:()=>u});var i,r=n(9449),a=n(70170),l=n(55293);!function(e){e[e.small=1]="small",e[e.medium=544]="medium",e[e.large=768]="large",e[e.xlarge=1012]="xlarge",e[e.xxlarge=1280]="xxlarge",e[e.xxxlarge=1350]="xxxlarge",e[e.xxxxlarge=1440]="xxxxlarge"}(i||(i={}));let s=[1440,1350,1280,1012,768,544,1],o=l.createContext({screenSize:1});function d(){return l.useContext(o)}function c({children:e,initialValue:t}){let n=(0,l.useSyncExternalStore)(()=>()=>{},()=>t??u(window.innerWidth),()=>t??1),i=(0,l.useRef)(n),[s,d]=(0,l.useState)(n),c=(0,l.useCallback)(()=>{let e=u(window.innerWidth);i.current!==e&&(i.current=e,d(e))},[]);(0,l.useEffect)(()=>{let e=new ResizeObserver((0,a.s)(c));return e.observe(document.documentElement),()=>e.disconnect()},[c]);let f=(0,l.useMemo)(()=>({screenSize:s}),[s]);return(0,r.jsx)(o.Provider,{value:f,children:e})}function u(e){for(let t of s)if(e>=t)return t;return 1}try{o.displayName||(o.displayName="ScreenContext")}catch{}try{c.displayName||(c.displayName="ScreenSizeProvider")}catch{}},224:(e,t,n)=>{n.d(t,{k:()=>s});var i=n(9449),r=n(22868),a=n(75177),l=n(64872);function s({zIndex:e,altText:t,hovercardUrl:n,src:s,square:o,icon:d,iconColor:c,backgroundColor:u,backgroundSx:f,sx:h,size:m=20}){return(0,i.jsxs)(a.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...h},children:[(0,i.jsx)(r.r,{alt:t,"data-hovercard-url":n,size:m,square:o,src:s}),(0,i.jsx)(l.k,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:f})]})}try{s.displayName||(s.displayName="StatusAvatar")}catch{}},64872:(e,t,n)=>{n.d(t,{k:()=>l});var i=n(9449),r=n(75177),a=n(30729);function l({iconColor:e,icon:t,size:n=12,backgroundColor:l="fg.onEmphasis",absolute:s=!0,backgroundSx:o}){let d,c;return 12===n?(d="10px",c="1px"):20===n?(d="16px",c="2px"):(d="16px",c="4px"),(0,i.jsxs)(r.A,{sx:{display:"flex",borderRadius:"100px",...s?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...o},children:[(0,i.jsx)(r.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:l}}),(0,i.jsx)(a.A,{icon:t,size:n,sx:{color:e,position:"relative"}})]})}try{l.displayName||(l.displayName="StatusIcon")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-7901e7","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js","vendors-node_modules_primer_react_lib-esm_FilteredActionList_FilteredActionList_js","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_stack-68835d","vendors-node_modules_primer_react_lib-esm_Heading_Heading_js-node_modules_primer_react_lib-es-cdb604","vendors-node_modules_primer_react_lib-esm_PageLayout_PageLayout_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-b1b3d3","vendors-node_modules_github_hotkey_dist_index_js-node_modules_lodash-es_capitalize_js","vendors-node_modules_primer_react_lib-esm_Popover_Popover_js-node_modules_primer_react_node_m-73dd48","vendors-node_modules_primer_behaviors_dist_esm_anchored-position_js-node_modules_fzy_js_index-192fd2","vendors-node_modules_primer_react_lib-esm_Button_LinkButton_js-node_modules_primer_react_lib--df3bb1","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_primer_react_lib-esm_A-29c03d","ui_packages_react-core_register-app_ts","ui_packages_relay-environment_relay-environment_ts","ui_packages_list-view_src_ListItem_ListItem_tsx-ui_packages_list-view_src_ListItem_Title_tsx--68e5b9","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_ref-selector_RefSelector_tsx","ui_packages_analytics-provider_analytics-provider_ts-ui_packages_commenting_hooks_use-markdow-5cb9ce","ui_packages_commit-attribution_index_ts-ui_packages_commit-checks-status_index_ts-ui_packages-33affb","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-11450c"],()=>t(33938)),e.O()}]);
//# sourceMappingURL=commits-419c025e4ec8.js.map