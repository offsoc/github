{"version":3,"file":"sessions-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/sessions/transform-notice.ts","app/assets/modules/github/sessions/webauthn-support.ts","app/assets/modules/github/sessions/emu-login.ts","ui/packages/cookies/cookies.ts","ui/packages/form-utils/form-utils.ts","ui/packages/form-utils/remote-submit.ts","ui/packages/onfocus/onfocus.ts","ui/packages/runtime-environment/runtime-environment.ts","ui/packages/ssr-utils/ssr-globals.ts","ui/packages/ssr-utils/ssr.ts","ui/packages/webauthn-support-level/webauthn-support-level.ts"],"sourcesContent":["import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch (e) {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onInput} from '@github-ui/onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n\non('click', '.js-toggle-redacted-note-content', async event => {\n  const currentButton = event.currentTarget as HTMLButtonElement\n  const noteContainer = currentButton.closest('.note')!\n  if (noteContainer) {\n    const note = noteContainer.getElementsByClassName('js-note')[0]\n    if (note) {\n      const newContent = currentButton.getAttribute('data-content')!.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n      note.innerHTML = newContent\n    }\n  }\n\n  const toggleElements = noteContainer.getElementsByClassName('js-toggle-redacted-note-content')\n  for (const elem of toggleElements) {\n    const button = elem as HTMLButtonElement\n    button.hidden = !button.hidden\n  }\n})\n","import {deleteCookie, getCookies} from '@github-ui/cookies'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-transform-notice', {\n  constructor: HTMLElement,\n  add(el) {\n    const cookies = getCookies('org_transform_notice')\n    for (const cookie of cookies) {\n      const message = document.createElement('span')\n      try {\n        message.textContent = atob(decodeURIComponent(cookie.value))\n        deleteCookie(cookie.key)\n        el.appendChild(message)\n        el.hidden = false\n      } catch (e) {\n        // Do nothing, ignore on invalid encoding.\n      }\n      return\n    }\n  },\n})\n","import {iuvpaaSupportLevel, webauthnSupportLevel} from '@github-ui/webauthn-support-level'\nimport {get, parseRequestOptionsFromJSON} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit, changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface WebauthnPublicKeyCredential extends PublicKeyCredential {\n  isConditionalMediationAvailable?: () => Promise<boolean>\n}\n\nconst conditionalAbortController = new AbortController()\n// webauthn-get.ts component\nconst webauthnGetComponent = 'webauthn-get'\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n\nexport async function isConditionalMediationSupported(): Promise<boolean | undefined> {\n  return await (\n    globalThis.PublicKeyCredential as unknown as WebauthnPublicKeyCredential | undefined\n  )?.isConditionalMediationAvailable?.()\n}\n\nexport async function supportConditionalMediation(): Promise<void> {\n  const uivpaa = await iuvpaaSupportLevel()\n  const conditionalForm = document.querySelector<HTMLFormElement>('.js-conditional-webauthn-placeholder')!\n  const webauthnGet = document.querySelector<HTMLElement>(webauthnGetComponent)!\n\n  // Don't initiate conditional mediation if this is a \"low confidence\" passkey login\n  if (webauthnGet && webauthnGet.getAttribute('subtle-login') !== null) {\n    return\n  }\n\n  const isAvailable = await isConditionalMediationSupported()\n\n  if (conditionalForm && isAvailable && uivpaa === 'supported') {\n    document.querySelector('#login_field')?.setAttribute('autocomplete', 'username webauthn')\n    const signRequest = conditionalForm.getAttribute('data-webauthn-sign-request')\n\n    if (!signRequest) {\n      return\n    }\n\n    if (webauthnGet) {\n      // Cancel pending conditional request if a basic get request is started\n      webauthnGet.addEventListener(webauthnGetEvent, () => {\n        conditionalAbortController.abort()\n      })\n    }\n\n    const signRequestJSON: CredentialRequestOptionsJSON = JSON.parse(signRequest)\n    const options = parseRequestOptionsFromJSON(signRequestJSON)\n    options.signal = conditionalAbortController.signal\n\n    const signResponse = await get(options)\n    const responseField = conditionalForm.querySelector<HTMLFormElement>('.js-conditional-webauthn-response')!\n    responseField.value = JSON.stringify(signResponse)\n    requestSubmit(conditionalForm)\n  }\n}\n\n// Record the browser's webauthn support level in the GitHub login form.\n// Ask the device to sign a request when the user taps its button.\nobserve('.js-webauthn-support', {\n  constructor: HTMLInputElement,\n  add(el) {\n    changeValue(el, webauthnSupportLevel())\n  },\n})\n\nobserve('.js-webauthn-iuvpaa-support', {\n  constructor: HTMLInputElement,\n  async add(el) {\n    changeValue(el, await iuvpaaSupportLevel())\n  },\n})\n\nobserve('.js-support', {\n  constructor: HTMLInputElement,\n  async add(el) {\n    changeValue(el, 'true')\n  },\n})\n\nobserve('.js-conditional-webauthn-placeholder', function () {\n  supportConditionalMediation()\n})\n","import {isEnterprise} from '@github-ui/runtime-environment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-login-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    EMULoginHandler(el)\n\n    el.addEventListener('input', function () {\n      EMULoginHandler(el)\n    })\n  },\n})\n\nexport function EMULoginHandler(loginElement: HTMLInputElement) {\n  const form = loginElement.closest<HTMLElement>('form')\n  if (!form) return\n\n  const passwordInput = form.querySelector<HTMLInputElement>('.js-password-field')\n  const signInButton = form.querySelector<HTMLInputElement>('.js-sign-in-button')\n  if (!passwordInput || !signInButton) return\n  const loginInput = loginElement.value\n  const invalidUnderscoreLogin = ['pj_nitin', 'up_the_irons']\n\n  const emuLoginExperienceAvailable = () => {\n    // disable-emu-sso: proxima has its own SSO login experience, this form only supports the admin user\n    return !isEnterprise() && signInButton.getAttribute('disable-emu-sso') !== 'true'\n  }\n\n  const webauthnLoginSection = document.querySelector('.js-webauthn-login-emu-control')\n  const webauthnLoginHint = document.querySelector('.js-webauthn-subtle-emu-control')\n  const webauthnLoginHintBox = document.querySelector('.js-webauthn-hint-emu-control')\n  const forgotPassword = document.querySelector('#forgot-password')\n\n  if (\n    emuLoginExperienceAvailable() &&\n    loginInput.includes('_') &&\n    !loginInput.includes('@') &&\n    !invalidUnderscoreLogin.includes(loginInput) &&\n    !loginInput.endsWith('_admin') &&\n    !(signInButton.getAttribute('development') && loginInput.endsWith('_fab'))\n  ) {\n    passwordInput.setAttribute('disabled', 'true')\n    signInButton.value = signInButton.getAttribute('data-sso-label') || ' '\n    webauthnLoginSection?.setAttribute('hidden', 'true')\n    webauthnLoginHint?.setAttribute('hidden', 'true')\n    webauthnLoginHintBox?.setAttribute('hidden', 'true')\n    forgotPassword?.setAttribute('hidden', 'true')\n  } else {\n    passwordInput.removeAttribute('disabled')\n    signInButton.value = signInButton.getAttribute('data-signin-label') || ' '\n    webauthnLoginSection?.removeAttribute('hidden')\n    webauthnLoginHint?.removeAttribute('hidden')\n    webauthnLoginHintBox?.removeAttribute('hidden')\n    forgotPassword?.removeAttribute('hidden')\n  }\n}\n","interface Cookie {\n  key: string\n  value: string\n}\n\n/**\n * Get a cookie by name.\n * @param name\n * @returns a cookie object or undefined if not found.\n */\nexport function getCookie(name: string): Cookie | undefined {\n  return getCookies(name)[0]\n}\n\n/**\n * Get all cookies by name.\n * @param name\n * @returns\n */\nexport function getCookies(name: string): Cookie[] {\n  const cookies = []\n  for (const cookie of readCookies()) {\n    const [key, value] = cookie.trim().split('=')\n    if (name === key && typeof value !== 'undefined') {\n      cookies.push({key, value})\n    }\n  }\n  return cookies\n}\n\nfunction readCookies(): string[] {\n  try {\n    return document.cookie.split(';')\n  } catch {\n    // Cookie access disabled.\n    return []\n  }\n}\n\n/**\n * Set a new cookie with sensible defaults like secure.\n * @param name\n * @param value\n * @param expiration\n * @param strictDomain\n * @param samesite\n */\nexport function setCookie(\n  name: string,\n  value: string,\n  expiration: string | null = null,\n  strictDomain = false,\n  samesite = 'lax',\n) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = expiration ? `; expires=${expiration}` : ''\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=${value}; path=/; domain=${domain}${expire}${secure}; samesite=${samesite}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n\n/**\n * Delete a given cookie with sensible defaults like secure.\n * This sets the expires value to a second ago to delete the cookie.\n * @param name\n * @param strictDomain\n */\nexport function deleteCookie(name: string, strictDomain = false) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const time = new Date().getTime()\n  const expiration = new Date(time - 1).toUTCString()\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = `; expires=${expiration}`\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=''; path=/; domain=${domain}${expire}${secure}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n","import {persistSubmitButtonValue} from './remote-submit'\n\ntype TextField = HTMLInputElement | HTMLTextAreaElement\ntype Button = HTMLInputElement | HTMLButtonElement\n\nfunction fire(target: HTMLElement, name: string, cancelable: boolean): boolean {\n  return target.dispatchEvent(\n    new CustomEvent(name, {\n      bubbles: true,\n      cancelable,\n    }),\n  )\n}\n\n// Submit a form while ensuring that `submit` event is also triggered.\n//\n// Calling native `form.submit()` method immediately submits the form without triggering the `submit` event.\n// As a result, code that wants to hook into form submits would never execute.\n//\n// This method first triggers the `submit` event and, if that event wasn't `preventDefault`d, submits the\n// form natively.\nexport function requestSubmit(form: HTMLFormElement, submitter?: Button) {\n  if (submitter) {\n    checkButtonValidity(form, submitter)\n    persistSubmitButtonValue(submitter)\n  }\n  if (fire(form, 'submit', true)) {\n    form.submit()\n  }\n}\n\n// Check submitter validity for form.requestSubmit compatibility.\n// See https://html.spec.whatwg.org/#dom-form-requestsubmit.\nfunction checkButtonValidity(form: HTMLFormElement, submitter: Button) {\n  if (!(form instanceof HTMLFormElement)) throw new TypeError('The specified element is not of type HTMLFormElement.')\n  if (!(submitter instanceof HTMLElement)) throw new TypeError('The specified element is not of type HTMLElement.')\n  if (submitter.type !== 'submit') throw new TypeError('The specified element is not a submit button.')\n  if (!form || form !== submitter.form) throw new Error('The specified element is not owned by the form element.')\n}\n\n// Set a form field value while ensuring that `change` event is also triggered.\n//\n// Having the `change` event fire is important for various behaviors to react, such as form validation.\nexport function changeValue(input: TextField, value: string | boolean) {\n  if (typeof value === 'boolean') {\n    if (input instanceof HTMLInputElement) {\n      input.checked = value\n    } else {\n      throw new TypeError('only checkboxes can be set to boolean value')\n    }\n  } else {\n    if (input.type === 'checkbox') {\n      throw new TypeError(\"checkbox can't be set to string value\")\n    } else {\n      input.value = value\n    }\n  }\n  fire(input, 'change', false)\n}\n\n// Fill multiple form fields by item name.\nexport function fillFormValues(form: HTMLFormElement, fields: {[key: string]: string}) {\n  for (const name in fields) {\n    const value = fields[name]\n    const element = form.elements.namedItem(name)\n\n    if (element instanceof HTMLInputElement) {\n      element.value = value!\n    } else if (element instanceof HTMLTextAreaElement) {\n      element.value = value!\n    }\n  }\n}\n\n// Test if element is a form field.\nexport function isFormField(element: Node): boolean {\n  if (!(element instanceof HTMLElement)) {\n    return false\n  }\n\n  const name = element.nodeName.toLowerCase()\n  const type = (element.getAttribute('type') || '').toLowerCase()\n  return (\n    name === 'select' ||\n    name === 'textarea' ||\n    (name === 'input' && type !== 'submit' && type !== 'reset') ||\n    element.isContentEditable\n  )\n}\n\nfunction searchParamsFromFormData(formData: FormData): URLSearchParams {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new URLSearchParams(formData as any)\n}\n\n// Get a `?` search string for a URL for a GET form, using its `action` attribute as well as its other fields.\nexport function combineGetFormSearchParams(formAction: URL, formData: FormData): string {\n  const allSearchParams = new URLSearchParams(formAction.search)\n  const searchParamsFromInputs = searchParamsFromFormData(formData)\n  for (const [key, value] of searchParamsFromInputs) {\n    allSearchParams.append(key, value)\n  }\n  return allSearchParams.toString()\n}\n\n// Serialize form data into string.\nexport function serialize(form: HTMLFormElement): string {\n  return searchParamsFromFormData(new FormData(form)).toString()\n}\n","// Emulates submit button submission values by inserting a hidden input to the form.\n//\n// Submit events can be triggerd in the following ways:\n// - User clicks on a submit button.\n// - User press Enter when focusing on a form field; also known as \"implicit submission\".\n// - Programmatically via requestSubmit helper.\n//\n// On GitHub.com, the submission is either handled by the browser or remoteForm.\n//\n// For submissions triggered by user actions, the name and value of the clicked submit button (also known as\n// \"the submitter\") is passed along in the request, and can be programmatically retrieved with FormData.entries().\n//\n// However, this value will be lost in the following cases:\n// - 1. When the submitter button is disabled, most commonly by [data-disable-with].\n// - 2. When submitting via requestSubmit (from form.js), because the submission does not originated from a submitter.\n// - 3. When submitting with remoteForm, because FormData(form).entries() does not know about the submitter. In Safari\n// the submitter is known during the submission steps, but this behavior is not supported in any other browsers.\n//\n// @see {@link https://github.com/github/form-data-entries/pull/7}.\n//\n// For the exact workarounds, refer to ./form.js and ./remote.js.\nexport function persistSubmitButtonValue(button: HTMLButtonElement | HTMLInputElement) {\n  const form = button.closest('form')\n  if (!(form instanceof HTMLFormElement)) {\n    return\n  }\n\n  let input = findPersistedSubmitButtonValue(form)\n\n  if (button.name) {\n    const defaultValue = button.matches('input[type=submit]') ? 'Submit' : ''\n    const value = button.value || defaultValue\n    if (!input) {\n      input = document.createElement('input')\n      input.type = 'hidden'\n      input.classList.add('js-submit-button-value')\n      form.prepend(input)\n    }\n    input.name = button.name\n    input.value = value\n  } else if (input) {\n    input.remove()\n  }\n}\n\nexport function findPersistedSubmitButtonValue(form: HTMLFormElement): HTMLInputElement | null {\n  const input = form.querySelector('input.js-submit-button-value')\n  return input instanceof HTMLInputElement ? input : null\n}\n","// React to elements receiving focus\n//\n// Often we need to apply some behavior to form elements when they start getting\n// interacted with. We could use `observe`, but that can be expensive if there\n// are many such elements on the page, and when we aren't actually interested in\n// those elements until they receive focus.\n//\n// This is a lightweight and preferred alternative to the family of methods\n// from `github/focused` module.\n//\n// Examples\n//\n//   onFocus('.js-widget', element => {\n//     // ...\n//   })\n\nimport SelectorSet from 'selector-set'\n\nlet initialized = false\nconst selectorSet: SelectorSet<(el: HTMLElement) => void> = new SelectorSet()\n\nfunction handleFocus(event: FocusEvent) {\n  const focused = event.target\n  if (focused instanceof HTMLElement && focused.nodeType !== Node.DOCUMENT_NODE) {\n    for (const match of selectorSet.matches(focused)) {\n      match.data.call(null, focused)\n    }\n  }\n}\n\nexport function onFocus(selector: string, fn: (el: HTMLElement) => unknown) {\n  if (!initialized) {\n    initialized = true\n    // We use the \"focus\" event in the capture phase because Firefox\n    // historically had a limitation with \"focusin\" not bubbling.\n    document.addEventListener('focus', handleFocus, true)\n  }\n  selectorSet.add(selector, fn)\n\n  if (document.activeElement instanceof HTMLElement && document.activeElement.matches(selector)) {\n    fn(document.activeElement)\n  }\n}\n\nexport function onKey(\n  eventType: 'keydown' | 'keypress' | 'keyup',\n  selector: string,\n  inputHandler: (event: KeyboardEvent) => unknown,\n) {\n  function blurHandler(event: Event) {\n    const currentTarget = event.currentTarget as HTMLElement\n    if (!currentTarget) return\n    currentTarget.removeEventListener(eventType, inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener(eventType, inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n\nexport function onInput(selector: string, inputHandler: EventListener) {\n  function blurHandler(event: Event) {\n    const {currentTarget} = event\n    if (!currentTarget) return\n\n    currentTarget.removeEventListener('input', inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener('input', inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n","import memoize from '@github/memoize'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nconst runtimeEnvironment = memoize(githubEnvironment)\n\n// return the github instance environment\n// if dotcom, returns 'dotcom'\n// if enterprise, returns 'enterprise'\nfunction githubEnvironment(): string {\n  return ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"runtime-environment\"]')?.content || ''\n}\n\nexport const isEnterprise = memoize(isEnterpriseEnvironment)\nfunction isEnterpriseEnvironment(): boolean {\n  return runtimeEnvironment() === 'enterprise'\n}\n\n// This is the \"bundler\" that built the client-side assets, e.g. \"webpack\"\nexport const bundler = typeof BUNDLER !== 'undefined' ? BUNDLER : undefined\n","// When using SSR, browser globals are not available. If you try to use them, Node.js will throw an error\ntype SSRSafeLocation = Pick<Location, 'pathname' | 'origin' | 'search' | 'hash' | 'href'>\n\n// eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\nexport const ssrSafeDocument = typeof document === 'undefined' ? undefined : document\n// eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\nexport const ssrSafeWindow = typeof window === 'undefined' ? undefined : window\n// eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\nexport const ssrSafeHistory = typeof history === 'undefined' ? undefined : history\n\nexport const ssrSafeLocation: SSRSafeLocation =\n  // eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\n  typeof location === 'undefined' ? {pathname: '', origin: '', search: '', hash: '', href: ''} : location\n\nexport function setLocation(url: string) {\n  // eslint-disable-next-line no-restricted-syntax\n  const parsedURL: SSRSafeLocation = new URL(url)\n  const {pathname, origin, search, hash} = parsedURL\n\n  Object.assign(ssrSafeLocation, {pathname, origin, search, hash})\n}\n","import {ssrSafeDocument} from './ssr-globals'\n\n/***\n * Are we rendering on the server?\n */\nexport const IS_SERVER = typeof ssrSafeDocument === 'undefined'\n\n/***\n * Are we rendering on the client?\n */\nexport const IS_BROWSER = !IS_SERVER\n\n/***\n * This helper returns `true` if:\n * - we are rendering on the server\n * - we are on the client, and the app has been hydrated from a server-render\n */\nexport function wasServerRendered() {\n  if (IS_SERVER) {\n    return true\n  }\n\n  return Boolean(ssrSafeDocument!.querySelector('react-app[data-ssr=\"true\"]'))\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n"],"names":["flashClassName","removeFlash","flashContainer","document","querySelector","child","children","classList","contains","removeChild","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","getElementById","hidden","githubMobileAuthenticateErrorAndRetry","resetPrompt","genericHandler","message","addFlashMessage","template","TemplateInstance","className","node","importNode","appendChild","getErrorAndRetryMessage","attributeName","getAttribute","initializeMobileAuthRequestStatusPoll","el","successCallback","failCallback","checkCancelCallback","url","poll","errorCount","token","status","form","csrfInput","response","self","fetch","Request","method","body","FormData","mode","headers","Accept","value","ok","responseJSON","json","URL","encodeURIComponent","window","location","origin","href","searchParams","set","assign","click","Promise","resolve","setTimeout","e","observe","smsSending","add","remove","smsSuccess","remoteForm","wants","text","error","smsError","textContent","pane1","pane2","flash","pane","JSON","parse","reload","focus","onInput","event","target","currentTarget","pattern","test","requestSubmit","on","currentButton","noteContainer","closest","note","getElementsByClassName","newContent","replace","innerHTML","elem","button","constructor","HTMLElement","cookie","getCookies","createElement","atob","decodeURIComponent","deleteCookie","key","conditionalAbortController","AbortController","isConditionalMediationSupported","globalThis","PublicKeyCredential","isConditionalMediationAvailable","supportConditionalMediation","uivpaa","iuvpaaSupportLevel","conditionalForm","webauthnGet","isAvailable","setAttribute","signRequest","addEventListener","abort","signRequestJSON","options","parseRequestOptionsFromJSON","signal","signResponse","get","responseField","stringify","HTMLInputElement","changeValue","webauthnSupportLevel","EMULoginHandler","loginElement","passwordInput","signInButton","loginInput","webauthnLoginSection","webauthnLoginHint","webauthnLoginHintBox","forgotPassword","emuLoginExperienceAvailable","isEnterprise","includes","invalidUnderscoreLogin","endsWith","removeAttribute","getCookie","name","cookies","readCookies","split","trim","push","setCookie","expiration","strictDomain","samesite","domain","secure","protocol","expire","Date","time","getTime","toUTCString","fire","cancelable","dispatchEvent","CustomEvent","bubbles","submitter","checkButtonValidity","HTMLFormElement","type","persistSubmitButtonValue","submit","input","checked","fillFormValues","fields","element","elements","namedItem","HTMLTextAreaElement","isFormField","nodeName","toLowerCase","isContentEditable","searchParamsFromFormData","formData","URLSearchParams","combineGetFormSearchParams","formAction","allSearchParams","search","append","toString","serialize","findPersistedSubmitButtonValue","defaultValue","matches","prepend","initialized","selectorSet","SelectorSet","handleFocus","focused","nodeType","Node","DOCUMENT_NODE","match","data","call","onFocus","selector","fn","activeElement","onKey","eventType","inputHandler","blurHandler","removeEventListener","field","runtimeEnvironment","memoize","ssrSafeDocument","head","content","bundler","BUNDLER","undefined","ssrSafeWindow","ssrSafeHistory","history","ssrSafeLocation","pathname","hash","IS_SERVER","IS_BROWSER","wasServerRendered","Boolean","webauthnSupported","isUserVerifyingPlatformAuthenticatorAvailable"],"sourceRoot":""}