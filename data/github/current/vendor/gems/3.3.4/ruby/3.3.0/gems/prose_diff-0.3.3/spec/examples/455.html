<html>
<head>
    <title>455</title>
    <link href="./example.css" rel="stylesheet" type="text/css">
</head>
<body>

  <div class="example prose-diff">
    <!-- <div class="options"><div data-key="profile">true</div></div> -->
    <h2>should not time out</h2>

    <div class="before">
      <article class="markdown-body entry-content" itemprop="mainContentOfPage"><div>
      <h2>
      <a name="advanced-branching" class="anchor" href="#advanced-branching"><span class="octicon octicon-link"></span></a>Advanced Branching</h2>
      <div>
      <div>
      <p>You’ve already learnt the basics of branching in Chapter 2. In this chapter you
      will learn about more advanced branching techniques by learning the following
      topics:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>How to configure <code>git merge</code> to behave differently</p>
      </li>
      <li>
      <p>How to resolve merge conflicts</p>
      </li>
      <li>
      <p>How to avoid solving the same merge conflicts multiple times</p>
      </li>
      <li>
      <p>How to create a tag</p>
      </li>
      <li>
      <p>How to generate a version number from previous tags</p>
      </li>
      <li>
      <p>How to bring individual commits from one branch to another</p>
      </li>
      <li>
      <p>How to revert a previous commit</p>
      </li>
      <li>
      <p>How to list what branches contain a given commit</p>
      </li>
      </ul>
      </div>
      <div>
      <p>When working as part of a team on a software project you will typically use
      branches to separate work between individuals, features, bug fixes and software
      releases. You should already be able to perform some basic branching actions //[DAN]: Care to list these basic actions?
      from Chapter 2. This chapter will expand on that so you can improve your
      branching workflow to be more effective.</p>
      </div>
      <div>
      <p>Let’s start by learning how to use some of the parameters provided by <code>git
      merge</code>.</p>
      </div>
      <div>
      <h3>
      <a name="merge-branches-with-different-options" class="anchor" href="#merge-branches-with-different-options"><span class="octicon octicon-link"></span></a>Merge branches with different options</h3>
      <div>
      <p>You learnt in Chapter 2 how to perform a basic merge of two branches. //[DAN]: Quick summary here?
      Additionally, <code>git merge</code> provides various options
      for merging branches without creating merge commits, using various strategies
      or a graphical merge tool.  //[DAN]: Being picky here, but git merge is controlled by the tool not the other way round which si the implication in the text. Could you rephrase please?</p>
      </div>
      <div>
      <p>Let’s start by seeing how to perform a merge that could be fast-forwarded but
      without creating a merge commit. Recall a fast-forward merge means that the
      incoming branch has the current branch as an ancestor i.e. no commits have been
      made on the current branch since the incoming branch branched from it.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why would you want to force creation of a merge commit?</div>
      While fast-forward merges can sometimes be useful in some Git workflows
      you will want to explicitly signify the merging of a branch, even if it was not
      necessary to do so. This explicit indication of a merge through the creation of
      a merge commit can show all the metadata present in any other commit e.g. who
      performed the merge, when and why. In software projects merging a new feature
      will usually be done by merging a branch and it is useful for regression
      testing and history visualization for this feature merge to be more explicit.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>Let’s create a branch that can be merged with a fast-forward merge:</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b chapter-spacing</code>.</p>
      </li>
      <li>
      <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add a line-break between
      chapters.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add spacing between chapters'
      01-IntroducingGitInPractice.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Fast-forward branch commit output</div>
      <div>
      <pre># git commit --message 'Add spacing between chapters'
        01-IntroducingGitInPractice.asciidoc

      [chapter-spacing 4426877] Add spacing between chapters
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      <div>
      <p>You’ve created a new branch named <code>chapter-spacing</code> that can be merged with a
      fast-forward merge into the <code>master</code> branch.</p>
      </div>
      <div>
      <h4>
      <a name="problem" class="anchor" href="#problem"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to merge the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      create a merge commit i.e. not perform a fast-forward merge.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution" class="anchor" href="#solution"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge --no-ff chapter-spacing</code>. You will be prompted for a commit
      message but can just accept the default.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Forced merge commit output</div>
      <div>
      <pre># git merge --no-ff chapter-spacing

      Merge made by the 'recursive' strategy. <b>(1)</b>
       01-IntroducingGitInPractice.asciidoc | 1 +
       1 file changed, 1 insertion(+) <b>(2)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge type</p>
      </li>
      <li>
      <p>diff summary</p>
      </li>
      </ol>
      </div>
      <div>
      <p>You can now delete the merged <code>chapter-spacing</code> branch by running <code>git branch
      --delete chapter-spacing</code> from the <code>master</code> branch.</p>
      </div>
      <div>
      <p>From the forced merge commit output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge type (1)" shows that this was a merge (rather than a fast-forward) and
      therefore produced a merge commit. It used the <em>recursive</em> Git merge strategy
      (we’ll discuss strategies more in the Discussion section).</p>
      </li>
      <li>
      <p>"diff summary (2)" shows a short summary of the changes that were made in
      this merge commit i.e. all the differences between the <code>master</code> branch and
      the <code>chapter-spacing</code> branch.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have merged the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      forced a merge-commit to be created.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion" class="anchor" href="#discussion"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXMergeNoFF.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXMergeNoFF.png" alt="05 GitXMergeNoFF" style="max-width:100%;"></a>
      </div>
      <div>Figure 1. Local repository after <code>git merge --no-ff chapter-spacing</code>
      </div>
      </div>
      <div>
      <p>You can see from Figure 5.1 that GitX shows a merge commit differently from a
      fast-forward. A merge commit has two parents: the previous commit on the
      current branch (i.e. <code>master</code> in this case) and the previous commit on the
      incoming branch (i.e. <code>chapter-spacing</code> in this case). Even when the
      <code>chapter-spacing</code> branch was deleted the existence of the branch will remain
      implied by the visual branching and merging in GitX.
      In this case where the
      branch contained a single commit this may not be terribly useful but on larger
      features this explicit indication of branches can aid history visualization.</p>
      </div>
      <div>
      <p><code>git merge</code> can also take a <code>--ff-only</code> flag which ensures that a merge commit
      is never created. In the case that the merge can only be made with a merge
      commit (e.g. there are conflicts that need to be resolved) then it will not
      perform the merge.</p>
      </div>
      <div>
      <h5>
      <a name="merge-strategies" class="anchor" href="#merge-strategies"><span class="octicon octicon-link"></span></a>Merge strategies</h5>
      <div>
      <p>The previous merge output state that it was using the <em>recursive</em> merge
      strategy. A merge strategy is an algorithm that Git uses to decide how to
      perform a merge.  //[DAN]: This definition should be in italics or better still in the background section.</p>
      </div>
      <div>
      <p>Strategies can be selected by passing the <code>--strategy</code> (or <code>-s</code>) flag to <code>git
      merge</code> followed by the name of the strategy. For example, to select the
      default, recursive strategy you could also call <code>git merge
      --strategy=recursive</code>.</p>
      </div>
      <div>
      <p>Certain strategies (such as recursive) can also take options by passing the
      <code>--strategy-option</code> (or <code>-X</code>) flag. For example, to set the patience diff
      option for the default, recursive strategy you would call <code>git merge
      --strategy-option=patience</code>.</p>
      </div>
      <div>
      <p>Some useful merge strategies are:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>recursive</code>: this strategy can merge one branch into another and
      automatically detect renames. This strategy is the default if you try and
      merge a single branch into another.</p>
      </li>
      <li>
      <p><code>octopus</code>: this strategy can merge multiple branches at once but will refuse
      to allow manual resolution of merge conflicts. This strategy is the default
      if you try and merge two or more branches into another.
      //[DAN]: 3 or more branches in one merge? Really? You should have a whole section on that and not jsut a brief mention here.</p>
      </li>
      <li>
      <p><code>ours</code>: this strategy performs a normal merge but ignores all the changes
      from the incoming branch. This means the resulting tree is the same as it
      was before the merge. This can be useful when you wish to merge a branch and
      indicate this in the history without wanting to actually including any of its
      changes. For example, you could use this to merge the results of a failed
      experiment and then delete the experimental branch afterwards. In this case
      the experiment would remain in the history without being in the current code.</p>
      </li>
      <li>
      <p><code>subtree</code>: this strategy is a modified version of the recursive strategy that
      will detect if the tree structures are at different levels and adjust them if
      needed. For example, if one branch had all the files in the directory <code>A/B/C</code>
      and the other had all the same files in the directory <code>A/B</code> then the subtree
      strategy would handle this case; <code>A/B/C/README.md</code> and <code>A/B/README.md</code> could
      be merged despite their different tree locations.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Some useful merge strategy options for a recursive merge (currently the only
      strategy with options) are:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>ours</code>: this option automatically solves any merge conflicts by always
      selecting the previous version from the current branch (instead of the
      version from the incoming branch).</p>
      </li>
      <li>
      <p><code>theirs</code>: this option is the reverse of <code>ours</code>; it automatically solves any
      merge conflicts by always selecting the version from the incoming branch
      (instead of the previous version from the current branch).</p>
      </li>
      <li>
      <p><code>patience</code>: this option uses a slightly more expensive <code>git diff</code> algorithm
      to try and decrease the chance of a merge conflict.</p>
      </li>
      <li>
      <p><code>ignore-all-space</code>: this option ignores whitespace when selecting which
      version should be chosen in case of a merge conflict. If the incoming branch
      has made only whitespace changes to a line the change will be ignored. If the
      current branch has introduced whitespace changes but the incoming branch has
      made non-whitespace changes then their version will be used.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Neither of these lists are exhaustive but these are the strategies and options
      I’ve found are most commonly used. All the merge strategies and options can be
      examined by running <code>git help merge</code>.</p>
      </div>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="resolve-a-merge-conflict" class="anchor" href="#resolve-a-merge-conflict"><span class="octicon octicon-link"></span></a>Resolve a merge conflict</h3>
      <div>
      <p>As mentioned previously sometimes when you merge one branch into another there
      will have been changes to the same part of the same file in both branches and
      Git cannot detect automatically which one is the desired change to include. In
      this situation you have what is known as a <em>merge conflict</em> which you will need
      to resolve manually.</p>
      </div>
      <div>
      <p>These situations tend to occur more often in software projects where you have
      multiple users working on the same project at the same time. One user might
      make a bug fix to a file while another refactors it and when the branches are
      merged then a merge conflict will be created.</p>
      </div>
      <div>
      <p>Let’s create a new branch and change the same files in both branches to produce
      a merge conflict.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b separate-files</code>.</p>
      </li>
      <li>
      <p>Run <code>git mv 01-IntroducingGitInPractice.asciidoc 00-Preface.asciidoc</code></p>
      </li>
      <li>
      <p>Cut the "Chapter 2" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>02-AdvancedGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Cut the "Chapter 1" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git add .</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Separate files.'</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Separate file commit output</div>
      <div>
      <pre># git commit --message 'Separate files.'

      [separate-files 4320fad] Separate files.
       3 files changed, 3 insertions(+), 4 deletions(-)
       create mode 100644 00-Preface.asciidoc
       create mode 100644 02-AdvancedGitInPractice.asciido</pre>
      </div>
      </div>
      <div>
      <p>Now let’s change the same file in the <code>master</code> branch.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add contents for Chapter 1.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add Chapter 1 content.'
      01-IntroducingGitInPractice.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Chapter 1 content commit output</div>
      <div>
      <pre># git commit --message 'Add Chapter 1 content.'
        01-IntroducingGitInPractice.asciidoc

      [master 7a04d8f] Add Chapter 1 content.
       1 file changed, 3 insertions(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-1" class="anchor" href="#problem-1"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to merge the <code>separate-files</code> branch into the <code>master</code> branch and
      resolve the merge conflict.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-1" class="anchor" href="#solution-1"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge separate-files</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Merge with conflict output</div>
      <div>
      <pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc <b>(1)</b>
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc <b>(2)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge attempt</p>
      </li>
      <li>
      <p>merge conflict</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the merge with conflict output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge attempt (1)" shows Git attempting to find a way of solving the merge
      automatically using the default, recursive merge strategy.</p>
      </li>
      <li>
      <p>"merge conflict (2)" shows that the merge strategy was unable to
      automatically solve the merge conflict so it requires human intervention.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Now we need to edit <code>01-IntroducingGitInPractice.asciidoc</code> and solve then merge
      conflict. When you open the file you will see something resembling:</p>
      </div>
      <div>
      <div>Before merge conflict resolution</div>
      <div>
      <pre>== Chapter 1 <b>(1)</b>
      &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD <b>(2)</b>
      It is a truth universally acknowledged, that a single person in <b>(3)</b>
      possession of good source code, must be in want of a version control
      system.

      == Chapter 2
      // TODO: write two chapters
      ======= <b>(4)</b>
      // TODO: think of funny first line that editor will approve. <b>(5)</b>
      &gt;&gt;&gt;&gt;&gt;&gt;&gt; separate-files <b>(6)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>unchanged line</p>
      </li>
      <li>
      <p>incoming marker</p>
      </li>
      <li>
      <p>incoming line</p>
      </li>
      <li>
      <p>branch separator</p>
      </li>
      <li>
      <p>current version</p>
      </li>
      <li>
      <p>current marker</p>
      </li>
      </ol>
      </div>
      <div>
      <p>Recall this output from Chapter 2. We now need to edit the file so it has the
      correct version. In this case this involves removing the Chapter 2 section as
      it was moved to another file in the <code>separate-files</code> branch and use the new
      Chapter 1 content that was entered in the <code>master</code> branch (here indicated by
      the <code>HEAD</code> section).</p>
      </div>
      <div>
      <p>After editing the file should resemble:</p>
      </div>
      <div>
      <div>After merge conflict resolution</div>
      <div>
      <pre>== Chapter 1
      It is a truth universally acknowledged, that a single person in
      possession of good source code, must be in want of a version control
      system.</pre>
      </div>
      </div>
      <div>
      <p>Now the merge conflict has been resolved the merge conflict can be marked as
      resolved with <code>git add</code> and then the merge commit committed.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git add 01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit</code>. Accept the default commit message.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Merge conflict commit output</div>
      <div>
      <pre>[master 725c33a] Merge branch 'separate-files'</pre>
      </div>
      </div>
      <div>
      <p>You can now run <code>git branch --delete separate-files</code> to delete the branch now
      it’s merged.</p>
      </div>
      <div>
      <p>You have merged two branches and resolved a merge conflict.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-1" class="anchor" href="#discussion-1"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>Merge commits have default commit message formats and slightly different diff output. Let’s take a look at the merge commit by running <code>git show master</code>:</p>
      </div>
      <div>
      <div>Merge commit output</div>
      <div>
      <pre># git show master

      commit 725c33ace6cd7b281c2d3b342ca05562d3dc7335
      Merge: 7a04d8f 4320fad
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 14:55:38 2014 +0100

          Merge branch 'separate-files' <b>(1)</b>

          Conflicts:
              01-IntroducingGitInPractice.asciidoc <b>(2)</b>

      diff --cc 01-IntroducingGitInPractice.asciidoc
      index 6a10e85,848ed39..c9cda9c
      --- a/01-IntroducingGitInPractice.asciidoc
      +++ b/01-IntroducingGitInPractice.asciidoc
      @@@ -1,8 -1,2 +1,4 @@@
      - = Git In Practice 1 <b>(3)</b>
        == Chapter 1
       -// TODO: think of funny first line that editor will approve. <b>(4)</b>
       +It is a truth universally acknowledged, that a single person in <b>(5)</b>
       +possession of good source code, must be in want of a version control
       +system.
      -
      - == Chapter 2
      - // TODO: write two chapters</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge subject</p>
      </li>
      <li>
      <p>conflicted file</p>
      </li>
      <li>
      <p>incoming delete</p>
      </li>
      <li>
      <p>current delete</p>
      </li>
      <li>
      <p>current insert</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the merge commit output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge subject (1)" shows the default commit message subject for merge
      commits. It specifies the incoming branch name. It can be changed but I
      prefer to leave it as-is and add any additional information in the commit
      message body instead so it is easily recognizable from subject alone as a
      merge commit.</p>
      </li>
      <li>
      <p>"conflicted file (2)" shows a file which had conflicts to be resolved
      manually. Sometimes these conflicts may be resolved incorrectly so this list
      is useful in spotting which files required resolution so they can be reviewed
      by other people later.</p>
      </li>
      <li>
      <p>"incoming delete (3)" shows a line that was deleted in the incoming (i.e.
      <code>separate-files</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current delete (4)" shows a line that was deleted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current insert (5)" shows a line that was inserted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      </ul>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why are there two columns for +/- markers?</div>
      In this diff there are two columns (rather than the usual one) allocated
      for <code>-</code> and <code>+</code> markers. This is because where a normal diff is just indicating
      insertions and deletions to a file this <em>merge diff</em> is showing insertions and
      deletions to a file and the branch they were inserted or removed in. For
      example, in the listing above the first column indicates a line inserted or
      deleted from the incoming branch (i.e. <code>separate-files</code>) and the second column
      indicates a line inserted or deleted from the current branch (i.e. <code>master</code>).
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXMergeConflict.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXMergeConflict.png" alt="05 GitXMergeConflict" style="max-width:100%;"></a>
      </div>
      <div>Figure 2. Local repository after merge conflict resolution</div>
      </div>
      <div>
      <p>You can see from Figure 5.2 that the changes from both branches are visible in
      the GitX output and that they are not always shown in chronological order; the
      <code>Add Chapter 1 content</code> commit occurs before the <code>Separate files.</code> commit even
      although it was made 3 minutes later.</p>
      </div>
      <div>
      <h5>
      <a name="using-a-graphical-merge-tool" class="anchor" href="#using-a-graphical-merge-tool"><span class="octicon octicon-link"></span></a>Using a graphical merge tool</h5>
      <div>
      <p>Instead of manually editing the contents of the file you can instead run <code>git
      mergetool</code> which will run a graphical merge tool such as <code>emerge</code>, <code>gvimdiff</code>,
      <code>kdiff3</code>, <code>meld</code>, <code>vimdiff</code>, <code>opendiff</code> or <code>tortoisemerge</code>.</p>
      </div>
      <div>
      <p>Sometimes it can be more helpful to use a graphical merge tool to be able to
      visualize conflicts graphically and understand how they relate to the changes
      that have been made by viewing them e.g. side-by-side. Although I personally
      tend not to use these tools any more I found them useful when learning how to
      use version control.</p>
      </div>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-OpenDiff.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-OpenDiff.png" alt="05 OpenDiff" style="max-width:100%;"></a>
      </div>
      <div>Figure 3. Opendiff merge conflict resolution</div>
      </div>
      <div>
      <p>You can also customize the tool that is used to specify your own merge tools.
      In Figure 5.3 you can see the <code>opendiff</code> tool provided with OSX used to resolve
      the previous merge conflict.</p>
      </div>
      <div>
      <p>Details for how to configure <code>git mergetool</code> to use your tool of choice are
      available by running <code>git help mergetool</code>.</p>
      </div>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="only-resolve-each-merge-conflict-once-git-rerere" class="anchor" href="#only-resolve-each-merge-conflict-once-git-rerere"><span class="octicon octicon-link"></span></a>Only resolve each merge conflict once: git rerere</h3>
      <div>
      <p>You may find yourself in a situation where you have a long-running branch where
      you have to keep merging in another branch and get the same merge conflicts
      every time.</p>
      </div>
      <div>
      <p>Git has a command named <code>git rerere</code> (which stands for Reuse Recorded
      Resolution) which integrates with the normal <code>git merge</code> workflow to record the
      resolution of merge conflicts for later replay. In short, you only need to
      solve a particular merge conflict once.</p>
      </div>
      <div>
      <p>Let’s learn how to setup <code>git rerere</code>.</p>
      </div>
      <div>
      <h4>
      <a name="problem-2" class="anchor" href="#problem-2"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to setup <code>git rerere</code> to integrate with the merge workflow so you
      don’t need to repeatedly resolve the same merges.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-2" class="anchor" href="#solution-2"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Run <code>git config --global --add rerere.enabled 1</code>.
      There will be no output.</p>
      </li>
      </ol>
      </div>
      <div>
      <p>You have enabled <code>git rerere</code> to automatically save and retrieve merge conflict
      resolutions in all repositories.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-2" class="anchor" href="#discussion-2"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>You do not need to run <code>git rerere manually</code> for it to store and retrieve merge
      conflicts. After enabling <code>git rerere</code> you will see some slightly different
      output the next time you run <code>git commit</code> after resolving a merge conflict:</p>
      </div>
      <div>
      <div>rerere merge conflict storage</div>
      <div>
      <pre># git commit

      Recorded resolution for '01-IntroducingGitInPractice.asciidoc'. <b>(1)</b>
      [master 725c33a] Merge branch 'separate-files'</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>rerere storage</p>
      </li>
      </ol>
      </div>
      <div>
      <p><code>git rerere</code> has been run by <code>git commit</code> to store the conflict and resolution
      so it can recall the same resolution when it sees the same conflict.</p>
      </div>
      <div>
      <p>If the same conflict is seen again:</p>
      </div>
      <div>
      <div>rerere merge conflict retrieval</div>
      <div>
      <pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc
      Resolved '01-IntroducingGitInPractice.asciidoc' using
        previous resolution. <b>(1)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>rerere retrieval</p>
      </li>
      </ol>
      </div>
      <div>
      <p><code>git rerere</code> has again been run by <code>git merge</code> to retrieve the resolution for
      the identical conflict. You still need to run <code>git add</code> to accept the conflict
      and can use <code>git diff</code> or edit the file to ensure the resolution was as
      expected and desired.</p>
      </div>
      <div>
      <p>Sometimes you may wish to make <code>git rerere</code> forget a resolution for a
      particular file because you resolved it incorrectly. In this case you can use
      <code>git rerere</code> with a path to forget any resolutions for that file or directory.
      For example to forget the resolution on <code>01-IntroducingGitInPractice.asciidoc</code>
      above you would run <code>git rerere forget 01-IntroducingGitInPractice.asciidoc</code>.
      There will be no output.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="create-a-tag-git-tag" class="anchor" href="#create-a-tag-git-tag"><span class="octicon octicon-link"></span></a>Create a tag: git tag</h3>
      <div>
      <p>Recall from Chapter 2 that a tag is another <em>ref</em> (or pointer) for a single
      commit. Tags differ from branches in that they are (usually) permanent. Rather
      than pointing to the work-in-progress on a feature they are generally used to
      describe a version of a software project.</p>
      </div>
      <div>
      <h4>
      <a name="problem-3" class="anchor" href="#problem-3"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to tag the current state of the <code>GitInPracticeRedux</code> <code>master</code> branch
      as version <code>v0.1</code>.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-3" class="anchor" href="#solution-3"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git tag v0.1</code>. There will be no output.</p>
      </li>
      <li>
      <p>Run <code>git tag</code>. The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>tag listing output</div>
      <div>
      <pre># git tag

      v0.1 <b>(1)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>version tag</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the tag listing output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"version tag (1)" shows that there is a tag named <code>v0.1</code> in the local
      repository.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have created a <code>v0.1</code> tag in the <code>GitInPracticeRedux</code> repository</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-3" class="anchor" href="#discussion-3"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXTag.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/7ae4f57d7fb65c905eb0fa728a60484896dec448/screenshots/05-GitXTag.png" alt="05 GitXTag" style="max-width:100%;"></a>
      </div>
      <div>Figure 4. Local repository after <code>git tag</code>
      </div>
      </div>
      <div>
      <p>You can see from Figure 5.4 after the <code>git tag</code> there is a new <code>v0.1</code> ref on
      the latest commit on the master branch (in the GitX interface this will be
      yellow). This indicates that this commit has been tagged <code>v0.1</code>.</p>
      </div>
      <div>
      <p>Note that, unlike branches, when new commits are made on the <code>master</code> branch
      the <code>v0.1</code> tag will not change. This is why tags are useful for versioning; they
      can record the significance of a particular commit without changing it.</p>
      </div>
      <div>
      <p>You can list all the tags that match a given pattern by using the <code>--list</code> (or
      <code>-l</code>) flag. For example the tag <code>v0.1</code> would be matched and listed by <code>git tag
      list --v0.*</code>.</p>
      </div>
      <div>
      <p>On rare occasions you may release you have tagged the wrong commit. Tags can be
      updated by passing the <code>--force</code> (or <code>-f</code>) flag to <code>git tag</code>. This will update
      the tag to point to the new commit.</p>
      </div>
      <div>
      <p>If you’ve created a tag with the wrong name rather than pointing to the wrong
      commit you can delete it using the <code>--delete</code> (or <code>-d</code>) flag.</p>
      </div>
      <div>
      <p>Run <code>git push</code> to push the <code>master</code> branch to <code>origin/master</code>. You may have
      noticed that it did not push any of the tags. After you’ve tagged a version and
      verified it is pointing to the correct commit and has the correct name then you
      can push it using <code>git push --tags</code>. This will push all the tags you’ve created
      in the local repository to the remote repository. These tags will then be
      fetched by anyone using <code>git fetch</code> on the same repository in future.</p>
      </div>
      <div>
      <p>As you saw earlier it is possible to delete or modify tags locally. It’s also
      possible to push these changes to the remote repository with <code>git push --tags
      --force</code> but this is not advised. For other users of the repository to have
      their tags updated they will need to delete them locally and refetch. This is
      intentionally cumbersome as Git intends tags to be static so does not change
      them locally without users explicit intervention.</p>
      </div>
      <div>
      <p>If you realize you’ve tagged the wrong commit and wish to update it after
      pushing it’s generally a better idea to just tag a new version and push that
      instead.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="generate-a-version-number-based-on-previous-tags-git-describe" class="anchor" href="#generate-a-version-number-based-on-previous-tags-git-describe"><span class="octicon octicon-link"></span></a>Generate a version number based on previous tags: git describe</h3>
      <div>
      <h4>
      <a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>You’ve seen that <code>git tag</code> can be used to identify certain commits as released
      versions of a project. In some cases you may wish to generate versions for the
      software in between tags.</p>
      </div>
      <div>
      <p>I’m a passionate advocate of continuous integration systems and I’ve worked on
      desktop software projects with traditional semantic versioning (e.g. <code>1.0.0</code>).
      On these projects I’ve setup continuous integration systems to create
      installers of the software on every commit to the <code>master</code> branch. However,
      this software there is an "About" screen which displays the version number of
      the software. In this case I’d like to have a version number generated that
      makes sense but does not rely on auto-generating a tag for each version of the
      software.</p>
      </div>
      <div>
      <p>As the expected version number would be <code>v0.1</code> given that has just been tagged
      let’s make another modification to the <code>GitInPracticeRedix</code> repository and
      generate a version number for the new, untagged commit.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add preface text.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Preface commit output</div>
      <div>
      <pre># git commit --message 'Add preface text.

      [master 0a5e328] Add preface text.
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-4" class="anchor" href="#problem-4"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to generate a version number for a software project based on existing
      tags in the repository.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-4" class="anchor" href="#solution-4"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git describe --tags</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Tag describe output</div>
      <div>
      <pre># git describe --tags

      v0.1-1-g0a5e328 <b>(1)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>generated version</p>
      </li>
      </ol>
      </div>
      <div>
      <p>"generated version (1)" shows the version generated from the state based on
      existing tags. It is hyphenated into three parts:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>v0.1</code> is the the most recent tag on the current branch.</p>
      </li>
      <li>
      <p><code>1</code> indicates that there has been one commit made since the most recent tag
      (<code>v0.1</code>) on the current branch.</p>
      </li>
      <li>
      <p><code>g0a5e328</code> is the current commit SHA-1 prepended with a <code>g</code> (which stands for
      <code>git</code>).</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have generated a version number based on the existing tags in the
      repository.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-4" class="anchor" href="#discussion-4"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>If <code>git describe</code> is passed a ref then it will generate the version number for
      that particular commit. For example, <code>git describe --tags v0.1</code> will output
      <code>v0.1</code>.</p>
      </div>
      <div>
      <p>If you wish to generate the long-form versions for tagged commits you can pass
      the <code>--long</code> flag. For example, <code>git describe --tags --long v0.1</code> will output
      <code>v0.1-0-g725c33a</code>.</p>
      </div>
      <div>
      <p>If you wish to use a longer or shorter SHA-1 ref you can configure this using
      the <code>--abbrev</code> flag. For example, <code>git describe --tags --abbrev=5</code> will output
      <code>v0.1-1-g0a5e3</code>. Note that if you use very low values (e.g. <code>--abbrev=1</code>) then
      <code>git describe</code> may use more than you have requested if it requires more to
      uniquely identify a commit.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="add-a-single-commit-to-the-current-branch-git-cherry-pick" class="anchor" href="#add-a-single-commit-to-the-current-branch-git-cherry-pick"><span class="octicon octicon-link"></span></a>Add a single commit to the current branch: git cherry-pick</h3>
      <div>
      <h4>
      <a name="background-1" class="anchor" href="#background-1"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>Sometimes you may wish to include only a single commit from a branch onto the
      current branch rather than merging the entire branch. For example you may want
      to back-port a single bug fix commit from a development branch into an stable
      release branch. You could do this by manually creating the same change on that
      branch but a better way would be using the tool that Git provides: <code>git
      cherry-pick</code>.</p>
      </div>
      <div>
      <p>Let’s create a new branch based off the <code>v0.1</code> tag that we’ll call
      <code>v0.1-release</code> so we have something we can cherry-pick.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b v0.1-release v0.1</code></p>
      </li>
      <li>
      <p>Add some content to the <code>02-AdvancedGitInPractice.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Advanced practice technique.'
      02-AdvancedGitInPractice.asciidoc</code>.
          The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Release branch commit output</div>
      <div>
      <pre># git commit --message 'Advanced practice technique.'
          02-AdvancedGitInPractice.asciidoc

      [v0.1-release dfe2377] Advanced practice technique.
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-5" class="anchor" href="#problem-5"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to cherry-pick a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-5" class="anchor" href="#solution-5"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry-pick dfe2377</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Commit cherry-pick output</div>
      <div>
      <pre># git cherry-pick dfe2377

      [master c18c9ef] Advanced practice technique. <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>commit summary</p>
      </li>
      </ol>
      </div>
      <div>
      <p>The "commit summary (1)" shows the result of the cherry-pick operation. Note
      that this is the same as the output for the previous <code>git commit</code> command with
      one difference: the SHA-1 has changed.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why does the SHA-1 change on a cherry-pick?</div>
      Recall that the SHA-1 of a commit is based on its tree and metadata
      (which includes the parent commit SHA-1). As resulting <code>master</code> branch
      cherry-picked commit has a difference parent to the commit that was
      cherry-picked from the <code>v0.1-release</code> branch the commit SHA-1 differs also.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>You have cherry-picked a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-5" class="anchor" href="#discussion-5"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p><code>git cherry-pick</code> (like many other Git commands) takes a ref as the parameter
      rather than a specific commit. As a result we could have interchangeably used
      <code>git cherry-pick v0.1-release</code> in the previous example for the same result.</p>
      </div>
      <div>
      <p>You can pass multiple refs to <code>cherry-pick</code> and they will be cherry-picked onto
      the current branch in the order requested.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>How many commits should I cherry pick?</div>
      Cherry-picking is best used for individual commits that may be out of
      sequence. The classic use-case highlighted earlier is back-porting bug fixes
      from a development branch to a stable branch. When this is done it’s
      effectively duplicating the commits (rather than sharing them as with a merge).
      If you find yourself wanting to cherry-pick the entire contents of a branch you
      would be better to merge it instead.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>If the <code>--edit</code> flag is passed to <code>git cherry-pick</code> it will prompt you for a
      commit message before committing.</p>
      </div>
      <div>
      <p>If there is a merge conflict on a <code>cherry-pick</code> you will need to resolve it a
      similar fashion as a <code>git merge</code> (or the same fashion as <code>git rebase</code> which you
      will see in Chapter 6). This involves resolving the conflict, running <code>git add</code>
      but then <code>git cherry-pick --continue</code> instead of <code>git commit</code> to commit the
      changes. If you wish to abort the current cherry-pick as perhaps you’ve
      realised the merge-conflict is too complex you can do this using <code>git
      cherry-pick --abort</code>.</p>
      </div>
      <div>
      <p>If you are cherry-picking from a public branch (i.e. one you will push
      remotely) to another public branch then you can use the <code>-x</code> flag to append a
      line to the cherry-picked commit’s message saying which commit this change was
      picked from. For example if this flag was used in the last example the commit
      message would have <code>(cherry picked from commit
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d)</code> appended to it.</p>
      </div>
      <div>
      <p>When you want to indicate in the commit message which person cherry-picked a
      particular change more explicitly than the "Committer" metadata that will be
      set by default then you can use the <code>--signoff</code> (or <code>-s</code>) flag. This will
      append a Signed-off-by line to the end of the commit message. For example if
      this flag was used in the last example the commit message would have
      <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code> appended to it.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="revert-a-previous-commit-git-revert" class="anchor" href="#revert-a-previous-commit-git-revert"><span class="octicon octicon-link"></span></a>Revert a previous commit: git revert</h3>
      <div>
      <h4>
      <a name="background-2" class="anchor" href="#background-2"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>You may occasionally make a commit that you regret. You would then wish to undo
      the commit until you can fix it so it works as intended.</p>
      </div>
      <div>
      <p>In Git you can rewrite history to hide such mistakes (as we will learn in
      Chapter 6) but this is generally considered bad practice if you have already
      pushed a commit publicly. In these cases you are better to instead use <code>git
      revert</code>.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-6" class="anchor" href="#problem-6"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to revert a commit to reverse its changes.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-6" class="anchor" href="#solution-6"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git revert c18c9ef</code>. You will be prompted for a message. Accept the
      default.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Revert output</div>
      <div>
      <pre># git revert c18c9ef

      [master 3e3c417] Revert "Advanced practice technique." <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>revert subject</p>
      </li>
      </ol>
      </div>
      <div>
      <p>To view the revert in more depth run <code>git show 3e3c417</code>:</p>
      </div>
      <div>
      <div>Revert show output</div>
      <div>
      <pre># git show 3e3c417

      commit 3e3c417e90b5eb3c04962618b238668d1a5dc5ab
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 20:26:06 2014 +0000

          Revert "Advanced practice technique." <b>(1)</b>

          This reverts commit c18c9ef9adc73cc1da7238ad97ffb50758482e91. <b>(2)</b>

      diff --git a/02-AdvancedGitInPractice.asciidoc
        b/02-AdvancedGitInPractice.asciidoc
      index 0e0765f..7eb5017 100644
      --- a/02-AdvancedGitInPractice.asciidoc
      +++ b/02-AdvancedGitInPractice.asciidoc
      @@ -1,2 +1,2 @@
       == Chapter 2
      -Practice doesn't make perfect; perfect practice makes perfect! <b>(3)</b>
      +// TODO: write two chapters</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>revert subject</p>
      </li>
      <li>
      <p>revert message</p>
      </li>
      <li>
      <p>reversed diff</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the revert show output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"revert subject (1)" shows the reverted commit’s subject prefixed with
      "Revert". This should hopefully describe what has been reverted fairly
      clearly and can be edited on commit if it does not.</p>
      </li>
      <li>
      <p>"revert message (2)" shows the body of the reverted commit which shows the
      full SHA-1 of the commit that was reverted.</p>
      </li>
      <li>
      <p>"reversed diff (3)" shows the diff of the new commit; this will be the exact
      opposite diff of the commit that was reverted.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have reverted a commit to reverse its changes.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-6" class="anchor" href="#discussion-6"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p><code>git revert</code> can take a <code>--signoff</code> (or <code>-s</code>) flag which behaves similarly to
      that of <code>git cherry-pick</code>; it will append a Signed-off-by line to the end of
      the commit message. For example if this flag was used in the last example the
      commit message would have <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code>
      appended to it.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="list-what-branches-contain-a-commit-git-cherry" class="anchor" href="#list-what-branches-contain-a-commit-git-cherry"><span class="octicon octicon-link"></span></a>List what branches contain a commit: git cherry</h3>
      <div>
      <h4>
      <a name="background-3" class="anchor" href="#background-3"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>If you have a workflow in which you do not merge your commits to other branches
      but have another person do it then you may wish to see which of your commits
      has been merged to another branch. Git has a tool to do this: <code>git cherry</code>.</p>
      </div>
      <div>
      <p>Let’s make another commit on the <code>v0.1-release</code> branch first:</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code></p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add release preface.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Release preface commit output</div>
      <div>
      <pre>[v0.1-release a8200e1] Add release preface.
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-7" class="anchor" href="#problem-7"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to see what commits remain un-merged to the <code>master</code> branch from the
      <code>v0.1-release</code> branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-7" class="anchor" href="#solution-7"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry --verbose master</code>
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Cherry output</div>
      <div>
      <pre># git cherry --verbose master

      - dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d Advanced practice technique. <b>(1)</b>
      + a8200e1407d49e37baad47da04c0981f43d7c7ff Add release preface. <b>(2)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>droppable commit</p>
      </li>
      <li>
      <p>kept commit</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the cherry output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"droppable commit (1)" is prefixed with a <code>-</code> and shows a commit that has
      been already included into the <code>master</code> branch.</p>
      </li>
      <li>
      <p>"kept commit (2)" is prefixed with a <code>+</code> and shows a commit that has not yet
      been included into the <code>master</code> branch.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have seen which commits remain un-merged from the <code>master</code> branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-7" class="anchor" href="#discussion-7"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>If you omit the <code>--verbose</code> (or <code>-v</code>) flag from <code>git cherry</code> it will show just
      the <code>-</code>/<code>+</code> and the full SHA-1 but not the commit subject e.g. <code>-
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d</code>.</p>
      </div>
      <div>
      <p>When you learn about rebasing in Chapter 6 <code>git cherry</code> can be useful at
      showing what commits will be kept or dropped after a rebase operation.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h3>
      <div>
      <p>In this chapter you hopefully learned:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>How to use <code>git merge</code>'s options to perform different types of merges</p>
      </li>
      <li>
      <p>How to use resolve merge conflicts</p>
      </li>
      <li>
      <p>How to use <code>git rerere</code> to repeatedly replay merge conflict resolutions</p>
      </li>
      <li>
      <p>How to use <code>git tag</code> to tag commits</p>
      </li>
      <li>
      <p>How to use <code>git describe</code> to generate version numbers for commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry-pick</code> to bring individual commits from one branch to
      another</p>
      </li>
      <li>
      <p>How to use <code>git revert</code> to reverse individual commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry</code> to list what commits remain un-merged on a branch</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Now let’s learn how to rewrite history.</p>
      </div>
      </div>
      </div>
      </div></article>
    </div>

    <div class="after">
      <article class="markdown-body entry-content" itemprop="mainContentOfPage"><div>
      <h2>
      <a name="advanced-branching" class="anchor" href="#advanced-branching"><span class="octicon octicon-link"></span></a>Advanced Branching</h2>
      <div>
      <div>
      <p>You’ve already learnt the basics of branching in Chapter 2. In this chapter you
      will learn about more advanced branching techniques by learning the following
      topics:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>How to configure <code>git merge</code> to behave differently</p>
      </li>
      <li>
      <p>How to resolve merge conflicts</p>
      </li>
      <li>
      <p>How to avoid solving the same merge conflicts multiple times</p>
      </li>
      <li>
      <p>How to create a tag</p>
      </li>
      <li>
      <p>How to generate a version number from previous tags</p>
      </li>
      <li>
      <p>How to bring individual commits from one branch to another</p>
      </li>
      <li>
      <p>How to revert a previous commit</p>
      </li>
      <li>
      <p>How to list what branches contain a given commit</p>
      </li>
      </ul>
      </div>
      <div>
      <p>When working as part of a team on a software project you will typically use
      branches to separate work between individuals, features, bug fixes and software
      releases. You should already be able to perform some basic branching actions //[DAN]: Care to list these basic actions?
      from Chapter 2. This chapter will expand on that so you can improve your
      branching workflow to be more effective.</p>
      </div>
      <div>
      <p>Let’s start by learning how to use some of the parameters provided by <code>git
      merge</code>.</p>
      </div>
      <div>
      <h3>
      <a name="merge-branches-with-different-options" class="anchor" href="#merge-branches-with-different-options"><span class="octicon octicon-link"></span></a>Merge branches with different options</h3>
      <div>
      <p>You learnt in Chapter 2 how to perform a basic merge of two branches. //[DAN]: Quick summary here?
      Additionally, <code>git merge</code> provides various options
      for merging branches without creating merge commits, using various strategies
      or a graphical merge tool.  //[DAN]: Being picky here, but git merge is controlled by the tool not the other way round which si the implication in the text. Could you rephrase please?</p>
      </div>
      <div>
      <p>Let’s start by seeing how to perform a merge that could be fast-forwarded but
      without creating a merge commit. Recall a fast-forward merge means that the
      incoming branch has the current branch as an ancestor i.e. no commits have been
      made on the current branch since the incoming branch branched from it.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why would you want to force creation of a merge commit?</div>
      While fast-forward merges can sometimes be useful in some Git workflows
      you will want to explicitly signify the merging of a branch, even if it was not
      necessary to do so. This explicit indication of a merge through the creation of
      a merge commit can show all the metadata present in any other commit e.g. who
      performed the merge, when and why. In software projects merging a new feature
      will usually be done by merging a branch and it is useful for regression
      testing and history visualization for this feature merge to be more explicit.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>Let’s create a branch that can be merged with a fast-forward merge:</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b chapter-spacing</code>.</p>
      </li>
      <li>
      <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add a line-break between
          chapters.
      //[DAN]: No git add command?</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add spacing between chapters'
      01-IntroducingGitInPractice.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Fast-forward branch commit output</div>
      <div>
      <pre># git commit --message 'Add spacing between chapters'
        01-IntroducingGitInPractice.asciidoc

      [chapter-spacing 4426877] Add spacing between chapters
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      <div>
      <p>You’ve created a new branch named <code>chapter-spacing</code> that can be merged with a
      fast-forward merge into the <code>master</code> branch.</p>
      </div>
      <div>
      <h4>
      <a name="problem" class="anchor" href="#problem"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to merge the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      create a merge commit i.e. not perform a fast-forward merge.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution" class="anchor" href="#solution"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge --no-ff chapter-spacing</code>. You will be prompted for a commit
      message but can just accept the default.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Forced merge commit output</div>
      <div>
      <pre># git merge --no-ff chapter-spacing

      Merge made by the 'recursive' strategy. <b>(1)</b>
       01-IntroducingGitInPractice.asciidoc | 1 +
       1 file changed, 1 insertion(+) <b>(2)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge type</p>
      </li>
      <li>
      <p>diff summary</p>
      </li>
      </ol>
      </div>
      <div>
      <p>You can now delete the merged <code>chapter-spacing</code> branch by running <code>git branch
      --delete chapter-spacing</code> from the <code>master</code> branch.</p>
      </div>
      <div>
      <p>From the forced merge commit output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge type (1)" shows that this was a merge (rather than a fast-forward) and
      therefore produced a merge commit. It used the <em>recursive</em> Git merge strategy
      (we’ll discuss strategies more in the Discussion section).</p>
      </li>
      <li>
      <p>"diff summary (2)" shows a short summary of the changes that were made in
      this merge commit i.e. all the differences between the <code>master</code> branch and
      the <code>chapter-spacing</code> branch.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have merged the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      forced a merge-commit to be created.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion" class="anchor" href="#discussion"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeNoFF.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeNoFF.png" alt="05 GitXMergeNoFF" style="max-width:100%;"></a>
      </div>
      <div>Figure 1. Local repository after <code>git merge --no-ff chapter-spacing</code>
      </div>
      </div>
      <div>
      <p>You can see from Figure 5.1 that GitX shows a merge commit differently from a
      fast-forward. A merge commit has two parents: the previous commit on the
      current branch (i.e. <code>master</code> in this case) and the previous commit on the
      incoming branch (i.e. <code>chapter-spacing</code> in this case). Even when the
      <code>chapter-spacing</code> branch was deleted the existence of the branch will remain
      implied by the visual branching and merging in GitX.
      In this case where the
      branch contained a single commit this may not be terribly useful but on larger
      features this explicit indication of branches can aid history visualization.</p>
      </div>
      <div>
      <p><code>git merge</code> can also take a <code>--ff-only</code> flag which ensures that a merge commit
      is never created. In the case that the merge can only be made with a merge
      commit (e.g. there are conflicts that need to be resolved) then it will not
      perform the merge.</p>
      </div>
      <div>
      <h5>
      <a name="merge-strategies" class="anchor" href="#merge-strategies"><span class="octicon octicon-link"></span></a>Merge strategies</h5>
      <div>
      <p>The previous merge output state that it was using the <em>recursive</em> merge
      strategy. A merge strategy is an algorithm that Git uses to decide how to
      perform a merge.  //[DAN]: This definition should be in italics or better still in the background section.</p>
      </div>
      <div>
      <p>Strategies can be selected by passing the <code>--strategy</code> (or <code>-s</code>) flag to <code>git
      merge</code> followed by the name of the strategy. For example, to select the
      default, recursive strategy you could also call <code>git merge
      --strategy=recursive</code>.</p>
      </div>
      <div>
      <p>Certain strategies (such as recursive) can also take options by passing the
      <code>--strategy-option</code> (or <code>-X</code>) flag. For example, to set the patience diff
      option for the default, recursive strategy you would call <code>git merge
      --strategy-option=patience</code>.</p>
      </div>
      <div>
      <p>Some useful merge strategies are:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>recursive</code>: this strategy can merge one branch into another and
      automatically detect renames. This strategy is the default if you try and
      merge a single branch into another.</p>
      </li>
      <li>
      <p><code>octopus</code>: this strategy can merge multiple branches at once but will refuse
      to allow manual resolution of merge conflicts. This strategy is the default
      if you try and merge two or more branches into another.
      //[DAN]: 3 or more branches in one merge? Really? You should have a whole section on that and not jsut a brief mention here.</p>
      </li>
      <li>
      <p><code>ours</code>: this strategy performs a normal merge but ignores all the changes
      from the incoming branch. This means the resulting tree is the same as it
      was before the merge. This can be useful when you wish to merge a branch and
      indicate this in the history without wanting to actually including any of its
      changes. For example, you could use this to merge the results of a failed
      experiment and then delete the experimental branch afterwards. In this case
      the experiment would remain in the history without being in the current code.</p>
      </li>
      <li>
      <p><code>subtree</code>: this strategy is a modified version of the recursive strategy that
      will detect if the tree structures are at different levels and adjust them if
      needed. For example, if one branch had all the files in the directory <code>A/B/C</code>
      and the other had all the same files in the directory <code>A/B</code> then the subtree
      strategy would handle this case; <code>A/B/C/README.md</code> and <code>A/B/README.md</code> could
      be merged despite their different tree locations.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Some useful merge strategy options for a recursive merge (currently the only
      strategy with options) are:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>ours</code>: this option automatically solves any merge conflicts by always
      selecting the previous version from the current branch (instead of the
      version from the incoming branch).</p>
      </li>
      <li>
      <p><code>theirs</code>: this option is the reverse of <code>ours</code>; it automatically solves any
      merge conflicts by always selecting the version from the incoming branch
      (instead of the previous version from the current branch).</p>
      </li>
      <li>
      <p><code>patience</code>: this option uses a slightly more expensive <code>git diff</code> algorithm
      to try and decrease the chance of a merge conflict.</p>
      </li>
      <li>
      <p><code>ignore-all-space</code>: this option ignores whitespace when selecting which
      version should be chosen in case of a merge conflict. If the incoming branch
      has made only whitespace changes to a line the change will be ignored. If the
      current branch has introduced whitespace changes but the incoming branch has
      made non-whitespace changes then their version will be used.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Neither of these lists are exhaustive but these are the strategies and options
      I’ve found are most commonly used. All the merge strategies and options can be
      examined by running <code>git help merge</code>.</p>
      </div>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="resolve-a-merge-conflict" class="anchor" href="#resolve-a-merge-conflict"><span class="octicon octicon-link"></span></a>Resolve a merge conflict</h3>
      <div>
      <p>As mentioned previously sometimes when you merge one branch into another there
      will have been changes to the same part of the same file in both branches and
      Git cannot detect automatically which one is the desired change to include. In
      this situation you have what is known as a <em>merge conflict</em> which you will need
      to resolve manually.</p>
      </div>
      <div>
      <p>These situations tend to occur more often in software projects where you have
      multiple users working on the same project at the same time. One user might
      make a bug fix to a file while another refactors it and when the branches are
      merged then a merge conflict will be created.</p>
      </div>
      <div>
      <p>Let’s create a new branch and change the same files in both branches to produce
      a merge conflict.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b separate-files</code>.</p>
      </li>
      <li>
      <p>Run <code>git mv 01-IntroducingGitInPractice.asciidoc 00-Preface.asciidoc</code></p>
      </li>
      <li>
      <p>Cut the "Chapter 2" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>02-AdvancedGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Cut the "Chapter 1" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git add .</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Separate files.'</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Separate file commit output</div>
      <div>
      <pre># git commit --message 'Separate files.'

      [separate-files 4320fad] Separate files.
       3 files changed, 3 insertions(+), 4 deletions(-)
       create mode 100644 00-Preface.asciidoc
       create mode 100644 02-AdvancedGitInPractice.asciido</pre>
      </div>
      </div>
      <div>
      <p>Now let’s change the same file in the <code>master</code> branch.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add contents for Chapter 1.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add Chapter 1 content.'
      01-IntroducingGitInPractice.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Chapter 1 content commit output</div>
      <div>
      <pre># git commit --message 'Add Chapter 1 content.'
        01-IntroducingGitInPractice.asciidoc

      [master 7a04d8f] Add Chapter 1 content.
       1 file changed, 3 insertions(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-1" class="anchor" href="#problem-1"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to merge the <code>separate-files</code> branch into the <code>master</code> branch and
      resolve the merge conflict.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-1" class="anchor" href="#solution-1"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge separate-files</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Merge with conflict output</div>
      <div>
      <pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc <b>(1)</b>
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc <b>(2)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge attempt</p>
      </li>
      <li>
      <p>merge conflict</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the merge with conflict output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge attempt (1)" shows Git attempting to find a way of solving the merge
      automatically using the default, recursive merge strategy.</p>
      </li>
      <li>
      <p>"merge conflict (2)" shows that the merge strategy was unable to
      automatically solve the merge conflict so it requires human intervention.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Now we need to edit <code>01-IntroducingGitInPractice.asciidoc</code> and solve then merge
      conflict. When you open the file you will see something resembling:</p>
      </div>
      <div>
      <div>Before merge conflict resolution</div>
      <div>
      <pre>== Chapter 1 <b>(1)</b>
      &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD <b>(2)</b>
      It is a truth universally acknowledged, that a single person in <b>(3)</b>
      possession of good source code, must be in want of a version control
      system.

      == Chapter 2
      // TODO: write two chapters
      ======= <b>(4)</b>
      // TODO: think of funny first line that editor will approve. <b>(5)</b>
      &gt;&gt;&gt;&gt;&gt;&gt;&gt; separate-files <b>(6)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>unchanged line</p>
      </li>
      <li>
      <p>incoming marker</p>
      </li>
      <li>
      <p>incoming line</p>
      </li>
      <li>
      <p>branch separator</p>
      </li>
      <li>
      <p>current version</p>
      </li>
      <li>
      <p>current marker</p>
      </li>
      </ol>
      </div>
      <div>
      <p>Recall this output from Chapter 2. We now need to edit the file so it has the
      correct version. In this case this involves removing the Chapter 2 section as
      it was moved to another file in the <code>separate-files</code> branch and use the new
      Chapter 1 content that was entered in the <code>master</code> branch (here indicated by
      the <code>HEAD</code> section).</p>
      </div>
      <div>
      <p>After editing the file should resemble:</p>
      </div>
      <div>
      <div>After merge conflict resolution</div>
      <div>
      <pre>== Chapter 1
      It is a truth universally acknowledged, that a single person in
      possession of good source code, must be in want of a version control
      system.</pre>
      </div>
      </div>
      <div>
      <p>Now the merge conflict has been resolved the merge conflict can be marked as
      resolved with <code>git add</code> and then the merge commit committed.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git add 01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit</code>. Accept the default commit message.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Merge conflict commit output</div>
      <div>
      <pre>[master 725c33a] Merge branch 'separate-files'</pre>
      </div>
      </div>
      <div>
      <p>You can now run <code>git branch --delete separate-files</code> to delete the branch now
      it’s merged.</p>
      </div>
      <div>
      <p>You have merged two branches and resolved a merge conflict.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-1" class="anchor" href="#discussion-1"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>Merge commits have default commit message formats and slightly different diff output. Let’s take a look at the merge commit by running <code>git show master</code>:</p>
      </div>
      <div>
      <div>Merge commit output</div>
      <div>
      <pre># git show master

      commit 725c33ace6cd7b281c2d3b342ca05562d3dc7335
      Merge: 7a04d8f 4320fad
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 14:55:38 2014 +0100

          Merge branch 'separate-files' <b>(1)</b>

          Conflicts:
              01-IntroducingGitInPractice.asciidoc <b>(2)</b>

      diff --cc 01-IntroducingGitInPractice.asciidoc
      index 6a10e85,848ed39..c9cda9c
      --- a/01-IntroducingGitInPractice.asciidoc
      +++ b/01-IntroducingGitInPractice.asciidoc
      @@@ -1,8 -1,2 +1,4 @@@
      - = Git In Practice 1 <b>(3)</b>
        == Chapter 1
       -// TODO: think of funny first line that editor will approve. <b>(4)</b>
       +It is a truth universally acknowledged, that a single person in <b>(5)</b>
       +possession of good source code, must be in want of a version control
       +system.
      -
      - == Chapter 2
      - // TODO: write two chapters</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>merge subject</p>
      </li>
      <li>
      <p>conflicted file</p>
      </li>
      <li>
      <p>incoming delete</p>
      </li>
      <li>
      <p>current delete</p>
      </li>
      <li>
      <p>current insert</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the merge commit output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"merge subject (1)" shows the default commit message subject for merge
      commits. It specifies the incoming branch name. It can be changed but I
      prefer to leave it as-is and add any additional information in the commit
      message body instead so it is easily recognizable from subject alone as a
      merge commit.</p>
      </li>
      <li>
      <p>"conflicted file (2)" shows a file which had conflicts to be resolved
      manually. Sometimes these conflicts may be resolved incorrectly so this list
      is useful in spotting which files required resolution so they can be reviewed
      by other people later.</p>
      </li>
      <li>
      <p>"incoming delete (3)" shows a line that was deleted in the incoming (i.e.
      <code>separate-files</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current delete (4)" shows a line that was deleted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current insert (5)" shows a line that was inserted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      </ul>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why are there two columns for +/- markers?</div>
      In this diff there are two columns (rather than the usual one) allocated
      for <code>-</code> and <code>+</code> markers. This is because where a normal diff is just indicating
      insertions and deletions to a file this <em>merge diff</em> is showing insertions and
      deletions to a file and the branch they were inserted or removed in. For
      example, in the listing above the first column indicates a line inserted or
      deleted from the incoming branch (i.e. <code>separate-files</code>) and the second column
      indicates a line inserted or deleted from the current branch (i.e. <code>master</code>).
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeConflict.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeConflict.png" alt="05 GitXMergeConflict" style="max-width:100%;"></a>
      </div>
      <div>Figure 2. Local repository after merge conflict resolution</div>
      </div>
      <div>
      <p>You can see from Figure 5.2 that the changes from both branches are visible in
      the GitX output and that they are not always shown in chronological order; the
      <code>Add Chapter 1 content</code> commit occurs before the <code>Separate files.</code> commit even
      although it was made 3 minutes later.</p>
      </div>
      <div>
      <h5>
      <a name="using-a-graphical-merge-tool" class="anchor" href="#using-a-graphical-merge-tool"><span class="octicon octicon-link"></span></a>Using a graphical merge tool</h5>
      <div>
      <p>Instead of manually editing the contents of the file you can instead run <code>git
      mergetool</code> which will run a graphical merge tool such as <code>emerge</code>, <code>gvimdiff</code>,
      <code>kdiff3</code>, <code>meld</code>, <code>vimdiff</code>, <code>opendiff</code> or <code>tortoisemerge</code>.</p>
      </div>
      <div>
      <p>Sometimes it can be more helpful to use a graphical merge tool to be able to
      visualize conflicts graphically and understand how they relate to the changes
      that have been made by viewing them e.g. side-by-side. Although I personally
      tend not to use these tools any more I found them useful when learning how to
      use version control.</p>
      </div>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-OpenDiff.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-OpenDiff.png" alt="05 OpenDiff" style="max-width:100%;"></a>
      </div>
      <div>Figure 3. Opendiff merge conflict resolution</div>
      </div>
      <div>
      <p>You can also customize the tool that is used to specify your own merge tools.
      In Figure 5.3 you can see the <code>opendiff</code> tool provided with OSX used to resolve
      the previous merge conflict.</p>
      </div>
      <div>
      <p>Details for how to configure <code>git mergetool</code> to use your tool of choice are
      available by running <code>git help mergetool</code>.</p>
      </div>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="only-resolve-each-merge-conflict-once-git-rerere" class="anchor" href="#only-resolve-each-merge-conflict-once-git-rerere"><span class="octicon octicon-link"></span></a>Only resolve each merge conflict once: git rerere</h3>
      <div>
      <p>You may find yourself in a situation where you have a long-running branch where
      you have to keep merging in another branch and get the same merge conflicts
      every time.</p>
      </div>
      <div>
      <p>Git has a command named <code>git rerere</code> (which stands for Reuse Recorded
      Resolution) which integrates with the normal <code>git merge</code> workflow to record the
      resolution of merge conflicts for later replay. In short, you only need to
      solve a particular merge conflict once.</p>
      </div>
      <div>
      <p>Let’s learn how to setup <code>git rerere</code>.</p>
      </div>
      <div>
      <h4>
      <a name="problem-2" class="anchor" href="#problem-2"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to setup <code>git rerere</code> to integrate with the merge workflow so you
      don’t need to repeatedly resolve the same merges.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-2" class="anchor" href="#solution-2"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Run <code>git config --global --add rerere.enabled 1</code>.
      There will be no output.</p>
      </li>
      </ol>
      </div>
      <div>
      <p>You have enabled <code>git rerere</code> to automatically save and retrieve merge conflict
      resolutions in all repositories.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-2" class="anchor" href="#discussion-2"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>You do not need to run <code>git rerere manually</code> for it to store and retrieve merge
      conflicts. After enabling <code>git rerere</code> you will see some slightly different
      output the next time you run <code>git commit</code> after resolving a merge conflict:</p>
      </div>
      <div>
      <div>rerere merge conflict storage</div>
      <div>
      <pre># git commit

      Recorded resolution for '01-IntroducingGitInPractice.asciidoc'. <b>(1)</b>
      [master 725c33a] Merge branch 'separate-files'</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>rerere storage</p>
      </li>
      </ol>
      </div>
      <div>
      <p><code>git rerere</code> has been run by <code>git commit</code> to store the conflict and resolution
      so it can recall the same resolution when it sees the same conflict.</p>
      </div>
      <div>
      <p>If the same conflict is seen again:</p>
      </div>
      <div>
      <div>rerere merge conflict retrieval</div>
      <div>
      <pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc
      Resolved '01-IntroducingGitInPractice.asciidoc' using
        previous resolution. <b>(1)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>rerere retrieval</p>
      </li>
      </ol>
      </div>
      <div>
      <p><code>git rerere</code> has again been run by <code>git merge</code> to retrieve the resolution for
      the identical conflict. You still need to run <code>git add</code> to accept the conflict
      and can use <code>git diff</code> or edit the file to ensure the resolution was as
      expected and desired.</p>
      </div>
      <div>
      <p>Sometimes you may wish to make <code>git rerere</code> forget a resolution for a
      particular file because you resolved it incorrectly. In this case you can use
      <code>git rerere</code> with a path to forget any resolutions for that file or directory.
      For example to forget the resolution on <code>01-IntroducingGitInPractice.asciidoc</code>
      above you would run <code>git rerere forget 01-IntroducingGitInPractice.asciidoc</code>.
      There will be no output.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="create-a-tag-git-tag" class="anchor" href="#create-a-tag-git-tag"><span class="octicon octicon-link"></span></a>Create a tag: git tag</h3>
      <div>
      <p>Recall from Chapter 2 that a tag is another <em>ref</em> (or pointer) for a single
      commit. Tags differ from branches in that they are (usually) permanent. Rather
      than pointing to the work-in-progress on a feature they are generally used to
      describe a version of a software project.</p>
      </div>
      <div>
      <h4>
      <a name="problem-3" class="anchor" href="#problem-3"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to tag the current state of the <code>GitInPracticeRedux</code> <code>master</code> branch
      as version <code>v0.1</code>.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-3" class="anchor" href="#solution-3"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git tag v0.1</code>. There will be no output.</p>
      </li>
      <li>
      <p>Run <code>git tag</code>. The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>tag listing output</div>
      <div>
      <pre># git tag

      v0.1 <b>(1)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>version tag</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the tag listing output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"version tag (1)" shows that there is a tag named <code>v0.1</code> in the local
      repository.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have created a <code>v0.1</code> tag in the <code>GitInPracticeRedux</code> repository</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-3" class="anchor" href="#discussion-3"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <div>
      <a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXTag.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXTag.png" alt="05 GitXTag" style="max-width:100%;"></a>
      </div>
      <div>Figure 4. Local repository after <code>git tag</code>
      </div>
      </div>
      <div>
      <p>You can see from Figure 5.4 after the <code>git tag</code> there is a new <code>v0.1</code> ref on
      the latest commit on the master branch (in the GitX interface this will be
      yellow). This indicates that this commit has been tagged <code>v0.1</code>.</p>
      </div>
      <div>
      <p>Note that, unlike branches, when new commits are made on the <code>master</code> branch
      the <code>v0.1</code> tag will not change. This is why tags are useful for versioning; they
      can record the significance of a particular commit without changing it.</p>
      </div>
      <div>
      <p>You can list all the tags that match a given pattern by using the <code>--list</code> (or
      <code>-l</code>) flag. For example the tag <code>v0.1</code> would be matched and listed by <code>git tag
      list --v0.*</code>.</p>
      </div>
      <div>
      <p>On rare occasions you may release you have tagged the wrong commit. Tags can be
      updated by passing the <code>--force</code> (or <code>-f</code>) flag to <code>git tag</code>. This will update
      the tag to point to the new commit.</p>
      </div>
      <div>
      <p>If you’ve created a tag with the wrong name rather than pointing to the wrong
      commit you can delete it using the <code>--delete</code> (or <code>-d</code>) flag.</p>
      </div>
      <div>
      <p>Run <code>git push</code> to push the <code>master</code> branch to <code>origin/master</code>. You may have
      noticed that it did not push any of the tags. After you’ve tagged a version and
      verified it is pointing to the correct commit and has the correct name then you
      can push it using <code>git push --tags</code>. This will push all the tags you’ve created
      in the local repository to the remote repository. These tags will then be
      fetched by anyone using <code>git fetch</code> on the same repository in future.</p>
      </div>
      <div>
      <p>As you saw earlier it is possible to delete or modify tags locally. It’s also
      possible to push these changes to the remote repository with <code>git push --tags
      --force</code> but this is not advised. For other users of the repository to have
      their tags updated they will need to delete them locally and refetch. This is
      intentionally cumbersome as Git intends tags to be static so does not change
      them locally without users explicit intervention.</p>
      </div>
      <div>
      <p>If you realize you’ve tagged the wrong commit and wish to update it after
      pushing it’s generally a better idea to just tag a new version and push that
      instead.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="generate-a-version-number-based-on-previous-tags-git-describe" class="anchor" href="#generate-a-version-number-based-on-previous-tags-git-describe"><span class="octicon octicon-link"></span></a>Generate a version number based on previous tags: git describe</h3>
      <div>
      <h4>
      <a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>You’ve seen that <code>git tag</code> can be used to identify certain commits as released
      versions of a project. In some cases you may wish to generate versions for the
      software in between tags.</p>
      </div>
      <div>
      <p>I’m a passionate advocate of continuous integration systems and I’ve worked on
      desktop software projects with traditional semantic versioning (e.g. <code>1.0.0</code>).
      On these projects I’ve setup continuous integration systems to create
      installers of the software on every commit to the <code>master</code> branch. However,
      this software there is an "About" screen which displays the version number of
      the software. In this case I’d like to have a version number generated that
      makes sense but does not rely on auto-generating a tag for each version of the
      software.</p>
      </div>
      <div>
      <p>As the expected version number would be <code>v0.1</code> given that has just been tagged
      let’s make another modification to the <code>GitInPracticeRedix</code> repository and
      generate a version number for the new, untagged commit.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add preface text.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Preface commit output</div>
      <div>
      <pre># git commit --message 'Add preface text.

      [master 0a5e328] Add preface text.
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-4" class="anchor" href="#problem-4"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to generate a version number for a software project based on existing
      tags in the repository.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-4" class="anchor" href="#solution-4"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git describe --tags</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Tag describe output</div>
      <div>
      <pre># git describe --tags

      v0.1-1-g0a5e328 <b>(1)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>generated version</p>
      </li>
      </ol>
      </div>
      <div>
      <p>"generated version (1)" shows the version generated from the state based on
      existing tags. It is hyphenated into three parts:</p>
      </div>
      <div>
      <ul>
      <li>
      <p><code>v0.1</code> is the the most recent tag on the current branch.</p>
      </li>
      <li>
      <p><code>1</code> indicates that there has been one commit made since the most recent tag
      (<code>v0.1</code>) on the current branch.</p>
      </li>
      <li>
      <p><code>g0a5e328</code> is the current commit SHA-1 prepended with a <code>g</code> (which stands for
      <code>git</code>).</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have generated a version number based on the existing tags in the
      repository.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-4" class="anchor" href="#discussion-4"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>If <code>git describe</code> is passed a ref then it will generate the version number for
      that particular commit. For example, <code>git describe --tags v0.1</code> will output
      <code>v0.1</code>.</p>
      </div>
      <div>
      <p>If you wish to generate the long-form versions for tagged commits you can pass
      the <code>--long</code> flag. For example, <code>git describe --tags --long v0.1</code> will output
      <code>v0.1-0-g725c33a</code>.</p>
      </div>
      <div>
      <p>If you wish to use a longer or shorter SHA-1 ref you can configure this using
      the <code>--abbrev</code> flag. For example, <code>git describe --tags --abbrev=5</code> will output
      <code>v0.1-1-g0a5e3</code>. Note that if you use very low values (e.g. <code>--abbrev=1</code>) then
      <code>git describe</code> may use more than you have requested if it requires more to
      uniquely identify a commit.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="add-a-single-commit-to-the-current-branch-git-cherry-pick" class="anchor" href="#add-a-single-commit-to-the-current-branch-git-cherry-pick"><span class="octicon octicon-link"></span></a>Add a single commit to the current branch: git cherry-pick</h3>
      <div>
      <h4>
      <a name="background-1" class="anchor" href="#background-1"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>Sometimes you may wish to include only a single commit from a branch onto the
      current branch rather than merging the entire branch. For example you may want
      to back-port a single bug fix commit from a development branch into an stable
      release branch. You could do this by manually creating the same change on that
      branch but a better way would be using the tool that Git provides: <code>git
      cherry-pick</code>.</p>
      </div>
      <div>
      <p>Let’s create a new branch based off the <code>v0.1</code> tag that we’ll call
      <code>v0.1-release</code> so we have something we can cherry-pick.</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b v0.1-release v0.1</code></p>
      </li>
      <li>
      <p>Add some content to the <code>02-AdvancedGitInPractice.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Advanced practice technique.'
      02-AdvancedGitInPractice.asciidoc</code>.
          The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Release branch commit output</div>
      <div>
      <pre># git commit --message 'Advanced practice technique.'
          02-AdvancedGitInPractice.asciidoc

      [v0.1-release dfe2377] Advanced practice technique.
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-5" class="anchor" href="#problem-5"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to cherry-pick a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-5" class="anchor" href="#solution-5"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry-pick dfe2377</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Commit cherry-pick output</div>
      <div>
      <pre># git cherry-pick dfe2377

      [master c18c9ef] Advanced practice technique. <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>commit summary</p>
      </li>
      </ol>
      </div>
      <div>
      <p>The "commit summary (1)" shows the result of the cherry-pick operation. Note
      that this is the same as the output for the previous <code>git commit</code> command with
      one difference: the SHA-1 has changed.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>Why does the SHA-1 change on a cherry-pick?</div>
      Recall that the SHA-1 of a commit is based on its tree and metadata
      (which includes the parent commit SHA-1). As resulting <code>master</code> branch
      cherry-picked commit has a difference parent to the commit that was
      cherry-picked from the <code>v0.1-release</code> branch the commit SHA-1 differs also.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>You have cherry-picked a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-5" class="anchor" href="#discussion-5"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p><code>git cherry-pick</code> (like many other Git commands) takes a ref as the parameter
      rather than a specific commit. As a result we could have interchangeably used
      <code>git cherry-pick v0.1-release</code> in the previous example for the same result.</p>
      </div>
      <div>
      <p>You can pass multiple refs to <code>cherry-pick</code> and they will be cherry-picked onto
      the current branch in the order requested.</p>
      </div>
      <div>
      <table><tbody><tr>
      <td>
      <div>Note</div>
      </td>
      <td>
      <div>How many commits should I cherry pick?</div>
      Cherry-picking is best used for individual commits that may be out of
      sequence. The classic use-case highlighted earlier is back-porting bug fixes
      from a development branch to a stable branch. When this is done it’s
      effectively duplicating the commits (rather than sharing them as with a merge).
      If you find yourself wanting to cherry-pick the entire contents of a branch you
      would be better to merge it instead.
      </td>
      </tr></tbody></table>
      </div>
      <div>
      <p>If the <code>--edit</code> flag is passed to <code>git cherry-pick</code> it will prompt you for a
      commit message before committing.</p>
      </div>
      <div>
      <p>If there is a merge conflict on a <code>cherry-pick</code> you will need to resolve it a
      similar fashion as a <code>git merge</code> (or the same fashion as <code>git rebase</code> which you
      will see in Chapter 6). This involves resolving the conflict, running <code>git add</code>
      but then <code>git cherry-pick --continue</code> instead of <code>git commit</code> to commit the
      changes. If you wish to abort the current cherry-pick as perhaps you’ve
      realised the merge-conflict is too complex you can do this using <code>git
      cherry-pick --abort</code>.</p>
      </div>
      <div>
      <p>If you are cherry-picking from a public branch (i.e. one you will push
      remotely) to another public branch then you can use the <code>-x</code> flag to append a
      line to the cherry-picked commit’s message saying which commit this change was
      picked from. For example if this flag was used in the last example the commit
      message would have <code>(cherry picked from commit
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d)</code> appended to it.</p>
      </div>
      <div>
      <p>When you want to indicate in the commit message which person cherry-picked a
      particular change more explicitly than the "Committer" metadata that will be
      set by default then you can use the <code>--signoff</code> (or <code>-s</code>) flag. This will
      append a Signed-off-by line to the end of the commit message. For example if
      this flag was used in the last example the commit message would have
      <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code> appended to it.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="revert-a-previous-commit-git-revert" class="anchor" href="#revert-a-previous-commit-git-revert"><span class="octicon octicon-link"></span></a>Revert a previous commit: git revert</h3>
      <div>
      <h4>
      <a name="background-2" class="anchor" href="#background-2"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>You may occasionally make a commit that you regret. You would then wish to undo
      the commit until you can fix it so it works as intended.</p>
      </div>
      <div>
      <p>In Git you can rewrite history to hide such mistakes (as we will learn in
      Chapter 6) but this is generally considered bad practice if you have already
      pushed a commit publicly. In these cases you are better to instead use <code>git
      revert</code>.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-6" class="anchor" href="#problem-6"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to revert a commit to reverse its changes.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-6" class="anchor" href="#solution-6"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git revert c18c9ef</code>. You will be prompted for a message. Accept the
      default.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Revert output</div>
      <div>
      <pre># git revert c18c9ef

      [master 3e3c417] Revert "Advanced practice technique." <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>revert subject</p>
      </li>
      </ol>
      </div>
      <div>
      <p>To view the revert in more depth run <code>git show 3e3c417</code>:</p>
      </div>
      <div>
      <div>Revert show output</div>
      <div>
      <pre># git show 3e3c417

      commit 3e3c417e90b5eb3c04962618b238668d1a5dc5ab
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 20:26:06 2014 +0000

          Revert "Advanced practice technique." <b>(1)</b>

          This reverts commit c18c9ef9adc73cc1da7238ad97ffb50758482e91. <b>(2)</b>

      diff --git a/02-AdvancedGitInPractice.asciidoc
        b/02-AdvancedGitInPractice.asciidoc
      index 0e0765f..7eb5017 100644
      --- a/02-AdvancedGitInPractice.asciidoc
      +++ b/02-AdvancedGitInPractice.asciidoc
      @@ -1,2 +1,2 @@
       == Chapter 2
      -Practice doesn't make perfect; perfect practice makes perfect! <b>(3)</b>
      +// TODO: write two chapters</pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>revert subject</p>
      </li>
      <li>
      <p>revert message</p>
      </li>
      <li>
      <p>reversed diff</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the revert show output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"revert subject (1)" shows the reverted commit’s subject prefixed with
      "Revert". This should hopefully describe what has been reverted fairly
      clearly and can be edited on commit if it does not.</p>
      </li>
      <li>
      <p>"revert message (2)" shows the body of the reverted commit which shows the
      full SHA-1 of the commit that was reverted.</p>
      </li>
      <li>
      <p>"reversed diff (3)" shows the diff of the new commit; this will be the exact
      opposite diff of the commit that was reverted.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have reverted a commit to reverse its changes.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-6" class="anchor" href="#discussion-6"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p><code>git revert</code> can take a <code>--signoff</code> (or <code>-s</code>) flag which behaves similarly to
      that of <code>git cherry-pick</code>; it will append a Signed-off-by line to the end of
      the commit message. For example if this flag was used in the last example the
      commit message would have <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code>
      appended to it.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="list-what-branches-contain-a-commit-git-cherry" class="anchor" href="#list-what-branches-contain-a-commit-git-cherry"><span class="octicon octicon-link"></span></a>List what branches contain a commit: git cherry</h3>
      <div>
      <h4>
      <a name="background-3" class="anchor" href="#background-3"><span class="octicon octicon-link"></span></a>Background</h4>
      <div>
      <p>If you have a workflow in which you do not merge your commits to other branches
      but have another person do it then you may wish to see which of your commits
      has been merged to another branch. Git has a tool to do this: <code>git cherry</code>.</p>
      </div>
      <div>
      <p>Let’s make another commit on the <code>v0.1-release</code> branch first:</p>
      </div>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code></p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add release preface.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Release preface commit output</div>
      <div>
      <pre>[v0.1-release a8200e1] Add release preface.
       1 file changed, 1 insertion(+)</pre>
      </div>
      </div>
      </div>
      <div>
      <h4>
      <a name="problem-7" class="anchor" href="#problem-7"><span class="octicon octicon-link"></span></a>Problem</h4>
      <div>
      <p>You wish to see what commits remain un-merged to the <code>master</code> branch from the
      <code>v0.1-release</code> branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="solution-7" class="anchor" href="#solution-7"><span class="octicon octicon-link"></span></a>Solution</h4>
      <div>
      <ol>
      <li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry --verbose master</code>
      The output should resemble:</p>
      </li>
      </ol>
      </div>
      <div>
      <div>Cherry output</div>
      <div>
      <pre># git cherry --verbose master

      - dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d Advanced practice technique. <b>(1)</b>
      + a8200e1407d49e37baad47da04c0981f43d7c7ff Add release preface. <b>(2)</b></pre>
      </div>
      </div>
      <div>
      <ol>
      <li>
      <p>droppable commit</p>
      </li>
      <li>
      <p>kept commit</p>
      </li>
      </ol>
      </div>
      <div>
      <p>From the cherry output:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>"droppable commit (1)" is prefixed with a <code>-</code> and shows a commit that has
      been already included into the <code>master</code> branch.</p>
      </li>
      <li>
      <p>"kept commit (2)" is prefixed with a <code>+</code> and shows a commit that has not yet
      been included into the <code>master</code> branch.</p>
      </li>
      </ul>
      </div>
      <div>
      <p>You have seen which commits remain un-merged from the <code>master</code> branch.</p>
      </div>
      </div>
      <div>
      <h4>
      <a name="discussion-7" class="anchor" href="#discussion-7"><span class="octicon octicon-link"></span></a>Discussion</h4>
      <div>
      <p>If you omit the <code>--verbose</code> (or <code>-v</code>) flag from <code>git cherry</code> it will show just
      the <code>-</code>/<code>+</code> and the full SHA-1 but not the commit subject e.g. <code>-
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d</code>.</p>
      </div>
      <div>
      <p>When you learn about rebasing in Chapter 6 <code>git cherry</code> can be useful at
      showing what commits will be kept or dropped after a rebase operation.</p>
      </div>
      </div>
      </div>
      <div>
      <h3>
      <a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h3>
      <div>
      <p>In this chapter you hopefully learned:</p>
      </div>
      <div>
      <ul>
      <li>
      <p>How to use <code>git merge</code>'s options to perform different types of merges</p>
      </li>
      <li>
      <p>How to use resolve merge conflicts</p>
      </li>
      <li>
      <p>How to use <code>git rerere</code> to repeatedly replay merge conflict resolutions</p>
      </li>
      <li>
      <p>How to use <code>git tag</code> to tag commits</p>
      </li>
      <li>
      <p>How to use <code>git describe</code> to generate version numbers for commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry-pick</code> to bring individual commits from one branch to
      another</p>
      </li>
      <li>
      <p>How to use <code>git revert</code> to reverse individual commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry</code> to list what commits remain un-merged on a branch</p>
      </li>
      </ul>
      </div>
      <div>
      <p>Now let’s learn how to rewrite history.</p>
      </div>
      </div>
      </div>
      </div></article>
    </div>

    <div class="diff markdown-body">

<article class="markdown-body entry-content changed" itemprop="mainContentOfPage"><div class="expandable unchanged">
<h2>
      <a name="advanced-branching" class="anchor" href="#advanced-branching"><span class="octicon octicon-link"></span></a>Advanced Branching</h2>
<p>You’ve already learnt the basics of branching in Chapter 2. In this chapter you
      will learn about more advanced branching techniques by learning the following
      topics:</p>
<ul>
<li>
      <p>How to configure <code>git merge</code> to behave differently</p>
      </li>
      <li>
      <p>How to resolve merge conflicts</p>
      </li>
      <li>
      <p>How to avoid solving the same merge conflicts multiple times</p>
      </li>
      <li>
      <p>How to create a tag</p>
      </li>
      <li>
      <p>How to generate a version number from previous tags</p>
      </li>
      <li>
      <p>How to bring individual commits from one branch to another</p>
      </li>
      <li>
      <p>How to revert a previous commit</p>
      </li>
      <li>
      <p>How to list what branches contain a given commit</p>
      </li>
      </ul>
<p>When working as part of a team on a software project you will typically use
      branches to separate work between individuals, features, bug fixes and software
      releases. You should already be able to perform some basic branching actions //[DAN]: Care to list these basic actions?
      from Chapter 2. This chapter will expand on that so you can improve your
      branching workflow to be more effective.</p>
<p>Let’s start by learning how to use some of the parameters provided by <code>git
      merge</code>.</p>
<h3>
      <a name="merge-branches-with-different-options" class="anchor" href="#merge-branches-with-different-options"><span class="octicon octicon-link"></span></a>Merge branches with different options</h3>
<p>You learnt in Chapter 2 how to perform a basic merge of two branches. //[DAN]: Quick summary here?
      Additionally, <code>git merge</code> provides various options
      for merging branches without creating merge commits, using various strategies
      or a graphical merge tool.  //[DAN]: Being picky here, but git merge is controlled by the tool not the other way round which si the implication in the text. Could you rephrase please?</p>
<p>Let’s start by seeing how to perform a merge that could be fast-forwarded but
      without creating a merge commit. Recall a fast-forward merge means that the
      incoming branch has the current branch as an ancestor i.e. no commits have been
      made on the current branch since the incoming branch branched from it.</p>
<table><tbody><tr>
<td>
      <div>Note</div>
      </td>
      <td>
      <div>Why would you want to force creation of a merge commit?</div>
      While fast-forward merges can sometimes be useful in some Git workflows
      you will want to explicitly signify the merging of a branch, even if it was not
      necessary to do so. This explicit indication of a merge through the creation of
      a merge commit can show all the metadata present in any other commit e.g. who
      performed the merge, when and why. In software projects merging a new feature
      will usually be done by merging a branch and it is useful for regression
      testing and history visualization for this feature merge to be more explicit.
      </td>
      </tr></tbody></table>
</div>
<p class="vicinity">Let’s create a branch that can be merged with a fast-forward merge:</p>
<div class="changed"><ol>
<li value="1"> <p>Change to the directory containing your repository e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p> </li>
<li value="2"> <p>Run <code>git checkout -b chapter-spacing</code>.</p> </li>
<li value="3" class="removed"> <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add a line-break between chapters.</p> </li>
<li value="3" class="added"> <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add a line-break between chapters. //[DAN]: No git add command?</p> </li>
<li value="4"> <p>Run <code>git commit --message 'Add spacing between chapters'
      01-IntroducingGitInPractice.asciidoc</code>. The output should resemble:</p> </li>
</ol></div>
<pre class="vicinity"># git commit --message 'Add spacing between chapters'
        01-IntroducingGitInPractice.asciidoc

      [chapter-spacing 4426877] Add spacing between chapters
       1 file changed, 1 insertion(+)</pre>
<div class="expandable unchanged">
<p>You’ve created a new branch named <code>chapter-spacing</code> that can be merged with a
      fast-forward merge into the <code>master</code> branch.</p>
<h4>
      <a name="problem" class="anchor" href="#problem"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to merge the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      create a merge commit i.e. not perform a fast-forward merge.</p>
<h4>
      <a name="solution" class="anchor" href="#solution"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge --no-ff chapter-spacing</code>. You will be prompted for a commit
      message but can just accept the default.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git merge --no-ff chapter-spacing

      Merge made by the 'recursive' strategy. <b>(1)</b>
       01-IntroducingGitInPractice.asciidoc | 1 +
       1 file changed, 1 insertion(+) <b>(2)</b></pre>
<ol>
<li>
      <p>merge type</p>
      </li>
      <li>
      <p>diff summary</p>
      </li>
      </ol>
<p>You can now delete the merged <code>chapter-spacing</code> branch by running <code>git branch
      --delete chapter-spacing</code> from the <code>master</code> branch.</p>
<p>From the forced merge commit output:</p>
<ul>
<li>
      <p>"merge type (1)" shows that this was a merge (rather than a fast-forward) and
      therefore produced a merge commit. It used the <em>recursive</em> Git merge strategy
      (we’ll discuss strategies more in the Discussion section).</p>
      </li>
      <li>
      <p>"diff summary (2)" shows a short summary of the changes that were made in
      this merge commit i.e. all the differences between the <code>master</code> branch and
      the <code>chapter-spacing</code> branch.</p>
      </li>
      </ul>
<p>You have merged the <code>chapter-spacing</code> branch into the <code>master</code> branch and
      forced a merge-commit to be created.</p>
<h4>
      <a name="discussion" class="anchor" href="#discussion"><span class="octicon octicon-link"></span></a>Discussion</h4>
<a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeNoFF.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeNoFF.png" alt="05 GitXMergeNoFF" style="max-width:100%;"></a><code>git merge --no-ff chapter-spacing</code><p>You can see from Figure 5.1 that GitX shows a merge commit differently from a
      fast-forward. A merge commit has two parents: the previous commit on the
      current branch (i.e. <code>master</code> in this case) and the previous commit on the
      incoming branch (i.e. <code>chapter-spacing</code> in this case). Even when the
      <code>chapter-spacing</code> branch was deleted the existence of the branch will remain
      implied by the visual branching and merging in GitX.
      In this case where the
      branch contained a single commit this may not be terribly useful but on larger
      features this explicit indication of branches can aid history visualization.</p>
<p><code>git merge</code> can also take a <code>--ff-only</code> flag which ensures that a merge commit
      is never created. In the case that the merge can only be made with a merge
      commit (e.g. there are conflicts that need to be resolved) then it will not
      perform the merge.</p>
<h5>
      <a name="merge-strategies" class="anchor" href="#merge-strategies"><span class="octicon octicon-link"></span></a>Merge strategies</h5>
<p>The previous merge output state that it was using the <em>recursive</em> merge
      strategy. A merge strategy is an algorithm that Git uses to decide how to
      perform a merge.  //[DAN]: This definition should be in italics or better still in the background section.</p>
<p>Strategies can be selected by passing the <code>--strategy</code> (or <code>-s</code>) flag to <code>git
      merge</code> followed by the name of the strategy. For example, to select the
      default, recursive strategy you could also call <code>git merge
      --strategy=recursive</code>.</p>
<p>Certain strategies (such as recursive) can also take options by passing the
      <code>--strategy-option</code> (or <code>-X</code>) flag. For example, to set the patience diff
      option for the default, recursive strategy you would call <code>git merge
      --strategy-option=patience</code>.</p>
<p>Some useful merge strategies are:</p>
<ul>
<li>
      <p><code>recursive</code>: this strategy can merge one branch into another and
      automatically detect renames. This strategy is the default if you try and
      merge a single branch into another.</p>
      </li>
      <li>
      <p><code>octopus</code>: this strategy can merge multiple branches at once but will refuse
      to allow manual resolution of merge conflicts. This strategy is the default
      if you try and merge two or more branches into another.
      //[DAN]: 3 or more branches in one merge? Really? You should have a whole section on that and not jsut a brief mention here.</p>
      </li>
      <li>
      <p><code>ours</code>: this strategy performs a normal merge but ignores all the changes
      from the incoming branch. This means the resulting tree is the same as it
      was before the merge. This can be useful when you wish to merge a branch and
      indicate this in the history without wanting to actually including any of its
      changes. For example, you could use this to merge the results of a failed
      experiment and then delete the experimental branch afterwards. In this case
      the experiment would remain in the history without being in the current code.</p>
      </li>
      <li>
      <p><code>subtree</code>: this strategy is a modified version of the recursive strategy that
      will detect if the tree structures are at different levels and adjust them if
      needed. For example, if one branch had all the files in the directory <code>A/B/C</code>
      and the other had all the same files in the directory <code>A/B</code> then the subtree
      strategy would handle this case; <code>A/B/C/README.md</code> and <code>A/B/README.md</code> could
      be merged despite their different tree locations.</p>
      </li>
      </ul>
<p>Some useful merge strategy options for a recursive merge (currently the only
      strategy with options) are:</p>
<ul>
<li>
      <p><code>ours</code>: this option automatically solves any merge conflicts by always
      selecting the previous version from the current branch (instead of the
      version from the incoming branch).</p>
      </li>
      <li>
      <p><code>theirs</code>: this option is the reverse of <code>ours</code>; it automatically solves any
      merge conflicts by always selecting the version from the incoming branch
      (instead of the previous version from the current branch).</p>
      </li>
      <li>
      <p><code>patience</code>: this option uses a slightly more expensive <code>git diff</code> algorithm
      to try and decrease the chance of a merge conflict.</p>
      </li>
      <li>
      <p><code>ignore-all-space</code>: this option ignores whitespace when selecting which
      version should be chosen in case of a merge conflict. If the incoming branch
      has made only whitespace changes to a line the change will be ignored. If the
      current branch has introduced whitespace changes but the incoming branch has
      made non-whitespace changes then their version will be used.</p>
      </li>
      </ul>
<p>Neither of these lists are exhaustive but these are the strategies and options
      I’ve found are most commonly used. All the merge strategies and options can be
      examined by running <code>git help merge</code>.</p>
<h3>
      <a name="resolve-a-merge-conflict" class="anchor" href="#resolve-a-merge-conflict"><span class="octicon octicon-link"></span></a>Resolve a merge conflict</h3>
<p>As mentioned previously sometimes when you merge one branch into another there
      will have been changes to the same part of the same file in both branches and
      Git cannot detect automatically which one is the desired change to include. In
      this situation you have what is known as a <em>merge conflict</em> which you will need
      to resolve manually.</p>
<p>These situations tend to occur more often in software projects where you have
      multiple users working on the same project at the same time. One user might
      make a bug fix to a file while another refactors it and when the branches are
      merged then a merge conflict will be created.</p>
<p>Let’s create a new branch and change the same files in both branches to produce
      a merge conflict.</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b separate-files</code>.</p>
      </li>
      <li>
      <p>Run <code>git mv 01-IntroducingGitInPractice.asciidoc 00-Preface.asciidoc</code></p>
      </li>
      <li>
      <p>Cut the "Chapter 2" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>02-AdvancedGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Cut the "Chapter 1" section from <code>00-Preface.asciidoc</code> and paste it into a
      new file named <code>01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git add .</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Separate files.'</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git commit --message 'Separate files.'

      [separate-files 4320fad] Separate files.
       3 files changed, 3 insertions(+), 4 deletions(-)
       create mode 100644 00-Preface.asciidoc
       create mode 100644 02-AdvancedGitInPractice.asciido</pre>
<p>Now let’s change the same file in the <code>master</code> branch.</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Edit <code>01-IntroducingGitInPractice.asciidoc</code> to add contents for Chapter 1.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add Chapter 1 content.'
      01-IntroducingGitInPractice.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git commit --message 'Add Chapter 1 content.'
        01-IntroducingGitInPractice.asciidoc

      [master 7a04d8f] Add Chapter 1 content.
       1 file changed, 3 insertions(+), 1 deletion(-)</pre>
<h4>
      <a name="problem-1" class="anchor" href="#problem-1"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to merge the <code>separate-files</code> branch into the <code>master</code> branch and
      resolve the merge conflict.</p>
<h4>
      <a name="solution-1" class="anchor" href="#solution-1"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git merge separate-files</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc <b>(1)</b>
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc <b>(2)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
<ol>
<li>
      <p>merge attempt</p>
      </li>
      <li>
      <p>merge conflict</p>
      </li>
      </ol>
<p>From the merge with conflict output:</p>
<ul>
<li>
      <p>"merge attempt (1)" shows Git attempting to find a way of solving the merge
      automatically using the default, recursive merge strategy.</p>
      </li>
      <li>
      <p>"merge conflict (2)" shows that the merge strategy was unable to
      automatically solve the merge conflict so it requires human intervention.</p>
      </li>
      </ul>
<p>Now we need to edit <code>01-IntroducingGitInPractice.asciidoc</code> and solve then merge
      conflict. When you open the file you will see something resembling:</p>
<pre>== Chapter 1 <b>(1)</b>
      &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD <b>(2)</b>
      It is a truth universally acknowledged, that a single person in <b>(3)</b>
      possession of good source code, must be in want of a version control
      system.

      == Chapter 2
      // TODO: write two chapters
      ======= <b>(4)</b>
      // TODO: think of funny first line that editor will approve. <b>(5)</b>
      &gt;&gt;&gt;&gt;&gt;&gt;&gt; separate-files <b>(6)</b></pre>
<ol>
<li>
      <p>unchanged line</p>
      </li>
      <li>
      <p>incoming marker</p>
      </li>
      <li>
      <p>incoming line</p>
      </li>
      <li>
      <p>branch separator</p>
      </li>
      <li>
      <p>current version</p>
      </li>
      <li>
      <p>current marker</p>
      </li>
      </ol>
<p>Recall this output from Chapter 2. We now need to edit the file so it has the
      correct version. In this case this involves removing the Chapter 2 section as
      it was moved to another file in the <code>separate-files</code> branch and use the new
      Chapter 1 content that was entered in the <code>master</code> branch (here indicated by
      the <code>HEAD</code> section).</p>
<p>After editing the file should resemble:</p>
<pre>== Chapter 1
      It is a truth universally acknowledged, that a single person in
      possession of good source code, must be in want of a version control
      system.</pre>
<p>Now the merge conflict has been resolved the merge conflict can be marked as
      resolved with <code>git add</code> and then the merge commit committed.</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git add 01-IntroducingGitInPractice.asciidoc</code>.</p>
      </li>
      <li>
      <p>Run <code>git commit</code>. Accept the default commit message.
      The output should resemble:</p>
      </li>
      </ol>
<pre>[master 725c33a] Merge branch 'separate-files'</pre>
<p>You can now run <code>git branch --delete separate-files</code> to delete the branch now
      it’s merged.</p>
<p>You have merged two branches and resolved a merge conflict.</p>
<h4>
      <a name="discussion-1" class="anchor" href="#discussion-1"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p>Merge commits have default commit message formats and slightly different diff output. Let’s take a look at the merge commit by running <code>git show master</code>:</p>
<pre># git show master

      commit 725c33ace6cd7b281c2d3b342ca05562d3dc7335
      Merge: 7a04d8f 4320fad
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 14:55:38 2014 +0100

          Merge branch 'separate-files' <b>(1)</b>

          Conflicts:
              01-IntroducingGitInPractice.asciidoc <b>(2)</b>

      diff --cc 01-IntroducingGitInPractice.asciidoc
      index 6a10e85,848ed39..c9cda9c
      --- a/01-IntroducingGitInPractice.asciidoc
      +++ b/01-IntroducingGitInPractice.asciidoc
      @@@ -1,8 -1,2 +1,4 @@@
      - = Git In Practice 1 <b>(3)</b>
        == Chapter 1
       -// TODO: think of funny first line that editor will approve. <b>(4)</b>
       +It is a truth universally acknowledged, that a single person in <b>(5)</b>
       +possession of good source code, must be in want of a version control
       +system.
      -
      - == Chapter 2
      - // TODO: write two chapters</pre>
<ol>
<li>
      <p>merge subject</p>
      </li>
      <li>
      <p>conflicted file</p>
      </li>
      <li>
      <p>incoming delete</p>
      </li>
      <li>
      <p>current delete</p>
      </li>
      <li>
      <p>current insert</p>
      </li>
      </ol>
<p>From the merge commit output:</p>
<ul>
<li>
      <p>"merge subject (1)" shows the default commit message subject for merge
      commits. It specifies the incoming branch name. It can be changed but I
      prefer to leave it as-is and add any additional information in the commit
      message body instead so it is easily recognizable from subject alone as a
      merge commit.</p>
      </li>
      <li>
      <p>"conflicted file (2)" shows a file which had conflicts to be resolved
      manually. Sometimes these conflicts may be resolved incorrectly so this list
      is useful in spotting which files required resolution so they can be reviewed
      by other people later.</p>
      </li>
      <li>
      <p>"incoming delete (3)" shows a line that was deleted in the incoming (i.e.
      <code>separate-files</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current delete (4)" shows a line that was deleted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      <li>
      <p>"current insert (5)" shows a line that was inserted in the current (i.e.
      <code>master</code>) branch’s commit(s).</p>
      </li>
      </ul>
<table><tbody><tr>
<td>
      <div>Note</div>
      </td>
      <td>
      <div>Why are there two columns for +/- markers?</div>
      In this diff there are two columns (rather than the usual one) allocated
      for <code>-</code> and <code>+</code> markers. This is because where a normal diff is just indicating
      insertions and deletions to a file this <em>merge diff</em> is showing insertions and
      deletions to a file and the branch they were inserted or removed in. For
      example, in the listing above the first column indicates a line inserted or
      deleted from the incoming branch (i.e. <code>separate-files</code>) and the second column
      indicates a line inserted or deleted from the current branch (i.e. <code>master</code>).
      </td>
      </tr></tbody></table>
<a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeConflict.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXMergeConflict.png" alt="05 GitXMergeConflict" style="max-width:100%;"></a><p>You can see from Figure 5.2 that the changes from both branches are visible in
      the GitX output and that they are not always shown in chronological order; the
      <code>Add Chapter 1 content</code> commit occurs before the <code>Separate files.</code> commit even
      although it was made 3 minutes later.</p>
<h5>
      <a name="using-a-graphical-merge-tool" class="anchor" href="#using-a-graphical-merge-tool"><span class="octicon octicon-link"></span></a>Using a graphical merge tool</h5>
<p>Instead of manually editing the contents of the file you can instead run <code>git
      mergetool</code> which will run a graphical merge tool such as <code>emerge</code>, <code>gvimdiff</code>,
      <code>kdiff3</code>, <code>meld</code>, <code>vimdiff</code>, <code>opendiff</code> or <code>tortoisemerge</code>.</p>
<p>Sometimes it can be more helpful to use a graphical merge tool to be able to
      visualize conflicts graphically and understand how they relate to the changes
      that have been made by viewing them e.g. side-by-side. Although I personally
      tend not to use these tools any more I found them useful when learning how to
      use version control.</p>
<a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-OpenDiff.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-OpenDiff.png" alt="05 OpenDiff" style="max-width:100%;"></a><p>You can also customize the tool that is used to specify your own merge tools.
      In Figure 5.3 you can see the <code>opendiff</code> tool provided with OSX used to resolve
      the previous merge conflict.</p>
<p>Details for how to configure <code>git mergetool</code> to use your tool of choice are
      available by running <code>git help mergetool</code>.</p>
<h3>
      <a name="only-resolve-each-merge-conflict-once-git-rerere" class="anchor" href="#only-resolve-each-merge-conflict-once-git-rerere"><span class="octicon octicon-link"></span></a>Only resolve each merge conflict once: git rerere</h3>
<p>You may find yourself in a situation where you have a long-running branch where
      you have to keep merging in another branch and get the same merge conflicts
      every time.</p>
<p>Git has a command named <code>git rerere</code> (which stands for Reuse Recorded
      Resolution) which integrates with the normal <code>git merge</code> workflow to record the
      resolution of merge conflicts for later replay. In short, you only need to
      solve a particular merge conflict once.</p>
<p>Let’s learn how to setup <code>git rerere</code>.</p>
<h4>
      <a name="problem-2" class="anchor" href="#problem-2"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to setup <code>git rerere</code> to integrate with the merge workflow so you
      don’t need to repeatedly resolve the same merges.</p>
<h4>
      <a name="solution-2" class="anchor" href="#solution-2"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Run <code>git config --global --add rerere.enabled 1</code>.
      There will be no output.</p>
      </li>
      </ol>
<p>You have enabled <code>git rerere</code> to automatically save and retrieve merge conflict
      resolutions in all repositories.</p>
<h4>
      <a name="discussion-2" class="anchor" href="#discussion-2"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p>You do not need to run <code>git rerere manually</code> for it to store and retrieve merge
      conflicts. After enabling <code>git rerere</code> you will see some slightly different
      output the next time you run <code>git commit</code> after resolving a merge conflict:</p>
<pre># git commit

      Recorded resolution for '01-IntroducingGitInPractice.asciidoc'. <b>(1)</b>
      [master 725c33a] Merge branch 'separate-files'</pre>
<ol>
<li>
      <p>rerere storage</p>
      </li>
      </ol>
<p><code>git rerere</code> has been run by <code>git commit</code> to store the conflict and resolution
      so it can recall the same resolution when it sees the same conflict.</p>
<p>If the same conflict is seen again:</p>
<pre># git merge separate-files

      Auto-merging 01-IntroducingGitInPractice.asciidoc
      CONFLICT (content): Merge conflict in
        01-IntroducingGitInPractice.asciidoc
      Resolved '01-IntroducingGitInPractice.asciidoc' using
        previous resolution. <b>(1)</b>
      Automatic merge failed; fix conflicts and then commit the result.</pre>
<ol>
<li>
      <p>rerere retrieval</p>
      </li>
      </ol>
<p><code>git rerere</code> has again been run by <code>git merge</code> to retrieve the resolution for
      the identical conflict. You still need to run <code>git add</code> to accept the conflict
      and can use <code>git diff</code> or edit the file to ensure the resolution was as
      expected and desired.</p>
<p>Sometimes you may wish to make <code>git rerere</code> forget a resolution for a
      particular file because you resolved it incorrectly. In this case you can use
      <code>git rerere</code> with a path to forget any resolutions for that file or directory.
      For example to forget the resolution on <code>01-IntroducingGitInPractice.asciidoc</code>
      above you would run <code>git rerere forget 01-IntroducingGitInPractice.asciidoc</code>.
      There will be no output.</p>
<h3>
      <a name="create-a-tag-git-tag" class="anchor" href="#create-a-tag-git-tag"><span class="octicon octicon-link"></span></a>Create a tag: git tag</h3>
<p>Recall from Chapter 2 that a tag is another <em>ref</em> (or pointer) for a single
      commit. Tags differ from branches in that they are (usually) permanent. Rather
      than pointing to the work-in-progress on a feature they are generally used to
      describe a version of a software project.</p>
<h4>
      <a name="problem-3" class="anchor" href="#problem-3"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to tag the current state of the <code>GitInPracticeRedux</code> <code>master</code> branch
      as version <code>v0.1</code>.</p>
<h4>
      <a name="solution-3" class="anchor" href="#solution-3"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git tag v0.1</code>. There will be no output.</p>
      </li>
      <li>
      <p>Run <code>git tag</code>. The output should resemble:</p>
      </li>
      </ol>
<pre># git tag

      v0.1 <b>(1)</b></pre>
<ol>
<li>
      <p>version tag</p>
      </li>
      </ol>
<p>From the tag listing output:</p>
<ul>
<li>
      <p>"version tag (1)" shows that there is a tag named <code>v0.1</code> in the local
      repository.</p>
      </li>
      </ul>
<p>You have created a <code>v0.1</code> tag in the <code>GitInPracticeRedux</code> repository</p>
<h4>
      <a name="discussion-3" class="anchor" href="#discussion-3"><span class="octicon octicon-link"></span></a>Discussion</h4>
<a href="/mikemcquaid/GitInPractice/blob/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXTag.png" target="_blank"><img src="/mikemcquaid/GitInPractice/raw/879ecc6c9075288e00a08bebe12b3bbe9c6c590c/screenshots/05-GitXTag.png" alt="05 GitXTag" style="max-width:100%;"></a><code>git tag</code><p>You can see from Figure 5.4 after the <code>git tag</code> there is a new <code>v0.1</code> ref on
      the latest commit on the master branch (in the GitX interface this will be
      yellow). This indicates that this commit has been tagged <code>v0.1</code>.</p>
<p>Note that, unlike branches, when new commits are made on the <code>master</code> branch
      the <code>v0.1</code> tag will not change. This is why tags are useful for versioning; they
      can record the significance of a particular commit without changing it.</p>
<p>You can list all the tags that match a given pattern by using the <code>--list</code> (or
      <code>-l</code>) flag. For example the tag <code>v0.1</code> would be matched and listed by <code>git tag
      list --v0.*</code>.</p>
<p>On rare occasions you may release you have tagged the wrong commit. Tags can be
      updated by passing the <code>--force</code> (or <code>-f</code>) flag to <code>git tag</code>. This will update
      the tag to point to the new commit.</p>
<p>If you’ve created a tag with the wrong name rather than pointing to the wrong
      commit you can delete it using the <code>--delete</code> (or <code>-d</code>) flag.</p>
<p>Run <code>git push</code> to push the <code>master</code> branch to <code>origin/master</code>. You may have
      noticed that it did not push any of the tags. After you’ve tagged a version and
      verified it is pointing to the correct commit and has the correct name then you
      can push it using <code>git push --tags</code>. This will push all the tags you’ve created
      in the local repository to the remote repository. These tags will then be
      fetched by anyone using <code>git fetch</code> on the same repository in future.</p>
<p>As you saw earlier it is possible to delete or modify tags locally. It’s also
      possible to push these changes to the remote repository with <code>git push --tags
      --force</code> but this is not advised. For other users of the repository to have
      their tags updated they will need to delete them locally and refetch. This is
      intentionally cumbersome as Git intends tags to be static so does not change
      them locally without users explicit intervention.</p>
<p>If you realize you’ve tagged the wrong commit and wish to update it after
      pushing it’s generally a better idea to just tag a new version and push that
      instead.</p>
<h3>
      <a name="generate-a-version-number-based-on-previous-tags-git-describe" class="anchor" href="#generate-a-version-number-based-on-previous-tags-git-describe"><span class="octicon octicon-link"></span></a>Generate a version number based on previous tags: git describe</h3>
<h4>
      <a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h4>
<p>You’ve seen that <code>git tag</code> can be used to identify certain commits as released
      versions of a project. In some cases you may wish to generate versions for the
      software in between tags.</p>
<p>I’m a passionate advocate of continuous integration systems and I’ve worked on
      desktop software projects with traditional semantic versioning (e.g. <code>1.0.0</code>).
      On these projects I’ve setup continuous integration systems to create
      installers of the software on every commit to the <code>master</code> branch. However,
      this software there is an "About" screen which displays the version number of
      the software. In this case I’d like to have a version number generated that
      makes sense but does not rely on auto-generating a tag for each version of the
      software.</p>
<p>As the expected version number would be <code>v0.1</code> given that has just been tagged
      let’s make another modification to the <code>GitInPracticeRedix</code> repository and
      generate a version number for the new, untagged commit.</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add preface text.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git commit --message 'Add preface text.

      [master 0a5e328] Add preface text.
       1 file changed, 1 insertion(+)</pre>
<h4>
      <a name="problem-4" class="anchor" href="#problem-4"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to generate a version number for a software project based on existing
      tags in the repository.</p>
<h4>
      <a name="solution-4" class="anchor" href="#solution-4"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git describe --tags</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git describe --tags

      v0.1-1-g0a5e328 <b>(1)</b></pre>
<ol>
<li>
      <p>generated version</p>
      </li>
      </ol>
<p>"generated version (1)" shows the version generated from the state based on
      existing tags. It is hyphenated into three parts:</p>
<ul>
<li>
      <p><code>v0.1</code> is the the most recent tag on the current branch.</p>
      </li>
      <li>
      <p><code>1</code> indicates that there has been one commit made since the most recent tag
      (<code>v0.1</code>) on the current branch.</p>
      </li>
      <li>
      <p><code>g0a5e328</code> is the current commit SHA-1 prepended with a <code>g</code> (which stands for
      <code>git</code>).</p>
      </li>
      </ul>
<p>You have generated a version number based on the existing tags in the
      repository.</p>
<h4>
      <a name="discussion-4" class="anchor" href="#discussion-4"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p>If <code>git describe</code> is passed a ref then it will generate the version number for
      that particular commit. For example, <code>git describe --tags v0.1</code> will output
      <code>v0.1</code>.</p>
<p>If you wish to generate the long-form versions for tagged commits you can pass
      the <code>--long</code> flag. For example, <code>git describe --tags --long v0.1</code> will output
      <code>v0.1-0-g725c33a</code>.</p>
<p>If you wish to use a longer or shorter SHA-1 ref you can configure this using
      the <code>--abbrev</code> flag. For example, <code>git describe --tags --abbrev=5</code> will output
      <code>v0.1-1-g0a5e3</code>. Note that if you use very low values (e.g. <code>--abbrev=1</code>) then
      <code>git describe</code> may use more than you have requested if it requires more to
      uniquely identify a commit.</p>
<h3>
      <a name="add-a-single-commit-to-the-current-branch-git-cherry-pick" class="anchor" href="#add-a-single-commit-to-the-current-branch-git-cherry-pick"><span class="octicon octicon-link"></span></a>Add a single commit to the current branch: git cherry-pick</h3>
<h4>
      <a name="background-1" class="anchor" href="#background-1"><span class="octicon octicon-link"></span></a>Background</h4>
<p>Sometimes you may wish to include only a single commit from a branch onto the
      current branch rather than merging the entire branch. For example you may want
      to back-port a single bug fix commit from a development branch into an stable
      release branch. You could do this by manually creating the same change on that
      branch but a better way would be using the tool that Git provides: <code>git
      cherry-pick</code>.</p>
<p>Let’s create a new branch based off the <code>v0.1</code> tag that we’ll call
      <code>v0.1-release</code> so we have something we can cherry-pick.</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout -b v0.1-release v0.1</code></p>
      </li>
      <li>
      <p>Add some content to the <code>02-AdvancedGitInPractice.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Advanced practice technique.'
      02-AdvancedGitInPractice.asciidoc</code>.
          The output should resemble:</p>
      </li>
      </ol>
<pre># git commit --message 'Advanced practice technique.'
          02-AdvancedGitInPractice.asciidoc

      [v0.1-release dfe2377] Advanced practice technique.
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
<h4>
      <a name="problem-5" class="anchor" href="#problem-5"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to cherry-pick a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
<h4>
      <a name="solution-5" class="anchor" href="#solution-5"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry-pick dfe2377</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git cherry-pick dfe2377

      [master c18c9ef] Advanced practice technique. <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
<ol>
<li>
      <p>commit summary</p>
      </li>
      </ol>
<p>The "commit summary (1)" shows the result of the cherry-pick operation. Note
      that this is the same as the output for the previous <code>git commit</code> command with
      one difference: the SHA-1 has changed.</p>
<table><tbody><tr>
<td>
      <div>Note</div>
      </td>
      <td>
      <div>Why does the SHA-1 change on a cherry-pick?</div>
      Recall that the SHA-1 of a commit is based on its tree and metadata
      (which includes the parent commit SHA-1). As resulting <code>master</code> branch
      cherry-picked commit has a difference parent to the commit that was
      cherry-picked from the <code>v0.1-release</code> branch the commit SHA-1 differs also.
      </td>
      </tr></tbody></table>
<p>You have cherry-picked a commit from the <code>v0.1-release</code> branch to the <code>master</code>
      branch.</p>
<h4>
      <a name="discussion-5" class="anchor" href="#discussion-5"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p><code>git cherry-pick</code> (like many other Git commands) takes a ref as the parameter
      rather than a specific commit. As a result we could have interchangeably used
      <code>git cherry-pick v0.1-release</code> in the previous example for the same result.</p>
<p>You can pass multiple refs to <code>cherry-pick</code> and they will be cherry-picked onto
      the current branch in the order requested.</p>
<table><tbody><tr>
<td>
      <div>Note</div>
      </td>
      <td>
      <div>How many commits should I cherry pick?</div>
      Cherry-picking is best used for individual commits that may be out of
      sequence. The classic use-case highlighted earlier is back-porting bug fixes
      from a development branch to a stable branch. When this is done it’s
      effectively duplicating the commits (rather than sharing them as with a merge).
      If you find yourself wanting to cherry-pick the entire contents of a branch you
      would be better to merge it instead.
      </td>
      </tr></tbody></table>
<p>If the <code>--edit</code> flag is passed to <code>git cherry-pick</code> it will prompt you for a
      commit message before committing.</p>
<p>If there is a merge conflict on a <code>cherry-pick</code> you will need to resolve it a
      similar fashion as a <code>git merge</code> (or the same fashion as <code>git rebase</code> which you
      will see in Chapter 6). This involves resolving the conflict, running <code>git add</code>
      but then <code>git cherry-pick --continue</code> instead of <code>git commit</code> to commit the
      changes. If you wish to abort the current cherry-pick as perhaps you’ve
      realised the merge-conflict is too complex you can do this using <code>git
      cherry-pick --abort</code>.</p>
<p>If you are cherry-picking from a public branch (i.e. one you will push
      remotely) to another public branch then you can use the <code>-x</code> flag to append a
      line to the cherry-picked commit’s message saying which commit this change was
      picked from. For example if this flag was used in the last example the commit
      message would have <code>(cherry picked from commit
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d)</code> appended to it.</p>
<p>When you want to indicate in the commit message which person cherry-picked a
      particular change more explicitly than the "Committer" metadata that will be
      set by default then you can use the <code>--signoff</code> (or <code>-s</code>) flag. This will
      append a Signed-off-by line to the end of the commit message. For example if
      this flag was used in the last example the commit message would have
      <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code> appended to it.</p>
<h3>
      <a name="revert-a-previous-commit-git-revert" class="anchor" href="#revert-a-previous-commit-git-revert"><span class="octicon octicon-link"></span></a>Revert a previous commit: git revert</h3>
<h4>
      <a name="background-2" class="anchor" href="#background-2"><span class="octicon octicon-link"></span></a>Background</h4>
<p>You may occasionally make a commit that you regret. You would then wish to undo
      the commit until you can fix it so it works as intended.</p>
<p>In Git you can rewrite history to hide such mistakes (as we will learn in
      Chapter 6) but this is generally considered bad practice if you have already
      pushed a commit publicly. In these cases you are better to instead use <code>git
      revert</code>.</p>
<h4>
      <a name="problem-6" class="anchor" href="#problem-6"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to revert a commit to reverse its changes.</p>
<h4>
      <a name="solution-6" class="anchor" href="#solution-6"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout master</code>.</p>
      </li>
      <li>
      <p>Run <code>git revert c18c9ef</code>. You will be prompted for a message. Accept the
      default.
      The output should resemble:</p>
      </li>
      </ol>
<pre># git revert c18c9ef

      [master 3e3c417] Revert "Advanced practice technique." <b>(1)</b>
       1 file changed, 1 insertion(+), 1 deletion(-)</pre>
<ol>
<li>
      <p>revert subject</p>
      </li>
      </ol>
<p>To view the revert in more depth run <code>git show 3e3c417</code>:</p>
<pre># git show 3e3c417

      commit 3e3c417e90b5eb3c04962618b238668d1a5dc5ab
      Author: Mike McQuaid &lt;mike@mikemcquaid.com&gt;
      Date:   Sat Feb 1 20:26:06 2014 +0000

          Revert "Advanced practice technique." <b>(1)</b>

          This reverts commit c18c9ef9adc73cc1da7238ad97ffb50758482e91. <b>(2)</b>

      diff --git a/02-AdvancedGitInPractice.asciidoc
        b/02-AdvancedGitInPractice.asciidoc
      index 0e0765f..7eb5017 100644
      --- a/02-AdvancedGitInPractice.asciidoc
      +++ b/02-AdvancedGitInPractice.asciidoc
      @@ -1,2 +1,2 @@
       == Chapter 2
      -Practice doesn't make perfect; perfect practice makes perfect! <b>(3)</b>
      +// TODO: write two chapters</pre>
<ol>
<li>
      <p>revert subject</p>
      </li>
      <li>
      <p>revert message</p>
      </li>
      <li>
      <p>reversed diff</p>
      </li>
      </ol>
<p>From the revert show output:</p>
<ul>
<li>
      <p>"revert subject (1)" shows the reverted commit’s subject prefixed with
      "Revert". This should hopefully describe what has been reverted fairly
      clearly and can be edited on commit if it does not.</p>
      </li>
      <li>
      <p>"revert message (2)" shows the body of the reverted commit which shows the
      full SHA-1 of the commit that was reverted.</p>
      </li>
      <li>
      <p>"reversed diff (3)" shows the diff of the new commit; this will be the exact
      opposite diff of the commit that was reverted.</p>
      </li>
      </ul>
<p>You have reverted a commit to reverse its changes.</p>
<h4>
      <a name="discussion-6" class="anchor" href="#discussion-6"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p><code>git revert</code> can take a <code>--signoff</code> (or <code>-s</code>) flag which behaves similarly to
      that of <code>git cherry-pick</code>; it will append a Signed-off-by line to the end of
      the commit message. For example if this flag was used in the last example the
      commit message would have <code>Signed-off-by: Mike McQuaid &lt;mike@mikemcquaid.com&gt;</code>
      appended to it.</p>
<h3>
      <a name="list-what-branches-contain-a-commit-git-cherry" class="anchor" href="#list-what-branches-contain-a-commit-git-cherry"><span class="octicon octicon-link"></span></a>List what branches contain a commit: git cherry</h3>
<h4>
      <a name="background-3" class="anchor" href="#background-3"><span class="octicon octicon-link"></span></a>Background</h4>
<p>If you have a workflow in which you do not merge your commits to other branches
      but have another person do it then you may wish to see which of your commits
      has been merged to another branch. Git has a tool to do this: <code>git cherry</code>.</p>
<p>Let’s make another commit on the <code>v0.1-release</code> branch first:</p>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code></p>
      </li>
      <li>
      <p>Add some content to the <code>00-Preface.asciidoc</code> file.</p>
      </li>
      <li>
      <p>Run <code>git commit --message 'Add release preface.' 00-Preface.asciidoc</code>.
      The output should resemble:</p>
      </li>
      </ol>
<pre>[v0.1-release a8200e1] Add release preface.
       1 file changed, 1 insertion(+)</pre>
<h4>
      <a name="problem-7" class="anchor" href="#problem-7"><span class="octicon octicon-link"></span></a>Problem</h4>
<p>You wish to see what commits remain un-merged to the <code>master</code> branch from the
      <code>v0.1-release</code> branch.</p>
<h4>
      <a name="solution-7" class="anchor" href="#solution-7"><span class="octicon octicon-link"></span></a>Solution</h4>
<ol>
<li>
      <p>Change to the directory containing your repository
      e.g. <code>cd /Users/mike/GitInPracticeRedux/</code>.</p>
      </li>
      <li>
      <p>Run <code>git checkout v0.1-release</code>.</p>
      </li>
      <li>
      <p>Run <code>git cherry --verbose master</code>
      The output should resemble:</p>
      </li>
      </ol>
<pre># git cherry --verbose master

      - dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d Advanced practice technique. <b>(1)</b>
      + a8200e1407d49e37baad47da04c0981f43d7c7ff Add release preface. <b>(2)</b></pre>
<ol>
<li>
      <p>droppable commit</p>
      </li>
      <li>
      <p>kept commit</p>
      </li>
      </ol>
<p>From the cherry output:</p>
<ul>
<li>
      <p>"droppable commit (1)" is prefixed with a <code>-</code> and shows a commit that has
      been already included into the <code>master</code> branch.</p>
      </li>
      <li>
      <p>"kept commit (2)" is prefixed with a <code>+</code> and shows a commit that has not yet
      been included into the <code>master</code> branch.</p>
      </li>
      </ul>
<p>You have seen which commits remain un-merged from the <code>master</code> branch.</p>
<h4>
      <a name="discussion-7" class="anchor" href="#discussion-7"><span class="octicon octicon-link"></span></a>Discussion</h4>
<p>If you omit the <code>--verbose</code> (or <code>-v</code>) flag from <code>git cherry</code> it will show just
      the <code>-</code>/<code>+</code> and the full SHA-1 but not the commit subject e.g. <code>-
      dfe2377f00bb58b0f4ba5200b8f4299d0bfeeb5d</code>.</p>
<p>When you learn about rebasing in Chapter 6 <code>git cherry</code> can be useful at
      showing what commits will be kept or dropped after a rebase operation.</p>
<h3>
      <a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>Summary</h3>
<p>In this chapter you hopefully learned:</p>
<ul>
<li>
      <p>How to use <code>git merge</code>'s options to perform different types of merges</p>
      </li>
      <li>
      <p>How to use resolve merge conflicts</p>
      </li>
      <li>
      <p>How to use <code>git rerere</code> to repeatedly replay merge conflict resolutions</p>
      </li>
      <li>
      <p>How to use <code>git tag</code> to tag commits</p>
      </li>
      <li>
      <p>How to use <code>git describe</code> to generate version numbers for commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry-pick</code> to bring individual commits from one branch to
      another</p>
      </li>
      <li>
      <p>How to use <code>git revert</code> to reverse individual commits</p>
      </li>
      <li>
      <p>How to use <code>git cherry</code> to list what commits remain un-merged on a branch</p>
      </li>
      </ul>
<p>Now let’s learn how to rewrite history.</p>
</div></article>

    </div>
  </div>

</body>
</html>
