{"version":3,"file":"billing-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/billing/braintree.ts","app/assets/modules/github/billing/coupon-redemption.ts","app/assets/modules/github/billing/credit-card-fields.ts","app/assets/modules/github/billing/payment-methods.ts","app/assets/modules/github/billing/paypal.ts","app/assets/modules/github/billing/plan-choice.ts","app/assets/modules/github/billing/upgrade-seats.ts","app/assets/modules/github/billing/zuora.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/throttled-input.ts","ui/packages/soft-nav/events.ts","ui/packages/soft-nav/state.ts","ui/packages/soft-nav/stats.ts","ui/packages/soft-navigate/soft-navigate.ts"],"sourcesContent":["import '@github/braintree-encryption'\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Submit credit card details to Braintree for public-key encryption.\n// POST encrypted data to our servers to limit PCI exposure.\n//\n// NOTE: This does *not* improve security in any significant way.\non('submit', '.js-braintree-encrypt', function ({currentTarget}) {\n  const braintreeKey = currentTarget.getAttribute('data-braintree-key')\n  if (!braintreeKey) throw new Error('Missing `data-braintree-key` attribute on element')\n\n  const braintree = window.Braintree.create(braintreeKey)\n  braintree.encryptForm(currentTarget)\n})\n","// Logic to support the coupon redemption flow\n//\n// .js-plan-row       - The row that gets selected when a plan is chosen\n// .js-choose-plan    - The button in the plan row that triggers actions\n// .js-account-row    - The row that gets selected when an account is chosen\n// .js-choose-account - The button in the account row that triggers actions\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\n\non('submit', '.js-find-coupon-form', function (e) {\n  const form = e.target\n  if (!(form instanceof HTMLFormElement)) return\n  const action = form.action\n  const couponCodeField = document.querySelector<HTMLInputElement>('#code')!\n  window.location.href = `${action}/${encodeURIComponent(couponCodeField.value)}`\n  e.preventDefault()\n})\n\non('click', '.js-choose-account', function (e) {\n  for (const element of document.querySelectorAll('.js-plan-row, .js-choose-plan')) {\n    element.classList.remove('selected')\n  }\n\n  const planInput = document.querySelector<HTMLInputElement>('.js-plan')!\n  planInput.value = ''\n\n  for (const billingSection of document.querySelectorAll('.js-billing-section')) {\n    billingSection.classList.add('has-removed-contents')\n  }\n\n  const account = e.currentTarget.closest('.js-account-row')\n  if (account) {\n    selectAccount(account)\n  }\n})\n\non('click', '.js-billing-settings-redeem-coupon-btn', function ({currentTarget}) {\n  const formWrapper = document.querySelector<HTMLElement>('.js-billing-settings-redeem-coupon-form-wrapper')!\n  formWrapper.hidden = false\n  const target = currentTarget as HTMLElement\n  target.hidden = true\n  const couponCodeField = document.querySelector<HTMLInputElement>('input[name=\"code\"]')!\n  couponCodeField.focus()\n})\n\non('click', '.js-billing-settings-cancel-redeem-coupon-btn', function ({currentTarget}) {\n  const formWrapper = currentTarget.closest<HTMLElement>('.js-billing-settings-redeem-coupon-form-wrapper')!\n  formWrapper.hidden = true\n  const redeemButton = document.querySelector<HTMLElement>('.js-billing-settings-redeem-coupon-btn')!\n  redeemButton.hidden = false\n})\n\non('click', '.js-choose-plan', function (e) {\n  if (!(e.target instanceof Element)) return\n  const plan = e.target.closest<HTMLElement>('.js-plan-row')!\n  selectPlan(plan)\n})\n\nobserve('.js-choose-plan-radio:checked', {\n  add(el) {\n    selectPlan(el.closest<HTMLElement>('.js-plan-row')!)\n  },\n})\n\nobserve('.js-plan-row.selected', {\n  add: enableNextButton,\n})\n\nobserve('.js-choose-account.selected', {\n  add: enableNextButton,\n})\n\nfunction enableNextButton(el: Element) {\n  const form = el.closest('form')\n  if (!form) return\n  const redeemButton = form.querySelector('.js-redeem-button')\n  if (!(redeemButton instanceof HTMLButtonElement)) return\n  redeemButton.disabled = el.classList.contains('free-plan')\n}\n\nfunction selectAccount(accountRow: Element) {\n  const accountLogin = accountRow.getAttribute('data-login')\n  const accountPlan = accountRow.getAttribute('data-plan')\n  if (!accountLogin || !accountPlan) return\n\n  for (const element of document.querySelectorAll('.js-account-row, .js-choose-account')) {\n    element.classList.remove('selected')\n  }\n\n  accountRow.classList.add('selected')\n  const chooseAccountButton = accountRow.querySelector('.js-choose-account')\n  if (chooseAccountButton) chooseAccountButton.classList.add('selected')\n\n  const accountInput = document.querySelector<HTMLInputElement>('.js-account')!\n  if (accountInput) accountInput.value = accountLogin\n\n  const planSection = document.querySelector<HTMLElement>('.js-plan-section')\n  if (planSection) planSection.hidden = false\n\n  for (const plan of document.querySelectorAll<HTMLElement>('.js-billing-plans')) {\n    plan.hidden = true\n  }\n\n  const planTable = document.querySelector<HTMLElement>(`.js-billing-plans[data-login='${accountLogin}']`)\n  if (!planTable) return\n\n  planTable.hidden = false\n  const planRows = planTable.querySelectorAll('.js-plan-row')\n  const planRow = planRows.length === 1 ? planRows[0] : planTable.querySelector(`[data-name='${accountPlan}']`)\n  if (planRow instanceof Element) selectPlan(planRow)\n}\n\nfunction selectPlanForDataCollection(wrapperElement: Element) {\n  const accountLogin = wrapperElement.getAttribute('data-login')\n  const accountPlan = wrapperElement.getAttribute('data-plan')\n  if (!accountLogin || !accountPlan) return\n\n  for (const plan of document.querySelectorAll<HTMLElement>('.js-billing-plans')) {\n    plan.hidden = true\n  }\n\n  const planTable = document.querySelector<HTMLElement>(`.js-billing-plans[data-login='${accountLogin}']`)\n  if (!planTable) return\n\n  planTable.hidden = false\n  const planRows = planTable.querySelectorAll('.js-plan-row')\n  const planRow = planRows.length === 1 ? planRows[0] : planTable.querySelector(`[data-name='${accountPlan}']`)\n  if (planRow instanceof Element) selectPlan(planRow)\n}\n\nfunction selectPlan(planRow: Element) {\n  const planName = planRow.getAttribute('data-name')\n  const planTable = planRow.closest('.js-billing-plans')\n  if (!planTable) return\n  const accountLogin = planTable.getAttribute('data-login')\n  if (!accountLogin) return\n\n  const hasBilling = planTable.getAttribute('data-has-billing') === 'true'\n  const cost = parseInt(planRow.getAttribute('data-cost') || '', 10)\n\n  for (const row of document.querySelectorAll('.js-plan-row, .js-choose-plan')) {\n    row.classList.remove('selected')\n  }\n\n  planRow.classList.add('selected')\n\n  const chooseButton = planRow.querySelector('.js-choose-plan')\n  if (chooseButton) chooseButton.classList.add('selected')\n\n  const radio = planRow.querySelector('.js-choose-plan-radio')\n  if (radio instanceof HTMLInputElement) radio.checked = true\n\n  const planInput = document.querySelector<HTMLInputElement>('.js-plan')!\n  if (planInput) planInput.value = planName || ''\n\n  const dataCollectionWrapperElement = document.querySelector('.js-coupons-data-collection-wrapper')\n\n  if (!dataCollectionWrapperElement) {\n    if (cost === 0 || hasBilling) {\n      const billingSection = document.querySelector('.js-billing-section')\n      if (billingSection) billingSection.classList.add('has-removed-contents')\n    } else if (accountLogin) {\n      const accountBillingSection = document.querySelector(`.js-billing-section[data-login='${accountLogin}']`)\n      if (accountBillingSection) accountBillingSection.classList.remove('has-removed-contents')\n    }\n  }\n}\n\n;(async function () {\n  await ready\n  const account = document.querySelector('.js-account-row.selected')\n  if (account) selectAccount(account)\n\n  const dataCollectionWrapperElement = document.querySelector('.js-coupons-data-collection-wrapper')\n  if (dataCollectionWrapperElement) {\n    selectPlanForDataCollection(dataCollectionWrapperElement)\n  } else {\n    const plan = document.querySelector('.js-plan-row.selected')\n    if (plan instanceof Element) selectPlan(plan)\n  }\n})()\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Toggle credit card form to enter in a new cc number.\non('click', '.js-enter-new-card', function (e) {\n  // Fallback assumes only one card at a time is supported and allows buttons outside\n  // the existing card context to trigger UI for adding a new card.\n  const cardInfo = (e.currentTarget.closest<HTMLElement>('.js-zuora-existing-card') ||\n    document.querySelector<HTMLElement>('.js-zuora-existing-card'))!\n  const billingSection = document.querySelector<HTMLElement>('.js-billing-section')!\n  const dataCollectionEnabled = document.querySelector<HTMLElement>('.js-enter-new-card')!\n  /* eslint-disable-next-line github/no-d-none */\n  cardInfo.classList.add('d-none')\n  billingSection.hidden = false\n  const iframe = billingSection.querySelector<HTMLElement>('iframe')!\n  iframe.setAttribute('width', '100%')\n  const height = dataCollectionEnabled.getAttribute('data-sdn-data-collection') === 'true' ? '237' : '677'\n  iframe.setAttribute('height', height)\n})\n\n// Toggle edit card for Zuora saved credit card info\non('click', '.js-edit-card-details', function (e) {\n  const container = document.getElementById('zuora_payment')!\n  const cardInfo = e.currentTarget.closest<HTMLElement>('.js-zuora-billing-info')!\n  const billingSection = document.querySelector<HTMLElement>('.js-billing-section')!\n\n  /* eslint-disable-next-line github/no-d-none */\n  container.classList.toggle('d-none')\n  /* eslint-disable-next-line github/no-d-none */\n  cardInfo.classList.toggle('d-none')\n  billingSection.classList.remove('PaymentMethod--creditcard-added')\n  billingSection.classList.add('PaymentMethod--creditcard')\n})\n\nconst vatCountries: {[key: string]: string} = {\n  Australia: 'AU00 000 000 000',\n  Austria: 'ATU000000000',\n  Belgium: 'BE0000000000',\n  Bulgaria: 'BG000000000',\n  Croatia: 'HR00000000000',\n  Cyprus: 'CY000000000X',\n  'Czech Republic': 'CZ00000000...',\n  Denmark: 'DK00 00 00 00',\n  Estonia: 'EE000000000',\n  Finland: 'FI00000000',\n  France: 'FRXX 000000000',\n  Germany: 'DE000000000',\n  Greece: 'EL000000000',\n  Hungary: 'HU00000000',\n  Iceland: 'IS...',\n  India: 'IN00000000000',\n  Ireland: 'IE0000000XA',\n  Italy: 'IT00000000000',\n  Japan: '000000000000',\n  Latvia: 'LV00000000000',\n  Lithuania: 'LT000000000...',\n  Luxembourg: 'LU00000000',\n  Malta: 'MT00000000',\n  Netherlands: 'NL000000000B00',\n  'New Zealand': 'NZ0000000000000',\n  Norway: 'NO000000000MVA',\n  Poland: 'PL0000000000',\n  Portugal: 'PT000000000',\n  Romania: 'RO0000000000',\n  Russia: 'RU0000000000',\n  Slovakia: 'SK0000000000',\n  Slovenia: 'SI00000000',\n  Spain: 'ES...',\n  Sweden: 'SE000000000000',\n  Switzerland: 'CHE000000000TVA',\n  Taiwan: '00000000',\n  'United Kingdom': 'GB000000000',\n}\n\nconst noPostalCodes = [\n  'Angola',\n  'Antigua and Barbuda',\n  'Aruba',\n  'Bahamas',\n  'Belize',\n  'Benin',\n  'Botswana',\n  'Cameroon',\n  'Comoros',\n  'Congo (Brazzaville)',\n  'Congo (Kinshasa)',\n  'Cook Islands',\n  \"Côte d'Ivoire\",\n  'Djibouti',\n  'Dominica',\n  'Fiji',\n  'French Southern Lands',\n  'Ghana',\n  'Guyana',\n  'Hong Kong',\n  'Ireland',\n  'Kiribati',\n  'Korea, North',\n  'Malawi',\n  'Maritania',\n  'Mauritius',\n  'Montserrat',\n  'Nauru',\n  'Niue',\n  'Qatar',\n  'Saint Kitts and Nevis',\n  'Saint Lucia',\n  'Sao Tome and Principe',\n  'Seychelles',\n  'Sierra Leone',\n  'Sint Maarten (Dutch part)',\n  'Solomon Islands',\n  'Somalia',\n  'Suriname',\n  'Syria',\n  'Togo',\n  'Tokelau',\n  'Tonga',\n  'United Arab Emirates',\n  'Vanuatu',\n  'Yemen',\n  'Zimbabwe',\n]\n\n// eslint-disable-next-line i18n-text/no-en\nconst USA = 'United States of America'\nconst CANADA = 'Canada'\n\n//Determine whether VAT is applicable, show VAT field and appropriate help text.\nfunction setupCountryFields(countrySelect: HTMLSelectElement) {\n  let country\n  const selectedCountry = countrySelect.options[countrySelect.selectedIndex]\n  if (selectedCountry) {\n    country = selectedCountry.textContent\n  }\n\n  const vatFormat = country ? vatCountries[country] : null\n  const container = countrySelect.closest<HTMLElement>('.js-setup-creditcard')!\n  container.classList.toggle('is-vat-country', vatFormat != null)\n\n  const vatLabelEl = container.querySelector<HTMLElement>('.js-vat-help-text')!\n  vatLabelEl.textContent = vatFormat ? `(${vatFormat})` : ''\n\n  const stateSelect = container.querySelector<HTMLSelectElement>('.js-select-state')!\n  container.classList.toggle('is-international', country !== USA && country !== CANADA)\n  stateSelect.required = country === USA\n  if (country !== USA) stateSelect.value = ''\n\n  if (country === CANADA) {\n    const selectProvinceEl = container.querySelector<HTMLSelectElement>('.js-select-province')!\n    const provinceLabel = container.querySelector<HTMLElement>('.js-region-label')!\n    provinceLabel.textContent = 'Province'\n    selectProvinceEl.disabled = false\n    selectProvinceEl.required = true\n    /* eslint-disable-next-line github/no-d-none */\n    stateSelect.classList.add('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    selectProvinceEl.classList.remove('d-none')\n  } else {\n    const selectProvinceEl = container.querySelector<HTMLSelectElement>('.js-select-province')!\n    const provinceLabel = container.querySelector<HTMLElement>('.js-region-label')!\n    provinceLabel.textContent = 'State'\n    selectProvinceEl.disabled = true\n    selectProvinceEl.required = false\n    selectProvinceEl.value = ''\n    /* eslint-disable-next-line github/no-d-none */\n    stateSelect.classList.remove('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    selectProvinceEl.classList.add('d-none')\n  }\n\n  const postalCode = container.querySelector<HTMLInputElement>('.js-postal-code-field')!\n  const noPostalCode = noPostalCodes.indexOf(country || '') >= 0\n  container.classList.toggle('no-postcodes', noPostalCode)\n  postalCode.required = !noPostalCode\n  if (noPostalCode) postalCode.value = ''\n}\n\nobserve('.js-select-country', {\n  constructor: HTMLSelectElement,\n  initialize(countrySelect) {\n    setupCountryFields(countrySelect)\n    if (countrySelect.form) fire(countrySelect.form, 'change')\n    countrySelect.addEventListener('change', function () {\n      setupCountryFields(countrySelect)\n    })\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Select \"Pay with\" \"Credit or debit card\" or \"PayPal account\" radio button.\non('click', '.js-payment-methods .js-payment-method', handlePaymentMethodChange)\non('click', '.js-payment-method-href', handlePaymentMethodChange)\n\nfunction handlePaymentMethodChange(event: Event) {\n  if (!(event.currentTarget instanceof Element)) return\n  const container = event.currentTarget.closest<HTMLElement>('.js-payment-methods')!\n  const selectedTab = event.currentTarget.getAttribute('data-selected-tab')!\n\n  const paymentMethodEls = container.querySelectorAll('.js-selected-payment-method')\n  for (const el of paymentMethodEls) {\n    el.classList.remove('active')\n  }\n\n  container.querySelector<HTMLElement>(`.${selectedTab}`)!.classList.add('active')\n  const paymentMethodTypeEl = container.querySelector<HTMLInputElement>('.js-payment-method-type')!\n\n  if (selectedTab === 'pay-with-paypal') {\n    paymentMethodTypeEl.value = 'paypal'\n  } else if (selectedTab === 'pay-with-azure') {\n    paymentMethodTypeEl.value = 'azure'\n  } else {\n    paymentMethodTypeEl.value = 'credit_card'\n    const editButton = container.querySelector('.js-sponsors-payment-method-update-confirmation-dialog')\n    editButton?.classList.add('has-removed-contents')\n  }\n\n  // For Zuora enabled users show outer continue button when PayPal is selected\n  const billingSection = container.closest('.js-billing-section')\n  if (billingSection) {\n    if (selectedTab === 'pay-with-paypal') {\n      billingSection.classList.add('PaymentMethod--paypal')\n      billingSection.classList.remove('PaymentMethod--creditcard')\n      billingSection.classList.remove('PaymentMethod--azure')\n      billingSection.classList.remove('PaymentMethod--creditcard-added')\n      const existingCardContainer = document.querySelector<HTMLElement>('.js-zuora-billing-info')!\n      const newCardContainer = document.querySelector<HTMLElement>('.js-zuora-payment-page')!\n      /* eslint-disable-next-line github/no-d-none */\n      existingCardContainer.classList.add('d-none')\n      /* eslint-disable-next-line github/no-d-none */\n      newCardContainer.classList.remove('d-none')\n    } else if (selectedTab === 'pay-by-credit-card') {\n      billingSection.classList.remove('PaymentMethod--paypal')\n      billingSection.classList.remove('PaymentMethod--azure')\n      billingSection.classList.add('PaymentMethod--creditcard')\n    } else if (selectedTab === 'pay-by-azure') {\n      billingSection.classList.remove('PaymentMethod--paypal')\n      billingSection.classList.remove('PaymentMethod--creditcard')\n      billingSection.classList.add('PaymentMethod--azure')\n    }\n  }\n}\n\n// Ensure only the active payment option is in the document\nobserve('.js-selected-payment-method:not(.active)', {\n  add(el) {\n    el.classList.add('has-removed-contents')\n  },\n  remove(el) {\n    el.classList.remove('has-removed-contents')\n  },\n})\n\nobserve('.js-billing-payment-methods', function (el) {\n  el.classList.remove('disabled')\n})\n","// Pay with PayPal button wireup.\n//\n// Currently supporting the iFrame approach which will be supplanted by a mini\n// browser at some point in the future.\n\nimport type {MerchantConfiguration} from '@github/braintree-encryption'\nimport braintree from '@github/braintree-encryption'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst paypalStates = ['paypal-loading', 'paypal-logged-in', 'paypal-logged-out', 'paypal-down']\n\nfunction braintreeSetup(token: string, type: string, options: MerchantConfiguration): Promise<void> {\n  const {onSuccess} = options\n  return new Promise(resolve =>\n    braintree.setup(\n      token,\n      type,\n      Object.assign({}, options, {\n        onSuccess: () => {\n          onSuccess()\n          resolve()\n        },\n      }),\n    ),\n  )\n}\n\nfunction setPaypalState(container: Element, state: string) {\n  container.classList.remove(...paypalStates)\n  if (paypalStates.indexOf(state) >= 0) {\n    container.classList.add(state)\n  }\n}\n\nasync function getClientToken(paymentMethods: Element): Promise<string> {\n  const token = paymentMethods.getAttribute('data-token')\n  if (token) return token\n  const response = await fetch('/account/billing/client_token', {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    throw new Error('Response is not OK')\n  }\n  return await response.text()\n}\n\nasync function setupBraintreePaypal(container: Element) {\n  const paymentMethods = container.closest<HTMLElement>('.js-payment-methods')!\n  if (paymentMethods.classList.contains('paypal-loading')) {\n    return\n  }\n\n  if (paymentMethods.classList.contains('paypal-logged-in')) {\n    return\n  }\n  container.textContent = ''\n  setPaypalState(paymentMethods, 'paypal-loading')\n\n  try {\n    const token = await getClientToken(paymentMethods)\n\n    if (!paymentMethods.hasAttribute('data-token')) {\n      paymentMethods.setAttribute('data-token', token)\n    }\n\n    const selector = container.getAttribute('data-nonce-field')!\n    const nonceField = paymentMethods.querySelector<HTMLElement>(selector)!\n\n    await braintreeSetup(token, 'paypal', {\n      container,\n      displayName: 'GitHub',\n      paymentMethodNonceInputField: nonceField,\n      enableCORS: true,\n      onSuccess() {\n        setPaypalState(paymentMethods, 'paypal-logged-in')\n\n        const awaitingPayment = document.querySelector<HTMLElement>('.js-awaiting-payment')\n        if (awaitingPayment) {\n          if (\n            awaitingPayment.getAttribute('data-toggle-plan-upgrade-visibility') === 'true' &&\n            awaitingPayment.hidden === true\n          ) {\n            awaitingPayment.hidden = false\n          }\n        }\n      },\n      onReady() {\n        setPaypalState(paymentMethods, 'paypal-logged-out')\n      },\n    })\n\n    const cancelButton = document.querySelector<HTMLElement>('#bt-pp-cancel')!\n    cancelButton.setAttribute('type', 'button')\n    const icon = document.querySelector<Element>('.js-paypal-cancel-icon')!.cloneNode(true)\n    if (icon instanceof Element) {\n      /* eslint-disable-next-line github/no-d-none */\n      icon.classList.remove('d-none')\n    }\n    cancelButton.appendChild(icon)\n  } catch (error) {\n    setPaypalState(paymentMethods, 'paypal-down')\n    throw error\n  }\n}\n\n// Handle cancel button clicks\non('click', '#bt-pp-cancel', function (event) {\n  const paymentMethods = event.currentTarget.closest<HTMLElement>('.js-payment-methods')!\n  setPaypalState(paymentMethods, 'paypal-logged-out')\n  const container = event.currentTarget.closest<HTMLElement>('.js-paypal-container')!\n  setupBraintreePaypal(container)\n})\n\n// Setup and render the paypal button if active.\nobserve('.js-paypal-container', {\n  add(el) {\n    if (el.closest('.active') != null) {\n      setupBraintreePaypal(el)\n    }\n  },\n})\n","import {dispatchThrottledInputEvent} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {softNavigate} from '@github-ui/soft-navigate'\n\nobserve('input.js-plan-choice:checked', {\n  constructor: HTMLInputElement,\n  add(input) {\n    const freePlanChecked = input.value === 'free'\n\n    for (const el of document.querySelectorAll('.js-plan-choice-label')) {\n      el.classList.toggle('open', el === input)\n    }\n\n    const label = input.closest('.js-plan-choice-label')\n\n    if (label) {\n      const addonField = label.querySelector('.js-addon-purchase-field')\n      if (addonField instanceof HTMLInputElement) {\n        dispatchThrottledInputEvent(addonField)\n      }\n\n      if (input.checked) {\n        label.classList.add('open')\n      }\n    }\n\n    // ghe-cloud-trial flag enabled means the only options for Enterprise are Trial or Server\n    // both skip collecting payment\n    const businessPlusChecked = input.classList.contains('js-data-ghe-cloud-trial') && input.value === 'business_plus'\n    const noPaymentPlanChecked = freePlanChecked || businessPlusChecked\n\n    for (const el of document.querySelectorAll('.js-billing-section')) {\n      el.classList.toggle('has-removed-contents', noPaymentPlanChecked)\n    }\n\n    if (freePlanChecked) {\n      const contactUsElement = document.querySelector('.js-contact-us')\n      if (contactUsElement != null) {\n        /* eslint-disable-next-line github/no-d-none */\n        contactUsElement.classList.add('d-none')\n      }\n\n      const purchaseButton = document.querySelector('.js-purchase-button')\n      if (purchaseButton != null) {\n        purchaseButton.removeAttribute('disabled')\n      }\n    }\n\n    // hide \"create organization\" button if enterprise server is selected\n    const enterpriseServerPlanChecked =\n      document.querySelector('input.js-enterprise-choice[value=server]:checked') && input.value === 'business_plus'\n\n    if (enterpriseServerPlanChecked === true) {\n      const signupContinueActions = document.querySelector('.SignUpContinueActions')\n      if (signupContinueActions != null) {\n        signupContinueActions.classList.add('has-removed-contents')\n      }\n    }\n  },\n})\n\non('click', '.js-duration-change', async function ({currentTarget}) {\n  const plan = document.querySelector('.js-upgrade-plan-change:checked')\n  const transformInput = document.querySelector('.js-transform-user')\n\n  let url = `?plan_duration=${(currentTarget as HTMLInputElement).getAttribute('data-duration')}`\n  if (transformInput) url = `${url}&transform_user=1`\n  if (plan instanceof HTMLInputElement) url = `${url}&new_plan=${plan.value}`\n\n  await stashBillingInfo()\n  softNavigate(url)\n})\n\non('change', 'input.js-upgrade-plan-change', function ({currentTarget}) {\n  const transformInput = document.querySelector('.js-transform-user')\n\n  let url = `?new_plan=${(currentTarget as HTMLInputElement).value}`\n  if (transformInput) url = `${url}&transform_user=1`\n\n  softNavigate(url)\n})\n\non('change', 'input.js-org-duration-change', async function ({currentTarget}) {\n  const params = new URL(document.location.href, window.location.origin).searchParams\n  if (document.querySelectorAll('.js-experiment-seats').length > 0) {\n    params.set('plan_duration', (currentTarget as HTMLInputElement).value)\n  } else {\n    const plan = document.querySelector<HTMLInputElement>('.js-upgrade-org-plan-change:checked')!\n    const account = document.querySelector<HTMLInputElement>('.js-account-name')!\n    params.set('plan', plan.value)\n    params.set('plan_duration', (currentTarget as HTMLInputElement).value)\n    params.set('org', account.value)\n  }\n  await stashBillingInfo()\n  const url = `?${params.toString()}`\n\n  softNavigate(url)\n})\n\nasync function softNavigateWithPlanDuration(duration: string) {\n  const params = new URL(document.location.href, window.location.origin).searchParams\n  params.set('plan_duration', duration)\n\n  await stashBillingInfo()\n  const url = `?${params.toString()}`\n  softNavigate(url)\n}\n\non('change', 'input.js-bus-duration-change', function ({currentTarget}) {\n  softNavigateWithPlanDuration((currentTarget as HTMLInputElement).value)\n})\n\non('click', '.js-bus-year-duration', function () {\n  softNavigateWithPlanDuration('year')\n})\n\non('click', '.js-bus-month-duration', function () {\n  softNavigateWithPlanDuration('month')\n})\n\non('change', 'input.js-upgrade-org-plan-change', function ({currentTarget}) {\n  const account = document.querySelector<HTMLInputElement>('.js-account-name')!\n\n  const params = new URL(document.location.href, window.location.origin).searchParams\n  params.set('plan', (currentTarget as HTMLInputElement).value)\n  params.set('org', account.value)\n\n  const url = `?${params.toString()}`\n  softNavigate(url)\n})\n\nexport const stashBillingInfo = async (): Promise<void> => {\n  const formContainer = document.querySelector<HTMLElement>('.js-name-address-collection')\n  if (formContainer) {\n    const billingInfo = {\n      first_name: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_first_name')?.value,\n      last_name: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_last_name')?.value,\n      entity_name: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_entity_name')?.value,\n      address1: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_address1')?.value,\n      address2: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_address2')?.value,\n      city: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_city')?.value,\n      vat_code: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_vat_code')?.value,\n      country_code: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_country_code')?.value,\n      region: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_region')?.value,\n      postal_code: formContainer?.querySelector<HTMLInputElement>('#account_screening_profile_postal_code')?.value,\n    }\n\n    const formData = new FormData()\n    for (const [key, value] of Object.entries(billingInfo)) {\n      if (value !== undefined) {\n        formData.append(`account_screening_profile[${key}]`, value)\n      }\n    }\n\n    if (!Array.from(formData).length) {\n      return\n    }\n\n    const targetTypeElem = document.querySelector<HTMLInputElement>('#account_screening_profile_target')\n    if (!targetTypeElem) {\n      return\n    }\n\n    const targetType = targetTypeElem.value\n    let targetId\n    let targetName = ''\n\n    if (targetType === 'organization') {\n      targetId = document.querySelector<HTMLInputElement>('#account_screening_profile_organization_id')?.value\n      targetName = 'organization_id'\n    } else if (targetType === 'business') {\n      targetId = document.querySelector<HTMLInputElement>('#account_screening_profile_business_id')?.value\n      targetName = 'business_id'\n    }\n\n    formData.set('target', targetType)\n    if (targetId) {\n      formData.set(targetName, targetId)\n    }\n\n    try {\n      const csrfToken = document.querySelector('.js-stash-billing-info-csrf')!.getAttribute('value')!\n      const request = new Request('/account/stash_billing_information', {\n        method: 'POST',\n        headers: {\n          'Scoped-CSRF-Token': csrfToken,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: formData,\n      })\n      await self.fetch(request)\n    } catch (error) {\n      /* noop */\n      /* we don't want to block the user from changing the duration if the request fails */\n    }\n  }\n}\n","import {addThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {replaceState} from '@github-ui/browser-history-state'\n\ntype Data = {selectors: {[key: string]: string}}\n\nlet previousController: AbortController | null = null\nlet planDuration = 'month'\n\nfunction getInputs(): NodeListOf<HTMLInputElement> {\n  return document.querySelectorAll<HTMLInputElement>('.js-trial-upgrade-seats')\n}\n\nfunction getClosestStepperInput(el: HTMLElement | null): HTMLInputElement | null {\n  if (!el) {\n    return null\n  }\n  return el\n    .closest('.js-stepper')\n    ?.querySelector<HTMLInputElement>('.js-trial-upgrade-seats') as HTMLInputElement | null\n}\n\nasync function updateTotals(el: HTMLInputElement) {\n  const [seatCount] = validateSeats(el)\n  const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n\n  const urlWithUpdatedSeats = new URL(window.location.href, window.location.origin)\n  const seatName = el.getAttribute('data-url-param-name') || 'seats'\n\n  urlWithUpdatedSeats.searchParams.set(seatName, seatCount)\n  replaceState(null, '', urlWithUpdatedSeats.toString())\n  updateReturnToUpgradePage()\n\n  const params = new URLSearchParams(url.search.slice(1))\n  const inputs = getInputs()\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i]\n    if (!input) {\n      continue\n    }\n    const name = input.getAttribute('data-url-param-name') || 'seats'\n    const [count] = validateSeats(input)\n    params.append(name, count)\n  }\n  if (document.querySelectorAll('.js-trial-upgrade-seats').length > 0) {\n    planDuration =\n      document.querySelector<HTMLInputElement>(\n        '.js-org-duration-change:checked,.js-bus-duration-change:checked,.js-bus-duration-input',\n      )?.value || 'month'\n    params.append('plan_duration', planDuration)\n  }\n\n  url.search = params.toString()\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let data: Data | null = null\n  try {\n    const response = await fetch(url.toString(), {signal, headers: {Accept: 'application/json'}})\n    if (!response.ok) return\n    data = await response.json()\n  } catch {\n    // ignore network errors\n  }\n  if (signal.aborted) return\n  if (!data) return\n\n  const ref = data.selectors\n  for (const selector in ref) {\n    for (const element of document.querySelectorAll(selector)) {\n      element.innerHTML = ref[selector]!\n      const hiddenElement = element.closest<HTMLElement>('.js-stepper-show-with-value')\n      if (hiddenElement) {\n        hiddenElement.hidden = !ref[selector]\n      }\n    }\n  }\n}\n\nfunction updateReturnToUpgradePage() {\n  // When return_to points at the current upgrade page, modify the return_to field so we don't lose user choices when\n  // submitting subforms like billing information and payment information on the Enterprise upgrade page.\n  const returnToInputs = document.querySelectorAll<HTMLElement>('input[name=\"return_to\"]')\n  const currentURL = new URL(window.location.href, window.location.origin)\n  for (const returnToInput of returnToInputs) {\n    const returnToURL = new URL(returnToInput?.getAttribute('value') || '', window.location.origin)\n    if (currentURL.pathname === returnToURL.pathname) {\n      returnToInput?.setAttribute('value', currentURL.pathname + currentURL.search)\n    }\n  }\n}\n\nobserve('.js-trial-upgrade-seats', {\n  constructor: HTMLInputElement,\n  add(el) {\n    updateTotals(el)\n\n    addThrottledInputEventListener(el, function () {\n      updateTotals(el)\n    })\n  },\n})\n;(async function () {\n  await ready\n  const inputs = getInputs()\n  const monthRadio = document.getElementById('plan_duration_month') as HTMLInputElement\n\n  if (monthRadio) {\n    planDuration = monthRadio.checked ? 'month' : 'year'\n  }\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i] as HTMLInputElement\n    limitSeats(input)\n    updateTotals(input)\n  }\n})()\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, function () {\n  const inputs = getInputs()\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i] as HTMLInputElement\n    limitSeats(input)\n  }\n})\n\non('click', '.js-increase-seats-number', function (e: Event) {\n  const input = getClosestStepperInput(e.currentTarget as HTMLElement)\n  if (!input || input.disabled) return\n\n  const value: number = Number(input.value) + 1\n  input.value = value.toString()\n  limitSeats(input)\n  updateTotals(input)\n})\n\non('click', '.js-decrease-seats-number', function (e: Event) {\n  const input = getClosestStepperInput(e.currentTarget as HTMLElement)\n  if (!input || input.disabled) return\n\n  const value: number = Number(input.value) - 1\n  input.value = value.toString()\n  limitSeats(input)\n  updateTotals(input)\n})\n\nfunction limitSeatsOnChange(e: Event) {\n  const input = e.target as HTMLInputElement\n  if (!input || input.disabled) return\n\n  limitSeats(input)\n  updateTotals(input)\n}\n\nfunction validateSeats(input: HTMLInputElement): [clampedSeats: string, hasMinError: boolean, hasMaxError: boolean] {\n  const minimumSeats = Number(input.getAttribute('data-minimum')) ?? 1\n  const maximumSeats = Number(input.getAttribute('data-maximum')) ?? 1_000 // Matches the maximum default seats limit in configurable/seat_limit_for_upgrade\n  const seats = input.value\n  const value = Number(seats)\n  if ((!value && value !== 0) || value < minimumSeats) {\n    return [minimumSeats.toString(), true, false]\n  } else if (value > maximumSeats) {\n    return [maximumSeats.toString(), false, true]\n  } else {\n    return [seats, false, false]\n  }\n}\n\nfunction limitSeats(input: HTMLInputElement) {\n  if (!input || input.disabled) return\n\n  const [clampedSeats, hasMinError, hasMaxError] = validateSeats(input)\n  input.value = clampedSeats\n\n  const stepper = input.closest('.js-stepper')\n  if (!stepper) return\n  stepper.querySelector<HTMLElement>('.js-minimum-seats')!.hidden = !hasMinError\n  stepper.querySelector<HTMLElement>('.js-maximum-seats')!.hidden = !hasMaxError\n}\n\nobserve('.js-trial-upgrade-seats', e => {\n  e.addEventListener('change', limitSeatsOnChange)\n})\n","import type {Params, RenderInitFields, ZuoraResponse} from '@github/zuorajs'\nimport {Z} from '@github/zuorajs'\nimport {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {reportError} from '@github-ui/failbot'\nimport {trackView} from '../hydro-tracking'\n\nasync function setupZuoraHostedPaymentsPage(container: HTMLElement) {\n  const url = container.getAttribute('data-url')!\n  const organizationId = container.getAttribute('data-organization-id')\n  const businessId = container.getAttribute('data-business-id')\n  const signatureViewContext = container.getAttribute('data-signature-view-context')\n  const manualPayment = container.getAttribute('data-manual-payment')\n  const termsOfService = container.getAttribute('data-terms-of-service')\n  const target = container.getAttribute('data-target')\n  const invoices = container.getAttribute('data-invoices')\n  const paymentGateway = container.getAttribute('data-payment-gateway')\n  const urlQuery = new URLSearchParams()\n  if (organizationId) {\n    urlQuery.append('organization_id', organizationId)\n  }\n  if (signatureViewContext) {\n    urlQuery.append('view_context', signatureViewContext)\n  }\n  if (businessId) {\n    urlQuery.append('business_id', businessId)\n  }\n  if (manualPayment) {\n    urlQuery.append('manual_payment', manualPayment)\n  }\n  if (termsOfService) {\n    urlQuery.append('terms_of_service', termsOfService)\n  }\n  if (target) {\n    urlQuery.append('target', target)\n  }\n  if (invoices) {\n    for (const invoice of invoices.split(',')) {\n      urlQuery.append('invoices[]', invoice)\n    }\n  }\n  if (paymentGateway) {\n    urlQuery.append('payment_gateway', paymentGateway)\n  }\n\n  const response = await fetch(`${url}?${urlQuery.toString()}`, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const errorMessage = container.getAttribute('data-general-signature-error-message') || ''\n    replaceSpinnerWithMessage(errorMessage)\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  const params: Params = await response.json()\n\n  if (container.classList.contains('js-zuora-payment-page')) {\n    if (params['error']) {\n      replaceSpinnerWithMessage(params['error'])\n      return\n    }\n\n    const userId = container.getAttribute('data-id')!\n    loadZuora(container, params, {creditCardHolderName: userId}, paymentMethodPageCallback)\n  } else {\n    loadZuora(container, params, {creditCardHolderName: 'GitHub Organization'}, invoicePaymentCallback)\n  }\n}\n\ntype PaymentMethodDetails = {\n  masked_number: string\n  card_type: string\n}\n\nasync function fetchPaymentMethodDetails(\n  zuoraResponse: ZuoraResponse,\n  orgId: string | null,\n  callback: (response: PaymentMethodDetails) => void,\n) {\n  const params = new URLSearchParams()\n  params.append('payment_method_id', zuoraResponse.refId)\n  if (orgId) {\n    params.append('organization_id', orgId)\n  }\n\n  const response = await fetch(`/settings/billing/payment_method?${params.toString()}`, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n\n  callback(await response.json())\n}\n\nfunction errorMessageCallback(container: HTMLElement) {\n  return (key: string, code: string, message: string) => {\n    let errorMessage = message\n    let errorCode = ''\n    const errorMessages = JSON.parse(container.getAttribute('data-error-messages')!)\n\n    // Regular expression that captures the text within the first set of square brackets\n    // e.g. \"[ThreeDs2_Authentication_Exception] Transaction declined.402 - [card_error/card_declined/stolen_card] Your card was declined.\"\n    const errorCodeRegex = /\\[(.*?)\\]/\n\n    // Applying the regex to the string\n    const match = errorMessage.match(errorCodeRegex)\n\n    if (match && typeof match[1] === 'string') {\n      // The captured substring is in the first capturing group\n      errorCode = match[1]\n    }\n\n    const clientContext = {\n      processor_response_reason: errorMessage,\n      processor_response_code: errorCode,\n    }\n\n    switch (key) {\n      case 'error':\n        // Send error info to Hydro\n        container.setAttribute('data-hydro-client-context', JSON.stringify(clientContext))\n        trackView(container)\n\n        if (errorCode === 'Attempt_Exceed_Limitation') {\n          errorMessage = errorMessages['attempts_exceeded_limit_error']\n        } else {\n          errorMessage = errorMessages['processor_declined_error']\n        }\n        break\n    }\n    Z.sendErrorMessageToHpm(key, errorMessage)\n  }\n}\n\ntype ZuoraCallback = (response: ZuoraResponse) => void\n\nasync function pollPayment(\n  paymentId: string,\n  organizationId?: string | null,\n  maxRetries = 5,\n  timeBetweenRequests = 1000,\n): Promise<Response> {\n  if (maxRetries === 0) {\n    throw new Error(`Max retries exhausted`)\n  }\n\n  let checkUrl = `/settings/billing/bill_pay/${paymentId}`\n  if (organizationId) {\n    const urlQuery = new URLSearchParams()\n    urlQuery.append('organization_id', organizationId)\n    checkUrl = `${checkUrl}?${urlQuery.toString()}`\n  }\n\n  const response = await fetch(checkUrl, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (response.status === 200) {\n    return response\n  }\n  if (response.status === 202) {\n    await new Promise(resolve => setTimeout(resolve, timeBetweenRequests))\n    return pollPayment(paymentId, organizationId, maxRetries - 1, timeBetweenRequests * 1.5)\n  }\n\n  throw new Error(`Unexpected ${response.status} response from poll endpoint`)\n}\n\nfunction replaceLocation(url: string | null) {\n  if (!url) {\n    return\n  }\n\n  try {\n    const validatedUrl = new URL(url, window.location.origin)\n    if (validatedUrl.protocol === 'http:' || validatedUrl.protocol === 'https:') {\n      window.location.replace(validatedUrl.toString())\n    }\n  } catch (_) {\n    return\n  }\n}\n\nfunction zuoraSuccessCallback(container: HTMLElement, callback: ZuoraCallback): ZuoraCallback {\n  return async response => {\n    callback(response)\n\n    if (response.success === 'true') {\n      const form = document.querySelector('.js-payment-method-form')\n      if (form) {\n        if (!(form instanceof HTMLFormElement)) return\n        // We are in a page with only the credit card form that can be submitted\n        const redirectTo = container.getAttribute('data-redirect-to')\n        if (redirectTo) {\n          // redirectTo is only added when we are in the manual payment page. Poll for the transaction to be completed\n          if (response.AuthorizeResult === 'Approved') {\n            const orgId = container.getAttribute('data-organization-id')\n\n            const spinner = document.querySelector<HTMLElement>('.js-payment-verification-spinner')!\n            const success = document.querySelector<HTMLElement>('.js-payment-verification-success')!\n            const paymentWrapper = document.querySelector<HTMLElement>('.js-payment-method-section-wrapper')!\n            const stillProcessing = document.querySelector<HTMLElement>('.js-payment-still-processing')!\n\n            try {\n              paymentWrapper.hidden = true\n              spinner.hidden = false\n\n              await pollPayment(response.PaymentId, orgId)\n\n              spinner.hidden = true\n              success.hidden = false\n            } catch (error) {\n              spinner.hidden = true\n              stillProcessing.hidden = false\n              await new Promise(resolve => setTimeout(resolve, 3000))\n            }\n\n            await new Promise(resolve => setTimeout(resolve, 150))\n            replaceLocation(redirectTo)\n          } else {\n            // Unlikely we'll hit this point but because Zuora doesn't have good documentation\n            // Sending an error to Sentry is the best way to get awareness that there's other cases\n            reportError(new Error(`Unknown AuthorizationResult ${response.AuthorizeResult}`))\n            replaceLocation(redirectTo)\n          }\n        } else {\n          form.submit()\n        }\n      } else {\n        const orgId = container.getAttribute('data-organization-id')\n        fetchPaymentMethodDetails(response, orgId, (res: PaymentMethodDetails) => {\n          const infoContainer = document.querySelector<HTMLElement>('.js-zuora-billing-info')!\n          const newCardTypeContainer = infoContainer.querySelector<HTMLElement>('.js-new-card-type')!\n          const newCardNumberContainer = infoContainer.querySelector<HTMLElement>('.js-new-card-number')!\n          const newCardLastFour = res.masked_number.replace(/\\*/g, '')\n          const paymentMethodsContainer = container.closest<HTMLElement>('.js-billing-section')!\n          const awaitingPayment = document.querySelector('.js-awaiting-payment')\n\n          newCardTypeContainer.textContent = res.card_type\n          newCardNumberContainer.textContent = newCardLastFour\n          /* eslint-disable-next-line github/no-d-none */\n          container.classList.add('d-none')\n          /* eslint-disable-next-line github/no-d-none */\n          infoContainer.classList.remove('d-none')\n\n          if (awaitingPayment) {\n            awaitingPayment.toggleAttribute('hidden')\n          }\n\n          paymentMethodsContainer.classList.remove('PaymentMethod--creditcard')\n          paymentMethodsContainer.classList.add('PaymentMethod--creditcard-added')\n        })\n      }\n    }\n  }\n}\n\nfunction loadZuora(container: HTMLElement, params: Params, initFields: RenderInitFields, callback: ZuoraCallback) {\n  const initFieldsWithPopulatedFields = Object.assign({}, params.prepopulate, initFields)\n  delete params.prepopulate\n\n  Z.renderWithErrorHandler(\n    params,\n    initFieldsWithPopulatedFields,\n    zuoraSuccessCallback(container, callback),\n    errorMessageCallback(container),\n  )\n}\n\nfunction paymentMethodPageCallback(response: ZuoraResponse) {\n  if (response.success === 'true') {\n    const infoContainer = document.querySelector<HTMLElement>('.js-zuora-billing-info')!\n    const paymentMethodIDEl = infoContainer.querySelector<HTMLInputElement>('.js-zuora-payment-method-id')!\n    const countryCodeEl = infoContainer.querySelector<HTMLInputElement>('.js-zuora-select-country')!\n    const regionEl = infoContainer.querySelector<HTMLInputElement>('.js-zuora-select-region')!\n    const postalCodeEl = infoContainer.querySelector<HTMLInputElement>('.js-zuora-select-postal-code')!\n\n    paymentMethodIDEl.value = response.refId\n    countryCodeEl.value = countryCodeEl.value || response.creditCardCountry || ''\n    regionEl.value = regionEl.value || response.creditCardState || ''\n    postalCodeEl.value = postalCodeEl.value || response.creditCardPostalCode || ''\n  }\n}\n\nfunction invoicePaymentCallback(response: ZuoraResponse) {\n  const params = new URLSearchParams()\n  params.append('success', response.success)\n  params.append('response_from', response.responseFrom)\n  if (response.success) {\n    params.append('ref_id', response.refId)\n  } else {\n    params.append('error_code', response.errorCode)\n    params.append('error_message', response.errorMessage)\n  }\n  const redirectUrl = `pay?${params.toString()}`\n  window.location.replace(redirectUrl)\n}\n\nfunction resizeZuoraIframe() {\n  const iframe = document.getElementById('z_hppm_iframe')\n\n  if (iframe != null) {\n    if (window.innerWidth < 544) {\n      iframe.style.width = '400px'\n      iframe.style.height = '350px'\n    } else if (window.innerWidth < 768) {\n      iframe.style.width = '95%'\n      iframe.style.height = '300px'\n    } else {\n      iframe.style.width = '95%'\n    }\n\n    const container = document.getElementById('zuora_payment')\n    if (container) {\n      iframe.setAttribute('title', container.getAttribute('title')!)\n    }\n    Z.post(iframe.id, 'resize')\n  }\n}\n\nfunction replaceSpinnerWithMessage(message: string) {\n  const spinner = document.querySelector('.js-zuora-spinner')\n  if (spinner) spinner.textContent = message\n}\n\nobserve('#zuora_payment', {\n  constructor: HTMLElement,\n  add(el) {\n    const cardFieldsPage = el.classList.contains('js-zuora-payment-page')\n    if (cardFieldsPage) {\n      const spinner = document.querySelector('.js-zuora-spinner')\n      /* eslint-disable-next-line github/no-d-none */\n      if (spinner) spinner.classList.remove('d-none')\n      el.style.opacity = '0'\n\n      Z.runAfterRender(() => {\n        /* eslint-disable-next-line github/no-d-none */\n        if (spinner) spinner.classList.add('d-none')\n        el.style.opacity = '1'\n\n        /* eslint-disable-next-line github/prefer-observers */\n        window.addEventListener('resize', debounce(resizeZuoraIframe, 200))\n      })\n    }\n\n    setupZuoraHostedPaymentsPage(el)\n  },\n})\n","import {sendStats} from '@github-ui/stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext,\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null},\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100,\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","import {SOFT_NAV_STATE} from './states'\n\nexport type SoftNavMechanism = 'turbo' | 'react' | 'turbo.frame'\n\nclass SoftNavEvent extends Event {\n  mechanism: SoftNavMechanism\n\n  constructor(mechanism: SoftNavMechanism, type: string) {\n    super(type)\n    this.mechanism = mechanism\n  }\n}\n\nexport class SoftNavStartEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.START)\n  }\n}\n\nexport class SoftNavSuccessEvent extends SoftNavEvent {\n  visitCount: number\n\n  constructor(mechanism: SoftNavMechanism, visitCount: number) {\n    super(mechanism, SOFT_NAV_STATE.SUCCESS)\n    this.visitCount = visitCount\n  }\n}\n\nexport class SoftNavErrorEvent extends SoftNavEvent {\n  error: string\n\n  constructor(mechanism: SoftNavMechanism, error: string) {\n    super(mechanism, SOFT_NAV_STATE.ERROR)\n    this.error = error\n  }\n}\n\nexport class SoftNavEndEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.END)\n  }\n}\n","import {SOFT_NAV_STATE} from './states'\nimport {\n  SoftNavEndEvent,\n  SoftNavErrorEvent,\n  type SoftNavMechanism,\n  SoftNavStartEvent,\n  SoftNavSuccessEvent,\n} from './events'\nimport {markStart, sendFailureStats, sendRenderStats} from './stats'\nimport {\n  clearSoftNav,\n  getSoftNavFailReason,\n  getSoftNavMechanism,\n  setSoftNavMechanism,\n  unsetSoftNav,\n  setSoftNavReferrer,\n  setSoftNavReactAppName,\n  inSoftNav,\n  getCurrentReactAppName,\n  DEFAULT_SOFT_NAV_ERROR_REASON,\n  setLatestMechanism,\n} from './utils'\n\ninterface SoftNavOptions {\n  skipIfGoingToReactApp?: boolean\n  allowedMechanisms?: SoftNavMechanism[]\n}\n\nlet visitCount = 0\n\nexport function initSoftNav() {\n  visitCount = 0\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.INITIAL))\n\n  clearSoftNav()\n}\n\nexport function startSoftNav(mechanism: SoftNavMechanism) {\n  if (inSoftNav()) return\n\n  startProgressBar()\n  document.dispatchEvent(new SoftNavStartEvent(mechanism))\n\n  setSoftNavMechanism(mechanism)\n  setSoftNavReactAppName()\n  setSoftNavReferrer()\n  markStart()\n}\n\nexport function succeedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount += 1\n\n  document.dispatchEvent(new SoftNavSuccessEvent(getSoftNavMechanism(), visitCount))\n  endSoftNav(options)\n}\n\nexport function failSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount = 0\n  const reason = getSoftNavFailReason() || DEFAULT_SOFT_NAV_ERROR_REASON\n  document.dispatchEvent(new SoftNavErrorEvent(getSoftNavMechanism(), reason))\n\n  endProgressBar()\n  sendFailureStats(reason)\n  clearSoftNav()\n}\n\nexport function endSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  const mechanism = getSoftNavMechanism()\n  endProgressBar()\n  document.dispatchEvent(new SoftNavEndEvent(mechanism))\n\n  unsetSoftNav()\n  setLatestMechanism(mechanism)\n}\n\nexport function renderedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  sendRenderStats()\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.RENDER))\n}\n\nexport function updateFrame() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.FRAME_UPDATE))\n}\n\nfunction startProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.START))\n}\n\nfunction endProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.END))\n}\n\nfunction canTriggerEvent({skipIfGoingToReactApp, allowedMechanisms = []}: SoftNavOptions = {}) {\n  return (\n    inSoftNav() &&\n    (allowedMechanisms.length === 0 || allowedMechanisms.includes(getSoftNavMechanism())) &&\n    (!skipIfGoingToReactApp || !getCurrentReactAppName())\n  )\n}\n","import {sendStats} from '@github-ui/stats'\nimport {getCurrentReactAppName, getSoftNavMechanism, getSoftNavReactAppName, getSoftNavReferrer} from './utils'\nimport type {SoftNavMechanism} from './events'\n\nexport const SOFT_NAV_DURATION_MARK = 'stats:soft-nav-duration'\nexport const MECHANISM_MAPPING: Record<SoftNavMechanism | 'ui' | 'hard', PlatformBrowserSoftNavigationMechanism> = {\n  turbo: 'TURBO',\n  react: 'REACT',\n  'turbo.frame': 'FRAME',\n  ui: 'UI',\n  hard: 'HARD',\n}\nexport function markStart() {\n  // browswers only record the first ~150 resources\n  // clearing it here provides room to track additional resources loaded during the soft-nav\n  performance.clearResourceTimings()\n  performance.mark(SOFT_NAV_DURATION_MARK)\n}\n\nfunction getDurationSinceLastSoftNav() {\n  if (performance.getEntriesByName(SOFT_NAV_DURATION_MARK).length === 0) {\n    return null\n  }\n\n  performance.measure(SOFT_NAV_DURATION_MARK, SOFT_NAV_DURATION_MARK)\n  const measures = performance.getEntriesByName(SOFT_NAV_DURATION_MARK)\n  const measure = measures.pop()\n  return measure ? measure.duration : null\n}\n\nexport function sendFailureStats(turboFailureReason: string) {\n  sendStats({\n    turboFailureReason,\n    turboStartUrl: getSoftNavReferrer(),\n    turboEndUrl: window.location.href,\n  })\n}\n\nexport function sendRenderStats() {\n  const duration = getDurationSinceLastSoftNav()\n\n  if (!duration) return\n\n  const mechanism = MECHANISM_MAPPING[getSoftNavMechanism()]\n  const roundedDuration = Math.round(duration)\n\n  if (mechanism === MECHANISM_MAPPING.react)\n    document.dispatchEvent(new CustomEvent('staffbar-update', {detail: {duration: roundedDuration}}))\n\n  sendStats({\n    requestUrl: window.location.href,\n    softNavigationTiming: {\n      mechanism,\n      destination: getCurrentReactAppName() || 'rails',\n      duration: roundedDuration,\n      initiator: getSoftNavReactAppName() || 'rails',\n    },\n  })\n}\n","import {startSoftNav} from '@github-ui/soft-nav/state'\nimport {visit} from '@github/turbo'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function softNavigate(url: string, turboOptions?: any) {\n  // visit won't fire a `turbo:click` event, so we need to manually start the soft navigation process.\n  startSoftNav('turbo')\n  visit(url, {...turboOptions})\n}\n"],"names":["on","currentTarget","braintreeKey","getAttribute","braintree","Braintree","create","encryptForm","enableNextButton","el","form","closest","redeemButton","querySelector","HTMLButtonElement","disabled","classList","contains","selectAccount","accountRow","accountLogin","accountPlan","element","document","querySelectorAll","remove","add","chooseAccountButton","accountInput","value","planSection","plan","hidden","planTable","planRows","planRow","length","Element","selectPlan","planName","hasBilling","cost","parseInt","row","chooseButton","radio","HTMLInputElement","checked","planInput","billingSection","accountBillingSection","e","target","HTMLFormElement","action","couponCodeField","window","location","href","encodeURIComponent","preventDefault","account","formWrapper","focus","observe","ready","dataCollectionWrapperElement","selectPlanForDataCollection","wrapperElement","cardInfo","dataCollectionEnabled","iframe","setAttribute","height","container","getElementById","toggle","vatCountries","Australia","Austria","Belgium","Bulgaria","Croatia","Cyprus","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","India","Ireland","Italy","Japan","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Norway","Poland","Portugal","Romania","Russia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Taiwan","noPostalCodes","USA","CANADA","setupCountryFields","countrySelect","country","selectedCountry","options","selectedIndex","textContent","vatFormat","vatLabelEl","stateSelect","required","selectProvinceEl","provinceLabel","postalCode","noPostalCode","indexOf","handlePaymentMethodChange","event","selectedTab","paymentMethodTypeEl","editButton","existingCardContainer","newCardContainer","constructor","HTMLSelectElement","initialize","fire","addEventListener","paypalStates","setPaypalState","state","getClientToken","paymentMethods","token","response","fetch","headers","ok","text","setupBraintreePaypal","hasAttribute","selector","nonceField","braintreeSetup","type","onSuccess","Promise","resolve","Object","assign","displayName","paymentMethodNonceInputField","enableCORS","awaitingPayment","onReady","cancelButton","icon","cloneNode","appendChild","error","softNavigateWithPlanDuration","duration","params","URL","origin","searchParams","set","stashBillingInfo","url","toString","softNavigate","input","freePlanChecked","label","addonField","dispatchThrottledInputEvent","businessPlusChecked","noPaymentPlanChecked","contactUsElement","purchaseButton","removeAttribute","enterpriseServerPlanChecked","signupContinueActions","transformInput","formContainer","targetId","billingInfo","first_name","last_name","entity_name","address1","address2","city","vat_code","country_code","region","postal_code","formData","FormData","key","entries","undefined","append","Array","from","targetTypeElem","targetType","targetName","csrfToken","request","Request","method","body","self","previousController","planDuration","getInputs","getClosestStepperInput","updateTotals","seatCount","validateSeats","urlWithUpdatedSeats","seatName","replaceState","updateReturnToUpgradePage","returnToInputs","currentURL","returnToInput","returnToURL","pathname","search","URLSearchParams","slice","inputs","i","name","count","abort","signal","AbortController","data","Accept","json","aborted","ref","selectors","innerHTML","hiddenElement","limitSeatsOnChange","limitSeats","minimumSeats","Number","maximumSeats","seats","clampedSeats","hasMinError","hasMaxError","stepper","addThrottledInputEventListener","monthRadio","SOFT_NAV_STATE","SUCCESS","setupZuoraHostedPaymentsPage","organizationId","businessId","signatureViewContext","manualPayment","termsOfService","invoices","paymentGateway","urlQuery","invoice","split","replaceSpinnerWithMessage","responseError","statusText","message","status","userId","loadZuora","creditCardHolderName","paymentMethodPageCallback","invoicePaymentCallback","fetchPaymentMethodDetails","zuoraResponse","orgId","callback","refId","pollPayment","paymentId","maxRetries","timeBetweenRequests","checkUrl","setTimeout","replaceLocation","validatedUrl","protocol","replace","_","initFields","initFieldsWithPopulatedFields","prepopulate","Z","renderWithErrorHandler","success","redirectTo","AuthorizeResult","spinner","paymentWrapper","stillProcessing","PaymentId","reportError","submit","infoContainer","newCardTypeContainer","newCardNumberContainer","newCardLastFour","res","masked_number","paymentMethodsContainer","card_type","toggleAttribute","code","errorMessage","errorCode","errorMessages","JSON","parse","match","clientContext","processor_response_reason","processor_response_code","stringify","trackView","sendErrorMessageToHpm","paymentMethodIDEl","countryCodeEl","regionEl","postalCodeEl","creditCardCountry","creditCardState","creditCardPostalCode","responseFrom","redirectUrl","resizeZuoraIframe","innerWidth","style","width","post","id","HTMLElement","opacity","runAfterRender","debounce","sendData","hydroEventPayload","hydroEventHmac","hydroClientContext","visitorPayload","visitorHmac","HTMLMetaElement","content","sendStats","sendHydroEvent","throttledInputEvents","WeakMap","schedule","events","get","timer","clearTimeout","inputed","listener","call","wait","onKeydownInput","keypressed","onKeyupInput","onInputInput","removeThrottledInputEventListener","removeEventListener","delete","SoftNavEvent","Event","mechanism","SoftNavStartEvent","START","SoftNavSuccessEvent","visitCount","SoftNavErrorEvent","ERROR","SoftNavEndEvent","END","initSoftNav","dispatchEvent","INITIAL","clearSoftNav","startSoftNav","inSoftNav","PROGRESS_BAR","setSoftNavMechanism","setSoftNavReactAppName","setSoftNavReferrer","markStart","succeedSoftNav","canTriggerEvent","getSoftNavMechanism","endSoftNav","failSoftNav","reason","getSoftNavFailReason","DEFAULT_SOFT_NAV_ERROR_REASON","endProgressBar","sendFailureStats","unsetSoftNav","setLatestMechanism","renderedSoftNav","sendRenderStats","RENDER","updateFrame","FRAME_UPDATE","skipIfGoingToReactApp","allowedMechanisms","includes","getCurrentReactAppName","SOFT_NAV_DURATION_MARK","MECHANISM_MAPPING","turbo","react","ui","hard","performance","clearResourceTimings","mark","turboFailureReason","turboStartUrl","getSoftNavReferrer","turboEndUrl","getDurationSinceLastSoftNav","getEntriesByName","measure","measures","pop","roundedDuration","Math","round","CustomEvent","detail","requestUrl","softNavigationTiming","destination","initiator","getSoftNavReactAppName","turboOptions","visit"],"sourceRoot":""}