"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_search_parsing_parsing_ts"],{82907:(e,n,s)=>{s.r(n),s.d(n,{SearchType:()=>t.nX,chooseSearchType:()=>m,extractUnsupportedQualifiers:()=>k,getCaretPositionKindFromIndex:()=>g,getCustomScopeNames:()=>l,getExpandedQuery:()=>u,getHighlights:()=>X,getPossibleQualifierValues:()=>t.OZ,mapSearchTypeToURLParam:()=>h,mapURLParamToSearchType:()=>R,moveCaretToPosition:()=>p,parseSearchInput:()=>a,parseString:()=>r,searchTypeAsPlural:()=>C});var t=s(40898),o=s(72166);let i=String.fromCharCode(160);function r(e){let n=RegExp(i,"g");return(0,t.qg)(e.replace(n," "))}function a(e){let n=r(e),s=X(n);!function(e){e.sort((e,n)=>e.location.start-n.location.start)}(s);let t=[],o=0;for(let n of s)if(o<=n.location.start){t.push(e.substring(o,n.location.start).replace(" ",String.fromCharCode(160))),o=n.location.start;let s=document.createElement("span");s.classList.add(n.className),s.textContent=e.substring(n.location.start,n.location.end),t.push(s),o=n.location.end}return o<e.length&&t.push(e.substring(o).replace(" ",i)),[n,t]}function l(e){let n=[];return c(n,e),[...new Set(n.map(e=>e.content.value.toString()))]}function c(e,n){if((0,o.YT)(n)&&(0,t.cK)(n.content)&&e.push(n),(0,o.Go)(n))for(n of n.children)c(e,n)}function u(e,n,s){let o="",i=[];c(i,s);let r=0;for(let s of i)if((0,t.cK)(s.content)){o+=e.substring(r,s.location.start);let i=n.find(e=>t.cK(s.content)&&e.name===s.content.value)?.query;i&&(o+=i.replaceAll(" OR "," ")),r=s.content.location.end}return o+e.substring(r)}function p(e,n){let s=-1===n?e.value.length:n;e.focus(),e.setSelectionRange(s,s)}let f={And:{className:"pl-en",selector:"operatorLocation"},Not:{className:"pl-en",selector:"operatorLocation"},Or:{className:"pl-en",selector:"operatorLocation"},Regex:{className:"pl-c1",selector:"location"}};function X(e){let n;if((0,o.bY)(e)&&d(e.content))n=[{className:"input-parsed-symbol",location:e.content.location}];else if(e.value&&("AND"===e.value||"OR"===e.value||"NOT"===e.value))n=[{className:"pl-en",location:e.location}];else{let s=f[e.kind];s&&("location"===s.selector&&d(e)&&(n=[{className:s.className,location:e.location}]),"operatorLocation"===s.selector&&e.operatorLocations&&(n=e.operatorLocations.map(e=>({className:s.className,location:e}))))}return(n=n??[],(0,o.Go)(e))?n.concat(e.children.flatMap(X)):(0,o.bY)(e)?n.concat(X(e.content)):n}function d(e){return!!e.location}function g(e,n){let s=function e(n,s){if((0,o.Go)(n))for(let t of n.children){let n=e(t,s);if(n)return n}if(d(n)){let e=n.location.start,t=n.location.end;if((0,o.bY)(n)&&d(n.content)&&(t=n.content.location.end),s>=e&&s<=t)return n}}(e,n);if(!s)return{kind:o.Z.Text};if("Regex"===s.kind)return{kind:o.Z.Regex};if((0,o.bY)(s)){if("Is"===s.qualifier)return{kind:o.Z.Is,node:s};if("Language"===s.qualifier)return{kind:o.Z.Language,node:s};if("Path"===s.qualifier)return{kind:o.Z.Path,node:s};if("Repo"===s.qualifier)return{kind:o.Z.Repository,node:s};else if("Owner"===s.qualifier)return{kind:o.Z.Owner,node:s};else if("Org"===s.qualifier)return{kind:o.Z.Owner,node:s};else if("Saved"===s.qualifier)return{kind:o.Z.Saved,node:s};else return{kind:o.Z.OtherQualifier,node:s}}return{kind:o.Z.Text,node:s}}function k(e,n){let s=[];return!function e(i){if((0,o.bY)(i)&&!(0,t.Bu)(n,i.qualifier)){let e=i.raw.toLowerCase().substring(0,i.raw.length-1);s.includes(e)||s.push(e)}else if((0,o.bY)(i)&&"Is"===i.qualifier){let e=i.content;if((0,t.cK)(e)){let o=e.value;n!==t.nX.Issues&&"issue"===o?s.push("is:issue"):n!==t.nX.PRs&&"pr"===o&&s.push("is:pr")}}if((0,o.Go)(i))for(let n of i.children)e(n)}(e),s}function m(e,n){let s={[t.nX.Repositories]:.5,[t.nX.Code]:.2,[t.nX.Issues]:.1,[t.nX.PRs]:0,[t.nX.Discussions]:0,[t.nX.Commits]:0,[t.nX.Packages]:0,[t.nX.Topics]:0,[t.nX.Users]:0,[t.nX.Orgs]:0,[t.nX.Wikis]:0,[t.nX.Marketplace]:-.4,[t.nX.Unknown]:-1,[t.nX.CodeLegacy]:-1};n||(s[t.nX.Code]-=5);let i=[];for(let n of(function e(n,s){if((0,o.bY)(n)){if("Repo"===n.qualifier&&s.push([[t.nX.Repositories],2]),("Repo"===n.qualifier||"Org"===n.qualifier)&&s.push([[t.nX.Code],0]),"Saved"===n.qualifier&&s.push([[t.nX.Code],1]),(0,t.cK)(n.content)){"Regex"===n.content.kind&&s.push([[t.nX.Code],1]);let e=n.content.value.toString().toLowerCase();if("Is"===n.qualifier)"pr"===e?s.push([[t.nX.PRs],1]):"issue"===e?s.push([[t.nX.Issues],1]):"sponsorable"===e&&s.push([[t.nX.Users,t.nX.Repositories],1]);else if("Type"===n.qualifier){let n=new Map([["commit",t.nX.Commits],["discussion",t.nX.Discussions],["issue",t.nX.Issues],["marketplace",t.nX.Marketplace],["org",t.nX.Orgs],["package",t.nX.Packages],["pr",t.nX.PRs],["topic",t.nX.Topics],["user",t.nX.Users],["wiki",t.nX.Wikis]]);n.has(e)&&s.push([[n.get(e)],3])}}let e=(0,t.Me)(n.qualifier);e.length>0&&s.push([e,1])}else"Regex"===n.kind&&s.push([[t.nX.Code],1]);if((0,o.Go)(n))for(let t of n.children)e(t,s)}(e,i),i)){let[e,t]=n;if(0===t)for(let n of e)s[n]+=1;else if(3===t)for(let n of e)s[n]+=1.5;else if(2===t)for(let n of e)s[n]-=1;else{let n={};for(let s of e)n[s]=!0;for(let e of Object.keys(s))n[e]||delete s[e]}}let r=Object.keys(s).map(e=>[e,s[e]]),a=t.nX.Unknown;return r.length>0&&(r.sort((e,n)=>n[1]-e[1]),a=r[0][0]),a}function h(e){return({[t.nX.Unknown]:"",[t.nX.Code]:"code",[t.nX.Repositories]:"repositories",[t.nX.PRs]:"pullrequests",[t.nX.Issues]:"issues",[t.nX.Discussions]:"discussions",[t.nX.Commits]:"commits",[t.nX.Packages]:"registrypackages",[t.nX.Marketplace]:"marketplace",[t.nX.Topics]:"topics",[t.nX.Users]:"users",[t.nX.Orgs]:"users",[t.nX.Wikis]:"wikis",[t.nX.CodeLegacy]:"codelegacy"})[e]||""}function C(e){return({[t.nX.Unknown]:"",[t.nX.Code]:"code",[t.nX.Repositories]:"repositories",[t.nX.PRs]:"pull requests",[t.nX.Issues]:"issues",[t.nX.Discussions]:"discussions",[t.nX.Commits]:"commits",[t.nX.Packages]:"packages",[t.nX.Marketplace]:"the marketplace",[t.nX.Topics]:"topics",[t.nX.Users]:"users",[t.nX.Orgs]:"users",[t.nX.Wikis]:"wikis",[t.nX.CodeLegacy]:"code"})[e]||""}function R(e){return({"":t.nX.Unknown,code:t.nX.Code,repositories:t.nX.Repositories,pullrequests:t.nX.PRs,issues:t.nX.Issues,discussions:t.nX.Discussions,commits:t.nX.Commits,registrypackages:t.nX.Packages,marketplace:t.nX.Marketplace,topics:t.nX.Topics,users:t.nX.Users,orgs:t.nX.Orgs,wikis:t.nX.Wikis,codelegacy:t.nX.CodeLegacy})[e]||t.nX.Unknown}}}]);
//# sourceMappingURL=app_components_search_parsing_parsing_ts-ddb9a5abe80d.js.map