# Unicode::Confusable [![[version]](https://badge.fury.io/rb/unicode-confusable.svg)](https://badge.fury.io/rb/unicode-confusable)  [![[travis]](https://travis-ci.org/janlelis/unicode-confusable.png)](https://travis-ci.org/janlelis/unicode-confusable)

Compares two strings if they are visually confusable as described in [UnicodeÂ® Technical Standard #39](https://www.unicode.org/reports/tr39/#Confusable_Detection): Both strings get transformed into a skeleton format before comparing them. The skeleton is generated by normalizing the string ([NFD](http://unicode.org/reports/tr15/#Norm_Forms)), replacing [confusable characters](https://unicode.org/Public/security/12.1.0/confusables.txt), and normalizing the string again.

Unicode version: **13.0.0** (March 2020)

Supported Rubies: **2.7**, **2.6**, **2.5**, **2.4**

Old Rubies which might still work: **2.3**, **2.2**

## Usage

### Confusable?

```ruby
require "unicode/confusable"

Unicode::Confusable.confusable? "a", "b" # => false
Unicode::Confusable.confusable? "C", "Ğ¡" # => true
Unicode::Confusable.confusable? "â„œğ˜‚á–¯Ê", "Ruby" # => true
Unicode::Confusable.confusable? "Michael", "Michae1" # => true
Unicode::Confusable.confusable? "â‡", "?" # => false
Unicode::Confusable.confusable? "â‡", "??" # => true
```

### Skeleton

```ruby
Unicode::Confusable.skeleton "â„œğ˜‚á–¯Ê" # => "Ruby"
```

**Please note:** The skeleton is an intermediate representation, not meant for any other use than testing confusability, [according to the standard](https://www.unicode.org/reports/tr39/#Confusable_Detection).

### List

List all confusables of a specific character:

```ruby
Unicode::Confusable.list("o", false)
# => ["à°‚", "à²‚", "à´‚", "à¶‚", "à¥¦", "à©¦", "à«¦", "à¯¦", "à±¦", "à³¦", "àµ¦", "à¹", "à»", "á€", "Ù¥", "Ûµ", "ï½", "â„´", "ğ¨", "ğ‘œ", "ğ’", "ğ“¸", "ğ”¬", "ğ• ", "ğ–”", "ğ—ˆ", "ğ—¼", "ğ˜°", "ğ™¤", "ğš˜", "á´", "á´‘", "ê¬½", "Î¿", "ğ›", "ğœŠ", "ğ„", "ğ¾", "ğ¸", "Ïƒ", "ğ›”", "ğœ", "ğˆ", "ğ‚", "ğ¼", "â²Ÿ", "Ğ¾", "áƒ¿", "Ö…", "×¡", "Ù‡", "ğ¸¤", "ğ¹¤", "ğº„", "ï»«", "ï»¬", "ï»ª", "ï»©", "Ú¾", "ï®¬", "ï®­", "ï®«", "ï®ª", "Û", "ï®¨", "ï®©", "ï®§", "ï®¦", "Û•", "à´ ", "á€", "ğ“ª", "ğ‘£ˆ", "ğ‘£—", "ğ¬"]
```

If you omit the second parameter, it will also show confusables, where the given character is just a part of:

```ruby
Unicode::Confusable.list("o")
# => ["â’ª", "êœµ", "â„…", "á´”", "ê­", "ê­‚", "ï·²", "â„–", "à°‚", "à²‚", "à´‚", "à¶‚", "à¥¦", "à©¦", "à«¦", "à¯¦", "à±¦", "à³¦", "àµ¦", "à¹", "à»", "á€", "Ù¥", "Ûµ", "ï½", "â„´", "ğ¨", "ğ‘œ", "ğ’", "ğ“¸", "ğ”¬", "ğ• ", "ğ–”", "ğ—ˆ", "ğ—¼", "ğ˜°", "ğ™¤", "ğš˜", "á´", "á´‘", "ê¬½", "Î¿", "ğ›", "ğœŠ", "ğ„", "ğ¾", "ğ¸", "Ïƒ", "ğ›”", "ğœ", "ğˆ", "ğ‚", "ğ¼", "â²Ÿ", "Ğ¾", "áƒ¿", "Ö…", "×¡", "Ù‡", "ğ¸¤", "ğ¹¤", "ğº„", "ï»«", "ï»¬", "ï»ª", "ï»©", "Ú¾", "ï®¬", "ï®­", "ï®«", "ï®ª", "Û", "ï®¨", "ï®©", "ï®§", "ï®¦", "Û•", "à´ ", "á€", "ğ“ª", "ğ‘£ˆ", "ğ‘£—", "ğ¬", "Û¿", "Ã¸", "ê¬¾", "Éµ", "ê‹", "Ó©", "Ñ³", "ê®", "ê®»", "ê­´", "ï³™", "Æ¡", "Å“", "É¶", "âˆ", "ê", "êš™", "ï³—", "ï±‘", "ï³˜", "ï±’", "ï¶“", "ï¶”", "ï±“", "ï±”", "àµŸ", "á€", "ê­£", "ï² ", "ï³¢", "ï²¥", "ï³¤", "ï·»", "ï´±", "ï³¨", "ï´²", "ï³ª", "ï·º", "ï··", "ï³", "ï³–", "ï³¯", "ï³", "ï³±", "ï³¦", "ï²›", "ï³ ", "ï¯­", "ï¯¬"]
```

## No Advanced Detection

TR 39 also describes mechanisms for a more exact recognition of confusables, also within the same string:

- Single-script confusable
- Mixed-script confusable
- Whole-script confusable

This is currently **not** supported by this gem.

See [unicode-x](https://github.com/janlelis/unicode-x) for more Unicode related micro libraries.

## MIT License

- Copyright (C) 2016-2020 Jan Lelis <https://janlelis.com>. Released under the MIT license.
- Unicode data: https://www.unicode.org/copyright.html#Exhibit1
