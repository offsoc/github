"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["delete-configuration-dialog"],{21233:(e,t,r)=>{var a=r(72245),i=r(9449),o=r(75177),s=r(73729),n=r(69909),l=r(86519),c=r(55847),d=r(55293),u=r(59857),h=r(94977),m=r(87330),p=r(30729),f=r(89169);let g=e=>(0,i.jsx)(h.A,{"aria-label":e.ariaLabel,direction:"sw",noDelay:!0,children:(0,i.jsx)(m.K,{unsafeDisableTooltip:!0,icon:e.defaultIcon,variant:"invisible","aria-label":e.ariaLabel,onClick:()=>{e.toggleAction()},disabled:e.readOnly})}),_=e=>(0,i.jsxs)(o.A,{sx:{display:"flex",flexGrow:0,flexDirection:"row"},children:[(0,i.jsx)(p.A,{icon:e.is_fixed?u.ShieldCheckIcon:u.ShieldIcon,sx:{color:e.is_fixed?"done.fg":"success.fg"}}),(0,i.jsxs)(o.A,{sx:{flexGrow:2,flexDirection:"column",ml:1,mb:1,mr:1,mt:0},children:[(0,i.jsxs)(s.A,{as:"h5",sx:{fontSize:"14px"},children:[e.category||"API Upload"," ",e.showTool&&`(${e.tool_name})`]}),(0,i.jsxs)(n.A,{as:"p",sx:{color:"fg.subtle"},children:["Last updated ",(0,i.jsx)(f.A,{datetime:e.created_at,tense:"past"})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(g,{defaultIcon:u.TrashIcon,ariaLabel:"Delete configuration",toggleAction:e.toggleAction,readOnly:e.readOnly})})]});try{g.displayName||(g.displayName="DeleteConfigurationButton")}catch{}try{_.displayName||(_.displayName="DeleteConfigurationListItem")}catch{}let y=({instances:e,readOnlyUser:t,changeOutdated:r})=>{let a=new Set(e.map(e=>e.tool_name)).size>1,l=e.filter(e=>!e.is_outdated).map(e=>(0,i.jsx)(_,{is_fixed:e.is_fixed,is_outdated:e.is_outdated,category:e.category,created_at:e.created_at,tool_name:e.tool_name,readOnly:t,toggleAction:r(e.category),showTool:a},e.category));return 0===l.length?(0,i.jsx)(o.A,{className:"Overlay-body",sx:{pt:3,maxHeight:"25vh"},children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(s.A,{sx:{fontSize:16,fontWeight:600},as:"h4",children:"All configurations deleted"}),(0,i.jsx)(n.A,{sx:{color:"fg.muted"},children:"Deleting all configurations will close this alert as fixed."})]})}):(0,i.jsx)(o.A,{className:"Overlay-body",sx:{pt:3,maxHeight:"25vh"},children:l})},x=e=>{let t=e.read_only_user,[r,a]=(0,d.useState)(e.instances),s=async()=>{let t=r.filter((t,r)=>t.is_outdated!==e.instances[r].is_outdated).filter(e=>e.is_outdated).map(t=>({branch_name:e.name,category:t.category,tool_name:t.tool_name}));await fetch(e.form_submit_path,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Scoped-CSRF-Token":e.csrf,"X-Requested-With":"XMLHttpRequest","GitHub-Verified-Fetch":"true"},body:JSON.stringify({mark_as_outdated:t})}),window.location.reload()};return(0,d.useEffect)(()=>{let t=document.getElementById(e.dialogId);if(t&&t.parentElement){let r=new MutationObserver(()=>{a(e.instances)});return r.observe(t.parentElement,{attributes:!0}),()=>{r.disconnect()}}},[e.dialogId,e.instances]),(0,i.jsxs)("div",{children:[(0,i.jsx)(y,{instances:r,changeOutdated:e=>()=>{a(r.map(t=>(t.category===e&&(t={...t,is_outdated:!t.is_outdated}),t)))},readOnlyUser:t}),(0,i.jsxs)(o.A,{className:"Overlay-footer Overlay-footer--divided",sx:{p:3,display:"flex",alignItems:"flex-end",gap:"var(--stack-gap-condensed, 8px)",flexWrap:"nowrap"},children:[(0,i.jsx)(o.A,{sx:{flexGrow:1},children:r.filter((t,r)=>t.is_outdated!==e.instances[r].is_outdated).length>0&&(0,i.jsxs)(n.A,{as:"p",sx:{color:"fg.subtle"},children:[(0,i.jsx)(l.A,{href:e.docs_link,inline:!0,children:"Deleting a configuration"}),"\xa0may have an impact on the status of other alerts on the same branch."]})}),(0,i.jsx)(c.Q,{"data-close-dialog-id":e.dialogId,sx:{mr:1},children:"Cancel"}),(0,i.jsx)(c.Q,{variant:"primary",onClick:s,disabled:t,children:"Save changes"})]})]})};try{y.displayName||(y.displayName="DisplayConfigurationsListOrEmptyState")}catch{}try{x.displayName||(x.displayName="DeleteConfigurationDialog")}catch{}(0,a.k)("delete-configuration-dialog",{Component:x})},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new a),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let a=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>o,QJ:()=>s,w8:()=>i});var a=r(55293);function i(e){return((0,a.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function o(e){let t=(0,a.useRef)(e.__wrapperElement.anchor||null),[r,i]=(0,a.useState)(!1),o=(0,a.useCallback)(()=>{i(!r)},[r,i]);return(0,a.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),s(e,o),{ref:t,open:r,setOpen:i}}function s(e,t){let r=(0,a.useRef)(e.__wrapperElement.anchor);(0,a.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let a=new(r(92536)).R;var i=r(9449),o=r(39595),s=r(24508),n=r(23235);let l=class ReactPartialElement extends s.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,a.getRegistration(t)),o=this.closest("react-partial-anchor");return(0,i.jsx)(n.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:o})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){a.register(e,t)}l=function(e,t,r,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}([o.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>n});let{getItem:a,setItem:i,removeItem:o}=(0,r(74572).A)("localStorage"),s="REACT_PROFILING_ENABLED",n={enable:()=>i(s,"true"),disable:()=>o(s),isEnabled:()=>!!a(s)}},23235:(e,t,r)=>{r.d(t,{c:()=>p});var a=r(9449),i=r(55293),o=r(36165),s=r(45588),n=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,o]=(0,i.useState)({location:t.location});return(0,c.m)(()=>t.listen(o),[t]),(0,a.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),h=r(51261),m=r(75014);function p({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:p}){let f=i.useRef(),g=globalThis.window;f.current||(f.current=g?(0,h.z)({window:g}):(0,s.sC)({initialEntries:[{pathname:"/"}]}));let _=f.current,y=(0,m.w8)(p);return(0,a.jsx)(o.U,{appName:e,wasServerRendered:l,children:(0,a.jsx)(n.Q,{history:_,routes:[],children:(0,a.jsxs)(d,{history:_,children:[(0,a.jsx)(r,{...t.props,...y}),(0,a.jsx)(u.h,{ssrError:c})]})})})}try{p.displayName||(p.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var a=r(9449),i=r(39595),o=r(34613),s=r(55293),n=r(23581),l=r(79461),c=r(51528);function d(e,t,r,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:o.createRoot,hydrateRoot:o.hydrateRoot};n.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,i=await this.getReactNode(t),l=(0,a.jsx)(s.StrictMode,{children:i});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87358,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:a,lineno:i,colno:o}=e,s=`${t} at ${r} (${a}:${i}:${o})`;return t=" ",s}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([i.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([i.aC],ReactBaseElement.prototype,"ssrError",void 0),d([i.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_primer_react_lib-esm_Button_IconButton_js-node_modules_primer_react_lib--19ef36","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(21233)),e.O()}]);
//# sourceMappingURL=delete-configuration-dialog-c6f18a92dfab.js.map