"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["audit-log"],{13937:(e,t,n)=>{let o;n.d(t,{Ax:()=>d,JW:()=>u,ZV:()=>a});let ErrorWithResponse=class ErrorWithResponse extends Error{constructor(e,t){super(e),this.response=t}};function r(){let e,t;return[new Promise(function(n,o){e=n,t=o}),e,t]}let s=[],i=[];function a(e){s.push(e)}function d(e){i.push(e)}function u(e,t){o||(o=new Map,"undefined"!=typeof document&&document.addEventListener("submit",l));let n=o.get(e)||[];o.set(e,[...n,t])}function l(e){if(!(e.target instanceof HTMLFormElement)||e.defaultPrevented)return;let t=e.target,n=function(e){let t=[];for(let n of o.keys())if(e.matches(n)){let e=o.get(n)||[];t.push(...e)}return t}(t);if(0===n.length)return;let a=function(e){let t={method:e.method||"GET",url:e.action,headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),body:null};if("GET"===t.method.toUpperCase()){let n=function(e){let t=new URLSearchParams;for(let[n,o]of[...new FormData(e).entries()])t.append(n,o.toString());return t.toString()}(e);n&&(t.url+=(~t.url.indexOf("?")?"&":"?")+n)}else t.body=new FormData(e);return t}(t),[d,u,l]=r();e.preventDefault(),c(n,t,a,d).then(async e=>{if(e){for(let e of i)await e(t);h(a).then(u,l).catch(()=>{}).then(()=>{for(let e of s)e(t)})}else t.submit()},e=>{t.submit(),setTimeout(()=>{throw e})})}async function c(e,t,n,o){let s=!1;for(let i of e){let[e,a]=r(),d=()=>(s=!0,a(),o),u={text:d,json:()=>(n.headers.set("Accept","application/json"),d()),html:()=>(n.headers.set("Accept","text/html"),d())};await Promise.race([e,i(t,u,n)])}return s}async function h(e){let t=await window.fetch(e.url,{method:e.method,body:null!==e.body?e.body:void 0,headers:e.headers,credentials:"same-origin"}),n={url:t.url,status:t.status,statusText:t.statusText,headers:t.headers,text:"",get json(){let e=JSON.parse(this.text);return delete this.json,this.json=e,this.json},get html(){return delete this.html,this.html=function(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}(document,this.text),this.html}},o=await t.text();if(n.text=o,t.ok)return n;throw new ErrorWithResponse("request failed",n)}},25812:(e,t,n)=>{var o=n(39595);n(93707);var r=n(13937),s=n(57765);function i(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}let a=class AuditLogExportFlashesElement extends HTMLElement{closeError(){this.row.hidden=!0,this.warning.hidden=!0}closeNotice(){this.row.hidden=!0,this.notice&&(this.notice.hidden=!0)}};async function d(e){let t=new Request(e);t.headers.append("X-Requested-With","XMLHttpRequest");let n=await fetch(t);(await n.json()).truncated&&(document.getElementById("truncate-warning").hidden=!1)}async function u(e,t,n,o){let r;let i=document.querySelector(e),a=document.querySelector(t),u=document.querySelector(".js-flash-row"),l=document.querySelector(".js-error-flash-message"),c=document.querySelector(".js-notice-flash-message"),h=document.getElementById("truncate-warning");function m(e){a.hidden=e,a.open=!1,i.hidden=!e}m(!0),null!=h&&(h.hidden=!0);try{r=await n.json()}catch(e){m(!1),429===e.response.status?(u.hidden=!1,l.hidden=!1,c.hidden=!0):(0,s.n)();return}let f=r.json;try{u.hidden=!1,c.hidden=!1,l.hidden=!0,await function e(t,n){return new Promise((o,r)=>{setTimeout(async()=>{let s=new Request(t);s.headers.append("X-Requested-With","XMLHttpRequest");let i=await fetch(s);200===i.status?o(i):202===i.status?o(e(t,n)):r(i)},n)})}(f.status_url,o)}catch(e){m(!1),(0,s.n)();return}if(f.verify_url)try{await d(f.verify_url)}catch(e){m(!1),(0,s.n)();return}m(!1),window.location=f.export_url}i([o.aC],a.prototype,"row",void 0),i([o.aC],a.prototype,"notice",void 0),i([o.aC],a.prototype,"warning",void 0),a=i([o.p_],a),(0,r.JW)(".js-audit-log-export-form",async function(e,t){await u(".js-audit-log-exporting",".js-audit-log-export-menu",t,2e3)}),(0,r.JW)(".js-audit-log-git-event-export-form",async function(e,t){await u(".js-audit-log-git-event-exporting",".js-audit-log-git-event-export-menu",t,1e4)})},57765:(e,t,n)=>{n.d(t,{a:()=>s,n:()=>r});var o=n(97797);function r(){let e=document.getElementById("ajax-error-message");e&&(e.hidden=!1)}function s(){let e=document.getElementById("ajax-error-message");e&&(e.hidden=!0)}(0,o.on)("deprecatedAjaxError","[data-remote]",function(e){let{error:t,text:n}=e.detail;e.currentTarget===e.target&&"abort"!==t&&"canceled"!==t&&(/<html/.test(n)?(r(),e.stopImmediatePropagation()):setTimeout(function(){e.defaultPrevented||r()},0))}),(0,o.on)("deprecatedAjaxSend","[data-remote]",function(){s()}),(0,o.on)("click",".js-ajax-error-dismiss",function(){s()})}},e=>{var t=t=>e(e.s=t);e.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_lit-html_lit-html_js","vendors-node_modules_primer_behaviors_dist_esm_dimensions_js-node_modules_delegated-events_di-94a48b","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-b430370","app_assets_modules_github_filter-input_ts","app_assets_modules_github_audit-log_audit-log-search-input_ts"],()=>t(25812)),e.O()}]);
//# sourceMappingURL=audit-log-6bceab231450.js.map