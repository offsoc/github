{"version":3,"file":"chunk-app_components_memex_project_list_memex-project-picker-interstitial-element_ts-xxxxxxxxxxxx.js","mappings":"4mBAOO,gDAAMA,8CAA8CC,YAOzDC,KAAKC,CAAY,CAAE,CACjBA,EAAMC,cAAc,GACpBD,EAAME,eAAe,GAErB,IAAMC,EAAS,IAAI,CAACC,UAAU,GAC9B,GAAI,CAACD,EAAQ,OAEb,IAAME,EAAQ,IAAI,CAACC,SAAS,CAACH,GAC7B,GAAI,CAACE,EAAO,OAEZ,IAAME,EAAOF,EAAMG,YAAY,CAAC,qBAC1BC,EAAQJ,EAAMG,YAAY,CAAC,sBACjC,GAAI,CAACD,GAAQ,CAACE,EAAO,OAKrB,IAAI,CAACC,iBAAiB,CAACP,EAAQI,GAE/B,IAAII,EAAU,KACVC,EAAS,EAETP,CAAAA,EAAMQ,OAAO,EACfF,EAAU,IAAI,CAACG,WAAW,CAC1BF,EAAS,IAAI,CAACE,WAAW,CAACN,YAAY,CAAC,gBAAkB,YAEzDG,EAAU,IAAI,CAACI,aAAa,CAC5BH,EAAS,IAAI,CAACG,aAAa,CAACP,YAAY,CAAC,gBAAkB,WAG7D,IAAI,CAACQ,SAAS,CAACC,eAAe,CAAK,IAAIC,EAAAA,EAAgBA,CAACP,EAAS,CAAC,EAAGQ,EAAAA,EAAkCA,GAEvG,IAAI,CAACC,YAAY,CAACC,WAAW,CAAGhB,EAAMQ,OAAO,CAAG,2BAA6B,8BAC7E,IAAI,CAACO,YAAY,CAACE,SAAS,CAAG,CAAC,QAAQ,EAAEV,EAAO,CAAC,CAE7C,IAAI,CAACW,MAAM,YAAYC,kBACzB,IAAI,CAACD,MAAM,CAACE,SAAS,GACZ,IAAI,CAACF,MAAM,EACpB,IAAI,CAACA,MAAM,CAACxB,IAAI,EAEpB,CAEA2B,SAAU,CACR,IAAMvB,EAAS,IAAI,CAACC,UAAU,GAC9B,GAAI,CAACD,EAAQ,OACb,IAAME,EAAQ,IAAI,CAACC,SAAS,CAACH,GAC7B,GAAI,CAACE,EAAO,OAEZ,IAAMsB,EAAStB,EAAMG,YAAY,CAAC,uBAC5BC,EAAQJ,EAAMG,YAAY,CAAC,sBACjC,GAAI,CAACmB,GAAU,CAAClB,EAAO,OAEvB,IAAMmB,EAAQzB,EAAO0B,IAAI,EAAEC,cAAgC,CAAC,IAAI,EAAErB,EAAM,CAAC,EAAEkB,EAAO,CAAC,EAC9EC,IAELA,EAAMG,WAAW,CAAGH,SAAAA,EAAMG,WAAW,CAAc,QAAU,OAC7D5B,EAAO6B,kBAAkB,GACzB7B,EAAO8B,eAAe,CAAChB,eAAe,GAIjCd,EAAO+B,IAAI,EAAE,IAAI,CAACxB,iBAAiB,CAACP,GAC3C,CAEQO,kBACNP,EAA4E,IAAI,CAChFgC,EAAQ,EAAE,CACV,CACI,IAAahC,CAAAA,EAAS,IAAI,CAACC,UAAU,EAAC,KAE1CD,EAAOiC,WAAW,CAACD,KAAK,CAAGA,EAC3BhC,EAAOiC,WAAW,CAACC,aAAa,CAAC,IAAIC,MAAM,QAAS,CAACC,QAAS,EAAI,IACpE,CAEQnC,YAAgF,CACtF,IAAMoC,EAAOC,SAASC,cAAc,CAAC,iCACrC,EAGEF,EAAKV,aAAa,CAA4B,yBAC9CU,EAAKV,aAAa,CAAiC,8BAJnC,IAMpB,CAEQxB,UAAUH,EAA4E,IAAI,CAAE,CAClG,GAAI,GAAaA,CAAAA,EAAS,IAAI,CAACC,UAAU,EAAC,EAC1C,OAAO,EAAQ6B,eAAe,CAACU,iBAAiB,EAAyB,IAC3E,CACF,E,GA9FGC,EAAAA,EAAMA,C,CADI/C,sCAAAA,SAAAA,CAAAA,SAAAA,KAAAA,G,GAEV+C,EAAAA,EAAMA,C,CAFI/C,sCAAAA,SAAAA,CAAAA,cAAAA,KAAAA,G,GAGV+C,EAAAA,EAAMA,C,CAHI/C,sCAAAA,SAAAA,CAAAA,gBAAAA,KAAAA,G,GAIV+C,EAAAA,EAAMA,C,CAJI/C,sCAAAA,SAAAA,CAAAA,YAAAA,KAAAA,G,GAKV+C,EAAAA,EAAMA,C,CALI/C,sCAAAA,SAAAA,CAAAA,eAAAA,KAAAA,GAAAA,sCAAAA,EAAAA,CADZgD,EAAAA,EAAUA,C,CACEhD,sC,kBCPN,SAAUiD,EAAMC,CAAI,EACvB,IAAIZ,EAAQ,GACRa,EAAa,EACbd,EAAO,GACX,IAAK,IAAIe,EAAI,EAAGA,EAAIF,EAAKG,MAAM,CAAED,GAAK,EAC9BF,MAAAA,CAAI,CAACE,EAAE,EAAYF,MAAAA,CAAI,CAACE,EAAI,EAAE,EAAYF,OAAAA,CAAI,CAACE,EAAI,EAAE,EAAcf,EAQlD,MAAZa,CAAI,CAACE,EAAE,EAAYF,MAAAA,CAAI,CAACE,EAAI,EAAE,EAAYF,OAAAA,CAAI,CAACE,EAAI,EAAE,EAAaf,IACvEA,EAAO,GACP,KAAM,CAAEiB,KAAM,OAAQC,MAAOJ,EAAYK,IAAKJ,EAAI,EAAGd,MAAOA,EAAMmB,KAAK,CAAC,GAAGC,IAAI,EAAG,EAClFpB,EAAQ,GACRc,GAAK,EACLD,EAAaC,IAZbf,EAAO,GACHC,GACA,MAAM,CAAEgB,KAAM,SAAUC,MAAOJ,EAAYK,IAAKJ,EAAGd,MAAAA,CAAM,GAC7DA,EAAQ,KACRa,EAAaC,EACbA,GAAK,GASTd,GAASY,CAAI,CAACE,EAAE,EAAI,GAEpBd,GACA,MAAM,CAAEgB,KAAM,SAAUC,MAAOJ,EAAYK,IAAKN,EAAKG,MAAM,CAAEf,MAAAA,CAAM,EAC3E,C,0CCxBA,IAaIqB,EAASC,ECATC,ECAAC,EAAY,EFbZC,EAAkE,SAAUC,CAAQ,CAAEC,CAAU,CAAE3B,CAAK,EACvG,GAAI,CAAC2B,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAGxB,OADAC,EAAWE,GAAG,CAACH,EAAU1B,GAClBA,CACX,EACI8B,EAAkE,SAAUJ,CAAQ,CAAEC,CAAU,EAChG,GAAI,CAACA,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAExB,OAAOC,EAAWI,GAAG,CAACL,EAC1B,EAEO,gCAAMM,sBACTC,YAAYC,CAAM,CAAEC,CAAU,CAAE,CAC5B,IAAI,CAACA,UAAU,CAAGA,EAClBd,EAAQQ,GAAG,CAAC,IAAI,CAAE,KAAK,GACvBP,EAAOO,GAAG,CAAC,IAAI,CAAE,IACjBJ,EAAuB,IAAI,CAAEJ,EAASa,GACtCJ,EAAuB,IAAI,CAAET,GAASe,YAAY,CAAC,GACvD,CACA,IAAIC,eAAgB,CAChB,OAAOP,EAAuB,IAAI,CAAET,GAASiB,IAAI,CAAClE,IAAI,CAE1D,IAAImE,oBAAqB,CACrB,OAAOT,EAAuB,IAAI,CAAET,GAASiB,IAAI,CAACE,YAAY,CAElE,IAAIxC,OAAQ,CACR,OAAO8B,EAAuB,IAAI,CAAER,EACxC,CACA,IAAItB,MAAMA,CAAK,CAAE,CACbyB,EAAuB,IAAI,CAAEH,EAAQtB,GAAS,IAC9C8B,EAAuB,IAAI,CAAET,GAASe,YAAY,CAACpC,EACvD,CACA,IAAIyC,SAAU,CACV,OAAOX,EAAuB,IAAI,CAAET,GAASoB,OAAO,CAExD,IAAIC,cAAe,CACf,OAAOZ,EAAuB,IAAI,CAAET,GAASqB,YAAY,CAE7D,IAAIA,aAAa1C,CAAK,CAAE,CACpB8B,EAAuB,IAAI,CAAET,GAASqB,YAAY,CAAG1C,CACzD,CACJ,CACAqB,CAAAA,EAAU,IAAIsB,QAAWrB,EAAS,IAAIqB,QAC/B,+BAAMC,qBACTX,YAAYQ,CAAO,CAAEH,CAAI,CAAE,CACvB,IAAI,CAACG,OAAO,CAAGA,EACf,IAAI,CAACH,IAAI,CAAGA,EACZ,IAAI,CAACO,QAAQ,CAAG,EAAE,CAEtB,IAAIH,cAAe,CACf,OAAO,IAAI,CAACD,OAAO,CAACK,cAAc,CAAC,IAAI,CAACR,IAAI,CAACE,YAAY,CAAE,IAAI,CAACF,IAAI,CAAClE,IAAI,CAC7E,CACA,IAAIsE,aAAa1C,CAAK,CAAE,CACpB,GAAI,QAAI,CAAC6C,QAAQ,CAAC9B,MAAM,CACpB,MAAM,IAAIgC,aAAa,0BAA2B,oBAGtD,KAAI,CAACF,QAAQ,CAAC,EAAE,CAAC7C,KAAK,CAAGA,EAAQ,GAAK,IAC1C,CACAgD,OAAOC,CAAI,CAAE,CACT,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACD,EACvB,CACAb,aAAae,CAAS,CAAE,CACpB,GAAI,QAAI,CAACN,QAAQ,CAAC9B,MAAM,EAAUoC,OAAAA,EAC9B,IAAI,CAACV,OAAO,CAACW,iBAAiB,CAAC,IAAI,CAACd,IAAI,CAACE,YAAY,CAAE,IAAI,CAACF,IAAI,CAAClE,IAAI,MAEpE,CACD,IAAMiF,EAAM,IAAI,CAACR,QAAQ,CAACS,GAAG,CAACC,GAAM,iBAAOA,EAAiBA,EAAIA,EAAEvD,KAAK,EAAGwD,IAAI,CAAC,IAC/E,IAAI,CAACf,OAAO,CAACgB,cAAc,CAAC,IAAI,CAACnB,IAAI,CAACE,YAAY,CAAE,IAAI,CAACF,IAAI,CAAClE,IAAI,CAAEiF,EACxE,CACJ,CACJ,EC1EA,IAAI,EAAkE,SAAU3B,CAAQ,CAAEC,CAAU,CAAE3B,CAAK,EACvG,GAAI,CAAC2B,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAGxB,OADAC,EAAWE,GAAG,CAACH,EAAU1B,GAClBA,CACX,EACI,EAAkE,SAAU0B,CAAQ,CAAEC,CAAU,EAChG,GAAI,CAACA,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAExB,OAAOC,EAAWI,GAAG,CAACL,EAC1B,EAEO,2BAAMgC,iBACTzB,YAAY0B,CAAI,CAAExB,CAAU,CAAE,CAC1B,IAAI,CAACA,UAAU,CAAGA,EAClBZ,EAAOM,GAAG,CAAC,IAAI,CAAE,KAAK,GACtB,EAAuB,IAAI,CAAEN,EAAQ,CAACoC,EAAK,EAC3CA,EAAKzE,WAAW,CAAG,EACvB,CACA,IAAIc,OAAQ,CACR,OAAO,EAAuB,IAAI,CAAEuB,GAAQ+B,GAAG,CAACK,GAAQA,EAAKzE,WAAW,EAAEsE,IAAI,CAAC,GACnF,CACA,IAAIxD,MAAM4D,CAAM,CAAE,CACd,IAAI,CAACC,OAAO,CAACD,EACjB,CACA,IAAIE,iBAAkB,CAClB,OAAO,EAAuB,IAAI,CAAEvC,EAAO,CAAC,EAAE,CAACuC,eAAe,CAElE,IAAIC,aAAc,CACd,OAAO,EAAuB,IAAI,CAAExC,EAAO,CAAC,EAAuB,IAAI,CAAEA,GAAQR,MAAM,CAAG,EAAE,CAACgD,WAAW,CAE5GF,QAAQ,GAAGG,CAAK,CAAE,CACd,IAAMC,EAAQD,EAAMV,GAAG,CAACK,GACpB,UAAI,OAAOA,EACA,IAAIO,KAAKP,GACbA,GAKX,IAAK,IAAMV,KAHNgB,EAAMlD,MAAM,EACbkD,EAAMf,IAAI,CAAC,IAAIgB,KAAK,KACxB,EAAuB,IAAI,CAAE3C,EAAO,CAAC,EAAE,CAAC4C,MAAM,IAAIF,GAC/B,EAAuB,IAAI,CAAE1C,IAC5C0B,EAAKmB,MAAM,GACf,EAAuB,IAAI,CAAE7C,EAAQ0C,EACzC,CACJ,EE7CO,SAASI,EAAgBC,CAAW,EACvC,MAAO,CACHC,eAAeC,CAAQ,CAAEP,CAAK,CAAEQ,CAAM,EAClC,IAAI,CAACC,eAAe,CAACF,EAAUP,EAAOQ,EAC1C,EACAC,gBAAgBC,CAAC,CAAEV,CAAK,CAAEQ,CAAM,EAC5B,IAAIG,EACJ,GAAI,iBAAOH,GAAwBA,EAEnC,KAAK,IAAMxB,KAAQgB,EACf,GAAIhB,EAAKd,UAAU,IAAIsC,EAAQ,CAC3B,IAAMzE,EAAQ,OAAC4E,CAAAA,EAAKH,CAAM,CAACxB,EAAKd,UAAU,CAAC,GAAcyC,KAAY,IAAZA,EAAgBA,EAAK,GAC9EN,EAAYrB,EAAMjD,EACtB,CACJ,CACJ,CACJ,CACJ,CACO,SAAS6E,EAAwB5B,CAAI,CAAEjD,CAAK,EAC/CiD,EAAKjD,KAAK,CAAG8E,OAAO9E,EACxB,CF0BAuB,EAAS,IAAIoB,QEhBN,IAAMoC,EAAmBV,EAAgBQ,GACnC7F,EAAqCqF,EAAgB,CAACpB,EAAMjD,KACrEgF,CAXG,SAAiC/B,CAAI,CAAEjD,CAAK,QAC/C,WAAI,OAAOA,GACPiD,aAAgBjB,uBAChB,kBAAOiB,EAAKR,OAAO,CAACQ,EAAKZ,aAAa,CAAC,GACvCY,EAAKP,YAAY,CAAG1C,EACb,GAGf,GAG4BiD,EAAMjD,IAAU6E,EAAwB5B,EAAMjD,EAC1E,GDlCA,IAAI,EAAkE,SAAU0B,CAAQ,CAAEC,CAAU,CAAE3B,CAAK,EACvG,GAAI,CAAC2B,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAGxB,OADAC,EAAWE,GAAG,CAACH,EAAU1B,GAClBA,CACX,EACI,EAAkE,SAAU0B,CAAQ,CAAEC,CAAU,EAChG,GAAI,CAACA,EAAWC,GAAG,CAACF,GAChB,MAAM,UAAc,kDAExB,OAAOC,EAAWI,GAAG,CAACL,EAC1B,EAuCO,2BAAM3C,yBAAyBkG,iBAClChD,YAAYiD,CAAQ,CAAET,CAAM,CAAEU,EAAYJ,CAAgB,CAAE,CACxD,IAAIH,EAAIQ,EACR,KAAK,GACL5D,EAAWK,GAAG,CAAC,IAAI,CAAE,KAAK,GAC1B,EAAOA,GAAG,CAAC,IAAI,CAAE,KAAK,GAIlBwD,OAAOC,cAAc,CAAC,IAAI,GAAKvG,iBAAiBwG,SAAS,GACzDF,OAAOG,cAAc,CAAC,IAAI,CAAEzG,iBAAiBwG,SAAS,EAE1D,IAAI,CAACE,WAAW,CAACP,EAAS1G,OAAO,CAACkH,SAAS,CAAC,KAC5C,EAAuB,IAAI,CAAE,EAAQC,MAAMC,IAAI,CAACC,UA9CjCC,CAAE,MAEjBnC,EADJ,IAAMoC,EAASD,EAAGE,aAAa,CAACC,gBAAgB,CAACH,EAAII,WAAWC,SAAS,CAAGD,WAAWE,YAAY,CAAE,KAAM,IAE3G,KAAQzC,EAAOoC,EAAOM,QAAQ,IAC1B,GAAI1C,aAAgB2C,SAAW3C,EAAK4C,aAAa,GAC7C,IAAK,IAAIzF,EAAI,EAAGA,EAAI6C,EAAK6C,UAAU,CAACzF,MAAM,CAAED,GAAK,EAAG,CAChD,IAAMwB,EAAOqB,EAAK6C,UAAU,CAACC,IAAI,CAAC3F,GAClC,GAAIwB,GAAQA,EAAKtC,KAAK,CAAC0G,QAAQ,CAAC,MAAO,CACnC,IAAMC,EAAc,IAAI/D,qBAAqBe,EAAMrB,GACnD,IAAK,IAAMsE,KAASjG,EAAM2B,EAAKtC,KAAK,EAChC,GAAI4G,WAAAA,EAAM5F,IAAI,CACV2F,EAAY3D,MAAM,CAAC4D,EAAM5G,KAAK,MAE7B,CACD,IAAMiD,EAAO,IAAIjB,sBAAsB2E,EAAaC,EAAM5G,KAAK,EAC/D2G,EAAY3D,MAAM,CAACC,GACnB,MAAMA,CACV,CAER,CACJ,MAEC,GAAIU,aAAgBO,MAAQP,EAAKzE,WAAW,EAAIyE,EAAKzE,WAAW,CAACwH,QAAQ,CAAC,MAC3E,IAAK,IAAME,KAASjG,EAAMgD,EAAKzE,WAAW,EAAG,CACrC0H,EAAM1F,GAAG,CAAGyC,EAAKzE,WAAW,CAAC6B,MAAM,EACnC4C,EAAKkD,SAAS,CAACD,EAAM1F,GAAG,EACT,SAAf0F,EAAM5F,IAAI,EACV,OAAM,IAAI0C,iBAAiBC,EAAMiD,EAAM5G,KAAK,GAChD,KACJ,CAGZ,EAcqE,IAAI,IACjE,EAAuB,IAAI,CAAEwB,EAAY2D,GACzC,OAACC,CAAAA,EAAK,CAACR,EAAK,EAAuB,IAAI,CAAEpD,EAAU,EAAG+C,cAAc,GAAca,KAAY,IAAZA,GAAyBA,EAAG0B,IAAI,CAAClC,EAAI,IAAI,CAAE,EAAuB,IAAI,CAAE,GAASH,EACvK,CACAsC,OAAOtC,CAAM,CAAE,CACX,EAAuB,IAAI,CAAEjD,GAAYkD,eAAe,CAAC,IAAI,CAAE,EAAuB,IAAI,CAAE,GAASD,EACzG,CACJ,CACAjD,CAAAA,EAAa,IAAImB,QAAW,EAAS,IAAIA,O","sources":["app/components/memex/project_list/memex-project-picker-interstitial-element.ts","node_modules/@github/template-parts/lib/template-string-parser.js","node_modules/@github/template-parts/lib/attribute-template-part.js","node_modules/@github/template-parts/lib/node-template-part.js","node_modules/@github/template-parts/lib/template-instance.js","node_modules/@github/template-parts/lib/processors.js"],"sourcesContent":["import {TemplateInstance, propertyIdentityOrBooleanAttribute} from '@github/template-parts'\nimport {controller, target} from '@github/catalyst'\nimport type {MemexProjectPickerElement} from '../memex-project-picker-element'\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\nimport type {MemexProjectPickerPanelElement} from '../memex-project-picker-panel-element'\n\n@controller\nexport class MemexProjectPickerInterstitialElement extends HTMLElement {\n  @target dialog: ModalDialogElement | HTMLDialogElement\n  @target linkContent: HTMLTemplateElement\n  @target unlinkContent: HTMLTemplateElement\n  @target container: HTMLDivElement\n  @target submitButton: HTMLButtonElement\n\n  show(event: Event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const picker = this.findPicker()\n    if (!picker) return\n\n    const input = this.findInput(picker)\n    if (!input) return\n\n    const name = input.getAttribute('data-project-name')\n    const owner = input.getAttribute('data-project-owner')\n    if (!name || !owner) return\n\n    // When the interstitial is triggered - set the filter input to the selected value.\n    // This can come from the action menu, or from the picker directly.\n    // We need this for maintaining the state between the picker and action menu.\n    this.updateFilterInput(picker, name)\n\n    let content = null\n    let scheme = ''\n\n    if (input.checked) {\n      content = this.linkContent\n      scheme = this.linkContent.getAttribute('data-scheme') || 'default'\n    } else {\n      content = this.unlinkContent\n      scheme = this.unlinkContent.getAttribute('data-scheme') || 'default'\n    }\n\n    this.container.replaceChildren(...[new TemplateInstance(content, {}, propertyIdentityOrBooleanAttribute)])\n\n    this.submitButton.textContent = input.checked ? 'Add team as collaborator' : 'Remove team as collaborator'\n    this.submitButton.className = `btn btn-${scheme}`\n\n    if (this.dialog instanceof HTMLDialogElement) {\n      this.dialog.showModal()\n    } else if (this.dialog) {\n      this.dialog.show()\n    }\n  }\n\n  closing() {\n    const picker = this.findPicker()\n    if (!picker) return\n    const input = this.findInput(picker)\n    if (!input) return\n\n    const number = input.getAttribute('data-project-number')\n    const owner = input.getAttribute('data-project-owner')\n    if (!number || !owner) return\n\n    const label = picker.list?.querySelector<HTMLLabelElement>(`#pp-${owner}-${number}`)\n    if (!label) return\n\n    label.ariaChecked = label.ariaChecked === 'true' ? 'false' : 'true'\n    picker.resetSelectionDiff()\n    picker.submitContainer.replaceChildren()\n\n    // If the picker isn't open - then we've come from the action menu\n    // So let's clear the filter input so the picker is back to it's base state\n    if (!picker.open) this.updateFilterInput(picker)\n  }\n\n  private updateFilterInput(\n    picker: MemexProjectPickerElement | MemexProjectPickerPanelElement | null = null,\n    value = '',\n  ) {\n    if (!picker && !(picker = this.findPicker())) return\n\n    picker.filterInput.value = value\n    picker.filterInput.dispatchEvent(new Event('input', {bubbles: true}))\n  }\n\n  private findPicker(): MemexProjectPickerElement | MemexProjectPickerPanelElement | null {\n    const form = document.getElementById('js-project-picker-form')\n    if (!form) return null\n\n    return (\n      form.querySelector<MemexProjectPickerElement>('memex-project-picker') ||\n      form.querySelector<MemexProjectPickerPanelElement>('memex-project-picker-panel')\n    )\n  }\n\n  private findInput(picker: MemexProjectPickerElement | MemexProjectPickerPanelElement | null = null) {\n    if (!picker && !(picker = this.findPicker())) return\n    return (picker.submitContainer.firstElementChild as HTMLInputElement) || null\n  }\n}\n","export function* parse(text) {\n    let value = '';\n    let tokenStart = 0;\n    let open = false;\n    for (let i = 0; i < text.length; i += 1) {\n        if (text[i] === '{' && text[i + 1] === '{' && text[i - 1] !== '\\\\' && !open) {\n            open = true;\n            if (value)\n                yield { type: 'string', start: tokenStart, end: i, value };\n            value = '{{';\n            tokenStart = i;\n            i += 2;\n        }\n        else if (text[i] === '}' && text[i + 1] === '}' && text[i - 1] !== '\\\\' && open) {\n            open = false;\n            yield { type: 'part', start: tokenStart, end: i + 2, value: value.slice(2).trim() };\n            value = '';\n            i += 2;\n            tokenStart = i;\n        }\n        value += text[i] || '';\n    }\n    if (value)\n        yield { type: 'string', start: tokenStart, end: text.length, value };\n}\n//# sourceMappingURL=template-string-parser.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar _setter, _value;\nexport class AttributeTemplatePart {\n    constructor(setter, expression) {\n        this.expression = expression;\n        _setter.set(this, void 0);\n        _value.set(this, '');\n        __classPrivateFieldSet(this, _setter, setter);\n        __classPrivateFieldGet(this, _setter).updateParent('');\n    }\n    get attributeName() {\n        return __classPrivateFieldGet(this, _setter).attr.name;\n    }\n    get attributeNamespace() {\n        return __classPrivateFieldGet(this, _setter).attr.namespaceURI;\n    }\n    get value() {\n        return __classPrivateFieldGet(this, _value);\n    }\n    set value(value) {\n        __classPrivateFieldSet(this, _value, value || '');\n        __classPrivateFieldGet(this, _setter).updateParent(value);\n    }\n    get element() {\n        return __classPrivateFieldGet(this, _setter).element;\n    }\n    get booleanValue() {\n        return __classPrivateFieldGet(this, _setter).booleanValue;\n    }\n    set booleanValue(value) {\n        __classPrivateFieldGet(this, _setter).booleanValue = value;\n    }\n}\n_setter = new WeakMap(), _value = new WeakMap();\nexport class AttributeValueSetter {\n    constructor(element, attr) {\n        this.element = element;\n        this.attr = attr;\n        this.partList = [];\n    }\n    get booleanValue() {\n        return this.element.hasAttributeNS(this.attr.namespaceURI, this.attr.name);\n    }\n    set booleanValue(value) {\n        if (this.partList.length !== 1) {\n            throw new DOMException('Operation not supported', 'NotSupportedError');\n        }\n        ;\n        this.partList[0].value = value ? '' : null;\n    }\n    append(part) {\n        this.partList.push(part);\n    }\n    updateParent(partValue) {\n        if (this.partList.length === 1 && partValue === null) {\n            this.element.removeAttributeNS(this.attr.namespaceURI, this.attr.name);\n        }\n        else {\n            const str = this.partList.map(s => (typeof s === 'string' ? s : s.value)).join('');\n            this.element.setAttributeNS(this.attr.namespaceURI, this.attr.name, str);\n        }\n    }\n}\n//# sourceMappingURL=attribute-template-part.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar _parts;\nexport class NodeTemplatePart {\n    constructor(node, expression) {\n        this.expression = expression;\n        _parts.set(this, void 0);\n        __classPrivateFieldSet(this, _parts, [node]);\n        node.textContent = '';\n    }\n    get value() {\n        return __classPrivateFieldGet(this, _parts).map(node => node.textContent).join('');\n    }\n    set value(string) {\n        this.replace(string);\n    }\n    get previousSibling() {\n        return __classPrivateFieldGet(this, _parts)[0].previousSibling;\n    }\n    get nextSibling() {\n        return __classPrivateFieldGet(this, _parts)[__classPrivateFieldGet(this, _parts).length - 1].nextSibling;\n    }\n    replace(...nodes) {\n        const parts = nodes.map(node => {\n            if (typeof node === 'string')\n                return new Text(node);\n            return node;\n        });\n        if (!parts.length)\n            parts.push(new Text(''));\n        __classPrivateFieldGet(this, _parts)[0].before(...parts);\n        for (const part of __classPrivateFieldGet(this, _parts))\n            part.remove();\n        __classPrivateFieldSet(this, _parts, parts);\n    }\n}\n_parts = new WeakMap();\n//# sourceMappingURL=node-template-part.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar _processor, _parts;\nimport { parse } from './template-string-parser.js';\nimport { AttributeValueSetter, AttributeTemplatePart } from './attribute-template-part.js';\nimport { NodeTemplatePart } from './node-template-part.js';\nimport { propertyIdentity } from './processors.js';\nfunction* collectParts(el) {\n    const walker = el.ownerDocument.createTreeWalker(el, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, null, false);\n    let node;\n    while ((node = walker.nextNode())) {\n        if (node instanceof Element && node.hasAttributes()) {\n            for (let i = 0; i < node.attributes.length; i += 1) {\n                const attr = node.attributes.item(i);\n                if (attr && attr.value.includes('{{')) {\n                    const valueSetter = new AttributeValueSetter(node, attr);\n                    for (const token of parse(attr.value)) {\n                        if (token.type === 'string') {\n                            valueSetter.append(token.value);\n                        }\n                        else {\n                            const part = new AttributeTemplatePart(valueSetter, token.value);\n                            valueSetter.append(part);\n                            yield part;\n                        }\n                    }\n                }\n            }\n        }\n        else if (node instanceof Text && node.textContent && node.textContent.includes('{{')) {\n            for (const token of parse(node.textContent)) {\n                if (token.end < node.textContent.length)\n                    node.splitText(token.end);\n                if (token.type === 'part')\n                    yield new NodeTemplatePart(node, token.value);\n                break;\n            }\n        }\n    }\n}\nexport class TemplateInstance extends DocumentFragment {\n    constructor(template, params, processor = propertyIdentity) {\n        var _a, _b;\n        super();\n        _processor.set(this, void 0);\n        _parts.set(this, void 0);\n        // This is to fix an inconsistency in Safari which prevents us from\n        // correctly sub-classing DocumentFragment.\n        // https://bugs.webkit.org/show_bug.cgi?id=195556\n        if (Object.getPrototypeOf(this !== TemplateInstance.prototype)) {\n            Object.setPrototypeOf(this, TemplateInstance.prototype);\n        }\n        this.appendChild(template.content.cloneNode(true));\n        __classPrivateFieldSet(this, _parts, Array.from(collectParts(this)));\n        __classPrivateFieldSet(this, _processor, processor);\n        (_b = (_a = __classPrivateFieldGet(this, _processor)).createCallback) === null || _b === void 0 ? void 0 : _b.call(_a, this, __classPrivateFieldGet(this, _parts), params);\n    }\n    update(params) {\n        __classPrivateFieldGet(this, _processor).processCallback(this, __classPrivateFieldGet(this, _parts), params);\n    }\n}\n_processor = new WeakMap(), _parts = new WeakMap();\n//# sourceMappingURL=template-instance.js.map","import { AttributeTemplatePart } from './attribute-template-part.js';\nexport function createProcessor(processPart) {\n    return {\n        createCallback(instance, parts, params) {\n            this.processCallback(instance, parts, params);\n        },\n        processCallback(_, parts, params) {\n            var _a;\n            if (typeof params !== 'object' || !params)\n                return;\n            for (const part of parts) {\n                if (part.expression in params) {\n                    const value = (_a = params[part.expression]) !== null && _a !== void 0 ? _a : '';\n                    processPart(part, value);\n                }\n            }\n        }\n    };\n}\nexport function processPropertyIdentity(part, value) {\n    part.value = String(value);\n}\nexport function processBooleanAttribute(part, value) {\n    if (typeof value === 'boolean' &&\n        part instanceof AttributeTemplatePart &&\n        typeof part.element[part.attributeName] === 'boolean') {\n        part.booleanValue = value;\n        return true;\n    }\n    return false;\n}\nexport const propertyIdentity = createProcessor(processPropertyIdentity);\nexport const propertyIdentityOrBooleanAttribute = createProcessor((part, value) => {\n    processBooleanAttribute(part, value) || processPropertyIdentity(part, value);\n});\n//# sourceMappingURL=processors.js.map"],"names":["MemexProjectPickerInterstitialElement","HTMLElement","show","event","preventDefault","stopPropagation","picker","findPicker","input","findInput","name","getAttribute","owner","updateFilterInput","content","scheme","checked","linkContent","unlinkContent","container","replaceChildren","TemplateInstance","propertyIdentityOrBooleanAttribute","submitButton","textContent","className","dialog","HTMLDialogElement","showModal","closing","number","label","list","querySelector","ariaChecked","resetSelectionDiff","submitContainer","open","value","filterInput","dispatchEvent","Event","bubbles","form","document","getElementById","firstElementChild","target","controller","parse","text","tokenStart","i","length","type","start","end","slice","trim","_setter","_value","_parts","_processor","__classPrivateFieldSet","receiver","privateMap","has","set","__classPrivateFieldGet","get","AttributeTemplatePart","constructor","setter","expression","updateParent","attributeName","attr","attributeNamespace","namespaceURI","element","booleanValue","WeakMap","AttributeValueSetter","partList","hasAttributeNS","DOMException","append","part","push","partValue","removeAttributeNS","str","map","s","join","setAttributeNS","NodeTemplatePart","node","string","replace","previousSibling","nextSibling","nodes","parts","Text","before","remove","createProcessor","processPart","createCallback","instance","params","processCallback","_","_a","processPropertyIdentity","String","propertyIdentity","processBooleanAttribute","DocumentFragment","template","processor","_b","Object","getPrototypeOf","prototype","setPrototypeOf","appendChild","cloneNode","Array","from","collectParts","el","walker","ownerDocument","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","nextNode","Element","hasAttributes","attributes","item","includes","valueSetter","token","splitText","call","update"],"sourceRoot":""}