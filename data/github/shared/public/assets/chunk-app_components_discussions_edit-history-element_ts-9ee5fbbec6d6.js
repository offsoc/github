"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_discussions_edit-history-element_ts"],{22749:(t,e,a)=>{a.r(e);var i=a(39595),r=a(79049);function n(t,e,a,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(n<3?r(o):n>3?r(e,a,o):r(e,a))||o);return n>3&&o&&Object.defineProperty(e,a,o),o}let o=class EditHistoryElement extends HTMLElement{displayDiffDialog(t){let e=t.currentTarget,a=e.getAttribute("data-dialog-id"),i=e.getAttribute("data-editor"),n=e.getAttribute("data-src"),o=new r.i4(this.diffDialogTemplate,{dialogId:a,editor:i,src:n});this.appendChild(o),this.showDialog(a)}displayDeletedDialog(t){let e=t.currentTarget,a=e.getAttribute("data-dialog-id"),i=e.getAttribute("data-editor"),n=e.getAttribute("data-actor"),o=e.getAttribute("data-datetime"),s=new r.i4(this.deletedDialogTemplate,{dialogId:a,editor:i,actor:n,datetime:o});this.appendChild(s),this.showDialog(a)}removeDialog(t){let e=t.currentTarget.closest("[data-modal-dialog-overlay]");e&&(e.remove(),this.menuTrigger.tabIndex=0,this.menuTrigger.focus())}showDialog(t){let e=this.querySelector(`#${t}`);e instanceof HTMLDialogElement?e.showModal():e&&e.show()}};n([i.aC],o.prototype,"menuTrigger",void 0),n([i.aC],o.prototype,"diffDialogTemplate",void 0),n([i.aC],o.prototype,"deletedDialogTemplate",void 0),o=n([i.p_],o)},79049:(t,e,a)=>{function*i(t){let e="",a=0,i=!1;for(let r=0;r<t.length;r+=1)"{"!==t[r]||"{"!==t[r+1]||"\\"===t[r-1]||i?"}"===t[r]&&"}"===t[r+1]&&"\\"!==t[r-1]&&i&&(i=!1,yield{type:"part",start:a,end:r+2,value:e.slice(2).trim()},e="",r+=2,a=r):(i=!0,e&&(yield{type:"string",start:a,end:r,value:e}),e="{{",a=r,r+=2),e+=t[r]||"";e&&(yield{type:"string",start:a,end:t.length,value:e})}a.d(e,{i4:()=>TemplateInstance,xr:()=>m});var r,n,o,s,l,p=function(t,e,a){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,a),a},u=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};let AttributeTemplatePart=class AttributeTemplatePart{constructor(t,e){this.expression=e,r.set(this,void 0),n.set(this,""),p(this,r,t),u(this,r).updateParent("")}get attributeName(){return u(this,r).attr.name}get attributeNamespace(){return u(this,r).attr.namespaceURI}get value(){return u(this,n)}set value(t){p(this,n,t||""),u(this,r).updateParent(t)}get element(){return u(this,r).element}get booleanValue(){return u(this,r).booleanValue}set booleanValue(t){u(this,r).booleanValue=t}};r=new WeakMap,n=new WeakMap;let AttributeValueSetter=class AttributeValueSetter{constructor(t,e){this.element=t,this.attr=e,this.partList=[]}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(t){if(1!==this.partList.length)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=t?"":null}append(t){this.partList.push(t)}updateParent(t){if(1===this.partList.length&&null===t)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{let t=this.partList.map(t=>"string"==typeof t?t:t.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,t)}}};var h=function(t,e,a){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,a),a},c=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};let NodeTemplatePart=class NodeTemplatePart{constructor(t,e){this.expression=e,o.set(this,void 0),h(this,o,[t]),t.textContent=""}get value(){return c(this,o).map(t=>t.textContent).join("")}set value(t){this.replace(t)}get previousSibling(){return c(this,o)[0].previousSibling}get nextSibling(){return c(this,o)[c(this,o).length-1].nextSibling}replace(...t){let e=t.map(t=>"string"==typeof t?new Text(t):t);for(let t of(e.length||e.push(new Text("")),c(this,o)[0].before(...e),c(this,o)))t.remove();h(this,o,e)}};function d(t){return{createCallback(t,e,a){this.processCallback(t,e,a)},processCallback(e,a,i){var r;if("object"==typeof i&&i){for(let e of a)if(e.expression in i){let a=null!==(r=i[e.expression])&&void 0!==r?r:"";t(e,a)}}}}}function f(t,e){t.value=String(e)}o=new WeakMap;let g=d(f),m=d((t,e)=>{(function(t,e){return"boolean"==typeof e&&t instanceof AttributeTemplatePart&&"boolean"==typeof t.element[t.attributeName]&&(t.booleanValue=e,!0)})(t,e)||f(t,e)});var b=function(t,e,a){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,a),a},v=function(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)};let TemplateInstance=class TemplateInstance extends DocumentFragment{constructor(t,e,a=g){var r,n;super(),s.set(this,void 0),l.set(this,void 0),Object.getPrototypeOf(this!==TemplateInstance.prototype)&&Object.setPrototypeOf(this,TemplateInstance.prototype),this.appendChild(t.content.cloneNode(!0)),b(this,l,Array.from(function*(t){let e;let a=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);for(;e=a.nextNode();)if(e instanceof Element&&e.hasAttributes())for(let t=0;t<e.attributes.length;t+=1){let a=e.attributes.item(t);if(a&&a.value.includes("{{")){let t=new AttributeValueSetter(e,a);for(let e of i(a.value))if("string"===e.type)t.append(e.value);else{let a=new AttributeTemplatePart(t,e.value);t.append(a),yield a}}}else if(e instanceof Text&&e.textContent&&e.textContent.includes("{{"))for(let t of i(e.textContent)){t.end<e.textContent.length&&e.splitText(t.end),"part"===t.type&&(yield new NodeTemplatePart(e,t.value));break}}(this))),b(this,s,a),null===(n=(r=v(this,s)).createCallback)||void 0===n||n.call(r,this,v(this,l),e)}update(t){v(this,s).processCallback(this,v(this,l),t)}};s=new WeakMap,l=new WeakMap}}]);
//# sourceMappingURL=app_components_discussions_edit-history-element_ts-2ba1deab6faf.js.map