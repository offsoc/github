"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_graphs_marketplace-insights-graph-element_ts"],{82887:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},5122:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(82887);function a(t){let e=t,n=t;function a(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){let l=r+a>>>1;0>n(t[l],e)?r=l+1:a=l}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=(e,n)=>(0,r.A)(t(e),n)),{left:a,center:function(t,n,r,l){null==r&&(r=0),null==l&&(l=t.length);let o=a(t,n,r,l-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){let l=r+a>>>1;n(t[l],e)>0?a=l:r=l+1}return r}}}},61573:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){let n,r;if(void 0===e)for(let e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let a=-1;for(let l of t)null!=(l=e(l,++a,t))&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}return[n,r]}},44317:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){let n;if(void 0===e)for(let e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let a of t)null!=(a=e(a,++r,t))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}},83836:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(82562);function a(t){return Intl.NumberFormat((0,r.mf)(),{maximumFractionDigits:2,maximumSignificantDigits:4,notation:"compact"}).format(t)}},87031:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(10541),a=n(50183);function l(){let t=function(){let t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.boxSizing="border-box",t}(),e=null;function n(){return[0,0]}function l(){return" "}function o(n){e=(function(t){let e=t.node();return"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement})(n).createSVGPoint(),document.body.appendChild(t)}return o.show=function(r,a){let i=l(a),s=n(a),u=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;t.innerHTML=i,t.style.opacity="1",t.style.pointerEvents="all";let d=function(t,e,n){let r=function(t,e){let n=t;for(;void 0===n.getScreenCTM&&"undefined"===n.parentNode;)n=n.parentNode;let r={},a=n.getScreenCTM(),l=n.getBBox(),o=l.width,i=l.height,s=l.x,u=l.y;return e.x=s,e.y=u,r.nw=e.matrixTransform(a),e.x+=o,r.ne=e.matrixTransform(a),e.y+=i,r.se=e.matrixTransform(a),e.x-=o,r.sw=e.matrixTransform(a),e.y-=i/2,r.w=e.matrixTransform(a),e.x+=o,r.e=e.matrixTransform(a),e.x-=o/2,e.y-=i/2,r.n=e.matrixTransform(a),e.y+=i,r.s=e.matrixTransform(a),r}(n,t);return{top:r.n.y-e.offsetHeight,left:r.n.x-e.offsetWidth/2}}(e,t,r.target);return t.classList.toggle("n",!0),t.style.top=`${d.top+s[0]+u}px`,t.style.left=`${d.left+s[1]+c}px`,o},o.hide=function(){return t.style.opacity="0",t.style.pointerEvents="none",o},o.attr=function(e,n){return r.Ay.prototype.attr.apply((0,a.A)(t),[e,n]),o},o.offset=function(t){return n=function(){return t},o},o.html=function(t){return l=t,o},o}},28111:(t,e,n)=>{n.r(e);var r=n(39595),a=n(87031),l=n(27193),o=n(14398),i=n(5225),s=n(57327),u=n(70170),c=n(22211);function d(t,e,n,r){var a,l=arguments.length,o=l<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(o=(l<3?a(o):l>3?a(e,n,o):a(e,n))||o);return l>3&&o&&Object.defineProperty(e,n,o),o}let f=(0,i.A)(p);async function p(t){let e=await (0,l.Ee)(t,{headers:{accept:"application/json"}});return await e.json()}let m=class MarketplaceInsightsGraphElement extends HTMLElement{async connectedCallback(){let t;let e=this.graph,n=e.getAttribute("data-url");if(n){for(let t of e.querySelectorAll("svg.viz"))t.remove();e.classList.add("is-graph-loading"),e.classList.remove("is-graph-load-error","is-graph-empty");try{t=await f(n),e.classList.remove("is-graph-loading"),null!=t&&t.unusable?e.classList.add("is-graph-without-usable-data"):null!=t&&0===t.length||null!=t&&null!=t.summary&&0===t.summary.total||null!=t[0]&&null!=t[0].weeks&&0===t[0].weeks.length?e.classList.add("is-graph-empty"):g(this.container,t)}catch(t){throw e.classList.remove("is-graph-loading"),e.classList.add("is-graph-load-error"),t}this.throttledRender=(0,u.n)(()=>g(this.container,t),100),window.addEventListener("resize",this.throttledRender)}}disconnectedCallback(){window.removeEventListener("resize",this.throttledRender)}};function g(t,e){let n=(0,c.aL)("%A, %B %-d, %Y"),r=(0,o.GP)(","),l=(0,a.A)().attr("class","svg-tip web-views comparison").offset([-10,0]).html(t=>{let e=1===t.total?"view":"views",a=1===t.unique?"unique visitor":"unique visitors";return`<span class='title'>${n(t.date)}</span> <ul class='web-views'> <li class='totals metric-0'><strong>${r(t.total)}</strong> ${e}</li> <li class='uniques metric-1'><strong>${r(t.unique)}</strong> ${a}</li> </ul>`}),i={width:t.clientWidth,height:t.clientHeight,margin:{top:20,right:40,bottom:30,left:30}};(0,s.E)(t,e,l,i)}d([r.aC],m.prototype,"graph",void 0),d([r.aC],m.prototype,"container",void 0),m=d([r.p_],m)},57327:(t,e,n)=>{n.d(e,{E:()=>S});var r=n(82887),a=n(5122),l=n(61573),o=n(21671),i=n(44317);function s(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}var u=n(51889),c=n(50183),d=n(70240),f=n(30540),p=n(95389),m=n(59312),g=n(60804),h=n(34552),y=n(7146),v=n(86844),A=n(81695),b=n(22211),x=n(96020),w=n(99065),T=n(4049),k=n(58679),L=n(14398),M=n(83836);function C(t){return(0,L.GP)(",")(t)}function S(t,e,n,L){let S=L.margin,E=L.width-S.left-S.right,q=L.height-S.top-S.bottom;if(!e||null!=e.error)return;let $=(function(){return w.C.apply((0,x.B)(f.$Z,f.lk,p.Mb,m.R6,g.Hl,h.dA,y.pz,v.vD,A.R,b.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)})().range([0,E]),R=(0,T.A)().range([q,0]),N=(0,T.A)().range([q,0]),j=(0,b.aL)("%m/%d"),D=(0,u.l7)($).ticks(e.counts.length).tickSize(q+5).tickPadding(10).tickFormat(j),F=(0,u.V4)(R).ticks(3).tickFormat(M.A),G=(0,k.A)().x(t=>$(t.key)).y(t=>R(t.value)),P=(0,c.A)(t).select(".js-graph").append("svg").attr("viewBox",`0 0 ${E+S.left+S.right} ${q+S.top+S.bottom}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").attr("data-hpc","").append("g").attr("transform",`translate(${S.left},${S.top})`).call(n),z=e.counts;for(let t of z)t.date=new Date(1e3*t.bucket);z.sort((t,e)=>(0,r.A)(t.date,e.date));let B=(0,a.A)(t=>t.date).left,_=z.map(t=>({key:t.date,value:t.total})),H=z.map(t=>({key:t.date,value:t.unique})),V=[_,H],[Y,O]=(0,l.A)(z,t=>t.date.getTime()),U=(0,l.A)(_,t=>t.value)[1],I=(0,o.A)(H,t=>t.value)+function(t,e,n){if(a=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||a<2)return(0,i.A)(t);if(e>=1)return(0,o.A)(t);var a,l=(a-1)*e,u=Math.floor(l),c=(0,o.A)((function t(e,n,a=0,l=e.length-1,o=r.A){for(;l>a;){if(l-a>600){let r=l-a+1,i=n-a+1,s=Math.log(r),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(r-u)/r)*(i-r/2<0?-1:1),d=Math.max(a,Math.floor(n-i*u/r+c)),f=Math.min(l,Math.floor(n+(r-i)*u/r+c));t(e,n,d,f,o)}let r=e[n],i=a,u=l;for(s(e,a,n),o(e[l],r)>0&&s(e,a,l);i<u;){for(s(e,i,u),++i,--u;0>o(e[i],r);)++i;for(;o(e[u],r)>0;)--u}0===o(e[a],r)?s(e,a,u):s(e,++u,l),u<=n&&(a=u+1),n<=u&&(l=u-1)}return e})(t,u).subarray(0,u+1));return c+((0,i.A)(t.subarray(u+1))-c)*(l-u)}}(H,.5,t=>t.value);$.domain([Y,O]),R.domain([0,U]),N.domain([0,I]);let J=e.summary.total,W=t.querySelector(".js-traffic-total");W&&(W.textContent=C(J));let X=e.summary.unique,Z=t.querySelector(".js-traffic-uniques");Z&&(Z.textContent=C(X)),P.append("g").attr("class","x axis").call(D),P.append("g").attr("class","y axis views").call(F),P.selectAll("path.path").data(V).enter().append("path").attr("class",(t,e)=>`path ${0===e?"total":"unique"}`).attr("d",(t,e)=>0===e?G(t):G.y(t=>N(t.value))(t)),P.selectAll("g.dots").data(V).enter().append("g").attr("class",(t,e)=>0===e?"dots totals":"dots uniques").each(function(t,e){let n=(0,c.A)(this);return 1===e&&(R=N),n.selectAll("circle").data(t=>t).enter().append("circle").attr("cx",t=>$(t.key)).attr("cy",t=>R(t.value)).attr("r",4)}),F=(0,u.eH)(N).ticks(3).tickFormat(M.A),P.append("g").attr("class","y axis unique").attr("transform",`translate(${E}, 0)`).call(F),P.append("rect").attr("class","overlay").attr("width",E).attr("height",q).on("mousemove",function(t){let e;let r=$.invert((0,d.A)(t)[0]),a=B(z,r,1),l=z[a-1],o=z[a];if(l&&o){let t=r-l.date>o.date-r?o:l;return(e=(e=P.selectAll("g.dots circle").filter(e=>e.key===t.date)).nodes()).sort((t,e)=>Number(t.getAttribute("cy"))-Number(e.getAttribute("cy"))),n.show({target:e[0]},t)}}).on("mouseout",function(){setTimeout(n.hide,500)})}},82562:(t,e,n)=>{n.d(e,{US:()=>a,mf:()=>l,mx:()=>r});let r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],l=()=>{try{return Intl.getCanonicalLocales(window.navigator.language)[0]}catch(t){return"en-US"}}},70240:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}}}]);
//# sourceMappingURL=app_assets_modules_github_graphs_marketplace-insights-graph-element_ts-dee9359233fc.js.map