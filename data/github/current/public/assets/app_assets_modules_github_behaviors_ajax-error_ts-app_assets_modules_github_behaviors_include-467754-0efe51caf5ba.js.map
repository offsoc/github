{"version":3,"file":"app_assets_modules_github_behaviors_ajax-error_ts-app_assets_modules_github_behaviors_include-467754-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/ajax-error.ts","app/assets/modules/github/behaviors/enrichable-markdown-render.ts","app/assets/modules/github/behaviors/include-fragment.ts","app/assets/modules/github/behaviors/render-editor.ts","app/assets/modules/github/color-modes.ts","ui/packages/aria-live/aria-live.ts","ui/packages/cookies/cookies.ts","ui/packages/soft-nav/events.ts","ui/packages/soft-nav/state.ts","ui/packages/soft-nav/stats.ts","ui/packages/soft-navigate/soft-navigate.ts"],"sourcesContent":["// Global handler for uncaught AJAX errors.\n//\n// Only enabled by default on new style `data-remote` requests.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nexport function showGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = false\n  }\n}\n\nexport function hideGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = true\n  }\n}\n\non('deprecatedAjaxError', '[data-remote]', function (event) {\n  const detail = (event as CustomEvent).detail\n  const {error, text} = detail\n\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (error === 'abort' || error === 'canceled') {\n    return\n  }\n\n  if (/<html/.test(text)) {\n    showGlobalError()\n    event.stopImmediatePropagation()\n  } else {\n    setTimeout(function () {\n      if (event.defaultPrevented) {\n        return\n      }\n      showGlobalError()\n    }, 0)\n  }\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxSend', '[data-remote]', function () {\n  hideGlobalError()\n})\n\n// \"Dismiss\" button\non('click', '.js-ajax-error-dismiss', function () {\n  hideGlobalError()\n})\n","import {type TemplateResult, html, render} from 'lit-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nimport {getColorMode} from '../color-modes'\n\ninterface Api {\n  /**\n   * Sets the loading state of the js enriched node, true will put it in the loading state, false will remove it\n   */\n  setLoading(state: boolean): void\n  /**\n   * Setting true here will put the rendered node into a error state, composing the optional template argument in the output.\n   *\n   * This method will return true if we did render an error state, false if we did not render an error state — allowing the caller to handle rendering as a fallback.\n   */\n  setError(state: boolean, template?: TemplateResult): boolean\n}\n\nconst nodeHandle = new WeakMap<HTMLElement, Api>()\n\n// Enrichable Markdown Rendering:\n//\n// We use the `markdown-enrichment` to render code blocks in markdown.\n// The CodeRenderService is responsible for rendering the code blocks to html and\n// this code will find those blocks and enrich them with the code rendering service appropriate\n// for the language.\n// If we're enriching a raw code block, we need to hide the original\n// code block once the iframe has rendered successfully\n\n/**\n * A public api to put a js enriched node into the loading state, note @see enrichMarkdownRenderer to have ran ono this node before\n */\nexport function markdownEnrichmentSuccess(where: Element) {\n  const parent = where.closest('.js-render-needs-enrichment') as HTMLElement\n  if (!parent) {\n    return\n  }\n\n  parent.classList.remove('render-error')\n\n  nodeHandle.get(parent)?.setLoading(false)\n}\n\n/**\n * A public api to put a js enriched node into an error state\n */\nexport function showMarkdownRenderError(where: HTMLElement, template: TemplateResult) {\n  const parent = where.closest('.js-render-needs-enrichment') as HTMLElement\n  if (!parent) {\n    return false\n  }\n\n  parent.classList.add('render-error')\n\n  return nodeHandle.get(parent)?.setError(true, template)\n}\n\nfunction makeIframe(\n  baseUrl: string,\n  params: Record<string, string | number | boolean | null>,\n  config: {\n    type: string\n    contentJson: string\n    identifier?: string\n  },\n) {\n  const identifier = config.identifier ?? ''\n  const iframeUrl = new URL(baseUrl, window.location.origin)\n\n  for (const [key, value] of Object.entries(params)) {\n    iframeUrl.searchParams.append(key, `${value}`)\n  }\n\n  iframeUrl.hash = identifier\n\n  return html`\n    <div\n      class=\"render-container color-bg-transparent js-render-target p-0\"\n      data-identity=\"${identifier}\"\n      data-host=\"${iframeUrl.origin}\"\n      data-type=\"${config.type}\"\n    >\n      <iframe\n        title=\"File display\"\n        role=\"presentation\"\n        class=\"render-viewer\"\n        src=\"${String(iframeUrl)}\"\n        name=\"${identifier}\"\n        data-content=\"${config.contentJson}\"\n        sandbox=\"allow-scripts allow-same-origin allow-top-navigation allow-popups\"\n      >\n      </iframe>\n    </div>\n  `\n}\n\nfunction makeEnhancedBlockActions(\n  rawCode: string,\n  onModalOpen: (event: MouseEvent) => void,\n  config: {\n    type: string\n  },\n) {\n  const copyButton = html`<clipboard-copy\n    aria-label=\"Copy ${config.type} code\"\n    .value=${rawCode}\n    class=\"btn my-2 js-clipboard-copy p-0 d-inline-flex tooltipped-no-delay\"\n    role=\"button\"\n    data-copy-feedback=\"Copied!\"\n    data-tooltip-direction=\"s\"\n  >\n    <svg\n      aria-hidden=\"true\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      width=\"16\"\n      class=\"octicon octicon-copy js-clipboard-copy-icon m-2\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\n      ></path>\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\n      ></path>\n    </svg>\n    <svg\n      aria-hidden=\"true\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      width=\"16\"\n      class=\"octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\"\n      ></path>\n    </svg>\n  </clipboard-copy>`\n\n  const modal = html`\n    <details class=\"details-reset details-overlay details-overlay-dark\" style=\"display: contents\">\n      <summary\n        role=\"button\"\n        aria-label=\"Open dialog\"\n        class=\"btn my-2 mr-2 p-0 d-inline-flex\"\n        aria-haspopup=\"dialog\"\n        @click=\"${onModalOpen}\"\n      >\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" class=\"octicon m-2\">\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M3.72 3.72a.75.75 0 011.06 1.06L2.56 7h10.88l-2.22-2.22a.75.75 0 011.06-1.06l3.5 3.5a.75.75 0 010 1.06l-3.5 3.5a.75.75 0 11-1.06-1.06l2.22-2.22H2.56l2.22 2.22a.75.75 0 11-1.06 1.06l-3.5-3.5a.75.75 0 010-1.06l3.5-3.5z\"\n          ></path>\n        </svg>\n      </summary>\n      <details-dialog\n        class=\"Box Box--overlay render-full-screen d-flex flex-column anim-fade-in fast\"\n        aria-label=\"${config.type} rendered container\"\n      >\n        <div>\n          <button\n            aria-label=\"Close dialog\"\n            data-close-dialog=\"\"\n            type=\"button\"\n            data-view-component=\"true\"\n            class=\"Link--muted btn-link position-absolute render-full-screen-close\"\n          >\n            <svg\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              style=\"display:inline-block;vertical-align:text-bottom\"\n              class=\"octicon octicon-x\"\n            >\n              <path\n                fill-rule=\"evenodd\"\n                d=\"M5.72 5.72a.75.75 0 011.06 0L12 10.94l5.22-5.22a.75.75 0 111.06 1.06L13.06 12l5.22 5.22a.75.75 0 11-1.06 1.06L12 13.06l-5.22 5.22a.75.75 0 01-1.06-1.06L10.94 12 5.72 6.78a.75.75 0 010-1.06z\"\n              ></path>\n            </svg>\n          </button>\n          <div class=\"Box-body border-0\" role=\"presentation\"></div>\n        </div>\n      </details-dialog>\n    </details>\n  `\n\n  return html`<div class=\"position-absolute top-0 pr-2 right-0 d-flex flex-justify-end flex-items-center\">\n    ${modal}${copyButton}\n  </div>`\n}\n\nfunction enrichMarkdownRenderer(el: HTMLElement) {\n  const iframeParams = {\n    color_mode: getColorMode(), // TODO: Should viewscreen support color themes?\n  }\n\n  // ==> setup some state\n\n  const type = el.getAttribute('data-type')!\n  const src = el.getAttribute('data-src')!\n  const identifier = el.getAttribute('data-identity')!\n\n  const target = el.getElementsByClassName('js-render-enrichment-target')[0] as HTMLElement\n\n  const loadingHandle = el.getElementsByClassName('js-render-enrichment-loader')[0] as HTMLElement\n\n  // => get the fallback, errors states correctly\n\n  const detailsParent = target.closest('details')\n\n  const fallbackHandle = document.createElement('div')\n  fallbackHandle.classList.add('js-render-enrichment-fallback')\n  el.appendChild(fallbackHandle)\n\n  const fallbackContentNode = target.firstElementChild!\n  fallbackHandle.appendChild(fallbackContentNode)\n\n  const api: Api = {\n    setLoading(state) {\n      loadingHandle.hidden = !state\n    },\n    setError(state, template) {\n      api.setLoading(false) // always remove loading state\n      if (state === false) return false // we did not render an error state\n\n      fallbackContentNode.classList.toggle('render-plaintext-hidden', !state)\n\n      if (template) {\n        render([template, fallbackContentNode], fallbackHandle)\n        return true\n      }\n\n      return false\n    },\n  }\n\n  nodeHandle.set(el, api)\n\n  // ==> real constructor\n\n  const plainText = target.getAttribute('data-plain')\n  const contentJson = target.getAttribute('data-json')\n\n  if (contentJson == null || plainText == null) {\n    api.setError(true, html`<p class=\"flash flash-error\">Unable to render rich display</p>`)\n    throw new Error(`Expected to see input data for type: ${type}`)\n  }\n\n  const iframe = makeIframe(src, iframeParams, {\n    type,\n    identifier,\n    contentJson,\n  })\n\n  const fullScreenIframe = makeIframe(src, iframeParams, {\n    type,\n    identifier: `${identifier}-fullscreen`,\n    contentJson,\n  })\n\n  const buttons = makeEnhancedBlockActions(\n    plainText,\n    () => {\n      // Beware hacks, we need to add the iframe to the nearest box body of the modal\n      render(fullScreenIframe, target.getElementsByClassName('Box-body')[0]!)\n    },\n    {\n      type,\n    },\n  )\n\n  if (detailsParent && !detailsParent.open) {\n    detailsParent.ontoggle = () => {\n      if (detailsParent.open) {\n        render([buttons, iframe], target)\n        detailsParent.ontoggle = null\n      }\n    }\n  } else {\n    render([buttons, iframe], target)\n  }\n}\n\nobserve('.js-render-needs-enrichment', {\n  constructor: HTMLElement,\n  initialize: enrichMarkdownRenderer,\n})\n\n/**\n * Toggling back and forth between the `preview` and `write` tabs produces jank in\n * the form of an occasionally visible fully rendered chart. This is because we leave the\n * chart on the page until a request to regenerate the chart can be made.\n *\n * So, we add an event in `preview.ts` we can hook into,\n * and clear out the previously rendered chart before requesting a new one from viewscreen\n */\non('preview:toggle:off', '.js-previewable-comment-form', function (event) {\n  const target = event.currentTarget\n  const htmlEl = target.querySelector<HTMLElement>('.js-render-needs-enrichment')\n  const enrichTarget = htmlEl?.querySelector('.js-render-enrichment-target')\n\n  if (!enrichTarget) {\n    return\n  }\n\n  enrichTarget.textContent = ''\n})\n\non('preview:rendered', '.js-previewable-comment-form', function (event) {\n  const target = event.currentTarget\n  const htmlEl = target.querySelector<HTMLElement>('.js-render-needs-enrichment')\n  if (htmlEl) {\n    nodeHandle.get(htmlEl)?.setLoading(false)\n  }\n})\n","// Toggle hidden attribute on elements inside <include-fragment> and\n// <poll-include-fragment> elements that have the data-hide-on-error and\n// data-show-on-error attributes on them when error events are fired.\n\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport type {IncludeFragmentElement} from '@github/include-fragment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nobserve('include-fragment, poll-include-fragment', {\n  subscribe: el => compose(fromEvent(el, 'error', onError), fromEvent(el, 'loadstart', onLoad)),\n})\n\non('click', 'include-fragment button[data-retry-button]', ({currentTarget}) => {\n  const includeFragment = currentTarget.closest<IncludeFragmentElement>('include-fragment')!\n\n  // The refetch API was added in v6.1.1 of @github/include-fragment-element:\n  // https://github.com/github/include-fragment-element/releases/tag/v6.1.1\n  includeFragment.refetch()\n})\n\nfunction toggleElements(event: Event, showError: boolean) {\n  const fragment = event.currentTarget\n  if (!(fragment instanceof Element)) return\n\n  for (const el of fragment.querySelectorAll('[data-show-on-error]')) {\n    if (el instanceof HTMLElement) el.hidden = !showError\n  }\n  for (const el of fragment.querySelectorAll('[data-hide-on-error]')) {\n    if (el instanceof HTMLElement) el.hidden = showError\n  }\n}\n\nfunction onLoad(event: Event) {\n  toggleElements(event, false)\n}\n\nfunction onError(event: Event) {\n  toggleElements(event, true)\n}\n\nexport function loadDeferredContentByEvent({currentTarget}: Event) {\n  if (!(currentTarget instanceof Element)) return\n\n  loadDeferredContent(currentTarget)\n}\n\nexport function loadDeferredContent(element: Element) {\n  const details = element.closest<HTMLElement>('details')\n  if (details) {\n    setIncludeFragmentSrc(details)\n  }\n}\n\nfunction setIncludeFragmentSrc(detailsElement: HTMLElement) {\n  const url = detailsElement.getAttribute('data-deferred-details-content-url')\n  if (url) {\n    detailsElement.removeAttribute('data-deferred-details-content-url')\n    const includeFragmentElement = detailsElement.querySelector<IncludeFragmentElement>(\n      'include-fragment, poll-include-fragment',\n    )\n    if (includeFragmentElement) {\n      includeFragmentElement.src = url\n    }\n  }\n}\n","import {type TemplateResult, html, render} from 'lit-html'\nimport {markdownEnrichmentSuccess, showMarkdownRenderError} from './enrichable-markdown-render'\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport visible from '@github-ui/visible'\ninterface RenderTiming {\n  load?: number | null\n  helloTimer?: number | null\n  hello?: number | null\n  loadTimer?: number | null\n  untimed?: boolean\n}\n\nexport function supportsRichExpanding(container: HTMLElement) {\n  return !!container.querySelector('.js-render-target[data-type=\"ipynb\"]')\n}\n\n// These are the mutable state classes. They are to be wiped between transitions.\nconst stateClasses = ['is-render-pending', 'is-render-ready', 'is-render-loading', 'is-render-loaded']\n// During a soft navigation, we need to clear most of the mutable state classes, but preserve `is-render-pending`.\n// We also want to clear out any of the failed state classes, since they prevent the user from viewing content\n// which has otherwise rendered correctly\nconst softNavStateClasses = [\n  'is-render-ready',\n  'is-render-loading',\n  'is-render-loaded',\n  'is-render-failed',\n  'is-render-failed-fatally',\n]\nconst timingData: WeakMap<Element, RenderTiming> = new WeakMap()\nfunction resetTiming(where: Element) {\n  const renderTiming = timingData.get(where)\n  if (renderTiming == null) {\n    return\n  }\n  renderTiming.load = renderTiming.hello = null\n  if (renderTiming.helloTimer) {\n    clearTimeout(renderTiming.helloTimer)\n    renderTiming.helloTimer = null\n  }\n  if (renderTiming.loadTimer) {\n    clearTimeout(renderTiming.loadTimer)\n    renderTiming.loadTimer = null\n  }\n}\n\n// Everything is broken, sink with the ship\nfunction renderFailed(where: Element, msg = '') {\n  where.classList.remove(...stateClasses)\n  where.classList.add('is-render-failed')\n\n  const errElement = renderError(msg)\n\n  // determine if we're rendering a file or a code block\n  if (showMarkdownRenderError(where as HTMLElement, errElement) === false) {\n    fileRenderError(where as HTMLElement, errElement)\n  }\n\n  resetTiming(where)\n}\n\nfunction fileRenderError(parent: HTMLElement, template: TemplateResult) {\n  const child = parent.querySelector('.render-viewer-error')\n  if (child) {\n    child.remove()\n    parent.classList.remove('render-container')\n    render(template, parent)\n  }\n}\n\nfunction renderError(msg: string) {\n  let errMsg = html`<p>Unable to render rich display</p>`\n\n  if (msg !== '') {\n    const msgLines = msg.split('\\n')\n    errMsg = html`<p><b>Unable to render rich display</b></p>\n      <p>${msgLines.map(line => html`${line}<br />`)}</p>`\n  }\n  return html`<div class=\"flash flash-error\">${errMsg}</div>`\n}\n\nfunction timeoutWatchdog(where: Element, checkHello = false) {\n  if (\n    !visible(where as HTMLElement) ||\n    where.classList.contains('is-render-ready') ||\n    where.classList.contains('is-render-failed') ||\n    where.classList.contains('is-render-failed-fatally') ||\n    (checkHello && !timingData.get(where)?.hello)\n  ) {\n    return\n  }\n\n  renderFailed(where)\n}\n\n// Update each container with a potentially\n// changed element every time a refresh or soft nav\n// triggers.\nobserve('.js-render-target', function (el) {\n  const htmlEl = el as HTMLElement\n  htmlEl.classList.remove(...softNavStateClasses)\n  htmlEl.style.height = 'auto'\n\n  if (timingData.get(el)?.load) {\n    return\n  }\n\n  resetTiming(el)\n\n  if (timingData.get(el)) {\n    return\n  }\n\n  timingData.set(el, {\n    load: Date.now(),\n    hello: null,\n    helloTimer: window.setTimeout(timeoutWatchdog, 10_000, el, true),\n    loadTimer: window.setTimeout(timeoutWatchdog, 45_000, el),\n  })\n\n  el.classList.add('is-render-automatic', 'is-render-requested')\n})\n\ninterface RenderMessage {\n  type: string\n  body?: unknown\n}\n\nfunction postAsJson(renderWindow: Window | null | undefined, message: RenderMessage) {\n  if (renderWindow && renderWindow.postMessage) {\n    renderWindow.postMessage(JSON.stringify(message), '*')\n    return true\n  }\n  return false\n}\n\nfunction resolveRenderTargetFromContainer(container: Document | HTMLElement, identity: string) {\n  // We need to find the target element that matches the identity, but we are\n  // avoiding querying using the value within the selector to prevent\n  // potential injection attacks.\n  for (const target of container.querySelectorAll<HTMLElement>('.js-render-target[data-identity][data-host]')) {\n    if (target.getAttribute('data-identity') === identity) {\n      return target\n    }\n  }\n  return null\n}\n\nfunction withRenderWindow(callback: (renderWindow: Window) => boolean) {\n  return (container: HTMLElement) => {\n    const target = container.querySelector('.js-render-target')\n    if (!target) return\n\n    const iframe = container.querySelector('iframe')\n    const renderWindow = iframe?.contentWindow\n    if (!renderWindow) return\n\n    return callback(renderWindow)\n  }\n}\n\nexport function handleMessage(event: MessageEvent) {\n  let result = event.data\n  if (!result) return\n\n  if (typeof result === 'string') {\n    try {\n      result = JSON.parse(result) as unknown\n    } catch {\n      // Ignore parse errors\n      return\n    }\n  }\n\n  // effective way to check for both null and undefined ⤵️\n  // eslint-disable-next-line eqeqeq\n  if (typeof result !== 'object' && result != undefined) return\n\n  if (result.type !== 'render') return\n\n  if (typeof result.identity !== 'string') return\n  const identity = result.identity\n\n  if (typeof result.body !== 'string') return\n  const body = result.body\n\n  const container = resolveRenderTargetFromContainer(document, identity)\n  if (!container) return\n\n  if (event.origin !== container.getAttribute('data-host')) {\n    return\n  }\n\n  const payload = result.payload != null ? result.payload : undefined\n  const iframe = container.querySelector('iframe')\n  const renderWindow = iframe?.contentWindow\n\n  function postData() {\n    // force an undefined value into a string so the call to JSON.parse passes the TS compiler.\n    const data = iframe?.getAttribute('data-content') ?? ''\n\n    let parsed: Record<string, unknown> | null\n\n    try {\n      // Data is generally expected to be a JSON string with a key of `data`,\n      // but we are also seeing values like 'null' getting in here.\n      parsed = JSON.parse(data)?.data\n    } catch {\n      parsed = null\n    }\n\n    if (!parsed) {\n      return\n    }\n\n    const msg = {\n      type: 'render:cmd',\n      body: {\n        cmd: 'code_rendering_service:data:ready',\n        'code_rendering_service:data:ready': {\n          data: parsed,\n          width: container?.getBoundingClientRect().width,\n        },\n      },\n    }\n    postAsJson(renderWindow, msg)\n  }\n\n  switch (body) {\n    case 'hello': {\n      const renderTiming = timingData.get(container) || {\n        untimed: true,\n      }\n\n      renderTiming.hello = Date.now()\n\n      const ackmsg = {\n        type: 'render:cmd',\n        body: {\n          cmd: 'ack',\n          ack: true,\n        },\n      }\n\n      const msg = {\n        type: 'render:cmd',\n        body: {\n          cmd: 'branding',\n          branding: false,\n        },\n      }\n\n      if (!renderWindow) return\n      postAsJson(renderWindow, ackmsg)\n      postAsJson(renderWindow, msg)\n\n      break\n    }\n    case 'error': {\n      renderFailed(container, payload?.error)\n      break\n    }\n    case 'error:fatal': {\n      renderFailed(container, payload?.error)\n      container.classList.add('is-render-failed-fatal')\n      break\n    }\n    case 'error:invalid':\n      renderFailed(container, payload?.error)\n      container.classList.add('is-render-failed-invalid')\n      break\n    case 'loading':\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-loading')\n      break\n    case 'loaded':\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-loaded')\n      break\n    case 'ready':\n      markdownEnrichmentSuccess(container)\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-ready')\n\n      if (payload && typeof payload.height === 'number') {\n        container.style.height = `${payload.height}px`\n\n        // If the URL contains an anchor tag, try not to disrupt the scroll position\n        if (location.hash !== '') {\n          window.dispatchEvent(new HashChangeEvent('hashchange'))\n        }\n      }\n\n      if (payload?.ack === true) {\n        // The iframe has requested an ack once the ready event has been processed.\n        // We need to wait until the container has been drawn on screen before sending\n        // the ack. This is used by the mermaid renderer to ensure the container is\n        // visible on screen at the correct height before rendering the diagram.\n        // See https://github.com/github/viewscreen/issues/471 for more details.\n        window.requestAnimationFrame(() => {\n          setTimeout(() => {\n            postAsJson(renderWindow, {\n              type: 'render:cmd',\n              body: {\n                cmd: 'code_rendering_service:ready:ack',\n                'code_rendering_service:ready:ack': {},\n              },\n            })\n          }, 0)\n        })\n      }\n\n      break\n    case 'resize':\n      if (payload && typeof payload.height === 'number') {\n        container.style.height = `${payload.height}px`\n      }\n\n      break\n    case 'code_rendering_service:container:get_size':\n      postAsJson(renderWindow, {\n        type: 'render:cmd',\n        body: {\n          cmd: 'code_rendering_service:container:size',\n          'code_rendering_service:container:size': {\n            width: container?.getBoundingClientRect().width,\n          },\n        },\n      })\n      break\n    case 'code_rendering_service:markdown:get_data':\n      if (!renderWindow) return\n      postData()\n      break\n    default:\n      break\n  }\n}\n\n// Handle messages coming from the viewer iframe using `postMessage`.\n// We throw away any message that doesn't look like it's coming from the render\n// client.\nwindow.addEventListener('message', handleMessage)\n\nexport const expandAllInContainer = withRenderWindow(renderWindow =>\n  postAsJson(renderWindow, {\n    type: 'render:cmd',\n    body: {\n      cmd: 'code_rendering_service:behaviour:expand_all',\n    },\n  }),\n)\n\nexport const collapseAllInContainer = withRenderWindow(renderWindow =>\n  postAsJson(renderWindow, {\n    type: 'render:cmd',\n    body: {\n      cmd: 'code_rendering_service:behaviour:collapse_all',\n    },\n  }),\n)\n","import {ready} from '@github-ui/document-ready'\nimport {setCookie} from '@github-ui/cookies'\n\nexport type ColorMode = 'light' | 'dark'\nexport type ColorModeWithAuto = ColorMode | 'auto'\n\n/**\n * Set the OS preferred color mode on page load\n */\n;(async () => {\n  await ready\n  setPreferredColorModeCookie()\n\n  // update the cookie when OS preferred color mode changes\n  if (window.matchMedia) {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n\n    if (mediaQuery?.addEventListener) {\n      mediaQuery.addEventListener('change', setPreferredColorModeCookie)\n    } else {\n      mediaQuery.addListener(setPreferredColorModeCookie)\n    }\n  }\n})()\n\nfunction setPreferredColorModeCookie() {\n  setCookie('preferred_color_mode', getPreferredColorMode() as string)\n}\n\nexport function getPreferredColorMode(): ColorMode | undefined {\n  if (prefersColorScheme('dark')) {\n    return 'dark'\n  } else if (prefersColorScheme('light')) {\n    return 'light'\n  }\n\n  return undefined\n}\n\nfunction prefersColorScheme(scheme: ColorMode): boolean {\n  return window.matchMedia && window.matchMedia(`(prefers-color-scheme: ${scheme})`).matches\n}\n\nfunction getColorModeAttribute() {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) return undefined\n  return rootEl.getAttribute('data-color-mode')\n}\n\n/**\n * Set the `data-color-mode` attribute on the html element of the page.\n */\nexport function setClientMode(mode: ColorModeWithAuto) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  rootEl.setAttribute('data-color-mode', mode)\n}\n\nexport function setClientTheme(theme: string, type: ColorMode) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  rootEl.setAttribute(`data-${type}-theme`, theme)\n}\n\n/**\n * Returns the user theme as defined by the `data-light-theme` or\n * `data-dark-theme` attribute.\n */\nexport function getClientTheme(type: ColorMode) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  return rootEl.getAttribute(`data-${type}-theme`)\n}\n\n/**\n * Provides a stable color mode. This does not delineate the theme, but rather the light vs dark modes.\n *\n * If you're after the theme, please use {@link getClientTheme}\n */\nexport function getColorMode(fallback: ColorMode = 'light') {\n  const mode = getColorModeAttribute()\n  return (mode === 'auto' ? getPreferredColorMode() : mode) ?? fallback\n}\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {\n  announce as liveRegionAnnounce,\n  announceFromElement as liveRegionAnnounceFromElement,\n} from '@primer/live-region-element'\n\nexport interface ElementWithAriaNotify extends Element {\n  ariaNotify: (\n    message: string,\n    options?: {interrupt?: 'none' | 'pending' | 'all'; priority?: 'none' | 'important'},\n  ) => void\n}\n\n/**\n * Troubleshooting guide for aria-live regions available on the Hub\n * - https://thehub.github.com/epd/engineering/dev-practicals/frontend/accessibility/readiness-routine/screenreaders/live-regions-and-focus-management-techniques/#why-isnt-my-live-region-working-as-i-expect\n */\n\n// Announce an element's text to the screen reader.\nexport function announceFromElement(el: HTMLElement, options?: {assertive?: boolean; element?: HTMLElement}) {\n  if (isFeatureEnabled('arianotify_comprehensive_migration')) {\n    announce(getTextContent(el), {...options, element: options?.element ?? el})\n  } else if (isFeatureEnabled('primer_live_region_element') && options?.element === undefined) {\n    liveRegionAnnounceFromElement(el, {\n      politeness: options?.assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    announce(getTextContent(el), options)\n  }\n}\n\n// Announce message update to screen reader.\n// Note: Use caution when using this function while a dialog is active.\n// If the message is updated while the dialog is open, the screen reader may not announce the live region.\n// For more information, view the document on dialog and live region support: https://github.com/github/accessibility/blob/main/docs/dialog-live-region-support.md\nexport function announce(message: string, options?: {assertive?: boolean; element?: HTMLElement}) {\n  const {assertive, element} = options ?? {}\n\n  if (isFeatureEnabled('arianotify_comprehensive_migration') && 'ariaNotify' in Element.prototype) {\n    ;((element || document.body) as Element as ElementWithAriaNotify).ariaNotify(message, {\n      interrupt: options?.assertive ? 'all' : 'none',\n    })\n  } else if (isFeatureEnabled('primer_live_region_element') && element === undefined) {\n    liveRegionAnnounce(message, {\n      politeness: assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    setContainerContent(message, assertive, element)\n  }\n}\n\n// Set aria-live container to message.\nfunction setContainerContent(message: string, assertive?: boolean, element?: HTMLElement) {\n  const getQuerySelector = () => {\n    return assertive ? '#js-global-screen-reader-notice-assertive' : '#js-global-screen-reader-notice'\n  }\n  const container = element ?? ssrSafeDocument?.querySelector(getQuerySelector())\n  if (!container) return\n  if (container.textContent === message) {\n    /* This is a hack due to the way the aria live API works.\n    A screen reader will not read a live region again\n    if the text is the same. Adding a space character tells\n    the browser that the live region has updated,\n    which will cause it to read again, but with no audible difference. */\n    container.textContent = `${message}\\u00A0`\n  } else {\n    container.textContent = message\n  }\n}\n\n// Gets the trimmed text content of an element.\nfunction getTextContent(el: HTMLElement): string {\n  // innerText does not contain hidden text\n  /* eslint-disable-next-line github/no-innerText */\n  return (el.getAttribute('aria-label') || el.innerText || '').trim()\n}\n","interface Cookie {\n  key: string\n  value: string\n}\n\n/**\n * Get a cookie by name.\n * @param name\n * @returns a cookie object or undefined if not found.\n */\nexport function getCookie(name: string): Cookie | undefined {\n  return getCookies(name)[0]\n}\n\n/**\n * Get all cookies by name.\n * @param name\n * @returns\n */\nexport function getCookies(name: string): Cookie[] {\n  const cookies = []\n  for (const cookie of readCookies()) {\n    const [key, value] = cookie.trim().split('=')\n    if (name === key && typeof value !== 'undefined') {\n      cookies.push({key, value})\n    }\n  }\n  return cookies\n}\n\nfunction readCookies(): string[] {\n  try {\n    return document.cookie.split(';')\n  } catch {\n    // Cookie access disabled.\n    return []\n  }\n}\n\n/**\n * Set a new cookie with sensible defaults like secure.\n * @param name\n * @param value\n * @param expiration\n * @param strictDomain\n * @param samesite\n */\nexport function setCookie(\n  name: string,\n  value: string,\n  expiration: string | null = null,\n  strictDomain = false,\n  samesite = 'lax',\n) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = expiration ? `; expires=${expiration}` : ''\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=${value}; path=/; domain=${domain}${expire}${secure}; samesite=${samesite}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n\n/**\n * Delete a given cookie with sensible defaults like secure.\n * This sets the expires value to a second ago to delete the cookie.\n * @param name\n * @param strictDomain\n */\nexport function deleteCookie(name: string, strictDomain = false) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const time = new Date().getTime()\n  const expiration = new Date(time - 1).toUTCString()\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = `; expires=${expiration}`\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=''; path=/; domain=${domain}${expire}${secure}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n","import {SOFT_NAV_STATE} from './states'\n\nexport type SoftNavMechanism = 'turbo' | 'react' | 'turbo.frame'\n\nclass SoftNavEvent extends Event {\n  mechanism: SoftNavMechanism\n\n  constructor(mechanism: SoftNavMechanism, type: string) {\n    super(type)\n    this.mechanism = mechanism\n  }\n}\n\nexport class SoftNavStartEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.START)\n  }\n}\n\nexport class SoftNavSuccessEvent extends SoftNavEvent {\n  visitCount: number\n\n  constructor(mechanism: SoftNavMechanism, visitCount: number) {\n    super(mechanism, SOFT_NAV_STATE.SUCCESS)\n    this.visitCount = visitCount\n  }\n}\n\nexport class SoftNavErrorEvent extends SoftNavEvent {\n  error: string\n\n  constructor(mechanism: SoftNavMechanism, error: string) {\n    super(mechanism, SOFT_NAV_STATE.ERROR)\n    this.error = error\n  }\n}\n\nexport class SoftNavEndEvent extends SoftNavEvent {\n  constructor(mechanism: SoftNavMechanism) {\n    super(mechanism, SOFT_NAV_STATE.END)\n  }\n}\n","import {SOFT_NAV_STATE} from './states'\nimport {\n  SoftNavEndEvent,\n  SoftNavErrorEvent,\n  type SoftNavMechanism,\n  SoftNavStartEvent,\n  SoftNavSuccessEvent,\n} from './events'\nimport {markStart, sendFailureStats, sendRenderStats} from './stats'\nimport {\n  clearSoftNav,\n  getSoftNavFailReason,\n  getSoftNavMechanism,\n  setSoftNavMechanism,\n  unsetSoftNav,\n  setSoftNavReferrer,\n  setSoftNavReactAppName,\n  inSoftNav,\n  getCurrentReactAppName,\n  DEFAULT_SOFT_NAV_ERROR_REASON,\n  setLatestMechanism,\n} from './utils'\n\ninterface SoftNavOptions {\n  skipIfGoingToReactApp?: boolean\n  allowedMechanisms?: SoftNavMechanism[]\n}\n\nlet visitCount = 0\n\nexport function initSoftNav() {\n  visitCount = 0\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.INITIAL))\n\n  clearSoftNav()\n}\n\nexport function startSoftNav(mechanism: SoftNavMechanism) {\n  if (inSoftNav()) return\n\n  startProgressBar()\n  document.dispatchEvent(new SoftNavStartEvent(mechanism))\n\n  setSoftNavMechanism(mechanism)\n  setSoftNavReactAppName()\n  setSoftNavReferrer()\n  markStart()\n}\n\nexport function succeedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount += 1\n\n  document.dispatchEvent(new SoftNavSuccessEvent(getSoftNavMechanism(), visitCount))\n  endSoftNav(options)\n}\n\nexport function failSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  visitCount = 0\n  const reason = getSoftNavFailReason() || DEFAULT_SOFT_NAV_ERROR_REASON\n  document.dispatchEvent(new SoftNavErrorEvent(getSoftNavMechanism(), reason))\n\n  endProgressBar()\n  sendFailureStats(reason)\n  clearSoftNav()\n}\n\nexport function endSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  const mechanism = getSoftNavMechanism()\n  endProgressBar()\n  document.dispatchEvent(new SoftNavEndEvent(mechanism))\n\n  unsetSoftNav()\n  setLatestMechanism(mechanism)\n}\n\nexport function renderedSoftNav(options: SoftNavOptions = {}) {\n  if (!canTriggerEvent(options)) return\n\n  sendRenderStats()\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.RENDER))\n}\n\nexport function updateFrame() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.FRAME_UPDATE))\n}\n\nfunction startProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.START))\n}\n\nfunction endProgressBar() {\n  document.dispatchEvent(new Event(SOFT_NAV_STATE.PROGRESS_BAR.END))\n}\n\nfunction canTriggerEvent({skipIfGoingToReactApp, allowedMechanisms = []}: SoftNavOptions = {}) {\n  return (\n    inSoftNav() &&\n    (allowedMechanisms.length === 0 || allowedMechanisms.includes(getSoftNavMechanism())) &&\n    (!skipIfGoingToReactApp || !getCurrentReactAppName())\n  )\n}\n","import {sendStats} from '@github-ui/stats'\nimport {getCurrentReactAppName, getSoftNavMechanism, getSoftNavReactAppName, getSoftNavReferrer} from './utils'\nimport type {SoftNavMechanism} from './events'\n\nexport const SOFT_NAV_DURATION_MARK = 'stats:soft-nav-duration'\nexport const MECHANISM_MAPPING: Record<SoftNavMechanism | 'ui' | 'hard', PlatformBrowserSoftNavigationMechanism> = {\n  turbo: 'TURBO',\n  react: 'REACT',\n  'turbo.frame': 'FRAME',\n  ui: 'UI',\n  hard: 'HARD',\n}\nexport function markStart() {\n  // browswers only record the first ~150 resources\n  // clearing it here provides room to track additional resources loaded during the soft-nav\n  performance.clearResourceTimings()\n  performance.mark(SOFT_NAV_DURATION_MARK)\n}\n\nfunction getDurationSinceLastSoftNav() {\n  if (performance.getEntriesByName(SOFT_NAV_DURATION_MARK).length === 0) {\n    return null\n  }\n\n  performance.measure(SOFT_NAV_DURATION_MARK, SOFT_NAV_DURATION_MARK)\n  const measures = performance.getEntriesByName(SOFT_NAV_DURATION_MARK)\n  const measure = measures.pop()\n  return measure ? measure.duration : null\n}\n\nexport function sendFailureStats(turboFailureReason: string) {\n  sendStats({\n    turboFailureReason,\n    turboStartUrl: getSoftNavReferrer(),\n    turboEndUrl: window.location.href,\n  })\n}\n\nexport function sendRenderStats() {\n  const duration = getDurationSinceLastSoftNav()\n\n  if (!duration) return\n\n  const mechanism = MECHANISM_MAPPING[getSoftNavMechanism()]\n  const roundedDuration = Math.round(duration)\n\n  if (mechanism === MECHANISM_MAPPING.react)\n    document.dispatchEvent(new CustomEvent('staffbar-update', {detail: {duration: roundedDuration}}))\n\n  sendStats({\n    requestUrl: window.location.href,\n    softNavigationTiming: {\n      mechanism,\n      destination: getCurrentReactAppName() || 'rails',\n      duration: roundedDuration,\n      initiator: getSoftNavReactAppName() || 'rails',\n    },\n  })\n}\n","import {startSoftNav} from '@github-ui/soft-nav/state'\nimport {visit} from '@github/turbo'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function softNavigate(url: string, turboOptions?: any) {\n  // visit won't fire a `turbo:click` event, so we need to manually start the soft navigation process.\n  startSoftNav('turbo')\n  visit(url, {...turboOptions})\n}\n"],"names":["showGlobalError","ajaxErrorMessage","document","getElementById","hidden","hideGlobalError","on","event","error","text","detail","currentTarget","target","test","stopImmediatePropagation","setTimeout","defaultPrevented","nodeHandle","WeakMap","markdownEnrichmentSuccess","where","parent","closest","classList","remove","get","setLoading","showMarkdownRenderError","template","add","setError","makeIframe","baseUrl","params","config","identifier","iframeUrl","URL","window","location","origin","key","value","Object","entries","searchParams","append","hash","html","type","String","contentJson","observe","constructor","HTMLElement","initialize","el","iframeParams","color_mode","getColorMode","getAttribute","src","getElementsByClassName","loadingHandle","detailsParent","fallbackHandle","createElement","appendChild","fallbackContentNode","firstElementChild","api","state","toggle","render","set","plainText","iframe","fullScreenIframe","buttons","makeEnhancedBlockActions","rawCode","onModalOpen","copyButton","modal","open","ontoggle","htmlEl","querySelector","enrichTarget","textContent","toggleElements","showError","fragment","Element","querySelectorAll","onLoad","onError","loadDeferredContentByEvent","loadDeferredContent","element","details","setIncludeFragmentSrc","detailsElement","url","removeAttribute","includeFragmentElement","subscribe","compose","fromEvent","includeFragment","refetch","supportsRichExpanding","container","stateClasses","softNavStateClasses","timingData","resetTiming","renderTiming","load","hello","helloTimer","clearTimeout","loadTimer","renderFailed","msg","errElement","renderError","errMsg","msgLines","split","map","line","fileRenderError","child","timeoutWatchdog","checkHello","visible","contains","postAsJson","renderWindow","message","postMessage","JSON","stringify","withRenderWindow","callback","contentWindow","style","height","Date","now","addEventListener","result","data","parse","undefined","identity","body","resolveRenderTargetFromContainer","payload","untimed","cmd","ack","branding","dispatchEvent","HashChangeEvent","requestAnimationFrame","width","getBoundingClientRect","postData","parsed","expandAllInContainer","collapseAllInContainer","setPreferredColorModeCookie","setCookie","getPreferredColorMode","prefersColorScheme","scheme","matchMedia","matches","setClientMode","mode","rootEl","setAttribute","setClientTheme","theme","getClientTheme","fallback","getColorModeAttribute","ready","mediaQuery","addListener","announceFromElement","options","isFeatureEnabled","announce","getTextContent","liveRegionAnnounceFromElement","politeness","assertive","prototype","ariaNotify","interrupt","liveRegionAnnounce","setContainerContent","ssrSafeDocument","innerText","trim","getCookie","name","getCookies","cookies","cookie","readCookies","push","expiration","strictDomain","samesite","domain","endsWith","secure","protocol","expire","deleteCookie","time","getTime","toUTCString","SoftNavEvent","Event","mechanism","SoftNavStartEvent","SOFT_NAV_STATE","START","SoftNavSuccessEvent","visitCount","SUCCESS","SoftNavErrorEvent","ERROR","SoftNavEndEvent","END","initSoftNav","INITIAL","clearSoftNav","startSoftNav","inSoftNav","PROGRESS_BAR","setSoftNavMechanism","setSoftNavReactAppName","setSoftNavReferrer","markStart","succeedSoftNav","canTriggerEvent","getSoftNavMechanism","endSoftNav","failSoftNav","reason","getSoftNavFailReason","DEFAULT_SOFT_NAV_ERROR_REASON","endProgressBar","sendFailureStats","unsetSoftNav","setLatestMechanism","renderedSoftNav","sendRenderStats","RENDER","updateFrame","FRAME_UPDATE","skipIfGoingToReactApp","allowedMechanisms","length","includes","getCurrentReactAppName","SOFT_NAV_DURATION_MARK","MECHANISM_MAPPING","turbo","react","ui","hard","performance","clearResourceTimings","mark","turboFailureReason","sendStats","turboStartUrl","getSoftNavReferrer","turboEndUrl","href","duration","getDurationSinceLastSoftNav","getEntriesByName","measure","measures","pop","roundedDuration","Math","round","CustomEvent","requestUrl","softNavigationTiming","destination","initiator","getSoftNavReactAppName","softNavigate","turboOptions","visit"],"sourceRoot":""}