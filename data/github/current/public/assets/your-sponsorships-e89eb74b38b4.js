"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["your-sponsorships"],{92536:(e,r,s)=>{s.d(r,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,r){let s=this.registrationEntries[e];s?s.resolve?.(r):this.registrationEntries[e]={promise:Promise.resolve(r)}}getRegistration(e){var r;return(r=this.registrationEntries)[e]||(r[e]=new t),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let t=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,r,s)=>{s.d(r,{Mm:()=>i,QJ:()=>n,w8:()=>o});var t=s(96540);function o(e){return((0,t.useEffect)(()=>{let r=e?.anchor;r&&("disabled"in r&&(r.disabled=!1),r.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function i(e){let r=(0,t.useRef)(e.__wrapperElement.anchor||null),[s,o]=(0,t.useState)(!1),i=(0,t.useCallback)(()=>{o(!s)},[s,o]);return(0,t.useEffect)(()=>{r.current&&(r.current.setAttribute("aria-expanded",s.toString()),r.current.setAttribute("aria-haspopup","true"))},[r,s]),n(e,i),{ref:r,open:s,setOpen:o}}function n(e,r){let s=(0,t.useRef)(e.__wrapperElement.anchor);(0,t.useEffect)(()=>{let e=s.current;if(e)return e.addEventListener("click",r),()=>e.removeEventListener("click",r)},[s,r])}},72245:(e,r,s)=>{s.d(r,{k:()=>c});let t=new(s(92536)).R;var o=s(74848),i=s(39595),n=s(24508),a=s(23235);let l=class ReactPartialElement extends n.H{async getReactNode(e){var r;let{Component:s}=await (r=this.name,t.getRegistration(r)),i=this.closest("react-partial-anchor");return(0,o.jsx)(a.c,{partialName:this.name,embeddedData:e,Component:s,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:i})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,r){t.register(e,r)}l=function(e,r,s,t){var o,i=arguments.length,n=i<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,s):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,s,t);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(i<3?o(n):i>3?o(r,s,n):o(r,s))||n);return i>3&&n&&Object.defineProperty(r,s,n),n}([i.p_],l)},23581:(e,r,s)=>{s.d(r,{A:()=>a});let{getItem:t,setItem:o,removeItem:i}=(0,s(74572).A)("localStorage"),n="REACT_PROFILING_ENABLED",a={enable:()=>o(n,"true"),disable:()=>i(n),isEnabled:()=>!!t(n)}},92240:(e,r,s)=>{s.d(r,{G:()=>t});let t=e=>({"data-testid":e})},28784:(e,r,s)=>{function t(e,r={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let s={...r.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...r,headers:s})}function o(e,r){let s={...r?.headers??{},Accept:"application/json","Content-Type":"application/json"},o=r?.body?JSON.stringify(r.body):void 0;return t(e,{...r,body:o,headers:s})}function i(e,r={}){let s={...r.headers,"GitHub-Is-React":"true"};return t(e,{...r,headers:s})}function n(e,r){let s={...r?.headers??{},"GitHub-Is-React":"true"};return o(e,{...r,headers:s})}s.d(r,{DI:()=>t,QJ:()=>i,Sr:()=>n,lS:()=>o})},22868:(e,r,s)=>{s.d(r,{r:()=>a});var t=s(74848),o=s(97156),i=s(78209),n=s(96540);let a=(0,n.forwardRef)(function({src:e,size:r=20,...s},a){let l=(0,n.useMemo)(()=>{let s=new URL(e,o.fV.origin);return s.searchParams.has("size")||s.searchParams.has("s")||s.searchParams.set("size",String(2*Number(r))),s.toString()},[e,r]);return(0,t.jsx)(i.A,{ref:a,src:l,size:r,"data-testid":"github-avatar",...s})});try{a.displayName||(a.displayName="GitHubAvatar")}catch{}},23235:(e,r,s)=>{s.d(r,{c:()=>m});var t=s(74848),o=s(96540),i=s(36165),n=s(45588),a=s(49107),l=s(47767),c=s(59840);function d({children:e,history:r}){let[s,i]=(0,o.useState)({location:r.location});return(0,c.m)(()=>r.listen(i),[r]),(0,t.jsx)(l.Ix,{location:s.location,navigator:r,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var p=s(17857),h=s(51261),u=s(75014);function m({partialName:e,embeddedData:r,Component:s,wasServerRendered:l,ssrError:c,anchorElement:m}){let _=o.useRef(),g=globalThis.window;_.current||(_.current=g?(0,h.z)({window:g}):(0,n.sC)({initialEntries:[{pathname:"/"}]}));let b=_.current,x=(0,u.w8)(m);return(0,t.jsx)(i.U,{appName:e,wasServerRendered:l,children:(0,t.jsx)(a.Q,{history:b,routes:[],children:(0,t.jsxs)(d,{history:b,children:[(0,t.jsx)(s,{...r.props,...x}),(0,t.jsx)(p.h,{ssrError:c})]})})})}try{m.displayName||(m.displayName="PartialEntry")}catch{}},24508:(e,r,s)=>{s.d(r,{H:()=>ReactBaseElement});var t=s(74848),o=s(39595),i=s(5338),n=s(96540),a=s(23581),l=s(79461),c=s(51528);function d(e,r,s,t){var o,i=arguments.length,n=i<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,s):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,s,t);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(i<3?o(n):i>3?o(r,s,n):o(r,s))||n);return i>3&&n&&Object.defineProperty(r,s,n),n}let p=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:i.H,hydrateRoot:i.c};a.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let r=JSON.parse(this.embeddedDataText),s=this.ssrError?.textContent,o=await this.getReactNode(r),l=(0,t.jsx)(n.StrictMode,{children:o});if(s&&this.logSSRError(s),this.hasSSRContent){let r=this.querySelector('style[data-styled="true"]');r&&document.head.appendChild(r),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let r=p.exec(e.message),s=String(r?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:s}})}}),r&&requestIdleCallback(()=>{r.parentElement?.removeChild(r)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return s.e("react-profiling").then(s.t.bind(s,87335,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let r=JSON.parse(e),s=function(e){if(!e.stacktrace)return"";let r="\n ";return e.stacktrace.map(e=>{let{function:s,filename:t,lineno:o,colno:i}=e,n=`${r} at ${s} (${t}:${o}:${i})`;return r=" ",n}).join("\n")}(r);console.error("Error During Alloy SSR:",`${r.type}: ${r.value}
`,r,s)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([o.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([o.aC],ReactBaseElement.prototype,"ssrError",void 0),d([o.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{p.displayName||(p.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}},67161:(e,r,s)=>{var t,o,i,n=s(72245),a=s(74848),l=s(96540),c=s(92240),d=s(65481),p=s(13473),h=s(69909),u=s(76629),m=s(44981),_=s(94407),g=s(95677),b=s(56221),x=s(59857),S=s(22868),v=s(86519),f=s(75177),y=s(60717),j=s(30729),R=s(281),A=s(17909),P=s(55847);!function(e){e[e.ACTIVE_SPONSORSHIPS=0]="ACTIVE_SPONSORSHIPS",e[e.PAST_SPONSORSHIPS=1]="PAST_SPONSORSHIPS"}(t||(t={})),function(e){e.PRIVATE="private",e.PUBLIC="public"}(o||(o={})),function(e){e.OPT_IN="on",e.OPT_OUT="off"}(i||(i={}));let E={header:"Name",field:"sponsorableLogin",width:"grow",renderCell:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{href:`/sponsors/${e.sponsorableLogin}`,children:(0,a.jsxs)(f.A,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(S.r,{src:e.sponsorableAvatarUrl,square:e.sponsorableIsOrg,size:26}),(0,a.jsx)(h.A,{sx:{ml:2,fontSize:"1.2em"},children:`@${e.sponsorableLogin}`})]})}),e.pendingChange&&(0,a.jsx)(y.A,{sx:{ml:2},text:e.pendingChange})]})},N={header:"Visibility",field:"privacyLevel",width:"auto",renderCell:e=>(0,a.jsxs)(f.A,{sx:{textTransform:"capitalize"},children:[e.privacyLevel===o.PUBLIC?(0,a.jsx)(j.A,{icon:x.EyeIcon,sx:{mr:1},className:"color-fg-muted"}):(0,a.jsx)(j.A,{icon:x.EyeClosedIcon,sx:{mr:1},className:"color-fg-muted"}),e.privacyLevel]})},w={header:"Start date",field:"startDate",width:"auto"},I={header:"Amount",field:"amount",width:"auto"},C=(e,r)=>({header:()=>(0,a.jsx)("span",{className:"sr-only",children:"Actions"}),field:"id",width:"auto",renderCell:s=>{let t=`/sponsors/${s.sponsorableLogin}?sponsor=${e}`;!s.pendingChange&&s.active&&(t=`/sponsors/${s.sponsorableLogin}/sponsorships?sponsor=${e}&tier_id=${s.subscribableId}`);let i=s.privacyLevel===o.PUBLIC?o.PRIVATE:o.PUBLIC,n=void 0!==s.subscribedToNewsletterUpdates&&s.subscribedToNewsletterUpdates;return(0,a.jsxs)(R.W,{children:[(0,a.jsx)(R.W.Button,{size:"small",...(0,c.G)("manage-button"),children:"Manage"}),(0,a.jsx)(R.W.Overlay,{width:"medium",children:(0,a.jsx)(A.l,{children:s.active?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.l.LinkItem,{href:s.patreonLink||t,...(0,c.G)("manage-sponsorship-button"),children:"Manage Sponsorship"}),(0,a.jsx)(A.l.Divider,{}),(0,a.jsx)(A.l.Item,{onSelect:()=>{r({sponsorableLogin:s.sponsorableLogin,privacyLevel:i,subscribedToNewsletterUpdates:n})},...(0,c.G)("privacy-button"),children:s.privacyLevel===o.PUBLIC?"Make Private":"Make Public"}),(0,a.jsx)(A.l.Item,{onSelect:()=>{r({sponsorableLogin:s.sponsorableLogin,privacyLevel:s.privacyLevel||o.PRIVATE,subscribedToNewsletterUpdates:!s.subscribedToNewsletterUpdates})},...(0,c.G)("subscribe-button"),children:s.subscribedToNewsletterUpdates?"Unsubscribe from emails":"Subscribe to email updates"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.l.LinkItem,{href:s.patreonLink||t,...(0,c.G)("manage-past-sponsorship-button"),children:"Re-sponsor"}),(0,a.jsx)(A.l.Divider,{}),(0,a.jsx)(A.l.Item,{onSelect:()=>{r({sponsorableLogin:s.sponsorableLogin,privacyLevel:i})},...(0,c.G)("privacy-button-past"),children:s.privacyLevel===o.PUBLIC?"Make Private":"Make Public"})]})})})]})}}),T={header:()=>(0,a.jsx)("span",{className:"sr-only",children:"Actions"}),field:"id",width:"auto",renderCell:e=>{let r=`/sponsors/${e.sponsorableLogin}`;return(0,a.jsx)(P.Q,{as:"a",size:"small",href:r,leadingVisual:e.viewerIsSponsor?x.HeartFillIcon:x.HeartIcon,sx:{".octicon-heart, .octicon-heart-fill":{color:"sponsors.fg"},":hover .octicon-heart, :hover .octicon-heart-fill":{transform:"scale(1.1)"},width:"100%"},...(0,c.G)("sponsor-button"),children:e.viewerIsSponsor?"Sponsoring":"Sponsor"})}};try{C.displayName||(C.displayName="ManageButtonColumn")}catch{}var L=s(84300),O=s(38553),k=s(28784);let H=({sponsorLogin:e,viewerPrimaryEmail:r,currentTab:s,setFlash:o})=>{let[i,n]=(0,l.useState)(!1),[d,p]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=async()=>{p(!0);let r=await (0,k.lS)(`/orgs/${e}/sponsoring/sponsorships_exports`,{method:"POST",body:{active:s===t.ACTIVE_SPONSORSHIPS}});if(!r.ok){p(!1),n(!1),o({variant:"danger",message:"There was a problem exporting your sponsorships."});return}let i=await r.json();p(!1),n(!1),o({variant:"success",message:i.msg})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Q,{ref:u,leadingVisual:x.MoveToBottomIcon,onClick:()=>{n(!0)},...(0,c.G)("your-sponsorships-export-button"),children:"Export as CSV"}),(0,a.jsx)(L.A,{returnFocusRef:u,title:"Export sponsorships",isOpen:i,onDismiss:()=>{n(!1)},children:(0,a.jsxs)("div",{children:[(0,a.jsx)(L.A.Header,{id:"header",children:"Export sponsorships"}),(0,a.jsxs)(f.A,{sx:{p:3},children:[(0,a.jsxs)("span",{children:["We'll start the export process and email you at"," ",(0,a.jsx)(h.A,{sx:{fontWeight:"bold"},children:r})," with the export attached when it's done. Update your"," ",(0,a.jsx)(v.A,{inline:!0,href:"/settings/emails",children:"contact email settings"})," ","to change where the file is sent."]}),(0,a.jsx)(P.Q,{sx:{mt:2},block:!0,variant:"primary",onClick:m,...(0,c.G)("your-sponsorships-start-export-button"),children:d?(0,a.jsx)(O.A,{size:"small"}):"Start export"})]})]})})]})};try{H.displayName||(H.displayName="ExportSponsorships")}catch{}let D=async({sponsorLogin:e,sponsorshipUpdate:r,sponsorships:s,setSponsorships:t,setFlash:o})=>{let n;n=void 0===r.subscribedToNewsletterUpdates?{sponsor:e,privacy_level:r.privacyLevel}:{sponsor:e,privacy_level:r.privacyLevel,email_opt_in:r.subscribedToNewsletterUpdates?i.OPT_IN:i.OPT_OUT},(await (0,k.lS)(`/sponsors/${r.sponsorableLogin}/sponsorships`,{method:"PUT",body:n})).ok?(t(s.map(e=>e.sponsorableLogin===r.sponsorableLogin?{...e,privacyLevel:r.privacyLevel,subscribedToNewsletterUpdates:r.subscribedToNewsletterUpdates}:e)),o({variant:"success",message:`Sponsorship to @${r.sponsorableLogin} updated`})):o({variant:"danger",message:"There was a problem updating your sponsorship"})},U=e=>1===e?"sponsorship":"sponsorships";function G({sponsorLogin:e,viewerPrimaryEmail:r,sponsorships:s,viewerIsOrgMember:o,viewerCanManageSponsorships:i,pageSize:n=10}){let[S,v]=(0,l.useState)(0),[f,y]=(0,l.useState)(s),[j,R]=(0,l.useState)(t.ACTIVE_SPONSORSHIPS),[A,P]=(0,l.useState)(""),[L,O]=(0,l.useState)(),k=(0,l.useMemo)(()=>f.reduce((e,r)=>(r.active?e.current++:e.past++,e),{current:0,past:0}),[f]),G=(0,l.useMemo)(()=>f.map(e=>({...e,normalizedSponsorableLogin:e.sponsorableLogin.toLowerCase()})),[f]),M=(0,l.useMemo)(()=>{let e=e=>{throw Error(`Unhandled state: ${e}`)};return G.filter(r=>{switch(j){case t.ACTIVE_SPONSORSHIPS:return r.active;case t.PAST_SPONSORSHIPS:return!r.active;default:e(j)}})},[G,j]),V=(0,l.useMemo)(()=>A?M.filter(e=>e.normalizedSponsorableLogin.includes(A)):M,[M,A]),B=S*n,$=B+n,z=(0,l.useMemo)(()=>V.slice(B,$),[V,B,$]),F=(0,l.useCallback)(async r=>{await D({sponsorLogin:e,sponsorshipUpdate:r,sponsorships:f,setSponsorships:y,setFlash:O})},[e,f]),W=(0,l.useMemo)(()=>i?[E,N,w,I,C(e,F)]:o?[E,N,w,T]:[E,w,T],[i,o,e,F]);return(0,a.jsxs)(a.Fragment,{children:[L&&(0,a.jsx)(d.A,{variant:L.variant,...(0,c.G)("your-sponsorships-flash"),children:L.message}),(0,a.jsxs)(p.A,{as:"h2",id:"your-sponsorships-heading",sx:{mt:0,mb:2,py:2},...(0,c.G)("your-sponsorships-header"),children:[e,"'s sponsorships"]}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("span",{id:"your-sponsorships-description",...(0,c.G)("your-sponsorships-description"),children:[(0,a.jsx)(h.A,{sx:{fontWeight:"bold"},children:e})," has"," ",(0,a.jsx)(h.A,{sx:{fontWeight:"bold"},children:k.current})," current"," ",U(k.current)," and"," ",(0,a.jsx)(h.A,{sx:{fontWeight:"bold"},children:k.past})," past"," ",U(k.past)]})}),(0,a.jsxs)(u.O,{"aria-label":"Current or past sponsorships navigation",sx:{marginBottom:4,paddingLeft:0},children:[(0,a.jsx)(u.O.Item,{"aria-current":j===t.ACTIVE_SPONSORSHIPS?"page":void 0,onSelect:()=>R(t.ACTIVE_SPONSORSHIPS),children:"Current Sponsorships"},t.ACTIVE_SPONSORSHIPS),(0,a.jsx)(u.O.Item,{"aria-current":j===t.PAST_SPONSORSHIPS?"page":void 0,onSelect:()=>R(t.PAST_SPONSORSHIPS),children:"Past Sponsorships"},t.PAST_SPONSORSHIPS)]}),0===M.length?(0,a.jsx)("div",{...(0,c.G)("your-sponsorships-empty-state"),children:(0,a.jsxs)(_.A,{children:[(0,a.jsx)(_.A.Heading,{children:"No sponsorships"}),(0,a.jsx)(_.A.Description,{children:"No sponsorships to display."}),(0,a.jsx)(_.A.PrimaryAction,{href:"/sponsors/explore",children:"Explore your dependencies"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex flex-nowrap mb-4",children:[(0,a.jsx)(m.A,{className:"flex-1",leadingVisual:x.SearchIcon,placeholder:"Search users",onChange:e=>P(e.target.value.toLowerCase())}),i&&(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(H,{sponsorLogin:e,viewerPrimaryEmail:r,currentTab:j,setFlash:O})})]}),0===V.length?(0,a.jsx)("div",{...(0,c.G)("your-sponsorships-filter-empty-state"),children:(0,a.jsxs)(_.A,{children:[(0,a.jsx)(_.A.Visual,{children:(0,a.jsx)(x.HeartIcon,{size:"medium"})}),(0,a.jsx)(_.A.Heading,{children:"No sponsorships"}),(0,a.jsx)(_.A.Description,{children:"No sponsorships match the search."})]})}):(0,a.jsx)("div",{...(0,c.G)("your-sponsorships-table"),children:(0,a.jsxs)(g.X.Container,{children:[(0,a.jsx)(b.b,{"aria-labelledby":"your-sponsorships-heading","aria-describedby":"your-sponsorships-description",cellPadding:"spacious",data:z,columns:W}),V.length>n&&(0,a.jsx)(g.X.Pagination,{pageSize:n,"aria-label":"Table pagination",totalCount:V.length,onChange:e=>{v(e.pageIndex)}})]})})]})]})}try{G.displayName||(G.displayName="YourSponsorships")}catch{}(0,n.k)("your-sponsorships",{Component:G})}},e=>{var r=r=>e(e.s=r);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_primer_react_lib-esm_DataTable_DataTable_js","vendors-node_modules_primer_react_lib-esm_UnderlineNav_index_js","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-c6ec6b","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>r(67161)),e.O()}]);
//# sourceMappingURL=your-sponsorships-8cf08b45bb81.js.map