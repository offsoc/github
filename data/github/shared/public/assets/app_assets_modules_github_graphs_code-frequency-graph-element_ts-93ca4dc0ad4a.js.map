{"version":3,"file":"chunk-app_assets_modules_github_graphs_code-frequency-graph-element_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/d3-array/src/ascending.js","node_modules/d3-array/src/min.js","node_modules/d3-shape/src/area.js","app/assets/modules/github/d3/format-symbol.ts","app/assets/modules/github/graphs/code-frequency-graph-element.ts","app/assets/modules/github/locale.ts"],"sourcesContent":["export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import {getUserLanguage} from '../locale'\n\nexport default function formatSymbol(number: number): string {\n  const formatter = Intl.NumberFormat(getUserLanguage(), {\n    maximumFractionDigits: 2,\n    maximumSignificantDigits: 4,\n    notation: 'compact',\n  })\n\n  return formatter.format(number)\n}\n","import {ascending, max as d3max, min as d3min} from 'd3-array'\nimport {axisBottom, axisLeft} from 'd3-axis'\nimport {controller, target} from '@github/catalyst'\nimport {scaleLinear, scaleTime} from 'd3-scale'\nimport {area as d3area} from 'd3-shape'\nimport {fetchPoll} from '@github-ui/fetch-utils'\nimport formatSymbol from '../d3/format-symbol'\nimport memoize from '@github/memoize'\nimport {select} from 'd3-selection'\nimport {timeFormat} from 'd3-time-format'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Data = any\n\nconst cachedData = memoize(fetchData)\n\nasync function fetchData(url: string): Promise<Data> {\n  const response = await fetchPoll(url, {headers: {accept: 'application/json'}})\n  return await response.json()\n}\n\n@controller\nclass CodeFrequencyGraphElement extends HTMLElement {\n  @target graph: HTMLElement\n\n  async connectedCallback() {\n    const graph = this.graph\n    const url = graph.getAttribute('data-url')\n    if (!url) {\n      return\n    }\n\n    // Remove possibly existing cached graph.\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    for (const el of graph.querySelectorAll('svg.viz')) {\n      el.remove()\n    }\n\n    graph.classList.add('is-graph-loading')\n    graph.classList.remove('is-graph-load-error', 'is-graph-empty')\n\n    try {\n      const data = await cachedData(url)\n      graph.classList.remove('is-graph-loading')\n      if (data != null && data.unusable) {\n        graph.classList.add('is-graph-without-usable-data')\n      } else if (data != null && data.tooLarge) {\n        graph.classList.add('is-graph-too-large')\n      } else if (\n        (data != null && data.length === 0) ||\n        (data != null && data.summary != null && data.summary.total === 0) ||\n        (data[0] != null && data[0].weeks != null && data[0].weeks.length === 0)\n      ) {\n        graph.classList.add('is-graph-empty')\n      } else {\n        render(graph, data)\n      }\n    } catch (error) {\n      graph.classList.remove('is-graph-loading')\n\n      if (error instanceof ValuesError) {\n        graph.classList.add('is-graph-empty')\n      } else {\n        graph.classList.add('is-graph-load-error')\n        throw error\n      }\n    }\n  }\n}\n\nclass ValuesError extends Error {}\n\nfunction render(container: HTMLElement, data: number[][]) {\n  const width = Math.round(container.getBoundingClientRect().width)\n  const height = 500\n\n  const [padt, padr, padb, padl] = [10, 10, 100, 60]\n\n  const formattedData = data\n    .map(d => {\n      return [new Date(d[0]! * 1000), d[1], d[2]]\n    })\n    .sort((a, b) => {\n      return ascending(a[0], b[0])\n    })\n\n  const additions = formattedData.map(d => {\n    return [d[0], d[1]]\n  })\n  const deletions = formattedData.map(d => {\n    return [d[0], d[2]]\n  })\n\n  const max = d3max(additions, d => {\n    return d[1]\n  })\n  const min = d3min(deletions, d => {\n    return d[1]\n  })\n\n  if (!max || !min) throw new ValuesError('Graph has no valid max or min values')\n\n  const weekStart = formattedData[0]![0]!\n  const weekEnd = formattedData[formattedData.length - 1]![0]!\n\n  const x = scaleTime()\n    .domain([weekStart, weekEnd])\n    .range([0, width - padl - padr])\n  const y = scaleLinear()\n    .domain([min as number, max as number])\n    .range([height - padb - padt, 0])\n\n  const xAxis = axisBottom(x).tickFormat(d => {\n    if (!(d instanceof Date)) {\n      throw new Error('invariant')\n    }\n    if (!(weekStart instanceof Date)) {\n      throw new Error('invariant')\n    }\n    if (!(weekEnd instanceof Date)) {\n      throw new Error('invariant')\n    }\n    if (weekStart.getFullYear() !== weekEnd.getFullYear()) {\n      return timeFormat('%B %Y')(d)\n    } else {\n      return timeFormat('%d %B %Y')(d)\n    }\n  })\n  const yAxis = axisLeft(y)\n    .tickPadding(5)\n    .tickSize(width)\n    .tickFormat(d => {\n      if (!(typeof d === 'number')) {\n        throw new Error('invariant')\n      }\n      return formatSymbol(Math.abs(d))\n    })\n\n  const area = d3area()\n    .x(d => {\n      return x(d[0])\n    })\n    .y0(d => {\n      return y(d[1])\n    })\n    .y1(() => {\n      return y(0)\n    })\n\n  const vis = select(container)\n    .append('svg')\n    .attr('viewBox', `0 0 ${width} ${height}`)\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('class', 'viz code-frequency')\n    .append('g')\n    .attr('transform', `translate(${padl},${padt})`)\n\n  vis\n    .append('g')\n    .attr('class', 'x axis')\n    .attr('transform', `translate(0, ${height - padt - padb})`)\n    .call(xAxis)\n    .selectAll('.tick text')\n    .attr('fill', '#6a737d')\n    .style('text-anchor', 'end')\n    .attr('dx', '-.8em')\n    .attr('dy', '.15em')\n    .attr('transform', 'rotate(-45)')\n\n  vis\n    .append('g')\n    .attr('class', 'y axis')\n    .attr('transform', `translate(${width}, 0)`)\n    .call(yAxis)\n    .selectAll('.tick text')\n    .attr('fill', '#6a737d')\n\n  vis\n    .selectAll('path.area')\n    .data([additions, deletions])\n    .enter()\n    .append('path')\n    .attr('class', (d, i) => {\n      if (i === 0) {\n        return 'addition'\n      } else {\n        return 'deletion'\n      }\n    })\n\n    .attr(\n      'd',\n      // @ts-expect-error area typings suggest it could be a non-number tuple\n      area,\n    )\n}\n","export const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\nexport const months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const getUserLanguage = (): string => {\n  try {\n    // @ts-expect-error - `getCanonicalLocales` not TS supported but has browser support\n    return Intl.getCanonicalLocales(window.navigator.language)[0]\n  } catch (e) {\n    return 'en-US'\n  }\n}\n"],"names":["a","b","NaN","min","values","valueof","undefined","value","index","x0","y0","y1","x1","defined","context","curve","output","area","data","i","j","k","d","buffer","n","length","defined0","x0z","y0z","areaStart","lineStart","lineEnd","point","areaEnd","arealine","x","_","arguments","y","lineX0","lineY0","lineY1","lineX1","formatSymbol","number","formatter","NumberFormat","getUserLanguage","maximumFractionDigits","maximumSignificantDigits","notation","format","cachedData","memoize","fetchData","url","response","fetchPoll","headers","accept","json","CodeFrequencyGraphElement","HTMLElement","connectedCallback","graph","getAttribute","el","querySelectorAll","remove","classList","add","unusable","tooLarge","summary","total","weeks","render","container","width","Math","round","getBoundingClientRect","padt","padr","padb","padl","formattedData","map","Date","sort","ascending","additions","deletions","max","d3max","d3min","ValuesError","weekStart","weekEnd","scaleTime","domain","range","scaleLinear","height","xAxis","axisBottom","tickFormat","getFullYear","timeFormat","yAxis","axisLeft","tickPadding","tickSize","abs","d3area","vis","select","append","attr","call","selectAll","style","enter","error","target","controller","Error","weekdays","months","Intl","getCanonicalLocales","window","navigator","language","e"],"sourceRoot":""}