"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_graphs_discussion-page-views_ts"],{87031:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(10541),a=n(50183);function o(){let t=function(){let t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.boxSizing="border-box",t}(),e=null;function n(){return[0,0]}function o(){return" "}function i(n){e=(function(t){let e=t.node();return"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement})(n).createSVGPoint(),document.body.appendChild(t)}return i.show=function(r,a){let s=o(a),l=n(a),u=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;t.innerHTML=s,t.style.opacity="1",t.style.pointerEvents="all";let f=function(t,e,n){let r=function(t,e){let n=t;for(;void 0===n.getScreenCTM&&"undefined"===n.parentNode;)n=n.parentNode;let r={},a=n.getScreenCTM(),o=n.getBBox(),i=o.width,s=o.height,l=o.x,u=o.y;return e.x=l,e.y=u,r.nw=e.matrixTransform(a),e.x+=i,r.ne=e.matrixTransform(a),e.y+=s,r.se=e.matrixTransform(a),e.x-=i,r.sw=e.matrixTransform(a),e.y-=s/2,r.w=e.matrixTransform(a),e.x+=i,r.e=e.matrixTransform(a),e.x-=i/2,e.y-=s/2,r.n=e.matrixTransform(a),e.y+=s,r.s=e.matrixTransform(a),r}(n,t);return{top:r.n.y-e.offsetHeight,left:r.n.x-e.offsetWidth/2}}(e,t,r.target);return t.classList.toggle("n",!0),t.style.top=`${f.top+l[0]+u}px`,t.style.left=`${f.left+l[1]+c}px`,i},i.hide=function(){return t.style.opacity="0",t.style.pointerEvents="none",i},i.attr=function(e,n){return r.Ay.prototype.attr.apply((0,a.A)(t),[e,n]),i},i.offset=function(t){return n=function(){return t},i},i.html=function(t){return o=t,i},i}},45030:(t,e,n)=>{var r=n(51889),a=n(39595),o=n(53170),i=n(4049),s=n(99311),l=n(87031),u=n(21671),c=n(27193),f=n(50183),d=n(12736),p=n(84653);function g(t,e){if((a=t.length)>1)for(var n,r,a,o=1,i=t[e[0]],s=i.length;o<a;++o)for(r=i,i=t[e[o]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function h(t){for(var e=t.length,n=Array(e);--e>=0;)n[e]=e;return n}function m(t,e){return t[e]}function y(t){let e=[];return e.key=t,e}var v=n(22211);function x(t,e,n,r){var a,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i}async function w(t){let e=await (0,c.Ee)(t,{headers:{accept:"application/json"}});return await e}let b=class DiscussionPageViewsGraphElement extends HTMLElement{async connectedCallback(){let t=this.graph,e=t.getAttribute("data-url");if(e){t.classList.add("is-graph-loading"),t.classList.remove("is-graph-load-error","is-graph-empty");try{let n=await w(e);t.classList.remove("is-graph-loading");let a=await n.json();new ResizeObserver(e=>{for(let e of t.querySelectorAll("svg.viz"))e.remove();for(let n of e)n.target===t&&function(t,e){let n=t.clientWidth,a=t.clientHeight,c={top:50,right:20,bottom:40,left:50},x=n-c.left-c.right,w=a-c.top-c.bottom,b=(0,v.aL)("%-m/%-d"),A=(0,l.A)().attr("class","svg-tip").offset([-10,0]).html(function(t){return`<strong>${t.data.group}</strong><br>
      ${t.data.anonymous} anonymous visits<br>
      ${t.data["logged in"]} logged in visits`}),k=(0,f.A)(t).append("svg").attr("class","viz").attr("width",n).attr("height",a).attr("alt","A graph of the page views for discussions in this repository").attr("aria-describedby","discussion-page-views-description").append("g").attr("transform",`translate(${c.left},${c.top})`).call(A),M="";for(let t of e)for(let e of(M+=`${t.name}: `,t.data))M+=`${e.value} on ${b(new Date(e.date))} `;for(let t of(k.append("div").attr("text",M).attr("style","display: none;").attr("id","discussion-page-views-description"),e))k.append("circle").attr("cx",x-t.delta).attr("cy",-c.top/2).attr("class",t.class).attr("r",5),k.append("text").attr("x",x-t.delta+10).attr("y",-c.top/2+5).attr("class","legend-text").text(t.name);let T=(0,u.A)(e[0].data.map(t=>t.value))+(0,u.A)(e[1].data.map(t=>t.value)),L=e[0].data.map(t=>b(new Date(t.date))),$=(0,o.A)().domain(L).range([0,x]).padding(.2);k.append("g").attr("transform",`translate(0, ${w})`).attr("class","tick-labels-x").call((0,r.l7)($).tickSize(0).tickValues(L));let C=(0,i.A)().domain([0,T]).range([w,0]);k.append("g").attr("class","tick-labels-y").call((0,r.V4)(C).ticks(4).tickSize(0)),k.append("g").attr("class","tick-y").call((0,r.V4)(C).ticks(4).tickSize(-x).tickFormat(()=>"")),k.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",x/2).attr("y",a-c.top).text("Timeline"),k.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-w/2).attr("y",-c.bottom-10).attr("dy","0.71em").style("text-anchor","middle").text("Quantity");let E=[];for(let[t,n]of e[0].data.map(t=>t.date).entries())E.push({group:b(new Date(n)),"logged in":e[0].data[t].value,anonymous:e[1].data[t].value});let S=e.map(t=>t.name),j=(0,s.A)().domain(S).range(e.map(t=>t.class)),_=(function(){var t=(0,p.A)([]),e=h,n=g,r=m;function a(a){var o,i,s=Array.from(t.apply(this,arguments),y),l=s.length,u=-1;for(let t of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(t,s[o].key,u,a)]).data=t;for(o=0,i=(0,d.A)(e(s));o<l;++o)s[i[o]].index=o;return n(s,i),s}return a.keys=function(e){return arguments.length?(t="function"==typeof e?e:(0,p.A)(Array.from(e)),a):t},a.value=function(t){return arguments.length?(r="function"==typeof t?t:(0,p.A)(+t),a):r},a.order=function(t){return arguments.length?(e=null==t?h:"function"==typeof t?t:(0,p.A)(Array.from(t)),a):e},a.offset=function(t){return arguments.length?(n=null==t?g:t,a):n},a})().keys(S)(E);k.append("g").selectAll("g").data(_).join("g").attr("class",function(t){return j(t.key)}).selectAll("rect").data(t=>t).join("rect").attr("x",t=>$(t.data.group)).attr("y",function(t){return 0===t[0]?C(t[1])+2:C(t[1])}).attr("height",function(t){return 0===t[0]?C(t[0])-C(t[1])-2:C(t[0])-C(t[1])}).attr("width",$.bandwidth()).on("mouseover",A.show).on("mouseout",A.hide)}(t,a)}).observe(t)}catch(e){if(t.classList.remove("is-graph-loading"),"string"==typeof e.message&&e.message.match("HTTP 404"))t.classList.add("is-graph-empty");else throw t.classList.add("is-graph-load-error"),e}}}};x([a.aC],b.prototype,"graph",void 0),b=x([a.p_],b)},53170:(t,e,n)=>{n.d(e,{A:()=>function t(){var e,n,o=(0,a.A)().unknown(void 0),i=o.domain,s=o.range,l=0,u=1,c=!1,f=0,d=0,p=.5;function g(){var t=i().length,r=u<l,a=r?u:l,o=r?l:u;e=(o-a)/Math.max(1,t-f+2*d),c&&(e=Math.floor(e)),a+=(o-a-e*(t-f))*p,n=e*(1-f),c&&(a=Math.round(a),n=Math.round(n));var g=(function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),o=Array(a);++r<a;)o[r]=t+r*n;return o})(t).map(function(t){return a+e*t});return s(r?g.reverse():g)}return delete o.unknown,o.domain=function(t){return arguments.length?(i(t),g()):i()},o.range=function(t){return arguments.length?([l,u]=t,l=+l,u=+u,g()):[l,u]},o.rangeRound=function(t){return[l,u]=t,l=+l,u=+u,c=!0,g()},o.bandwidth=function(){return n},o.step=function(){return e},o.round=function(t){return arguments.length?(c=!!t,g()):c},o.padding=function(t){return arguments.length?(f=Math.min(1,d=+t),g()):f},o.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),g()):f},o.paddingOuter=function(t){return arguments.length?(d=+t,g()):d},o.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),g()):p},o.copy=function(){return t(i(),[l,u]).round(c).paddingInner(f).paddingOuter(d).align(p)},r.C.apply(g(),arguments)}});var r=n(99065),a=n(99311)},99311:(t,e,n)=>{n.d(e,{A:()=>function t(){var e=new InternMap,n=[],r=[],a=i;function s(t){let o=e.get(t);if(void 0===o){if(a!==i)return a;e.set(t,o=n.push(t)-1)}return r[o%r.length]}return s.domain=function(t){if(!arguments.length)return n.slice();for(let r of(n=[],e=new InternMap,t))e.has(r)||e.set(r,n.push(r)-1);return s},s.range=function(t){return arguments.length?(r=Array.from(t),s):r.slice()},s.unknown=function(t){return arguments.length?(a=t,s):a},s.copy=function(){return t(n,r).unknown(a)},o.C.apply(s,arguments),s}});let InternMap=class InternMap extends Map{constructor(t,e=a){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(let[e,n]of t)this.set(e,n)}get(t){return super.get(r(this,t))}has(t){return super.has(r(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){let r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){let r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,t))}};function r({_intern:t,_key:e},n){let r=e(n);return t.has(r)?t.get(r):n}function a(t){return null!==t&&"object"==typeof t?t.valueOf():t}var o=n(99065);let i=Symbol("implicit")}}]);
//# sourceMappingURL=app_assets_modules_github_graphs_discussion-page-views_ts-9c3b1970e01c.js.map