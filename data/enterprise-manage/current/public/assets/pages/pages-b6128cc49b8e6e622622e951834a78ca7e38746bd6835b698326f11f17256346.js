(function(){this.PagesOverrideHeaders=function(){function e(){this.page=$(".page-section"),this.listOfOverrideHeaders=$(".js-list-group-override-headers"),this.currentOverrideHeaders=$(".js-override-headers"),this.button=$(".js-override-headers-submit"),this.overrideError=$(".js-override-headers-error")}return e.prototype.displayError=function(e){this.overrideError.text(e),this.overrideError.removeClass("hidden")},e.prototype.add=function(e,r){var a;(headerName=e.val(),headerValue=r.val(),headerName.length>128)?this.displayError("Header name too long. Must be less than 128 characters."):headerName.match(/^[0-9a-zA-Z\-_]*$/)?""!=headerName?headerValue.match(/^[0-9a-zA-Z_ :;.,\\\/"'?!(){}\[\]@<>=\-\+\*#\$&\`\|~\^%]*$/)?""!=headerValue?headerValue.length>300?this.displayError("Empty Http Header Value"):(headers=this.listOfOverrideHeaders,currentOverrideHeaders=this.currentOverrideHeaders.val()?JSON.parse(this.currentOverrideHeaders.val()):{},Object.keys(currentOverrideHeaders).length>=50&&currentOverrideHeaders[headerName]==undefined?this.displayError("Exceed max allowed customize header 50."):(this.overrideError.addClass("hidden"),headerName in currentOverrideHeaders?this.listOfOverrideHeaders.find("[header='"+headerName+"']").parent("li").find(".override-headers-value").text(headerValue):(li=$("<li>",{"class":"list-group-item"}),removeLink=$("<a>",{"class":"js-remove-override-headers pull-right list-group-remove-item","data-confirm":"Are you sure you want to delete this header?",header:headerName}),removeIcon=$("<span>",{"class":"octicon octicon-trashcan"}),removeIcon.appendTo(removeLink),removeLink.appendTo(li),nameSpan=$("<div>",{"class":"override-headers-key",text:headerName}),valueSpan=$("<div>",{"class":"override-headers-value",text:headerValue}),nameSpan.appendTo(li),valueSpan.appendTo(li),li.appendTo(headers),removeLink.click((a=this,function(){return a.remove(removeLink)}))),currentOverrideHeaders=this.currentOverrideHeaders.val()?JSON.parse(this.currentOverrideHeaders.val()):{},currentOverrideHeaders[String(headerName)]=String(headerValue),this.currentOverrideHeaders.attr("value",JSON.stringify(currentOverrideHeaders)),e.val(""),r.val(""),headers.removeClass("hidden"),headers.show())):this.displayError("Empty Http Header Value"):this.displayError("Invalid Http Header Value"):this.displayError("Empty Http Header Name"):this.displayError("Invalid Http Header Name")},e.prototype.remove=function(e){if(confirmText=e.attr("data-confirm"),confirm(confirmText)&&(e.parent("li").remove(),currentOverrideHeaders=this.currentOverrideHeaders.val()?JSON.parse(this.currentOverrideHeaders.val()):{},delete currentOverrideHeaders[e.attr("header")],this.currentOverrideHeaders.attr("value",JSON.stringify(currentOverrideHeaders)),0===this.listOfOverrideHeaders.children().length))return this.listOfOverrideHeaders.addClass("hidden")},e}(),$(document).ready(function(){$(".js-override-headers-submit").click(function(e){return e.preventDefault(),(new PagesOverrideHeaders).add($(".js-override-header-name"),$(".js-override-header-value"))}),$(".js-remove-override-headers").click(function(e){var r;return e.preventDefault(),r=$(this),(new PagesOverrideHeaders).remove(r)})})}).call(this);