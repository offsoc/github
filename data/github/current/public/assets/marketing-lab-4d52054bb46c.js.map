{"version":3,"file":"marketing-lab-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/three/examples/jsm/controls/OrbitControls.js","app/assets/modules/marketing-lab.ts"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t    removePointer( event );\n\n\t\t    if ( pointers.length === 0 ) {\n\n\t\t        scope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t        scope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t        scope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t    }\n\n\t\t    scope.dispatchEvent( _endEvent );\n\n\t\t    state = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n","// eslint-disable-next-line import/no-namespace\nimport * as THREE from 'three'\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader'\n// import {toneMapping} from 'three/examples/jsm/nodes/Nodes.js'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst scene = new THREE.Scene()\nconst sizes = {\n  width: 1280,\n  height: 500,\n}\nconst imagePath = '/images/modules/site/lab/'\nconst textureLoader = new THREE.TextureLoader()\nconst bakedTexture = textureLoader.load(`${imagePath}baked.webp`)\nconst matcapTexture = textureLoader.load(`${imagePath}matcap.png`)\nbakedTexture.flipY = false\nbakedTexture.encoding = THREE.sRGBEncoding\n\nconst bakedMaterial = new THREE.MeshMatcapMaterial({\n  map: bakedTexture,\n  matcap: matcapTexture,\n})\n\nconst fresnelMaterial = new THREE.MeshMatcapMaterial({\n  map: bakedTexture,\n  matcap: matcapTexture,\n})\n\n// GLTF loader\nconst gltfLoader = new GLTFLoader()\n\ngltfLoader.load(`${imagePath}copilot.glb`, gltf => {\n  let headMesh: THREE.Mesh | undefined\n  let earMesh: THREE.Mesh | undefined\n\n  gltf.scene.traverse(object => {\n    if (object instanceof THREE.Mesh) {\n      object.material = bakedMaterial\n      if (object.name === 'HeadBase') {\n        headMesh = object\n      } else if (object.name === 'Ears') {\n        earMesh = object\n      }\n    }\n  })\n\n  if (headMesh !== undefined) {\n    headMesh.material = fresnelMaterial\n  }\n  if (earMesh !== undefined) {\n    earMesh.material = fresnelMaterial\n  }\n\n  gltf.scene.traverse(child => {\n    if (child.name === 'Ears') {\n      //earMesh = child\n    }\n  })\n\n  if (headMesh !== undefined) {\n    headMesh.material = fresnelMaterial\n  }\n  if (earMesh !== undefined) {\n    earMesh.material = fresnelMaterial\n  }\n\n  scene.add(gltf.scene)\n})\n\nobserve('.js-lab-copilot', canvasElement => {\n  const canvas = canvasElement as HTMLCanvasElement\n  const canvasRect = canvas.getBoundingClientRect()\n  sizes.width = canvasRect.width\n  sizes.height = canvasRect.height\n  /**\n   * Renderer\n   */\n  const renderer = new THREE.WebGLRenderer({\n    canvas,\n    antialias: false,\n    alpha: true,\n  })\n  const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 100)\n\n  /* Temp cube for debugging loading\n  const geometry = new THREE.BoxGeometry()\n  const material = new THREE.MeshBasicMaterial({color: 0x00ff00})\n  const cube = new THREE.Mesh(geometry, material)\n  scene.add(cube) */\n\n  renderer.outputEncoding = THREE.sRGBEncoding\n  renderer.toneMapping = THREE.ACESFilmicToneMapping\n  renderer.toneMappingExposure = 1.5\n  renderer.setSize(sizes.width, sizes.height)\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n\n  // Controls\n  const controls = new OrbitControls(camera, canvas)\n  controls.enableDamping = true\n\n  // eslint-disable-next-line github/prefer-observers\n  window.addEventListener('resize', () => {\n    // Update sizes\n    const boundingBox = canvas.getBoundingClientRect()\n    sizes.width = boundingBox.width\n    sizes.height = boundingBox.height\n\n    // Update camera\n    camera.aspect = sizes.width / sizes.height\n    camera.updateProjectionMatrix()\n\n    // Update renderer\n    renderer.setSize(sizes.width, sizes.height)\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n  })\n\n  /**\n   * Camera\n   */\n  // Base camera\n  camera.position.x = 4\n  camera.position.y = 2\n  camera.position.z = 10\n\n  /**\n   * Animate\n   */\n\n  const tick = () => {\n    // Update controls\n    controls.update()\n\n    // Render\n    renderer.render(scene, camera)\n    // Call tick again on the next frame\n    window.requestAnimationFrame(tick)\n  }\n\n  tick()\n})\n"],"names":["_changeEvent","type","_startEvent","_endEvent","OrbitControls","constructor","object","domElement","style","touchAction","enabled","target","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","distanceTo","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","push","pointerType","onTouchStart","trackPointer","DOLLY_ROTATE","onMouseDown","mouseAction","button","ctrlKey","metaKey","shiftKey","onTouchMove","onMouseMove","handleMouseMoveRotate","removePointer","releasePointerCapture","preventDefault","handleKeyDown","needsUpdate","code","i","splice","undefined","pointer","passive","scene","THREE","sizes","width","height","imagePath","textureLoader","bakedTexture","load","matcapTexture","flipY","encoding","bakedMaterial","map","matcap","fresnelMaterial","gltfLoader","GLTFLoader","gltf","headMesh","earMesh","traverse","material","name","child","observe","canvasElement","canvasRect","canvas","getBoundingClientRect","renderer","antialias","alpha","camera","outputEncoding","toneMapping","toneMappingExposure","setSize","setPixelRatio","window","devicePixelRatio","controls","boundingBox","aspect","z","tick","render","requestAnimationFrame"],"sourceRoot":""}