(function(){window.forms={checkInputRadioField:function(){var e,t,i;return i=(e=$(this)).data("value"),"string"==typeof(t=$(e.data("input-field-id")).val())&&0!==t.length?e.val(i):e.val("")},setActiveRadioItem:function(){return $(this).parent().addClass("active").siblings().removeClass("active")},setActiveCheckboxItem:function(){return $(this).parent().toggleClass("active")}},$(function(){return $(document).ready(function(){return $(".radio-item input:checked, .checkbox-item input:checked").parent().addClass("active"),$(".radio-item input").click(forms.setActiveRadioItem),$(".checkbox-item input").click(forms.setActiveCheckboxItem)})})}).call(this),function(){$(document).ready(function(){isOIDCAuthSelected=function(){return!!$(".js-actions-storage-dropdown").is(":visible")&&($("#actions-azure-oidc-auth-radio-button")[0].checked||$("#actions-azure-oidc-auth-radio-button")[0].checked)},$("#cr-enabled-warning").hide(),$(".js-enable-migrations").on("click",function(){this.checked?$("#migrations").addClass("invalid"):$("#migrations").removeClass("invalid")}),$(".js-enable-migrations").on("click",function(){this.checked&&($(".js-select-migrations-storage-provider[value='azure']").addClass("active"),$("input[name='migrations[blob_storage_type]'][value='azure']").prop("checked",!0),$("input[name='migrations[blob_storage_type]'][value='azure']").click(),$("#migrations-azure-storage").show(),$("#migrations-azure-container-name").show())}),$(".js-enable-actions").on("click",function(){this.checked&&!$("input[name='actions_storage[blob_provider]'][value='s3']").prop("checked")&&($(".js-select-actions-storage-provider[value='azure']").addClass("active"),$("input[name='actions_storage[blob_provider]'][value='azure']").prop("checked",!0),$("input[name='actions_storage[blob_provider]'][value='azure']").click(),$("#azure-storage").show())}),$(".js-test-migrations-settings").on("click",function(e){var t,i,a,n,s;e.preventDefault(),i=(t=$(e.target)).parents("form"),a=$("#migrations"),n=$(".js-testing-migrations"),(s=$("#migrations_test_result")).empty().hide(),n.show();var o={_csrf:$("input[name=_csrf]").val(),migrations:{blob_storage_type:i.find('input[name="migrations[blob_storage_type]"]:checked').val(),azure_connection_string:i.find('input[name="migrations[azure_connection_string]"]').val(),s3_bucket:i.find('input[name="migrations[s3_bucket]"]').val(),aws_access_key:i.find('input[name="migrations[aws_access_key]"]').val(),aws_secret_key:i.find('input[name="migrations[aws_secret_key]"]').val(),aws_service_url:i.find('input[name="migrations[aws_service_url]"]').val()}};$.ajax({type:"POST",url:t.val(),data:o,cache:!1}).fail(function(e){504==e.status?s.html("<p>The request timed out.<br/>Please try again.</p>").show():s.html("<p>Unable to connect to migrations provider.<br/>Please check the form and try again.</p>").show(),a.addClass("invalid")}).done(function(){s.html("<p>Migrations storage configuration successfully validated.</p>"),a.removeClass("invalid")}).always(function(){n.hide(),s.show(),toggleSubmit()})})})}.call(this);