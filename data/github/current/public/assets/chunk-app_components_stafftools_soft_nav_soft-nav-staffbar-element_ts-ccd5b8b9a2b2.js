"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_stafftools_soft_nav_soft-nav-staffbar-element_ts"],{70170:(e,t,r)=>{function n(e,t=0,{start:r=!0,middle:n=!0,once:o=!1}={}){let i,s=r,a=0,c=!1;function u(...l){if(c)return;let d=Date.now()-a;a=Date.now(),r&&n&&d>=t&&(s=!0),s?(s=!1,e.apply(this,l),o&&u.cancel()):(n&&d<t||!n)&&(clearTimeout(i),i=setTimeout(()=>{a=Date.now(),e.apply(this,l),o&&u.cancel()},n?t-d:t))}return u.cancel=()=>{clearTimeout(i),c=!0},u}function o(e,t=0,{start:r=!1,middle:o=!1,once:i=!1}={}){return n(e,t,{start:r,middle:o,once:i})}r.d(t,{n:()=>n,s:()=>o})},33637:(e,t,r)=>{r.r(t);var n=r(39595),o=r(69653),i=r(27260),s=r(54861);function a(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}let c={reload:"Reload",tracked_element_mismatch:"Some of the elements tracked by Turbo have changed:",request_failed:"The request failed",turbo_disabled:"Turbo is disabled",turbo_visit_control_is_reload:"Turbo visit control forced a reload",404:"404",500:"500",repo_mismatch:"Can't Turbo navigate between different repos",missing_turbo_body:"The new page does not have a data-turbo-body element"},u={turbo:"Turbo Drive","turbo.frame":"Turbo Frame",react:"React"},l="soft-nav:mechanism-count",d="soft-nav:history",h=class SoftNavStaffbarElement extends HTMLElement{connectedCallback(){this.initSoftNavTrackers(),this.states=[this.off,this.success,this.error],document.addEventListener(i.z.INITIAL,this.showOff),document.addEventListener(i.z.SUCCESS,this.showSuccess),document.addEventListener(i.z.ERROR,this.showError)}disconnectedCallback(){document.removeEventListener(i.z.INITIAL,this.showOff),document.removeEventListener(i.z.SUCCESS,this.showSuccess),document.removeEventListener(i.z.ERROR,this.showError)}buildSuccessMessage(){let e=document.createElement("div"),t=document.createElement("br"),r=document.createElement("h3");r.textContent="Summary",e.appendChild(r),e.appendChild(t.cloneNode()),e.appendChild(this.buildCounters()),e.appendChild(t.cloneNode());let n=document.createElement("h3");return n.textContent="History",e.appendChild(n),e.appendChild(t.cloneNode()),e.appendChild(this.buildTimeline()),e.childNodes}buildCounters(){let e=document.createElement("div");for(let[t,r]of Object.entries(this.softNavCounter))if(r>0){let n=document.createElement("p");n.textContent=`${r} ${u[t]} navigations`,e.appendChild(n)}return e}buildTimeline(){let e=document.createElement("div");for(let{url:t,mechanism:r,app:n}of this.softNavHistory){let o=this.buildTimelineItem(r,t,n);o&&e.appendChild(o)}return e}buildTimelineItem(e,t,r){let n=this.getTemplate(e)?.content?.cloneNode(!0);if(!n)return;let o=n.querySelector("[data-template-body]");if(o){if(o.textContent=t,""!==r){let e=document.createElement("i");e.textContent=`(${r}) `,o.prepend(e)}return n}}getTemplate(e){switch(e){case"turbo":return this.turboTemplate;case"turbo.frame":return this.turboFrameTemplate;case"react":return this.reactTemplate;default:return this.initialTemplate}}initSoftNavTrackers(){this.softNavCounter={turbo:Number((0,o.Gq)(`${l}-turbo`)),"turbo.frame":Number((0,o.Gq)(`${l}-turbo.frame`)),react:Number((0,o.Gq)(`${l}-react`))};let e=(0,o.Gq)(d);if(e)try{this.softNavHistory=JSON.parse(e)}catch{this.initHistory()}else this.initHistory()}initHistory(){this.softNavHistory=[],this.pushToHistory("hard")}incrementCounter(e){this.softNavCounter[e]++,(0,o.SO)(`${l}-${e}`,String(this.softNavCounter[e]))}pushToHistory(e){this.softNavHistory.push({url:window.location.href,mechanism:e,app:(0,s.fX)()||""}),(0,o.SO)(d,JSON.stringify(this.softNavHistory))}resetTrackers(){(0,o.Ai)(`${l}-turbo`),(0,o.Ai)(`${l}-turbo.frame`),(0,o.Ai)(`${l}-react`),(0,o.Ai)(d)}constructor(...e){super(...e),this.states=[],this.softNavHistory=[],this.showOff=()=>{this.resetTrackers(),this.initSoftNavTrackers(),this.hideAll(),this.off.show()},this.showSuccess=e=>{let{visitCount:t=0,mechanism:r="turbo"}=e;this.incrementCounter(r),this.pushToHistory(r),this.hideAll(),this.success.show(r),this.success.content=String(t),this.success.message=this.success.messageTemplate.replace("{count}",String(t)),this.success.messageTarget.textContent="",this.success.messageTarget.append(...this.buildSuccessMessage())},this.showError=e=>{this.resetTrackers();let[t,...r]=(e.error||"reload").split("-"),n=c[t];for(let e of r)n+=`
- ${e}`;this.hideAll(),this.error.show(),this.error.message=this.error.messageTemplate.replace("{reason}",n)},this.hideAll=()=>{for(let e of this.states)e.hide()}}};a([n.aC],h.prototype,"off",void 0),a([n.aC],h.prototype,"success",void 0),a([n.aC],h.prototype,"error",void 0),a([n.aC],h.prototype,"initialTemplate",void 0),a([n.aC],h.prototype,"turboTemplate",void 0),a([n.aC],h.prototype,"turboFrameTemplate",void 0),a([n.aC],h.prototype,"reactTemplate",void 0),h=a([n.p_],h);let f=class SoftNavStaffbarStateElement extends HTMLElement{connectedCallback(){this.render()}attributeChangedCallback(){this.render()}toggleIcons(e){if(e)switch(this.hideIcon(this.turboIcon),this.hideIcon(this.turboFrameIcon),this.hideIcon(this.reactIcon),e){case"turbo":this.showIcon(this.turboIcon);break;case"turbo.frame":this.showIcon(this.turboFrameIcon);break;case"react":this.showIcon(this.reactIcon)}}hideIcon(e){e.setAttribute("aria-hidden","true"),e.setAttribute("hidden","true")}showIcon(e){e.removeAttribute("aria-hidden"),e.removeAttribute("hidden")}constructor(...e){super(...e),this.show=e=>{this.hidden=!1,this.toggleIcons(e)},this.hide=()=>{this.hidden=!0},this.render=()=>{if(this.button&&(this.button.ariaLabel=`View soft navigation status (${this.message})`),this.contentTarget&&(this.contentTarget.textContent=this.content),this.messageTarget&&(this.messageTarget.textContent="",this.message)){let e=this.message.split("\n");for(let t of(this.messageTarget.textContent+=e.shift(),e))this.messageTarget.appendChild(document.createElement("br")),this.messageTarget.append(t)}}}};f.observedAttributes=["data-content","data-dialog","data-message-template"],a([n.CF],f.prototype,"content",void 0),a([n.CF],f.prototype,"message",void 0),a([n.CF],f.prototype,"messageTemplate",void 0),a([n.aC],f.prototype,"button",void 0),a([n.aC],f.prototype,"messageTarget",void 0),a([n.aC],f.prototype,"contentTarget",void 0),a([n.aC],f.prototype,"turboIcon",void 0),a([n.aC],f.prototype,"turboFrameIcon",void 0),a([n.aC],f.prototype,"reactIcon",void 0),f=a([n.p_],f)},27756:(e,t,r)=>{let n;function o(){if(!n)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return n}function i(){return n?.locale??"en-US"}r.d(t,{JK:()=>i,_$:()=>o}),function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{n=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},5728:(e,t,r)=>{r.d(t,{G:()=>o,K:()=>i});var n=r(97156);let o=n.XC?.readyState==="interactive"||n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),i=n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.cg?.addEventListener("load",e)})},97564:(e,t,r)=>{r.d(t,{G7:()=>c,XY:()=>u,fQ:()=>a});var n=r(5225),o=r(27756);function i(){return new Set((0,o._$)().featureFlags.map(e=>e.toLowerCase()))}let s=r(97156).X3?i:(0,n.A)(i);function a(){return Array.from(s())}function c(e){return s().has(e.toLowerCase())}let u={isFeatureEnabled:c}},14740:(e,t,r)=>{r.d(t,{k:()=>s,v:()=>a});var n=r(5225),o=r(97156);let i=(0,n.A)(function(){return o.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),s=(0,n.A)(function(){return"enterprise"===i()}),a="webpack-react-next"},74572:(e,t,r)=>{r.d(t,{A:()=>s,D:()=>a});var n=r(97156),o=r(51528);let i=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function s(e,t={throwQuotaErrorsOnSet:!1},r=n.cg,s=e=>e,a=e=>e){let c;try{if(!r)throw Error();c=r[e]||new i}catch{c=new i}let{throwQuotaErrorsOnSet:u}=t;function l(e){t.sendCacheStats&&(0,o.i)({incrementKey:e})}function d(e){try{if(c.removeItem(e),t.ttl){let t=`${e}:expiry`;c.removeItem(t)}}catch(e){}}return{getItem:function(e,t=new Date().getTime()){try{let r=c.getItem(e);if(!r)return null;let n=`${e}:expiry`,o=Number(c.getItem(n));if(o&&t>o)return d(e),d(n),l("SAFE_STORAGE_VALUE_EXPIRED"),null;return l("SAFE_STORAGE_VALUE_WITHIN_TTL"),s(r)}catch(e){return null}},setItem:function(e,r,n=new Date().getTime()){try{if(c.setItem(e,a(r)),t.ttl){let r=`${e}:expiry`,o=n+t.ttl;c.setItem(r,o.toString())}}catch(e){if(u&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:d,clear:c.clear,key:c.key,get length(){return c.length}}}function a(e){return s(e,{throwQuotaErrorsOnSet:!1},n.cg,JSON.parse,JSON.stringify)}},69653:(e,t,r)=>{r.d(t,{Ai:()=>i,Gq:()=>n,SO:()=>o});let{getItem:n,setItem:o,removeItem:i}=(0,r(74572).A)("sessionStorage")},27260:(e,t,r)=>{r.d(t,{z:()=>n});let n=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},54861:(e,t,r)=>{r.d(t,{BW:()=>o,Ff:()=>f,HK:()=>y,JA:()=>E,LM:()=>m,Pv:()=>T,Vy:()=>h,ZW:()=>S,dR:()=>C,di:()=>p,fX:()=>w,k9:()=>b,my:()=>g,r7:()=>I,wG:()=>v,xT:()=>d});var n=r(69653);let o="reload",i="soft-nav:fail",s="soft-nav:fail-referrer",a="soft-nav:referrer",c="soft-nav:marker",u="soft-nav:react-app-name",l="soft-nav:latest-mechanism";function d(){(0,n.SO)(c,"0"),(0,n.Ai)(a),(0,n.Ai)(i),(0,n.Ai)(s),(0,n.Ai)(u),(0,n.Ai)(l)}function h(e){(0,n.SO)(c,e)}function f(){(0,n.SO)(c,"0")}function m(){let e=(0,n.Gq)(c);return e&&"0"!==e}function p(){return(0,n.Gq)(c)}function v(){return!!g()}function g(){return(0,n.Gq)(i)}function b(e){(0,n.SO)(i,e||o),(0,n.SO)(s,window.location.href)}function y(){(0,n.SO)(a,window.location.href)}function C(){return(0,n.Gq)(a)||document.referrer}function S(){let e=w();e?(0,n.SO)(u,e):(0,n.Ai)(u)}function T(){return(0,n.Gq)(u)}function w(){return document.querySelector('meta[name="ui"]')?"ui":document.querySelector("react-app")?.getAttribute("app-name")}function E(e){(0,n.SO)(l,e)}function I(){return(0,n.Gq)(l)}},97156:(e,t,r)=>{r.d(t,{KJ:()=>n.KJ,Kn:()=>o.Kn,X3:()=>n.X3,XC:()=>o.XC,cg:()=>o.cg,fV:()=>o.fV,g5:()=>n.g5});var n=r(15572),o=r(86733)},86733:(e,t,r)=>{r.d(t,{Kn:()=>i,XC:()=>n,cg:()=>o,fV:()=>s});let n="undefined"==typeof document?void 0:document,o="undefined"==typeof window?void 0:window,i="undefined"==typeof history?void 0:history,s="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:"",href:""}:location},15572:(e,t,r)=>{r.d(t,{KJ:()=>i,X3:()=>o,g5:()=>s});var n=r(86733);let o=void 0===n.XC,i=!o;function s(){return!!o||!!n.XC.querySelector('react-app[data-ssr="true"]')}},51528:(e,t,r)=>{r.d(t,{X:()=>f,i:()=>u});var n=r(97156),o=r(5728),i=r(14740),s=r(97564),a=r(70170);let c=[];function u(e,t=!1,r=.5){if(!0!==(0,s.G7)("BROWSER_STATS_DISABLED")){if(r<0||r>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!n.XC?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=f(),e.bundler=i.v,Math.random()<r&&c.push(e),t?h():d()}}let l=null,d=(0,a.n)(async function(){await o.K,null==l&&(l=window.requestIdleCallback(h))},5e3);function h(){if(l=null,!c.length)return;let e=n.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],r=e.map(e=>JSON.stringify(e));for(;r.length>0;)t.push(function(e){let t=e.shift(),r=[t],n=t.length;for(;e.length>0&&n<=65536;){let t=e[0].length;if(n+t<=65536){let o=e.shift();r.push(o),n+=t}else break}return r}(r));return t}(c))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);c=[]}}function f(){return!!n.XC?.head?.querySelector('meta[name="user-staff"]')?.content}n.XC?.addEventListener("pagehide",h),n.XC?.addEventListener("visibilitychange",h)},5225:(e,t,r)=>{function n(...e){return JSON.stringify(e,(e,t)=>"object"==typeof t?t:String(t))}function o(e,t={}){let{hash:r=n,cache:o=new Map}=t;return function(...t){let n=r.apply(this,t);if(o.has(n))return o.get(n);let i=e.apply(this,t);return i instanceof Promise&&(i=i.catch(e=>{throw o.delete(n),e})),o.set(n,i),i}}r.d(t,{A:()=>o})}}]);
//# sourceMappingURL=app_components_stafftools_soft_nav_soft-nav-staffbar-element_ts-77ba9693bdc9.js.map