(function(){window.forms={checkInputRadioField:function(){var e,a,n;return n=(e=$(this)).data("value"),"string"==typeof(a=$(e.data("input-field-id")).val())&&0!==a.length?e.val(n):e.val("")},setActiveRadioItem:function(){return $(this).parent().addClass("active").siblings().removeClass("active")},setActiveCheckboxItem:function(){return $(this).parent().toggleClass("active")}},$(function(){return $(document).ready(function(){return $(".radio-item input:checked, .checkbox-item input:checked").parent().addClass("active"),$(".radio-item input").click(forms.setActiveRadioItem),$(".checkbox-item input").click(forms.setActiveCheckboxItem)})})}).call(this),function(){$(document).ready(function(){isOIDCAuthSelected=function(){return!!$(".js-actions-storage-dropdown").is(":visible")&&($("#actions-azure-oidc-auth-radio-button")[0].checked||$("#actions-azure-oidc-auth-radio-button")[0].checked)},$("#cr-enabled-warning").hide(),$(".js-enable-packages").on("click",function(){this.checked?$("#packages").addClass("invalid"):$("#packages").removeClass("invalid")}),$(".js-enable-packages").on("click",function(){this.checked&&($(".js-select-packages-storage-provider[value='azure']").addClass("active"),$("input[name='packages[blob_storage_type]'][value='azure']").prop("checked",!0),$("input[name='packages[blob_storage_type]'][value='azure']").click(),$("#packages-azure-storage").show(),$("#packages-azure-container-name").show())}),disableContainerEcosystem=function(){$("div[id='container-radio-list']").removeClass("enabled-container"),$("div[id='container-radio-list']").addClass("disabled-container"),$("p[id='cr-sdi-info']")[0].removeAttribute("hidden")},enableContainerEcosystem=function(){$("div[id='cr-enabled-warning']")[0].style.display="none",$("div[id='container-radio-list']").removeClass("disabled-container"),$("div[id='container-radio-list']").addClass("enabled-container"),$("p[id='cr-sdi-info']")[0].setAttribute("hidden",!0)},loadContainerEcosystem=function(){sdiStatus=$("input[id='subdomain-isolation-checkbox']")[0].checked,0==sdiStatus?disableContainerEcosystem():enableContainerEcosystem()},loadContainerEcosystem(),$("#subdomain-isolation-checkbox").on("click",function(){this.checked||!$("input[name='feature_toggles[packages][container_enabled]'][value='true']").prop("checked")&&!$("input[name='feature_toggles[packages][container_enabled]'][value='readonly']").prop("checked")?this.checked?enableContainerEcosystem():disableContainerEcosystem():($("input[name='feature_toggles[packages][container_enabled]']").each(function(){$(this).prop("checked",!1)}),$("input[name='feature_toggles[packages][container_enabled]']").each(function(){$(this).parent().removeClass("active")}),$("input[name='feature_toggles[packages][container_enabled]'][value='false']").prop("checked",!0),$("input[name='feature_toggles[packages][container_enabled]'][value='false']").parent().addClass("active"),$("div[id='cr-enabled-warning']")[0].style.display="block",disableContainerEcosystem())}),$(".js-enable-actions").on("click",function(){this.checked&&!$("input[name='actions_storage[blob_provider]'][value='s3']").prop("checked")&&($(".js-select-actions-storage-provider[value='azure']").addClass("active"),$("input[name='actions_storage[blob_provider]'][value='azure']").prop("checked",!0),$("input[name='actions_storage[blob_provider]'][value='azure']").click(),$("#azure-storage").show())}),$(".js-show-docker-v2-warning").on("click",function(){toggleDockerWarning()}),toggleDockerWarning=function(){sdiStatus=$("input[id='subdomain-isolation-checkbox']")[0].checked,dockerDisabledStatus=$("input[id='docker-eco-disabled']")[0].checked,!1===sdiStatus&&!1===dockerDisabledStatus?$("div[id='docker-v2-warning']")[0].style.display="block":$("div[id='docker-v2-warning']")[0].style.display="none"},toggleDockerWarning(),$(".js-test-packages-settings").on("click",function(e){var a,n,t,i,s;e.preventDefault(),n=(a=$(e.target)).parents("form"),t=$("#packages"),i=$(".js-testing-packages"),(s=$("#packages_test_result")).empty().hide(),i.show();var c={_csrf:$("input[name=_csrf]").val(),packages:{blob_storage_type:n.find('input[name="packages[blob_storage_type]"]:checked').val(),azure_connection_string:n.find('input[name="packages[azure_connection_string]"]').val(),azure_container_name:n.find('input[name="packages[azure_container_name]"]').val(),s3_bucket:n.find('input[name="packages[s3_bucket]"]').val(),aws_access_key:n.find('input[name="packages[aws_access_key]"]').val(),aws_secret_key:n.find('input[name="packages[aws_secret_key]"]').val(),service_url:n.find('input[name="packages[service_url]"]').val()}};$.ajax({type:"POST",url:a.val(),data:c,cache:!1}).fail(function(e){504==e.status?s.html("<p>The request timed out.<br/>Please try again.</p>").show():s.html("<p>Unable to connect to packages provider.<br/>Please check the form and try again.</p>").show(),t.addClass("invalid")}).done(function(){s.html("<p>Packages storage configuration successfully validated.</p>"),t.removeClass("invalid")}).always(function(){i.hide(),s.show(),toggleSubmit()})})})}.call(this);