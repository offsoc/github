<%# erblint:counter DeprecatedComponentsCounter 1 %>
<% unless current_user.dismissed_notice?(:dashboard_promo_codespaces_ga) %>
  <div class="js-notice">
    <%= form_tag(
      dismiss_notice_path(:dashboard_promo_codespaces_ga),
      class: "Box position-relative rounded-2 mb-4 p-3 js-notice-dismiss overflow-hidden",
      style: "z-index: 1; max-width: 300px;"
    ) do %>
      <picture>
        <source srcset="<%= image_path("modules/dashboard/codespaces/bg.webp") %>" type="image/webp">
        <img src="<%= image_path("modules/dashboard/codespaces/bg.jpg") %>" alt="" width="632" height="500" class="position-absolute top-0 left-0 width-full" style="pointer-events: none; z-index: -1; height: 100%; height: 100%; object-fit: cover">
      </picture>

      <div class="position-absolute p-2" style="top: 4px; right: 6px;">
        <%= render(Primer::Beta::CloseButton.new(type: :submit, color: :on_emphasis, style: "color: #ffffff !important")) %>
      </div>

      <h3 class="h4 col-10" style="color: #ffffff !important;">
        Start coding instantly with GitHub Codespaces
      </h3>

      <p class="mt-2 mb-4 col-8 color-fg-muted text-small" style="color: rgba(255, 255, 255, 0.67) !important;">
        Spin up fully configured dev environments on powerful VMs that start in seconds. Get up to 60 hours a month of free time.
      </p>

      <style>
        .btn-codespaces-dashboard {
          background-color: rgba(255, 255, 255, 0.12) !important;
          border-color: #673281 !important;
          color: #ffffff !important;
          box-shadow: unset !important;
        }
        .btn-codespaces-dashboard:hover,
        .btn-codespaces-dashboard:focus {
          background-color: rgba(255, 255, 255, 0.07) !important;
        }
        .btn-codespaces-dashboard:active {
          background-color: rgba(255, 255, 255, 0.09) !important;
        }
      </style>

      <%= render Primer::ButtonComponent.new(
        size: :medium,
        tag: :a,
        href: codespaces_path,
        block: true,
        classes: "btn-codespaces-dashboard",
        data: analytics_click_attributes(
          category: "Dashboard notices",
          label: "ref_page:/",
          action: "click to Get Started with Codespaces")
      ) do %>
        Get started
      <% end %>
    <% end %>
  </div>
<% end %>
