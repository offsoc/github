"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_slash-command-expander-element_slash-command-suggester_ts"],{55150:(e,t,n)=>{n.d(t,{Bu:()=>u,YV:()=>a,o:()=>i});let r=null;function l(e){return e instanceof HTMLSelectElement||(o(e)?e.checked!==e.defaultChecked:e.value!==e.defaultValue)}function s(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}function o(e){return e instanceof HTMLInputElement&&/checkbox|radio/.test(e.type)}function a(e,t){var n,o,a,i,u,c;let d;let f=null!==(n=null==t?void 0:t.scope)&&void 0!==n?n:document,m=null!==(o=null==t?void 0:t.selector)&&void 0!==o?o:".js-session-resumable",h=null!==(a=null==t?void 0:t.fields)&&void 0!==a?a:f.querySelectorAll(m),p=null!==(i=null==t?void 0:t.keyPrefix)&&void 0!==i?i:"session-resume:",y=null!==(u=null==t?void 0:t.storageFilter)&&void 0!==u?u:l;try{d=null!==(c=null==t?void 0:t.storage)&&void 0!==c?c:sessionStorage}catch(e){return}let g=`${p}${e}`,b=[];for(let e of h)s(e)&&b.push(e);let v=b.filter(e=>!!e.id&&y(e)&&e.form!==r).map(e=>e instanceof HTMLSelectElement?[e.id,Array.from(e.selectedOptions).map(e=>e.value)]:[e.id,e.value]);if(v.length)try{let e=d.getItem(g);if(null!==e){let t=JSON.parse(e).filter(function(e){return!v.some(t=>t[0]===e[0])});v=v.concat(t)}d.setItem(g,JSON.stringify(v))}catch(e){}}function i(e,t){var n,r;let l,a;let i=null!==(n=null==t?void 0:t.keyPrefix)&&void 0!==n?n:"session-resume:";try{l=null!==(r=null==t?void 0:t.storage)&&void 0!==r?r:sessionStorage}catch(e){return}let u=`${i}${e}`;try{a=l.getItem(u)}catch(e){}if(!a)return;let c=[],d=[];for(let[e,t]of JSON.parse(a)){let n=new CustomEvent("session:resume",{bubbles:!0,cancelable:!0,detail:{targetId:e,targetValue:t}});if(document.dispatchEvent(n)){let n=document.getElementById(e);if(s(n)){if(n instanceof HTMLSelectElement){for(let e of n.options)e.selected=t.includes(e.value);c.push(n)}else o(n)?(n.checked=!n.defaultChecked,c.push(n)):n.value===n.defaultValue&&(n.value=t,c.push(n))}else d.push([e,t])}}if(0===d.length)try{l.removeItem(u)}catch(e){}else l.setItem(u,JSON.stringify(d));setTimeout(function(){for(let e of c)e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))},0)}function u(e){r=e.target,setTimeout(function(){e.defaultPrevented&&(r=null)},0)}},59408:(e,t,n)=>{n.d(t,{L:()=>r});function r(e){let t=e||window.location,n=document.head&&document.head.querySelector("meta[name=session-resume-id]");return n instanceof HTMLMetaElement&&n.content||t.pathname}},68824:(e,t,n)=>{n.d(t,{onChange:()=>g,onValue:()=>u});var r=n(52976),l=n(55150),s=n(27193),o=n(62794),a=n(59408),i=n(5225);async function u(e,t,n){if("/"!==t)return;let r=n.getAttribute("data-url");if(!r)return;let l=n.querySelector(".js-slash-command-suggestion-form");if(!l)return;let o=l.querySelector(".js-data-url-csrf");if(!o)return;let a=new FormData(l);e.isLoading();try{let t=await (0,s.Ts)(document,r,{method:"PATCH",body:a,headers:{Accept:"text/html","Scoped-CSRF-Token":o.value}});if(!t)return;c(e,t)}catch{e.showError()}}function c(e,t){let n=t.firstElementChild;if(!n)return;t.children.length>1&&function(e,t){let n=t.parentElement?.parentElement;if(!n)return;let r=n.querySelector(".drag-and-drop .default"),l=!1;r&&(l=r.hidden,r.hidden=!0),r?.parentElement?.prepend(e),setTimeout(()=>{r&&(r.hidden=l),e.remove()},5e3)}(t.lastElementChild,e),n.hasAttribute("data-reload-suggestions")&&(w=(0,i.A)(v));let r=n.getAttribute("data-component-type"),s=n.hasAttribute("data-submit-form"),o=n.getAttribute("data-custom-event");"fill"===r?(/<\/?[a-z][\s\S]*>/i.test(n.innerHTML)?e.setValue(n.innerHTML.trim()):e.setValue(n.textContent?.trim()||""),s&&function(e){let t=e.closest("form");if(!t){e.dispatchEvent(new CustomEvent("request-submit",{bubbles:!0}));return}if(t.requestSubmit)t.requestSubmit();else{let e=t.querySelector("[type='submit']");e?.click()}}(e)):"menu"===r||"error"===r?e.setMenu(n.querySelector(".js-slash-command-menu")):"action"===r?e.closeMenu():"embedded_form"===r?function(e,t){let n=e.closest(".js-slash-command-surface"),r=e.closest("form"),l=n||r;if(!l)return;l.hidden=!0;let s=t.querySelector('[data-component="form"]');l.insertAdjacentElement("afterend",s);let o=document.activeElement;m(s);let a=()=>{l.hidden=!1,s.remove()};h(s,a),p(s.getElementsByTagName("form")[0],s,o,a),y(s,e,a)}(e,n):"dialog_form"===r?function(e,t){let n=t.querySelector(".js-slash-command-menu");e.setMenu(n,!0);let r=n.querySelector("form"),l=document.activeElement;m(r);let s=()=>{e.closeMenu()};p(r,r,l,s),h(r,s),y(r,e,s)}(e,n):"modal_form"===r&&function(e,t){let n=t.querySelector('[data-component="form"]');e.insertAdjacentElement("afterend",n);let r=document.activeElement;m(n);let l=()=>{n.remove()};h(n,l),p(n.getElementsByTagName("form")[0],n,r,l),y(n,e,l)}(e,n),o&&e.dispatchEvent(new CustomEvent(o,{bubbles:!0,detail:n})),(0,l.o)((0,a.L)())}function d(e){if(!(e.metaKey&&"Enter"===e.key))return;e.preventDefault(),e.stopPropagation();let t=e.target,n=t?.form;if(n){if(n.requestSubmit)n.requestSubmit();else{let e=n.querySelector("[type='submit']");e?.click()}}}function f(e){let t=new FormData(e),n="";for(let e of t)n+=e[0]+e[1].toString();return n}function m(e){let t=!1;for(let n of e.querySelectorAll("select,input,textarea"))"hidden"!==n.type&&(t||(n.focus(),t=!0),n.addEventListener("keydown",d))}function h(e,t){for(let n of e.querySelectorAll("[data-close-dialog]"))n.addEventListener("click",e=>{e.preventDefault(),(0,l.YV)((0,a.L)(),{selector:".js-session-resumable"}),t()})}function p(e,t,n,r){let s=f(e);t.addEventListener("keydown",t=>{"Escape"===t.key&&(s===f(e)||confirm("Are you sure you want to dismiss the form?"))&&((0,l.YV)((0,a.L)(),{selector:".js-session-resumable"}),r(),n&&n.focus())})}function y(e,t,n){e.addEventListener("submit",async e=>{e.preventDefault();let r=e.target,l=r.querySelector(".js-data-url-csrf");if(!l)return;let o=r.getAttribute("action");if(!o)return;!function(e){let t=e.closest(".js-slash-command-surface"),n=e.closest("form"),r=t||n;if(r)for(let e of r.querySelectorAll("[data-disable-with][disabled]"))e.disabled=!1}(t);let a=new FormData(r),i=await (0,s.Ts)(document,o,{method:"PATCH",body:a,headers:{Accept:"text/html","Scoped-CSRF-Token":l.value}});n(),i&&c(t,i)})}function g(e,t,n,r){"/"===t&&(e.isLoading(),n(b(e.getAttribute("data-slash-command-url"),r,e)))}async function b(e,t,n){try{let[n,l]=await w(e),s=n.querySelector(".js-slash-command-menu-items"),a=function(e,t){let n=t.toLowerCase().trim();return n?(0,o.d)(e,e=>{let t=(e.getAttribute("data-text")||"").trim().toLowerCase(),l=(0,r.dt)(t,n);return l>0?{score:l,text:t}:null},r.UD):e}(l,t);if(s){for(let e of(s.textContent="",l))if(e.classList.contains("js-group-divider")){let t=e.getAttribute("data-group-id"),n=a.filter(e=>e.getAttribute("data-group-id")===t);n.length>0&&(s.append(e),s.append(...n))}}return{fragment:n,matched:a.length>0}}catch(e){throw n.showError(),Error(e)}}async function v(e){let t=(await (0,s.Ts)(document,e)).firstElementChild,n=t.querySelectorAll(".js-slash-command-menu-items li");return[t,[...n]]}let w=(0,i.A)(v)},27193:(e,t,n)=>{n.d(t,{Ee:()=>c,b4:()=>d,Ts:()=>u});var r=n(46650);let l=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),this.response=t}};var s=n(6440),o=n(2240);let a="server-x-safe-html",i=s.wA.createPolicy(a,{createHTML:(e,t)=>o.b.apply({policy:()=>(!function(e,t,n=!1){let r=t.headers.get("content-type")||"";if(!n&&!r.startsWith("text/html"))throw new l(`expected response with text/html, but was ${r}`,t);if(n&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new l(`expected response with text/html or application/json, but was ${r}`,t);let s=t.headers.get("x-html-safe");if(s){if(!e.includes(s))throw new l("response X-HTML-Safe nonce did not match",t)}else throw new l("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(document),t),e),policyName:a,fallback:e,silenceErrorReporting:!0})});async function u(e,t,n){let l=new Request(t,n);l.headers.append("X-Requested-With","XMLHttpRequest");let s=await self.fetch(l);if(s.status<200||s.status>=300)throw Error(`HTTP ${s.status}${s.statusText||""}`);let o=i.createHTML(await s.text(),s);return(0,r.B)(e,o)}function c(e,t,n=1e3,r=[200],l=[202]){return async function n(s){let o=new Request(e,t);o.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(o);if(l.includes(a.status))return await new Promise(e=>setTimeout(e,s)),n(1.5*s);if(r.includes(a.status))return a;if(a.status<200||a.status>=300)throw Error(`HTTP ${a.status}${a.statusText||""}`);throw Error(`Unexpected ${a.status} response status from poll endpoint`)}(n)}async function d(e,t,n){let{wait:r=500,acceptedStatusCodes:l=[200],max:s=3,attempt:o=0}=n||{},a=async()=>new Promise((n,a)=>{setTimeout(async()=>{try{let r=new Request(e,t);r.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(r);if(l.includes(a.status)||o+1===s)return n(a);n("retry")}catch(e){a(e)}},r*o)}),i=await a();return"retry"!==i?i:d(e,t,{wait:r,acceptedStatusCodes:l,max:s,attempt:o+1})}},62794:(e,t,n)=>{n.d(t,{d:()=>r});function r(e,t,n){return[...function*(e,t){for(let n of e){let e=t(n);null!=e&&(yield e)}}(e,e=>{let n=t(e);return null!=n?[e,n]:null})].sort((e,t)=>n(e[1],t[1])).map(([e])=>e)}},52976:(e,t,n)=>{function r(e,t,n=.1){let r=o(e,t,n);return r&&-1===t.indexOf("/")&&(r+=o(e.substring(e.lastIndexOf("/")+1),t,n)),r}function l(e,t,n){if(t){let r=e.innerHTML.trim().match(n||function(e){let t=e.toLowerCase().split(""),n="",r=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");r?(n+=`(.*)(${t})`,r=!1):n+=`([^${t}]*?)(${t})`}return RegExp(`${n}(.*?)$`,"i")}(t));if(!r)return;let l=!1,s=[];for(let e=1;e<r.length;++e){let t=r[e];t&&(e%2==0?l||(s.push("<mark>"),l=!0):l&&(s.push("</mark>"),l=!1),s.push(t))}e.innerHTML=s.join("")}else{let t=e.innerHTML.trim(),n=t.replace(/<\/?mark>/g,"");t!==n&&(e.innerHTML=n)}}n.d(t,{He:()=>l,UD:()=>a,dt:()=>r});let s=new Set([" ","-","_"]);function o(e,t,n=.1){let r=e;if(r===t)return 1;let l=r.length,o=0,a=0,i=!0;for(let e of t){let t=r.indexOf(e.toLowerCase()),u=r.indexOf(e.toUpperCase()),c=Math.min(t,u),d=c>-1?c:Math.max(t,u);if(-1===d)return 0;o+=.1,r[d]===e&&(o+=.1),0===d&&(o+=.9-n,i&&(a=1)),s.has(r.charAt(d-1))&&(o+=.9-n),r=r.substring(d+1,l),i=!1}let u=t.length,c=o/u,d=(u/l*c+c)/2;return a&&d+n<1&&(d+=n),d}function a(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:e.text>t.text?1:0}},46650:(e,t,n)=>{n.d(t,{B:()=>a});var r=n(6440),l=n(2240);let s="parse-html-no-op",o=r.wA.createPolicy(s,{createHTML:e=>l.b.apply({policy:()=>e,policyName:s,fallback:e,sanitize:!1,fallbackOnError:!0})});function a(e,t){let n=e.createElement("template");return n.innerHTML=o.createHTML(t),e.importNode(n.content,!0)}}}]);
//# sourceMappingURL=app_assets_modules_github_slash-command-expander-element_slash-command-suggester_ts-21340bc3d2bd.js.map