"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_organizations_settings_codespaces_policy_form_constraint_row_allowed-values-in-672002"],{11945:(e,t,l)=>{l.r(t);var a=l(39595);function o(e,t,l,a){var o,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,l):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,l,a);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(r=(s<3?o(r):s>3?o(t,l,r):o(t,l))||r);return s>3&&r&&Object.defineProperty(t,l,r),r}let s=RegExp("^(?:(?=[^:/]{1,253})(?!-)[a-zA-Z0-9-]{1,63}(?<!-)(?:.(?!-)[a-zA-Z0-9-]{1,63}(?<!-))*(?::[0-9]{1,5})?/)?((?![._-])(?:[a-z0-9._-]*)(?<![._-])(?:/(?![._-])[a-z0-9._-]*(?<![._-]))*)(?::(?![.-])[a-zA-Z0-9_.-]{1,128})?$"),r=class AllowedValuesInputElement extends HTMLElement{connectedCallback(){(JSON.parse(this.allowedValuesFormGroup.getAttribute("data-value"))||[]).map(e=>{this.allowedValues={[e]:1,...this.allowedValues}})}updateDisplayText(){let e=Object.keys(this.allowedValues).join(", ");e.length>0&&e.length<100?this.selectedAllowedValuesText.textContent=e:e.length>0&&e.length>100?this.selectedAllowedValuesText.textContent=`${e.slice(0,100)}...`:this.selectedAllowedValuesText.textContent="None"}saveAllowedValuesConstraintChange(){let e=Object.keys(this.allowedValues),t=this.allowedValuesInput.getAttribute("data-constraint-name");this.dispatchEvent(new CustomEvent("commit",{detail:{values:e,constraintName:t}}))}addAllowedValue(){let{value:e}=this.allowedValuesInput,t=e.replace(/\s/g,"").split(","),l=[];t.flatMap(e=>{if(!this.isValid(e))return l.push(e),[];if(this.allowedValues[e])return[];this.allowedValues={[e]:1,...this.allowedValues},this.saveAllowedValuesConstraintChange();let t=this.allowedValueTemplate.cloneNode(!0);t.setAttribute("data-target","allowed-values-input.allowedValue"),t.querySelector("button").addEventListener("click",()=>{this.removeAllowedValueAndDiv(e,t)}),t.querySelector("p").textContent=e,t.hidden=!1,this.allowedValuesList.appendChild(t)}),this.allowedValuesInput.value="",l.length>0?(this.allowedValuesInput.value=l.join(", "),this.toggleMaxValueError({showError:!0})):this.toggleMaxValueError({showError:!1}),this.updateDisplayText()}isValid(e){if("codespaces.allowed_base_images"===this.allowedValuesInput.getAttribute("data-constraint-name")){this.errorMessage="Value must be a valid docker image or image prefix ending in '*'.";let t=e.replace(/(\*|:\*)$/g,"");return e.length>0&&s.test(t)&&!t.includes("*")}return e.length>0&&e.length<100}toggleMaxValueError({showError:e}){var t,l;if(e){this.allowedValuesFormGroup.classList.add("errored"),this.allowedValuesValidationErrorMsg.textContent=this.errorMessage,null!==(t=this.allowedValuesValidationErrorMsg)&&(t.hidden=!1);return}this.allowedValuesFormGroup.classList.remove("errored"),null!==(l=this.allowedValuesValidationErrorMsg)&&(l.hidden=!0)}handleRemoveValue(e){let t=e.target.closest('[data-target="allowed-values-input.deleteButtonContainer"]');t&&this.removeAllowedValueAndDiv(t.getAttribute("data-value")||"",t)}removeAllowedValueAndDiv(e,t){delete this.allowedValues[e],t.remove(),this.saveAllowedValuesConstraintChange(),this.updateDisplayText()}handleInputChange(){0===this.allowedValuesInput.value.length&&this.toggleMaxValueError({showError:!1})}constructor(...e){super(...e),this.allowedValues={},this.errorMessage="Value must be between 0 and 100 characters."}};o([a.aC],r.prototype,"allowedValuesFormGroup",void 0),o([a.aC],r.prototype,"allowedValuesInput",void 0),o([a.aC],r.prototype,"selectedAllowedValuesText",void 0),o([a.aC],r.prototype,"allowedValuesList",void 0),o([a.aC],r.prototype,"allowedValueTemplate",void 0),o([a.aC],r.prototype,"allowedValuesValidationErrorMsg",void 0),o([a.aC],r.prototype,"deleteButton",void 0),r=o([a.p_],r)}}]);
//# sourceMappingURL=app_components_organizations_settings_codespaces_policy_form_constraint_row_allowed-values-in-672002-8dbd6cdb24ff.js.map