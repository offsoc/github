"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{57442:(e,r,t)=>{t.d(r,{M_:()=>n,Nc:()=>d,Uk:()=>a});var n,i=t(55293);let a="500px";function d(e){let[r,t]=function(e){let[r,t]=(0,i.useState)(e),n=(0,i.useRef)(r);return[n,e=>{n.current=e,t(e)}]}("LOADING"),n=(0,i.useRef)(null),a=(0,i.useRef)(null),d=(0,i.useRef)(null),c=(0,i.useRef)({untimed:!0}),s=(0,i.useCallback)(r=>(function(e,r,t,n,i,a,d){if(e.origin!==r)return;let o=function(e){var r;let t=e.data;if(!t)return null;if("string"==typeof t)try{t=JSON.parse(t)}catch{return null}return"object"==typeof(r=t)&&r&&"render"===r.type&&"string"==typeof r.body&&"object"==typeof r.payload?t:null}(e);if(!o){a("ERROR");return}let c=o.body,s=null!=o.payload?o.payload:void 0,u=t.current?.contentWindow;switch(c){case"hello":(i.current??{untimed:!0}).hello=Date.now(),l(u,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),l(u,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s&&d(s.error??null),a("ERROR");break;case"loading":a("LOADING");break;case"loaded":a("LOADED");break;case"ready":s&&"number"==typeof s.height&&n.current&&(n.current.style.height=`${s.height}px`),a("READY");break;case"resize":s&&"number"==typeof s.height&&n.current&&(n.current.style.height=`${s.height}px`);break;case"code_rendering_service:container:get_size":l(u,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:n.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!t.current||!n.current)return;!function(e,r){let t=e.getAttribute("data-content");if(!t)return;let n={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(t).data,width:r.getBoundingClientRect().width}}};l(e.contentWindow,n)}(t.current,n.current)}})(r,e,a,d,c,t,e=>n.current=e),[e,t]);return(0,i.useEffect)(()=>{o(c.current);let e=e=>{("LOADING"===r.current||"LOADED"===r.current)&&(!e||c.current.hello)&&t("ERROR")};return c.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{o(c.current)}},[r,t]),(0,i.useEffect)(()=>(window.addEventListener("message",s),()=>window.removeEventListener("message",s)),[s]),{renderState:r.current,errorMsg:n.current,iFrameRef:a,containerRef:d}}function o(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function l(e,r){e&&e.postMessage&&e.postMessage(JSON.stringify(r),"*")}!function(e){e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY"}(n||(n={}))},69759:(e,r,t)=>{t.r(r),t.d(r,{default:()=>u});var n=t(9449),i=t(95140),a=t(65481),d=t(75177),o=t(38553),l=t(69909),c=t(55293),s=t(57442);function u({identityUuid:e,size:r,type:t,url:l}){let[c]=(0,i.I)(()=>window.location.origin,"https://www.github.com",[]),u=new URL(l,c).origin,{renderState:g,errorMsg:p,iFrameRef:f,containerRef:b}=(0,s.Nc)(u);if("ipynb"===t&&r>3e7||r>2e8)return(0,n.jsx)(a.A,{variant:"danger",children:"Sorry, this is too big to display."});let m=g!==s.M_.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"},R={height:s.Uk,padding:0,background:"none"};return(0,n.jsx)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,n.jsxs)(d.A,{"data-hpc":!0,"data-host":u,"data-type":t,ref:b,sx:{width:1024,...g!==s.M_.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...g===s.M_.READY?R:{}},children:[g===s.M_.ERROR?(0,n.jsx)(h,{error:p}):g!==s.M_.READY?(0,n.jsx)(o.A,{size:"large",sx:{mx:"auto"}}):null,g!==s.M_.ERROR&&(0,n.jsx)(d.A,{as:"iframe",ref:f,src:`${l}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...m},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function h({error:e}){if(!e)return(0,n.jsx)(a.A,{variant:"danger",children:"Unable to render code block"});let r=e.split("\n");return(0,n.jsxs)(a.A,{variant:"danger",children:[(0,n.jsx)(l.A,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,n.jsx)("p",{children:r.map((e,r)=>(0,n.jsxs)(c.Fragment,{children:[e,(0,n.jsx)("br",{})]},`error-line-${r}`))})]})}try{u.displayName||(u.displayName="FileRendererBlob")}catch{}try{h.displayName||(h.displayName="FileRendererErrorMessage")}catch{}}}]);
//# sourceMappingURL=ui_packages_file-renderer-blob_FileRendererBlob_tsx-67765ff3a690.js.map