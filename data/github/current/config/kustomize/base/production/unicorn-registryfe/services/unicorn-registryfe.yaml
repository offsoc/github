# https://github.com/github/kube/blob/master/docs/kubernetes/resources/service.md
apiVersion: v1
kind: Service
metadata:
  name: unicorn-registryfe
  labels:
    service: unicorn-registryfe
  annotations:
    # These annotations tell Moda to export metadata about this service to
    # consul (via github/kube-service-exporter) so GLB knows how to include it.
    # The domain-name value here is not used anywhere, but necessary to enable
    # this feature.
    moda.github.net/domain-name: "pkg.github.com"
    moda.github.net/dns-registration-enabled: "false"
    moda.github.net/load-balancer-type: glb-http:registry
spec:
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: 80
    # Used to connect this service to GLB.
    nodePort: 32018
  selector:
    service: unicorn-registryfe
  type: LoadBalancer
