{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/deployment-review.json",
  "title": "DeploymentReview",
  "description": "A record of deployment approval decisions",
  "type": "object",
  "definitions": {
    "comment": {
      "type": "string"
    },
    "state": {
      "type": "string"
    },
    "environments": {
      "type": "array",
      "items": {
        "$ref": "https://schema.github.com/v3/simple-environment.json#"
      }
    }
  },
  "links": [
    {
      "title": "Approve or reject a pending deployment",
      "method": "POST",
      "rel": "review",
      "href": "/repositories/{repository_id}/actions/runs/{run_id}/pending_deployments",
      "schema": {
        "properties": {
          "state": {
            "type": "string",
            "enum": [
              "approved",
              "rejected"
            ]
          },
          "comment": {
            "$ref": "#/definitions/comment"
          },
          "environment_ids": {
            "type": "array",
            "items": {
              "type": "integer"
            }
          }
        },
        "type": "object",
        "required": [
          "comment",
          "state",
          "environment_ids"
        ],
        "additionalProperties": false
      }
    }
  ],
  "properties": {
    "comment": {
      "$ref": "#/definitions/comment"
    },
    "state": {
      "$ref": "#/definitions/state"
    },
    "user": {
      "$ref": "https://schema.github.com/v3/simple-user.json#"
    },
    "environments": {
      "$ref": "#/definitions/environments"
    }
  },
  "additionalProperties": false,
  "required": [
    "comment",
    "state",
    "user",
    "environments"
  ]
}
