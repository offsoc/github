---
summary: 'Create a custom deployment protection rule on an environment'
description: |-
  Enable a custom deployment protection rule for an environment.

  The authenticated user must have admin or owner permissions to the repository to use this endpoint.

  For more information about the app that is providing this custom deployment rule, see the [documentation for the `GET /apps/{app_slug}` endpoint](${externalDocsUrl}/rest/apps/apps#get-an-app).

  OAuth app tokens and personal access tokens (classic) need the `repo` scope to use this endpoint.
tags:
  - repos
operationId: repos/create-deployment-protection-rule
externalDocs:
  description: API method documentation
  url: '${externalDocsUrl}/rest/deployments/protection-rules#create-a-custom-deployment-protection-rule-on-an-environment'
x-github-internal:
  path: /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules
  http-method: post
  published: true
  owner: '@github/actions-fusion-reviewers'
x-github-releases:
  - api.github.com
  - ghec
  - ghes: '>= 3.10'
parameters:
  - $ref: '../../components/parameters/environment-name.yaml'
  - $ref: '../../components/parameters/repo.yaml'
  - $ref: '../../components/parameters/owner.yaml'
requestBody:
  content:
    application/json:
      schema:
        type: object
        properties:
          integration_id:
            type: integer
            description: The ID of the custom app that will be enabled on the environment.
      examples:
        default:
          value:
            integration_id: 5
  required: true
responses:
  '201':
    description: The enabled custom deployment protection rule
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/deployment-protection-rule.yaml'
        examples:
          default:
            $ref: '../../components/examples/deployment-protection-rule.yaml'
x-github:
  githubCloudOnly: false
  enabledForGitHubApps: true
  category: deployments
  subcategory: protection-rules
