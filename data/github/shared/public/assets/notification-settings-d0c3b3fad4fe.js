"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["notification-settings"],{63416:(e,t,i)=>{var s,n,a,l=i(79840),r=i(86233),o=i(9449),d=i(55293),c=i(82897),u=i(75177),m=i(73729),p=i(86519);function h(e){return(0,o.jsx)(u.A,{sx:{display:"flex",width:"100%",flexDirection:"column",borderColor:"border.default",borderWidth:1,borderStyle:"solid",borderRadius:2},children:e.children})}try{h.displayName||(h.displayName="Table")}catch{}function x(e){return(0,o.jsx)(u.A,{sx:{backgroundColor:"canvas.inset",borderRadius:2,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid"},children:(0,o.jsx)(m.A,{as:"h2",sx:{display:"flex",justifyContent:"space-between",fontSize:1,mb:0,pl:3,py:3},children:e.children})})}try{x.displayName||(x.displayName="Header")}catch{}var f=i(69909);function y(e){return(0,o.jsx)(u.A,{sx:{display:"flex",py:3,mx:3,borderColor:"border.default",borderBottomWidth:!1===e.separator?0:1,borderBottomStyle:"solid",...e.sx},children:(0,o.jsxs)("div",{className:"mr-sm-0 ml-sm-0",children:[(0,o.jsx)(m.A,{as:"h3",sx:{fontSize:1,mb:0},id:e.labelId,children:e.title}),(0,o.jsx)(f.A,{sx:{color:"fg.muted",m:0},children:e.subtitle}),e.action&&(0,o.jsx)(u.A,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"flex-start",justifyContent:"space-between",mt:2,mb:1},children:e.action})]})})}try{y.displayName||(y.displayName="Row")}catch{}var b=i(17909),g=i(75842);function j(e){let{onSaveCallback:t,selectedListOptions:i,selectedListVariants:s,title:n,width:a}=e,l=Object.keys(e.listOptions||{}),r=Object.keys(e.listVariants||{}),[c,u]=(0,d.useState)(i),[m,p]=(0,d.useState)(s||[]);(0,d.useEffect)(function(){u(i),p(s||[])},[i,s]);let h=(0,d.useCallback)(()=>{u(i),p(s||[])},[u,p,i,s]),x=(0,d.useCallback)(()=>{t(c,m)},[t,c,m]),y=(0,d.useCallback)((e,t,i)=>{i(t.includes(e)?t.filter(t=>t!==e).sort():[...t,e])},[]),j=(0,d.useCallback)(e=>{y(e,c,u)},[c,y]),_=(0,d.useCallback)(e=>{0!==c.length&&y(e,m,p)},[c,m,y]),w=e=>{if(e)return e.filter(e=>e).join(", ")};return(0,o.jsxs)(g.X,{title:n,onSubmit:x,onCancel:h,width:a||"small",height:"fit-content",children:[(0,o.jsx)(g.X.Button,{size:"small",children:(()=>{if(0===i.length)return e.defaultMenuButtonOption;let t=l.map(t=>{if(i.includes(t))return e.menuButtonOptions?e.menuButtonOptions[t]:e.listOptions[t]}),n=e.menuButtonPrefix||"";if(!s||s.length<1)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.A,{as:"span",sx:{color:"fg.muted"},children:n}),(0,o.jsx)("span",{children:w(t)})]});{let i=s?.map(t=>e.menuButtonVariants?e.menuButtonVariants[t]:e.listVariants&&e.listVariants[t]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.A,{as:"span",className:"hide-sm",sx:{color:"fg.muted"},children:n}),(0,o.jsxs)("span",{children:[w(t),". (",w(i),")"]})]})}})()}),(0,o.jsxs)(b.l,{children:[l.map((t,i)=>(0,o.jsx)(b.l.Item,{selected:c.includes(t),onSelect:()=>j(t),children:e.listOptions[t]},i)),e.listVariants&&0!==c.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.l.Divider,{}),(0,o.jsx)(b.l,{selectionVariant:"multiple",sx:{p:0},role:"listbox",children:r.map((t,i)=>(0,o.jsx)(b.l.Item,{selected:m.includes(t),onSelect:()=>_(t),children:e.listVariants&&e.listVariants[t]},i))})]})]}),(0,o.jsx)(g.X.Footer,{})]})}try{j.displayName||(j.displayName="MultipleSelect")}catch{}let _="Don't notify",w="Notify me: ",v={none:"Don't send",weekly:"Send weekly",daily:"Send daily"},S={web:"On GitHub",email:"Email"},A={web:"on GitHub",email:"Email"},C={continuousIntegrationWeb:"On GitHub",continuousIntegrationEmail:"Email"},E={continuousIntegrationWeb:"on GitHub",continuousIntegrationEmail:"Email"},k={continuousIntegrationFailuresOnly:"Only notify for failed workflows"},N={continuousIntegrationFailuresOnly:"Failed workflows only"},D={vulnerabilityWeb:"On GitHub",vulnerabilityEmail:"Email",vulnerabilityCli:"CLI"},R={...D,vulnerabilityWeb:"on GitHub"},I={pullRequestReview:"Pull Request reviews",pullRequestPush:"Pull Request pushes",commentEmail:"Comments on Issues and Pull Requests",ownViaEmail:"Includes your own updates"},O={pullRequestReview:"Reviews",pullRequestPush:"Pushes",commentEmail:"Comments",ownViaEmail:"My own updates"};function F(e,t,i){let s=[],n=[];return Object.keys(t).map(t=>{e[t]&&s.push(t)}),Object.keys(i).map(t=>{e[t]&&n.push(t)}),[s,n]}var B=i(7572),W=i(30729),L=i(38553),T=i(59857);function z(e){let{status:t}=e,i=d.useRef(null),[s,n]=d.useState(""!==t),a="success"===t;return((0,d.useEffect)(()=>{let e;return a?e=setTimeout(()=>n(!1),3e3):n(!0),()=>{e&&clearTimeout(e)}},[a]),(0,d.useEffect)(()=>{i.current&&(0,B.C)(i.current,{assertive:"error"===t})},[t,i]),s)?(0,o.jsx)(u.A,{sx:{...e.sx},ref:i,children:"error"===t?(0,o.jsxs)(f.A,{sx:{color:"fg.muted",fontSize:"12px"},children:[(0,o.jsx)(W.A,{icon:T.AlertIcon,size:12,sx:{verticalAlign:"top",color:"danger.fg",marginRight:1}}),"Oops, something went wrong."]}):(0,o.jsx)(o.Fragment,{children:"loading"===t?(0,o.jsx)(L.A,{size:"small"}):"success"===t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(W.A,{icon:T.CheckIcon,size:12,sx:{verticalAlign:"top",color:"success.fg",marginRight:1}}),(0,o.jsx)(f.A,{sx:{fontSize:"12px",fontWeight:400},children:"Saved"})]}):(0,o.jsx)(f.A,{sx:{fontSize:"12px"},children:t})})}):null}!function(e){e.Notifications="notifications",e.Watching="watching",e.System="system"}(s||(s={})),function(e){e.IDLE="",e.LOADING="loading",e.SUCCESS="success",e.ERROR="error"}(n||(n={}));try{z.displayName||(z.displayName="State")}catch{}let P={title:"Watching"},V={title:"Participating, @mentions and custom",subtitle:"Notifications for the conversations you are participating in, or if someone cites you with an @mention. Also for all activity when subscribed to specific events."},U={title:"Customize email updates",subtitle:"Choose which additional events you'll receive emails for when participating or watching."},H={title:"Ignored repositories",separator:!1};function M(e){let{selected:t,onSaveCallback:i}=e;return(0,o.jsx)(j,{title:"Select events",listOptions:I,menuButtonOptions:O,defaultMenuButtonOption:"No additional events",selectedListOptions:t,onSaveCallback:i,width:"medium"})}function G(e){let{selected:t,onSaveCallback:i}=e;return(0,o.jsx)(j,{title:"Select notification channels",menuButtonPrefix:w,defaultMenuButtonOption:_,menuButtonOptions:A,listOptions:S,selectedListOptions:t,onSaveCallback:i})}function q(e){let t=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"Notifications for all repositories, teams, or conversations you're watching.\xa0"}),(0,o.jsx)(p.A,{inline:!0,href:e.watchingUrl,children:"View watched repositories"}),"."]}),i=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"You'll never be notified.\xa0"}),(0,o.jsx)(p.A,{inline:!0,href:e.watchingUrl,children:"View ignored repositories"}),"."]}),{sx:n,emailNotificationPreferences:a}=e,[l,r]=(0,d.useState)(e.subscribedSettings||[]),[c,m]=(0,d.useState)(e.participatingSettings||[]),[f]=F(a,I,{}),[b,g]=(0,d.useState)(f||[]),j=(t,i)=>{let n=new FormData;n.append(`${t}[web]`,i.includes("web")?"1":"0"),n.append(`${t}[email]`,i.includes("email")?"1":"0"),e.saveData(s.Watching,n)};return(0,o.jsx)(u.A,{sx:n,children:(0,o.jsxs)(h,{children:[(0,o.jsxs)(x,{style:{display:"flex",alignItems:"center"},children:["Subscriptions",e.renderState(s.Watching)]}),(0,o.jsx)(y,{...P,action:(0,o.jsx)(G,{selected:l,onSaveCallback:e=>{j("subscribed_settings",e),r(e)}}),subtitle:t}),(0,o.jsx)(y,{...V,action:(0,o.jsx)(G,{selected:c,onSaveCallback:e=>{j("participating_settings",e),m(e)}})}),(l.includes("email")||c.includes("email"))&&(0,o.jsx)(y,{...U,action:(0,o.jsx)(M,{selected:b,onSaveCallback:t=>{let i=new FormData;i.append("notify_own_via_email",t.includes("ownViaEmail")?"1":"0"),i.append("notify_comment_email",t.includes("commentEmail")?"1":"0"),i.append("notify_pull_request_review_email",t.includes("pullRequestReview")?"1":"0"),i.append("notify_pull_request_push_email",t.includes("pullRequestPush")?"1":"0"),e.saveData(s.Watching,i),g(t)}})}),(0,o.jsx)(y,{...H,subtitle:i})]})})}try{M.displayName||(M.displayName="EmailPreferencesSelect")}catch{}try{G.displayName||(G.displayName="Select")}catch{}try{q.displayName||(q.displayName="WatchingSettings")}catch{}var X=i(281);let $=({options:e,defaultOption:t,onChange:i,optionOverride:s,disabled:n,open:a,...l})=>{let[r,c]=(0,d.useState)(e.indexOf(t)),u=(0,d.useCallback)(t=>{c(t),i&&i(e[t])},[e,i,c]),m=e.map((e,t)=>(0,o.jsx)(b.l.Item,{selected:r===t,onSelect:()=>{u(t)},children:s?s(e):e},t));return(0,o.jsxs)(X.W,{open:a,...l,children:[(0,o.jsx)(X.W.Button,{size:"small",disabled:n,children:e[r]??t}),(0,o.jsx)(X.W.Overlay,{children:(0,o.jsx)(o.Fragment,{children:m.length>0&&(0,o.jsx)(b.l,{selectionVariant:"single",children:m})})})]})};try{$.displayName||($.displayName="SingleSelect")}catch{}var Q=i(81679);function K(e){let[t,i]=(0,d.useState)(e.checked||!1),s=t=>{i(t),e.onChange&&e.onChange(t)},n=(0,d.useId)(),a=e.labelId||n;return(0,o.jsxs)(u.A,{sx:{display:"flex",flexDirection:"column",flexBasis:"100%",...e.sx},children:[e.title&&(0,o.jsx)(u.A,{sx:{display:"flex",mt:0,justifyContent:"space-between"},children:(0,o.jsx)(m.A,{as:"h3",sx:{fontSize:1,fontWeight:"bold",m:0},id:a,children:e.title})}),e.subtitle&&(0,o.jsx)(f.A,{as:"p",sx:{color:"fg.muted",mt:0,mb:2,flexGrow:2},children:e.subtitle}),(0,o.jsx)(Q.A,{checked:t,"aria-labelledby":a,size:"small",statusLabelPosition:"end",sx:{mr:"auto"},onClick:()=>s(!t)})]})}try{K.displayName||(K.displayName="ToggleBox")}catch{}let Y={title:"Actions"},J={title:"Dependabot alerts: New vulnerabilities",separator:!1},Z={title:"Email weekly digest",subtitle:"Email a weekly summary summarizing alerts for up to 10 of your repositories.",sx:{pt:0}},ee={title:"'Deploy key' alert email",subtitle:"When you are given admin permissions to an organization, automatically receive notifications when a new deploy key is added.",separator:!1};function et(e){let[t,i]=F(e.selected,C,k),[n,a]=(0,d.useState)(t||[]),[l,r]=(0,d.useState)(i||[]);return(0,o.jsx)(j,{title:"Select notification channels",menuButtonPrefix:w,defaultMenuButtonOption:_,menuButtonOptions:E,menuButtonVariants:N,listOptions:C,listVariants:k,selectedListOptions:n,selectedListVariants:l,onSaveCallback:(t,i)=>{let n=t.length>0?i:[],l=new FormData;l.set("continuous_integration_web",t.includes("continuousIntegrationWeb")?"1":"0"),l.set("continuous_integration_email",t.includes("continuousIntegrationEmail")?"1":"0"),l.set("continuous_integration_failures_only",n.includes("continuousIntegrationFailuresOnly")?"1":"0"),e.saveData(s.System,l),a(t),r(n)}})}function ei(e){let[t]=F(e.selected,D,{}),[i,n]=(0,d.useState)(t||[]);return(0,o.jsx)(j,{title:"Select notification channels",menuButtonPrefix:w,defaultMenuButtonOption:_,menuButtonOptions:R,listOptions:D,selectedListOptions:i,onSaveCallback:t=>{let i=new FormData;i.set("vulnerability_web",t.includes("vulnerabilityWeb")?"1":"0"),i.set("vulnerability_cli",t.includes("vulnerabilityCli")?"1":"0"),i.set("vulnerability_email",t.includes("vulnerabilityEmail")?"1":"0"),e.saveData(s.System,i),n(t)}})}function es(e){let t=(0,o.jsxs)(o.Fragment,{children:["Notifications for workflow runs on repositories set up with\xa0",(0,o.jsx)(p.A,{inline:!0,href:e.actionsUrl,children:"GitHub Actions"}),"."]}),i=(0,o.jsxs)(o.Fragment,{children:["When you're given access to\xa0",(0,o.jsx)(p.A,{inline:!0,href:e.dependabotHelpUrl,children:"Dependabot alerts"}),"\xa0automatically receive notifications when a new vulnerability is found in one of your dependencies."]}),n=(0,d.useId)();return(0,o.jsx)(u.A,{sx:e.sx,children:(0,o.jsxs)(h,{children:[(0,o.jsxs)(x,{style:{display:"flex",alignItems:"center"},children:["System",e.renderState(s.System)]}),(0,o.jsx)(y,{...Y,action:(0,o.jsx)(et,{selected:e.continuousIntegration,saveData:e.saveData}),subtitle:t}),(0,o.jsx)(y,{...J,action:(0,o.jsx)(ei,{selected:e.vulnerability,saveData:e.saveData}),subtitle:i}),(0,o.jsx)(y,{...Z,action:(0,o.jsx)($,{options:Object.values(v),defaultOption:v[e.vulnerabilitySubscription||"none"],onChange:t=>{let i=new FormData;t.includes("weekly")||t.includes("daily")?(i.set("vulnerability_digest","1"),i.set("subscription_kind",t.includes("weekly")?"weekly":"daily")):i.set("vulnerability_digest","0"),e.saveData(s.System,i)}})}),(0,o.jsx)(y,{...ee,labelId:n,action:(0,o.jsx)(K,{checked:e.deployKeyAlert.includes("email"),onChange:t=>{let i=new FormData;i.append("org_deploy_key_settings[email]",t?"1":"0"),e.saveData(s.System,i)},labelId:n})})]})})}try{et.displayName||(et.displayName="ActionsSelect")}catch{}try{ei.displayName||(ei.displayName="VulnerabilitySelect")}catch{}try{es.displayName||(es.displayName="SystemSettings")}catch{}var en=i(56226);function ea(e){let t={borderColor:"border.default",borderWidth:1,borderStyle:"solid",borderRadius:2,p:3};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(u.A,{sx:{borderColor:"border.default",borderWidth:1,borderStyle:"solid",borderRadius:2,p:3,mb:3},children:[(0,o.jsx)(m.A,{as:"h3",sx:{fontSize:1,fontWeight:"bold",m:0},children:"Default notifications email"}),(0,o.jsx)(f.A,{as:"p",sx:{color:"fg.muted",display:"flex",width:"80%",mb:2},children:e.isEmailReadonly?"Your email address is managed by your enterprise.":"Choose where you'd like emails to be sent. You can add more email addresses. Use custom routes to specify different email addresses to be used for individual organizations."}),(0,o.jsxs)(u.A,{sx:{display:"flex",mt:2,flexWrap:"wrap",gap:2},children:[(0,o.jsx)($,{options:e.emails,defaultOption:e.defaultEmail,onChange:t=>{let i=new FormData;i.set("email",t),e.saveData(s.Notifications,i)},disabled:e.isEmailReadonly??!1}),!e.isEmailReadonly&&(0,o.jsx)(p.A,{as:en.N,to:"/settings/notifications/custom_routing",className:"btn btn-sm",sx:{"&:hover":{textDecoration:"none"},color:"inherit",fontWeight:"bold"},children:"Custom routing"})]})]}),(0,o.jsxs)(u.A,{sx:{display:"grid",gap:"16px",mb:4,gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))"},children:[(0,o.jsx)(K,{title:"Automatically watch repositories",subtitle:"When you're given push access to a repository, automatically receive notifications for it.",checked:e.autoSubscribeRepositories,sx:t,onChange:t=>{let i=new FormData;i.set("auto_subscribe_repositories",t?"1":"0"),e.saveData(s.Notifications,i)}}),(0,o.jsx)(K,{title:"Automatically watch teams",subtitle:"Anytime you join a new team, you will automatically be subscribed to updates and receive notification when that team is @mentioned.",checked:e.autoSubscribeTeams,sx:t,onChange:t=>{let i=new FormData;i.set("auto_subscribe_teams",t?"1":"0"),e.saveData(s.Notifications,i)}})]})]})}try{ea.displayName||(ea.displayName="NotificationsSettings")}catch{}var el=i(28784);let er=e=>async t=>{try{let i=await (0,el.DI)(e,{method:"PUT",body:t});if(i.ok)return i;return Error("Failed to update")}catch(e){return e}},eo=er("/settings/notifications"),ed=(e,t)=>{let i=new FormData;return i.set("email",t),er(`/settings/notification_preferences/organizations/${e}`)(i)},ec=async e=>{try{let t=await (0,el.lS)(`/settings/notification_preferences/organizations/${e}`,{method:"delete"});if(t.ok)return t;return Error(`API response not OK: ${t.status}`)}catch(e){return e}};function eu(){let{subscribedSettings:e,participatingSettings:t,autoSubscribeRepositories:i,autoSubscribeTeams:a,continuousIntegrationEmail:l,continuousIntegrationFailuresOnly:r,continuousIntegrationWeb:p,vulnerabilityCli:h,vulnerabilityEmail:x,vulnerabilityWeb:f,vulnerabilitySubscription:y,notifiableEmails:b,orgDeployKeySettings:g,pullRequestReview:j,pullRequestPush:_,ownViaEmail:w,commentEmail:v,emails:{global:{address:S,readonly:A}},watchingUrl:C,actionsUrl:E,dependabotHelpUrl:k}=(0,c.B)(),[N,D]=(0,d.useState)(n.IDLE),[R,I]=(0,d.useState)(s.Notifications),O=async(e,t)=>{I(e),D(n.LOADING),(await eo(t)).ok?D(n.SUCCESS):D(n.ERROR)},F=e=>{let t=R===e?N:n.IDLE;return(0,o.jsx)(z,{status:t,sx:{marginRight:3,display:"flex",alignItems:"center"}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",borderColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid",justifyContent:"space-between",pb:2,mb:3},children:[(0,o.jsx)(m.A,{as:"h2",sx:{fontSize:4,fontWeight:400},"data-hpc":!0,children:"Notifications"}),F(s.Notifications)]}),(0,o.jsx)(ea,{autoSubscribeRepositories:i,autoSubscribeTeams:a,emails:b,defaultEmail:S,saveData:O,isEmailReadonly:A}),(0,o.jsx)(q,{subscribedSettings:e,participatingSettings:t,saveData:O,renderState:F,emailNotificationPreferences:{pullRequestReview:j,pullRequestPush:_,ownViaEmail:w,commentEmail:v},watchingUrl:C}),(0,o.jsx)(es,{sx:{mt:3},continuousIntegration:{continuousIntegrationEmail:l,continuousIntegrationFailuresOnly:r,continuousIntegrationWeb:p},vulnerability:{vulnerabilityCli:h,vulnerabilityEmail:x,vulnerabilityWeb:f},vulnerabilitySubscription:y,deployKeyAlert:g,saveData:O,renderState:F,actionsUrl:E,dependabotHelpUrl:k})]})}try{eu.displayName||(eu.displayName="IndexPage")}catch{}var em=i(55847);let ep="__draft";!function(e){e.DELETE="DELETE",e.UPDATE="UPDATE"}(a||(a={}));var eh=i(66889),ex=i(73880),ef=i(87330),ey=i(67269);let eb=({orgLogin:e,organizations:t,onChange:i,open:s})=>{let[n,a]=(0,d.useState)(e||null),[l,r]=(0,d.useState)(s??!1),[c,u]=(0,d.useState)(""),m=t.map(e=>({leadingVisual:()=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("img",{width:16,height:16,src:e.avatarUrl,alt:e.login})}),text:e.login,id:e.login,selectionVariant:"single",sx:{paddingLeft:"0"}})),p=m.filter(e=>e.text?.toLowerCase()?.includes(c.toLowerCase())),h=e=>{if(void 0===e)return;let t=(Array.isArray(e)?e:[e])[0];r(!1),t&&t.text&&i&&i(t.text),a(t.text||null)},x=(0,d.useCallback)(h,[h]),f=(0,d.useCallback)(u,[u]),y=(0,d.useCallback)(()=>r(!l),[l,r]);return(0,o.jsx)(ey.X,{renderAnchor:({children:e,...t})=>(0,o.jsx)(em.Q,{trailingVisual:T.TriangleDownIcon,...t,children:e||"Pick organization"}),placeholderText:"Search organizations",items:p,selected:m.find(e=>e.id===n),onSelectedChange:x,onOpenChange:y,onFilterChange:f,open:l,overlayProps:{width:"small",height:p.length>6?"small":"auto"}})};try{eb.displayName||(eb.displayName="OrganizationSelect")}catch{}let eg=({email:e,login:t,organization:i,organizationRecords:s,isEditing:n,isEditDisabled:a,stateStatus:l,onSave:r,onDelete:c,onEdit:m,...p})=>{let[h,x]=(0,d.useState)(!n??!0),[y,g]=(0,d.useState)(!1),j=(0,d.useRef)(null),_=(0,d.useRef)(null),[w,v]=(0,d.useState)(i??null),S=!!w,[A,C]=(0,d.useState)(e),E=A&&w;(0,d.useEffect)(()=>{C(e)},[e]);let k=(0,d.useCallback)(()=>{if(!i)return c(t);v(i??null),C(i?i.email:null),g(!0),x(!0),m&&m(null)},[c,m,i,t]),N=(0,d.useCallback)(()=>{E&&(r(w.login,A),g(!0),x(!0))},[r,A,w,E]),D=(0,d.useCallback)(()=>{m&&m(t),x(!1),C(null)},[m,t]),R=(0,d.useCallback)(()=>{c(t)},[c,t]);return(0,d.useEffect)(()=>{!h&&w&&_.current?.focus()},[h,_,w]),(0,d.useEffect)(()=>{y&&h&&j.current?.focus()},[h,y,j]),(0,o.jsxs)(u.A,{className:"Box-row",...p,sx:{...p.sx||{},display:"flex",flexWrap:h?"nowrap":"wrap",gap:2},children:[(0,o.jsxs)("div",{className:"d-block d-sm-flex flex-sm-row",style:{display:"flex",flexGrow:"1",overflow:"hidden",gap:"8px"},children:[(0,o.jsx)("div",{className:"mb-1 mb-sm-0",style:{display:"flex",alignItems:"center",flexBasis:h?"16em":"auto",minWidth:"8em",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:(h||S)&&w?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.A,{sx:{pr:2,display:"flex"},children:(0,o.jsx)("img",{width:16,height:16,alt:w.login,src:w.avatarUrl})}),(0,o.jsx)(u.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w.login})]}):(0,o.jsx)(eb,{organizations:s,orgLogin:w?w.login:null,open:!w,onChange:e=>v(s.find(t=>t.login===e)??null)})}),(0,o.jsx)(u.A,{className:"hide-sm",sx:{px:3,display:"flex",alignItems:"center"},children:(0,o.jsx)(T.ArrowRightIcon,{size:16})}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("div",{className:"hide-md hide-lg hide-xl",style:{display:"flex",alignItems:"center",marginRight:"8px"},children:(0,o.jsx)(T.ArrowRightIcon,{size:16})}),h?(0,o.jsx)(u.A,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:(0,o.jsx)(f.A,{as:"span",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A})}):(0,o.jsxs)(eh.A,{children:[(0,o.jsx)(eh.A.Label,{visuallyHidden:!0,children:"Email"}),(0,o.jsx)(ex.A,{ref:_,placeholder:"Select Email",defaultValue:A||"Select email",onChange:e=>C(e.target.value),children:(w?.notifiableEmailsForUser??[]).map(e=>(0,o.jsx)("option",{value:e,"data-testid":"email-option",children:e},e))})]})]})]}),(0,o.jsxs)(u.A,{sx:{display:"flex",marginLeft:"auto",justifyContent:"flex-end"},children:[l&&(0,o.jsx)(z,{status:l,sx:{display:"flex",alignItems:"center",mx:3}}),h?(0,o.jsxs)(X.W,{anchorRef:j,children:[(0,o.jsx)(X.W.Anchor,{"data-testid":"custom-route-row-actions",children:(0,o.jsx)(ef.K,{unsafeDisableTooltip:!0,icon:T.KebabHorizontalIcon,variant:"invisible","aria-label":"Open column options"})}),(0,o.jsx)(X.W.Overlay,{children:(0,o.jsxs)(b.l,{children:[(0,o.jsxs)(b.l.Item,{onSelect:D,disabled:a??!1,role:"menuitem",children:[(0,o.jsx)(b.l.LeadingVisual,{children:(0,o.jsx)(T.PencilIcon,{})}),"Edit"]}),(0,o.jsxs)(b.l.Item,{variant:"danger",onSelect:R,role:"menuitem",children:[(0,o.jsx)(b.l.LeadingVisual,{children:(0,o.jsx)(T.TrashIcon,{})}),"Delete"]})]})})]}):(0,o.jsxs)(u.A,{sx:{display:"flex",alignItems:"flex-end",gap:2},children:[(0,o.jsx)(em.Q,{variant:"danger",onClick:k,children:"Cancel"}),(0,o.jsx)(em.Q,{variant:"primary",onClick:N,disabled:!E,children:"Save"})]})]})]})};try{eg.displayName||(eg.displayName="CustomRouteRow")}catch{}let ej=({payload:e,...t})=>{let{organizationRecords:i,verificationEnabled:s,globalEmailAddress:l}=e,r=(0,d.useRef)(null),c=(0,d.useMemo)(function(){return new Map(i.filter(e=>e.display).map(e=>[e.login,{status:n.IDLE,email:e.email}]))},[i]),m=(0,d.useMemo)(function(){return new Map(i.map(e=>[e.login,e]))},[i]),[p,h]=(0,d.useReducer)((e,t)=>{let i=new Map(e.entries()),{type:s,login:n,...l}=t,r=n?e.get(n):{};switch(s){case a.DELETE:i.delete(n);break;case a.UPDATE:i.set(n,{...r,...l})}return i},c),[x,f]=d.useState(null),[y,b]=d.useState(null),g=!!y,[j,_]=d.useState(!1),w=(0,d.useCallback)(()=>f(null),[f]),v=(0,d.useCallback)(()=>{b(null)},[b]);(0,d.useEffect)(()=>{!y&&j&&(r.current?.focus(),_(!1))},[y,j,_,r]);let S=(0,d.useMemo)(function(){return Array.from(p.keys()).sort()},[p]),A=(0,d.useMemo)(function(){return i.filter(e=>{for(let[t]of p)if(t===e.login)return!1;return!0})},[i,p]),C=(0,d.useCallback)(async e=>{if(e===ep){h({type:a.DELETE,login:e}),v();return}b(e),f(e),h({type:a.UPDATE,login:e,status:n.LOADING}),(await ec(e)).ok?h({type:a.DELETE,login:e}):h({type:a.UPDATE,login:e,status:n.ERROR}),v(),w()},[h,v,w]),E=(0,d.useCallback)(async(e,t)=>{e in p.keys()||h({type:a.DELETE,login:ep}),f(e),h({type:a.UPDATE,login:e,status:n.LOADING}),(await ed(e,t)).ok?h({type:a.UPDATE,login:e,email:t,status:n.SUCCESS}):h({type:a.UPDATE,login:e,status:n.ERROR}),v()},[p,h,v]),k=(0,d.useCallback)(e=>{w(),b(e)},[b,w]),N=(0,d.useCallback)(()=>{h({type:a.UPDATE,login:ep,status:n.IDLE,email:null}),_(!0),k(ep)},[h,k]);return(0,o.jsxs)(u.A,{...t,children:[(0,o.jsxs)(u.A,{as:"section",sx:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)("div",{children:(0,o.jsxs)("p",{children:["You can send notifications to different ",s?(0,o.jsx)("strong",{children:"verified "}):null,"email addresses depending on the organization that owns the repository."]})}),(0,o.jsxs)(u.A,{as:"section",sx:{display:"flex",flexWrap:"wrap",gap:3,justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("small",{children:[l," is your current default email for notifications."]}),(0,o.jsx)(em.Q,{variant:"primary",sx:{mt:"auto",ml:"auto"},disabled:g,onClick:N,ref:r,children:"Add new route"})]})]}),(0,o.jsx)(u.A,{sx:{mt:3,borderTopStyle:"solid",borderColor:"border.default",borderRadius:"6px",borderWidth:"1px"},children:S.length<1?(0,o.jsx)(u.A,{className:"Box-row text-center",sx:{borderStyle:"solid",borderColor:"border.default",borderWidth:"1px"},children:(0,o.jsx)("span",{children:"No custom routes yet."})},"no-routes"):S.map(e=>{let{email:t,status:i}=p.get(e),s=m.get(e);return(0,o.jsx)(eg,{"data-testid":"custom-route-row",login:e,email:t,organization:s,organizationRecords:A,isEditing:e===y,isEditDisabled:g,stateStatus:e===x?i:null,onDelete:C,onSave:E,onEdit:k,sx:{borderStyle:"solid",borderColor:"border.default",borderWidth:"1px"}},e)})})]})};try{ej.displayName||(ej.displayName="CustomRouteSettings")}catch{}let e_=()=>{let e=(0,c.B)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.A,{sx:{borderColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid",pb:2,mb:3},children:(0,o.jsxs)(m.A,{as:"h1",sx:{fontSize:4,fontWeight:400,display:"flex"},"data-hpc":!0,children:[(0,o.jsx)(p.A,{as:en.N,to:"/settings/notifications",children:"Notifications"}),(0,o.jsx)(f.A,{as:"span",sx:{ml:2},children:"/ Custom Routing"})]})}),(0,o.jsx)(ej,{payload:e})]})};try{e_.displayName||(e_.displayName="CustomRoutesPage")}catch{}(0,l.Q)("notification-settings",()=>({routes:[(0,r.a)({path:"/settings/notifications",Component:eu}),(0,r.a)({path:"/settings/notifications/custom_routing",Component:e_})]}))},28784:(e,t,i)=>{function s(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let i={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:i})}function n(e,t){let i={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return s(e,{...t,body:n,headers:i})}function a(e,t={}){let i={...t.headers,"GitHub-Is-React":"true"};return s(e,{...t,headers:i})}function l(e,t){let i={...t?.headers??{},"GitHub-Is-React":"true"};return n(e,{...t,headers:i})}i.d(t,{DI:()=>s,QJ:()=>a,Sr:()=>l,lS:()=>n})},86233:(e,t,i)=>{i.d(t,{a:()=>s});function s({path:e,Component:t,shouldNavigateOnError:i,transitionType:s,children:n}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let i=`${e.pathname}${e.search}`;t=await window.fetch(i,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom","X-React-Router":"json"}})}catch(e){return{type:i?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:i?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:i?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:s,children:n}}},56226:(e,t,i)=>{i.d(t,{N:()=>c});var s=i(9449),n=i(55293),a=i(45588),l=i(84976),r=i(92812),o=i(97156),d=i(99523);let c=(0,n.forwardRef)(({to:e,reloadDocument:t,preventAutofocus:i,...c},u)=>{let{routes:m}=(0,n.useContext)(r.B),p=(0,a.o1)(e,o.fV.pathname).pathname;return t=t??!(0,a.ue)(m,p),(0,s.jsx)(l.N_,{to:e,...c,state:i?{[d.V]:!0,...c.state}:c.state,reloadDocument:t,ref:u})});c.displayName="Link";let u=(0,n.forwardRef)(function({to:e,reloadDocument:t,preventAutofocus:i,...c},u){let{routes:m}=(0,n.useContext)(r.B),p=(0,a.o1)(e,o.fV.pathname).pathname;return t=t??!(0,a.ue)(m,p),(0,s.jsx)(l.k2,{to:e,...c,state:i?{[d.V]:!0,...c.state}:c.state,reloadDocument:t,ref:u})});try{u.displayName||(u.displayName="NavLink")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-7901e7","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_react_lib-esm_FilteredActionList_FilteredActionList_js","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-8bbff8","vendors-node_modules_primer_react_lib-esm_Link_Link_js-node_modules_primer_react_lib-esm_Octi-d0a1db","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_react-core_register-app_ts"],()=>t(63416)),e.O()}]);
//# sourceMappingURL=notification-settings-0049c54169dc.js.map