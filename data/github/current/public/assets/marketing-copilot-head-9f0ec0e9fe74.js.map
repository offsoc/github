{"version":3,"file":"marketing-copilot-head-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/copilot-head/utils/math.ts","app/assets/modules/copilot-head/common.ts","app/assets/modules/copilot-head/controls.ts","app/assets/modules/copilot-head/mouseMng.ts","app/assets/modules/copilot-head/utils/easing.ts","app/assets/modules/copilot-head/utils/timeline.ts","app/assets/modules/copilot-head/animations.ts","app/assets/modules/copilot-head/shaders/mesh.ts","app/assets/modules/copilot-head/shaders/matcap.ts","app/assets/modules/copilot-head/assets.ts","app/assets/modules/copilot-head/copilotHead.ts","app/assets/modules/marketing-copilot-head.ts"],"sourcesContent":["export function lerp(start: number, target: number, easing: number) {\n  return start + (target - start) * easing\n}\n\nexport function smoothstep(edge0: number, edge1: number, x: number) {\n  if (x <= edge0) return 0.0\n  if (x >= edge1) return 1.0\n\n  const t = Math.min(1.0, Math.max((x - edge0) / (edge1 - edge0), 0.0))\n  return t * t * (3.0 - 2.0 * t)\n}\n\nexport function getProgress(start: number, end: number, value: number) {\n  return Math.max(0.0, Math.min(1.0, (value - start) / (end - start)))\n}\n\nexport function cubicOut(t: number) {\n  const f = t - 1.0\n  return f * f * f + 1.0\n}\n\nexport function cubicIn(t: number) {\n  return t * t * t\n}\n\nexport function expoOut(t: number) {\n  return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t)\n}\n\nexport function cubicInOut(t: number) {\n  return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0\n}\n","import {\n  ACESFilmicToneMapping,\n  Clock,\n  //  ColorManagement,\n  PerspectiveCamera,\n  Scene,\n  sRGBEncoding,\n  Vector2,\n  WebGLRenderer,\n} from 'three'\n\nclass Common {\n  sizes: Vector2\n  pixelRatio: number\n  aspect: number\n  scene: Scene\n  camera: PerspectiveCamera\n  wrapperOffset: Vector2\n  delta: number\n  time: number\n  clock: Clock\n  canvasWrapper: HTMLElement\n  renderer: WebGLRenderer\n  constructor() {\n    this.sizes = new Vector2()\n    this.pixelRatio = 1\n    this.aspect = 1\n\n    this.scene = new Scene()\n    this.camera = new PerspectiveCamera(45, this.aspect, 0.1, 200)\n\n    this.camera.position.set(0, 0, 11)\n    this.scene.add(this.camera)\n    this.wrapperOffset = new Vector2()\n    //ColorManagement.enabled = true\n    this.delta = 0\n    this.time = 0\n  }\n\n  init(canvasWrapper: HTMLElement, canvas: HTMLCanvasElement) {\n    this.clock = new Clock()\n    this.canvasWrapper = canvasWrapper\n    this.pixelRatio = Math.min(window.devicePixelRatio, 2)\n\n    this.renderer = new WebGLRenderer({\n      canvas,\n      antialias: true,\n      alpha: true,\n    })\n\n    this.renderer.setPixelRatio(this.pixelRatio)\n    this.renderer.outputEncoding = sRGBEncoding\n    this.renderer.toneMapping = ACESFilmicToneMapping\n    this.renderer.toneMappingExposure = 1.5\n    this.renderer.setClearColor(0xffffff, 0.0)\n\n    this.resize()\n  }\n\n  resize() {\n    const wrapperRect = this.canvasWrapper.getBoundingClientRect()\n    const width = wrapperRect.width\n    const height = wrapperRect.height\n\n    this.aspect = width / height\n    this.sizes.set(width, height)\n\n    this.wrapperOffset.set(wrapperRect.left, wrapperRect.top)\n\n    this.camera.aspect = this.aspect\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(width, height)\n  }\n\n  getEase(scale: number) {\n    return Math.min(1.0, this.delta * scale)\n  }\n\n  update() {\n    const delta = this.clock.getDelta()\n    this.delta = delta\n    this.time += this.delta\n  }\n}\n\nconst common = new Common()\nexport default common\n","class Controls {\n  params: {clickAction: string; blinkingSpeed: number}\n  frequences: string[]\n  constructor() {\n    this.params = {\n      clickAction: 'random',\n      blinkingSpeed: 2,\n    }\n\n    this.frequences = ['jump1', 'jump1', 'jump3', 'jump3', 'wink', 'wink', 'shake', 'shake']\n  }\n\n  getRandomAnim(isBlinking: boolean) {\n    const index = Math.floor(Math.random() * this.frequences.length)\n    let name = this.frequences[index]\n\n    if (isBlinking && name === 'wink') {\n      name = 'jamp1'\n    }\n\n    return name\n  }\n\n  init() {}\n}\n\nconst controls = new Controls()\nexport default controls\n","import {Vector2} from 'three'\nimport common from './common'\n\nclass MouseMng {\n  originalPos: Vector2\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  mousemoveFuncs: Function[]\n  pos: {target: Vector2; current: Vector2; current2: Vector2}\n\n  constructor() {\n    this.originalPos = new Vector2()\n\n    this.mousemoveFuncs = []\n    this.pos = {\n      target: new Vector2(-3, -3),\n      current: new Vector2(-3, -3),\n      current2: new Vector2(-3, -3),\n    }\n  }\n\n  init() {\n    window.addEventListener('mousemove', event => {\n      let x = (event.clientX - common.wrapperOffset.x) / common.sizes.x\n      x = (x - 0.5) * 2.0\n      let y = (event.clientY - common.wrapperOffset.y) / common.sizes.y\n      y = (0.5 - y) * 2.0\n\n      this.updateMousePos(x, y)\n    })\n\n    // eslint-disable-next-line github/require-passive-events\n    window.addEventListener('touchstart', event => {\n      if (event.touches[0]) {\n        let x = (event.touches[0].clientX - common.wrapperOffset.x) / common.sizes.x\n        x = (x - 0.5) * 2.0\n        let y = (event.touches[0].clientY - common.wrapperOffset.y) / common.sizes.y\n        y = (0.5 - y) * 2.0\n\n        this.updateMousePos(x, y)\n      }\n    })\n  }\n\n  updateMousePos(x: number, y: number) {\n    this.pos.target.set(x, y)\n\n    for (const func of this.mousemoveFuncs) {\n      func()\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  addMousemoveFunc(func: Function) {\n    this.mousemoveFuncs.push(func)\n  }\n\n  resize() {}\n\n  update() {\n    this.pos.current.lerp(this.pos.target, common.getEase(2))\n    this.pos.current2.lerp(this.pos.target, common.getEase(1.5))\n  }\n}\n\nconst mouseMng = new MouseMng()\nexport default mouseMng\n","// Based on https://gist.github.com/gre/1650294\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const easings: {[key: string]: Function} = {\n  linear,\n  easeInSine,\n  easeOutSine,\n  easeInOutSine,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n  easeInExpo,\n  easeOutExpo,\n  easeInOutExpo,\n  easeInCirc,\n  easeOutCirc,\n  easeInOutCirc,\n  easeInBack,\n  easeOutBack,\n  easeInOutBack,\n  easeInElastic,\n  easeOutElastic,\n  easeInOutElastic,\n  easeInBounce,\n  easeOutBounce,\n  easeInOutBounce,\n}\n\n// No easing, no acceleration\nexport function linear(t: number) {\n  return t\n}\n\n// Slight acceleration from zero to full speed\nexport function easeInSine(t: number) {\n  return -1 * Math.cos(t * (Math.PI / 2)) + 1\n}\n\n// Slight deceleration at the end\nexport function easeOutSine(t: number) {\n  return Math.sin(t * (Math.PI / 2))\n}\n\n// Slight acceleration at beginning and slight deceleration at end\nexport function easeInOutSine(t: number) {\n  return -0.5 * (Math.cos(Math.PI * t) - 1)\n}\n\n// Accelerating from zero velocity\nexport function easeInQuad(t: number) {\n  return t * t\n}\n\n// Decelerating to zero velocity\nexport function easeOutQuad(t: number) {\n  return t * (2 - t)\n}\n\n// Acceleration until halfway, then deceleration\nexport function easeInOutQuad(t: number) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t\n}\n\n// Accelerating from zero velocity\nexport function easeInCubic(t: number) {\n  return t * t * t\n}\n\n// Decelerating to zero velocity\nexport function easeOutCubic(t: number) {\n  const t1 = t - 1\n  return t1 * t1 * t1 + 1\n}\n\n// Acceleration until halfway, then deceleration\nexport function easeInOutCubic(t: number) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\n}\n\n// Accelerating from zero velocity\nexport function easeInQuart(t: number) {\n  return t * t * t * t\n}\n\n// Decelerating to zero velocity\nexport function easeOutQuart(t: number) {\n  const t1 = t - 1\n  return 1 - t1 * t1 * t1 * t1\n}\n\n// Acceleration until halfway, then deceleration\nexport function easeInOutQuart(t: number) {\n  const t1 = t - 1\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1\n}\n\n// Accelerating from zero velocity\nexport function easeInQuint(t: number) {\n  return t * t * t * t * t\n}\n\n// Decelerating to zero velocity\nexport function easeOutQuint(t: number) {\n  const t1 = t - 1\n  return 1 + t1 * t1 * t1 * t1 * t1\n}\n\n// Acceleration until halfway, then deceleration\nexport function easeInOutQuint(t: number) {\n  const t1 = t - 1\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1\n}\n\n// Accelerate exponentially until finish\nexport function easeInExpo(t: number) {\n  if (t === 0) {\n    return 0\n  }\n\n  return Math.pow(2, 10 * (t - 1))\n}\n\n// Initial exponential acceleration slowing to stop\nexport function easeOutExpo(t: number) {\n  if (t === 1) return 1\n\n  return -Math.pow(2, -10 * t) + 1\n}\n\n// Exponential acceleration and deceleration\nexport function easeInOutExpo(t: number) {\n  if (t === 0 || t === 1) return t\n\n  const scaledTime = t * 2\n  const scaledTime1 = scaledTime - 1\n\n  if (scaledTime < 1) {\n    return 0.5 * Math.pow(2, 10 * scaledTime1)\n  }\n\n  return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2)\n}\n\n// Increasing velocity until stop\nexport function easeInCirc(t: number) {\n  const scaledTime = t / 1\n  return -1 * (Math.sqrt(1 - scaledTime * t) - 1)\n}\n\n// Start fast, decreasing velocity until stop\nexport function easeOutCirc(t: number) {\n  const t1 = t - 1\n  return Math.sqrt(1 - t1 * t1)\n}\n\n// Fast increase in velocity, fast decrease in velocity\nexport function easeInOutCirc(t: number) {\n  const scaledTime = t * 2\n  const scaledTime1 = scaledTime - 2\n\n  if (scaledTime < 1) {\n    return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1)\n  }\n\n  return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1)\n}\n\n// Slow movement backwards then fast snap to finish\nexport function easeInBack(t: number, magnitude = 1.70158) {\n  return t * t * ((magnitude + 1) * t - magnitude)\n}\n\n// Fast snap to backwards point then slow resolve to finish\nexport function easeOutBack(t: number, magnitude = 1.70158) {\n  const scaledTime = t / 1 - 1\n\n  return scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1\n}\n\n// Slow movement backwards, fast snap to past finish, slow resolve to finish\nexport function easeInOutBack(t: number, magnitude = 1.70158) {\n  const scaledTime = t * 2\n  const scaledTime2 = scaledTime - 2\n\n  const s = magnitude * 1.525\n\n  if (scaledTime < 1) {\n    return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s)\n  }\n\n  return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2)\n}\n// Bounces slowly then quickly to finish\nexport function easeInElastic(t: number, magnitude = 0.7) {\n  if (t === 0 || t === 1) return t\n\n  const scaledTime = t / 1\n  const scaledTime1 = scaledTime - 1\n\n  const p = 1 - magnitude\n  const s = (p / (2 * Math.PI)) * Math.asin(1)\n\n  return -(Math.pow(2, 10 * scaledTime1) * Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p))\n}\n\n// Fast acceleration, bounces to zero\nexport function easeOutElastic(t: number, magnitude = 0.7) {\n  if (t === 0 || t === 1) {\n    return t\n  }\n\n  const p = 1 - magnitude\n  const scaledTime = t * 2\n\n  const s = (p / (2 * Math.PI)) * Math.asin(1)\n  return Math.pow(2, -10 * scaledTime) * Math.sin(((scaledTime - s) * (2 * Math.PI)) / p) + 1\n}\n\n// Slow start and end, two bounces sandwich a fast motion\nexport function easeInOutElastic(t: number, magnitude = 0.65) {\n  if (t === 0 || t === 1) return t\n\n  const p = 1 - magnitude\n  const scaledTime = t * 2\n  const scaledTime1 = scaledTime - 1\n\n  const s = (p / (2 * Math.PI)) * Math.asin(1)\n\n  if (scaledTime < 1) {\n    return -0.5 * (Math.pow(2, 10 * scaledTime1) * Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p))\n  }\n\n  return Math.pow(2, -10 * scaledTime1) * Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p) * 0.5 + 1\n}\n\n// Bounce to completion\nexport function easeOutBounce(t: number) {\n  const scaledTime = t / 1\n\n  if (scaledTime < 1 / 2.75) {\n    return 7.5625 * scaledTime * scaledTime\n  } else if (scaledTime < 2 / 2.75) {\n    const scaledTime2 = scaledTime - 1.5 / 2.75\n    return 7.5625 * scaledTime2 * scaledTime2 + 0.75\n  } else if (scaledTime < 2.5 / 2.75) {\n    const scaledTime2 = scaledTime - 2.25 / 2.75\n    return 7.5625 * scaledTime2 * scaledTime2 + 0.9375\n  } else {\n    const scaledTime2 = scaledTime - 2.625 / 2.75\n    return 7.5625 * scaledTime2 * scaledTime2 + 0.984375\n  }\n}\n\n// Bounce increasing in velocity until completion\nexport function easeInBounce(t: number) {\n  return 1 - easeOutBounce(1 - t)\n}\n\n// Bounce in and bounce out\nexport function easeInOutBounce(t: number) {\n  if (t < 0.5) return easeInBounce(t * 2) * 0.5\n\n  return easeOutBounce(t * 2 - 1) * 0.5 + 0.5\n}\n","import type {Euler, Vector3} from 'three'\nimport {easings} from './easing'\n\ninterface Animation {\n  datas: Euler[] | Vector3[] | unknown[] | cameraDetails[]\n  duration: number\n  easing: string\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onComplete?: Function\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onUpdate?: Function\n  values: arrangedValues[]\n  delay: number\n  properties: AnimationProperties\n  isStarted: boolean\n  isLast: boolean\n  isFinished: boolean\n}\n\ninterface arrangedValues {\n  key: string\n  start: number[] | unknown[]\n  current: unknown[]\n  end: number[] | unknown[]\n}\n\nexport interface cameraDetails {\n  radius: number\n  radian: number\n  lookat: Vector3\n}\n\ninterface AnimationProperties {\n  y?: number\n  x?: number\n  z?: number\n  value?: number\n  anim_rotating?: number\n  radian?: number\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onComplete?: Function\n  easing?: string\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onUpdate?: Function\n}\n\nexport default class Timeline {\n  animations: Animation[]\n  easing: string\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  options: {onComplete: Function; easing: string; onUpdate?: Function}\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onUpdate: Function\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  onComplete: Function\n  isFinished: boolean\n  lastIndex: number\n  isWindowFocus: boolean\n  startTime: Date\n  oldTime: Date\n  time: number\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  constructor(options: {onComplete: Function; easing: string; onUpdate?: Function}) {\n    this.easing = options.easing || 'linear'\n    this.options = options\n    this.onUpdate = options.onUpdate || function () {}\n    this.onComplete = options.onComplete || function () {}\n\n    this.isFinished = false\n\n    this.lastIndex = 0\n\n    this.isWindowFocus = true\n\n    this.animations = []\n    this.startTime = new Date()\n    this.oldTime = new Date()\n    this.time = 0\n  }\n\n  to(\n    _datas: unknown[] | Vector3 | Euler | cameraDetails,\n    duration: number,\n    properties: AnimationProperties,\n    _delay?: number | 0,\n  ) {\n    let delay = 0\n    if (_delay !== undefined && !isNaN(_delay)) {\n      delay = _delay\n    } else {\n      if (this.animations.length > 0) {\n        const prevAnim = this.animations[this.animations.length - 1]\n        if (prevAnim) delay = prevAnim.duration + prevAnim.delay\n      } else {\n        delay = 0\n      }\n    }\n\n    const values: arrangedValues[] = []\n    let datas\n\n    if (Array.isArray(_datas)) {\n      datas = _datas\n    } else {\n      datas = [_datas]\n    }\n\n    this.animations.push({\n      datas,\n      duration,\n      easing: properties.easing || this.easing,\n      onComplete: properties.onComplete,\n      onUpdate: properties.onUpdate,\n      values,\n      delay,\n      properties,\n      isStarted: false,\n      isLast: false,\n      isFinished: false,\n    })\n\n    let longestTime = 0\n    let index = 0\n    for (const animation of this.animations) {\n      const t = animation.duration + animation.delay\n      if (longestTime < t) {\n        longestTime = t\n        this.lastIndex = index\n      }\n\n      animation.isLast = false\n      index++\n    }\n\n    return this\n  }\n\n  start() {\n    this.startTime = new Date()\n    this.oldTime = new Date()\n    const lastAnimation = this.animations[this.lastIndex]\n    if (lastAnimation) lastAnimation.isLast = true\n    window.addEventListener('visibilitychange', this.onVisiblitychange)\n\n    this.animate()\n  }\n\n  animate = () => {\n    const currentTime = new Date()\n\n    if (!this.isWindowFocus) {\n      this.oldTime = currentTime\n    }\n\n    const delta = currentTime.getTime() - this.oldTime.getTime()\n    this.time += delta\n\n    this.oldTime = currentTime\n\n    for (const animation of this.animations) {\n      const {datas, duration, easing, values, delay} = animation\n\n      if (this.time > delay && !animation.isFinished) {\n        if (!animation.isStarted) {\n          animation.isStarted = true\n          this.arrangeDatas(animation)\n        }\n        const startTime = 0\n        const endTime = duration\n\n        let progress = this.calcProgress(startTime, endTime, this.time - delay)\n        const easingFunc = easings[easing]\n        if (easingFunc !== undefined) progress = easingFunc(progress)\n\n        for (let i = 0; i < values.length; i++) {\n          const v = values[i]\n          for (let j = 0; j < datas.length; j++) {\n            const d = datas[j]\n            if (v !== undefined) {\n              v.current[j] = this.calcLerp(v.start[j]! as number, v.end[j]! as number, progress)\n              if (typeof d === 'object' && d !== null) {\n                d[v.key as keyof typeof d] = v.current[j] as never\n              }\n            }\n          }\n        }\n\n        if (animation.onUpdate) {\n          animation.onUpdate()\n          return\n        }\n\n        if (progress === 1) {\n          animation.isFinished = true\n          if (animation.onComplete) animation.onComplete()\n          if (animation.isLast) {\n            this.isFinished = true\n          }\n        }\n      }\n    }\n\n    if (!this.isFinished) {\n      this.onUpdate()\n      requestAnimationFrame(this.animate)\n    } else {\n      window.removeEventListener('visibilitychange', this.onVisiblitychange)\n      this.onComplete()\n    }\n  }\n\n  arrangeDatas(animation: Animation) {\n    const {properties, datas, values} = animation\n    for (const key in properties) {\n      let index = 0\n      const start: unknown[] = []\n      const current: unknown[] = []\n      const end = []\n      switch (key) {\n        case 'easing':\n        case 'onComplete':\n        case 'onUpdate':\n          break\n        default:\n          for (const item of datas) {\n            if (item !== null && typeof item === 'object') {\n              start[index] = item[key as keyof typeof item]\n              current[index] = item[key as keyof typeof item]\n              end[index] = properties[key as keyof typeof properties]\n              index++\n            }\n          }\n\n          values.push({\n            key,\n            start,\n            current,\n            end,\n          })\n          break\n      }\n    }\n  }\n\n  calcProgress(start: number, end: number, currentTime: number) {\n    const p = (currentTime - start) / (end - start)\n    return Math.max(0, Math.min(1, p))\n  }\n\n  calcLerp(start: number, end: number, progress: number) {\n    return start + (end - start) * progress\n  }\n\n  onVisiblitychange = () => {\n    if (document.visibilityState === 'visible') {\n      // console.log(\"focus\");\n      this.isWindowFocus = true\n    } else {\n      // console.log(\"blur\");\n      this.isWindowFocus = false\n    }\n  }\n}\n","import type {Group, Material, Mesh} from 'three'\nimport type {cameraDetails} from './utils/timeline'\nimport {lerp} from './utils/math'\nimport common from './common'\nimport controls from './controls'\nimport mouseMng from './mouseMng'\nimport Timeline from './utils/timeline'\nimport {Vector3} from 'three'\n\nexport default class Animations {\n  animationGroup: Group\n  group: Group\n  goggleGroup: Group\n  faceGroup: Group\n  eyesMeshes: {left: Mesh | null; right: Mesh | null}\n  isFinishedEntrance: boolean\n  isPlayingClickAnim: boolean\n  isBlinking: boolean\n  blinkTimer: NodeJS.Timeout\n  clickAction: string | undefined\n  isWinking: boolean\n\n  constructor({\n    group,\n    animationGroup,\n    goggleGroup,\n    faceGroup,\n    eyesMeshes,\n  }: {\n    group: Group\n    animationGroup: Group\n    goggleGroup: Group\n    faceGroup: Group\n    eyesMeshes: {left: Mesh | null; right: Mesh | null}\n  }) {\n    this.group = group\n    this.goggleGroup = goggleGroup\n    this.faceGroup = faceGroup\n    this.eyesMeshes = eyesMeshes\n    this.animationGroup = animationGroup\n\n    this.isFinishedEntrance = false\n    this.isPlayingClickAnim = false\n\n    this.isBlinking = false\n\n    this.init()\n  }\n\n  init() {\n    setTimeout(() => {\n      this.createEntrance()\n    }, 450)\n  }\n\n  createEntrance() {\n    const camera: cameraDetails = {\n      radius: 11,\n      radian: Math.PI * 2,\n      lookat: new Vector3(0, 0, 0),\n    }\n    const tl = new Timeline({\n      onComplete: () => {\n        this.isFinishedEntrance = true\n        this.createBlinkEyes()\n      },\n      easing: 'linear',\n      onUpdate: () => {\n        const x = Math.sin(camera.radian) * camera.radius\n        const z = Math.cos(camera.radian) * camera.radius\n        common.camera.position.set(x, 0, z)\n        common.camera.lookAt(camera.lookat)\n      },\n    })\n    this.group.visible = true\n    tl.to(this.group.scale, 1000, {x: 1, y: 1, z: 1, easing: 'easeOutBack'}, 0).to(\n      camera,\n      1500,\n      {radian: 0, easing: 'easeOutBack'},\n      0,\n    )\n    tl.start()\n  }\n\n  createBlinkEyes() {\n    this.isBlinking = true\n    const tl = new Timeline({\n      onComplete: () => {\n        this.isBlinking = false\n        const delay = lerp(2, 6, Math.random()) * 1000\n        this.blinkTimer = setTimeout(() => {\n          this.createBlinkEyes()\n        }, delay)\n      },\n      easing: 'easeOutCubic',\n    })\n    const type = Math.random() < 0.8 ? 'blinkType1' : 'blinkType2'\n\n    const bs = controls.params.blinkingSpeed / 1000\n    const leftEye = this.eyesMeshes.left\n    const rightEye = this.eyesMeshes.right\n    const eyesScale = [leftEye ? leftEye.scale : 1, rightEye ? rightEye.scale : 1]\n\n    if (type === 'blinkType1') {\n      tl.to(eyesScale, 0.1 / bs, {y: 0.1}, 0)\n        .to(eyesScale, 0.3 / bs, {y: 1}, 0.2 / bs)\n        .start()\n    } else {\n      tl.to(eyesScale, 0.1 / bs, {y: 0.1}, 0)\n        .to(eyesScale, 0.2 / bs, {y: 1}, 0.2 / bs)\n        .to(eyesScale, 0.3 / bs, {y: 0.1})\n        .to(eyesScale, 0.3 / bs, {y: 1})\n        .start()\n    }\n  }\n\n  createClickAnimation() {\n    if (!this.isFinishedEntrance) return\n    if (this.isPlayingClickAnim) return\n    switch (controls.params.clickAction) {\n      case 'random':\n        this.clickAction = controls.getRandomAnim(this.isBlinking)\n        break\n      default:\n        this.clickAction = controls.params.clickAction\n    }\n\n    switch (this.clickAction) {\n      case 'wink':\n        if (this.isBlinking) return\n        if (this.blinkTimer) clearTimeout(this.blinkTimer)\n        this.createWink()\n        break\n      case 'jump1':\n      case 'jump2':\n      case 'jump3':\n        this.createJump()\n        break\n      case 'shake':\n        if (this.isBlinking) return\n        if (this.blinkTimer) clearTimeout(this.blinkTimer)\n        this.createShake()\n        break\n    }\n  }\n\n  createWink() {\n    if (this.isPlayingClickAnim) return\n    this.isPlayingClickAnim = true\n\n    const tl = new Timeline({\n      onComplete: () => {\n        this.isPlayingClickAnim = false\n        const delay = lerp(1, 4, Math.random()) * 1000\n        this.blinkTimer = setTimeout(() => {\n          this.createBlinkEyes()\n        }, delay)\n      },\n      easing: 'easeOutCubic',\n    })\n\n    const isLeft = mouseMng.pos.current.x > 0.0\n\n    const delay = 250\n\n    const eye = isLeft ? this.eyesMeshes.left : this.eyesMeshes.right\n    const eyeScale = eye ? eye.scale : new Vector3(1, 1, 1)\n    const rot = isLeft ? -0.4 : 0.4\n    const aGR = [this.animationGroup.rotation]\n    const gs = [this.animationGroup.scale]\n    const uniforms = eye ? (eye.material as Material).userData.uniforms : null\n\n    tl.to(eyeScale, 100, {y: 0.1}, delay)\n      .to(eyeScale, 200, {y: 1}, delay + 400)\n      .to(uniforms.uWink, 100, {value: 1}, delay)\n      .to(uniforms.uWink, 100, {value: 0}, delay + 400)\n\n    const puyoDuration = 200\n\n    tl.to(gs, puyoDuration, {x: 1.03, y: 0.97}, 0)\n      .to(gs, puyoDuration * 2, {x: 1.0, y: 1.0}, puyoDuration)\n      .to(gs, puyoDuration * 1, {x: 1.02, y: 0.98}, puyoDuration * 3)\n      .to(gs, puyoDuration * 2, {x: 1, y: 1}, puyoDuration * 4)\n      .to(aGR, delay, {z: -rot * 0.2}, 0)\n      .to(aGR, 400, {z: rot}, delay)\n      .to(aGR, 600, {z: 0}, 500)\n      .start()\n  }\n\n  createJump() {\n    if (this.isPlayingClickAnim) return\n    this.isPlayingClickAnim = true\n\n    if (this.clickAction !== 'jump1') {\n      this.createRotating()\n    }\n\n    const tl = new Timeline({\n      onComplete: () => {\n        if (this.clickAction === 'jump1') {\n          this.isPlayingClickAnim = false\n        }\n      },\n      easing: 'easeOutCubic',\n    })\n\n    const s = 1000\n    const gs = this.animationGroup.scale\n    const ag = this.animationGroup.position\n    const aGR = this.animationGroup.rotation\n\n    tl.to(gs, 0.2 * s, {y: 0.95, x: 1.05}, 0)\n      .to(gs, 0.1 * s, {y: 1.05, x: 0.95})\n      .to(gs, 0.2 * s, {y: 1, x: 1})\n      .to(gs, 0.2 * s, {y: 1.03, x: 0.97})\n      .to(gs, 0.2 * s, {y: 0.97, x: 1.03})\n      .to(gs, 0.3 * s, {y: 1, x: 1})\n      .to(aGR, 200, {x: 0.2}, 0)\n      .to(aGR, 500, {x: -0.1}, 200)\n      .to(aGR, 300, {x: 0.0}, 700)\n      .to(ag, 0.2 * s, {y: -0.2}, 0)\n      .to(ag, 0.3 * s, {y: 1.5}, 0.2 * s)\n      .to(ag, 0.3 * s, {y: -0.2, easing: 'easeInQuad'}, 0.5 * s)\n      .to(ag, 0.2 * s, {y: 0}, 0.8 * s)\n\n    const gGP = [this.goggleGroup.position]\n    switch (this.clickAction) {\n      case 'jump2':\n      case 'jump3':\n        // goggle\n        tl.to(gGP, 0.4 * s, {y: 0.6}, 0.3 * s)\n          .to(gGP, 0.4 * s, {y: 0.0}, 0.7 * s)\n          .start()\n        break\n      default:\n        tl.start()\n        break\n    }\n  }\n\n  createRotating() {\n    const data = {\n      anim_rotating: this.goggleGroup.userData.rotateX.anim_rotating,\n    }\n\n    const s = 1000\n\n    const tl = new Timeline({\n      onComplete: () => {\n        this.isPlayingClickAnim = false\n      },\n      onUpdate: () => {\n        this.goggleGroup.userData.rotateX.anim_rotating = data.anim_rotating\n      },\n      easing: 'easeOutCubic',\n    })\n\n    let rotateRange = 0\n\n    const rotateSetY = []\n    const rotateSetZ = []\n\n    let rotTimingY = 0\n    let rotTimingZ = 100\n    for (let i = 0; i < 4; i++) {\n      const r = Math.random()\n\n      let offsetY = lerp(0.1, 0.3, r)\n      const durationY = lerp(150, 200, r)\n\n      let offsetZ = lerp(0.05, 0.1, r)\n      const durationZ = durationY\n\n      if (i === 3) {\n        offsetZ = 0\n      }\n\n      if (i % 2 === 0) {\n        offsetY *= -1\n        offsetZ *= -1\n      }\n\n      rotateSetY[i] = {\n        offset: offsetY,\n        duration: durationY,\n        delay: rotTimingY,\n      }\n\n      rotateSetZ[i] = {\n        offset: offsetZ,\n        duration: durationZ,\n        delay: rotTimingZ,\n      }\n\n      rotTimingY += durationY\n      rotTimingZ += durationZ\n    }\n\n    const aGR = [this.animationGroup.rotation]\n\n    if (this.clickAction === 'jump3') {\n      rotateRange = Math.PI * 2\n      tl.to(aGR, 200, {z: 0.1}, 0)\n        .to(aGR, 200, {z: 0}, 200)\n        .to(aGR, 500, {y: Math.PI, easing: 'easeInCubic'}, 0)\n        .to(aGR, 700, {y: rotateRange, easing: 'easeOutCubic'}, 500)\n        .to(aGR, 400, {z: -0.1}, 600)\n        .to(aGR, 300, {z: 0}, 1000)\n    }\n\n    for (const item of rotateSetY) {\n      tl.to(aGR, item.duration, {y: rotateRange + item.offset}, item.delay + 1300)\n    }\n\n    tl.to(aGR, 300, {\n      y: rotateRange,\n      onComplete: () => {\n        this.animationGroup.rotation.y = 0\n      },\n    })\n\n    for (const item of rotateSetZ) {\n      tl.to(aGR, item.duration, {z: item.offset, easing: 'easeOutQuad'}, item.delay + 1300)\n    }\n\n    tl.to([data], 0.7 * s, {anim_rotating: 0.35}, 0.6 * s)\n      .to([data], 0.5 * s, {anim_rotating: 0}, 1.5 * s)\n      .start()\n  }\n\n  createShake() {\n    if (this.isPlayingClickAnim) return\n    this.isPlayingClickAnim = true\n\n    const tl = new Timeline({\n      onComplete: () => {\n        this.isPlayingClickAnim = false\n        const delay = lerp(1, 4, Math.random()) * 1000\n        this.blinkTimer = setTimeout(() => {\n          this.createBlinkEyes()\n        }, delay)\n      },\n      easing: 'easeOutQuad',\n    })\n\n    const aGR = this.animationGroup.rotation\n    const d = 200\n\n    const leftEye = this.eyesMeshes.left\n    const rightEye = this.eyesMeshes.right\n    const eyeScales = [leftEye ? leftEye.scale : new Vector3(1, 1, 1), rightEye ? rightEye.scale : new Vector3(1, 1, 1)]\n    const uWink = [\n      (leftEye!.material as Material).userData.uniforms.uWink,\n      (rightEye!.material as Material).userData.uniforms.uWink,\n    ]\n    const gs = [this.animationGroup.scale]\n\n    const rotateSet = []\n    for (let i = 0; i < 6; i++) {\n      const r = Math.random()\n      let offset = lerp(0.1, 0.2, r)\n      const duration = lerp(150, 200, r)\n      if (i % 2 === 0) {\n        offset *= -1\n      }\n\n      rotateSet[i] = {\n        offset,\n        duration,\n      }\n    }\n\n    for (const item of rotateSet) {\n      tl.to(aGR, item.duration, {y: item.offset})\n    }\n\n    tl.to(aGR, d, {y: 0.0})\n      .to(aGR, 1000, {x: -0.3}, 0)\n      .to(aGR, 500, {x: 0}, 1000)\n      .to(eyeScales, 100, {y: 0.35}, 0)\n      .to(eyeScales, 250, {y: 1}, 1000)\n      .to(uWink, 100, {value: 1.2}, 0)\n      .to(uWink, 100, {value: 0}, 1000)\n\n    const puyoDuration = 200\n\n    tl.to(gs, puyoDuration, {x: 1.02, y: 0.98}, 0)\n      .to(gs, puyoDuration * 2, {x: 1.0, y: 1.0}, puyoDuration)\n      .to(gs, puyoDuration * 1, {x: 1.02, y: 0.98}, puyoDuration * 3)\n      .to(gs, puyoDuration * 2, {x: 1, y: 1}, puyoDuration * 4)\n      .start()\n  }\n\n  resize() {}\n  update() {}\n}\n","export default `\n#define MATCAP\nvarying vec3 vViewPosition;\nuniform bool uIsEye;\nuniform float uWink;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nfloat parabola(float x){\n\treturn -pow(2.0 * x, 2.0);\n}\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\n    vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n    vViewPosition.y = worldPosition.y;\n\n\ttransformed.y += parabola(transformed.x) * uWink * 2.0;\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n`\n","export default `\n#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nuniform float fresnelBias;\nuniform float fresnelScale;\nuniform float fresnelPower;\nuniform float uFresnelIntensity;\n\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n    float fresnel = fresnelBias + fresnelScale * pow(1.0 - dot(normalize(vNormal), vec3(0.0, 0.0, 1.0)), fresnelPower);\n    float gradient = smoothstep(-0.0, 0.5, vNormal.y);\n    float gradientPos = smoothstep(0.5, -1.0, vViewPosition.y); // Gradient based on y-position\n    vec4 accentGreen = vec4(0.0, 0.4, 0.015, 1.0); // #00FF46\n    vec4 fresnelColor = vec4(vec3(0.0, fresnel * gradient, fresnel * gradient * 0.275), fresnel*gradient);\n    fresnelColor *= gradientPos;\n\t#include <output_fragment>\n    gl_FragColor = mix(gl_FragColor, accentGreen, fresnelColor.a * uFresnelIntensity);\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`\n","import type {Scene} from 'three'\nimport {sRGBEncoding, TextureLoader} from 'three'\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader'\n\ninterface Image {\n  src: string\n  texture: null\n  flipY: boolean\n  encoding?: number\n}\n\ninterface Images {\n  bakedGoggle: Image\n  bakedGoogles: Image\n  bakedHead: Image\n  bakedOther: Image\n  matcap: Image\n}\n\ninterface gltf {\n  src: string\n  scene: Scene | null\n}\n\ninterface gltfs {\n  head: gltf\n}\n\nclass Assets {\n  images: Images\n  gltfs: gltfs\n  constructor() {\n    const imagePath = '/images/modules/site/lab/'\n\n    this.images = {\n      bakedGoggle: {\n        src: `${imagePath}bakedGoggle.png`,\n        texture: null,\n        flipY: false,\n        encoding: sRGBEncoding,\n      },\n      bakedHead: {\n        src: `${imagePath}bakedHead.png`,\n        texture: null,\n        flipY: false,\n        encoding: sRGBEncoding,\n      },\n      bakedOther: {\n        src: `${imagePath}bakedOther.png`,\n        texture: null,\n        flipY: false,\n        encoding: sRGBEncoding,\n      },\n      matcap: {\n        src: `${imagePath}matcap.png`,\n        texture: null,\n        flipY: true,\n      },\n    } as unknown as Images\n\n    this.gltfs = {\n      head: {\n        src: `${imagePath}copilot.glb`,\n        scene: null,\n      },\n    }\n  }\n\n  load(callback: {(): void; (): void}) {\n    const allPromisess = [...this.loadImages(), ...this.loadGltfs()]\n\n    Promise.all(allPromisess)\n      // eslint-disable-next-line github/no-then\n      .then(() => {\n        // All assets loaded\n        if (callback) callback()\n      })\n    /*.catch(error => {\n      //console.log('An error occurred', error)\n    })*/\n  }\n\n  loadGltfs() {\n    const loader = new GLTFLoader()\n\n    const promises = Object.values(this.gltfs).map(\n      gltf =>\n        new Promise((resolve, reject) => {\n          loader.load(\n            gltf.src,\n            loadedGltf => {\n              gltf.scene = loadedGltf.scene\n              resolve(loadedGltf.scene)\n            },\n            undefined,\n            error => reject(error),\n          )\n        }),\n    )\n\n    return promises\n  }\n\n  loadImages() {\n    const loader = new TextureLoader()\n\n    const promises = Object.values(this.images).map(\n      image =>\n        new Promise((resolve, reject) => {\n          loader.load(\n            image.src,\n            texture => {\n              image.texture = texture\n              texture.flipY = image.flipY\n              if (image.encoding) texture.encoding = image.encoding\n              resolve(texture)\n            },\n            undefined,\n            error => reject(error),\n          )\n        }),\n    )\n\n    return promises\n  }\n}\n\nconst assets = new Assets()\nexport default assets\n","import Animations from './animations'\nimport type {Mesh, Texture} from 'three'\nimport {Group, MeshMatcapMaterial, Raycaster, Vector3} from 'three'\nimport vertexShader from './shaders/mesh'\nimport fragmentShader from './shaders/matcap'\nimport mouseMng from './mouseMng'\nimport common from './common'\nimport assets from './assets'\n\nimport {getProgress, lerp} from './utils/math'\n\nexport default class CopilotHead {\n  group: Group\n  orientationGroup: Group\n  animationGroup: Group\n  goggleGroup: Group\n  faceGroup: Group\n  eyesMeshes: {left: Mesh | null; right: Mesh | null}\n  breathing: {rotation: number; position: number}\n  lookatTarget: Vector3\n  lookatTarget_default: Vector3\n  raycaster: Raycaster\n  isRaycastHit: boolean\n  mouseIntensity: {target: number; current: number}\n  uniforms: {fresnelBias: {value: number}; fresnelScale: {value: number}; fresnelPower: {value: number}}\n  animations: Animations\n\n  constructor() {\n    this.group = new Group()\n    this.group.visible = false\n    this.group.scale.set(0.01, 0.01, 0.01)\n    this.group.position.y\n\n    this.orientationGroup = new Group()\n    this.animationGroup = new Group()\n\n    this.group.add(this.orientationGroup)\n    this.orientationGroup.add(this.animationGroup)\n\n    this.goggleGroup = new Group()\n    this.faceGroup = new Group()\n    this.animationGroup.add(this.goggleGroup)\n    this.animationGroup.add(this.faceGroup)\n    this.eyesMeshes = {\n      left: null,\n      right: null,\n    }\n\n    this.breathing = {\n      rotation: 0.0,\n      position: 0.0,\n    }\n\n    this.goggleGroup.userData.rotateX = {\n      orientation: 0,\n      anim_rotating: 0,\n    }\n\n    this.lookatTarget = new Vector3()\n\n    this.lookatTarget_default = new Vector3(-0.4, -0.2, 1.0)\n\n    this.raycaster = new Raycaster()\n    this.isRaycastHit = false\n    this.mouseIntensity = {\n      target: 0,\n      current: 0,\n    }\n\n    this.uniforms = {\n      fresnelBias: {\n        value: 0.01,\n      },\n      fresnelScale: {\n        value: 2.0,\n      },\n      fresnelPower: {\n        value: 3.0,\n      },\n    }\n  }\n\n  init() {\n    this.addMeshes()\n    this.createAnimations()\n  }\n\n  addMeshes() {\n    const meshes: Array<{object: Mesh; isGoggle?: boolean; isFace?: boolean}> = []\n    if (!assets.gltfs.head.scene) return\n\n    assets.gltfs.head.scene.traverse(mesh => {\n      const object: Mesh = mesh as Mesh\n      if (object.isMesh) {\n        let texture\n        switch (object.name) {\n          case 'Goggle':\n          case 'LeftEye':\n          case 'RightEye':\n          case 'Glass001':\n            texture = assets.images.bakedGoggle.texture\n            break\n          case 'HeadBase':\n            texture = assets.images.bakedHead.texture\n            break\n          case 'Screen':\n            texture = assets.images.bakedOther.texture\n            break\n        }\n        const isFresnel = object.name === 'HeadBase'\n\n        const isEye = object.name === 'RightEye' || object.name === 'LeftEye'\n        object.material = this.createMaterial(texture, isFresnel, isEye)\n\n        switch (object.name) {\n          case 'Goggle':\n          case 'Glass001':\n            meshes.push({\n              object,\n              isGoggle: true,\n            })\n            break\n          default:\n            meshes.push({\n              object,\n              isFace: true,\n            })\n            break\n        }\n\n        if (object.name === 'RightEye') {\n          this.eyesMeshes.right = object\n        } else if (object.name === 'LeftEye') {\n          this.eyesMeshes.left = object\n        }\n      }\n    })\n\n    for (const item of meshes) {\n      const object = item.object\n      if (object.parent) object.parent.remove(object)\n      if (item.isGoggle) this.goggleGroup.add(object)\n      if (item.isFace) this.faceGroup.add(object)\n    }\n  }\n\n  createMaterial(bakedTexture: Texture | null | undefined, isFresnel: boolean, isEye: boolean) {\n    /**\n     * Materials\n     */\n\n    //Main Matcap Material\n    // bakedMaterial.isMeshMatcapMaterial = true;\n    const dynamicUniforms = {\n      uWink: {\n        value: 0,\n      },\n    }\n    const material = new MeshMatcapMaterial({\n      map: bakedTexture,\n      matcap: assets.images.matcap.texture,\n      transparent: true, // Enable alpha blending\n    })\n\n    material.onBeforeCompile = shader => {\n      shader.uniforms = {\n        ...shader.uniforms,\n        ...this.uniforms,\n        uFresnelIntensity: {\n          value: isFresnel ? 1 : 0,\n        },\n        uIsEye: {\n          value: isEye,\n        },\n        ...dynamicUniforms,\n      }\n\n      shader.vertexShader = vertexShader\n      shader.fragmentShader = fragmentShader\n    }\n    material.userData.uniforms = dynamicUniforms\n    return material\n  }\n\n  createAnimations() {\n    this.animations = new Animations({\n      group: this.group,\n      animationGroup: this.animationGroup,\n      goggleGroup: this.goggleGroup,\n      faceGroup: this.faceGroup,\n      eyesMeshes: this.eyesMeshes,\n    })\n\n    mouseMng.addMousemoveFunc(this.raycast.bind(this))\n\n    document.body.addEventListener('click', () => {\n      if (this.isRaycastHit) {\n        this.animations.createClickAnimation()\n      }\n    })\n  }\n\n  raycast() {\n    this.raycaster.setFromCamera(mouseMng.pos.target, common.camera)\n    const intersects = this.raycaster.intersectObject(this.group)\n\n    if (intersects.length > 0) {\n      this.isRaycastHit = true\n    } else {\n      this.isRaycastHit = false\n    }\n  }\n\n  update() {\n    this.breathing.rotation = Math.sin(common.time * 2) * 0.05\n    this.breathing.position = Math.sin((common.time + 0.25) * 2) * 0.08\n\n    const mouseLength = mouseMng.pos.target.length()\n\n    this.mouseIntensity.target = getProgress(3, 1.3, mouseLength)\n\n    this.mouseIntensity.current += (this.mouseIntensity.target - this.mouseIntensity.current) * common.getEase(3)\n\n    this.lookatTarget.set(mouseMng.pos.current.x * 0.5, mouseMng.pos.current.y * 0.5, 1)\n    this.lookatTarget.lerp(this.lookatTarget_default, 1 - this.mouseIntensity.current)\n    this.lookatTarget.y += this.breathing.rotation\n    this.orientationGroup.lookAt(this.lookatTarget)\n    this.orientationGroup.position.y = this.breathing.position\n\n    let goggleRotateXProgress = getProgress(0.0, 0.5, mouseMng.pos.current2.y)\n    goggleRotateXProgress = lerp(0, goggleRotateXProgress, this.mouseIntensity.current)\n    goggleRotateXProgress += (this.breathing.rotation + 1.0) * 1.2\n    goggleRotateXProgress = Math.min(goggleRotateXProgress, 1.0)\n    this.goggleGroup.userData.rotateX.orientation = lerp(0.1, -0.08, goggleRotateXProgress)\n\n    this.goggleGroup.rotation.x = 0\n\n    for (const key in this.goggleGroup.userData.rotateX) {\n      const value = this.goggleGroup.userData.rotateX[key]\n      this.goggleGroup.rotation.x += value\n    }\n  }\n}\n","import CopilotHead from './copilot-head/copilotHead'\nimport common from './copilot-head/common'\nimport mouseMng from './copilot-head/mouseMng'\nimport controls from './copilot-head/controls'\nimport assets from './copilot-head/assets'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst sizes = {\n  width: 500,\n  height: 500,\n}\n\nlet assetLoaded = false\n\nobserve('.js-copilot-head', canvasElement => {\n  const canvas = canvasElement as HTMLCanvasElement\n  const canvasRect = canvas.getBoundingClientRect()\n  sizes.width = canvasRect.width\n  sizes.height = canvasRect.height\n\n  const canvasWrapper = document.querySelector('.js-copilot-head-wrapper') as HTMLElement\n\n  common.init(canvasWrapper, canvas)\n  controls.init()\n  mouseMng.init()\n\n  const controlHead = new CopilotHead()\n  if (!assetLoaded) {\n    assets.load(() => {\n      controlHead.init()\n      assetLoaded = true\n    })\n  }\n\n  common.scene.add(controlHead.group)\n\n  // eslint-disable-next-line github/prefer-observers\n  window.addEventListener('resize', () => {\n    common.resize()\n  })\n\n  // eslint-disable-next-line github/prefer-observers\n  window.addEventListener('scroll', () => {\n    common.resize()\n  })\n\n  /**\n   * Animate\n   */\n\n  const tick = () => {\n    common.update()\n    mouseMng.update()\n\n    // Update controls\n    controlHead.update()\n\n    // Render\n    common.renderer.render(common.scene, common.camera)\n\n    // Call tick again on the next frame\n    window.requestAnimationFrame(tick)\n  }\n\n  tick()\n})\n"],"names":["getProgress","start","end","value","Math","max","min","common","Common","init","canvasWrapper","canvas","clock","Clock","pixelRatio","window","devicePixelRatio","renderer","WebGLRenderer","antialias","alpha","setPixelRatio","outputEncoding","sRGBEncoding","toneMapping","ACESFilmicToneMapping","toneMappingExposure","setClearColor","resize","wrapperRect","getBoundingClientRect","width","height","aspect","sizes","set","wrapperOffset","left","top","camera","updateProjectionMatrix","setSize","getEase","scale","delta","update","getDelta","time","constructor","Vector2","scene","Scene","PerspectiveCamera","position","add","controls","Controls","getRandomAnim","isBlinking","index","floor","random","frequences","length","name","params","clickAction","blinkingSpeed","mouseMng","MouseMng","addEventListener","event","x","clientX","y","clientY","updateMousePos","touches","func","pos","target","mousemoveFuncs","addMousemoveFunc","push","current","lerp","current2","originalPos","easings","linear","t","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","t1","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","pow","easeOutExpo","easeInOutExpo","scaledTime","scaledTime1","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInBack","magnitude","easeOutBack","easeInOutBack","scaledTime2","s","easeInElastic","p","asin","easeOutElastic","easeInOutElastic","easeInBounce","easeOutBounce","easeInOutBounce","Timeline","to","_datas","duration","properties","_delay","datas","delay","undefined","isNaN","animations","prevAnim","Array","isArray","easing","onComplete","onUpdate","values","isStarted","isLast","isFinished","longestTime","animation","lastIndex","startTime","Date","oldTime","lastAnimation","onVisiblitychange","animate","arrangeDatas","key","item","calcProgress","currentTime","calcLerp","progress","options","isWindowFocus","getTime","easingFunc","i","v","j","d","removeEventListener","requestAnimationFrame","document","visibilityState","Animations","setTimeout","createEntrance","radius","radian","lookat","Vector3","tl","isFinishedEntrance","createBlinkEyes","z","lookAt","group","visible","blinkTimer","type","bs","leftEye","eyesMeshes","rightEye","right","eyesScale","createClickAnimation","isPlayingClickAnim","clearTimeout","createWink","createJump","createShake","isLeft","eye","eyeScale","rot","aGR","animationGroup","rotation","gs","uniforms","material","userData","uWink","puyoDuration","createRotating","ag","gGP","goggleGroup","data","anim_rotating","rotateX","rotateRange","rotateSetY","rotateSetZ","rotTimingY","rotTimingZ","r","offsetY","durationY","offsetZ","offset","eyeScales","rotateSet","faceGroup","assets","Assets","load","callback","Promise","all","loadImages","loadGltfs","then","loader","GLTFLoader","Object","gltfs","map","gltf","resolve","reject","src","loadedGltf","error","TextureLoader","images","image","texture","flipY","encoding","imagePath","bakedGoggle","bakedHead","bakedOther","matcap","head","CopilotHead","addMeshes","createAnimations","meshes","traverse","mesh","object","isMesh","isFresnel","isEye","createMaterial","isGoggle","isFace","parent","remove","bakedTexture","dynamicUniforms","MeshMatcapMaterial","transparent","onBeforeCompile","shader","uFresnelIntensity","uIsEye","vertexShader","fragmentShader","raycast","bind","body","isRaycastHit","raycaster","setFromCamera","intersects","intersectObject","breathing","mouseLength","mouseIntensity","lookatTarget","lookatTarget_default","orientationGroup","goggleRotateXProgress","orientation","Group","Raycaster","fresnelBias","fresnelScale","fresnelPower","assetLoaded","observe","canvasElement","canvasRect","querySelector","controlHead","tick","render"],"sourceRoot":""}