(function(){$(document).ready(function(){var o,t,n,e,i,s,r,a,c,u;return o=$(".js-page-complete"),u=o.data("instance-url"),parseInt(o.data("configuration-id")),n=0,r=60,s=function(o,n){return n=void 0!==n?n:1e3,setTimeout(t,n)},e=function(){return $(".loader").hide(),$(".js-instance-timeout").show()},c=function(o){switch(o.status){case"success":return a(o.progress),$(".js-configure-instance").hide(),$(".js-instance-ready").show(),$("button").attr("disabled",!1),$("button").click(function(){return location.href=u});case"failed":return a(o.progress),$(".js-configure-instance").hide(),$(".success-message").hide(),$(".js-instance-timeout").show();default:return a(o.progress),s("configuration run still in-progress")}},a=function(o){var t,n,e,i,s,r,a,c,u;if(void 0!==o&&o.length>0){for(i in $(".loader div.categories").remove(),$(".loader span.loader-spinner").remove(),t=$("<div>",{"class":"list-group categories"}),o)r=o[i].key,a="label "+(c=o[i].status.toLowerCase()),u="list-group-icon "+c,n=$("<div>",{"class":"list-group-item "+c}),$("<span>",{"class":a,text:r}).appendTo(n),e=$("<span>",{"class":u}),"configuring"===c?e.attr("class","spinner-large"):(s="octicon octicon-mark-github","done"===c?s="octicon octicon-check":"failed"===c&&(s="octicon octicon-x"),$("<span>",{"class":s}).appendTo(e)),e.appendTo(n),n.appendTo(t);return t.prependTo($(".loader"))}},t=function(){return++n<5?s("waiting for configuration run to start"):n>60*r?e():$.ajax({url:"/setup/configcheck.json",success:function(o){return c(o)},error:function(o){return"true"===Cookies.get("github_ssl_enabled")&&"https:"!==window.location.protocol?i(!0):"false"===Cookies.get("github_ssl_enabled")&&"http:"!==window.location.protocol?i(!1):0===o.status?window.location.reload(!0):s("received "+o.status+" response. retrying...")}})},i=function(o){return window.location=o?"https://"+window.location.hostname+":8443"+window.location.pathname:"http://"+window.location.hostname+":8080"+window.location.pathname},setTimeout(t,2e3)})}).call(this);