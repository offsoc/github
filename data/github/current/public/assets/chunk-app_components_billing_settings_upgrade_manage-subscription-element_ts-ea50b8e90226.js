"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_billing_settings_upgrade_manage-subscription-element_ts"],{45062:(e,t,a)=>{a.d(t,{s:()=>i});var n=a(70170);function i(e=0,t={}){return(a,i,r)=>{if(!r||"function"!=typeof r.value)throw Error("debounce can only decorate functions");let o=r.value;r.value=(0,n.s)(o,e,t),Object.defineProperty(a,i,r)}}},70170:(e,t,a)=>{function n(e,t=0,{start:a=!0,middle:n=!0,once:i=!1}={}){let r,o=a,s=0,c=!1;function p(...l){if(c)return;let d=Date.now()-s;s=Date.now(),a&&n&&d>=t&&(o=!0),o?(o=!1,e.apply(this,l),i&&p.cancel()):(n&&d<t||!n)&&(clearTimeout(r),r=setTimeout(()=>{s=Date.now(),e.apply(this,l),i&&p.cancel()},n?t-d:t))}return p.cancel=()=>{clearTimeout(r),c=!0},p}function i(e,t=0,{start:a=!1,middle:i=!1,once:r=!1}={}){return n(e,t,{start:a,middle:i,once:r})}a.d(t,{n:()=>n,s:()=>i})},97456:(e,t,a)=>{a.r(t),a.d(t,{ManageSubscriptionElement:()=>ManageSubscriptionElement});var n=a(39595),i=a(45062);function r(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function o(e,t,a){var n=r(e,t,"set");return!function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=a}}(e,n,a),a}function s(e,t,a,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(r<3?i(o):r>3?i(t,a,o):i(t,a))||o);return r>3&&o&&Object.defineProperty(t,a,o),o}var c=new WeakMap;let ManageSubscriptionElement=class ManageSubscriptionElement extends HTMLElement{async fetchAndUpdateCalculatedPrice(e=this.seats.value){var t;((t=r(this,c,"get")).get?t.get.call(this):t.value)?.abort();let{signal:a}=o(this,c,new AbortController),n=`${this.getAttribute("data-price-url")}?seats=${e}`,i=await fetch(n,{signal:a,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!i.ok)return;let s=await i.json();for(let e of["current_price","payment_increase","payment_decrease","payment_due","payment_due_notice","sales_tax_notice"]){let t=this[e],a=s[e];t&&a&&this.replaceTextNode(t,a)}if(this.payment_increase_container.hidden=null===s.payment_increase,this.payment_decrease_container.hidden=null===s.payment_decrease,a.aborted)return}replaceTextNode(e,t){e.replaceChildren(document.createTextNode(t))}debouncedUpdatePrice(){this.fetchAndUpdateCalculatedPrice()}async validateAndUpdatePrice(){this.replaceWithValidSeats(),await this.fetchAndUpdateCalculatedPrice()}validateSeats(e){let t=Number(e),a=Number(this.seats.min),n=Number(this.seats.max);return!t||t<a?[a.toString(),!0,!1]:t>n?[n.toString(),!1,!0]:[e,!1,!1]}replaceWithValidSeats(e=this.seats.value){let[t,a,n]=this.validateSeats(e);this.seats.value=t,this.min_error.hidden=!a,this.max_error.hidden=!n,this.current_seats.hidden=a||n}async addSeats(){let e=Math.max(0,Number(this.seats.value)+1);this.replaceWithValidSeats(e.toString()),await this.fetchAndUpdateCalculatedPrice()}async removeSeats(){let e=Math.max(0,Number(this.seats.value)-1);this.replaceWithValidSeats(e.toString()),await this.fetchAndUpdateCalculatedPrice()}enterEditMode(){this.view_mode_container.hidden=!0,this.edit_mode_container.hidden=!1}enterViewMode(){this.view_mode_container.hidden=!1,this.edit_mode_container.hidden=!0}constructor(...e){super(...e),function(e,t,a){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,a)}(this,c,{writable:!0,value:void 0}),o(this,c,null)}};s([n.aC],ManageSubscriptionElement.prototype,"view_mode_container",void 0),s([n.aC],ManageSubscriptionElement.prototype,"edit_mode_container",void 0),s([n.aC],ManageSubscriptionElement.prototype,"seats",void 0),s([n.aC],ManageSubscriptionElement.prototype,"add_seats",void 0),s([n.aC],ManageSubscriptionElement.prototype,"remove_seats",void 0),s([n.aC],ManageSubscriptionElement.prototype,"min_error",void 0),s([n.aC],ManageSubscriptionElement.prototype,"max_error",void 0),s([n.aC],ManageSubscriptionElement.prototype,"current_seats",void 0),s([n.aC],ManageSubscriptionElement.prototype,"current_price",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_increase_container",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_increase",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_decrease_container",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_decrease",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_due",void 0),s([n.aC],ManageSubscriptionElement.prototype,"payment_due_notice",void 0),s([n.aC],ManageSubscriptionElement.prototype,"sales_tax_notice",void 0),s([(0,i.s)(200)],ManageSubscriptionElement.prototype,"debouncedUpdatePrice",null),ManageSubscriptionElement=s([n.p_],ManageSubscriptionElement)}}]);
//# sourceMappingURL=app_components_billing_settings_upgrade_manage-subscription-element_ts-39f900b5e5c0.js.map