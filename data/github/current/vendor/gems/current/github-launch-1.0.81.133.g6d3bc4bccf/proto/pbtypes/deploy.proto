syntax = "proto3";
package git_hub.launch.pbtypes.deploy;
option go_package = "github.com/github/launch/services/pbtypes/launchtypes";

import "google/protobuf/timestamp.proto";
import "pbtypes/github.proto";

message NotifyRepositoryEvent {
    pbtypes.git_hub.Identity repository_node_id = 1;
    int64 repository_id = 2;
    string actor_node_id = 3;
    string actor_login = 4;
    int64 installation_id = 5;
    string action  = 6;

    // changes only set on when action is 'edited'
    bool default_branch_changed = 7;
    pbtypes.git_hub.Identity repository_owner_node_id = 8;
    int64 owner_database_id = 9;
}

message DeleteSchedulesRequest {
    string environment = 1;
    pbtypes.git_hub.Identity repository_node_id = 2;
}

message DeleteSchedulesResponse {
    int64 count = 1;
}

message ListSchedulesRequest {
    string environment = 1;
    pbtypes.git_hub.Identity repository_node_id = 2;
}

message ListSchedulesResponse {
    repeated WorkflowSchedule workflow_schedules = 1;
}

message SynchronizeScheduledWorkflowsRequest {
    string ref = 1;
    pbtypes.git_hub.Identity repository_node_id = 2;
    int64 installation_id = 3;
    pbtypes.git_hub.Identity actor_node_id = 4;
    int64 owner_database_id = 5;
}

message DisableScheduledWorkflowRequest {
    string environment = 1;
    pbtypes.git_hub.Identity repository_node_id = 2;
    string workflow_file_path = 3;
}

message CheckRunDebug {
    string id = 1;
    string status = 2;
    string conclusion = 3;
    string startedAt = 4;
    string completedAt = 5;
    string permalink = 6;
    string displayName = 7;
    string name = 8;
}

message WorkflowSchedule {
    int64 id = 1;
    string schedule_hash = 2;
    string schedule_next_hash = 3;
    pbtypes.git_hub.Identity repository_node_id = 4;
    pbtypes.git_hub.Identity repository_next_id = 5;
    string workflow_identifier = 6;
    string workflow_file_path = 7;
    string environment = 8;
    string schedule = 9;
    double scatter_offset = 10;
    google.protobuf.Timestamp next_run_at = 11;
    string commit_sha = 12;
    pbtypes.git_hub.Identity actor_node_id = 13;
    pbtypes.git_hub.Identity actor_next_id = 14;
    string actor_login = 15;
    google.protobuf.Timestamp created_at = 16;
    int64 tier = 17;
    google.protobuf.Timestamp tier_updated_at = 18;
    int64 owner_id = 19;
}
