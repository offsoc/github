#!/bin/bash
set -e

# Use the cluster-wide haproxy redis port by default
port=6380
# "local" and "remote" mean the same thing in terms of port numbers: 6379
# accesses the node-local redis instance, and only 6379 is available externally
# for cross-node direct connections.
if [ "$1" = "--local" ] || [ "$1" = "--remote" ]; then
  shift
  port=6379
fi

redis-cli -p $port "$@"
