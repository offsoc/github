(function(){window.forms={checkInputRadioField:function(){var e,t,i;return i=(e=$(this)).data("value"),"string"==typeof(t=$(e.data("input-field-id")).val())&&0!==t.length?e.val(i):e.val("")},setActiveRadioItem:function(){return $(this).parent().addClass("active").siblings().removeClass("active")},setActiveCheckboxItem:function(){return $(this).parent().toggleClass("active")}},$(function(){return $(document).ready(function(){return $(".radio-item input:checked, .checkbox-item input:checked").parent().addClass("active"),$(".radio-item input").click(forms.setActiveRadioItem),$(".checkbox-item input").click(forms.setActiveCheckboxItem)})})}).call(this),function(){var e,t,i,n,a,s,o,r,c,l,u,d,p,h,g,f,m,v,b,k;t=[".js-required:visible.invalid",".js-required-list:visible.invalid",".js-email:visible.invalid",".js-url:visible.invalid",".js-integer:visible.invalid","input#hostname.invalid","#actions.invalid","#packages.invalid","#dependabot-updates.invalid","#chatops.invalid","#migrations.invalid"].join(","),n=$(".page-actions").find(".page-errors"),e=/^[\w+\-.]+@[a-z\d\-]+(\.[a-z\d\-]+)*$/i,i=/^(http|https|socks5):\/\/.+\.*.+/,d=function(e){return e.map(function(e){var t,i,n;return i=e.getAttribute("data-validation-message"),n=e.getAttribute("id"),t=$("<a>").attr("href","#"+n).text(i),$("<li>").html(t)})},k=function(e){var t;return t=d(e),n.html(t)},u=function(){return n.empty()},p=function(){return $(t).toArray()},g=function(){return 0===p().length},h=function(e){var t;return null===e||""===e||!isNaN(e)&&(0|(t=parseFloat(e)))===t},f=function(e,t){return e.test(t)},window.toggleSubmit=function(){var e,t;return(t=0===(e=p()).length)?u():k(e),$("button.js-submit").attr("disabled",!t)},r=function(e){return e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),s.call(this,e,isNonNegativeInteger)},isNonNegativeInteger=function(e){return h(e)&&e>=0},a=function(t){return t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),s.call(this,t,f.bind(null,e))},l=function(e){return e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),s.call(this,e,f.bind(null,i))},o=function(e){var t,i;return e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),t=$(this).val(),i=$(".js-email-hostname-warning"),$.ajax({url:"/setup/settings/test/hostemail",data:{host:t},type:"POST",success:function(e){return e.show_email_warning?i.show():i.hide()},error:function(){}})},s=function(e,t){var i,n,a,s,o;return s=(i=$(this)).hasClass("js-required"),a=i.hasClass("inline-input"),n="file"===i.attr("type"),o=i.val(),s&&""===o||"function"==typeof t&&""!==o&&!t(o)?(i.addClass("invalid"),a&&i.siblings("label").addClass("invalid"),n?$(".js-ssl-error").show():i.parent("dd").nextAll("dd.error").show()):(i.removeClass("invalid"),a&&i.siblings("label").removeClass("invalid"),n&&0===$("input[type=file].invalid").length?$(".js-ssl-error").hide():i.parent("dd").nextAll("dd.error").hide()),toggleSubmit()},c=function(){var e,t;return t=(e=$(this)).data("input-name"),0===$('input[name="'+t+'"]').length?e.addClass("invalid"):e.removeClass("invalid"),toggleSubmit()},v=function(){var e;return e=$(this).data("restore"),$(e+" input[type=checkbox][data-default]").each(m),$(e+" input[type!=checkbox][data-default]").each(b)},m=function(){var e;if((e=$(this)).prop("checked")!==e.data("default"))return e.trigger("click")},b=function(){var e;return(e=$(this)).val(e.data("default")),e.trigger("input")},copyInput=function(e,t){$("input[name='"+t+"']").val($("input[name='"+e+"']")[0].value)},disableEmptySecrets=function(){["action_s3_access_key","action_s3_access_secret","action_azure_connection_string","action_gcs_access_key","action_gcs_access_secret","packages-azure-connection-string","packages-aws-access-key","packages-aws-secret-key","migrations-azure-connection-string","migrations-aws-access-key","migrations-aws-secret-key"].forEach(function(e){var t=document.getElementById(e);""===t.value.trim()?t.disabled=!0:t.disabled=!1})},$(document).ready(function(){var e,t;return(t=$("#page-main-nav")).on("click mouseup","a",function(e){var t;return e.preventDefault(),t=this.getAttribute("href"),$("html, body").animate({scrollTop:$(t).offset().top-63},325)}),t.find(".page-actions").on("click","button.js-submit",function(){return $("#settings-form").submit()}),(e=$(".js-page-main-content")).on("keyup change focusout",".js-email",a),e.on("keyup change focusout",".js-url",l),e.on("keyup change focusout",".js-integer",r),e.on("keyup change focusout",".js-required",s),e.on("change focusout",".js-required-list",c),e.on("change",".js-note-trigger",toggleSubmit),e.on("change focusout","#hostname-field",o),e.on("change",".js-toggle-required-field",function(){var e,t,i,n,a,o;for(o=[],t=0,i=(n=this.getAttribute("data-required-field").split(",")).length;t<i;t++)a=n[t],"******"==$(a).attr("placeholder")&&""==$(a).val()||(e=$(a).toggleClass("js-required",this.checked),o.push(s.apply(e)));return o}),$("#settings-form").on("submit",function(){var e;return $(".js-ignore").remove(),$(".js-required").each(s),$(".js-email").each(a),$(".js-url").each(l),$(".js-integer").each(r),$(".js-input-radio:checked").each(window.forms.checkInputRadioField),$(".js-required-list").each(c),e=$("input:checkbox[name=github_ssl\\[enabled\\]]").prop("checked"),Cookies.set("github_isSSLEnabled",e),"default"!==$('input[name="auth_mode"]:checked').val()&&$("#js-enable-passkeys-checkbox").is(":checked")&&!$("#js-builtin-auth-fallback-checkbox").is(":checked")&&$("#js-enable-passkeys-checkbox").prop("checked",!1),disableEmptySecrets(),g()}),$("#ldap-test-form").submit(function(e){var t;return e.preventDefault(),t=e.target.getAttribute("href"),new LdapChecker($(".js-ldap-test"),t).check(),g()}),e.on("click","#test-ldap-settings .js-popover-close",function(){return $("#ldap_test_result").removeClass("flash flash-error flash-success").html("").hide()}),$(".js-private-mode-toggle").on("click",function(e){var t;return t=$(".js-signup-toggle"),e.currentTarget.checked?(t.addClass("disabled"),t.removeClass("active"),t.find("input[type=checkbox]").prop("disabled",!0),t.find("input[type=checkbox]").prop("checked",!1)):(t.find("input[type=checkbox]").prop("disabled",!1),t.removeClass("disabled"))}),$(".js-enable-pages-toggle, .js-private-mode-toggle").on("click",function(){var e,t,i,n;return e=(t=$(".js-public-pages-toggle")).find("input[type=checkbox]"),i=$(".js-enable-pages-toggle").is(":checked"),n=$(".js-private-mode-toggle").is(":checked"),i&&n?(t.removeClass("disabled"),e.prop("disabled",!1)):(t.addClass("disabled").removeClass("active"),e.prop("disabled",!0).prop("checked",!1))}),$(".js-support-address").on("click",function(){var e,t;return(t=$(this)).addClass("inline-label"),t.siblings("input").prop("disabled",!1).show(),(e=$(".js-support-address").not(this)).removeClass("inline-label"),e.siblings("input").hide().val("").removeClass("invalid").prop("disabled",!0),toggleSubmit()}),$(".js-builtin-auth-fallback-checkbox").on("click",function(){var e;if(!$(".js-builtin-auth-fallback-checkbox").is(":checked"))return(e=$(".js-disable-builtin-auth-fallback-warning")).css({top:$(this).offset().top+30}),e.show()}),$("#hostname-field").on("focus",function(){$(".hostname-change-warning").show()}),$("#hostname-field").on("focusout",function(){$(".hostname-change-warning").hide()}),$(document).on("click",".js-defaults-btn",v)})}.call(this);