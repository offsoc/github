"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_themed_pictures_themed-picture-element_ts"],{21813:(e,t,r)=>{r.r(t);var i=r(39595);function s(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function o(e,t){var r=s(e,t,"get");return r.get?r.get.call(e):r.value}var l=new WeakMap;let a=class ThemedPictureElement extends HTMLElement{connectedCallback(){var e;null!==this.firstElementChild&&this.applyTheming(),e=new MutationObserver(()=>{this.applyTheming()}),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}(this,s(this,l,"set"),e),o(this,l).observe(this,{childList:!0,subtree:!0,attributes:!1})}disconnectedCallback(){o(this,l).disconnect()}applyTheming(){let e=this.ownerDocument.querySelector("html[data-color-mode]")?.getAttribute("data-color-mode"),t=this.querySelector("img");if("auto"===e){t?.setAttribute("style","visibility:visible;max-width:100%;");return}null==e&&(e="light"),this.applyColorModeToPicture(this.firstElementChild,e),t?.addEventListener("load",()=>{t.setAttribute("style","visibility:visible;max-width:100%;")})}applyColorModeToPicture(e,t){let r=e.querySelectorAll("source"),i=[],s=[];this.saveSourceThemes(r,i,s),this.updatePictureTheme(t,i,s)}saveSourceThemes(e,t,r){for(let i of e??[]){let e=i.getAttribute("media")??"",s=this.getSourceTheme(e);null!==s&&(i.classList.contains("source-light")||i.classList.add(`source-${s}`),i.classList.contains("source-light")?t.push(i):i.classList.contains("source-dark")&&r.push(i))}}updatePictureTheme(e,t,r){"light"===e?this.toggleSources({off:r,on:t}):"dark"===e&&this.toggleSources({off:t,on:r})}toggleSources({off:e,on:t}){for(let e of t)e.setAttribute("media","(prefers-color-scheme: light),(prefers-color-scheme: dark)");for(let t of e)t.setAttribute("media","not all")}getSourceTheme(e){return e?.match("(prefers-color-scheme: light)")?"light":e?.match("(prefers-color-scheme: dark)")?"dark":null}constructor(...e){super(...e),function(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}(this,l,{writable:!0,value:void 0})}};a=function(e,t,r,i){var s,o=arguments.length,l=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(o<3?s(l):o>3?s(t,r,l):s(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l}([i.p_],a)}}]);
//# sourceMappingURL=app_components_themed_pictures_themed-picture-element_ts-bd5dc9f72155.js.map