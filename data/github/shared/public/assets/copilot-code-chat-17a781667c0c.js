"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-code-chat"],{91160:(e,t,n)=>{n.d(t,{M:()=>r});function r(e){if(null==e)throw Error("Failed to load page data.")}},822:(e,t,n)=>{n.d(t,{HS:()=>a,Oc:()=>l,Tv:()=>s,Xr:()=>SymbolChangedEvent,f7:()=>i,fD:()=>o,qR:()=>r});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function l(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function a(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function i(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function s(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},89426:(e,t,n)=>{n.d(t,{C6:()=>a,G7:()=>r,wh:()=>l,xP:()=>i});let r="tree-comparison",l={explain:"explain",conversation:"conversation",suggest:"suggest",askDocs:"ask-docs",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request"},a=["exception","filtered","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],i=["bing-search","codesearch","kb-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data","support-search"]},67310:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});let r=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"prNumber"},n={defaultValue:null,kind:"LocalArgument",name:"repoName"},r={defaultValue:null,kind:"LocalArgument",name:"repoOwner"},l={defaultValue:null,kind:"LocalArgument",name:"startOid"},a=[{kind:"Variable",name:"name",variableName:"repoName"},{kind:"Variable",name:"owner",variableName:"repoOwner"}],i=[{kind:"Variable",name:"number",variableName:"prNumber"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},o],storageKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c,o],storageKey:null},o],f=[{kind:"Literal",name:"first",value:10}],p={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},E=[p,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],b={alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:E,storageKey:null},k={alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:E,storageKey:null};return{fragment:{argumentDefinitions:[e,t,n,r,l],kind:"Fragment",metadata:null,name:"CopilotDiffChatPartial_DiffChatQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"PullRequest",kind:"LinkedField",name:"pullRequest",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"InjectedDiffEntries_PullRequestFragment"},{args:null,kind:"FragmentSpread",name:"DiffHeaderAskCopilotButton_data"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,n,t,l,e],kind:"Operation",name:"CopilotDiffChatPartial_DiffChatQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"PullRequest",kind:"LinkedField",name:"pullRequest",plural:!1,selections:[o,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,c,o],storageKey:null},{alias:null,args:[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:u,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:u,storageKey:null},{alias:null,args:f,concreteType:"PullRequestDiffEntryConnection",kind:"LinkedField",name:"diffEntries",plural:!1,selections:[{alias:null,args:null,concreteType:"PullRequestDiffEntryEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PullRequestDiffEntry",kind:"LinkedField",name:"node",plural:!1,selections:[p,m,g,y,h,v,b,k,o,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"diffEntries(first:10)"},{alias:null,args:f,filters:null,handle:"connection",key:"DiffEntriesList_entriesData_diffEntries",kind:"LinkedHandle",name:"diffEntries"},{alias:"firstDiffEntry",args:[{kind:"Literal",name:"first",value:1}],concreteType:"PullRequestDiffEntryConnection",kind:"LinkedField",name:"diffEntries",plural:!1,selections:[{alias:null,args:null,concreteType:"PullRequestDiffEntryEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PullRequestDiffEntry",kind:"LinkedField",name:"node",plural:!1,selections:[m,p,g,y,h,v,b,k,o],storageKey:null}],storageKey:null}],storageKey:"diffEntries(first:1)"},{alias:"diffEntriesMetadata",args:null,concreteType:"PullRequestDiffEntryConnection",kind:"LinkedField",name:"diffEntries",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},o],storageKey:null}]},params:{id:"7736b1732f9c488c7389790a5f795867",metadata:{},name:"CopilotDiffChatPartial_DiffChatQuery",operationKind:"query",text:null}}}();r.hash="1d698e44fc4914e2d274d5fcc38e29f9";let l=r},1901:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});let r=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"path"},n={defaultValue:null,kind:"LocalArgument",name:"prId"},r={defaultValue:null,kind:"LocalArgument",name:"startOid"},l=[{kind:"Variable",name:"id",variableName:"prId"}],a=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],i=[{kind:"Variable",name:"path",variableName:"path"}],o={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},s=[o,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,t,n,r],kind:"Fragment",metadata:null,name:"InjectedDiffEntries_DiffEntryQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:a,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:i,concreteType:"PullRequestDiffEntry",kind:"LinkedField",name:"diffEntry",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,t,r,e],kind:"Operation",name:"InjectedDiffEntries_DiffEntryQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:a,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:i,concreteType:"PullRequestDiffEntry",kind:"LinkedField",name:"diffEntry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:s,storageKey:null},d],storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},d],storageKey:null}]},params:{id:"06b2b99a2fc9dd3fbf8cef4df4e1096b",metadata:{},name:"InjectedDiffEntries_DiffEntryQuery",operationKind:"query",text:null}}}();r.hash="76f7e4c6cf06253ca66cb057950d6297";let l=r},41782:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});let r={argumentDefinitions:[{kind:"RootArgument",name:"endOid"},{kind:"RootArgument",name:"startOid"}],kind:"Fragment",metadata:null,name:"InjectedDiffEntries_PullRequestFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null};r.hash="da051f7b59fe26727562322ae476ee93";let l=r},21996:(e,t,n)=>{n.d(t,{o:()=>DiffSelectionEvent});let DiffSelectionEvent=class DiffSelectionEvent extends Event{static dispatch(){window.dispatchEvent(new DiffSelectionEvent)}constructor(){super(DiffSelectionEvent.NAME,{bubbles:!1,cancelable:!0})}};DiffSelectionEvent.NAME="diff-line-selection"},86376:(e,t,n)=>{var r=n(39595);function l(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t){var n=l(e,t,"get");return n.get?n.get.call(e):n.value}function i(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function o(e,t,n){var r=l(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,r,n),n}function s(e,t,n,r){var l,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(i=(a<3?l(i):a>3?l(t,n,i):l(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}var d=new WeakMap,c=new WeakMap,u=new WeakMap;let f=class CopilotDiffEntryStore extends EventTarget{get entries(){return a(this,d)}clear(){o(this,d,new Set)}connect(e){a(this,u).observe(e)}disconnect(e){a(this,u).unobserve(e)}constructor(...e){super(...e),i(this,u,{get:p,set:void 0}),i(this,d,{writable:!0,value:void 0}),i(this,c,{writable:!0,value:void 0}),o(this,d,new Set)}};function p(){return o(this,c,a(this,c)??new IntersectionObserver(e=>{let t=new Set(a(this,d)),n=!1;for(let r of e){let e=r.target;r.isIntersecting&&!t.has(e)?(t.add(e),n=!0):!r.isIntersecting&&t.has(e)&&(t.delete(e),n=!0)}if(n){for(let e of t)document.contains(e)||t.delete(e);o(this,d,t),this.dispatchEvent(new Event("update"))}},{rootMargin:"50%"}))}let CopilotDiffEntryElement=class CopilotDiffEntryElement extends HTMLElement{connectedCallback(){this.menuItemsSlot?.replaceChildren(),CopilotDiffEntryElement.store.connect(this)}disconnectedCallback(){CopilotDiffEntryElement.store.disconnect(this)}constructor(...e){super(...e),this.filePath="",this.disabled=!1}};CopilotDiffEntryElement.store=new f,s([r.CF],CopilotDiffEntryElement.prototype,"filePath",void 0),s([r.CF],CopilotDiffEntryElement.prototype,"disabled",void 0),s([r.aC],CopilotDiffEntryElement.prototype,"menuItemsSlot",void 0),CopilotDiffEntryElement=s([r.p_],CopilotDiffEntryElement);var m=n(9449),g=n(91160),y=n(44196),h=n(72245),v=n(83028),E=n(55293),b=n(18312),k=n(3328),_=n(56940);n(69487);var w=n(54371),R=n(822),S=n(89426),x=n(51848),C=n(54156),L=n(17909),D=n(20053);let j={className:(0,D.$)({"code-chat-menu-item":"DiffEntryMenuItems-module__code-chat-menu-item--wThbu"}["code-chat-menu-item"],"px-5"),role:"menuitem"},F=({fileDiffReference:e})=>{let{addToast:t}=(0,C.Y6)();return void 0===e?(0,m.jsx)(T,{inactiveText:"Copilot is not available for this file type"}):(0,m.jsx)(T,{handleAttach:()=>{(0,R.Oc)(e),t({message:"Reference added to thread",type:"success"}),(0,x.BI)("copilot.file-diff.menu.add")},handleDiscuss:()=>{(0,R.qR)({intent:S.wh.conversation,references:[e]}),(0,x.BI)("copilot.file-diff.menu.discuss")}})},T=({handleDiscuss:e,handleAttach:t,inactiveText:n})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(L.l.Item,{...j,inactiveText:n,onSelect:e,children:"Ask Copilot about this diff"}),(0,m.jsx)(L.l.Item,{...j,inactiveText:n,onSelect:t,children:"Attach to current thread"})]});try{F.displayName||(F.displayName="DiffEntryMenuItems")}catch{}try{T.displayName||(T.displayName="BuildMenu")}catch{}var A=n(54008),N=n(59857),O=n(6185),K=n(281),P=n(87330),q=n(13107);let I="diff-lines-copilot-button",M=({fileDiffReference:e,afterSelect:t})=>(0,m.jsx)(q.c,{referenceType:e.type,onClick:()=>{(0,R.qR)({intent:S.wh.conversation,references:[e],id:I}),(0,x.BI)("copilot.file-diff.discuss"),t?.()},id:I});try{M.displayName||(M.displayName="DiffLinesAskCopilotButton")}catch{}let B={square:"DiffLinesMenu-module__square--wor4Z","diff-button":"DiffLinesMenu-module__diff-button--QKR13","diff-button-container":"DiffLinesMenu-module__diff-button-container--UrMbh"};var V=n(39037),$=n(78017);let z=({fileDiffReference:e,onOpenChange:t})=>{let[n,r]=(0,E.useState)(!1),l=e=>{r(e),t?.(e)},a=(0,E.useRef)(null),[i,o]=(0,A.B)({"aria-label":"Copilot menu",contentRef:a,direction:"sw",anchorSide:"outside-bottom"}),s=()=>l(!1);return(0,m.jsxs)(O.A,{className:B["diff-button-container"],children:[(0,m.jsx)(M,{fileDiffReference:e,afterSelect:s}),(0,m.jsxs)(K.W,{open:n,onOpenChange:l,anchorRef:a,children:[(0,m.jsx)(K.W.Anchor,{children:(0,m.jsx)(P.K,{unsafeDisableTooltip:!0,icon:N.TriangleDownIcon,"aria-label":"Copilot menu",ref:a,onSelect:()=>l(!0),size:"small",className:(0,D.$)(B.square,B["diff-button"]),"data-testid":"more-copilot-button",...i})}),(0,m.jsx)(K.W.Overlay,{align:"end",children:(0,m.jsxs)(L.l,{children:[(0,m.jsx)(V.e,{fileDiffReference:e,afterSelect:s}),(0,m.jsx)(L.l.Divider,{}),(0,m.jsx)($.i,{fileDiffReference:e,afterSelect:s})]})})]}),o]})};try{z.displayName||(z.displayName="DiffLinesMenu")}catch{}var H=n(76515);function G(e,t=Element){let n=(0,E.useRef)();return(0,E.useSyncExternalStore)(e=>{let t=new MutationObserver(()=>e());return t.observe(document.body,{subtree:!0,childList:!0}),()=>t.disconnect()},()=>{var r;let l=Array.from(document.querySelectorAll(e)).filter(e=>e instanceof t);return n.current&&(r=n.current).length===l.length&&r.every((e,t)=>e===l[t])?n.current:n.current=l})}var J=n(21996);let Q=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),W=e=>(0,E.useSyncExternalStore)(Q,()=>e?.contains(document.activeElement)),U=()=>{let e=(0,E.useSyncExternalStore)(e=>(window.addEventListener(J.o.NAME,e),()=>window.removeEventListener(J.o.NAME,e)),()=>window.location.hash),t=(0,H.ZD)(e);if(!t)return null;let n=document.querySelector(".selected-line.selected-line-top.blob-code:not(.js-skip-tagsearch)"),r=document.querySelector(".selected-line.selected-line-top.blob-code.js-skip-tagsearch"),l=n??r;return l?{...t,topRightElement:l}:null},Y=()=>{let[e,t]=(0,E.useState)(),n=G("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement);if((0,E.useEffect)(()=>{function e(){t(this)}function r(){t(void 0)}for(let t of n)t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",r);return()=>{for(let t of n)t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",r)}},[n]),!e)return null;let[r,l]=e?.parentElement?.querySelectorAll("td.blob-num")??[],a=r?.id||l?.id||void 0,i=a?(0,H.ZD)(a):void 0;return i?{...i,topRightElement:e}:null},Z=()=>{let e=G("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement),[t,n]=(0,E.useState)();(0,E.useEffect)(()=>{function t(){n(this)}for(let n of e)n.addEventListener("focusin",t);return()=>{for(let n of e)n.removeEventListener("focusin",t)}},[e]);let r=W(t);if((0,E.useEffect)(()=>{r||n(void 0)},[r]),!t)return null;let[l,a]=t?.parentElement?.querySelectorAll("td.blob-num")??[],i=l?.id||a?.id||void 0,o=i?(0,H.ZD)(i):void 0;return o?{...o,topRightElement:t}:null},X=()=>{let e=new Map,t=Y();t&&e.set(t.diffAnchor,t);let n=U();n&&e.set(n.diffAnchor,n);let r=Z();return r&&e.set(r.diffAnchor,r),e};var ee=n(88299);let et=n(41782),en=n(1901),er=()=>(0,E.useSyncExternalStore)(e=>(CopilotDiffEntryElement.store.addEventListener("update",e),()=>CopilotDiffEntryElement.store.removeEventListener("update",e)),()=>CopilotDiffEntryElement.store.entries);function el({fileDiffReference:e,activeLines:t}){let[n,r]=(0,E.useState)(!1),l=(0,E.useRef)(t),a=n?l.current:t;if(l.current=a,!a)return null;let i={...e,selectedRange:{start:`${a.startOrientation[0]?.toUpperCase()??""}${a.startLineNumber}`,end:`${a.endOrientation[0]?.toUpperCase()??""}${a.endLineNumber}`}};return(0,_.createPortal)((0,m.jsx)(z,{fileDiffReference:i,onOpenChange:r}),a.topRightElement)}function ea({entryElement:{menuItemsSlot:e,filePath:t},startOid:n,endOid:r,pullRequestKey:l,activeLinesById:a}){let i=(0,b.useFragment)(et,l);(0,g.M)(i.comparison);let o=b.useLazyLoadQuery(en,{prId:i.id,path:t,startOid:n,endOid:r}).node?.comparison?.diffEntry;(0,g.M)(o);let[s]=(0,ee.E)(i.repository.owner.login,i.repository.name,r,t),d=(0,w.Kf)(i.comparison,o,s?.oid);return(0,m.jsxs)(m.Fragment,{children:[d&&(0,m.jsx)(el,{fileDiffReference:d,activeLines:a.get(d.id)}),e&&(0,_.createPortal)((0,m.jsx)(F,{fileDiffReference:d}),e)]})}function ei({pullRequestKey:e,startOid:t,endOid:n}){let r=er(),l=X();return(0,m.jsx)(m.Fragment,{children:Array.from(r).map(r=>(0,m.jsx)(y.t,{fallback:null,children:(0,m.jsx)(E.Suspense,{fallback:null,children:(0,m.jsx)(ea,{startOid:t,endOid:n,pullRequestKey:e,entryElement:r,activeLinesById:l})})},r.filePath))})}try{el.displayName||(el.displayName="InjectedDiffButton")}catch{}try{ea.displayName||(ea.displayName="InjectedDiffEntry")}catch{}try{ei.displayName||(ei.displayName="InjectedDiffEntries")}catch{}let eo=(0,v.E7)(),es=n(67310);function ed(e){let t=b.useLazyLoadQuery(es,e).repository?.pullRequest;return(0,g.M)(t),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ei,{pullRequestKey:t,startOid:e.startOid,endOid:e.endOid}),(0,m.jsx)(k.Kk,{pullRequestKey:t})]})}function ec(e){return(0,E.useEffect)(()=>{document.querySelector("diff-layout")?.classList.add("copilot-chat-enabled")},[]),(0,m.jsx)(b.RelayEnvironmentProvider,{environment:eo,children:(0,m.jsx)(y.t,{fallback:(0,m.jsx)(k.yJ,{}),children:(0,m.jsx)(E.Suspense,{fallback:(0,m.jsx)(k.Y7,{}),children:(0,m.jsx)(ed,{...e})})})})}(0,h.k)("copilot-code-chat",{Component:ec});try{ed.displayName||(ed.displayName="DiffChat")}catch{}try{ec.displayName||(ec.displayName="CopilotDiffChatPartial")}catch{}},6032:(e,t,n)=>{n.d(t,{U:()=>a});let r=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},l=(e,t)=>e&&null!==e.parentNode?l(e.parentNode,t.concat([e])):t;function a(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of l(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&r(t))return t;return document.scrollingElement||document.documentElement}}},51848:(e,t,n)=>{let r;n.d(t,{BI:()=>p,Ti:()=>m,lA:()=>f});var l=n(70837),a=n(97524),i=n(74572),o=n(51528);let{getItem:s}=(0,i.A)("localStorage"),d="dimension_",c=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,l.O)("octolytics");delete e.baseContext,r=new a.s(e)}catch(e){}function u(e){let t=(0,l.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(d)&&(t[e.replace(d,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,r]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))c.includes(e.toLowerCase())&&(t[e]=r);return t.staff=(0,o.X)().toString(),Object.assign(t,e)}function f(e){r?.sendPageView(u(e))}function p(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,l=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(l[e]=`${n}`);r&&(u(l),r.sendEvent(e||"unknown",u(l)))}function m(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},92536:(e,t,n)=>{n.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let n=this.registrationEntries[e];n?n.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new r),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let r=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,n)=>{n.d(t,{Mm:()=>a,QJ:()=>i,w8:()=>l});var r=n(55293);function l(e){return((0,r.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function a(e){let t=(0,r.useRef)(e.__wrapperElement.anchor||null),[n,l]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>{l(!n)},[n,l]);return(0,r.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",n.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,n]),i(e,a),{ref:t,open:n,setOpen:l}}function i(e,t){let n=(0,r.useRef)(e.__wrapperElement.anchor);(0,r.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[n,t])}},72245:(e,t,n)=>{n.d(t,{k:()=>d});let r=new(n(92536)).R;var l=n(9449),a=n(39595),i=n(24508),o=n(23235);let s=class ReactPartialElement extends i.H{async getReactNode(e){var t;let{Component:n}=await (t=this.name,r.getRegistration(t)),a=this.closest("react-partial-anchor");return(0,l.jsx)(o.c,{partialName:this.name,embeddedData:e,Component:n,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:a})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function d(e,t){r.register(e,t)}s=function(e,t,n,r){var l,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(i=(a<3?l(i):a>3?l(t,n,i):l(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([a.p_],s)},23581:(e,t,n)=>{n.d(t,{A:()=>o});let{getItem:r,setItem:l,removeItem:a}=(0,n(74572).A)("localStorage"),i="REACT_PROFILING_ENABLED",o={enable:()=>l(i,"true"),disable:()=>a(i),isEnabled:()=>!!r(i)}},69653:(e,t,n)=>{n.d(t,{Ai:()=>a,Gq:()=>r,SO:()=>l});let{getItem:r,setItem:l,removeItem:a}=(0,n(74572).A)("sessionStorage")},27260:(e,t,n)=>{n.d(t,{z:()=>r});let r=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},54861:(e,t,n)=>{n.d(t,{BW:()=>l,Ff:()=>p,HK:()=>E,JA:()=>R,LM:()=>m,Pv:()=>_,Vy:()=>f,ZW:()=>k,dR:()=>b,di:()=>g,fX:()=>w,k9:()=>v,my:()=>h,r7:()=>S,wG:()=>y,xT:()=>u});var r=n(69653);let l="reload",a="soft-nav:fail",i="soft-nav:fail-referrer",o="soft-nav:referrer",s="soft-nav:marker",d="soft-nav:react-app-name",c="soft-nav:latest-mechanism";function u(){(0,r.SO)(s,"0"),(0,r.Ai)(o),(0,r.Ai)(a),(0,r.Ai)(i),(0,r.Ai)(d),(0,r.Ai)(c)}function f(e){(0,r.SO)(s,e)}function p(){(0,r.SO)(s,"0")}function m(){let e=(0,r.Gq)(s);return e&&"0"!==e}function g(){return(0,r.Gq)(s)}function y(){return!!h()}function h(){return(0,r.Gq)(a)}function v(e){(0,r.SO)(a,e||l),(0,r.SO)(i,window.location.href)}function E(){(0,r.SO)(o,window.location.href)}function b(){return(0,r.Gq)(o)||document.referrer}function k(){let e=w();e?(0,r.SO)(d,e):(0,r.Ai)(d)}function _(){return(0,r.Gq)(d)}function w(){return document.querySelector('meta[name="ui"]')?"ui":document.querySelector("react-app")?.getAttribute("app-name")}function R(e){(0,r.SO)(c,e)}function S(){return(0,r.Gq)(c)}},88299:(e,t,n)=>{n.d(t,{E:()=>f,q:()=>u});var r=n(5225),l=n(83056),a=n(27260),i=n(28784),o=n(55293);async function s(e){let t=await (0,i.lS)(e);return t.ok?await t.json():void 0}let d=new Map,c=(0,r.A)(s,{cache:d});function u(){d.clear()}function f(e,t,n,r){let[i,s]=(0,o.useState)(),[d,f]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!0),g=t&&e&&n&&r?(0,l.IO)({repo:{name:t,ownerLogin:e},commitish:n,action:"latest-commit",path:r}):null;return(0,o.useEffect)(()=>(document.addEventListener(a.z.START,u),()=>{document.removeEventListener(a.z.START,u)})),(0,o.useEffect)(()=>{let e=!1;return(async()=>{if(!g)return;f(!1),m(!0),s(void 0);let t=await c(g);if(!e){try{t?s(t):f(!0)}catch(e){f(!0)}m(!1)}})(),function(){e=!0}},[g,n]),[i,p,d]}},13107:(e,t,n)=>{n.d(t,{c:()=>c});var r=n(9449),l=n(54008),a=n(59857),i=n(87330),o=n(20053),s=n(55293);let d={square:"AskCopilotButton-module__square--o8kDO",muted:"AskCopilotButton-module__muted--QatcG"};function c({children:e,referenceType:t,...n}){let c=(0,s.useRef)(null),u=`Ask Copilot about this ${t}`,[f,p]=(0,l.B)({"aria-label":u,contentRef:c,direction:"sw",anchorSide:"outside-bottom"});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.K,{unsafeDisableTooltip:!0,className:(0,o.$)(d.square,!!e&&d.muted),ref:c,icon:a.CopilotIcon,size:"small","aria-label":u,"data-testid":"copilot-ask-menu",...f,...n}),p]})}try{c.displayName||(c.displayName="AskCopilotButton")}catch{}},26020:(e,t,n)=>{n.d(t,{Y:()=>p});var r=n(9449),l=n(59299),a=n(44999),i=n(16255),o=n(20053),s=n(55293);let d=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-d73eef01-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,l.Jt)("fonts.normal"),(0,l.Jt)("colors.fg.onEmphasis"),(0,l.Jt)("colors.neutral.emphasisPlus"),(0,l.Jt)("radii.2"),(0,l.Jt)("space.3"),(0,l.Jt)("space.3"),(0,l.Jt)("space.3"),(0,l.Jt)("space.3"),a.A),c=()=>()=>void 0,u=()=>!1,f=()=>!0,p=(0,s.forwardRef)(function({direction:e="n",className:t,text:n,noDelay:l,align:a,wrap:p,open:m=!1,portalProps:g={},...y},h){let v=(0,s.useSyncExternalStore)(c,f,u),E=(0,o.$)(t,`tooltipped-${e}`,a&&`tooltipped-align-${a}-2`,l&&"tooltipped-no-delay",p&&"tooltipped-multiline",m&&"tooltipped-open");return v?(0,r.jsx)(i.Z,{...g,children:(0,r.jsx)(d,{ref:h,role:"tooltip","aria-label":n,"data-visible-text":n||y["aria-label"],...y,sx:{position:"fixed",zIndex:1,...y.sx},className:E})}):null});try{p.displayName||(p.displayName="ControlledTooltip")}catch{}},68976:(e,t,n)=>{n.d(t,{m:()=>s});var r=n(9449),l=n(80373),a=n(55293),i=n(26020),o=n(6032);let s=(0,a.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:n,anchorSide:s,anchorOffset:d,alignmentOffset:c,allowOutOfBounds:u,...f},p){let m=(0,a.useRef)(null);(0,a.useImperativeHandle)(p,()=>m.current);let g=(0,a.useRef)({left:0,top:0}),y=(0,a.useSyncExternalStore)((0,a.useCallback)(n=>{if(!m.current||!e.current||!t)return()=>void 0;let r=(0,o.U)(e.current);return r?.addEventListener("scroll",n),()=>{r?.removeEventListener("scroll",n)}},[e,t]),(0,a.useCallback)(()=>{if(!m.current||!e.current)return g.current;let t=(0,l.u)(m.current,e.current,{align:n??"center",side:s??"outside-top",alignmentOffset:c??0,anchorOffset:d??0,allowOutOfBounds:u});return(t.left!==g.current.left||t.top!==g.current.top)&&(g.current=t),g.current},[e,c,d,n,s,u]),(0,a.useCallback)(()=>g.current,[]));return(0,r.jsx)(i.Y,{...f,ref:m,open:t,style:{position:"absolute",...y,...f.style}})});try{s.displayName||(s.displayName="PortalTooltip")}catch{}},54008:(e,t,n)=>{n.d(t,{B:()=>i});var r=n(9449),l=n(55293),a=n(68976);function i({includeAriaAttributes:e=!0,...t}){let n=(0,l.useId)(),[i,o]=(0,l.useState)(!1),s=t.open??i,d=t.id??n,c=e?{"aria-describedby":d}:{},u=(0,l.useCallback)(()=>o(!0),[]),f=(0,l.useCallback)(()=>o(!1),[]);return[{...c,onPointerEnter:u,onPointerLeave:f,onFocus:u,onBlur:f},(0,r.jsx)(a.m,{...t,open:s,id:d},"portal-tooltip")]}},44196:(e,t,n)=>{n.d(t,{t:()=>ErrorBoundary});var r=n(9449),l=n(1819),a=n(55293);let ErrorBoundary=class ErrorBoundary extends a.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){"function"==typeof this.props.onError?this.props.onError(e):setTimeout(()=>{throw e})}render(){return this.state.error?void 0===this.props.fallback?(0,r.jsx)(l.M,{type:"httpError"}):this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}}},1819:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(9449),l=n(73729),a=n(75177);let i={404:"Didn\u2019t find anything here!",500:"Looks like something went wrong!"};function o({httpStatus:e,type:t}){let n="fetchError"===t?"Looks like network is down!":i[e||500];return(0,r.jsxs)(l.A,{as:"h1",tabIndex:-1,sx:{display:"flex",flexDirection:"column",minWidth:"100%",minHeight:"100%",alignItems:"center",justifyContent:"center"},children:["Error",e?(0,r.jsx)(a.A,{sx:{fontSize:"144px",fontWeight:"bold",lineHeight:1},children:e}):null,(0,r.jsx)(a.A,{sx:{fontSize:4,pt:2},children:n})]})}try{o.displayName||(o.displayName="ErrorPage")}catch{}},23235:(e,t,n)=>{n.d(t,{c:()=>m});var r=n(9449),l=n(55293),a=n(36165),i=n(45588),o=n(49107),s=n(47767),d=n(59840);function c({children:e,history:t}){let[n,a]=(0,l.useState)({location:t.location});return(0,d.m)(()=>t.listen(a),[t]),(0,r.jsx)(s.Ix,{location:n.location,navigator:t,children:e})}try{c.displayName||(c.displayName="PartialRouter")}catch{}var u=n(17857),f=n(51261),p=n(75014);function m({partialName:e,embeddedData:t,Component:n,wasServerRendered:s,ssrError:d,anchorElement:m}){let g=l.useRef(),y=globalThis.window;g.current||(g.current=y?(0,f.z)({window:y}):(0,i.sC)({initialEntries:[{pathname:"/"}]}));let h=g.current,v=(0,p.w8)(m);return(0,r.jsx)(a.U,{appName:e,wasServerRendered:s,children:(0,r.jsx)(o.Q,{history:h,routes:[],children:(0,r.jsxs)(c,{history:h,children:[(0,r.jsx)(n,{...t.props,...v}),(0,r.jsx)(u.h,{ssrError:d})]})})})}try{m.displayName||(m.displayName="PartialEntry")}catch{}},24508:(e,t,n)=>{n.d(t,{H:()=>ReactBaseElement});var r=n(9449),l=n(39595),a=n(34613),i=n(55293),o=n(23581),s=n(79461),d=n(51528);function c(e,t,n,r){var l,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(i=(a<3?l(i):a>3?l(t,n,i):l(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:a.createRoot,hydrateRoot:a.hydrateRoot};o.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),n=this.ssrError?.textContent,l=await this.getReactNode(t),s=(0,r.jsx)(i.StrictMode,{children:l});if(n&&this.logSSRError(n),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,s,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),n=String(t?.groups?.invariant);(0,d.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:n}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(s);this.classList.add("loaded")}getReactDomWithProfiling(){return n.e("react-profiling").then(n.t.bind(n,87358,19))}logSSRError(e){if(s.z[e])return console.error("SSR failed with an expected error:",s.z[e]);try{let t=JSON.parse(e),n=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:n,filename:r,lineno:l,colno:a}=e,i=`${t} at ${n} (${r}:${l}:${a})`;return t=" ",i}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,n)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};c([l.aC],ReactBaseElement.prototype,"embeddedData",void 0),c([l.aC],ReactBaseElement.prototype,"ssrError",void 0),c([l.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_react-relay_index_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_stack-68835d","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-8bbff8","vendors-node_modules_primer_behaviors_dist_esm_anchored-position_js-node_modules_primer_react-a147af","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_paths_index_ts","ui_packages_relay-environment_relay-environment_ts","ui_packages_diff-lines_helpers_document-hash-helpers_ts-ui_packages_copilot-code-chat_diff-vi-16a20e"],()=>t(86376)),e.O()}]);
//# sourceMappingURL=copilot-code-chat-49c3e4fc43b1.js.map