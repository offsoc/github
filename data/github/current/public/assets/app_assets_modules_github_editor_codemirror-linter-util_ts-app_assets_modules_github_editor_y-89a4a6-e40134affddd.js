"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_editor_codemirror-linter-util_ts-app_assets_modules_github_editor_y-89a4a6"],{83650:(e,t,n)=>{n.d(t,{C:()=>r,i:()=>CodeMirrorLintingHelper});var l=n(17688);let CodeMirrorLintingHelper=class CodeMirrorLintingHelper{clearState(){for(let e of this.lintMarks)e.clear(),e.destroyTooltip&&e.destroyTooltip();this.lintMarks.splice(0)}createMarks(e,t){for(let n of t){let{from:t,to:l,severity:r}=n,i=e.markText(t,l,{className:`CodeMirror-lint-mark CodeMirror-lint-mark-${r}`,__message:n});this.lintMarks.push(i)}}showTooltip(e,t){let n=t.target||t.srcElement;if(!n.classList.contains("CodeMirror-lint-mark"))return;let l=n.getBoundingClientRect(),r=(l.left+l.right)/2,i=(l.top+l.bottom)/2,o=function(e,t,n){let l=e.findMarksAt(e.coordsChar({left:t,top:n},"window"));if(0===l.length)return null;let r=l[0];return r.keepTooltip?(r.keepTooltip(),null):r}(e,r,i);if(!o)return;let{__message:s}=o;if(!s)return;let u=this.createTooltip(s,l.left,i),a=u.querySelector("select"),c=u.querySelector("button"),f=null,h=()=>{document.activeElement!==a&&(f=setTimeout(()=>{delete o.keepTooltip,delete o.destroyTooltip,u.parentElement&&(u.style.opacity="0",setTimeout(()=>u.parentElement&&u.parentElement.removeChild(u),600))},100))},p=()=>clearTimeout(f);CodeMirror.on(u,"mouseout",h),CodeMirror.on(n,"mouseout",h),CodeMirror.on(u,"mouseover",p),CodeMirror.on(n,"mouseover",p),o.keepTooltip=p,o.destroyTooltip=h;let g=t=>{let n=o.find();e.focus(),e.setSelection(n.from,n.to),e.replaceSelection(t),h()};c.addEventListener("click",()=>g(c.textContent)),a.addEventListener("change",()=>g(a.value)),a.addEventListener("focusout",h)}createTooltip(e,t,n){let{message:r,fixes:i}=e,o=document.querySelector("#yaml-lint-template"),s=document.importNode(o.content,!0).querySelector(".js-yaml-lint"),u=s.querySelector(".js-yaml-lint-header"),a=s.querySelector(".js-yaml-lint-title"),c=s.querySelector(".js-yaml-lint-subtitle"),f=s.querySelector(".js-yaml-lint-message"),h=s.querySelector(".js-yaml-lint-fixes"),p=c.querySelector("button");if(u.hidden=!i,f.hidden=!!i,c.hidden=!i,h.hidden=!i||i.length<2,i){(0,l.XX)(r,a);let e=i[0];p.textContent=e;let t=h.querySelector("select");for(let e of i.slice(1)){let n=document.createElement("option");n.textContent=e,t.appendChild(n)}}else(0,l.XX)(r,f);return document.body.appendChild(s),s.classList.add("CodeMirror-lint-tooltip"),s.style.opacity="1",s.style.left=`${t}px`,s.style.top=`${n-s.clientHeight-18}px`,s}constructor(){this.lintMarks=[]}};function r(e,t){let n=e.split("\n"),l=0,r=0;for(;r+n[l].length<t;)r+=n[l].length+1,l++;return{startLine:l,startColumn:t-r}}},72388:(e,t,n)=>{n.d(t,{o:()=>r});var l=n(57210);let r={load:n.n(l)().load}},71088:(e,t,n)=>{n.d(t,{F1:()=>i,eK:()=>c,lk:()=>o,nx:()=>u});var l=n(53712),r=n(63830);function i(e,t){return t.startsWith(e)&&e!==t}function o(e,t,n=[]){let l=t.toLowerCase(),r=n.map(e=>e.toLowerCase());return e.filter(e=>{let t=String(("object"==typeof e&&"text"in e?e.text:null)||e).toLowerCase();return i(l,t)&&!r.includes(t)})}async function s(e,t,n,r,i,s){let u;if(n.single&&1===n.single.length&&"boolean"===n.single[0])u=["true","false"];else{if(!n.values)return null;u=await (0,l.L)(n,e,t)}let a=o(u,r,i);return 0===a.length?null:a.map(e=>({displayText:e,snippet:{tokens:[s?`[${e}]`:e]},replace:r}))}async function u(e,t,n,l){try{let{simplifiedText:i,lastLine:o}=(0,r.OV)(t),{result:s,lastValue:u,consumeKey:c}=(0,r.qg)(i,""),{path:f,lastValue:h}=(0,r.on)(s);c&&f.pop();let p=null!==o.match(/^\s*(-\s*)?$/)||-1===o.indexOf(":"),{result:g}=(0,r.qg)(t,e.substring(t.length)),m=(0,r.hj)(g,f),d=function(e,t){let n=(0,r.cy)(e,t);return Array.isArray(n)?n.map(String):[]}(g,f);return await a(n,l,g,f,null!=u?u:h,[...m,...d],p)}catch(e){return null}}async function a(e,t,n,i,u,a,c){var f;let h=e({}),p=(0,l.t)(i,h);if(!p)return null;let g=Array.isArray((0,r.cy)(n,i));if(g&&!0!==p.multipleValues)return null;if(!c||g||!p.rules){let e=!g&&!0===p.multipleValues;return(t?await t(n,i,u):null)||await s(n,i,p,u,a,e)}return o(Object.keys(f=p.rules),u,a).map(e=>{let t=f[e],n=t.single||t.values?" ":!t.rules||t.items||t.map?t.rules||!t.items||t.map?"":"\n	- ":"\n	";return{displayText:e,snippet:{tokens:[`${e}:${n}`]},replace:u,description:t.description}})}function c(e){let t=e.match(/^\.(.+)?|\['(.+?)('\])?$/);return t?t[1]||t[2]||"":e}},63830:(e,t,n)=>{n.d(t,{HE:()=>b,IM:()=>d,OV:()=>v,Ok:()=>u,PR:()=>m,T7:()=>g,TA:()=>y,VF:()=>f,Xh:()=>a,_v:()=>c,cy:()=>o,fN:()=>q,hj:()=>s,lz:()=>p,on:()=>k,qg:()=>w,sY:()=>h});var l=n(17688),r=n(51088),i=n(72388);function o(e,t){let n=e;for(let e of t){if("object"!=typeof n||null==n)return null;n=n[e]}return n}function s(e,t){var n;return null==(n=o(e,t))||"object"!=typeof n||Array.isArray(n)?[]:Object.keys(n)}function u(e){return(0,l.qy)` <code>${e}</code> `}function a(e){return(0,l.qy)` ${e.map((e,t)=>(0,l.qy)` ${t>0?", ":""}${u(e)} `)} `}function c(e){let t=e.match(/^\s*/);return t?t[0]:""}function f(e,t,n){return e.replace(/\t/g,t).replace(/\n/g,`
${n}`)}function h(e){return e.includes("${{")}function p(e){let t=RegExp(/\${{\s*(fromJSON|toJSON|contains|startsWith|endsWith|format|join)\((.*)\)\s*}}/,"i");return null!=e.match(t)}function g(e){let t=RegExp(/\${{\s*fromJSON\((.*)\)\s*}}/,"i");return null!=e.match(t)}function m(e){let t;let n=RegExp(/\${{(.+?)}}/,"g"),l=[];for(;null!==(t=n.exec(e));)l.push(t[1]?.trim());return l}function d(e){let t=[];for(let n of e.match(/\${{([^}]*)}}/g)||[])for(let e of n.match(/inputs\.([^\s}]+)/g)||[])t.push(e);return t}function y(e){return""!==e.replace(/\${{([^}]*)}}/g,"").trim()}function v(e){let t=e.split("\n"),n=t[t.length-1],l=c(n),r=n.substring(l.length).startsWith("-"),i=t.slice(0,t.length-1).map(e=>{let t=c(e);if(t.length>l.length||t.length===l.length&&!r)return"";let n=e.substring(t.length).match(/^-\s+/);if(n&&t.length+n[0].length>=l.length){let e=t.length+n[0].length;if(e>l.length)return"";if(e===l.length)return`${t}-`}return e});return i.push(n),{simplifiedText:i.join("\n"),lastLine:n}}function k(e){let t=[],n=e;for(;n&&"object"==typeof n;){let e=Object.keys(n),l=e[e.length-1];t.push(l),n=n[l]}return{path:t,lastValue:null!=n?String(n):""}}function w(e,t){try{return{result:i.o.load(e+t),consumeKey:!1}}catch(l){let{message:n}=l;if(n.includes("mapping")){let n=e.match(/\w+$/);return{result:i.o.load(`${e}:${t}`),lastValue:n?n[0]:void 0,consumeKey:!0}}if(n.includes("collection")){let n=e.match(/,\s*$/),l=n?e.substring(0,e.length-n[0].length):e;l+=t.match(/^\]/)?t:"]";let r=n?"":void 0;return{result:i.o.load(l),lastValue:r,consumeKey:!0}}throw l}}function $(e,t){let n=(0,r.A)(e,t);return e.endsWith("-latest")?n-1:n}function b(e,t){return e.sort((e,n)=>$(e,t)-$(n,t))}let q=async(e,t,n)=>{if("string"!=typeof n)return;let l=new M(n);for(;!l.atEnd();){let e=l.scan(x);if(null!==e&&"\\"===e[0])return E("trailing backslash");let t=l.scan(C);if(null!==t){if(t[0].length>2)return E("too many sequential * characters");if(l.isNext("+"))return E("+ cannot follow *");if(l.isNext("?"))return E("? cannot follow *");continue}let n=l.scan(j);if(null!==n){if(n[0].length>1)return E("? cannot follow ?");continue}let r=l.scan(S);if(null!==r){if(r[0].length>1)return E("+ cannot follow +");if(l.isNext("?"))return E("? cannot follow +");continue}if(l.isNext("[")){l.takeOne();let e=l.scan(O);if(null===e)return E("empty character range");if(!l.isNext("]"))return E("unterminated character range");if(!e[0].match(T))return E("invalid character range");l.takeOne();continue}l.takeOne()}},x=/^\\.?/,S=/^\++/,j=/^\?+/,C=/^\*+/,O=/^[^\]]+/,T=/^\^?(?:(?:\d(?:-\d)?)|(?:[a-z](?:-[a-z])?))+$/i;function E(e){return{message:(0,l.qy)` ${e} `,severity:"error"}}let M=class Scanner{atEnd(){return 0===this.value.length}isNext(e){return this.value[0]===e}scan(e){let t=this.value.match(e);return null!==t&&(this.value=this.value.substring(t[0].length)),t}takeOne(){return this.value=this.value.substring(1),this.value[0]}constructor(e){this.value=e}}},73050:(e,t,n)=>{n.d(t,{A:()=>h,x:()=>c});var l=n(53712),r=n(63830),i=n(17688),o=n(72388);function s(e,t){return{from:{line:e,ch:(t.match(/^\s*/)||[""])[0].length},to:{line:e,ch:t.length}}}function u(e,t,n){let l=e[t.join(".")],{message:r,fixes:i,severity:o}=n;return{message:r,fixes:i,severity:o,from:l.key.from,to:l.key.to}}function a(e,t,n){let l=e[t.join(".")],{message:r,fixes:i,severity:o}=n;return{message:r,fixes:i,severity:o,from:l.value.from,to:l.value.to}}function c(e,t){let n=1===e.length?(0,i.qy)` ${(0,r.Ok)(e[0])} was expected `:(0,i.qy)` one of ${(0,r.Xh)(e)} were expected `;return{message:(0,i.qy)` Invalid type found: ${n} but ${t} was found `,severity:"error"}}async function f(e,t,n,o,s,h,p){if(void 0!==o){if(s.validateKey){let l=await s.validateKey(e,n);if(l&&(h.push(u(t,n,l)),"error"===l.severity))return}if(null===o){if(!0===s.nullable)return;h.push(a(t,n,{message:(0,i.qy)` This value cannot be null `,severity:"error"}))}else if("object"==typeof o){if(Array.isArray(o)){if(s.maxLength&&o.length>s.maxLength&&h.push(a(t,n,{message:(0,i.qy)` Maximum of ${s.maxLength.toString()} elements allowed `,severity:"error"})),s.values){if(!0!==s.multipleValues){h.push(a(t,n,{message:(0,i.qy)` Only a single value is allowed here `,severity:"error"}));return}let u=await (0,l.L)(s,e,n),c=o.map(String).filter(e=>!u.includes(e)),f=function(e){let t=new Set,n=new Set;for(let l of e)t.has(l)&&n.add(l),t.add(l);return[...n]}(o.map(String).filter(e=>u.includes(e)));if(f.length>0||c.length>0){let e=(0,i.qy)`
            ${f.length>0?(0,i.qy)` Repeated values: ${(0,r.Xh)(f)} `:""}
            ${f.length>0&&c.length>0?(0,i.qy)` <br /> `:""}
            ${c.length>0?(0,i.qy)` Invalid values: ${(0,r.Xh)(c)} `:""}
          `;h.push(a(t,n,{message:e,severity:"error"}))}}else if(s.items)for(let l in o)await f(e,t,[...n,l],o[l],s.items,h,p);else if(s.single||s.map||s.rules){let e=s.single||[];s.map&&e.push("map"),s.rules&&e.push("object"),h.push(a(t,n,c(e,"an array")))}}else if(s.map)for(let l in o)await f(e,t,[...n,l],o[l],s.map,h,p);else if(s.rules){let{rules:l}=s;for(let s in l)if(void 0!==o[s])await f(e,t,[...n,s],o[s],l[s],h,p);else if(!0===l[s].required){let e=0===n.length?"root key":"key";h.push(u(t,n,{message:(0,i.qy)` Missing required ${e} ${(0,r.Ok)(s)} `,severity:"error"}))}for(let e in o)if(!s.rules[e]){let l=Object.keys(s.rules).filter(e=>void 0===o[e]),a=(0,i.qy)` Unknown key ${(0,r.Ok)(e)} `,c=!1===s.sortSuggestions?l:(0,r.HE)(l,e);h.push(u(t,[...n,e],{message:a,fixes:c,severity:"error"}))}}else if(s.single||s.items){let e=s.single||[];(s.values||s.items)&&e.push("array"),h.push(a(t,n,c(e,o instanceof Date?"a date":"an object")))}}else{let u=String(o);if((0,r.sY)(u)&&p){let l=await p(e,n,u,s);l&&h.push(a(t,n,l));return}if(s.validateValue){let l=await s.validateValue(e,n,o);if(l&&(h.push(a(t,n,l)),"error"===l.severity))return}if(s.single){let{single:e}=s,l=typeof o;e.includes(l)||h.push(a(t,n,c(e,(0,r.Ok)(l))))}else if(s.values){let c=await (0,l.L)(s,e,n);if(!c.includes(s.caseInsensitive?u.toLowerCase():u)){let e=!1===s.sortSuggestions?c:(0,r.HE)(c,String(o));h.push(a(t,n,{message:(0,i.qy)` Invalid value: ${(0,r.Ok)(u)} `,fixes:e,severity:"error"}))}}else if(s.map||s.rules||s.items){let e=null===o?"null":typeof o,l=[];(s.map||s.rules)&&l.push("object"),s.items&&l.push("array"),h.push(a(t,n,c(l,(0,r.Ok)(e))))}}}}async function h(e,t){let n={},l=e.split("\n");try{if(l.length>0){let e={from:{line:0,ch:0},to:{line:l.length-1,ch:l[l.length-1].length}};n[""]={key:e,value:e}}let e=null;for(let t=0;t<l.length;t++){let r=l.slice(0,t+1).join("\n");e=o.o.load(r),function e(t,n,l,r,i){if(void 0===l)return;let o=r.join(".");if(o&&!t[o]){let e=n[i],u=r[r.length-1];t[o]={key:function(e,t,n){let l=t.indexOf(n);return -1===l?s(e,t):{from:{line:e,ch:l},to:{line:e,ch:l+n.length}}}(i,e,u),value:function(e,t,n){if("object"==typeof n&&null!==n)return s(e,t);let l=String(n),r=t.lastIndexOf(l);return -1===r?s(e,t):{from:{line:e,ch:r},to:{line:e,ch:r+l.length}}}(i,e,l)}}if("object"==typeof l)for(let o in l)l.hasOwnProperty(o)&&e(t,n,l[o],[...r,o],i)}(n,l,e,[],t)}let r=[],i=t(e);return await f(e,n,[],e,i,r,i.processExpression),r}catch(s){let{mark:e}=s;if(!e)return[];let{line:t,column:n}=e,r=t>=l.length||s.reason.match(/end of the stream within a flow collection/)?t-1:t,o=n>=l[r].length?0:n;return[{message:(0,i.qy)` ${s.reason} `,severity:"error",from:{line:r,ch:o},to:{line:r,ch:l[r].length}}]}}},53712:(e,t,n)=>{async function l(e,t,n){if(!e.values)throw Error("Cannot get values of rule because `values` is not defined");return"function"==typeof e.values?await e.values(t,n):e.values}function r(e,t){let n=t;for(let t of e)if(Number.isInteger(+t)){if(!n.items)return null;n=n.items}else if(n.map)n=n.map;else{if(!n.rules||!n.rules[t])return null;n=n.rules[t]}return n}n.d(t,{L:()=>l,t:()=>r})}}]);
//# sourceMappingURL=app_assets_modules_github_editor_codemirror-linter-util_ts-app_assets_modules_github_editor_y-89a4a6-bf0173b64888.js.map