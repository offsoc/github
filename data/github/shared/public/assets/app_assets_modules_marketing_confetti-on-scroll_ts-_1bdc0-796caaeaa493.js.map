{"version":3,"file":"chunk-app_assets_modules_marketing_confetti-on-scroll_ts-_1bdc0-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/confetti.ts","app/assets/modules/marketing/animate-on-scroll.ts","app/assets/modules/marketing/confetti-on-scroll.ts"],"sourcesContent":["// This code is an adaptation of https://codepen.io/Pillowfication/pen/PNEJbY\n// Markus Tran deserves all the credit!!!\n\nconst random = Math.random\nconst cos = Math.cos\nconst sin = Math.sin\nconst PI = Math.PI\nconst PI2 = PI * 2\nconst spread = 40\nconst sizeMin = 3\nconst sizeMax = 12 - sizeMin\nconst eccentricity = 10\nconst deviation = 100\nconst dxThetaMin = -0.1\nconst dxThetaMax = -dxThetaMin - dxThetaMin\nconst dyMin = 0.13\nconst dyMax = 0.18\nconst dThetaMin = 0.4\nconst dThetaMax = 0.7 - dThetaMin\nlet timer: number | undefined\nlet frame: number | undefined\n\ninterface Confetti {\n  outer: HTMLElement\n  update: (height: number, delta: number) => boolean\n}\nconst confetti: Confetti[] = []\n\n// GitHub themed color palette\nconst colors = ['#6a737d', '#0366d6', '#28a745', '#ffd33d', '#f66a0a', '#6f42c1', '#ea4aaa']\n\nfunction colorTheme() {\n  const idx = Math.floor(Math.random() * colors.length)\n  return colors[idx]!\n}\n\n// Cosine interpolation\nfunction interpolation(a: number, b: number, t: number) {\n  return ((1 - cos(PI * t)) / 2) * (b - a) + a\n}\n\n// Create a 1D Maximal Poisson Disc over [0, 1]\nconst radius = 1 / eccentricity\nconst radius2 = radius + radius\nfunction createPoisson() {\n  const domain = [radius, 1 - radius]\n  let measure = 1 - radius2\n  const spline = [0, 1]\n  while (measure) {\n    let dart = measure * random()\n    let i\n    let l\n    let interval\n    let a\n    let b\n\n    // Find where dart lies\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      a = domain[i]!\n      b = domain[i + 1]!\n      interval = b - a\n      if (dart < measure + interval) {\n        const newDart = dart + a - measure\n        spline.push(newDart)\n        dart = newDart\n        break\n      }\n      measure += interval\n    }\n\n    const c = dart - radius\n    const d = dart + radius\n\n    // Update the domain\n    for (i = domain.length - 1; i > 0; i -= 2) {\n      l = i - 1\n      a = domain[l]!\n      b = domain[i]!\n\n      if (a >= c && a < d)\n        if (b > d) domain[l] = d\n        else domain.splice(l, 2)\n      else if (a < c && b > c)\n        if (b <= d) domain[i] = c\n        else domain.splice(i, 0, c, d)\n    }\n\n    // Re-measure the domain\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      measure += domain[i + 1]! - domain[i]!\n    }\n  }\n\n  return spline.sort()\n}\n\n// Create the overarching container\nconst container = document.createElement('div')\ncontainer.style.position = 'fixed'\ncontainer.style.top = '0'\ncontainer.style.left = '0'\ncontainer.style.width = '100%'\ncontainer.style.height = '0'\ncontainer.style.overflow = 'visible'\ncontainer.style.zIndex = '9999'\n\nclass Confetto {\n  y: number\n  x: number\n  theta: number\n  axis: string\n  splineX: number[]\n  splineY: number[]\n  frame: number\n  dTheta: number\n  dx: number\n  dy: number\n  inner: HTMLElement\n  outer: HTMLElement\n\n  constructor(theme: () => string) {\n    this.frame = 0\n    this.outer = document.createElement('div')\n    this.inner = document.createElement('div')\n    this.outer.appendChild(this.inner)\n\n    this.outer.style.position = 'absolute'\n    this.outer.style.width = `${sizeMin + sizeMax * random()}px`\n    this.outer.style.height = `${sizeMin + sizeMax * random()}px`\n    this.inner.style.width = '100%'\n    this.inner.style.height = '100%'\n    this.inner.style.backgroundColor = theme()\n\n    this.outer.style.perspective = '50px'\n    this.outer.style.transform = `rotate(${360 * random()}deg)`\n    this.theta = 360 * random()\n    this.axis = `rotate3D(${cos(360 * random())},${cos(360 * random())},0,`\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n\n    this.dTheta = dThetaMin + dThetaMax * random()\n\n    this.x = window.innerWidth * random()\n    this.y = -deviation\n    this.dx = sin(dxThetaMin + dxThetaMax * random())\n    this.dy = dyMin + dyMax * random()\n    this.outer.style.left = `${this.x}px`\n    this.outer.style.top = `${this.y}px`\n\n    // Create the periodic spline\n    this.splineX = createPoisson()\n    this.splineY = []\n    const l = this.splineX.length - 1\n    for (let i = 1; i < l; ++i) {\n      this.splineY[i] = deviation * random()\n    }\n    this.splineY[0] = this.splineY[l] = deviation * random()\n  }\n\n  update(height: number, delta: number) {\n    this.frame += delta\n    this.x += this.dx * delta\n    this.y += this.dy * delta\n    this.theta += this.dTheta * delta\n\n    let phi = (this.frame % 7777) / 7777\n    let i = 0\n    let j = 1\n    while (phi >= this.splineX[j]!) {\n      i = j++\n    }\n    const rho = interpolation(\n      this.splineY[i]!,\n      this.splineY[j]!,\n      (phi - this.splineX[i]!) / (this.splineX[j]! - this.splineX[i]!),\n    )\n    phi *= PI2\n\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n    this.outer.style.left = `${this.x + rho * cos(phi)}px`\n    this.outer.style.top = `${this.y + rho * sin(phi)}px`\n    return this.y > height + deviation\n  }\n}\n\nexport default function poof(duration?: number) {\n  // 5s default\n  const ttl = duration == null ? 5000 : duration\n\n  if (!frame) {\n    document.body.appendChild(container)\n\n    const addConfetto = () => {\n      const confetto = new Confetto(colorTheme)\n      confetti.push(confetto)\n      container.appendChild(confetto.outer)\n      timer = window.setTimeout(addConfetto, spread * random())\n    }\n    addConfetto()\n\n    let prev: number | null\n\n    const loop = (timestamp: number) => {\n      const delta = prev ? timestamp - prev : 0\n      prev = timestamp\n      const height = window.innerHeight\n\n      for (let i = confetti.length - 1; i >= 0; --i) {\n        if (confetti[i]!.update(height, delta)) {\n          container.removeChild(confetti[i]!.outer)\n          confetti.splice(i, 1)\n        }\n      }\n\n      if (timer || confetti.length) {\n        frame = requestAnimationFrame(loop)\n        return\n      }\n\n      document.body.removeChild(container)\n      frame = undefined\n    }\n\n    window.setTimeout(function () {\n      clearTimeout(timer)\n      timer = undefined\n    }, ttl)\n\n    requestAnimationFrame(loop)\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nexport const BUILDINCLASS = 'build-in-animate'\nconst BUILDINCLASSREDUCED = 'build-in-reduced'\nexport const DEFAULTMARGINBOTTOM = 30\nconst DEFAULTMARGINBOTTOMVIDEO = 20\nexport const DEFAULTMARGINTOP = 0\nexport const DEFAULTTHRESHOLD = 0\n\nobserve('.js-build-in-trigger[data-build-in-stagger], .js-build-in-group[data-build-in-stagger]', element => {\n  const stagger = parseInt(element.getAttribute('data-build-in-stagger')!)\n  const items = element.querySelectorAll<HTMLElement>('.js-build-in-item')\n\n  for (let i = 0; i < items.length; i++) items[i]!.style.transitionDelay = `${i * stagger}ms`\n})\n\nconst defaultObserver = new IntersectionObserver(toggleAnimationClasses, {\n  rootMargin: `-${DEFAULTMARGINTOP}% 0% -${DEFAULTMARGINBOTTOM}% 0%`,\n  threshold: DEFAULTTHRESHOLD,\n})\n\nobserve('.js-build-in-item[data-build-delay]', element => {\n  const delay = Number(element.getAttribute('data-build-delay') || 0)\n  if (!(element instanceof HTMLElement)) return\n  element.style.transitionDelay = `${delay}ms`\n})\n\nobserve('.js-build-in, .js-build-in-trigger', element => {\n  // Listen to prefers reduced motion, and cancel all animation if true\n  if (shouldReduceMotion(element)) {\n    cancelAnimationsForElement(element)\n    return\n  }\n\n  const options = animationOptions(element)\n  if (options.isDefault) return defaultObserver.observe(element)\n\n  const customObserver = new IntersectionObserver(toggleAnimationClasses, {\n    rootMargin: `-${options.marginTop}% 0% -${options.marginBottom}% 0%`,\n    threshold: options.threshold,\n  })\n  customObserver.observe(element)\n})\n\nfunction toggleAnimationClasses(entries: IntersectionObserverEntry[]) {\n  for (const entry of entries) {\n    entry.target.classList.toggle(BUILDINCLASS, entry.isIntersecting)\n    if (!entry.target.classList.contains('js-build-in-trigger')) continue\n\n    for (const item of entry.target.querySelectorAll('.js-build-in-item')) {\n      item.classList.toggle(BUILDINCLASS, entry.isIntersecting)\n    }\n  }\n}\n\nexport function shouldReduceMotion(element: Element) {\n  const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)')\n  // If the animation serves a non-decorative purpose, don't cancel it\n  const nonDecorative = element.getAttribute('data-build-non-decorative') || 'false'\n  // Reduce if it reduce motion is turned on, and if the animation is decorative\n  return mediaQuery.matches && nonDecorative === 'false'\n}\n\nexport function cancelAnimationsForElement(element: Element) {\n  element.classList.add(BUILDINCLASSREDUCED)\n  element.classList.add(BUILDINCLASS)\n  for (const item of element.querySelectorAll('.js-build-in-item, .js-type-in-item')) {\n    item.classList.add(BUILDINCLASSREDUCED)\n    item.classList.add(BUILDINCLASS)\n  }\n}\n\nexport function animationOptions(element: Element) {\n  const marginBottom = Number(element.getAttribute('data-build-margin-bottom') || DEFAULTMARGINBOTTOM)\n  const marginTop = Number(element.getAttribute('data-build-margin-top') || DEFAULTMARGINTOP)\n  const threshold = Number(DEFAULTTHRESHOLD)\n\n  return {\n    marginBottom,\n    marginTop,\n    threshold,\n    isDefault: marginBottom === DEFAULTMARGINBOTTOM && marginTop === DEFAULTMARGINTOP && threshold === DEFAULTTHRESHOLD,\n  }\n}\n\nfunction getPauseToggleLabel(element: HTMLElement) {\n  const playLabel = element.getAttribute('data-play-aria-label')\n  const pauseLabel = element.getAttribute('data-pause-aria-label')\n  if (!playLabel || !pauseLabel) return\n\n  const ariaLabel = element.getAttribute('aria-label')\n  const playAriaLabel = ariaLabel ? `${ariaLabel} ${playLabel}` : playLabel\n  const pauseAriaLabel = ariaLabel ? `${ariaLabel} ${pauseLabel}` : pauseLabel\n\n  return {playAriaLabel, pauseAriaLabel}\n}\n\nobserve('.js-viewport-aware-video', {\n  constructor: HTMLMediaElement,\n  add(video) {\n    const bindPlayPauseLabels = (videoElement: HTMLMediaElement) => {\n      const labels = getPauseToggleLabel(videoElement)\n      if (!labels) return\n      const {playAriaLabel, pauseAriaLabel} = labels\n      videoElement.setAttribute('aria-label', videoElement.paused ? playAriaLabel : pauseAriaLabel)\n\n      videoElement.addEventListener('play', () => {\n        videoElement.setAttribute('aria-label', pauseAriaLabel)\n      })\n\n      videoElement.addEventListener('pause', () => {\n        videoElement.setAttribute('aria-label', playAriaLabel)\n      })\n    }\n    bindPlayPauseLabels(video)\n\n    const togglePlay = (videoElement: HTMLMediaElement) => {\n      videoElement.paused ? videoElement.play() : videoElement.pause()\n    }\n\n    video.addEventListener('play', () => {\n      video.classList.remove('looping-paused-mktg')\n    })\n\n    video.addEventListener('pause', () => {\n      video.classList.add('looping-paused-mktg')\n    })\n\n    video.addEventListener('click', () => {\n      togglePlay(video)\n    })\n\n    video.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.code !== 'Space') return\n      e.preventDefault()\n      togglePlay(video)\n    })\n\n    if (shouldReduceMotion(video)) {\n      video.pause()\n      video.classList.add('looping-paused-mktg')\n      return\n    }\n\n    const threshold = video.getAttribute('data-threshold') || DEFAULTTHRESHOLD\n    const marginBottom = video.getAttribute('data-build-margin-bottom') || DEFAULTMARGINBOTTOMVIDEO\n    const observer = new IntersectionObserver(\n      entries => {\n        for (const entry of entries) entry.isIntersecting ? video.play() : video.pause()\n      },\n      {\n        rootMargin: `-${DEFAULTMARGINTOP}% 0% -${marginBottom}% 0%`,\n        threshold: Number(threshold),\n      },\n    )\n\n    observer.observe(video)\n  },\n})\n\nobserve('.js-animation-pause-toggle', element => {\n  const labels = getPauseToggleLabel(element as HTMLElement)\n  if (labels) {\n    element.setAttribute(\n      'aria-label',\n      element.getAttribute('aria-pressed') === 'false' ? labels.pauseAriaLabel : labels.playAriaLabel,\n    )\n  }\n\n  element.addEventListener('click', () => {\n    const targetId = element.getAttribute('data-target-id')\n    if (!targetId) return\n    const target = document.getElementById(targetId)\n    if (!target) return\n\n    const state = target.getAttribute('data-animation-paused') || 'false'\n    const paused = state === 'true'\n    target.setAttribute('data-animation-paused', paused ? 'false' : 'true')\n    element.setAttribute('aria-pressed', paused ? 'false' : 'true')\n\n    if (!labels) return\n    element.setAttribute('aria-label', paused ? labels.pauseAriaLabel : labels.playAriaLabel)\n  })\n})\n","// The <confetti-container> element will trigger confetti once in the viewport.\n// <confetti-container data-load-on=\"visible\" data-delay=\"200\" data-duration=\"3000\">\n//  ...\n// </confetti-container>\n\nimport poof from '../github/behaviors/confetti'\nimport {shouldReduceMotion} from './animate-on-scroll'\nimport {controller, attr} from '@github/catalyst'\n\n@controller\nclass ConfettiContainerElement extends HTMLElement {\n  @attr delay = 0\n  @attr duration = 3000\n\n  connectedCallback() {\n    if (shouldReduceMotion(this)) return\n    window.setTimeout(() => poof(this.duration), this.delay)\n  }\n}\n"],"names":["timer","frame","random","Math","cos","sin","PI","PI2","confetti","colors","colorTheme","idx","floor","length","container","document","createElement","style","position","top","left","width","height","overflow","zIndex","Confetto","update","delta","a","b","x","dx","y","dy","theta","dTheta","phi","i","j","splineX","rho","splineY","inner","transform","axis","outer","constructor","theme","appendChild","sizeMin","sizeMax","backgroundColor","perspective","dThetaMin","dThetaMax","window","innerWidth","dxThetaMin","dxThetaMax","dyMin","dyMax","createPoisson","domain","measure","spline","l","interval","dart","newDart","push","c","d","splice","sort","deviation","poof","duration","prev","body","addConfetto","confetto","setTimeout","spread","loop","timestamp","innerHeight","removeChild","requestAnimationFrame","undefined","clearTimeout","BUILDINCLASS","BUILDINCLASSREDUCED","DEFAULTMARGINBOTTOM","DEFAULTMARGINTOP","DEFAULTTHRESHOLD","observe","element","stagger","parseInt","getAttribute","items","querySelectorAll","transitionDelay","defaultObserver","IntersectionObserver","toggleAnimationClasses","rootMargin","threshold","entries","entry","target","classList","toggle","isIntersecting","contains","item","shouldReduceMotion","mediaQuery","matchMedia","nonDecorative","matches","cancelAnimationsForElement","add","animationOptions","marginBottom","Number","marginTop","isDefault","getPauseToggleLabel","playLabel","pauseLabel","ariaLabel","playAriaLabel","pauseAriaLabel","delay","HTMLElement","options","customObserver","HTMLMediaElement","video","bindPlayPauseLabels","labels","videoElement","setAttribute","paused","addEventListener","togglePlay","play","pause","remove","e","code","preventDefault","observer","targetId","getElementById","state","ConfettiContainerElement","connectedCallback","attr","controller"],"sourceRoot":""}