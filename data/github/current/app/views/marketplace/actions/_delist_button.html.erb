<%
  hydro_payload = {
    repository_action_id: action_id,
    source_url: request.url,
    location: controller.controller_name + "#" + controller.action_name
  }
  hydro_attrs = hydro_click_tracking_attributes("marketplace.action.delist", hydro_payload)
%>

<% if repo_viewer_can_administer %>
  <%= button_to delete_marketplace_action_path(action_slug),
    method: :delete,
    class: "btn btn-sm",
    data: hydro_attrs.merge({
      confirm: "Are you sure you want to delist this Action from the Marketplace? Note: This Action will still be installable as long as the repository is public.",
      disable_with: "Delisting..."
    }) do %>
    <%= primer_octicon(:x, mr: 1) %>Delist
  <% end %>
<% end %>
