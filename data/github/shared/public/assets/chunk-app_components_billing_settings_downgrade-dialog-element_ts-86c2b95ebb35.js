"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_billing_settings_downgrade-dialog-element_ts"],{13937:(e,t,n)=>{let o;n.d(t,{Ax:()=>s,JW:()=>u,ZV:()=>l});let ErrorWithResponse=class ErrorWithResponse extends Error{constructor(e,t){super(e),this.response=t}};function i(){let e,t;return[new Promise(function(n,o){e=n,t=o}),e,t]}let r=[],a=[];function l(e){r.push(e)}function s(e){a.push(e)}function u(e,t){o||(o=new Map,"undefined"!=typeof document&&document.addEventListener("submit",d));let n=o.get(e)||[];o.set(e,[...n,t])}function d(e){if(!(e.target instanceof HTMLFormElement)||e.defaultPrevented)return;let t=e.target,n=function(e){let t=[];for(let n of o.keys())if(e.matches(n)){let e=o.get(n)||[];t.push(...e)}return t}(t);if(0===n.length)return;let l=function(e){let t={method:e.method||"GET",url:e.action,headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),body:null};if("GET"===t.method.toUpperCase()){let n=function(e){let t=new URLSearchParams;for(let[n,o]of[...new FormData(e).entries()])t.append(n,o.toString());return t.toString()}(e);n&&(t.url+=(~t.url.indexOf("?")?"&":"?")+n)}else t.body=new FormData(e);return t}(t),[s,u,d]=i();e.preventDefault(),c(n,t,l,s).then(async e=>{if(e){for(let e of a)await e(t);f(l).then(u,d).catch(()=>{}).then(()=>{for(let e of r)e(t)})}else t.submit()},e=>{t.submit(),setTimeout(()=>{throw e})})}async function c(e,t,n,o){let r=!1;for(let a of e){let[e,l]=i(),s=()=>(r=!0,l(),o),u={text:s,json:()=>(n.headers.set("Accept","application/json"),s()),html:()=>(n.headers.set("Accept","text/html"),s())};await Promise.race([e,a(t,u,n)])}return r}async function f(e){let t=await window.fetch(e.url,{method:e.method,body:null!==e.body?e.body:void 0,headers:e.headers,credentials:"same-origin"}),n={url:t.url,status:t.status,statusText:t.statusText,headers:t.headers,text:"",get json(){let e=JSON.parse(this.text);return delete this.json,this.json=e,this.json},get html(){return delete this.html,this.html=function(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}(document,this.text),this.html}},o=await t.text();if(n.text=o,t.ok)return n;throw new ErrorWithResponse("request failed",n)}},72537:(e,t,n)=>{let o;n.d(t,{i:()=>function e(t,n,a){let l;let s=new AbortController,u=null!=a?a:s.signal;t.setAttribute("data-focus-trap","active");let d=document.createElement("span");d.setAttribute("class","sentinel"),d.setAttribute("tabindex","0"),d.setAttribute("aria-hidden","true"),d.onfocus=()=>{let e=(0,i.Z0)(t,!0);null==e||e.focus()};let c=document.createElement("span");function f(e){if(e instanceof HTMLElement&&document.contains(t)){if(t.contains(e)){l=e;return}if(l&&(0,i.AO)(l)&&t.contains(l)){l.focus();return}if(n&&t.contains(n)){n.focus();return}{let e=(0,i.Z0)(t);null==e||e.focus();return}}}c.setAttribute("class","sentinel"),c.setAttribute("tabindex","0"),c.setAttribute("aria-hidden","true"),c.onfocus=()=>{let e=(0,i.Z0)(t);null==e||e.focus()},t.prepend(d),t.append(c);let h=function(e){let t=new AbortController;return e.addEventListener("abort",()=>{t.abort()}),t}(u);if(o){let e=o;o.container.setAttribute("data-focus-trap","suspended"),o.controller.abort(),r.push(e)}h.signal.addEventListener("abort",()=>{o=void 0}),u.addEventListener("abort",()=>{t.removeAttribute("data-focus-trap");let n=t.getElementsByClassName("sentinel");for(;n.length>0;)n[0].remove();let o=r.findIndex(e=>e.container===t);o>=0&&r.splice(o,1),function(){let t=r.pop();t&&e(t.container,t.initialFocus,t.originalSignal)}()}),document.addEventListener("focus",e=>{f(e.target)},{signal:h.signal,capture:!0}),f(document.activeElement),o={container:t,controller:h,initialFocus:n,originalSignal:u};let m=r.findIndex(e=>e.container===t);if(m>=0&&r.splice(m,1),!a)return s}});var i=n(21588);(0,n(12116).M)();let r=[]},12116:(e,t,n)=>{n.d(t,{M:()=>r});let o=!1;function i(){}try{let e=Object.create({},{signal:{get(){o=!0}}});window.addEventListener("test",i,e),window.removeEventListener("test",i,e)}catch(e){}function r(){o||(!function(){if("undefined"==typeof window)return;let e=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(t,n,o){return"object"==typeof o&&"signal"in o&&o.signal instanceof AbortSignal&&e.call(o.signal,"abort",()=>{this.removeEventListener(t,n,o)}),e.call(this,t,n,o)}}(),o=!0)}},21588:(e,t,n)=>{function*o(e,t={}){var n,o;let i=null!==(n=t.strict)&&void 0!==n&&n,l=null!==(o=t.onlyTabbable)&&void 0!==o&&o?a:r,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e instanceof HTMLElement&&l(e,i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),u=null;if(!t.reverse&&l(e,i)&&(yield e),t.reverse){let e=s.lastChild();for(;e;)u=e,e=s.lastChild()}else u=s.firstChild();for(;u instanceof HTMLElement;)yield u,u=t.reverse?s.previousNode():s.nextNode();t.reverse&&l(e,i)&&(yield e)}function i(e,t=!1){return o(e,{reverse:t,strict:!0,onlyTabbable:!0}).next().value}function r(e,t=!1){let n=["BUTTON","INPUT","SELECT","TEXTAREA","OPTGROUP","OPTION","FIELDSET"].includes(e.tagName)&&e.disabled,o=e.hidden,i=e instanceof HTMLInputElement&&"hidden"===e.type,r=e.classList.contains("sentinel");if(n||o||i||r)return!1;if(t){let t=getComputedStyle(e),n=0===e.offsetWidth||0===e.offsetHeight,o=["hidden","collapse"].includes(t.visibility),i="none"===t.display||!e.offsetParent,r=0===e.getClientRects().length;if(n||o||r||i)return!1}return null!=e.getAttribute("tabindex")||"true"===e.getAttribute("contenteditable")||"plaintext-only"===e.getAttribute("contenteditable")||(!(e instanceof HTMLAnchorElement)||null!=e.getAttribute("href"))&&-1!==e.tabIndex}function a(e,t=!1){return r(e,t)&&"-1"!==e.getAttribute("tabindex")}n.d(t,{AO:()=>a,K1:()=>o,Z0:()=>i})},80147:(e,t,n)=>{n.d(t,{u:()=>ModalDialogElement});var o,i,r,a,l=n(72537),s=n(21588),u=function(e,t,n,o){if("a"===n&&!o)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)},d=function(e,t,n,o,i){if("m"===o)throw TypeError("Private method is not writable");if("a"===o&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:t.set(e,n),n};function c(e){document.activeElement!==e&&e?.focus()}let f=[];function h(e){let t=e.target,n=t?.closest("button");if(!n||n.hasAttribute("disabled")||"true"===n.getAttribute("aria-disabled"))return;let o=n?.getAttribute("data-show-dialog-id");if(o){e.stopPropagation();let t=document.getElementById(o);if(t instanceof ModalDialogElement){t.openButton=n,t.show(),e.preventDefault();return}}if(f.length&&(o=n.getAttribute("data-close-dialog-id")||n.getAttribute("data-submit-dialog-id"))){let e=document.getElementById(o);if(e instanceof ModalDialogElement){let t=f.findIndex(e=>e.id===o);f.splice(t,1),e.close(n.hasAttribute("data-submit-dialog-id"))}}}function m(e){!(e instanceof KeyboardEvent)||"keydown"!==e.type||"Enter"!==e.key||e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||h(e)}function p(e){let t=e.target;if(t?.closest("button"))return;let n=f[f.length-1];n&&(t.closest(`#${n.getAttribute("id")}`)||t.ownerDocument.addEventListener("mouseup",e=>{e.target===t&&(f.pop(),n.close())},{once:!0}))}let ModalDialogElement=class ModalDialogElement extends HTMLElement{constructor(){super(...arguments),o.add(this),i.set(this,new AbortController)}get open(){return this.hasAttribute("open")}set open(e){if(e)this.open||(this.setAttribute("open",""),this.setAttribute("aria-disabled","false"),document.body.style.paddingRight=`${window.innerWidth-document.body.clientWidth}px`,document.body.style.overflow="hidden",u(this,o,"a",r)?.classList.remove("Overlay--hidden"),u(this,i,"f").signal.aborted&&d(this,i,new AbortController,"f"),(0,l.i)(this,this.querySelector("[autofocus]"),u(this,i,"f").signal),f.push(this));else{if(!this.open)return;this.removeAttribute("open"),this.setAttribute("aria-disabled","true"),u(this,o,"a",r)?.classList.add("Overlay--hidden"),document.body.style.paddingRight="0",document.body.style.overflow="initial",u(this,i,"f").abort();let e=this.openButton?.closest("details")||this.openButton?.closest("action-menu");e?c((0,s.Z0)(e)):c(this.openButton),this.openButton=null}}get showButtons(){return document.querySelectorAll(`button[data-show-dialog-id='${this.id}']`)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),document.addEventListener("click",h),document.addEventListener("keydown",m),document.addEventListener("mousedown",p),this.addEventListener("keydown",e=>u(this,o,"m",a).call(this,e))}show(){this.open=!0}close(e=!1){if(!1===this.open)return;let t=new Event(e?"close":"cancel");this.dispatchEvent(t),this.open=!1}};i=new WeakMap,o=new WeakSet,r=function(){return this.parentElement?.hasAttribute("data-modal-dialog-overlay")?this.parentElement:null},a=function(e){if(e instanceof KeyboardEvent&&!e.isComposing&&this.open)switch(e.key){case"Escape":this.close(),e.preventDefault(),e.stopPropagation();break;case"Enter":e.target.getAttribute("data-close-dialog-id")===this.id&&e.stopPropagation()}},window.customElements.get("modal-dialog")||(window.ModalDialogElement=ModalDialogElement,window.customElements.define("modal-dialog",ModalDialogElement))},14338:(e,t,n)=>{n.r(t),n.d(t,{DowngradeDialogElement:()=>DowngradeDialogElement});var o=n(39595),i=n(13937),r=n(80147),a=n(78350);function l(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function s(e,t,n){var o=l(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,o,n),n}function u(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}var d=new WeakMap;let DowngradeDialogElement=class DowngradeDialogElement extends r.u{get includeFragment(){return this.querySelector('[data-target~="modal-dialog.include-fragment"]')}connectedCallback(){if(!this.includeFragment)return;let{signal:e}=s(this,d,new AbortController);this.includeFragment.addEventListener("include-fragment-replaced",this,{signal:e}),this?.dialog?.addEventListener("cancel",this,{signal:e}),this.featuresCount&&this.featuresCount.id&&(0,i.JW)(`#${this.featuresCount.id}`,async(e,t)=>{let n=(await t.json()).json;for(let e of this.features){let t=e.getAttribute("data-downgrade-feature");this.setDowngradeFeatureCount(e,n.counts[t])}})}disconnectedCallback(){var e;((e=l(this,d,"get")).get?e.get.call(this):e.value)?.abort()}handleEvent(e){"include-fragment-replaced"===e.type?(0,a.k_)(this.featuresCount):"cancel"===e.type&&this.hiddenCloseInformation.click()}setDowngradeFeatureCount(e,t){t&&"0"!==t?e.textContent=`(using ${t})`:e.remove()}constructor(...e){super(...e),function(e,t,n){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(this,d,{writable:!0,value:void 0}),s(this,d,null)}};u([o.aC],DowngradeDialogElement.prototype,"content",void 0),u([o.aC],DowngradeDialogElement.prototype,"featuresCount",void 0),u([o.zV],DowngradeDialogElement.prototype,"features",void 0),u([o.aC],DowngradeDialogElement.prototype,"dialog",void 0),u([o.aC],DowngradeDialogElement.prototype,"hiddenCloseInformation",void 0),DowngradeDialogElement=u([o.p_],DowngradeDialogElement)},78350:(e,t,n)=>{n.d(t,{Cy:()=>l,K3:()=>d,Z8:()=>s,k_:()=>r,lK:()=>c,m$:()=>a});var o=n(41695);function i(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:n}))}function r(e,t){t&&(function(e,t){if(!(e instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw Error("The specified element is not owned by the form element.")}(e,t),(0,o.A)(t)),i(e,"submit",!0)&&e.submit()}function a(e,t){if("boolean"==typeof t){if(e instanceof HTMLInputElement)e.checked=t;else throw TypeError("only checkboxes can be set to boolean value")}else{if("checkbox"===e.type)throw TypeError("checkbox can't be set to string value");e.value=t}i(e,"change",!1)}function l(e,t){for(let n in t){let o=t[n],i=e.elements.namedItem(n);i instanceof HTMLInputElement?i.value=o:i instanceof HTMLTextAreaElement&&(i.value=o)}}function s(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n||e.isContentEditable}function u(e){return new URLSearchParams(e)}function d(e,t){let n=new URLSearchParams(e.search);for(let[e,o]of u(t))n.append(e,o);return n.toString()}function c(e){return u(new FormData(e)).toString()}},41695:(e,t,n)=>{function o(e){let t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let n=i(t);if(e.name){let o=e.matches("input[type=submit]")?"Submit":"",i=e.value||o;n||((n=document.createElement("input")).type="hidden",n.classList.add("js-submit-button-value"),t.prepend(n)),n.name=e.name,n.value=i}else n&&n.remove()}function i(e){let t=e.querySelector("input.js-submit-button-value");return t instanceof HTMLInputElement?t:null}n.d(t,{A:()=>o,C:()=>i})}}]);
//# sourceMappingURL=app_components_billing_settings_downgrade-dialog-element_ts-46118848e3e4.js.map