<% page_info title: "#{billable_entity} - Billing History" %>

<%= render Stafftools::Billing::History::PaymentHistoryComponent.new(payments: charges, billable_entity: billable_entity) %>

<% if disputes.any? %>
  <div class="Box Box--condensed mt-4">
    <div class="Box-header">
      <h3 class="Box-title">
        Dispute history
        <%= render(Primer::Beta::Counter.new(count: disputes.size)) %>
      </h3>
    </div>
    <table class="Box-body border-bottom-0" <%= test_selector("dispute-history") %>>
      <thead>
        <th class="no-wrap billing-table-cell p-2 text-left">ID</th>
        <th class="no-wrap billing-table-cell p-2 text-left">Payment</th>
        <th class="no-wrap billing-table-cell p-2 text-left">Date</th>
        <th class="no-wrap p-2 text-left">Reason</th>
        <th class="no-wrap p-2 text-left">Status</th>
        <th class="no-wrap billing-table-cell p-2 text-left">Options</th>
        <th class="no-wrap billing-table-cell p-2 text-left">Amount</th>
      </thead>
      <tbody>
        <%= render partial: "stafftools/billing/payment_history/billing_dispute", collection: disputes %>
      </tbody>
    </table>
  </div>
<% end %>
