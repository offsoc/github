{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/authorization.json",
  "title": "Authorization",
  "description": "The authorization for an OAuth app, GitHub App, or a Personal Access Token.",
  "type": "object",
  "definitions": {
    "authorization_id": {
      "description": "The ID of the authorization.",
      "type": "integer"
    },
    "client_secret": {
      "description": "The OAuth app client secret for which to create the token.",
      "maxLength": 40,
      "type": "string"
    },
    "scopes": {
      "description": "A list of scopes that this authorization is in.",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      },
      "example": [
        "public_repo",
        "user"
      ]
    },
    "note": {
      "description": "A note to remind you what the OAuth token is for.",
      "type": "string",
      "example": "Update all gems"
    },
    "note_url": {
      "description": "A URL to remind you what app the OAuth token is for.",
      "type": "string"
    },
    "client_id": {
      "description": "The OAuth app client key for which to create the token.",
      "maxLength": 20,
      "type": "string"
    },
    "access_token": {
      "description": "The access_token of the OAuth application.",
      "type": "string"
    },
    "fingerprint": {
      "description": "A unique string to distinguish an authorization from others created for the same client ID and user.",
      "type": "string"
    },
    "add_scopes": {
      "description": "A list of scopes to add to this authorization.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "remove_scopes": {
      "description": "A list of scopes to remove from this authorization.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "id": {
      "type": "integer",
      "example": 1
    },
    "authorization_note": {
      "type": [
        "string",
        "null"
      ],
      "example": "optional note"
    },
    "authorization_note_url": {
      "type": [
        "string",
        "null"
      ],
      "format": "uri",
      "example": "http://optional/note/url"
    },
    "token": {
      "type": "string",
      "example": ""
    },
    "hashed_token": {
      "type": [
        "string",
        "null"
      ],
      "example": "25f94a2a5c7fbaf499c665bc73d67c1c87e496da8985131633ee0a95819db2e8"
    },
    "token_last_eight": {
      "type": [
        "string",
        "null"
      ],
      "example": "12345678"
    },
    "authorization_fingerprint": {
      "type": [
        "string",
        "null"
      ],
      "example": "jklmnop12345678"
    },
    "url": {
      "type": "string",
      "format": "uri",
      "example": "https://api.github.com/authorizations/1"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "example": "2011-09-06T17:26:27Z"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "example": "2011-09-06T20:39:23Z"
    },
    "expires_at": {
      "type": [
        "string",
        "null"
      ],
      "format": "date-time",
      "example": "2011-10-06T17:26:27Z"
    },
    "repositories": {
      "description": "List of repository names that the token should have access to",
      "example": [
        "rails"
      ],
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "maxItems": 50,
      "uniqueItems": true
    },
    "repository_ids": {
      "description": "List of repository IDs that the token should have access to",
      "example": [
        1
      ],
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 50,
      "uniqueItems": true
    }
  },
  "links": [
    {
      "title": "Get or create an authorization for a specific app and fingerprint",
      "method": "PUT",
      "rel": "get-or-create-for-fingerprint",
      "href": "/authorizations/clients/{client_id}/{fingerprint}",
      "schema": {
        "properties": {
          "client_secret": {
            "$ref": "#/definitions/client_secret"
          },
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "note": {
            "$ref": "#/definitions/note"
          },
          "note_url": {
            "$ref": "#/definitions/note_url"
          }
        },
        "additionalProperties": false,
        "required": [
          "client_secret"
        ],
        "type": "object"
      }
    },
    {
      "title": "Get or create an authorization for a specific app",
      "method": "PUT",
      "rel": "get-or-create-for-app",
      "href": "/authorizations/clients/{client_id}",
      "schema": {
        "properties": {
          "client_secret": {
            "$ref": "#/definitions/client_secret"
          },
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "note": {
            "$ref": "#/definitions/note"
          },
          "note_url": {
            "$ref": "#/definitions/note_url"
          },
          "fingerprint": {
            "$ref": "#/definitions/fingerprint"
          }
        },
        "additionalProperties": false,
        "required": [
          "client_secret"
        ],
        "type": "object"
      }
    },
    {
      "title": "Create a new authorization",
      "method": "POST",
      "rel": "create",
      "href": "/authorizations",
      "schema": {
        "properties": {
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "note": {
            "$ref": "#/definitions/note"
          },
          "note_url": {
            "$ref": "#/definitions/note_url"
          },
          "client_id": {
            "$ref": "#/definitions/client_id"
          },
          "client_secret": {
            "$ref": "#/definitions/client_secret"
          },
          "fingerprint": {
            "$ref": "#/definitions/fingerprint"
          }
        },
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Update an existing authorization",
      "method": "PATCH",
      "rel": "update",
      "href": "/authorizations/{authorization_id}",
      "schema": {
        "properties": {
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "add_scopes": {
            "$ref": "#/definitions/add_scopes"
          },
          "remove_scopes": {
            "$ref": "#/definitions/remove_scopes"
          },
          "note": {
            "$ref": "#/definitions/note"
          },
          "note_url": {
            "$ref": "#/definitions/note_url"
          },
          "fingerprint": {
            "$ref": "#/definitions/fingerprint"
          }
        },
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Update an existing authorization",
      "method": "POST",
      "rel": "update",
      "href": "/authorizations/{authorization_id}",
      "schema": {
        "properties": {
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "add_scopes": {
            "$ref": "#/definitions/add_scopes"
          },
          "remove_scopes": {
            "$ref": "#/definitions/remove_scopes"
          },
          "note": {
            "$ref": "#/definitions/note"
          },
          "note_url": {
            "$ref": "#/definitions/note_url"
          },
          "fingerprint": {
            "$ref": "#/definitions/fingerprint"
          }
        },
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Delete an authorization",
      "method": "DELETE",
      "rel": "delete",
      "href": "/authorizations/{authorization_id}",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Reset an authorization",
      "method": "POST",
      "rel": "reset",
      "href": "/applications/{client_id}/tokens/{access_token}",
      "schema": {
        "additionalProperties": false,
        "type": [
          "null",
          "object"
        ]
      }
    },
    {
      "title": "Check an authorization",
      "method": "POST",
      "rel": "check-token",
      "href": "/applications/{client_id}/token",
      "schema": {
        "properties": {
          "access_token": {
            "$ref": "#/definitions/access_token"
          }
        },
        "required": [
          "access_token"
        ],
        "additionalProperties": false,
        "type": [
          "object"
        ]
      }
    },
    {
      "title": "Reset an authorization",
      "method": "PATCH",
      "rel": "reset-token",
      "href": "/applications/{client_id}/token",
      "schema": {
        "properties": {
          "access_token": {
            "$ref": "#/definitions/access_token"
          }
        },
        "required": [
          "access_token"
        ],
        "additionalProperties": false,
        "type": [
          "object"
        ]
      }
    },
    {
      "title": "Revoke an authorization for an application",
      "method": "DELETE",
      "rel": "revoke",
      "href": "/applications/{client_id}/tokens/{access_token}",
      "schema": {
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Revoke an authorization for an application",
      "method": "DELETE",
      "rel": "revoke-token",
      "href": "/applications/{client_id}/token",
      "schema": {
        "properties": {
          "access_token": {
            "$ref": "#/definitions/access_token"
          }
        },
        "required": [
          "access_token"
        ],
        "additionalProperties": false,
        "type": [
          "object"
        ]
      }
    },
    {
      "title": "Scope an authorization for an application",
      "method": "POST",
      "rel": "scope-token",
      "href": "/applications/{client_id}/token/scoped",
      "schema": {
        "properties": {
          "access_token": {
            "$ref": "#/definitions/access_token"
          },
          "target_id": {
            "$ref": "https://schema.github.com/v3/installation.json#/definitions/target_id"
          },
          "target": {
            "$ref": "https://schema.github.com/v3/simple-user.json#/definitions/login"
          },
          "permissions": {
            "$ref": "https://schema.github.com/v3/installation.json#/definitions/permissions"
          },
          "repository_ids": {
            "$ref": "#/definitions/repository_ids"
          },
          "repositories": {
            "$ref": "#/definitions/repositories"
          }
        },
        "required": [
          "access_token"
        ],
        "oneOf": [
          {
            "required": [
              "target_id"
            ]
          },
          {
            "required": [
              "target"
            ]
          }
        ],
        "anyOf": [
          {
            "oneOf": [
              {
                "required": [
                  "repositories"
                ]
              },
              {
                "required": [
                  "repository_ids"
                ]
              }
            ]
          },
          {
            "not": {
              "required": [
                "repositories",
                "repository_ids"
              ]
            }
          }
        ],
        "additionalProperties": false,
        "type": [
          "object"
        ]
      }
    }
  ],
  "properties": {
    "app": {
      "type": "object",
      "properties": {
        "client_id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "url": {
          "type": "string",
          "format": "uri"
        }
      },
      "additionalProperties": false,
      "required": [
        "client_id",
        "name",
        "url"
      ]
    },
    "id": {
      "$ref": "#/definitions/id"
    },
    "note": {
      "$ref": "#/definitions/authorization_note"
    },
    "note_url": {
      "$ref": "#/definitions/authorization_note_url"
    },
    "scopes": {
      "$ref": "#/definitions/scopes"
    },
    "token": {
      "$ref": "#/definitions/token"
    },
    "hashed_token": {
      "$ref": "#/definitions/hashed_token"
    },
    "token_last_eight": {
      "$ref": "#/definitions/token_last_eight"
    },
    "fingerprint": {
      "$ref": "#/definitions/authorization_fingerprint"
    },
    "url": {
      "$ref": "#/definitions/url"
    },
    "created_at": {
      "$ref": "#/definitions/created_at"
    },
    "updated_at": {
      "$ref": "#/definitions/updated_at"
    },
    "expires_at": {
      "$ref": "#/definitions/expires_at"
    },
    "user": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "https://schema.github.com/v3/simple-user.json#"
        }
      ]
    },
    "installation": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "https://schema.github.com/v3/scoped-installation.json#"
        }
      ]
    }
  },
  "additionalProperties": false,
  "required": [
    "app",
    "id",
    "note",
    "note_url",
    "scopes",
    "token",
    "hashed_token",
    "token_last_eight",
    "fingerprint",
    "url",
    "created_at",
    "updated_at",
    "expires_at"
  ]
}
