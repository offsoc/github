"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["internal-api-insights"],{7572:(e,t,r)=>{r.d(t,{C:()=>o,i:()=>s});var n=r(97156),i=r(97564),a=r(46493);function o(e,t){(0,i.G7)("arianotify_comprehensive_migration")?s(l(e),{...t,element:t?.element??e}):(0,i.G7)("primer_live_region_element")&&t?.element===void 0?(0,a.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):s(l(e),t)}function s(e,t){let{assertive:r,element:o}=t??{};(0,i.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(o||document.body).ariaNotify(e,{interrupt:t?.assertive?"all":"none"}):(0,i.G7)("primer_live_region_element")&&void 0===o?(0,a.iP)(e,{politeness:r?"assertive":"polite"}):function(e,t,r){let i=r??n.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");i&&(i.textContent===e?i.textContent=`${e}\u00A0`:i.textContent=e)}(e,r,o)}function l(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},64665:(e,t,r)=>{r.d(t,{D:()=>n});function n(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let r=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(r),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let r=document.createRange();r.selectNodeContents(e),t.addRange(r),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(r),t.removeChild(r),Promise.resolve()}},38510:(e,t,r)=>{r.d(t,{D:()=>i.D,T:()=>n.T});var n=r(30569),i=r(64665)},6032:(e,t,r)=>{r.d(t,{U:()=>a});let n=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let r=t.getPropertyValue(e);return"auto"===r||"scroll"===r})},i=(e,t)=>e&&null!==e.parentNode?i(e.parentNode,t.concat([e])):t;function a(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of i(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&n(t))return t;return document.scrollingElement||document.documentElement}}},47925:(e,t,r)=>{var n,i=r(72245),a=r(9449),o=r(44196),s=r(55293),l=r(55847),c=r(42141),d=r(75177),u=r(73729),p=r(44981),h=r(281),m=r(87330),f=r(17909),x=r(69909),g=r(72512),b=r(59857),y=r(67726),j=r(86519),_=r(38510),v=r(60717);!function(e){e.http_get="get",e.http_put="put",e.http_post="post",e.http_delete="delete",e.graphql_query="gql-query",e.graphql_mutation="gql-mutation",e.graphql_subscription="gql-subscription"}(n||(n={}));let w=({name:e,type:t,duration:r,sqlQueriesCount:n,allocationsCount:i,traces:o})=>{let s=t?(0,a.jsx)(v.A,{text:t.toString()}):null,l=function(e){let t=JSON.parse(JSON.stringify(e));return delete t.flamegraph,{cleanTrace:t,flamegraphData:e.flamegraph}}(o),c=async({e,objectFlamegraph:t,vernier:r})=>{e.preventDefault(),e.stopPropagation();let n=o.url,i=o.method;if(n&&i){let e="flamegraph=1&flamegraph_output=json&flamegraph_interval=500";e+=(t?"&flamegraph_mode=object":"")+(r?"&flamegraph_mode=vernier":"");let a=n.replace(/([&\\?])_tracing=true/,""),o=0>a.indexOf("?")?`${a}?${e}`:`${a}&${e}`,s=await fetch(o,{method:i,mode:"no-cors",cache:"no-cache",headers:{accept:"application/json"}}),l=await s.blob(),c=window.URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download="flamegraph.json",document.body.appendChild(d),d.click(),d.remove()}else alert("Unable to find url where to get flamegraph")},u=o.request_id;return(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,a.jsx)(x.A,{sx:{marginRight:"auto"},children:e}),s,(0,a.jsx)(I,{count:n}),(0,a.jsx)(E,{count:i}),(0,a.jsx)(C,{duration:r}),s&&(0,a.jsx)(k,{name:e,isGraphqlQuery:"gql-query"===t||"gql-mutation"===t,cleanTrace:l.cleanTrace,onFlamegraphClick:c,requestId:u})]})},C=({duration:e})=>{let t=`${e.toFixed(1)}ms`,r=e<100?"success.fg":e<500?"attention.fg":"danger.fg";return(0,a.jsx)(v.A,{text:t,sx:{color:r,height:"2.3em"}})},k=({name:e,isGraphqlQuery:t,cleanTrace:r,onFlamegraphClick:n,requestId:i})=>(0,a.jsxs)(h.W,{children:[(0,a.jsx)(h.W.Anchor,{children:(0,a.jsx)(v.A,{text:"",leadingVisual:b.KebabHorizontalIcon,sx:{height:"2.3em",paddingRight:"4px"}})}),(0,a.jsx)(h.W.Overlay,{width:"medium",children:(0,a.jsxs)(f.l,{showDividers:!0,children:[(0,a.jsxs)(f.l.LinkItem,{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(r))}`,download:`api-traces-${e}.json`,"aria-label":"Download trace",children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.DownloadIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Download trace"}),(0,a.jsx)(f.l.Description,{variant:"block",children:"Raw trace in JSON format"})]}),(0,a.jsxs)(f.l.LinkItem,{download:`api-traces-${e}.json`,"aria-label":"Download flamegraph",onClick:e=>n({e}),children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.FlameIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Download flamegraph"}),(0,a.jsxs)(f.l.Description,{variant:"block",children:["JSON data for"," ",(0,a.jsx)(j.A,{inline:!0,href:"https://www.speedscope.app/",children:"Speedscope"})," ","flamegraph"]})]}),(0,a.jsxs)(f.l.LinkItem,{download:`api-traces-${e}.json`,"aria-label":"Download object flamegraph",onClick:e=>n({e,objectFlamegraph:!0}),children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.FlameIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Download object flamegraph"}),(0,a.jsxs)(f.l.Description,{variant:"block",children:["JSON data for"," ",(0,a.jsx)(j.A,{inline:!0,href:"https://www.speedscope.app/",children:"Speedscope"})," ","flamegraph"]})]}),(0,a.jsxs)(f.l.LinkItem,{download:`api-traces-${e}.json`,"aria-label":"Download Vernier flamegraph",onClick:e=>n({e,vernier:!0}),children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.FlameIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Download Vernier flamegraph"}),(0,a.jsxs)(f.l.Description,{variant:"block",children:["JSON data for use with"," ",(0,a.jsx)(j.A,{inline:!0,href:"https://profiler.firefox.com/",children:"Firefox profiler"})]})]}),t&&(0,a.jsxs)(f.l.LinkItem,{href:S(e),target:"_blank","aria-label":"Datadog dashboard",children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.GraphIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Datadog dashboard"}),(0,a.jsx)(f.l.Description,{variant:"block",children:"View last week's data for this GraphQL query"})]}),t&&(0,a.jsxs)(f.l.LinkItem,{href:R(e),target:"_blank","aria-label":"DataDog APM Logs",children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.LogIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Datadog APM "}),(0,a.jsx)(f.l.Description,{variant:"block",children:"View traces for this GraphQL query in DataDog APM"})]}),i&&(0,a.jsxs)(f.l.LinkItem,{href:A(i),target:"_blank","aria-label":"Splunk Logs",children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsx)(b.LogIcon,{})}),(0,a.jsx)(d.A,{sx:{fontWeight:"500"},children:"Splunk Logs"}),(0,a.jsx)(f.l.Description,{variant:"block",children:"View logs for this query in Splunk"})]})]})})]}),S=e=>{let t=e.toLowerCase(),r=Date.now().toString(),n=(Date.now()-6048e5).toString(),i=new URLSearchParams;return i.set("tpl_var_operation_name[0]",t),i.set("from_ts",n),i.set("to_ts",r),`https://app.datadoghq.com/dashboard/vyc-z7e-fna?${i}`},R=e=>`https://app.datadoghq.com/apm/traces?query=@graphql.operation.name:${e}`,A=e=>{let t=Math.floor((Date.now()+6e4)/1e3).toString(),r=Math.floor((Date.now()-6e4)/1e3).toString(),n=new URLSearchParams;return n.set("display.page.search.mode","verbose"),n.set("q",`search index=* "${e}"`),n.set("dispatch.sample_ratio","1"),n.set("earliest",r),n.set("latest",t),`https://splunk.githubapp.com/en-US/app/gh_reference_app/search?${n}`},I=({count:e})=>e<1?null:(0,a.jsx)(v.A,{text:e.toString(),leadingVisual:b.DatabaseIcon,sx:{height:"2.3em"}}),E=({count:e})=>e<1?null:(0,a.jsx)(v.A,{text:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),leadingVisual:b.ContainerIcon,sx:{height:"2.3em"}});try{w.displayName||(w.displayName="NameWithDetails")}catch{}try{C.displayName||(C.displayName="TimingDetail")}catch{}try{k.displayName||(k.displayName="LinksMenu")}catch{}try{I.displayName||(I.displayName="DatabaseDetail")}catch{}try{E.displayName||(E.displayName="AllocationDetail")}catch{}function D(e,t,r){let n=e;for(let i of t){for(let e of i.split("/"))n&&n[e]&&(n=n[e]);if(n&&!Array.isArray(n)&&Math.round(10*parseFloat(n))/10>=r)return parseFloat(n);n=e}}function N(e,t){for(let r of(t.sql&&e.push({query:t.sql,digested_query:t.digested_sql,duration:t.duration_ms,result:t.result_count,cluster_name:t.cluster_name,fallbacks:t.fallbacks,backtrace:t.backtrace}),Object.keys(t)))"flamegraph"!==r&&"object"==typeof t[r]&&null!==t[r]&&N(e,t[r])}function q(e){let t=e.match(/(?:\/workspaces\/github\/|\/build\/)(.*):([0-9]+)/);if(t)return{remoteUrl:`https://github.com/github/github/blob/master/${t[1]}#L${t[2]}`,relativePath:t[1],line:t[2]}}let L=({title:e,queries:t,nPlusOnes:r,sort:n})=>{let i=t.reduce((e,t)=>e+t.duration,0),o=t.reduce((e,t)=>e+(t.result??0),0);if(0===t.length)return null;let s=function(e,t){switch(t){case"duration":return e.sort((e,t)=>t.duration-e.duration);case"resultCount":return e.sort((e,t)=>(t.result??0)-(e.result??0));default:return e}}(t,n);return(0,a.jsxs)(g.G.Item,{id:`${e}-database-item`,children:[(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,flexDirection:"row",alignItems:"center"},children:[(0,a.jsx)(x.A,{sx:{marginRight:"auto"},children:e}),(0,a.jsx)(I,{count:t.length}),r.length>0&&(0,a.jsx)(v.A,{text:`${r.length} N+1`,leadingVisual:b.AlertFillIcon,sx:{color:"attention.fg",height:"2.3em"}}),(0,a.jsx)(v.A,{text:o.toString(),leadingVisual:b.RowsIcon,sx:{height:"2.3em"}}),(0,a.jsx)(C,{duration:i})]}),(0,a.jsx)(g.G.SubTree,{children:s.map(e=>(0,a.jsx)(g.G.Item,{id:`${e.query}-query-item`,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(j.A,{target:"_blank",href:function(e){if(void 0===e||Array.isArray(e)&&0===e.length)return;let t=Array.isArray(e)?e[0]:e;if(!t||"string"!=typeof t)return;let r=q(t);if(void 0!==r)return r.remoteUrl}(e.backtrace),muted:!0,sx:{whiteSpace:"pre-wrap",color:"fg.default"},children:e.query}),(0,a.jsx)("br",{}),(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",m:1},children:[(0,a.jsxs)(x.A,{sx:{fontSize:12,color:"fg.muted"},children:[e.duration.toFixed(2),"ms, ",e.result," results, fallbacks:"," ",e.fallbacks?.length?e.fallbacks?.join(", "):"unknown"]}),T(e,r)>0&&(0,a.jsx)(v.A,{text:`${T(e,r)} N+1`,leadingVisual:b.AlertFillIcon,sx:{color:"attention.fg",ml:2}})]})]})},e.query))})]})};function T(e,t){let r=t?.find(t=>t.sql===e.digested_query);return r?r.count:0}try{L.displayName||(L.displayName="DatabaseTreeItem")}catch{}let P=({name:e,isRoot:t,item:r,sortType:i,threshold:o,variables:s,showSubscriptionQueries:l,groupSqlByClusters:c,query_text:u})=>{let p;let h=Object.keys(r),m=[];t&&N(m,r);let f=D(r,["total/allocated_objects_count"],0)||0,b=m.reduce((e,t)=>{let r=t.cluster_name||"unknown";return e[r]||(e[r]=[]),e[r]?.push(t),e},{}),y=t?function(e){if(e.execution){let t=e.execution.n_plus1_sql_queries;if(t)return t}return[]}(r):[],j=[];t&&function e(t,r){if(r.elastomer)for(let e of r.elastomer.calls)t.push({query:e.body,duration:e.duration_ms,result:e.count});for(let n of Object.keys(r))"flamegraph"!==n&&"object"==typeof r[n]&&null!==r[n]&&e(t,r[n])}(j,r),parseInt(e,10).toString()===e&&"string"==typeof r.name&&(e=r.name);let v=(0,a.jsx)("span",{children:e}),C=D(r,["total/duration_ms","__trace/children_duration_ms","duration_ms"],o),k=h.filter(e=>"object"==typeof r[e]&&(!C||"total"!==e)),S=O(r,e);if(C||(C=function(e,t,r){let n=0;for(let i of e){let e=D(t[i],["total/duration_ms","__trace/children_duration_ms"],r);e&&(n+=e)}return n>0?n:void 0}(k,r,o)),!C||!l&&u?.match("subscription"))return(0,a.jsx)(a.Fragment,{});if(e.endsWith("Query"))p=n.graphql_query;else if(e.endsWith("Mutation"))p=n.graphql_mutation;else if(e.endsWith("Subscription"))p=n.graphql_subscription;else switch(r.method){case"GET":p=n.http_get;break;case"POST":p=n.http_post;break;case"PUT":p=n.http_put;break;case"DELETE":p=n.http_delete}v=(0,a.jsx)(w,{name:e,type:p,duration:C,sqlQueriesCount:m.length,allocationsCount:f,traces:r});let R=$(S),A=R.length>0?G(R,r,e):[],E=k.filter(e=>(function(e,t,r){let n=Object.keys(e),i=O(e,t),a=D(e,["total/duration_ms","__trace/children_duration_ms","duration_ms"],r),o=n.filter(t=>"object"==typeof e[t]&&(!a||"total"!==t)),s=$(i),l=s.length>0?G(s,e,t):[];return"__trace"!==t||0!==l.length||0!==o.length})(r[e],e,o)).map(e=>(0,a.jsx)(P,{name:e,item:r[e],threshold:o},e));return(0,a.jsxs)(g.G.Item,{id:`${e}-pane-item`,children:[v,(A.length>0||t||E.length>0)&&(0,a.jsxs)(g.G.SubTree,{children:[A,t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.G.Item,{id:`${e}-pane-query-item`,children:["query",(0,a.jsxs)(g.G.SubTree,{children:[(0,a.jsxs)(g.G.Item,{id:`${e}-pane-query-text-item`,children:["query_text",(0,a.jsx)(g.G.SubTree,{children:(0,a.jsx)(g.G.Item,{id:`${e}-pane-query-text-sub-item`,children:(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,a.jsx)(x.A,{sx:{whiteSpace:"pre-wrap"},children:r.query_text}),(0,a.jsx)(_.T,{tooltipProps:{direction:"nw"},textToCopy:r.query_text,ariaLabel:"Copy to clipboard",accessibleButton:!0,className:"px-2 pt-1",sx:{height:25,width:25}})]})})})]}),(0,a.jsxs)(g.G.Item,{id:`${e}-pane-query-variable-item`,children:["query_variables",(0,a.jsx)(g.G.SubTree,{children:s&&Object.entries(s).filter(([,e])=>!!e).map(([e,t],r)=>(0,a.jsxs)(g.G.Item,{id:`${r}-pane-query-variable-item`,children:[e,": ",t.toString()]},r))})]})]})]}),c&&(0,a.jsxs)(g.G.Item,{id:`${e}-pane-mysql-item`,children:[(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,a.jsx)(x.A,{sx:{marginRight:"auto"},children:"mysql"}),(0,a.jsxs)(x.A,{sx:{fontSize:12,color:"fg.muted"},children:[Object.entries(b).length," clusters"]}),(0,a.jsx)(I,{count:m.length})]}),(0,a.jsx)(g.G.SubTree,{children:Object.entries(b).map(([e,t])=>(0,a.jsx)(L,{title:e,queries:t,nPlusOnes:y,sort:i},e))})]})]}),!c&&(0,a.jsx)(L,{title:"mysql",queries:m,nPlusOnes:y,sort:i}),(0,a.jsx)(L,{title:"elastic search",queries:j,nPlusOnes:[],sort:i}),E]})]},e)};function O(e,t){return Object.keys(e).filter(r=>"object"!=typeof e[r]&&e[r]!==t&&"query_text"!==r)}function $(e){return e.filter(e=>!("duration_ms"===e||"children_duration_ms"===e))}function G(e,t,r){return e.map(e=>{let n=t[e];if("number"==typeof n&&e.endsWith("ms"))n=n.toFixed(1);else if("string"==typeof n){let e=q(n);e&&(n=(0,a.jsxs)(j.A,{target:"_blank",href:e.remoteUrl,children:[e.relativePath,":",e.line]}))}return(0,a.jsx)(g.G.Item,{id:`${e}-${r}-pane-sub-item`,children:(0,a.jsx)(x.A,{sx:{whiteSpace:"pre-wrap"},children:(0,a.jsxs)(a.Fragment,{children:[e," ",n]})})},e)}).filter(e=>null!==e)}try{P.displayName||(P.displayName="PerformancePaneItem")}catch{}var B=r(97156),V=r(20594);let W=({traces:e})=>{let t=function(e){let t=new Set;for(let r of e){let e=[];for(let n of(N(e,r),e))n.cluster_name&&t.add(n.cluster_name)}return Array.from(t)}(e);return(0,a.jsx)(f.l,{children:t.map((e,t)=>(0,a.jsx)(f.l.Item,{onSelect:()=>(0,V.M_)(e),children:(0,a.jsxs)(d.A,{sx:{display:"flex"},children:[(0,a.jsx)(x.A,{sx:{flex:1,mr:2},children:e}),(0,V.HX)(e)?(0,a.jsx)(b.NoEntryIcon,{}):(0,a.jsx)(b.CheckIcon,{})]})},t))})};try{W.displayName||(W.displayName="ClustersDisabler")}catch{}let M=()=>{let[e,t]=(0,s.useState)(!0),[r,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)("none"),[j,_]=(0,s.useState)(0),v=(0,s.useRef)(null),w=(0,s.useRef)(null),[C,k]=(0,s.useState)(!1),[S,R]=(0,s.useState)(!1),A=(0,s.useRef)(null),I=B.cg;I[V.BM]||(I[V.BM]=[]);let[E,D]=(0,s.useState)([...I[V.BM]]);I[V.rb]=(0,s.useCallback)(()=>{D([...I[V.BM]])},[]);let N=(0,s.useCallback)(()=>{D([]),I[V.BM]=[]},[I]),q=(0,s.useMemo)(()=>{switch(i){case"duration":return"by duration";case"resultCount":return"by count";default:return"by time"}},[i]);return E?e?(0,a.jsx)(c.Ay,{initialFocusRef:v,returnFocusRef:w,ignoreClickRefs:[w],onEscape:()=>t(!e),onClickOutside:y.l,"aria-labelledby":"api insights",width:"xlarge",height:"auto",top:110,left:window.innerWidth-640,sx:{zIndex:9999},children:(0,a.jsxs)(d.A,{sx:{padding:4,height:"100vh"},children:[(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"center",mb:1},children:[(0,a.jsx)(b.GraphIcon,{}),(0,a.jsx)(u.A,{as:"h2",sx:{fontSize:14},children:"API Insights"}),(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2,marginLeft:"auto"},children:[(0,a.jsx)(p.A,{name:"threshold",size:"small",sx:{width:"120px"},trailingVisual:"ms",placeholder:"threshold",onChange:e=>{let t=parseFloat(e.target.value);_(isNaN(t)?0:t)},"aria-label":"Threshold for filtering items by duration"}),(0,a.jsx)(l.Q,{size:"small",onClick:()=>o(e=>{switch(e){case"none":return"duration";case"duration":return"resultCount";case"resultCount":return"none"}}),leadingVisual:b.SortDescIcon,sx:{width:"110px"},children:q}),(0,a.jsxs)(h.W,{children:[(0,a.jsx)(h.W.Anchor,{children:(0,a.jsx)(m.K,{unsafeDisableTooltip:!0,icon:b.KebabHorizontalIcon,size:"small","aria-label":"Open more options"})}),(0,a.jsx)(h.W.Overlay,{width:"medium",children:(0,a.jsxs)(f.l,{showDividers:!0,children:[(0,a.jsxs)(f.l.LinkItem,{onClick:N,children:[(0,a.jsx)(b.TrashIcon,{}),(0,a.jsx)(x.A,{sx:{fontWeight:"bold",pl:3},children:"Clear"})]}),(0,a.jsxs)(f.l.LinkItem,{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(E))}`,download:"api-traces.json",children:[(0,a.jsx)(b.DownloadIcon,{}),(0,a.jsx)(x.A,{sx:{fontWeight:"bold",pl:3},children:"Download"})]}),(0,a.jsxs)(f.l.LinkItem,{onClick:()=>k(!C),children:[C?(0,a.jsx)(b.EyeClosedIcon,{}):(0,a.jsx)(b.EyeIcon,{}),(0,a.jsx)(x.A,{sx:{fontWeight:"bold",pl:3},children:C?"Hide subscription queries":"Show subscription queries"})]}),(0,a.jsxs)(f.l.LinkItem,{onClick:()=>n(!r),children:[(0,a.jsx)(b.DatabaseIcon,{}),(0,a.jsx)(x.A,{sx:{fontWeight:"bold",pl:3},children:r?"Ungroup MySQL queries by cluster":"Group MySQL queries by cluster"})]}),(0,a.jsx)(f.l.Item,{ref:A,onSelect:()=>{R(!S)},children:(0,a.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(b.NoEntryIcon,{}),(0,a.jsx)(x.A,{sx:{fontWeight:"bold",pl:3,flex:1},children:"Disable Clusters"}),(0,a.jsx)(b.ChevronRightIcon,{})]})})]})})]}),(0,a.jsx)(m.K,{unsafeDisableTooltip:!0,size:"small",onClick:()=>t(!1),icon:b.XIcon,"aria-label":"Close"}),(0,a.jsx)(h.W,{open:S,onOpenChange:R,anchorRef:A,children:(0,a.jsx)(h.W.Overlay,{children:(0,a.jsx)(W,{traces:E})})})]})]}),(0,a.jsx)(d.A,{sx:{overflow:"auto",height:"100%",mt:3},children:(0,a.jsx)("nav",{"aria-label":"Files",children:(0,a.jsx)(g.G,{"aria-label":"Files",children:E.map((e,t)=>(0,a.jsx)(P,{name:e.query_name,variables:e.query_variables,item:e,isRoot:!0,sortType:i,threshold:j,showSubscriptionQueries:C,groupSqlByClusters:r,query_text:e.query_text},t))})})})]})}):(0,a.jsx)(l.Q,{sx:{position:"absolute",top:110,right:5},leadingVisual:b.GraphIcon,onClick:()=>t(!0),children:"API Insights"}):null};try{M.displayName||(M.displayName="PerformancePane")}catch{}function F(){return(0,a.jsx)(o.t,{children:(0,a.jsx)(M,{})})}try{F.displayName||(F.displayName="ApiInsights")}catch{}(0,i.k)("internal-api-insights",{Component:F})},20594:(e,t,r)=>{r.d(t,{Av:()=>s,BM:()=>i,Gr:()=>l,HX:()=>u,M_:()=>p,RD:()=>d,rb:()=>a});var n=r(97156);let i="GraphQLTraces",a="GraphQLTracingRefresh",o=decodeURIComponent(new URLSearchParams(n.fV.search).get("disable_clusters")||"").split(",").filter(e=>""!==e);function s(e){if(!n.cg||!l()||!e)return;let t=n.cg;t&&!t[i]&&(t[i]=[]),t&&e.__trace&&(t[i].push(e.__trace),"function"==typeof t[a]&&t[a]())}function l(){let e=n.cg;return"true"===new URLSearchParams(n.fV.search).get("_tracing")||e&&void 0!==e[i]}function c(){return o.length>0}function d(e){if(!l()&&!c())return e;let t=new URL(e,n.fV.origin);return l()&&t.searchParams.set("_tracing","true"),c()&&t.searchParams.set("disable_clusters",o.join(",")),t.pathname+t.search}function u(e){return o.indexOf(e)>-1}function p(e){let t=o.indexOf(e);t>-1?o.splice(t,1):o.push(e);let r=new URLSearchParams(n.fV.search);r.set("disable_clusters",o.join(",")),n.fV.search=r.toString()}},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new n),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let n=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>a,QJ:()=>o,w8:()=>i});var n=r(55293);function i(e){return((0,n.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function a(e){let t=(0,n.useRef)(e.__wrapperElement.anchor||null),[r,i]=(0,n.useState)(!1),a=(0,n.useCallback)(()=>{i(!r)},[r,i]);return(0,n.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),o(e,a),{ref:t,open:r,setOpen:i}}function o(e,t){let r=(0,n.useRef)(e.__wrapperElement.anchor);(0,n.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let n=new(r(92536)).R;var i=r(9449),a=r(39595),o=r(24508),s=r(23235);let l=class ReactPartialElement extends o.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,n.getRegistration(t)),a=this.closest("react-partial-anchor");return(0,i.jsx)(s.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:a})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){n.register(e,t)}l=function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([a.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>s});let{getItem:n,setItem:i,removeItem:a}=(0,r(74572).A)("localStorage"),o="REACT_PROFILING_ENABLED",s={enable:()=>i(o,"true"),disable:()=>a(o),isEnabled:()=>!!n(o)}},30569:(e,t,r)=>{r.d(t,{T:()=>m});var n=r(9449),i=r(54008),a=r(73272),o=r(59857),s=r(87330),l=r(30729),c=r(55293),d=r(20053),u=r(80577),p=r(7572),h=r(64665);function m({icon:e=o.CopyIcon,size:t="medium",onCopy:r,sx:i,textToCopy:l,tooltipProps:m,ariaLabel:x,accessibleButton:g,hasPortalTooltip:b=!1,avoidStyledComponent:y=!1,className:j}){let[_,v]=c.useState(!1),w=(0,a.A)(),C=()=>{v(!0),(0,p.i)("Copied!"),(0,h.D)(l),r?.(),setTimeout(()=>w()&&v(!1),2e3)},k=x??`Copy ${l} to clipboard`,S=_?"Copied!":k;return(m={...m,"aria-hidden":"true"},b)?(0,n.jsx)(f,{label:k,size:t,textToCopy:l,copied:_,onClickCopy:C,tooltipProps:m,text:S,avoidStyledComponent:y,sx:i,className:j}):(0,n.jsx)(u.m,{className:"position-absolute",text:S,"aria-label":k,type:"label",...m,children:(0,n.jsx)(s.K,{icon:_?o.CheckIcon:e,variant:"invisible",size:t,tabIndex:!1===g?-1:0,className:(0,d.$)(_?"color-fg-success":void 0,j),sx:{...i},onClick:C})})}function f({icon:e=o.CopyIcon,size:t="medium",label:r,accessibleButton:a,copied:s,onClickCopy:l,text:d,tooltipProps:u,sx:p,avoidStyledComponent:h=!1,className:m}){let f=c.useRef(null),[g,b]=(0,i.B)({contentRef:f,"aria-label":r,text:d,...u});return(0,n.jsxs)("div",{ref:f,...g,children:[(0,n.jsx)(x,{icon:e,size:t,label:r,copied:s,onClickCopy:l,accessibleButton:a,avoidStyledComponent:h,className:m,sx:p}),b]})}function x({icon:e=o.CopyIcon,size:t="medium",label:r,accessibleButton:i,copied:a,onClickCopy:c,sx:u,avoidStyledComponent:p=!1,className:h}){return p&&!u?(0,n.jsx)("button",{"aria-label":r,tabIndex:!1===i?-1:0,className:(0,d.$)(`Button Button--iconOnly Button--invisible Button--${t} ${a?"color-fg-success":""}`,h),onClick:c,children:a?(0,n.jsx)(o.CheckIcon,{}):(0,n.jsx)(l.A,{icon:e})}):(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":r,icon:a?o.CheckIcon:e,variant:"invisible",size:t,tabIndex:!1===i?-1:0,className:a?"color-fg-success":void 0,sx:{...u},onClick:c})}try{m.displayName||(m.displayName="CopyToClipboardButton")}catch{}try{f.displayName||(f.displayName="PortalTooltipCopyButton")}catch{}try{x.displayName||(x.displayName="PortalCopyIconButton")}catch{}},26020:(e,t,r)=>{r.d(t,{Y:()=>h});var n=r(9449),i=r(59299),a=r(44999),o=r(16255),s=r(20053),l=r(55293);let c=r(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-d73eef01-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,i.Jt)("fonts.normal"),(0,i.Jt)("colors.fg.onEmphasis"),(0,i.Jt)("colors.neutral.emphasisPlus"),(0,i.Jt)("radii.2"),(0,i.Jt)("space.3"),(0,i.Jt)("space.3"),(0,i.Jt)("space.3"),(0,i.Jt)("space.3"),a.A),d=()=>()=>void 0,u=()=>!1,p=()=>!0,h=(0,l.forwardRef)(function({direction:e="n",className:t,text:r,noDelay:i,align:a,wrap:h,open:m=!1,portalProps:f={},...x},g){let b=(0,l.useSyncExternalStore)(d,p,u),y=(0,s.$)(t,`tooltipped-${e}`,a&&`tooltipped-align-${a}-2`,i&&"tooltipped-no-delay",h&&"tooltipped-multiline",m&&"tooltipped-open");return b?(0,n.jsx)(o.Z,{...f,children:(0,n.jsx)(c,{ref:g,role:"tooltip","aria-label":r,"data-visible-text":r||x["aria-label"],...x,sx:{position:"fixed",zIndex:1,...x.sx},className:y})}):null});try{h.displayName||(h.displayName="ControlledTooltip")}catch{}},68976:(e,t,r)=>{r.d(t,{m:()=>l});var n=r(9449),i=r(80373),a=r(55293),o=r(26020),s=r(6032);let l=(0,a.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:r,anchorSide:l,anchorOffset:c,alignmentOffset:d,allowOutOfBounds:u,...p},h){let m=(0,a.useRef)(null);(0,a.useImperativeHandle)(h,()=>m.current);let f=(0,a.useRef)({left:0,top:0}),x=(0,a.useSyncExternalStore)((0,a.useCallback)(r=>{if(!m.current||!e.current||!t)return()=>void 0;let n=(0,s.U)(e.current);return n?.addEventListener("scroll",r),()=>{n?.removeEventListener("scroll",r)}},[e,t]),(0,a.useCallback)(()=>{if(!m.current||!e.current)return f.current;let t=(0,i.u)(m.current,e.current,{align:r??"center",side:l??"outside-top",alignmentOffset:d??0,anchorOffset:c??0,allowOutOfBounds:u});return(t.left!==f.current.left||t.top!==f.current.top)&&(f.current=t),f.current},[e,d,c,r,l,u]),(0,a.useCallback)(()=>f.current,[]));return(0,n.jsx)(o.Y,{...p,ref:m,open:t,style:{position:"absolute",...x,...p.style}})});try{l.displayName||(l.displayName="PortalTooltip")}catch{}},54008:(e,t,r)=>{r.d(t,{B:()=>o});var n=r(9449),i=r(55293),a=r(68976);function o({includeAriaAttributes:e=!0,...t}){let r=(0,i.useId)(),[o,s]=(0,i.useState)(!1),l=t.open??o,c=t.id??r,d=e?{"aria-describedby":c}:{},u=(0,i.useCallback)(()=>s(!0),[]),p=(0,i.useCallback)(()=>s(!1),[]);return[{...d,onPointerEnter:u,onPointerLeave:p,onFocus:u,onBlur:p},(0,n.jsx)(a.m,{...t,open:l,id:c},"portal-tooltip")]}},44196:(e,t,r)=>{r.d(t,{t:()=>ErrorBoundary});var n=r(9449),i=r(1819),a=r(55293);let ErrorBoundary=class ErrorBoundary extends a.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){"function"==typeof this.props.onError?this.props.onError(e):setTimeout(()=>{throw e})}render(){return this.state.error?void 0===this.props.fallback?(0,n.jsx)(i.M,{type:"httpError"}):this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}}},1819:(e,t,r)=>{r.d(t,{M:()=>s});var n=r(9449),i=r(73729),a=r(75177);let o={404:"Didn\u2019t find anything here!",500:"Looks like something went wrong!"};function s({httpStatus:e,type:t}){let r="fetchError"===t?"Looks like network is down!":o[e||500];return(0,n.jsxs)(i.A,{as:"h1",tabIndex:-1,sx:{display:"flex",flexDirection:"column",minWidth:"100%",minHeight:"100%",alignItems:"center",justifyContent:"center"},children:["Error",e?(0,n.jsx)(a.A,{sx:{fontSize:"144px",fontWeight:"bold",lineHeight:1},children:e}):null,(0,n.jsx)(a.A,{sx:{fontSize:4,pt:2},children:r})]})}try{s.displayName||(s.displayName="ErrorPage")}catch{}},23235:(e,t,r)=>{r.d(t,{c:()=>m});var n=r(9449),i=r(55293),a=r(36165),o=r(45588),s=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,a]=(0,i.useState)({location:t.location});return(0,c.m)(()=>t.listen(a),[t]),(0,n.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),p=r(51261),h=r(75014);function m({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:m}){let f=i.useRef(),x=globalThis.window;f.current||(f.current=x?(0,p.z)({window:x}):(0,o.sC)({initialEntries:[{pathname:"/"}]}));let g=f.current,b=(0,h.w8)(m);return(0,n.jsx)(a.U,{appName:e,wasServerRendered:l,children:(0,n.jsx)(s.Q,{history:g,routes:[],children:(0,n.jsxs)(d,{history:g,children:[(0,n.jsx)(r,{...t.props,...b}),(0,n.jsx)(u.h,{ssrError:c})]})})})}try{m.displayName||(m.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var n=r(9449),i=r(39595),a=r(34613),o=r(55293),s=r(23581),l=r(79461),c=r(51528);function d(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:a.createRoot,hydrateRoot:a.hydrateRoot};s.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,i=await this.getReactNode(t),l=(0,n.jsx)(o.StrictMode,{children:i});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87358,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:n,lineno:i,colno:a}=e,o=`${t} at ${r} (${n}:${i}:${a})`;return t=" ",o}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([i.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([i.aC],ReactBaseElement.prototype,"ssrError",void 0),d([i.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_primer_react_lib-esm_Heading_Heading_js-node_modules_primer_react_lib-es-cdb604","vendors-node_modules_primer_behaviors_dist_esm_anchored-position_js-node_modules_primer_react-e8fb0e","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(47925)),e.O()}]);
//# sourceMappingURL=internal-api-insights-4672b8a31b07.js.map