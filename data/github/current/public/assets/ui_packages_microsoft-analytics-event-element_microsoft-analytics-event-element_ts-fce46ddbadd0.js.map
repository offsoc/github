{"version":3,"file":"chunk-ui_packages_microsoft-analytics-event-element_microsoft-analytics-event-element_ts-xxxxxxxxxxxx.js","mappings":"kmBAIA,IAAMA,EAAqB,CAEzBC,SAAU,GACVC,MAAO,IACPC,QAAS,GACX,E,IAkBE,cAfK,yCAAMC,uCAAuCC,YAQlD,MAAMC,mBAAoB,CACF,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,KAE1B,C,0GAAA,IAAI,CAAEC,EAAAA,GAAAA,IAAAA,CAAN,IAAI,CAER,C,8BAEA,S,mIAAA,O,CA0CF,EA1CE,aACE,IAAMC,EAAuC,CAC3CC,SAAUV,CAAkB,CAAC,IAAI,CAACU,QAAQ,CAAC,CAC3CC,KAAMC,OAAOC,QAAQ,CAACC,QAAQ,CAC9BC,IAAKH,OAAOC,QAAQ,CAACG,IAAI,EAGvB,CAAC,WAAY,QAAQ,CAACC,QAAQ,CAAC,IAAI,CAACP,QAAQ,GAC9CD,CAAAA,EAAgBS,UAAU,CAAG,CAC3BC,SAAU,CACRC,kBAAmB,IAAI,CAACC,WAAW,CACnCC,UAAW,CACTC,GAAI,IAAI,CAACC,OAAO,CAChBC,OAAQ,CACN,CACEC,MAAO,IAAI,CAACC,YAAY,CACxBC,IAAK,IAAI,CAACC,KAAK,CACf,GAAI,IAAI,CAACC,UAAU,EAAI,CAACC,QAAS,IAAI,CAACD,UAAU,CAAC,EAEpD,EAEHE,SAAU,CAAC,CACb,CACF,GAGoB,YAAlB,IAAI,CAACtB,QAAQ,EACfD,CAAAA,EAAgBS,UAAU,CAAG,CAC3BC,SAAU,CACRc,YAAa,IAAI,CAACN,YAAY,CAC9BO,cAAe,CAAC,EAAE,IAAI,CAACP,YAAY,CAAC,iBAAiB,CAAC,CACtDQ,WAAY,IAAI,CAACX,OAAO,CAE5B,GAGF,IAAMY,EAAiD,CACrDC,OAAQC,SAASC,QAAQ,EAG3BC,CAAAA,EAAAA,EAAAA,EAAAA,EAAgB/B,EAAiB2B,EACnC,C,GAvDCK,EAAAA,EAAIA,C,CADMrC,+BAAAA,SAAAA,CAAAA,WAAAA,KAAAA,G,GAEVqC,EAAAA,EAAIA,C,CAFMrC,+BAAAA,SAAAA,CAAAA,cAAAA,KAAAA,G,GAGVqC,EAAAA,EAAIA,C,CAHMrC,+BAAAA,SAAAA,CAAAA,UAAAA,KAAAA,G,GAIVqC,EAAAA,EAAIA,C,CAJMrC,+BAAAA,SAAAA,CAAAA,eAAAA,KAAAA,G,GAKVqC,EAAAA,EAAIA,C,CALMrC,+BAAAA,SAAAA,CAAAA,aAAAA,KAAAA,G,GAMVqC,EAAAA,EAAIA,C,CANMrC,+BAAAA,SAAAA,CAAAA,QAAAA,KAAAA,GAAAA,+BAAAA,EAAAA,CADZsC,EAAAA,EAAUA,C,CACEtC,+B","sources":["ui/packages/microsoft-analytics-event-element/microsoft-analytics-event-element.ts"],"sourcesContent":["import {controller, attr} from '@github/catalyst'\nimport type {PageActionEventType, PageActionPropertiesType} from '@github-ui/microsoft-analytics'\nimport {trackPageAction, waitForInitialization} from '@github-ui/microsoft-analytics'\n\nconst MS_EVENT_BEHAVIORS = {\n  // defined by Microsoft's IDEAs Web Instrumentation Guidance\n  purchase: 87,\n  trial: 200,\n  contact: 162,\n}\n\n@controller\nexport class MicrosoftAnalyticsEventElement extends HTMLElement {\n  @attr behavior: 'purchase' | 'trial' | 'contact'\n  @attr accountType: 'new' | 'existing'\n  @attr orderId: string\n  @attr productTitle: string\n  @attr periodType: 'month' | 'year' | 'free'\n  @attr seats: number\n\n  async connectedCallback() {\n    const isInitialized = await waitForInitialization()\n    if (isInitialized) {\n      this.#sendEvent()\n    }\n  }\n\n  #sendEvent() {\n    const pageActionEvent = <PageActionEventType>{\n      behavior: MS_EVENT_BEHAVIORS[this.behavior],\n      name: window.location.pathname,\n      uri: window.location.href,\n    }\n\n    if (['purchase', 'trial'].includes(this.behavior)) {\n      pageActionEvent.properties = {\n        pageTags: {\n          gitHubAccountType: this.accountType,\n          orderInfo: {\n            id: this.orderId,\n            lnItms: [\n              {\n                title: this.productTitle,\n                qty: this.seats,\n                ...(this.periodType && {prdType: this.periodType}),\n              },\n            ],\n          },\n          metaTags: {},\n        },\n      }\n    }\n\n    if (this.behavior === 'contact') {\n      pageActionEvent.properties = {\n        pageTags: {\n          mkto_progid: this.productTitle,\n          mkto_progname: `${this.productTitle}-ContactSalesForm`,\n          mkto_ordid: this.orderId,\n        },\n      }\n    }\n\n    const pageActionProperties = <PageActionPropertiesType>{\n      refUri: document.referrer,\n    }\n\n    trackPageAction(pageActionEvent, pageActionProperties)\n  }\n}\n"],"names":["MS_EVENT_BEHAVIORS","purchase","trial","contact","MicrosoftAnalyticsEventElement","HTMLElement","connectedCallback","waitForInitialization","sendEvent","pageActionEvent","behavior","name","window","location","pathname","uri","href","includes","properties","pageTags","gitHubAccountType","accountType","orderInfo","id","orderId","lnItms","title","productTitle","qty","seats","periodType","prdType","metaTags","mkto_progid","mkto_progname","mkto_ordid","pageActionProperties","refUri","document","referrer","trackPageAction","attr","controller"],"sourceRoot":""}