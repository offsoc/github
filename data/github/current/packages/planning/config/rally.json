{
  "version": 2,
  "description": "Memex Project Items Benchmark for Rally",
  "indices": [
    {
      "name": "memex-project-items",
      "body": null
    }
  ],
  "corpora": [
    {
      "name": "memex-project-items",
      "documents": [
        {
          "source-file": null,
          "document-count": null,
          "uncompressed-bytes": null,
          "includes-action-and-meta-data": true
        }
      ]
    }
  ],
  "schedule": [
    {
      "operation": {
        "operation-type": "delete-index"
      }
    },
    {
      "operation": {
        "operation-type": "create-index"
      }
    },
    {
      "operation": {
        "operation-type": "cluster-health",
        "request-params": {
          "wait_for_status": "yellow"
        },
        "retry-until-success": true
      }
    },
    {
      "operation": {
        "operation-type": "bulk",
        "bulk-size": 500
      },
      "clients": 8
    },
    {
      "operation": {
        "name": "01-scroll-all",
        "operation-type": "paginated-search",
        "results-per-page": 10,
        "pages": 3,
        "cache": false,
        "response-compression-enabled": false,
        "body": {
          "query": {
            "match_all": {}
          },
          "sort": [
            {
              "priority": "desc"
            }
          ]
        },
        "detailed-results": true,
        "assertions": [
          {
            "property": "hits",
            "condition": ">",
            "value": 0
          }
        ]
      },
      "clients": 8,
      "iterations": 1,
      "target-throughput": 100
    },
    {
      "operation": {
        "name": "02-filter-current-iteration",
        "operation-type": "paginated-search",
        "results-per-page": 10,
        "pages": 3,
        "cache": false,
        "response-compression-enabled": false,
        "body": {
          "query": {
            "nested": {
              "path": "field_values",
              "query": {
                "range": {
                  "field_values.iteration_value.start_date": {
                    "gte": "now/w",
                    "lte": "now+1w/w"
                  }
                }
              }
            }
          },
          "sort": [
            {
              "priority": "desc"
            }
          ]
        },
        "detailed-results": true,
        "assertions": [
          {
            "property": "hits",
            "condition": ">",
            "value": 0
          }
        ]
      },
      "clients": 8,
      "iterations": 1,
      "target-throughput": 100
    },
    {
      "operation": {
        "name": "03-filter-open-issues",
        "operation-type": "paginated-search",
        "results-per-page": 10,
        "pages": 3,
        "cache": false,
        "response-compression-enabled": false,
        "body": {
          "query": {
            "bool": {
              "must": [
                {
                  "term": {
                    "content.type": {
                      "value": "Issue"
                    }
                  }
                },
                {
                  "term": {
                    "content.state": {
                      "value": "open"
                    }
                  }
                }
              ]
            }
          },
          "sort": [
            {
              "priority": "desc"
            }
          ]
        },
        "detailed-results": true,
        "assertions": [
          {
            "property": "hits",
            "condition": ">",
            "value": 0
          }
        ]
      },
      "clients": 8,
      "iterations": 1,
      "target-throughput": 100
    },
    {
      "operation": {
        "name": "04-filter-assigned-to-user",
        "operation-type": "paginated-search",
        "results-per-page": 10,
        "pages": 3,
        "cache": false,
        "response-compression-enabled": false,
        "body": {
          "query": {
            "nested": {
              "path": "field_values",
              "query": {
                "match": {
                  "field_values.assignees_value": "lerebear"
                }
              }
            }
          },
          "sort": [
            {
              "priority": "desc"
            }
          ]
        },
        "detailed-results": true,
        "assertions": [
          {
            "property": "hits",
            "condition": ">",
            "value": 0
          }
        ]
      },
      "clients": 8,
      "iterations": 1,
      "target-throughput": 100
    },
    {
      "operation": {
        "name": "05-full-text-search-titles",
        "operation-type": "paginated-search",
        "results-per-page": 10,
        "pages": 3,
        "cache": false,
        "response-compression-enabled": false,
        "body": {
          "query": {
            "nested": {
              "path": "field_values",
              "query": {
                "fuzzy": {
                  "field_values.title_value": {
                    "value": "Romeo"
                  }
                }
              }
            }
          },
          "sort": [
            {
              "priority": "desc"
            }
          ]
        },
        "detailed-results": true,
        "assertions": [
          {
            "property": "hits",
            "condition": ">",
            "value": 0
          }
        ]
      },
      "clients": 8,
      "iterations": 1,
      "target-throughput": 100
    }
  ]
}
