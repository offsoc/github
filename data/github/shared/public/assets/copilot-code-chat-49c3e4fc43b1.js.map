{"version":3,"file":"copilot-code-chat-xxxxxxxxxxxx.js","mappings":"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","sources":["ui/packages/assert-data-present/assert-data-present.ts","ui/packages/copilot-chat/utils/copilot-chat-events.ts","ui/packages/copilot-chat/utils/copilot-chat-types.ts","ui/packages/copilot-code-chat/diff-view/rails/__generated__/CopilotDiffChatPartial_DiffChatQuery.graphql.ts","ui/packages/copilot-code-chat/diff-view/rails/__generated__/InjectedDiffEntries_DiffEntryQuery.graphql.ts","ui/packages/copilot-code-chat/diff-view/rails/__generated__/InjectedDiffEntries_PullRequestFragment.graphql.ts","ui/packages/copilot-code-chat/diff-view/rails/diff-selection-event.ts","ui/packages/copilot-code-chat/diff-view/rails/CopilotDiffEntryElement.tsx","ui/packages/copilot-code-chat/diff-view/shared/DiffEntryMenuItems.tsx","ui/packages/copilot-code-chat/diff-view/shared/DiffEntryMenuItems.module.css","ui/packages/copilot-code-chat/diff-view/shared/DiffLinesAskCopilotButton.tsx","ui/packages/copilot-code-chat/diff-view/rails/DiffLinesMenu.module.css","ui/packages/copilot-code-chat/diff-view/rails/DiffLinesMenu.tsx","ui/packages/use-observe-selector/use-observe-selector.ts","ui/packages/copilot-code-chat/diff-view/rails/use-is-focus-within-element.ts","ui/packages/copilot-code-chat/diff-view/rails/use-active-diff-lines.ts","ui/packages/copilot-code-chat/diff-view/rails/InjectedDiffEntries.tsx","ui/packages/copilot-code-chat/diff-view/rails/CopilotDiffChatPartial.tsx","ui/packages/get-scrollable-parent/get-scrollable-parent.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/react-core/deferred-registry.ts","ui/packages/react-core/react-partial-anchor.ts","ui/packages/react-core/react-partial-registry.ts","ui/packages/react-core/ReactPartialElement.tsx","ui/packages/react-core/register-partial.ts","ui/packages/react-profiling-mode/src/index.ts","ui/packages/safe-storage/session-storage.ts","ui/packages/soft-nav/states.ts","ui/packages/soft-nav/utils.ts","ui/packages/use-latest-commit/use-latest-commit.ts","ui/packages/copilot-code-chat/AskCopilotButton.module.css","ui/packages/copilot-code-chat/AskCopilotButton.tsx","ui/packages/portal-tooltip/ControlledTooltip.tsx","ui/packages/portal-tooltip/PortalTooltip.tsx","ui/packages/portal-tooltip/hooks/UsePortalTooltip.tsx","ui/packages/react-core/ErrorBoundary.tsx","ui/packages/react-core/ErrorPage.tsx","ui/packages/react-core/PartialRouter.tsx","ui/packages/react-core/PartialEntry.tsx","ui/packages/react-core/ReactBaseElement.tsx"],"sourcesContent":["export const errorMessage = 'Failed to load page data.'\n\nexport function assertDataPresent<T>(data: T): asserts data is NonNullable<T> {\n  if (data === undefined || data === null) {\n    throw new Error(errorMessage)\n  }\n}\n","import type {CopilotChatEventPayload, CopilotChatReference} from './copilot-chat-types'\n\nexport class OpenCopilotChatEvent extends Event {\n  declare payload: CopilotChatEventPayload\n  constructor(payload: CopilotChatEventPayload) {\n    super('open-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.payload = payload\n  }\n}\n\nexport class SearchCopilotEvent extends Event {\n  declare content: string\n  declare repoNwo: string\n  constructor(content: string, repoNwo: string) {\n    super('search-copilot-chat', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.content = content\n    this.repoNwo = repoNwo\n  }\n}\n\nexport class AddCopilotChatReferenceEvent extends Event {\n  declare reference: CopilotChatReference\n  declare openPanel?: boolean\n  declare id?: string\n  constructor(reference: CopilotChatReference, openPanel: boolean = false, id?: string) {\n    super('add-copilot-chat-reference', {\n      bubbles: false,\n      cancelable: true,\n    })\n    this.reference = reference\n    this.openPanel = openPanel\n    this.id = id\n  }\n}\n\nexport class SymbolChangedEvent extends Event {\n  declare context: CopilotChatReference\n  constructor(context: CopilotChatReference) {\n    super('symbol-changed', {\n      bubbles: false,\n      cancelable: true,\n    })\n\n    this.context = context\n  }\n}\n\ndeclare global {\n  interface WindowEventMap {\n    'open-copilot-chat': OpenCopilotChatEvent\n    'add-copilot-chat-reference': AddCopilotChatReferenceEvent\n    'search-copilot-chat': SearchCopilotEvent\n    'symbol-changed': SymbolChangedEvent\n  }\n}\n\nexport function publishOpenCopilotChat(payload: CopilotChatEventPayload): void {\n  window.dispatchEvent(new OpenCopilotChatEvent(payload))\n}\n\nexport function publishAddCopilotChatReference(\n  payload: CopilotChatReference,\n  openPanel: boolean = false,\n  id?: string,\n): void {\n  window.dispatchEvent(new AddCopilotChatReferenceEvent(payload, openPanel, id))\n}\n\nexport function subscribeOpenCopilotChat(listener: (e: OpenCopilotChatEvent) => void): () => void {\n  window.addEventListener('open-copilot-chat', listener)\n\n  return () => {\n    window.removeEventListener('open-copilot-chat', listener)\n  }\n}\n\nexport function subscribeAddCopilotChatReference(listener: (e: AddCopilotChatReferenceEvent) => void): () => void {\n  window.addEventListener('add-copilot-chat-reference', listener)\n  return () => {\n    window.removeEventListener('add-copilot-chat-reference', listener)\n  }\n}\n\nexport function subscribeSearchCopilot(listener: (e: SearchCopilotEvent) => void): () => void {\n  window.addEventListener('search-copilot-chat', listener)\n  return () => {\n    window.removeEventListener('search-copilot-chat', listener)\n  }\n}\n\nexport function subscribeSymbolChanged(listener: (e: SymbolChangedEvent) => void): () => void {\n  window.addEventListener('symbol-changed', listener)\n\n  return () => {\n    window.removeEventListener('symbol-changed', listener)\n  }\n}\n","import type {SafeHTMLString} from '@github-ui/safe-html'\n\nexport type TopicItem = {\n  key: string\n  actionItem: JSX.Element\n}\n\nexport type CopilotChatRepo = {\n  id: number\n  name: string\n  ownerLogin: string\n  ownerType: 'User' | 'Organization'\n  readmePath?: string\n  description?: string\n  commitOID: string\n  ref: string\n  refInfo: {\n    name: string\n    type: 'branch' | 'tag'\n  }\n  visibility: string\n  languages?: Array<{name: string; percent: number}>\n}\n\nexport type CopilotChatPlan = Record<string, never>\n\nexport type CopilotChatOrg = {\n  id: string\n  login: string\n  avatarUrl: string\n}\n\nexport type CopilotChatThread = {\n  id: string\n  name: string\n  repoID?: number\n  currentReferences: CopilotChatReference[] | undefined\n  createdAt: string\n  updatedAt: string\n}\n\nexport type CopilotChatSuggestions = {\n  referenceType?: string\n  suggestions: GeneratedSuggestion[]\n}\n\nexport type GeneratedSuggestion = {\n  question: string\n  skill: string\n}\n\nexport type SkillExecution = {\n  slug: string\n  status: FunctionCalledStatus\n  arguments?: string\n  errorMessage?: string\n  references?: CopilotChatReference[]\n}\n\nexport type CopilotChatAgent = {\n  name: string\n  slug: string\n  avatarUrl: string\n  integrationUrl: string\n}\n\nexport type CopilotChatMessage = {\n  id: string\n  intent?: string\n  role: 'user' | 'assistant'\n  content?: string\n  createdAt: string\n  threadID: string\n  error?: ChatError\n  references: CopilotChatReference[] | null\n  skillExecutions?: SkillExecution[]\n  copilotAnnotations?: CopilotAnnotations\n  interrupted?: boolean\n  confirmations?: CopilotAgentConfirmation[] | null // confirmation from copilot/agent\n  clientConfirmations?: CopilotClientConfirmation[] | null // users response to agent confirmation\n  agentErrors?: CopilotAgentError[]\n}\n\nexport type CopilotAgentConfirmation = {\n  title: string\n  message: string\n  confirmation: object\n}\n\nexport type CopilotAgentError = {\n  type: string\n  code: string\n  message: string\n  identifier: string\n}\n\nexport type CopilotClientConfirmation = {\n  state: CopilotClientConfirmationState\n  confirmation: object\n}\n\nexport type CopilotClientConfirmationState = 'accepted' | 'dismissed'\n\nexport type CopilotAnnotations = {\n  CodeVulnerability?: CodeVulnerability[]\n}\n\ntype CodeVulnerability = {\n  startOffset: number\n  endOffset: number\n  details: CodeVulnerabilityDetails\n}\n\ntype CodeVulnerabilityDetails = {\n  type: string\n  uiType: string\n  description: string\n  uiDescription: string\n}\n\nexport type RepositoryReference = CopilotChatRepo & {\n  type: 'repository'\n}\n\nexport interface ReferenceHeaderInfo {\n  blobSize: string\n  displayName: string\n  isLfs: boolean\n  lineInfo: {truncatedLoc: number; truncatedSloc: number}\n  rawBlobUrl: string\n  viewable: boolean\n}\n\ntype APIResponseResource =\n  | {resourceType: 'Repository'; data: Omit<RepositoryAPIReference, 'type'>}\n  | {resourceType: 'Issue'; data: Omit<IssueAPIReference, 'type'>}\n  | {resourceType: 'Release'; data: Omit<ReleaseAPIReference, 'type'>}\n  | {resourceType: 'PullRequest'; data: Omit<PullRequestAPIReference, 'type'>}\n  | {resourceType: 'Commit'; data: Omit<CommitAPIReference, 'type'>}\n  | {resourceType: 'Topic'; data: Omit<TopicAPIReference, 'type'>}\n\nexport type APIResponseReference = APIResponseResource & {\n  type: 'api-response'\n  id: number\n  repo?: string\n}\n\nexport type FileReference = {\n  type: 'file' | 'file-v2'\n  url: string\n  path: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  languageName?: string\n  languageId?: number\n}\n\nexport type FileChangesReference = {\n  type: 'file-changes'\n  ref: string\n  path: string\n  url: string\n  commits: Array<{\n    oid: string\n    shortSha: string\n    message: string\n    createdAt: string\n    author: {\n      name: string\n      email: string\n      login: string\n    }\n    blameLines: Array<{\n      lineNo: number\n      text: string\n    }>\n  }>\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface FileReferenceDetails extends FileReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  range: LineRange\n  expandedRange: LineRange\n  headerInfo: ReferenceHeaderInfo\n}\n\nexport interface FileDiffReference {\n  type: 'file-diff'\n  id: string\n  url: string\n  base: SnippetReference | null // will be null if a file was 'added'\n  head: SnippetReference | null // will be null if a file was 'removed'\n  baseFile: FileReference | null // will be null if a file was 'added'\n  headFile: FileReference | null // will be null if a file was 'removed'\n  // user-selected, shown in location.hash, ex L1-R5\n  // won't be populated in the server props but should be present when calling CAPI\n  selectedRange?: {\n    start?: string\n    end?: string\n  }\n}\n\nexport interface FileDiffReferenceDetails extends FileDiffReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  expandedRange: LineRange\n}\n\nexport interface SnippetReference {\n  type: 'snippet'\n  url: string\n  path: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  range: LineRange\n  languageID?: number\n  languageName?: string\n  title?: string\n}\n\nexport interface SnippetReferenceDetails extends SnippetReference {\n  contents: string\n  highlightedContents: SafeHTMLString[]\n  repoIsOrgOwned: boolean\n  expandedRange: LineRange\n  headerInfo: ReferenceHeaderInfo\n}\n\nexport interface CommitReference {\n  type: 'commit'\n  oid: string\n  message: string\n  permalink: string\n  author: {\n    name: string\n    email: string\n    login: string\n  }\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface PullRequestReference {\n  type: 'pull-request'\n  title: string\n  url: string\n  commit?: string\n  authorLogin: string\n  repository: CopilotChatRepo\n}\n\nexport const TREE_COMPARISON_REFERENCE_TYPE = 'tree-comparison'\nexport interface TreeComparisonReference {\n  type: typeof TREE_COMPARISON_REFERENCE_TYPE\n  baseRepoId: number\n  headRepoId: number\n  baseRevision: string\n  headRevision: string\n  diffHunks: DiffHunk[]\n}\n\nexport interface DiffHunk {\n  type: 'diff-hunk'\n  changeReference: string\n  diff: string\n  fileName: string\n  headerContext: string\n}\n\nexport interface IssueReference {\n  type: 'issue'\n  id: number\n  number: number\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n  title?: string\n  body?: string\n  state?: string\n  authorLogin?: string\n  url?: string\n  assignees?: string[]\n  pullRequestUrl?: string\n}\n\nexport interface DiscussionReference {\n  type: 'discussion'\n  number: number\n  title: string\n  body: string\n  user: {\n    login: string\n  }\n  state: string\n  id: number\n  url: string\n  authorLogin: string\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n}\n\nexport interface ReleaseReference {\n  type: 'release'\n  name?: string\n  tagName?: string\n  url?: string\n  repository: {\n    id: number\n    name: string\n    owner: string\n  }\n  body?: string\n  isDraft: boolean\n  isPrerelease: boolean\n  authorLogin?: string\n  targetCommitish?: string\n}\n\nexport interface ReleaseAPIReference {\n  type: 'release.api'\n  name?: string\n  tag_name: string\n  html_url?: string\n}\n\nexport interface PullRequestAPIReference {\n  type: 'pull-request.api'\n  title?: string\n  html_url?: string\n  number: number\n  repo?: string\n}\n\nexport interface AlertReference {\n  type: 'alert.api'\n  number: number\n  repo?: string\n}\n\nexport interface IssueAPIReference {\n  type: 'issue.api'\n  title?: string\n  html_url: string\n  number: number\n  repo?: string\n  state: string\n}\n\nexport interface RepositoryAPIReference {\n  type: 'repository.api'\n  name: string\n  description?: string\n  html_url?: string\n}\n\nexport interface CommitAPIReference {\n  type: 'commit.api'\n  sha: string\n  commit: {\n    message?: string\n  }\n  html_url?: string\n}\n\nexport interface DiffAPIReference {\n  type: 'diff.api'\n}\n\nexport interface FileAPIReference {\n  type: 'file.api'\n}\n\nexport interface TopicAPIReference {\n  type: 'topic.api'\n  name: string\n  display_name?: string\n  short_description?: string\n}\n\nexport interface TextReference {\n  type: 'text'\n  text?: string\n}\n\nexport interface UnsupportedAPIReference {\n  type: 'unsupported'\n  text?: string\n}\n\nexport interface LineRange {\n  start: number\n  end: number\n}\n\nexport interface CodeNavSymbolReference {\n  type: 'symbol'\n  kind: 'codeNavSymbol'\n  name: string\n  languageID?: number\n  codeNavDefinitions?: CodeNavSymbol[]\n  codeNavReferences?: CodeReference[]\n  languageName?: string\n}\n\nexport interface CodeNavSymbolReferenceDetails extends CodeNavSymbolReference {\n  codeNavDefinitions?: CodeNavSymbolDetails[]\n  codeNavReferences?: CodeReferenceDetails[]\n}\n\nexport interface SuggestionSymbolReference {\n  type: 'symbol'\n  kind: 'suggestionSymbol'\n  name: string\n  languageID?: number\n  suggestionDefinitions?: SuggestionSymbol[]\n}\n\nexport interface SuggestionSymbolReferenceDetails extends SuggestionSymbolReference {\n  suggestionDefinitions?: SuggestionSymbolDetails[]\n}\n\nexport type DocsetReference = {\n  type: 'docset'\n  name: string\n  id: string\n  scopingQuery: string // TODO: is this the correct name for CAPI?\n  avatarUrl: string\n  // Docset references coming from previous threads in CAPI currently don't have their\n  // repos serialized.\n  repos?: string[]\n  description: string\n}\n\nexport type GitHubAgentReference = {\n  type: 'github.agent'\n  login: string\n  avatarURL: string\n}\n\nexport type WebSearchReference = {\n  type: 'web-search'\n  query: string\n  results: Array<{title: string; excerpt: string; url: string}>\n  status: string\n}\n\nexport type SupportDocumentReference = {\n  type: 'support-document'\n  query: string\n  results: Array<{title: string; content: string; url: string}>\n  status: string\n}\n\nexport type JobReference = {\n  type: 'job'\n  id: string\n  repoId: number\n  repoName: string\n  repoOwner: string\n}\n\nexport type PlanReference = {\n  type: 'plan'\n}\n\ntype CodeNavSymbol = {\n  ident: Range\n  extent: Range\n} & CodeSymbol\n\ntype SuggestionSymbol = {\n  identOffset?: ByteOffset\n  extentOffset?: ByteOffset\n} & CodeSymbol\n\ntype CodeSymbol = {\n  kind: string\n  fullyQualifiedName: string\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  path: string\n}\n\ntype CodeReference = {\n  ident: Range\n  repoID: number\n  repoOwner: string\n  repoName: string\n  ref: string\n  commitOID: string\n  path: string\n}\n\ntype SymbolDetails = {\n  repoIsOrgOwned: boolean\n  highlightedContents?: SafeHTMLString[]\n  range?: LineRange\n}\n\nexport type CodeNavSymbolDetails = CodeNavSymbol & SymbolDetails\nexport type SuggestionSymbolDetails = SuggestionSymbol & SymbolDetails\nexport type CodeReferenceDetails = CodeReference & SymbolDetails\n\ntype Range = {\n  start: Position\n  end: Position\n}\n\ntype Position = {\n  line: number\n  column: number\n}\n\ntype ByteOffset = {\n  start: number\n  end: number\n}\n\nexport type CopilotChatReference =\n  | FileReference\n  | FileChangesReference\n  | SnippetReference\n  | FileDiffReference\n  | RepositoryReference\n  | CodeNavSymbolReference\n  | SuggestionSymbolReference\n  | DocsetReference\n  | CommitReference\n  | PullRequestReference\n  | GitHubAgentReference\n  | WebSearchReference\n  | TreeComparisonReference\n  | IssueReference\n  | TextReference\n  | ReleaseReference\n  | DiscussionReference\n  | JobReference\n  | PlanReference\n  | ReleaseAPIReference\n  | PullRequestAPIReference\n  | AlertReference\n  | IssueAPIReference\n  | RepositoryAPIReference\n  | CommitAPIReference\n  | DiffAPIReference\n  | FileAPIReference\n  | TopicAPIReference\n  | APIResponseReference\n  | UnsupportedAPIReference\n\nexport type NumberedCopilotChatReference = CopilotChatReference & {n: number}\n\nexport type CopilotChatReferenceDetails = SnippetReferenceDetails\n\nexport type ReferenceDetails<TReference extends CopilotChatReference> = TReference extends SnippetReference\n  ? SnippetReferenceDetails\n  : TReference extends FileReference\n    ? FileReferenceDetails\n    : TReference extends CodeNavSymbolReference\n      ? CodeNavSymbolReferenceDetails\n      : TReference extends SuggestionSymbolReference\n        ? SuggestionSymbolReferenceDetails\n        : TReference extends FileDiffReference\n          ? FileDiffReferenceDetails\n          : unknown\n\ntype CopilotChatExplainEventPayload = {\n  intent: typeof CopilotChatIntents.explain\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatAskEventPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  references?: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatAskPrEventPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatExplainPrEventPayload = {\n  intent: typeof CopilotChatIntents.explainFileDiff\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatSuggestEventPayload = {\n  intent: typeof CopilotChatIntents.suggest\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\ntype CopilotChatReviewPrEventPayload = {\n  intent: typeof CopilotChatIntents.reviewPr\n  content: string\n  references: CopilotChatReference[]\n  completion: string\n  thread: CopilotChatThread\n  id?: string\n}\n\ntype CopilotChatStartConversationPayload = {\n  intent: typeof CopilotChatIntents.conversation\n  content: string\n  references: CopilotChatReference[]\n  id?: string\n}\n\nexport type CopilotChatEventPayload =\n  | CopilotChatExplainEventPayload\n  | CopilotChatAskEventPayload\n  | CopilotChatSuggestEventPayload\n  | CopilotChatAskPrEventPayload\n  | CopilotChatExplainPrEventPayload\n  | CopilotChatReviewPrEventPayload\n  | CopilotChatStartConversationPayload\n\nexport const CopilotChatIntents = {\n  explain: 'explain',\n  conversation: 'conversation',\n  suggest: 'suggest',\n  askDocs: 'ask-docs',\n  discussFileDiff: 'discuss-file-diff',\n  explainFileDiff: 'explain-file-diff',\n  reviewPr: 'review-pull-request',\n} as const\nexport type CopilotChatIntentsType = (typeof CopilotChatIntents)[keyof typeof CopilotChatIntents]\n\ninterface ChatErrorBase {\n  type: MessageStreamingErrorType | 'basic'\n  isError: boolean\n  message?: string\n  details?: unknown\n}\n\ninterface BasicChatError extends ChatErrorBase {\n  type: 'basic'\n  isError: true\n}\n\ninterface AgentError<TType extends MessageStreamingErrorType, TDetails> extends ChatErrorBase {\n  type: TType\n  isError: true\n  details: TDetails\n}\n\nexport type AgentUnauthorizedChatError = AgentError<'agentUnauthorized', NotAuthorizedForAgentErrorPayload>\nexport type AgentRequestChatError = AgentError<'agentRequest', AppAgentRequestErrorPayload>\nexport type AgentChatError = AgentUnauthorizedChatError | AgentRequestChatError\n\nexport type ChatError = BasicChatError | AgentChatError\n\nexport type BlackbirdSymbol = {\n  fully_qualified_name: string\n  kind: string\n  ident_start: number\n  ident_end: number\n  extent_start: number\n  extent_end: number\n}\n\nexport interface BlackbirdSuggestion {\n  kind: string\n  query: string\n  repository_nwo: string\n  language_id: number\n  path: string\n  repository_id: number\n  commit_sha: string\n  line_number: number\n  symbol: BlackbirdSymbol | null\n}\n\nexport type SuggestionsResponse = {\n  suggestions: BlackbirdSuggestion[]\n  queryErrors: string[]\n  failed: boolean\n}\n\nexport type KnowledgeBasesResponse = {\n  knowledgeBases: Docset[]\n  administratedCopilotEnterpriseOrganizations: CopilotChatOrg[] | null\n}\n\nexport interface Docset {\n  id: string\n  name: string\n  description: string\n  createdByID: number\n  ownerID: number\n  ownerLogin: string\n  ownerType: string\n  visibility: string\n  scopingQuery: string\n  repos: string[]\n  sourceRepos?: SourceRepo[]\n  visibleOutsideOrg: boolean\n  iconHtml?: SafeHTMLString\n  avatarUrl: string\n  adminableByUser: boolean\n  /**\n   * Orgs which own at least one repo in the docset but that the current user is not currently SSO'd into\n   */\n  protectedOrganizations: string[]\n}\n\nexport interface RepoData {\n  databaseId: number | null | undefined\n  name: string\n  nameWithOwner: string\n  isInOrganization: boolean\n  shortDescriptionHTML: string\n  paths?: string[]\n  owner: {\n    databaseId: number | null | undefined\n    avatarUrl: string\n    login: string\n  }\n}\n\nexport interface DocsetRepo extends RepoData {\n  paths: string[]\n}\n\nexport interface SourceRepo {\n  id: number\n  ownerID: number\n  paths: string[]\n}\n\nexport type MessageStreamingResponse =\n  | MessageStreamingResponseContent\n  | MessageStreamingResponseError\n  | MessageStreamingResponseComplete\n  | MessageStreamingResponseDebug\n  | MessageStreamingResponseFunctionCall\n  | MessageStreamingResponseConfirmation\n  | MessageStreamingResponseAgentError\n\nexport type MessageStreamingResponseContent = {\n  type: 'content'\n  body: string\n}\n\nexport type MessageStreamingResponseDebug = {\n  type: 'debug'\n  body: string\n}\n\nexport const MESSAGE_STREAMING_ERROR_TYPES = [\n  'exception',\n  'filtered',\n  'contentTooLarge',\n  'rateLimit',\n  'agentUnauthorized',\n  'agentRequest',\n  'networkError',\n  'multipleAgentsAttempt',\n] as const\n\ntype MessageStreamingErrorTypes = typeof MESSAGE_STREAMING_ERROR_TYPES\nexport type MessageStreamingErrorType = MessageStreamingErrorTypes[number]\n\nexport type MessageStreamingResponseError = {\n  type: 'error'\n  errorType: MessageStreamingErrorType\n  description: string\n}\n\nexport type MessageStreamingResponseComplete = {\n  type: 'complete'\n  id: string\n  turnID: string\n  createdAt: string\n  intent: string\n  references: CopilotChatReference[] | null\n  copilotAnnotations?: CopilotAnnotations\n}\n\nexport type MessageStreamingResponseFunctionCall = {\n  arguments: string\n  type: 'functionCall'\n  name: string\n  status: FunctionCalledStatus\n  errorMessage: string\n  references: CopilotChatReference[]\n}\n\nexport type MessageStreamingResponseConfirmation = {\n  type: 'confirmation'\n  title: string\n  message: string\n  confirmation: object\n}\n\nexport type MessageStreamingResponseAgentError = {\n  type: 'agentError'\n  agentErrorType: string\n  code: string\n  message: string\n  identifier: string\n}\n\nexport type FunctionArguments =\n  | BingSearchArguments\n  | FilePathSearchArguments\n  | SymbolSearchArguments\n  | CodeSearchArguments\n  | CreateIssueArguments\n  | GetIssueArguments\n  | GetPullRequestCommitsArguments\n  | GetCommitArguments\n  | GetAlertArguments\n  | GetReleaseArguments\n  | GetRepoArguments\n  | JobLogsArguments\n  | GetDiffArguments\n  | GetDiffByRangeArguments\n  | KnowledgeBaseSearchArguments\n  | GetFileArguments\n  | GetFileChangesArguments\n  | GetDiscussionArguments\n  | GetPullRequestArguments\n  | PlanArguments\n  | GitHubAPIArguments\n  | SupportSearchArguments\n\nexport type BingSearchArguments = {kind: 'bing-search'; query: string; freshness?: string}\nexport type SupportSearchArguments = {kind: 'support-search'; rawUserQuery: string}\nexport type CodeSearchArguments = {kind: 'codesearch'; query: string; scopingQuery: string}\nexport type KnowledgeBaseSearchArguments = {kind: 'kb-search'; query: string; kbID: string}\nexport type FilePathSearchArguments = {kind: 'pathsearch'; filename: string; scopingQuery: string}\nexport type GetFileArguments = {kind: 'getfile'; repo: string; path: string; ref?: string}\nexport type GetFileChangesArguments = {kind: 'getfilechanges'; repo: string; path: string; ref: string; max?: number}\nexport type SymbolSearchArguments = {kind: 'show-symbol-definition'; symbolName: string; scopingQuery: string}\nexport type CreateIssueArguments = {\n  kind: 'githubissuecreate'\n  repo: string\n  assignees: string[]\n  labels: string[]\n  title: string\n  body: string\n}\nexport type GetIssueArguments = {kind: 'getissue'; issueNumber: number; repo: string}\nexport type GetAlertArguments = {kind: 'getalert'; url: string}\nexport type GetPullRequestCommitsArguments = {kind: 'getprcommits'; pullRequestNumber: number; repo: string}\nexport type GetCommitArguments = {kind: 'getcommit'; commitish: number; repo: string}\nexport type GetReleaseArguments = {kind: 'getrelease'; repo: string; tagName?: string}\nexport type GetRepoArguments = {kind: 'getrepo'; repo: string}\nexport type JobLogsArguments = {\n  kind: 'get-actions-job-logs'\n  repo: string\n  jobId?: number\n  pullRequestNumber?: number\n  runId?: number\n  workflowPath?: string\n}\nexport type GetDiffArguments = {\n  kind: 'getdiff'\n  baseRepoId: number\n  headRepoId: number\n  baseRevision: string\n  headRevision: string\n}\nexport type GetDiffByRangeArguments = {kind: 'get-diff-by-range'; repo: string; range: string}\nexport type GetDiscussionArguments = {kind: 'getdiscussion'; repo: string; discussionNumber: number; owner: string}\nexport type GetPullRequestArguments = {kind: 'getpullrequest'; pullRequestNumber: number; repo: string}\nexport type PlanArguments = {kind: 'planskill'; user_query: string}\nexport type GitHubAPIArguments = {\n  kind: 'get-github-data'\n  endpoint: string\n  repo: string\n  endpointDescription?: string\n  task?: string\n}\n\nexport const SUPPORTED_FUNCTIONS = [\n  'bing-search',\n  'codesearch',\n  'kb-search',\n  'pathsearch',\n  'show-symbol-definition',\n  'getissue',\n  'getprcommits',\n  'getcommit',\n  'getrelease',\n  'getrepo',\n  'getdiff',\n  'get-diff-by-range',\n  'getfile',\n  'getfilechanges',\n  'getdiscussion',\n  'get-actions-job-logs',\n  'getpullrequest',\n  'getalert',\n  'planskill',\n  'get-github-data',\n  'support-search',\n]\n\nexport type FunctionCalledStatus = 'completed' | 'started' | 'error' | 'unsupported'\n\nexport type NotAuthorizedForAgentErrorPayload = {\n  authorize_url: string\n  client_id: string\n  name: string\n  avatar_url: string\n  slug: string\n  description: string\n}\n\nexport type AppAgentRequestErrorPayload = {\n  type: string\n  code: string\n  identifier: string\n  message: string\n}\n\nexport type CopilotChatMode = 'immersive' | 'assistive'\n\nexport type SuccessfulAPIResult<T> = {\n  status: number\n  ok: true\n  payload: T\n}\n\nexport type FailedAPIResult = {\n  status: number\n  ok: false\n  error: string\n}\n\nexport type APIResult<T> = SuccessfulAPIResult<T> | FailedAPIResult\n\ntype SuccessfulAPIStreamingResult = {\n  status: number\n  ok: true\n  response: Response\n}\n\nexport type APIStreamingResult = SuccessfulAPIStreamingResult | FailedAPIResult\n\nexport interface CopilotChatPayload {\n  agentsPath: string\n  apiURL: string\n  currentUserLogin: string\n  customInstructions?: string\n  renderKnowledgeBases?: boolean\n  optedInToUserFeedback: boolean\n  renderAttachKnowledgeBaseHerePopover?: boolean\n  renderKnowledgeBaseAttachedToChatPopover?: boolean\n  reviewLab: boolean\n}\n","/**\n * @generated SignedSource<<b184b7a7bc99cd11b886288deb768ac1>>\n * @relayHash 7736b1732f9c488c7389790a5f795867\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\n// @relayRequestID 7736b1732f9c488c7389790a5f795867\n\nimport { ConcreteRequest, Query } from 'relay-runtime';\nimport { FragmentRefs } from \"relay-runtime\";\nexport type CopilotDiffChatPartial_DiffChatQuery$variables = {\n  endOid: string;\n  prNumber: number;\n  repoName: string;\n  repoOwner: string;\n  startOid: string;\n};\nexport type CopilotDiffChatPartial_DiffChatQuery$data = {\n  readonly repository: {\n    readonly pullRequest: {\n      readonly \" $fragmentSpreads\": FragmentRefs<\"DiffHeaderAskCopilotButton_data\" | \"InjectedDiffEntries_PullRequestFragment\">;\n    } | null | undefined;\n  } | null | undefined;\n};\nexport type CopilotDiffChatPartial_DiffChatQuery = {\n  response: CopilotDiffChatPartial_DiffChatQuery$data;\n  variables: CopilotDiffChatPartial_DiffChatQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"endOid\"\n},\nv1 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"prNumber\"\n},\nv2 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"repoName\"\n},\nv3 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"repoOwner\"\n},\nv4 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"startOid\"\n},\nv5 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"name\",\n    \"variableName\": \"repoName\"\n  },\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"owner\",\n    \"variableName\": \"repoOwner\"\n  }\n],\nv6 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"number\",\n    \"variableName\": \"prNumber\"\n  }\n],\nv7 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"id\",\n  \"storageKey\": null\n},\nv8 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"name\",\n  \"storageKey\": null\n},\nv9 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"__typename\",\n  \"storageKey\": null\n},\nv10 = {\n  \"alias\": null,\n  \"args\": null,\n  \"concreteType\": null,\n  \"kind\": \"LinkedField\",\n  \"name\": \"owner\",\n  \"plural\": false,\n  \"selections\": [\n    (v9/*: any*/),\n    {\n      \"alias\": null,\n      \"args\": null,\n      \"kind\": \"ScalarField\",\n      \"name\": \"login\",\n      \"storageKey\": null\n    },\n    (v7/*: any*/)\n  ],\n  \"storageKey\": null\n},\nv11 = [\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"kind\": \"ScalarField\",\n    \"name\": \"oid\",\n    \"storageKey\": null\n  },\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"concreteType\": \"Repository\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"repository\",\n    \"plural\": false,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"databaseId\",\n        \"storageKey\": null\n      },\n      (v8/*: any*/),\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"url\",\n        \"storageKey\": null\n      },\n      (v10/*: any*/),\n      (v7/*: any*/)\n    ],\n    \"storageKey\": null\n  },\n  (v7/*: any*/)\n],\nv12 = [\n  {\n    \"kind\": \"Literal\",\n    \"name\": \"first\",\n    \"value\": 10\n  }\n],\nv13 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"path\",\n  \"storageKey\": null\n},\nv14 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"pathDigest\",\n  \"storageKey\": null\n},\nv15 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"rawUrl\",\n  \"storageKey\": null\n},\nv16 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"isBinary\",\n  \"storageKey\": null\n},\nv17 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"isSubmodule\",\n  \"storageKey\": null\n},\nv18 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"isLfsPointer\",\n  \"storageKey\": null\n},\nv19 = [\n  (v13/*: any*/),\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"kind\": \"ScalarField\",\n    \"name\": \"size\",\n    \"storageKey\": null\n  }\n],\nv20 = {\n  \"alias\": null,\n  \"args\": null,\n  \"concreteType\": \"TreeEntry\",\n  \"kind\": \"LinkedField\",\n  \"name\": \"oldTreeEntry\",\n  \"plural\": false,\n  \"selections\": (v19/*: any*/),\n  \"storageKey\": null\n},\nv21 = {\n  \"alias\": null,\n  \"args\": null,\n  \"concreteType\": \"TreeEntry\",\n  \"kind\": \"LinkedField\",\n  \"name\": \"newTreeEntry\",\n  \"plural\": false,\n  \"selections\": (v19/*: any*/),\n  \"storageKey\": null\n};\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [\n      (v0/*: any*/),\n      (v1/*: any*/),\n      (v2/*: any*/),\n      (v3/*: any*/),\n      (v4/*: any*/)\n    ],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"CopilotDiffChatPartial_DiffChatQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v5/*: any*/),\n        \"concreteType\": \"Repository\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"repository\",\n        \"plural\": false,\n        \"selections\": [\n          {\n            \"alias\": null,\n            \"args\": (v6/*: any*/),\n            \"concreteType\": \"PullRequest\",\n            \"kind\": \"LinkedField\",\n            \"name\": \"pullRequest\",\n            \"plural\": false,\n            \"selections\": [\n              {\n                \"args\": null,\n                \"kind\": \"FragmentSpread\",\n                \"name\": \"InjectedDiffEntries_PullRequestFragment\"\n              },\n              {\n                \"args\": null,\n                \"kind\": \"FragmentSpread\",\n                \"name\": \"DiffHeaderAskCopilotButton_data\"\n              }\n            ],\n            \"storageKey\": null\n          }\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"type\": \"Query\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [\n      (v3/*: any*/),\n      (v2/*: any*/),\n      (v1/*: any*/),\n      (v4/*: any*/),\n      (v0/*: any*/)\n    ],\n    \"kind\": \"Operation\",\n    \"name\": \"CopilotDiffChatPartial_DiffChatQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v5/*: any*/),\n        \"concreteType\": \"Repository\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"repository\",\n        \"plural\": false,\n        \"selections\": [\n          {\n            \"alias\": null,\n            \"args\": (v6/*: any*/),\n            \"concreteType\": \"PullRequest\",\n            \"kind\": \"LinkedField\",\n            \"name\": \"pullRequest\",\n            \"plural\": false,\n            \"selections\": [\n              (v7/*: any*/),\n              {\n                \"alias\": null,\n                \"args\": null,\n                \"concreteType\": \"Repository\",\n                \"kind\": \"LinkedField\",\n                \"name\": \"repository\",\n                \"plural\": false,\n                \"selections\": [\n                  (v8/*: any*/),\n                  (v10/*: any*/),\n                  (v7/*: any*/)\n                ],\n                \"storageKey\": null\n              },\n              {\n                \"alias\": null,\n                \"args\": [\n                  {\n                    \"kind\": \"Variable\",\n                    \"name\": \"endOid\",\n                    \"variableName\": \"endOid\"\n                  },\n                  {\n                    \"kind\": \"Variable\",\n                    \"name\": \"startOid\",\n                    \"variableName\": \"startOid\"\n                  }\n                ],\n                \"concreteType\": \"PullRequestComparison\",\n                \"kind\": \"LinkedField\",\n                \"name\": \"comparison\",\n                \"plural\": false,\n                \"selections\": [\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"concreteType\": \"Commit\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"oldCommit\",\n                    \"plural\": false,\n                    \"selections\": (v11/*: any*/),\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"concreteType\": \"Commit\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"newCommit\",\n                    \"plural\": false,\n                    \"selections\": (v11/*: any*/),\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": (v12/*: any*/),\n                    \"concreteType\": \"PullRequestDiffEntryConnection\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"diffEntries\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"PullRequestDiffEntryEdge\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"edges\",\n                        \"plural\": true,\n                        \"selections\": [\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"concreteType\": \"PullRequestDiffEntry\",\n                            \"kind\": \"LinkedField\",\n                            \"name\": \"node\",\n                            \"plural\": false,\n                            \"selections\": [\n                              (v13/*: any*/),\n                              (v14/*: any*/),\n                              (v15/*: any*/),\n                              (v16/*: any*/),\n                              (v17/*: any*/),\n                              (v18/*: any*/),\n                              (v20/*: any*/),\n                              (v21/*: any*/),\n                              (v7/*: any*/),\n                              (v9/*: any*/)\n                            ],\n                            \"storageKey\": null\n                          },\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"kind\": \"ScalarField\",\n                            \"name\": \"cursor\",\n                            \"storageKey\": null\n                          }\n                        ],\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"PageInfo\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"pageInfo\",\n                        \"plural\": false,\n                        \"selections\": [\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"kind\": \"ScalarField\",\n                            \"name\": \"endCursor\",\n                            \"storageKey\": null\n                          },\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"kind\": \"ScalarField\",\n                            \"name\": \"hasNextPage\",\n                            \"storageKey\": null\n                          }\n                        ],\n                        \"storageKey\": null\n                      }\n                    ],\n                    \"storageKey\": \"diffEntries(first:10)\"\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": (v12/*: any*/),\n                    \"filters\": null,\n                    \"handle\": \"connection\",\n                    \"key\": \"DiffEntriesList_entriesData_diffEntries\",\n                    \"kind\": \"LinkedHandle\",\n                    \"name\": \"diffEntries\"\n                  },\n                  {\n                    \"alias\": \"firstDiffEntry\",\n                    \"args\": [\n                      {\n                        \"kind\": \"Literal\",\n                        \"name\": \"first\",\n                        \"value\": 1\n                      }\n                    ],\n                    \"concreteType\": \"PullRequestDiffEntryConnection\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"diffEntries\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"PullRequestDiffEntryEdge\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"edges\",\n                        \"plural\": true,\n                        \"selections\": [\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"concreteType\": \"PullRequestDiffEntry\",\n                            \"kind\": \"LinkedField\",\n                            \"name\": \"node\",\n                            \"plural\": false,\n                            \"selections\": [\n                              (v14/*: any*/),\n                              (v13/*: any*/),\n                              (v15/*: any*/),\n                              (v16/*: any*/),\n                              (v17/*: any*/),\n                              (v18/*: any*/),\n                              (v20/*: any*/),\n                              (v21/*: any*/),\n                              (v7/*: any*/)\n                            ],\n                            \"storageKey\": null\n                          }\n                        ],\n                        \"storageKey\": null\n                      }\n                    ],\n                    \"storageKey\": \"diffEntries(first:1)\"\n                  },\n                  {\n                    \"alias\": \"diffEntriesMetadata\",\n                    \"args\": null,\n                    \"concreteType\": \"PullRequestDiffEntryConnection\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"diffEntries\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"totalCount\",\n                        \"storageKey\": null\n                      }\n                    ],\n                    \"storageKey\": null\n                  }\n                ],\n                \"storageKey\": null\n              }\n            ],\n            \"storageKey\": null\n          },\n          (v7/*: any*/)\n        ],\n        \"storageKey\": null\n      }\n    ]\n  },\n  \"params\": {\n    \"id\": \"7736b1732f9c488c7389790a5f795867\",\n    \"metadata\": {},\n    \"name\": \"CopilotDiffChatPartial_DiffChatQuery\",\n    \"operationKind\": \"query\",\n    \"text\": null\n  }\n};\n})();\n\n(node as any).hash = \"1d698e44fc4914e2d274d5fcc38e29f9\";\n\nexport default node;\n","/**\n * @generated SignedSource<<26c75f15ec581deaf56b76d416bae0bd>>\n * @relayHash 06b2b99a2fc9dd3fbf8cef4df4e1096b\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\n// @relayRequestID 06b2b99a2fc9dd3fbf8cef4df4e1096b\n\nimport { ConcreteRequest, Query } from 'relay-runtime';\nimport { FragmentRefs } from \"relay-runtime\";\nexport type InjectedDiffEntries_DiffEntryQuery$variables = {\n  endOid: string;\n  path: string;\n  prId: string;\n  startOid: string;\n};\nexport type InjectedDiffEntries_DiffEntryQuery$data = {\n  readonly node: {\n    readonly comparison?: {\n      readonly diffEntry: {\n        readonly \" $fragmentSpreads\": FragmentRefs<\"useFileDiffReference_DiffEntry\">;\n      };\n    } | null | undefined;\n  } | null | undefined;\n};\nexport type InjectedDiffEntries_DiffEntryQuery = {\n  response: InjectedDiffEntries_DiffEntryQuery$data;\n  variables: InjectedDiffEntries_DiffEntryQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"endOid\"\n},\nv1 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"path\"\n},\nv2 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"prId\"\n},\nv3 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"startOid\"\n},\nv4 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"id\",\n    \"variableName\": \"prId\"\n  }\n],\nv5 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"endOid\",\n    \"variableName\": \"endOid\"\n  },\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"startOid\",\n    \"variableName\": \"startOid\"\n  }\n],\nv6 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"path\",\n    \"variableName\": \"path\"\n  }\n],\nv7 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"path\",\n  \"storageKey\": null\n},\nv8 = [\n  (v7/*: any*/),\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"kind\": \"ScalarField\",\n    \"name\": \"size\",\n    \"storageKey\": null\n  }\n],\nv9 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"id\",\n  \"storageKey\": null\n};\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [\n      (v0/*: any*/),\n      (v1/*: any*/),\n      (v2/*: any*/),\n      (v3/*: any*/)\n    ],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"InjectedDiffEntries_DiffEntryQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v4/*: any*/),\n        \"concreteType\": null,\n        \"kind\": \"LinkedField\",\n        \"name\": \"node\",\n        \"plural\": false,\n        \"selections\": [\n          {\n            \"kind\": \"InlineFragment\",\n            \"selections\": [\n              {\n                \"alias\": null,\n                \"args\": (v5/*: any*/),\n                \"concreteType\": \"PullRequestComparison\",\n                \"kind\": \"LinkedField\",\n                \"name\": \"comparison\",\n                \"plural\": false,\n                \"selections\": [\n                  {\n                    \"alias\": null,\n                    \"args\": (v6/*: any*/),\n                    \"concreteType\": \"PullRequestDiffEntry\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"diffEntry\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"args\": null,\n                        \"kind\": \"FragmentSpread\",\n                        \"name\": \"useFileDiffReference_DiffEntry\"\n                      }\n                    ],\n                    \"storageKey\": null\n                  }\n                ],\n                \"storageKey\": null\n              }\n            ],\n            \"type\": \"PullRequest\",\n            \"abstractKey\": null\n          }\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"type\": \"Query\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [\n      (v2/*: any*/),\n      (v1/*: any*/),\n      (v3/*: any*/),\n      (v0/*: any*/)\n    ],\n    \"kind\": \"Operation\",\n    \"name\": \"InjectedDiffEntries_DiffEntryQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v4/*: any*/),\n        \"concreteType\": null,\n        \"kind\": \"LinkedField\",\n        \"name\": \"node\",\n        \"plural\": false,\n        \"selections\": [\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"__typename\",\n            \"storageKey\": null\n          },\n          {\n            \"kind\": \"InlineFragment\",\n            \"selections\": [\n              {\n                \"alias\": null,\n                \"args\": (v5/*: any*/),\n                \"concreteType\": \"PullRequestComparison\",\n                \"kind\": \"LinkedField\",\n                \"name\": \"comparison\",\n                \"plural\": false,\n                \"selections\": [\n                  {\n                    \"alias\": null,\n                    \"args\": (v6/*: any*/),\n                    \"concreteType\": \"PullRequestDiffEntry\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"diffEntry\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"pathDigest\",\n                        \"storageKey\": null\n                      },\n                      (v7/*: any*/),\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"rawUrl\",\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"isBinary\",\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"isSubmodule\",\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"kind\": \"ScalarField\",\n                        \"name\": \"isLfsPointer\",\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"TreeEntry\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"oldTreeEntry\",\n                        \"plural\": false,\n                        \"selections\": (v8/*: any*/),\n                        \"storageKey\": null\n                      },\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"TreeEntry\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"newTreeEntry\",\n                        \"plural\": false,\n                        \"selections\": (v8/*: any*/),\n                        \"storageKey\": null\n                      },\n                      (v9/*: any*/)\n                    ],\n                    \"storageKey\": null\n                  }\n                ],\n                \"storageKey\": null\n              }\n            ],\n            \"type\": \"PullRequest\",\n            \"abstractKey\": null\n          },\n          (v9/*: any*/)\n        ],\n        \"storageKey\": null\n      }\n    ]\n  },\n  \"params\": {\n    \"id\": \"06b2b99a2fc9dd3fbf8cef4df4e1096b\",\n    \"metadata\": {},\n    \"name\": \"InjectedDiffEntries_DiffEntryQuery\",\n    \"operationKind\": \"query\",\n    \"text\": null\n  }\n};\n})();\n\n(node as any).hash = \"76f7e4c6cf06253ca66cb057950d6297\";\n\nexport default node;\n","/**\n * @generated SignedSource<<6b7655d197ca7759f00887693f0eccff>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { Fragment, ReaderFragment } from 'relay-runtime';\nimport { FragmentRefs } from \"relay-runtime\";\nexport type InjectedDiffEntries_PullRequestFragment$data = {\n  readonly comparison: {\n    readonly \" $fragmentSpreads\": FragmentRefs<\"useFileDiffReference_Comparison\">;\n  } | null | undefined;\n  readonly id: string;\n  readonly repository: {\n    readonly name: string;\n    readonly owner: {\n      readonly login: string;\n    };\n  };\n  readonly \" $fragmentType\": \"InjectedDiffEntries_PullRequestFragment\";\n};\nexport type InjectedDiffEntries_PullRequestFragment$key = {\n  readonly \" $data\"?: InjectedDiffEntries_PullRequestFragment$data;\n  readonly \" $fragmentSpreads\": FragmentRefs<\"InjectedDiffEntries_PullRequestFragment\">;\n};\n\nconst node: ReaderFragment = {\n  \"argumentDefinitions\": [\n    {\n      \"kind\": \"RootArgument\",\n      \"name\": \"endOid\"\n    },\n    {\n      \"kind\": \"RootArgument\",\n      \"name\": \"startOid\"\n    }\n  ],\n  \"kind\": \"Fragment\",\n  \"metadata\": null,\n  \"name\": \"InjectedDiffEntries_PullRequestFragment\",\n  \"selections\": [\n    {\n      \"alias\": null,\n      \"args\": null,\n      \"kind\": \"ScalarField\",\n      \"name\": \"id\",\n      \"storageKey\": null\n    },\n    {\n      \"alias\": null,\n      \"args\": null,\n      \"concreteType\": \"Repository\",\n      \"kind\": \"LinkedField\",\n      \"name\": \"repository\",\n      \"plural\": false,\n      \"selections\": [\n        {\n          \"alias\": null,\n          \"args\": null,\n          \"kind\": \"ScalarField\",\n          \"name\": \"name\",\n          \"storageKey\": null\n        },\n        {\n          \"alias\": null,\n          \"args\": null,\n          \"concreteType\": null,\n          \"kind\": \"LinkedField\",\n          \"name\": \"owner\",\n          \"plural\": false,\n          \"selections\": [\n            {\n              \"alias\": null,\n              \"args\": null,\n              \"kind\": \"ScalarField\",\n              \"name\": \"login\",\n              \"storageKey\": null\n            }\n          ],\n          \"storageKey\": null\n        }\n      ],\n      \"storageKey\": null\n    },\n    {\n      \"alias\": null,\n      \"args\": [\n        {\n          \"kind\": \"Variable\",\n          \"name\": \"endOid\",\n          \"variableName\": \"endOid\"\n        },\n        {\n          \"kind\": \"Variable\",\n          \"name\": \"startOid\",\n          \"variableName\": \"startOid\"\n        }\n      ],\n      \"concreteType\": \"PullRequestComparison\",\n      \"kind\": \"LinkedField\",\n      \"name\": \"comparison\",\n      \"plural\": false,\n      \"selections\": [\n        {\n          \"args\": null,\n          \"kind\": \"FragmentSpread\",\n          \"name\": \"useFileDiffReference_Comparison\"\n        }\n      ],\n      \"storageKey\": null\n    }\n  ],\n  \"type\": \"PullRequest\",\n  \"abstractKey\": null\n};\n\n(node as any).hash = \"da051f7b59fe26727562322ae476ee93\";\n\nexport default node;\n","export class DiffSelectionEvent extends Event {\n  static readonly NAME = 'diff-line-selection'\n\n  constructor() {\n    super(DiffSelectionEvent.NAME, {\n      bubbles: false,\n      cancelable: true,\n    })\n  }\n\n  static dispatch() {\n    window.dispatchEvent(new DiffSelectionEvent())\n  }\n}\n\ndeclare global {\n  interface WindowEventMap {\n    'diff-line-selection': DiffSelectionEvent\n  }\n}\n","import {attr, controller, target} from '@github/catalyst'\n\n/** Tracks all active (visible or near-visible) `CopilotDiffEntryElement` instances. */\nclass CopilotDiffEntryStore extends EventTarget {\n  #entries: ReadonlySet<CopilotDiffEntryElement> = new Set()\n\n  // lazily construct for SSR\n  #_intersectionObserver?: IntersectionObserver\n  get #intersectionObserver() {\n    return (this.#_intersectionObserver ??= new IntersectionObserver(\n      intersections => {\n        const newEntries = new Set(this.#entries)\n        let hasChanges = false // The flag avoids having to do a set equality check, which is O(n) when no changes\n\n        for (const intersection of intersections) {\n          const entry = intersection.target as CopilotDiffEntryElement\n\n          if (intersection.isIntersecting && !newEntries.has(entry)) {\n            newEntries.add(entry)\n            hasChanges = true\n          } else if (!intersection.isIntersecting && newEntries.has(entry)) {\n            newEntries.delete(entry)\n            hasChanges = true\n          }\n        }\n\n        if (hasChanges) {\n          // sometimes Turbo gets weird and the Catalyst lifecycle hooks don't work correctly\n          // so check that all the entries are still in the document\n          for (const entry of newEntries) {\n            if (!document.contains(entry)) {\n              newEntries.delete(entry)\n            }\n          }\n\n          this.#entries = newEntries\n          this.dispatchEvent(new Event('update'))\n        }\n      },\n      {\n        // margin of half screen size theoretically gives the request time to execute before the item is visible\n        rootMargin: '50%',\n      },\n    ))\n  }\n\n  get entries() {\n    return this.#entries\n  }\n\n  clear() {\n    this.#entries = new Set()\n  }\n\n  connect(entry: CopilotDiffEntryElement) {\n    this.#intersectionObserver.observe(entry)\n  }\n\n  disconnect(entry: CopilotDiffEntryElement) {\n    this.#intersectionObserver.unobserve(entry)\n  }\n}\n\n@controller\nexport class CopilotDiffEntryElement extends HTMLElement {\n  static readonly store = new CopilotDiffEntryStore()\n\n  @attr filePath = ''\n  @attr disabled = false\n\n  @target menuItemsSlot: HTMLElement | undefined\n\n  connectedCallback() {\n    // On page navigation the React app doesn't always clean up properly, and if we then navigate back with back/forward,\n    // the HTML gets restored and these can load with children inside them. Then the portal appends to the container, causing\n    // items to appear more than once. So we clear the slot first.\n    this.menuItemsSlot?.replaceChildren()\n    CopilotDiffEntryElement.store.connect(this)\n  }\n\n  disconnectedCallback() {\n    CopilotDiffEntryElement.store.disconnect(this)\n  }\n}\n","import {publishAddCopilotChatReference, publishOpenCopilotChat} from '@github-ui/copilot-chat/utils/copilot-chat-events'\nimport {CopilotChatIntents, type FileDiffReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n// eslint-disable-next-line no-restricted-imports\nimport {useToastContext} from '@github-ui/toast/ToastContext'\nimport {ActionList} from '@primer/react'\nimport {clsx} from 'clsx'\nimport styles from './DiffEntryMenuItems.module.css'\n\ninterface CopilotChatDiffMenuItemProps {\n  fileDiffReference: FileDiffReference | undefined\n}\n\nconst sharedItemProps = {\n  className: clsx(styles['code-chat-menu-item'], 'px-5'),\n  role: 'menuitem',\n} as const\n\nexport const DiffEntryMenuItems: React.FC<CopilotChatDiffMenuItemProps> = ({fileDiffReference}) => {\n  const {addToast} = useToastContext()\n\n  if (fileDiffReference === undefined) {\n    return <BuildMenu inactiveText=\"Copilot is not available for this file type\" />\n  }\n\n  const handleDiscuss = () => {\n    publishOpenCopilotChat({\n      intent: CopilotChatIntents.conversation,\n      references: [fileDiffReference],\n    })\n    sendEvent('copilot.file-diff.menu.discuss')\n  }\n\n  const handleAttach = () => {\n    publishAddCopilotChatReference(fileDiffReference)\n    // eslint-disable-next-line @github-ui/dotcom-primer/toast-migration\n    addToast({message: 'Reference added to thread', type: 'success'})\n    sendEvent('copilot.file-diff.menu.add')\n  }\n\n  return <BuildMenu handleAttach={handleAttach} handleDiscuss={handleDiscuss} />\n}\n\ninterface BuildMenuProps {\n  handleDiscuss?: () => void\n  handleAttach?: () => void\n  inactiveText?: string\n}\n\nconst BuildMenu = ({handleDiscuss, handleAttach, inactiveText}: BuildMenuProps) => (\n  <>\n    <ActionList.Item {...sharedItemProps} inactiveText={inactiveText} onSelect={handleDiscuss}>\n      Ask Copilot about this diff\n    </ActionList.Item>\n    <ActionList.Item {...sharedItemProps} inactiveText={inactiveText} onSelect={handleAttach}>\n      Attach to current thread\n    </ActionList.Item>\n  </>\n)\n\ntry{ DiffEntryMenuItems.displayName ||= 'DiffEntryMenuItems' } catch {}\ntry{ BuildMenu.displayName ||= 'BuildMenu' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"code-chat-menu-item\":\"DiffEntryMenuItems-module__code-chat-menu-item--wThbu\"};","import {publishOpenCopilotChat} from '@github-ui/copilot-chat/utils/copilot-chat-events'\nimport {CopilotChatIntents, type FileDiffReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\nimport {AskCopilotButton} from '../../AskCopilotButton'\n\nconst DIFF_LINES_COPILOT_BUTTON_ID = 'diff-lines-copilot-button'\n\nexport interface DiffLinesAskCopilotButtonProps {\n  fileDiffReference: FileDiffReference\n  afterSelect?: () => void\n}\n\nexport const DiffLinesAskCopilotButton = ({fileDiffReference, afterSelect}: DiffLinesAskCopilotButtonProps) => {\n  const handleDiscuss = () => {\n    publishOpenCopilotChat({\n      intent: CopilotChatIntents.conversation,\n      references: [fileDiffReference],\n      id: DIFF_LINES_COPILOT_BUTTON_ID,\n    })\n    sendEvent('copilot.file-diff.discuss')\n    afterSelect?.()\n  }\n\n  return (\n    <AskCopilotButton\n      referenceType={fileDiffReference.type}\n      onClick={handleDiscuss}\n      id={DIFF_LINES_COPILOT_BUTTON_ID}\n    />\n  )\n}\n\ntry{ DiffLinesAskCopilotButton.displayName ||= 'DiffLinesAskCopilotButton' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"square\":\"DiffLinesMenu-module__square--wor4Z\",\"muted\":\"DiffLinesMenu-module__muted--z3_a8\",\"diff-button\":\"DiffLinesMenu-module__diff-button--QKR13\",\"diff-button-container\":\"DiffLinesMenu-module__diff-button-container--UrMbh\"};","import type {FileDiffReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {usePortalTooltip} from '@github-ui/portal-tooltip/use-portal-tooltip'\nimport {TriangleDownIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, ButtonGroup, IconButton} from '@primer/react'\nimport {clsx} from 'clsx'\nimport {useRef, useState} from 'react'\nimport {DiffLinesAskCopilotButton} from '../shared/DiffLinesAskCopilotButton'\nimport styles from './DiffLinesMenu.module.css'\nimport {DiffLinesExplainMenuItem} from '../shared/DiffLinesExplainMenuItem'\nimport {DiffLinesAttachMenuItem} from '../shared/DiffLinesAttachMenuItem'\n\nexport interface DiffLinesMenuProps {\n  fileDiffReference: FileDiffReference\n  style?: React.CSSProperties\n  onOpenChange?: (open: boolean) => void\n}\n\nexport const DiffLinesMenu = ({fileDiffReference, onOpenChange}: DiffLinesMenuProps) => {\n  const [open, _setOpen] = useState(false)\n  const setOpen = (newOpen: boolean) => {\n    _setOpen(newOpen)\n    onOpenChange?.(newOpen)\n  }\n\n  const buttonRef = useRef<HTMLButtonElement>(null)\n\n  const [buttonProps, portalElement] = usePortalTooltip({\n    'aria-label': 'Copilot menu',\n    contentRef: buttonRef,\n    direction: 'sw',\n    anchorSide: 'outside-bottom',\n  })\n\n  const closeMenu = () => setOpen(false)\n\n  return (\n    <ButtonGroup className={styles['diff-button-container']}>\n      <DiffLinesAskCopilotButton fileDiffReference={fileDiffReference} afterSelect={closeMenu} />\n      <ActionMenu open={open} onOpenChange={setOpen} anchorRef={buttonRef}>\n        <ActionMenu.Anchor>\n          {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n          <IconButton\n            unsafeDisableTooltip={true}\n            icon={TriangleDownIcon}\n            aria-label=\"Copilot menu\"\n            ref={buttonRef}\n            onSelect={() => setOpen(true)}\n            size=\"small\"\n            className={clsx(styles['square'], styles['diff-button'])}\n            data-testid=\"more-copilot-button\"\n            {...buttonProps}\n          />\n        </ActionMenu.Anchor>\n        <ActionMenu.Overlay align=\"end\">\n          <ActionList>\n            <DiffLinesExplainMenuItem fileDiffReference={fileDiffReference} afterSelect={closeMenu} />\n            <ActionList.Divider />\n            <DiffLinesAttachMenuItem fileDiffReference={fileDiffReference} afterSelect={closeMenu} />\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      {portalElement}\n    </ButtonGroup>\n  )\n}\n\ntry{ DiffLinesMenu.displayName ||= 'DiffLinesMenu' } catch {}","import {useRef, useSyncExternalStore} from 'react'\n\nfunction arraysEqual(a: unknown[], b: unknown[]): boolean {\n  return a.length === b.length && a.every((value, index) => value === b[index])\n}\n\n/**\n * Observe a selector and force a rerender when it changes. Returns the array of matched elements (note we don't\n * return a `NodeList` here, because nobody likes `NodeList`).\n * @param selector The CSS selector to observe.\n * @param elementClass Optional class to filter the elements by. Often `querySelectorAll` is used with a simple type\n * parameter or an assertion because it returns an array of `Element` when it's often clear what the element type will\n * be from the selector. This can be used to safely ensure that all the elements are of that expected type without\n * having to use an assertion. For example, setting to `HTMLInputElement` will ensure that all returned elements are\n * inputs.\n */\nexport function useObserveSelector<E extends Element>(\n  selector: string,\n  elementClass: {new (): E} = Element as {new (): E},\n): E[] {\n  const cachedValue = useRef<E[]>()\n\n  return useSyncExternalStore(\n    onUpdate => {\n      const observer = new MutationObserver(() => onUpdate())\n      observer.observe(document.body, {subtree: true, childList: true})\n      return () => observer.disconnect()\n    },\n    () => {\n      const elements = Array.from(document.querySelectorAll(selector)).filter((e): e is E => e instanceof elementClass)\n      if (cachedValue.current && arraysEqual(cachedValue.current, elements)) return cachedValue.current\n      return (cachedValue.current = elements)\n    },\n  )\n}\n","import {useSyncExternalStore} from 'react'\n\n// adapted from https://github.com/github/github/blob/master/ui/packages/memex/src/client/hooks/use-is-focus-within-elements.tsx\n\nconst subscribe = (notify: () => void) => {\n  window.addEventListener('focus', notify, {capture: true})\n  window.addEventListener('blur', notify)\n  window.addEventListener('click', notify)\n  return () => {\n    window.removeEventListener('focus', notify, {capture: true})\n    window.removeEventListener('blur', notify)\n    window.removeEventListener('click', notify)\n  }\n}\n\nexport const useIsFocusWithinElement = (element?: HTMLElement) => {\n  return useSyncExternalStore(subscribe, () => {\n    return element?.contains(document.activeElement)\n  })\n}\n","import type {LineRange} from '@github-ui/diff-lines'\nimport {parseLineRangeHash} from '@github-ui/diff-lines/document-hash-helpers'\nimport {useObserveSelector} from '@github-ui/use-observe-selector'\nimport {useEffect, useState, useSyncExternalStore} from 'react'\nimport {DiffSelectionEvent} from './diff-selection-event'\nimport {useIsFocusWithinElement} from './use-is-focus-within-element'\n\nexport interface ActiveLines extends LineRange {\n  /** The element into which we will insert the floating menu. */\n  topRightElement: HTMLTableCellElement\n}\n\nconst useSelectedLines = (): ActiveLines | null => {\n  const hash = useSyncExternalStore(\n    onUpdate => {\n      window.addEventListener(DiffSelectionEvent.NAME, onUpdate)\n      return () => window.removeEventListener(DiffSelectionEvent.NAME, onUpdate)\n    },\n    () => window.location.hash,\n  )\n\n  const lineRange = parseLineRangeHash(hash)\n  if (!lineRange) return null\n\n  // get the topmost and furthest-right selected line, and use that as the portal element\n  const rightElement = document.querySelector<HTMLTableCellElement>(\n    '.selected-line.selected-line-top.blob-code:not(.js-skip-tagsearch)',\n  )\n  const leftElement = document.querySelector<HTMLTableCellElement>(\n    '.selected-line.selected-line-top.blob-code.js-skip-tagsearch',\n  )\n  const topRightElement = rightElement ?? leftElement\n  if (!topRightElement) return null\n\n  return {...lineRange, topRightElement}\n}\n\nconst useHoveredLines = (): ActiveLines | null => {\n  const [hoveredLine, setHoveredLine] = useState<HTMLTableCellElement>()\n\n  const allLineElements = useObserveSelector('td.blob-code:not(.blob-code-empty)', HTMLTableCellElement)\n\n  useEffect(() => {\n    function onEnterLine(this: HTMLTableCellElement) {\n      setHoveredLine(this)\n    }\n\n    function onExitLine() {\n      setHoveredLine(undefined)\n    }\n\n    for (const line of allLineElements) {\n      line.addEventListener('mouseenter', onEnterLine)\n      line.addEventListener('mouseleave', onExitLine)\n    }\n\n    return () => {\n      for (const line of allLineElements) {\n        line.removeEventListener('mouseenter', onEnterLine)\n        line.removeEventListener('mouseleave', onExitLine)\n      }\n    }\n  }, [allLineElements])\n\n  if (!hoveredLine) return null\n\n  const [leftNumberCell, rightNumberCell] = hoveredLine?.parentElement?.querySelectorAll('td.blob-num') ?? []\n  const hash = leftNumberCell?.id || rightNumberCell?.id || undefined\n  const lineRange = hash ? parseLineRangeHash(hash) : undefined\n  if (!lineRange) return null\n\n  return {...lineRange, topRightElement: hoveredLine}\n}\n\nconst useFocusVisibleLines = (): ActiveLines | null => {\n  const allLineElements = useObserveSelector('td.blob-code:not(.blob-code-empty)', HTMLTableCellElement)\n\n  // capture line that currently has focus / whose children have focus\n  const [focusedLine, setFocusedLine] = useState<HTMLTableCellElement>()\n  useEffect(() => {\n    function onEnterLine(this: HTMLTableCellElement) {\n      setFocusedLine(this)\n    }\n\n    for (const line of allLineElements) {\n      line.addEventListener('focusin', onEnterLine)\n    }\n\n    return () => {\n      for (const line of allLineElements) {\n        line.removeEventListener('focusin', onEnterLine)\n      }\n    }\n  }, [allLineElements])\n\n  // had some trouble with the 'focusout' event so we'll handle that a slightly different way\n  const isFocusWithinLine = useIsFocusWithinElement(focusedLine)\n  useEffect(() => {\n    if (!isFocusWithinLine) {\n      setFocusedLine(undefined)\n    }\n  }, [isFocusWithinLine])\n\n  if (!focusedLine) return null\n\n  const [leftNumberCell, rightNumberCell] = focusedLine?.parentElement?.querySelectorAll('td.blob-num') ?? []\n  const hash = leftNumberCell?.id || rightNumberCell?.id || undefined\n  const lineRange = hash ? parseLineRangeHash(hash) : undefined\n  if (!lineRange) return null\n\n  return {...lineRange, topRightElement: focusedLine}\n}\n\nexport const useActiveDiffLines = () => {\n  const byId = new Map<string, ActiveLines>()\n\n  const hovered = useHoveredLines()\n  if (hovered) byId.set(hovered.diffAnchor, hovered)\n\n  // selection overrides hover\n  const selected = useSelectedLines()\n  if (selected) byId.set(selected.diffAnchor, selected)\n\n  // keyboard nav overrides everything!\n  const focusVisible = useFocusVisibleLines()\n  if (focusVisible) byId.set(focusVisible.diffAnchor, focusVisible)\n\n  return byId\n}\n","import {assertDataPresent} from '@github-ui/assert-data-present'\nimport type {FileDiffReference} from '@github-ui/copilot-chat/utils/copilot-chat-types'\nimport {ErrorBoundary} from '@github-ui/react-core/error-boundary'\nimport {Suspense, useRef, useState, useSyncExternalStore} from 'react'\nimport {createPortal} from 'react-dom'\nimport {useFragment, useLazyLoadQuery} from 'react-relay'\nimport {graphql} from 'relay-runtime'\nimport {useFileDiffReference} from '../../use-file-diff-reference'\nimport {DiffEntryMenuItems} from '../shared/DiffEntryMenuItems'\nimport {CopilotDiffEntryElement} from './CopilotDiffEntryElement'\nimport {DiffLinesMenu} from './DiffLinesMenu'\nimport type {InjectedDiffEntries_DiffEntryQuery} from './__generated__/InjectedDiffEntries_DiffEntryQuery.graphql'\nimport type {InjectedDiffEntries_PullRequestFragment$key} from './__generated__/InjectedDiffEntries_PullRequestFragment.graphql'\nimport {useActiveDiffLines, type ActiveLines} from './use-active-diff-lines'\nimport {useLatestCommit} from '@github-ui/use-latest-commit'\n\nconst PullRequestFragment = graphql`\n  fragment InjectedDiffEntries_PullRequestFragment on PullRequest {\n    id\n    repository {\n      name\n      owner {\n        login\n      }\n    }\n    comparison(startOid: $startOid, endOid: $endOid) {\n      ...useFileDiffReference_Comparison\n    }\n  }\n`\n\n// TODO: If we could directly reference diff entries by node ID instead of path, we could shared loaded data across\n// this and the entries selectpanel. This would reduce duplication in loaded data, but requires passing the node ID\n// in through `CopilotDiffEntryElement`.\nconst DiffEntryQuery = graphql`\n  query InjectedDiffEntries_DiffEntryQuery($prId: ID!, $path: String!, $startOid: String!, $endOid: String!) {\n    node(id: $prId) {\n      ... on PullRequest {\n        comparison(startOid: $startOid, endOid: $endOid) {\n          diffEntry(path: $path) {\n            ...useFileDiffReference_DiffEntry\n          }\n        }\n      }\n    }\n  }\n`\n\nconst useEntryElements = () =>\n  useSyncExternalStore(\n    onUpdate => {\n      CopilotDiffEntryElement.store.addEventListener('update', onUpdate)\n      return () => CopilotDiffEntryElement.store.removeEventListener('update', onUpdate)\n    },\n    () => CopilotDiffEntryElement.store.entries,\n  )\n\nfunction InjectedDiffButton({\n  fileDiffReference,\n  activeLines: newActiveLines,\n}: {\n  fileDiffReference: FileDiffReference\n  activeLines?: ActiveLines\n}) {\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n\n  const lastActiveLines = useRef(newActiveLines)\n\n  // Force continued usage of previous value if menu is still open, so we don't autoclose the menu when the user tries\n  // to move the mouse into it\n  const activeLines = isMenuOpen ? lastActiveLines.current : newActiveLines\n  lastActiveLines.current = activeLines\n\n  if (!activeLines) return null\n\n  const fileDiffReferenceWithSelection = {\n    ...fileDiffReference,\n    selectedRange: {\n      start: `${activeLines.startOrientation[0]?.toUpperCase() ?? ''}${activeLines.startLineNumber}`,\n      end: `${activeLines.endOrientation[0]?.toUpperCase() ?? ''}${activeLines.endLineNumber}`,\n    },\n  }\n\n  return createPortal(\n    <DiffLinesMenu fileDiffReference={fileDiffReferenceWithSelection} onOpenChange={setIsMenuOpen} />,\n    activeLines.topRightElement,\n  )\n}\n\ninterface InjectedDiffEntryProps {\n  entryElement: CopilotDiffEntryElement\n  pullRequestKey: InjectedDiffEntries_PullRequestFragment$key\n  activeLinesById: Map<string, ActiveLines>\n  startOid: string\n  endOid: string\n}\n\nfunction InjectedDiffEntry({\n  entryElement: {menuItemsSlot, filePath},\n  startOid,\n  endOid,\n  pullRequestKey,\n  activeLinesById,\n}: InjectedDiffEntryProps) {\n  const pullRequest = useFragment(PullRequestFragment, pullRequestKey)\n  assertDataPresent(pullRequest.comparison)\n\n  const entryKey = useLazyLoadQuery<InjectedDiffEntries_DiffEntryQuery>(DiffEntryQuery, {\n    prId: pullRequest.id,\n    path: filePath,\n    startOid,\n    endOid,\n  }).node?.comparison?.diffEntry\n  assertDataPresent(entryKey)\n\n  const [latestCommit] = useLatestCommit(\n    pullRequest.repository.owner.login,\n    pullRequest.repository.name,\n    endOid,\n    filePath,\n  )\n  const fileDiffReference = useFileDiffReference(pullRequest.comparison, entryKey, latestCommit?.oid)\n\n  return (\n    <>\n      {fileDiffReference && (\n        <InjectedDiffButton\n          fileDiffReference={fileDiffReference}\n          activeLines={activeLinesById.get(fileDiffReference.id)}\n        />\n      )}\n      {menuItemsSlot && createPortal(<DiffEntryMenuItems fileDiffReference={fileDiffReference} />, menuItemsSlot)}\n    </>\n  )\n}\n\ninterface InjectedDiffEntriesProps {\n  pullRequestKey: InjectedDiffEntries_PullRequestFragment$key\n  startOid: string\n  endOid: string\n}\n\nexport function InjectedDiffEntries({pullRequestKey, startOid, endOid}: InjectedDiffEntriesProps) {\n  const entryElements = useEntryElements()\n  const activeLinesById = useActiveDiffLines()\n\n  return (\n    <>\n      {Array.from(entryElements).map(entryElement => (\n        <ErrorBoundary key={entryElement.filePath} fallback={null}>\n          <Suspense fallback={null}>\n            <InjectedDiffEntry\n              startOid={startOid}\n              endOid={endOid}\n              pullRequestKey={pullRequestKey}\n              entryElement={entryElement}\n              // It would be more ideal to pass only the lines relevant to this entry here, allowing us to memoize\n              // InjectedDiffEntry. But that requires knowing the ID we get from `useFileDiffReference` here, which\n              // we don't have yet\n              activeLinesById={activeLinesById}\n            />\n          </Suspense>\n        </ErrorBoundary>\n      ))}\n    </>\n  )\n}\n\ntry{ InjectedDiffButton.displayName ||= 'InjectedDiffButton' } catch {}\ntry{ InjectedDiffEntry.displayName ||= 'InjectedDiffEntry' } catch {}\ntry{ InjectedDiffEntries.displayName ||= 'InjectedDiffEntries' } catch {}","import {assertDataPresent} from '@github-ui/assert-data-present'\nimport {ErrorBoundary} from '@github-ui/react-core/error-boundary'\nimport {registerReactPartial} from '@github-ui/react-core/register-partial'\nimport {relayEnvironmentWithMissingFieldHandlerForNode} from '@github-ui/relay-environment'\nimport {Suspense, useEffect} from 'react'\nimport {RelayEnvironmentProvider, graphql, useLazyLoadQuery} from 'react-relay'\nimport {\n  DiffHeaderAskCopilotButton,\n  ErrorAskCopilotButton,\n  LoadingAskCopilotButton,\n} from '../shared/DiffHeaderAskCopilotButton'\nimport {InjectedDiffEntries} from './InjectedDiffEntries'\nimport type {\n  CopilotDiffChatPartial_DiffChatQuery,\n  CopilotDiffChatPartial_DiffChatQuery$variables,\n} from './__generated__/CopilotDiffChatPartial_DiffChatQuery.graphql'\n\nconst relayEnvironment = relayEnvironmentWithMissingFieldHandlerForNode()\n\nconst DiffChatQuery = graphql`\n  query CopilotDiffChatPartial_DiffChatQuery(\n    $repoOwner: String!\n    $repoName: String!\n    $prNumber: Int!\n    $startOid: String!\n    $endOid: String!\n  ) {\n    repository(owner: $repoOwner, name: $repoName) {\n      pullRequest(number: $prNumber) {\n        ...InjectedDiffEntries_PullRequestFragment\n        ...DiffHeaderAskCopilotButton_data\n      }\n    }\n  }\n`\n\n/** This has to be a separate component to use the Relay environment. */\nfunction DiffChat(props: CopilotDiffChatPartial_DiffChatQuery$variables) {\n  const pullRequest = useLazyLoadQuery<CopilotDiffChatPartial_DiffChatQuery>(DiffChatQuery, props).repository\n    ?.pullRequest\n  assertDataPresent(pullRequest)\n\n  return (\n    <>\n      <InjectedDiffEntries pullRequestKey={pullRequest} startOid={props.startOid} endOid={props.endOid} />\n      <DiffHeaderAskCopilotButton pullRequestKey={pullRequest} />\n    </>\n  )\n}\n\n/**\n * One partial for each Rails diff view inserts React components for each file, minimizing the performance cost of\n * instantiating many partials. In other words:\n *\n * > _One Partial to rule them all, One Partial to find them, One Partial to bring them all and in the React bind them._\n */\nexport function CopilotDiffChatPartial(props: CopilotDiffChatPartial_DiffChatQuery$variables) {\n  // add a class name when rendering so that we can know when to change some styles downstream\n  useEffect(() => {\n    document.querySelector('diff-layout')?.classList.add('copilot-chat-enabled')\n  }, [])\n\n  return (\n    <RelayEnvironmentProvider environment={relayEnvironment}>\n      <ErrorBoundary fallback={<ErrorAskCopilotButton />}>\n        <Suspense fallback={<LoadingAskCopilotButton />}>\n          <DiffChat {...props} />\n        </Suspense>\n      </ErrorBoundary>\n    </RelayEnvironmentProvider>\n  )\n}\n\nregisterReactPartial('copilot-code-chat', {\n  Component: CopilotDiffChatPartial,\n})\n\ntry{ DiffChat.displayName ||= 'DiffChat' } catch {}\ntry{ CopilotDiffChatPartial.displayName ||= 'CopilotDiffChatPartial' } catch {}","const hasScrollableParent = (node: Element) => {\n  const computedStyle = getComputedStyle(node, null)\n  return ['overflow', 'overflow-y', 'overflow-x'].some(overflow => {\n    const value = computedStyle.getPropertyValue(overflow)\n    return value === 'auto' || value === 'scroll'\n  })\n}\n\nconst collectParents = (node: Node | null, ps: Node[]): Node[] => {\n  if (!node || node.parentNode === null) {\n    return ps\n  }\n  return collectParents(node.parentNode, ps.concat([node]))\n}\n\n/**\n * Traverse the DOM tree up to find the first scrollable parent of a given element,\n * returning `document.scrollingElement` or `document.documentElement` if none is found\n */\nexport function getScrollableParent(node: HTMLElement | SVGElement) {\n  if (!(node instanceof HTMLElement || node instanceof SVGElement)) {\n    return\n  }\n\n  const ps = collectParents(node.parentNode, [])\n\n  for (const item of ps) {\n    if ((item instanceof HTMLElement || item instanceof SVGElement) && hasScrollableParent(item)) {\n      return item\n    }\n  }\n\n  return document.scrollingElement || document.documentElement\n}\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch (_) {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nexport function stringifyObjectValues(obj: object) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, JSON.stringify(v)]))\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","export class DeferredRegistry<T> {\n  private registrationEntries: Record<\n    string,\n    {\n      promise: Promise<T>\n      resolve?: (r: T) => void\n    }\n  > = {}\n\n  public register(name: string, registration: T) {\n    const entry = this.registrationEntries[name]\n    if (entry) {\n      entry.resolve?.(registration)\n    } else {\n      this.registrationEntries[name] = {\n        promise: Promise.resolve(registration),\n      }\n    }\n  }\n\n  public getRegistration(name: string): Promise<T> {\n    this.registrationEntries[name] ||= new Deferred()\n    return this.registrationEntries[name].promise\n  }\n}\n\nclass Deferred<T> {\n  declare promise\n  declare resolve: (r: T) => void\n\n  constructor() {\n    this.promise = new Promise<T>(resolve => {\n      this.resolve = resolve\n    })\n  }\n}\n","import type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\ninterface ReactPartialAnchor {\n  /**\n   * DO NOT USE THIS PROPERTY DIRECTLY. It is meant to be used with useExternalAnchor and useOnAnchorClick\n   */\n  __wrapperElement: ReactPartialAnchorElement\n}\n\nexport interface ReactPartialAnchorProps {\n  reactPartialAnchor?: ReactPartialAnchor\n}\n\nexport function usePartialAnchorProps(\n  anchorElement: ReactPartialAnchorElement | undefined | null,\n): ReactPartialAnchorProps {\n  useEffect(() => {\n    const anchor = anchorElement?.anchor\n\n    if (!anchor) {\n      return\n    }\n\n    if ('disabled' in anchor) {\n      anchor.disabled = false\n    }\n    anchor.classList.remove('cursor-wait')\n  }, [anchorElement])\n\n  if (!anchorElement) {\n    return {}\n  }\n\n  return {\n    reactPartialAnchor: {\n      __wrapperElement: anchorElement,\n    },\n  }\n}\n\nexport function useExternalAnchor(reactPartialAnchor: ReactPartialAnchor) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor || null)\n  const [open, setOpen] = useState(false)\n\n  const onClick = useCallback(() => {\n    // toggle the open state when clicked\n    setOpen(!open)\n  }, [open, setOpen])\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    ref.current.setAttribute('aria-expanded', open.toString())\n    ref.current.setAttribute('aria-haspopup', 'true')\n  }, [ref, open])\n\n  useOnAnchorClick(reactPartialAnchor, onClick)\n\n  return {\n    ref,\n    open,\n    setOpen,\n  }\n}\n\nexport function useOnAnchorClick(reactPartialAnchor: ReactPartialAnchor, onClick: (event: MouseEvent) => void) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor)\n\n  useEffect(() => {\n    const element = ref.current\n    if (!element) {\n      return\n    }\n\n    element.addEventListener('click', onClick)\n    return () => element.removeEventListener('click', onClick)\n  }, [ref, onClick])\n}\n\nexport type PropsWithPartialAnchor<T> = T & Required<ReactPartialAnchorProps>\n","import {DeferredRegistry} from './deferred-registry'\n\nexport interface PartialRegistration {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Component: React.ComponentType<any>\n}\n\nexport const partialRegistry = new DeferredRegistry<PartialRegistration>()\n\nexport function getReactPartial(appName: string) {\n  return partialRegistry.getRegistration(appName)\n}\n","import {controller} from '@github/catalyst'\nimport {getReactPartial} from './react-partial-registry'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {ReactBaseElement} from './ReactBaseElement'\nimport {PartialEntry} from './PartialEntry'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\n\n// What is this silliness? Is it react or a web component?!\n// It's a web component we use to bootstrap react partials within the monolith.\n@controller\nclass ReactPartialElement extends ReactBaseElement<EmbeddedPartialData> {\n  nameAttribute = 'partial-name'\n\n  async getReactNode(embeddedData: EmbeddedPartialData) {\n    const {Component} = await getReactPartial(this.name)\n\n    // Some React Partials will be wrapped in a react-partial-anchor, which is used to conditionally render the Partial\n    const anchorElement = this.closest<ReactPartialAnchorElement>('react-partial-anchor')\n\n    return (\n      <PartialEntry\n        partialName={this.name}\n        embeddedData={embeddedData}\n        Component={Component}\n        wasServerRendered={this.hasSSRContent}\n        ssrError={this.ssrError}\n        anchorElement={anchorElement}\n      />\n    )\n  }\n}\n","import {partialRegistry, type PartialRegistration} from './react-partial-registry'\n// Import the web component to get it registered on the window\nimport './ReactPartialElement'\n\n// NOTE: if the signature of this method changes, also update the react-partial-name ESLint rule\n// /workspaces/github/ui/packages/eslint-plugin-github-monorepo/rules/react-partial-name.js\nexport function registerReactPartial(name: string, registration: PartialRegistration) {\n  partialRegistry.register(name, registration)\n}\n","import safeStorage from '@github-ui/safe-storage'\n\nconst {getItem, setItem, removeItem} = safeStorage('localStorage')\nconst REACT_PROFILING_ENABLED = 'REACT_PROFILING_ENABLED'\n\ninterface ReactProfilingModeMethods {\n  enable: () => void\n  disable: () => void\n  isEnabled: () => boolean\n}\n\nconst ReactProfilingMode: ReactProfilingModeMethods = {\n  enable: () => setItem(REACT_PROFILING_ENABLED, 'true'),\n  disable: () => removeItem(REACT_PROFILING_ENABLED),\n  isEnabled: () => !!getItem(REACT_PROFILING_ENABLED),\n}\n\nexport default ReactProfilingMode\n","import safeStorage from './safe-storage'\n\nexport const {getItem, setItem, removeItem} = safeStorage('sessionStorage')\n","export const SOFT_NAV_STATE = Object.freeze({\n  INITIAL: 'soft-nav:initial',\n  START: 'soft-nav:start',\n  SUCCESS: 'soft-nav:success',\n  ERROR: 'soft-nav:error',\n  FRAME_UPDATE: 'soft-nav:frame-update',\n  END: 'soft-nav:end',\n  RENDER: 'soft-nav:render',\n  PROGRESS_BAR: {\n    START: 'soft-nav:progress-bar:start',\n    END: 'soft-nav:progress-bar:end',\n  },\n})\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\nimport type {SoftNavMechanism} from './events'\n\nexport const DEFAULT_SOFT_NAV_ERROR_REASON = 'reload'\n\nexport const SOFT_NAV_FAIL = 'soft-nav:fail'\nexport const SOFT_NAV_FAIL_REFERRER = 'soft-nav:fail-referrer'\nexport const SOFT_NAV_REFERRER = 'soft-nav:referrer'\nexport const SOFT_NAV_MARK = 'soft-nav:marker'\nexport const SOFT_NAV_REACT_APP_NAME = 'soft-nav:react-app-name'\nexport const SOFT_NAV_LATEST_MECHANISM = 'soft-nav:latest-mechanism'\n\nexport function clearSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n  removeItem(SOFT_NAV_REFERRER)\n  removeItem(SOFT_NAV_FAIL)\n  removeItem(SOFT_NAV_FAIL_REFERRER)\n  removeItem(SOFT_NAV_REACT_APP_NAME)\n  removeItem(SOFT_NAV_LATEST_MECHANISM)\n}\n\nexport function setSoftNavMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_MARK, mechanism)\n}\n\nexport function unsetSoftNav() {\n  setItem(SOFT_NAV_MARK, '0')\n}\n\nexport function inSoftNav() {\n  const softNav = getItem(SOFT_NAV_MARK)\n  return softNav && softNav !== '0'\n}\n\nexport function getSoftNavMechanism(): SoftNavMechanism {\n  return getItem(SOFT_NAV_MARK) as SoftNavMechanism\n}\n\nexport function hasSoftNavFailure() {\n  return Boolean(getSoftNavFailReason())\n}\n\nexport function getSoftNavFailReason() {\n  return getItem(SOFT_NAV_FAIL)\n}\n\nexport function setSoftNavFailReason(reason: string) {\n  setItem(SOFT_NAV_FAIL, reason || DEFAULT_SOFT_NAV_ERROR_REASON)\n  setItem(SOFT_NAV_FAIL_REFERRER, window.location.href)\n}\n\nexport function setSoftNavReferrer() {\n  setItem(SOFT_NAV_REFERRER, window.location.href)\n}\n\nexport function getSoftNavReferrer() {\n  return getItem(SOFT_NAV_REFERRER) || document.referrer\n}\n\nexport function setSoftNavReactAppName() {\n  const appName = getCurrentReactAppName()\n\n  if (appName) {\n    setItem(SOFT_NAV_REACT_APP_NAME, appName)\n  } else {\n    removeItem(SOFT_NAV_REACT_APP_NAME)\n  }\n}\n\nexport function getSoftNavReactAppName() {\n  return getItem(SOFT_NAV_REACT_APP_NAME)\n}\n\nexport function getCurrentReactAppName() {\n  if (document.querySelector('meta[name=\"ui\"]')) return 'ui'\n\n  return document.querySelector('react-app')?.getAttribute('app-name')\n}\n\nexport function setLatestMechanism(mechanism: SoftNavMechanism) {\n  setItem(SOFT_NAV_LATEST_MECHANISM, mechanism)\n}\n\nexport function getLatestMechanism() {\n  return getItem(SOFT_NAV_LATEST_MECHANISM) as SoftNavMechanism\n}\n","import memoize from '@github/memoize'\nimport {repositoryTreePath} from '@github-ui/paths'\nimport type {CommitWithStatus} from '@github-ui/repos-types'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport {useEffect, useState} from 'react'\n\nasync function fetchJSON(url: string): Promise<CommitWithStatus | undefined> {\n  const response = await verifiedFetchJSON(url)\n  if (response.ok) {\n    return await response.json()\n  } else {\n    return undefined\n  }\n}\n\nconst memoizeCache = new Map()\nconst memoizeFetchJSON = memoize(fetchJSON, {cache: memoizeCache})\n\nexport function resetMemoizeFetchJSON() {\n  memoizeCache.clear()\n}\n\n/**\n * Retrieve information of latest commit of current blob or ref and path\n * If we have a current blob payload and it has latest commit, it will be returned immediately\n * Otherwise, we will fetch the latest commit from the server with the ref and path\n * Tree commits are always fetched from the server using the ref and path\n *\n * returns an array with latest commit, loading state and error\n * while loading returns [undefined, true, false]\n * if cannot retrieve latest commit, returns [undefined, false, true]\n */\nexport function useLatestCommit(\n  repoOwner: string | undefined,\n  repoName: string | undefined,\n  commitish: string | undefined,\n  path: string | undefined,\n): [CommitWithStatus | undefined, boolean, boolean] {\n  const [latestCommit, setLatestCommit] = useState<CommitWithStatus>()\n  const [error, setError] = useState(false)\n  const [loading, setLoading] = useState(true)\n\n  const commitInfoPath =\n    repoName && repoOwner && commitish && path\n      ? repositoryTreePath({\n          repo: {name: repoName, ownerLogin: repoOwner},\n          commitish,\n          action: 'latest-commit',\n          path,\n        })\n      : null\n\n  // Adding a hook-specific reset call solution to reset memoize cache\n  // We accept the cost of resetting the cache once per hook instance, as the cost of resetting the cache is cheap\n  // If we implement Relay, it replaces this solution\n  useEffect(() => {\n    document.addEventListener(SOFT_NAV_STATE.START, resetMemoizeFetchJSON)\n\n    return () => {\n      document.removeEventListener(SOFT_NAV_STATE.START, resetMemoizeFetchJSON)\n    }\n  })\n\n  useEffect(() => {\n    let cancelled = false\n\n    const update = async () => {\n      if (!commitInfoPath) return\n\n      setError(false)\n      setLoading(true)\n      setLatestCommit(undefined)\n      const commit = await memoizeFetchJSON(commitInfoPath)\n\n      if (cancelled) {\n        return\n      }\n\n      try {\n        if (commit) {\n          setLatestCommit(commit)\n        } else {\n          setError(true)\n        }\n      } catch (e) {\n        setError(true)\n      }\n      setLoading(false)\n    }\n\n    update()\n\n    return function cancel() {\n      cancelled = true\n    }\n  }, [commitInfoPath, commitish])\n\n  return [latestCommit, loading, error]\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"square\":\"AskCopilotButton-module__square--o8kDO\",\"muted\":\"AskCopilotButton-module__muted--QatcG\"};","import {usePortalTooltip} from '@github-ui/portal-tooltip/use-portal-tooltip'\nimport {CopilotIcon} from '@primer/octicons-react'\nimport {IconButton} from '@primer/react'\nimport {clsx} from 'clsx'\nimport type {ComponentProps} from 'react'\nimport {useRef} from 'react'\nimport styles from './AskCopilotButton.module.css'\n\nexport interface AskCopilotButtonProps\n  extends Omit<ComponentProps<typeof IconButton>, 'icon' | 'aria-label' | 'aria-labelledby'> {\n  referenceType: string\n}\n\nexport function AskCopilotButton({children, referenceType, ...props}: AskCopilotButtonProps) {\n  const contentRef = useRef<HTMLButtonElement>(null)\n\n  const label = `Ask Copilot about this ${referenceType}`\n\n  const [attrs, portalElement] = usePortalTooltip({\n    'aria-label': label,\n    contentRef,\n    direction: 'sw',\n    anchorSide: 'outside-bottom',\n  })\n\n  return (\n    <>\n      {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n      <IconButton\n        unsafeDisableTooltip={true}\n        className={clsx(styles['square'], !!children && styles['muted'])}\n        ref={contentRef}\n        icon={CopilotIcon}\n        size=\"small\"\n        aria-label={label}\n        data-testid=\"copilot-ask-menu\"\n        {...attrs}\n        {...props}\n      />\n      {portalElement}\n    </>\n  )\n}\n\ntry{ AskCopilotButton.displayName ||= 'AskCopilotButton' } catch {}","import {Portal, type PortalProps, sx, type SxProp, themeGet, type TooltipProps} from '@primer/react'\nimport {clsx} from 'clsx'\nimport {forwardRef, useSyncExternalStore} from 'react'\nimport styled from 'styled-components'\n\n/**\n * This file is a copy of the file at: {@link https://github.com/primer/react/blob/main/src/Tooltip.tsx} with\n * some modifications to allow the tooltip to be controlled by the parent component.\n */\n\nconst TooltipBase = styled.span<SxProp>`\n  &::after {\n    position: absolute;\n    z-index: 1000000;\n    display: none;\n    /* stylelint-disable-next-line primer/spacing */\n    padding: 0.5em 0.75em;\n    font: normal normal 11px/1.5 ${themeGet('fonts.normal')};\n    -webkit-font-smoothing: subpixel-antialiased;\n    color: ${themeGet('colors.fg.onEmphasis')};\n    text-align: center;\n    text-decoration: none;\n    text-shadow: none;\n    text-transform: none;\n    letter-spacing: normal;\n    word-wrap: break-word;\n    white-space: pre;\n    pointer-events: none;\n    content: attr(data-visible-text);\n    background: ${themeGet('colors.neutral.emphasisPlus')};\n    border-radius: ${themeGet('radii.2')};\n    opacity: 0;\n  }\n  /* delay animation for tooltip */\n  @keyframes tooltip-appear {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  &.tooltipped-open,\n  &:hover,\n  &:active,\n  &:focus {\n    &::after {\n      display: inline-block;\n      text-decoration: none;\n      animation-name: tooltip-appear;\n      animation-duration: 0.1s;\n      animation-fill-mode: forwards;\n      animation-timing-function: ease-in;\n      animation-delay: 0s;\n    }\n  }\n\n  &.tooltipped-no-delay.tooltipped-open,\n  &.tooltipped-no-delay:hover,\n  &.tooltipped-no-delay:active,\n  &.tooltipped-no-delay:focus {\n    &::after {\n      animation-delay: 0s;\n    }\n  }\n\n  /* Tooltipped south */\n  &.tooltipped-s,\n  &.tooltipped-se,\n  &.tooltipped-sw {\n    &::after {\n      top: 100%;\n      right: 50%;\n      /* stylelint-disable-next-line primer/spacing */\n      margin-top: 6px;\n    }\n  }\n  &.tooltipped-se {\n    &::after {\n      right: auto;\n      left: 50%;\n      margin-left: -${themeGet('space.3')};\n    }\n  }\n  &.tooltipped-sw::after {\n    margin-right: -${themeGet('space.3')};\n  }\n  /* Tooltips above the object */\n  &.tooltipped-n,\n  &.tooltipped-ne,\n  &.tooltipped-nw {\n    &::after {\n      right: 50%;\n      bottom: 100%;\n      /* stylelint-disable-next-line primer/spacing */\n      margin-bottom: 6px;\n    }\n  }\n  &.tooltipped-ne {\n    &::after {\n      right: auto;\n      left: 50%;\n      margin-left: -${themeGet('space.3')};\n    }\n  }\n  &.tooltipped-nw::after {\n    margin-right: -${themeGet('space.3')};\n  }\n  /* Move the tooltip body to the center of the object. */\n  &.tooltipped-s::after,\n  &.tooltipped-n::after {\n    transform: translateX(50%);\n  }\n  /* Tooltipped to the left */\n  &.tooltipped-w {\n    &::after {\n      right: 100%;\n      bottom: 50%;\n      /* stylelint-disable-next-line primer/spacing */\n      margin-right: 6px;\n      transform: translateY(50%);\n    }\n  }\n  /* tooltipped to the right */\n  &.tooltipped-e {\n    &::after {\n      bottom: 50%;\n      left: 100%;\n      /* stylelint-disable-next-line primer/spacing */\n      margin-left: 6px;\n      transform: translateY(50%);\n    }\n  }\n  &.tooltipped-align-right-2::after {\n    right: 0;\n    margin-right: 0;\n  }\n  &.tooltipped-align-left-2::after {\n    left: 0;\n    margin-left: 0;\n  }\n  ${sx};\n`\n\nexport type ControlledTooltipProps = Omit<TooltipProps, 'children'> & {\n  /**\n   * Whether the tooltip is open or closed\n   */\n  open?: boolean\n  /**\n   * Props passed into the portal\n   */\n  portalProps?: PortalProps\n}\n\nconst noop = () => () => undefined\nconst getServerSideState = () => false\nconst getClientSideState = () => true\n/**\n * An extended `@primer/react` tooltip (based on version 35.21 and prior) which allows for external control\n * using an `open` prop\n */\nexport const ControlledTooltip = forwardRef<HTMLSpanElement, ControlledTooltipProps>(function ControlledPortalTooltip(\n  {direction = 'n', className, text, noDelay, align, wrap, open = false, portalProps = {}, ...rest},\n  ref,\n) {\n  const isClientRender = useSyncExternalStore(noop, getClientSideState, getServerSideState)\n  const classes = clsx(\n    className,\n    `tooltipped-${direction}`,\n    align && `tooltipped-align-${align}-2`,\n    noDelay && 'tooltipped-no-delay',\n    wrap && 'tooltipped-multiline',\n    open && 'tooltipped-open',\n  )\n  if (!isClientRender) return null\n  return (\n    <Portal {...portalProps}>\n      <TooltipBase\n        ref={ref}\n        role=\"tooltip\"\n        aria-label={text}\n        data-visible-text={text || rest['aria-label']}\n        {...rest}\n        sx={{\n          position: 'fixed',\n          zIndex: 1,\n          ...rest.sx,\n        }}\n        className={classes}\n      />\n    </Portal>\n  )\n})\n\ntry{ ControlledTooltip.displayName ||= 'ControlledTooltip' } catch {}","import {getAnchoredPosition, type PositionSettings} from '@primer/behaviors'\nimport {forwardRef, useCallback, useImperativeHandle, useRef, useSyncExternalStore} from 'react'\n\nimport {ControlledTooltip, type ControlledTooltipProps} from './ControlledTooltip'\nimport {getScrollableParent} from '@github-ui/get-scrollable-parent'\n\nexport interface PortalTooltipProps extends ControlledTooltipProps {\n  /**\n   * A ref to the element that the tooltip should be positioned relative to\n   */\n  contentRef: React.RefObject<HTMLElement>\n  anchoredPositionAlignment?: PositionSettings['align']\n  anchorSide?: PositionSettings['side']\n  anchorOffset?: number\n  alignmentOffset?: number\n  allowOutOfBounds?: boolean\n  includeAriaAttributes?: boolean\n}\n\n/**\n * A tooltip that portals an uses absolute positioning to position itself relative to the contentRef\n *\n * it tricks scroll in the nearest scrollable parent to the contentRef to reposition itself.\n *\n * For now this uses the aria-label prop similar to the primer tooltip, but a more complete implementation\n * would allow for using children to tooltip rich content\n */\nexport const PortalTooltip = forwardRef<HTMLSpanElement, PortalTooltipProps & {id: string}>(function PortalTooltip(\n  {contentRef, open, anchoredPositionAlignment, anchorSide, anchorOffset, alignmentOffset, allowOutOfBounds, ...props},\n  forwardedRef,\n) {\n  const ref = useRef<HTMLSpanElement>(null)\n  useImperativeHandle<HTMLSpanElement | null, HTMLSpanElement | null>(forwardedRef, () => ref.current)\n\n  const positionCache = useRef<{left: number; top: number}>({left: 0, top: 0})\n  const position = useSyncExternalStore(\n    useCallback(\n      notify => {\n        if (!ref.current || !contentRef.current || !open) {\n          return () => undefined\n        }\n        const scrollableParent = getScrollableParent(contentRef.current)\n        // eslint-disable-next-line github/prefer-observers\n        scrollableParent?.addEventListener('scroll', notify)\n        return () => {\n          scrollableParent?.removeEventListener('scroll', notify)\n        }\n      },\n      [contentRef, open],\n    ),\n    useCallback(() => {\n      if (!ref.current || !contentRef.current) {\n        return positionCache.current\n      }\n      const nextPosition = getAnchoredPosition(ref.current, contentRef.current, {\n        align: anchoredPositionAlignment ?? 'center',\n        side: anchorSide ?? 'outside-top',\n        alignmentOffset: alignmentOffset ?? 0,\n        anchorOffset: anchorOffset ?? 0,\n        allowOutOfBounds,\n      })\n      if (nextPosition.left !== positionCache.current.left || nextPosition.top !== positionCache.current.top) {\n        positionCache.current = nextPosition\n      }\n      return positionCache.current\n    }, [contentRef, alignmentOffset, anchorOffset, anchoredPositionAlignment, anchorSide, allowOutOfBounds]),\n    useCallback(() => positionCache.current, []),\n  )\n\n  return (\n    <ControlledTooltip\n      {...props}\n      ref={ref}\n      open={open}\n      style={{\n        position: 'absolute',\n        ...position,\n        ...props.style,\n      }}\n    />\n  )\n})\n\ntry{ PortalTooltip.displayName ||= 'PortalTooltip' } catch {}","import {useCallback, useId, useState} from 'react'\n\nimport {PortalTooltip, type PortalTooltipProps} from '../PortalTooltip'\n\nexport type {PortalTooltipProps}\n\n/**\n * A hook that returns a set of props for controlling a portal tooltip from a parent element, as well as the\n * portalled element\n *\n * This provides a simple, base case usage, without having to configure much directly, automatically generating an id and using\n * that for aria-describedby when not given an id to use instead.\n */\nexport function usePortalTooltip({includeAriaAttributes = true, ...props}: PortalTooltipProps) {\n  const id = useId()\n  const [open, setOpen] = useState(false)\n  const isOpen = props.open ?? open\n  const actualId = props.id ?? id\n  const ariaAttributes = includeAriaAttributes\n    ? {\n        'aria-describedby': actualId,\n      }\n    : {}\n\n  const onSetOpen = useCallback(() => setOpen(true), [])\n  const onSetClose = useCallback(() => setOpen(false), [])\n\n  return [\n    {\n      ...ariaAttributes,\n      onPointerEnter: onSetOpen,\n      onPointerLeave: onSetClose,\n      onFocus: onSetOpen,\n      onBlur: onSetClose,\n    },\n    <PortalTooltip key=\"portal-tooltip\" {...props} open={isOpen} id={actualId} />,\n  ] as const\n}\n","import {ErrorPage} from './ErrorPage'\nimport React from 'react'\n\n// NOTE(jon, 2022-02-28): I copied 99% of this from memex's error-boundary\n\nexport interface ErrorBoundaryProps {\n  children: React.ReactNode\n  fallback?: React.ReactNode\n  /**\n   * Provide a callback to be invoked when an error is thrown (can be used for logging errors)\n   */\n  onError?: (error: Error) => void\n}\n\ninterface ErrorBoundaryState {\n  error: Error | null\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props)\n\n    this.state = {\n      error: null,\n    }\n  }\n\n  /**\n   * Invoked when an error is thrown in the child component,\n   * and used to update state in a concurrent friendly manner\n   */\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  /**\n   * Called _after_ the re-render, used for performing side-effects such as logging\n   */\n  override componentDidCatch(error: Error) {\n    if (typeof this.props.onError === 'function') {\n      this.props.onError(error)\n    } else {\n      defaultOnError(error)\n    }\n  }\n\n  override render() {\n    if (!this.state.error) return this.props.children\n\n    return this.props.fallback === undefined ? <ErrorPage type=\"httpError\" /> : this.props.fallback\n  }\n}\n\n/**\n * Re-throws the error out of the rendering context to ensure that it propagates to failbot.\n * Also avoids react unmounting the entire tree from an uncaught error.\n */\nfunction defaultOnError(error: Error) {\n  setTimeout(() => {\n    throw error\n  })\n}\n","import {Box, Heading} from '@primer/react'\nimport type {PageError} from './app-routing-types'\n\nconst errorMessages: {[httpStatus: number]: string} = {\n  404: 'Didn’t find anything here!',\n  500: 'Looks like something went wrong!',\n}\n\nexport function ErrorPage({httpStatus, type}: PageError) {\n  const message = type === 'fetchError' ? 'Looks like network is down!' : errorMessages[httpStatus || 500]\n  return (\n    <Heading\n      as=\"h1\"\n      tabIndex={-1}\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: '100%',\n        minHeight: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      Error\n      {httpStatus ? <Box sx={{fontSize: '144px', fontWeight: 'bold', lineHeight: 1}}>{httpStatus}</Box> : null}\n      <Box sx={{fontSize: 4, pt: 2}}>{message}</Box>\n    </Heading>\n  )\n}\n\ntry{ ErrorPage.displayName ||= 'ErrorPage' } catch {}","import {useState} from 'react'\nimport type {BrowserHistory, MemoryHistory} from '@remix-run/router'\nimport {Router} from 'react-router-dom'\n// eslint-disable-next-line no-restricted-imports\nimport {useHydratedEffect} from '@github-ui/use-hydrated-effect'\n\ntype Props = {\n  children: React.ReactNode\n  history: BrowserHistory | MemoryHistory\n}\n\nexport function PartialRouter({children, history}: Props) {\n  const [state, setState] = useState({\n    location: history.location,\n  })\n\n  useHydratedEffect(() => history.listen(setState), [history])\n\n  return (\n    <Router location={state.location} navigator={history}>\n      {children}\n    </Router>\n  )\n}\n\ntry{ PartialRouter.displayName ||= 'PartialRouter' } catch {}","// Think of this as the entry point into the framework\nimport React from 'react'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {BaseProviders} from './BaseProviders'\nimport type {BrowserHistory} from '@remix-run/router'\nimport {createMemoryHistory} from '@remix-run/router'\nimport {AppContextProvider} from './AppContextProvider'\nimport {PartialRouter} from './PartialRouter'\nimport {CommonElements} from './CommonElements'\nimport {createBrowserHistory} from './create-browser-history'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {usePartialAnchorProps} from './react-partial-anchor'\n\ninterface Props {\n  partialName: string\n  embeddedData: EmbeddedPartialData\n  Component: React.ComponentType\n  wasServerRendered: boolean\n  ssrError?: HTMLScriptElement\n  anchorElement?: ReactPartialAnchorElement | null\n}\n\nexport function PartialEntry({\n  partialName,\n  embeddedData,\n  Component,\n  wasServerRendered,\n  ssrError,\n  anchorElement,\n}: Props) {\n  // Create a ref to track the browser history:\n  const historyRef = React.useRef<BrowserHistory>()\n  const window = globalThis.window as Window | undefined\n\n  // For linking to work, we can just pass a dummy pathname here. We may consider plumbing the actual path in\n  if (!historyRef.current) {\n    historyRef.current = !window\n      ? createMemoryHistory({initialEntries: [{pathname: '/'}]})\n      : createBrowserHistory({window})\n  }\n  const history = historyRef.current\n  const partialAnchorProps = usePartialAnchorProps(anchorElement)\n\n  // Wrap the partial in an AppContextProvider and static Router so that react-core links\n  // will be functional.\n  return (\n    <BaseProviders appName={partialName} wasServerRendered={wasServerRendered}>\n      <AppContextProvider history={history} routes={[]}>\n        <PartialRouter history={history}>\n          <Component {...embeddedData.props} {...(partialAnchorProps as object)} />\n          <CommonElements ssrError={ssrError} />\n        </PartialRouter>\n      </AppContextProvider>\n    </BaseProviders>\n  )\n}\n\ntry{ PartialEntry.displayName ||= 'PartialEntry' } catch {}","import {target} from '@github/catalyst'\nimport {createRoot, hydrateRoot} from 'react-dom/client'\nimport type {createRoot as createRootType, hydrateRoot as hydrateRootType, Root} from 'react-dom/client'\nimport React from 'react'\nimport ReactProfilingMode from '@github-ui/react-profiling-mode'\nimport {EXPECTED_ERRORS} from './expected-errors'\nimport {sendStats} from '@github-ui/stats'\n\ntype ReactDOM = {\n  createRoot: typeof createRootType\n  hydrateRoot: typeof hydrateRootType\n}\n\nconst REACT_INVARIANT_ERROR_REGEX = /Minified React error #(?<invariant>\\d+)/\n\nexport abstract class ReactBaseElement<T> extends HTMLElement {\n  @target embeddedData: HTMLScriptElement | undefined\n  @target ssrError: HTMLScriptElement | undefined\n  @target reactRoot: HTMLElement | undefined\n  private root: Root | undefined\n\n  abstract nameAttribute: string\n  abstract getReactNode(embeddedData: T): Promise<React.ReactNode>\n\n  protected get name() {\n    return this.getAttribute(this.nameAttribute) as string\n  }\n\n  private get embeddedDataText() {\n    const text = this.embeddedData?.textContent\n\n    if (!text) {\n      throw new Error(`No embedded data provided for react element ${this.name}`)\n    }\n\n    return text\n  }\n\n  get hasSSRContent() {\n    return this.getAttribute('data-ssr') === 'true'\n  }\n\n  connectedCallback() {\n    this.renderReact()\n  }\n\n  disconnectedCallback() {\n    this.root?.unmount()\n    this.root = undefined\n  }\n\n  private async renderReact() {\n    if (!this.reactRoot) throw new Error('No react root provided')\n    let reactDom: ReactDOM = {\n      createRoot,\n      hydrateRoot,\n    }\n\n    // Override the react-dom import if we're in profiling mode\n    if (ReactProfilingMode.isEnabled()) {\n      reactDom = await this.getReactDomWithProfiling()\n    }\n\n    const embeddedData = JSON.parse(this.embeddedDataText) as T\n    const ssrErrorText = this.ssrError?.textContent\n    const node = await this.getReactNode(embeddedData)\n    const baseNode = <React.StrictMode>{node}</React.StrictMode>\n\n    if (ssrErrorText) {\n      this.logSSRError(ssrErrorText)\n    }\n\n    if (this.hasSSRContent) {\n      /**\n       * Styled-components automatically looks for style tags to hydrate on first page load, but will not detect them\n       * if they are added after the initial page load. This causes a hydration error because React isn't expecting\n       * a style tag within the app. To work around this, we need to manually move the style tags to the head before\n       * hydrating the app.\n       *\n       * During hydration, styled-components will create a new style tag which matches the one we moved to the head.\n       * This means that after hydration, we can safely remove the style tag we manually moved to the head.\n       */\n      const styles = this.querySelector('style[data-styled=\"true\"]')\n      if (styles) document.head.appendChild(styles)\n\n      // Hydrate the react app\n      // onRecoverableError is disabled until we have a react version with this fix in:\n      // https://github.com/facebook/react/pull/25692\n      this.root = reactDom.hydrateRoot(this.reactRoot, baseNode, {\n        onRecoverableError: error => {\n          if (!(error instanceof Error)) return\n\n          const match = REACT_INVARIANT_ERROR_REGEX.exec(error.message)\n          const invariant = String(match?.groups?.invariant)\n\n          sendStats({\n            incrementKey: 'REACT_HYDRATION_ERROR',\n            incrementTags: {\n              appName: this.name,\n              invariant,\n            },\n          })\n        },\n      })\n\n      // Remove the manually moved style tag after hydration\n      if (styles) {\n        // Wait until things are idle to remove the style tag. If we do it immediately, we can cause a flash of unstyled content.\n        requestIdleCallback(() => {\n          // styles could have already been removed by Turbo if a navigation happens quickly. Only remove it from the DOM if it's still there.\n          styles.parentElement?.removeChild(styles)\n        })\n      }\n    } else {\n      this.root = reactDom.createRoot(this.reactRoot)\n      this.root.render(baseNode)\n    }\n\n    this.classList.add('loaded')\n  }\n\n  private getReactDomWithProfiling() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return import('react-dom/profiling') as any as Promise<ReactDOM>\n  }\n\n  private logSSRError(ssrErrorText: string) {\n    if (EXPECTED_ERRORS[ssrErrorText]) {\n      // eslint-disable-next-line no-console\n      return console.error('SSR failed with an expected error:', EXPECTED_ERRORS[ssrErrorText])\n    }\n\n    try {\n      const error = JSON.parse(ssrErrorText) as PlatformJavascriptError\n      const stacktrace = parseFailbotStacktrace(error)\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', `${error.type}: ${error.value}\\n`, error, stacktrace)\n    } catch {\n      /**\n       * In the event we couldn't log the error, we should not break the application\n       */\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', ssrErrorText, 'unable to parse as json')\n    }\n  }\n}\n\nfunction parseFailbotStacktrace(error: PlatformJavascriptError) {\n  if (!error.stacktrace) return ''\n  let prefix = '\\n '\n  const stack = error.stacktrace.map((frame: PlatformStackframe) => {\n    const {function: func, filename, lineno, colno} = frame\n    const line = `${prefix} at ${func} (${filename}:${lineno}:${colno})`\n    prefix = ' '\n    return line\n  })\n  return stack.join('\\n')\n}\n\ntry{ REACT_INVARIANT_ERROR_REGEX.displayName ||= 'REACT_INVARIANT_ERROR_REGEX' } catch {}"],"names":["assertDataPresent","data","OpenCopilotChatEvent","Event","constructor","payload","bubbles","cancelable","AddCopilotChatReferenceEvent","reference","openPanel","id","SymbolChangedEvent","context","publishOpenCopilotChat","window","dispatchEvent","publishAddCopilotChatReference","subscribeOpenCopilotChat","listener","addEventListener","removeEventListener","subscribeAddCopilotChatReference","subscribeSearchCopilot","subscribeSymbolChanged","TREE_COMPARISON_REFERENCE_TYPE","CopilotChatIntents","explain","conversation","suggest","askDocs","discussFileDiff","explainFileDiff","reviewPr","MESSAGE_STREAMING_ERROR_TYPES","SUPPORTED_FUNCTIONS","node","v0","v1","v2","v3","v4","v5","v6","v7","v8","v9","v10","v11","v12","v13","v14","v15","v16","v17","v18","v19","v20","v21","hash","DiffSelectionEvent","dispatch","NAME","CopilotDiffEntryStore","EventTarget","entries","clear","Set","connect","entry","intersectionObserver","observe","disconnect","unobserve","_intersectionObserver","IntersectionObserver","intersections","newEntries","hasChanges","intersection","target","isIntersecting","has","add","delete","document","contains","rootMargin","CopilotDiffEntryElement","HTMLElement","connectedCallback","menuItemsSlot","replaceChildren","store","disconnectedCallback","filePath","disabled","attr","controller","sharedItemProps","className","clsx","styles","role","DiffEntryMenuItems","fileDiffReference","addToast","useToastContext","undefined","BuildMenu","inactiveText","handleAttach","message","type","sendEvent","handleDiscuss","intent","references","ActionList","Item","onSelect","displayName","DIFF_LINES_COPILOT_BUTTON_ID","DiffLinesAskCopilotButton","afterSelect","AskCopilotButton","referenceType","onClick","DiffLinesMenu","onOpenChange","open","_setOpen","useState","setOpen","newOpen","buttonRef","useRef","buttonProps","portalElement","usePortalTooltip","contentRef","direction","anchorSide","closeMenu","ButtonGroup","ActionMenu","anchorRef","Anchor","IconButton","unsafeDisableTooltip","icon","TriangleDownIcon","aria-label","ref","size","data-testid","Overlay","align","DiffLinesExplainMenuItem","Divider","DiffLinesAttachMenuItem","useObserveSelector","selector","elementClass","Element","cachedValue","useSyncExternalStore","onUpdate","observer","MutationObserver","body","subtree","childList","a","elements","Array","from","querySelectorAll","filter","e","current","length","b","every","value","index","subscribe","notify","capture","useIsFocusWithinElement","element","activeElement","useSelectedLines","location","lineRange","parseLineRangeHash","rightElement","querySelector","leftElement","topRightElement","useHoveredLines","hoveredLine","setHoveredLine","allLineElements","HTMLTableCellElement","useEffect","onEnterLine","onExitLine","line","leftNumberCell","rightNumberCell","parentElement","useFocusVisibleLines","focusedLine","setFocusedLine","isFocusWithinLine","useActiveDiffLines","byId","Map","hovered","set","diffAnchor","selected","focusVisible","PullRequestFragment","DiffEntryQuery","useEntryElements","InjectedDiffButton","activeLines","newActiveLines","isMenuOpen","setIsMenuOpen","lastActiveLines","fileDiffReferenceWithSelection","selectedRange","start","startOrientation","toUpperCase","startLineNumber","end","endOrientation","endLineNumber","createPortal","InjectedDiffEntry","entryElement","startOid","endOid","pullRequestKey","activeLinesById","pullRequest","useFragment","comparison","entryKey","useLazyLoadQuery","prId","path","diffEntry","latestCommit","useLatestCommit","repository","owner","login","name","useFileDiffReference","oid","get","InjectedDiffEntries","entryElements","map","ErrorBoundary","fallback","Suspense","relayEnvironment","relayEnvironmentWithMissingFieldHandlerForNode","DiffChatQuery","DiffChat","props","DiffHeaderAskCopilotButton","CopilotDiffChatPartial","classList","RelayEnvironmentProvider","environment","ErrorAskCopilotButton","LoadingAskCopilotButton","registerReactPartial","Component","hasScrollableParent","computedStyle","getComputedStyle","some","overflow","getPropertyValue","collectParents","ps","parentNode","concat","getScrollableParent","SVGElement","item","scrollingElement","documentElement","hydroAnalyticsClient","getItem","safeStorage","dimensionPrefix","MARKETING_PARAMS","options","getOptionsFromMeta","baseContext","AnalyticsClient","_","extendBaseContext","key","app_id","event_url","host","Object","startsWith","replace","visitorMeta","assign","JSON","parse","atob","content","URLSearchParams","search","includes","toLowerCase","staff","isStaff","toString","sendPageView","service","head","cleanContext","stringifyObjectValues","obj","fromEntries","k","v","stringify","DeferredRegistry","register","registration","registrationEntries","resolve","promise","Promise","getRegistration","Deferred","usePartialAnchorProps","anchorElement","anchor","remove","reactPartialAnchor","__wrapperElement","useExternalAnchor","useCallback","setAttribute","useOnAnchorClick","partialRegistry","ReactPartialElement","ReactBaseElement","getReactNode","embeddedData","appName","closest","PartialEntry","partialName","wasServerRendered","hasSSRContent","ssrError","nameAttribute","setItem","removeItem","REACT_PROFILING_ENABLED","enable","disable","isEnabled","SOFT_NAV_STATE","freeze","INITIAL","START","SUCCESS","ERROR","FRAME_UPDATE","END","RENDER","PROGRESS_BAR","DEFAULT_SOFT_NAV_ERROR_REASON","SOFT_NAV_FAIL","SOFT_NAV_FAIL_REFERRER","SOFT_NAV_REFERRER","SOFT_NAV_MARK","SOFT_NAV_REACT_APP_NAME","SOFT_NAV_LATEST_MECHANISM","clearSoftNav","setSoftNavMechanism","mechanism","unsetSoftNav","inSoftNav","softNav","getSoftNavMechanism","hasSoftNavFailure","Boolean","getSoftNavFailReason","setSoftNavFailReason","reason","href","setSoftNavReferrer","getSoftNavReferrer","referrer","setSoftNavReactAppName","getCurrentReactAppName","getSoftNavReactAppName","getAttribute","setLatestMechanism","getLatestMechanism","fetchJSON","url","response","verifiedFetchJSON","ok","json","memoizeCache","memoizeFetchJSON","memoize","cache","resetMemoizeFetchJSON","repoOwner","repoName","commitish","setLatestCommit","error","setError","loading","setLoading","commitInfoPath","repositoryTreePath","repo","ownerLogin","action","cancelled","update","commit","children","label","attrs","CopilotIcon","TooltipBase","styled","span","themeGet","sx","noop","getServerSideState","getClientSideState","ControlledTooltip","forwardRef","text","noDelay","wrap","portalProps","rest","isClientRender","classes","Portal","data-visible-text","position","zIndex","PortalTooltip","anchoredPositionAlignment","anchorOffset","alignmentOffset","allowOutOfBounds","forwardedRef","useImperativeHandle","positionCache","left","top","scrollableParent","nextPosition","getAnchoredPosition","side","style","includeAriaAttributes","useId","isOpen","actualId","ariaAttributes","onSetOpen","onSetClose","onPointerEnter","onPointerLeave","onFocus","onBlur","React","getDerivedStateFromError","onError","setTimeout","render","state","ErrorPage","errorMessages","httpStatus","Heading","as","tabIndex","display","flexDirection","minWidth","minHeight","alignItems","justifyContent","Box","fontSize","fontWeight","lineHeight","pt","PartialRouter","history","setState","useHydratedEffect","listen","Router","navigator","historyRef","globalThis","createBrowserHistory","createMemoryHistory","initialEntries","pathname","partialAnchorProps","BaseProviders","AppContextProvider","routes","CommonElements","REACT_INVARIANT_ERROR_REGEX","embeddedDataText","textContent","renderReact","root","unmount","reactRoot","reactDom","createRoot","hydrateRoot","ReactProfilingMode","getReactDomWithProfiling","ssrErrorText","baseNode","logSSRError","appendChild","onRecoverableError","Error","match","exec","invariant","String","groups","sendStats","incrementKey","incrementTags","requestIdleCallback","removeChild","EXPECTED_ERRORS","console","stacktrace","parseFailbotStacktrace","prefix","stack","function","func","filename","lineno","colno","frame","join"],"sourceRoot":""}