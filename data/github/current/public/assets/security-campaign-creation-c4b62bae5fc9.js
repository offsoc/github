"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["security-campaign-creation"],{34850:(e,t,r)=>{r.d(t,{t:()=>n});var a=r(93800);let n=({items:e,filter:t,key:r,secondaryKey:n})=>{let i=e.map(e=>[(0,a.dt)(t,r(e)),e]);return n&&(i=i.map(([e,r])=>[Math.max(e,(0,a.dt)(t,n(r))),r])),i.filter(([e])=>e>a.IP).sort(([e,t],[a,n])=>a===e?r(t).localeCompare(r(n)):a-e).map(([,e])=>e)}},93800:(e,t,r)=>{r.d(t,{Dx:()=>s,IP:()=>i,dt:()=>o});var a=r(91385);let n=1/0,i=-1/0,s=1,o=(e,t,r=s)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return n;if(0===l.length||0===o.length)return i;let c=(0,a.fN)(o,l);return c===1/0&&o!==l?i:l.startsWith(o)||l.endsWith(o)?c+r:c}},12480:(e,t,r)=>{r.d(t,{U0:()=>i});var a=r(97156);let n={Android:"Android",iOS:"iOS",macOS:"macOS",Windows:"Windows",Linux:"Linux",Unknown:"Unknown"};function i(){return function(){let e=n.Unknown,t=!1;if(a.cg){let r=a.cg.navigator,i=r.userAgent,s=r?.userAgentData?.platform||r.platform;-1!==["Macintosh","MacIntel","MacPPC","Mac68K","macOS"].indexOf(s)?e=n.macOS:-1!==["iPhone","iPad","iPod"].indexOf(s)?e=n.iOS:-1!==["Win32","Win64","Windows","WinCE"].indexOf(s)?e=n.Windows:/Android/.test(i)?e=n.Android:/Linux/.test(s)&&(e=n.Linux),t=r?.userAgentData?.mobile??(e===n.Android||e===n.iOS)}return{os:e,isAndroid:e===n.Android,isIOS:e===n.iOS,isMacOS:e===n.macOS,isWindows:e===n.Windows,isLinux:e===n.Linux,isDesktop:e===n.macOS||e===n.Windows||e===n.Linux,isMobile:t}}().isMacOS}},51848:(e,t,r)=>{let a;r.d(t,{BI:()=>p,Ti:()=>h,lA:()=>m});var n=r(70837),i=r(97524),s=r(74572),o=r(51528);let{getItem:l}=(0,s.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,n.O)("octolytics");delete e.baseContext,a=new i.s(e)}catch(e){}function u(e){let t=(0,n.O)("octolytics").baseContext||{};if(t)for(let[e,r]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=r,delete t[e]);let r=document.querySelector("meta[name=visitor-payload]");for(let[e,a]of(r&&Object.assign(t,JSON.parse(atob(r.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=a);return t.staff=(0,o.X)().toString(),Object.assign(t,e)}function m(e){a?.sendPageView(u(e))}function p(e,t={}){let r=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,n=r?{service:r}:{};for(let[e,r]of Object.entries(t))null!=r&&(n[e]=`${r}`);a&&(u(n),a.sendEvent(e||"unknown",u(n)))}function h(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new a),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let a=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>i,QJ:()=>s,w8:()=>n});var a=r(55293);function n(e){return((0,a.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function i(e){let t=(0,a.useRef)(e.__wrapperElement.anchor||null),[r,n]=(0,a.useState)(!1),i=(0,a.useCallback)(()=>{n(!r)},[r,n]);return(0,a.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),s(e,i),{ref:t,open:r,setOpen:n}}function s(e,t){let r=(0,a.useRef)(e.__wrapperElement.anchor);(0,a.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let a=new(r(92536)).R;var n=r(9449),i=r(39595),s=r(24508),o=r(23235);let l=class ReactPartialElement extends s.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,a.getRegistration(t)),i=this.closest("react-partial-anchor");return(0,n.jsx)(o.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:i})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){a.register(e,t)}l=function(e,t,r,a){var n,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}([i.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>o});let{getItem:a,setItem:n,removeItem:i}=(0,r(74572).A)("localStorage"),s="REACT_PROFILING_ENABLED",o={enable:()=>n(s,"true"),disable:()=>i(s),isEnabled:()=>!!a(s)}},60129:(e,t,r)=>{var a,n=r(72245),i=r(9449),s=r(97665),o=r(31030),l=r(55293),c=r(75177),d=r(55847),u=r(71312),m=r(86079);function p({maxCampaigns:e,setIsOpen:t}){let r=(0,l.useCallback)(()=>{t(!1)},[t]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.l,{title:"Campaign limit reached",onClose:r,width:"small",footerButtons:[{buttonType:"default",content:"I understand",onClick:()=>t(!1)}],children:(0,i.jsxs)("span",{children:["This organization has reached the limit of ",(0,i.jsxs)("b",{children:[e," active campaigns"]}),". To create a new campaign, first delete an existing one."]})})})}try{p.displayName||(p.displayName="SecurityCampaignsLimitDialog")}catch{}var h=r(94747),g=r(207),f=r(69909);function y({maxAlerts:e,setIsOpen:t,continueToCreationDialog:r}){let a=(0,l.useCallback)(()=>{t(!1)},[t]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(m.l,{title:"This looks like a big campaign",onClose:a,width:"large",footerButtons:[{buttonType:"default",content:"Keep filtering",onClick:()=>t(!1)},{buttonType:"danger",content:"I understand, proceed anyway",onClick:()=>r()}],children:[(0,i.jsxs)("p",{children:["Security campaigns aim to identify specific threats and set clear, achievable goals for developers. However,"," ","campaigns with a high number of alerts per repository can place significant strain on developers."]}),(0,i.jsxs)(f.A,{sx:{fontWeight:"bold"},as:"p",children:["Consider narrowing down the list of alerts before proceeding. If you continue, only the first ",e," ","alerts will be added to the campaign."]})]})})}try{y.displayName||(y.displayName="SecurityCampaignsAlertsLimitDialog")}catch{}var _=r(76049),x=r(65481),b=r(73729),w=r(11023),j=r(28784);async function v(e,{defaultErrorMessage:t="Sorry, something went wrong",...r}={}){let a;try{a=await (0,j.DI)(e,r)}catch(e){throw Error(t)}if(!a.ok)throw new w.h(t,a)}var C=r(59857);function S({show:e,dismissPath:t}){let[r,a]=(0,l.useState)(e),{mutate:n,isPending:s,error:o}=(0,h.n)({mutationFn:()=>v(t,{method:"post"})}),c=(0,l.useCallback)(async()=>{n(void 0,{onSuccess:()=>{a(!1)}})},[n]);return r&&(0,i.jsx)(_.A,{open:r,caret:"top",sx:{left:"50%",transform:"translateX(-50%)",mt:2},children:(0,i.jsxs)(_.A.Content,{sx:{mt:2},children:[o&&(0,i.jsx)(x.A,{variant:"danger",children:o.message}),(0,i.jsx)(b.A,{as:"h1",sx:{fontSize:2},children:"Introducing security campaigns!"}),(0,i.jsx)(f.A,{as:"p",sx:{pt:3},children:"Security campaigns help your team set clear, achievable goals for developers to fix the most critical vulnerabilities in your organization."}),(0,i.jsx)(d.Q,{onClick:c,disabled:s,leadingVisual:s?C.SyncIcon:null,children:"Got it!"})]})})}try{S.displayName||(S.displayName="SecurityCampaignsOnboardingNotice")}catch{}function A({setIsOpen:e}){let t=(0,l.useCallback)(()=>{e(!1)},[e]);return(0,i.jsx)(m.l,{title:"That looks like an empty campaign",onClose:t,width:"large",children:(0,i.jsx)("p",{children:"There are no alerts that match the current filter. A campaign must include at least 1 alert."})})}try{A.displayName||(A.displayName="SecurityCampaignsNoAlertsDialog")}catch{}var k=r(76629),E=r(83873),R=r(16388),N=r(51514),D=r(97286),O=r(44981),I=r(86519),P=r(55127),L=r.n(P),F=r(34850),T=r(49779);function q({alertsSummary:e}){let[t,r]=(0,l.useState)(""),a=(0,l.useMemo)(()=>{if(!e)return[];let r=t.trim();return r?(0,F.t)({items:e.repositories,filter:r,key:e=>e.repository.name}):[...e.repositories].sort((e,t)=>e.repository.name.localeCompare(t.repository.name))},[t,e]),n=(0,l.useCallback)(e=>{r(e.target.value)},[]);return(0,i.jsxs)(c.A,{sx:{height:"100%"},children:[(0,i.jsx)(c.A,{sx:{padding:2,borderBottomColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid"},children:(0,i.jsx)(O.A,{type:"search",leadingVisual:C.SearchIcon,placeholder:"Search selected repositories",value:t,onChange:n,sx:{width:"100%"}})}),(0,i.jsx)(c.A,{as:"ul",sx:{height:"calc(100% - 50px)",overflowY:"auto"},children:a.map(e=>(0,i.jsxs)(c.A,{as:"li",sx:{display:"flex",justifyContent:"space-between",gap:2,padding:2,lineHeight:"20px",marginX:2,borderBottomColor:"border.default",borderBottomWidth:1,borderBottomStyle:"solid"},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,i.jsx)(T.U,{typeIcon:e.repository.typeIcon,size:16}),(0,i.jsx)(I.A,{href:e.repository.path,target:"_blank",children:(0,i.jsx)("span",{children:e.repository.name})})]}),(0,i.jsxs)(f.A,{sx:{color:"fg.muted"},children:[e.alertCount," ",L()("alert",e.alertCount)]})]},`${e.repository.ownerLogin}/${e.repository.name}`))})]})}try{q.displayName||(q.displayName="RepositoriesPanel")}catch{}function U({setIsOpen:e,campaign:t,currentUser:r,allowDueDateInPast:a,submitForm:n,isPending:s,formError:o,resetForm:d,query:u,campaignManagersPath:m,campaignAlertsSummaryPath:p,defaultDueDate:h}){var f;let[y,_]=(0,l.useState)("general"),x=async t=>{n(t,{onSuccess:()=>e(!1)})},{data:b,isPending:w}=(f={query:u},(0,D.I)({queryKey:[p,f],queryFn:()=>{let e=new URL(p,window.location.origin);return e.searchParams.set("query",f.query??""),(0,g.x)(`${e.pathname}?${e.searchParams.toString()}`)}}));return(0,i.jsx)(N.Q,{campaign:t,currentUser:r,allowDueDateInPast:a,submitForm:x,reset:d,isPending:s,formError:o,defaultDueDate:h,children:(0,i.jsxs)(R.r,{setIsOpen:e,children:[(0,i.jsxs)(k.O,{"aria-label":"Select a tab",loadingCounters:w,children:[(0,i.jsx)(k.O.Item,{"aria-current":"general"===y?"location":void 0,onSelect:()=>_("general"),children:"General"}),(0,i.jsx)(k.O.Item,{counter:b?.repositories.length??0,"aria-current":"repositories"===y?"location":void 0,onSelect:()=>_("repositories"),children:"Repositories"})]}),(0,i.jsxs)(c.A,{sx:{height:430},children:["general"===y&&(0,i.jsx)(c.A,{sx:{marginTop:2},children:(0,i.jsx)(E.l,{campaignManagersPath:m})}),"repositories"===y&&(0,i.jsx)(q,{alertsSummary:b})]})]})})}!function(e){e.General="general",e.Repositories="repositories"}(a||(a={}));try{U.displayName||(U.displayName="NewSecurityCampaignFormDialog")}catch{}function M({query:e,orgCampaignsCount:t,maxCampaigns:r,campaignCreationPath:a,campaignManagersPath:n,campaignAlertsSummaryPath:s,currentUser:o,showOnboardingNotice:m,dismissOnboardingNoticePath:f,defaultDueDate:_,alertsCount:x,maxAlerts:b}){let[w,j]=(0,l.useState)(!1),[v,C]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),{sendClickAnalyticsEvent:R}=(0,u.S)(),{mutate:N,isPending:D,error:O,reset:I}=(0,h.n)({mutationFn:e=>(0,g.x)(a,{method:"post",body:{campaign_name:e.campaignName,campaign_description:e.campaignDescription,campaign_due_date:e.campaignDueDate,campaign_manager:e.campaignManager,query:e.query}})}),P=async(t,{onSuccess:r,...a})=>{N({campaignName:t.name,campaignDescription:t.description,campaignDueDate:t.endsAt,campaignManager:t.manager?.id??0,query:e},{...a,onSuccess:(e,t,a)=>{r?.(e,t,a),window.open(e.campaignPath,"_self")}})},L=0===x,F=t>=r,T=w&&F,q=w&&!F,M=(0,l.useCallback)(e=>{R({category:"security_campaigns",action:"create",label:`location:security_center_alerts_code_scanning;dialog:${e};alerts_count:${x};org_campaigns_count:${t}`})},[R,x,t]),W=()=>L?"no_alerts":x>b&&!F?"alerts_limit":F?"campaigns_limit":"creation";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{sx:{display:"flex",alignItems:"center"},children:(0,i.jsxs)(c.A,{sx:{position:"relative"},children:[(0,i.jsx)(d.Q,{onClick:()=>{let e=W();switch(M(e),e){case"no_alerts":E(!0);break;case"alerts_limit":C(!0);break;case"campaigns_limit":case"creation":j(!0);break;default:!function(e){throw Error(`Unexpected value: ${e}`)}(e)}},size:"small",inactive:L,children:"Create campaign"}),(0,i.jsx)(S,{show:m,dismissPath:f})]})}),k&&(0,i.jsx)(A,{setIsOpen:E}),T&&(0,i.jsx)(p,{maxCampaigns:r,setIsOpen:j}),v&&(0,i.jsx)(y,{maxAlerts:b,setIsOpen:C,continueToCreationDialog:()=>{C(!1),j(!0),M("creation")}}),q&&(0,i.jsx)(U,{setIsOpen:j,allowDueDateInPast:!1,submitForm:P,isPending:D,formError:O,resetForm:I,defaultDueDate:_,currentUser:o,query:e,campaignManagersPath:n,campaignAlertsSummaryPath:s})]})}try{M.displayName||(M.displayName="SecurityCampaignCreateButton")}catch{}function W(e){return(0,i.jsx)(s.Ht,{client:o.q,children:(0,i.jsx)(M,{...e})})}try{W.displayName||(W.displayName="SecurityCampaignCreation")}catch{}(0,n.k)("security-campaign-creation",{Component:W})},11023:(e,t,r)=>{r.d(t,{h:()=>ApiError});let ApiError=class ApiError extends Error{constructor(e,t){super(e),this.response=t,Object.setPrototypeOf(this,new.target.prototype)}}},207:(e,t,r)=>{r.d(t,{x:()=>s});var a=r(28784),n=r(11023);function i(e){return e.headers?.get("Content-Type")?.includes("application/json")??!1}async function s(e,{defaultErrorMessage:t="Sorry, something went wrong",...r}={}){let s;try{s=await (0,a.lS)(e,r)}catch(e){throw Error(t)}if(s.ok){if(!i(s))throw new n.h("Response is not JSON",s);try{return s.json()}catch(e){throw new n.h(t,s)}}if(i(s)){let e;try{e=await s.json()}catch(e){throw new n.h(t,s)}let r=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t;throw new n.h(r,s)}throw new n.h(t,s)}},31030:(e,t,r)=>{r.d(t,{q:()=>a});let a=new(r(65490)).E({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1},mutations:{networkMode:"always"}}})},92240:(e,t,r)=>{r.d(t,{G:()=>a});let a=e=>({"data-testid":e})},71312:(e,t,r)=>{r.d(t,{S:()=>o,s:()=>s});var a=r(55293),n=r(51848),i=r(31481);function s(){let e=(0,a.useContext)(i.I);if(!e)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:t,category:r,metadata:s}=e;return{sendAnalyticsEvent:(0,a.useCallback)((e,a,i={})=>{let o={react:!0,app_name:t,category:r,...s};(0,n.BI)(e,{...o,...i,target:a})},[t,r,s])}}function o(){let{sendAnalyticsEvent:e}=s();return{sendClickAnalyticsEvent:(0,a.useCallback)((t={})=>{e("analytics.click",void 0,t)},[e])}}},51012:(e,t,r)=>{r.d(t,{N:()=>i});var a=r(97156),n=r(55293);let i=void 0!==a.cg?.document?.createElement?n.useLayoutEffect:n.useEffect},28784:(e,t,r)=>{function a(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function n(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return a(e,{...t,body:n,headers:r})}function i(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return a(e,{...t,headers:r})}function s(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return n(e,{...t,headers:r})}r.d(t,{DI:()=>a,QJ:()=>i,Sr:()=>s,lS:()=>n})},65862:(e,t,r)=>{r.d(t,{z:()=>b});var a=r(9449),n=r(69909),i=r(37976),s=r(55293),o=r(12480);let l={alt:(0,o.U0)()?"\u2325":"Alt",control:"\u2303",shift:"\u21E7",meta:(0,o.U0)()?"\u2318":"Win",mod:(0,o.U0)()?"\u2318":"\u2303",pageup:"PgUp",pagedown:"PgDn",arrowup:"\u2191",arrowdown:"\u2193",arrowleft:"\u2190",arrowright:"\u2192",plus:"+",backspace:"\u232B",delete:"Del",space:"\u2423",tab:"\u21E5",enter:"\u23CE",escape:"Esc",function:"Fn",capslock:"CapsLock",insert:"Ins",printscreen:"PrtScn"},c={alt:(0,o.U0)()?"Option":"Alt",mod:(0,o.U0)()?"Command":"Control","+":"Plus",pageup:"Page Up",pagedown:"Page Down",arrowup:"Up Arrow",arrowdown:"Down Arrow",arrowleft:"Left Arrow",arrowright:"Right Arrow",capslock:"Caps Lock",printscreen:"Print Screen"},d={alt:(0,o.U0)()?"option":"alt",meta:(0,o.U0)()?"command":"Windows",mod:(0,o.U0)()?"command":"control",pageup:"page up",pagedown:"page down",arrowup:"up arrow",arrowdown:"down arrow",arrowleft:"left arrow",arrowright:"right arrow",capslock:"caps lock",printscreen:"print screen","`":"backtick","~":"tilde","!":"exclamation point","@":"at","#":"hash",$:"dollar sign","%":"percent","^":"caret","&":"ampersand","*":"asterisk","(":"left parenthesis",")":"right parenthesis",_:"underscore","-":"dash","+":"plus","=":"equals","[":"left bracket","{":"left curly brace","]":"right bracket","}":"right curly brace","\\":"backslash","|":"pipe",";":"semicolon",":":"colon","'":"single quote",'"':"double quote",",":"comma","<":"left angle bracket",".":"period",">":"right angle bracket","/":"forward slash","?":"question mark"," ":"space"},u={control:1,meta:2,alt:3,option:4,shift:5,function:6,DEFAULT:7};function m(e){return e in u?u[e]:u.DEFAULT}let p=({children:e})=>(0,a.jsx)(n.A,{as:"kbd",sx:{color:"inherit",fontFamily:"inherit",fontSize:"inherit",border:"none",background:"none",boxShadow:"none",p:0,lineHeight:"unset",position:"relative",overflow:"visible",verticalAlign:"baseline"},children:e}),h=e=>d[e]||e,g=({name:e,format:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"sr-only",children:h(e)}),(0,a.jsx)("span",{"aria-hidden":!0,children:("condensed"===t?l[e]:c[e])??(0,i.A)(e)})]}),f=e=>e.split("+").map(e=>e.toLowerCase()).sort(y),y=(e,t)=>m(e)-m(t),_=({keys:e,format:t="condensed",variant:r="normal"})=>(0,a.jsx)(n.A,{sx:{display:"inline-flex",bg:"onEmphasis"===r?"transparent":"canvas.default",color:"onEmphasis"===r?"fg.onEmphasis":"fg.muted",border:"1px solid",borderColor:"border.default",borderRadius:2,fontWeight:"normal",fontFamily:"normal",fontSize:0,p:1,gap:"0.5ch",boxShadow:"none",verticalAlign:"baseline",overflow:"hidden",lineHeight:"10px"},children:f(e).map((e,r)=>(0,a.jsxs)(s.Fragment,{children:[r>0&&"full"===t?(0,a.jsx)("span",{"aria-hidden":!0,children:" + "}):" ",(0,a.jsx)(g,{name:e,format:t})]},r))}),x=e=>e.split(" "),b=(0,s.memo)(({keys:e,format:t="condensed",variant:r})=>(0,a.jsx)(p,{children:x(e).map((e,n)=>(0,a.jsxs)(s.Fragment,{children:[n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"sr-only",children:", then"})," "]}),(0,a.jsx)(_,{keys:e,format:t,variant:r})]},n))}));b.displayName="KeyboardKey";try{p.displayName||(p.displayName="Kbd")}catch{}try{_.displayName||(_.displayName="Chord")}catch{}},23235:(e,t,r)=>{r.d(t,{c:()=>h});var a=r(9449),n=r(55293),i=r(36165),s=r(45588),o=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,i]=(0,n.useState)({location:t.location});return(0,c.m)(()=>t.listen(i),[t]),(0,a.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),m=r(51261),p=r(75014);function h({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:h}){let g=n.useRef(),f=globalThis.window;g.current||(g.current=f?(0,m.z)({window:f}):(0,s.sC)({initialEntries:[{pathname:"/"}]}));let y=g.current,_=(0,p.w8)(h);return(0,a.jsx)(i.U,{appName:e,wasServerRendered:l,children:(0,a.jsx)(o.Q,{history:y,routes:[],children:(0,a.jsxs)(d,{history:y,children:[(0,a.jsx)(r,{...t.props,..._}),(0,a.jsx)(u.h,{ssrError:c})]})})})}try{h.displayName||(h.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var a=r(9449),n=r(39595),i=r(34613),s=r(55293),o=r(23581),l=r(79461),c=r(51528);function d(e,t,r,a){var n,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:i.createRoot,hydrateRoot:i.hydrateRoot};o.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,n=await this.getReactNode(t),l=(0,a.jsx)(s.StrictMode,{children:n});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87358,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:a,lineno:n,colno:i}=e,s=`${t} at ${r} (${a}:${n}:${i})`;return t=" ",s}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([n.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([n.aC],ReactBaseElement.prototype,"ssrError",void 0),d([n.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}},49779:(e,t,r)=>{r.d(t,{U:()=>i});var a=r(9449),n=r(59857);let i=({typeIcon:e,size:t})=>{switch(e){case"repo":return(0,a.jsx)(n.RepoIcon,{size:t});case"lock":return(0,a.jsx)(n.LockIcon,{size:t});case"repo-forked":return(0,a.jsx)(n.RepoForkedIcon,{size:t});case"mirror":return(0,a.jsx)(n.MirrorIcon,{size:t});default:throw Error(`Unsupported repository icon ${e}`)}};try{i.displayName||(i.displayName="RepositoryTypeIcon")}catch{}},83873:(e,t,r)=>{r.d(t,{l:()=>x});var a=r(9449),n=r(55293),i=r(65481),s=r(75177),o=r(66889),l=r(44981),c=r(61043),d=r(11228),u=r(67269),m=r(55847),p=r(22868),h=r(59857),g=r(97286),f=r(207);function y({value:e,onChange:t,campaignManagersPath:r,"aria-labelledby":i}){let{data:o}=(0,g.I)({queryKey:[r],queryFn:()=>(0,f.x)(r)}),l=(0,n.useMemo)(()=>{let t=[...o?.managers??[]];return e&&!t.some(t=>t.id===e.id)&&t.push(e),t},[o,e]),[c,d]=n.useState(""),y=(0,n.useMemo)(()=>l.map(e=>({id:e.id,text:e.login,leadingVisual:()=>(0,a.jsx)(p.r,{sx:{ml:"1px"},size:16,src:e.avatarUrl,alt:"User avatar"})})),[l]),_=y.filter(e=>e.text.toLowerCase().startsWith(c.toLowerCase())),x=y.find(t=>t.id===e?.id),b=(0,n.useCallback)(e=>{if(void 0===e){t(null);return}t(l.find(t=>t.id===e.id)??null)},[t,l]),[w,j]=(0,n.useState)(!1);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.X,{renderAnchor:({children:e,"aria-labelledby":t=i,...r})=>(0,a.jsx)(m.Q,{trailingAction:h.TriangleDownIcon,"aria-labelledby":t,...r,children:x?(0,a.jsxs)(s.A,{sx:{display:"flex",gap:"8px"},children:[(0,a.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:x.leadingVisual()}),(0,a.jsx)(s.A,{sx:{display:"flex",alignItems:"baseline",flexGrow:1},children:e})]}):"Select manager"}),placeholderText:"Search for user",open:w,onOpenChange:j,items:_,selected:x,onSelectedChange:b,onFilterChange:d,showItemDividers:!0,overlayProps:{width:"small",height:"xsmall"}})})}try{y.displayName||(y.displayName="SecurityCampaignManagerSelect")}catch{}var _=r(6557);function x({campaignManagersPath:e}){let{campaignName:t,setCampaignName:r,campaignDescription:u,setCampaignDescription:m,campaignManager:p,setCampaignManager:h,campaignDueDate:g,setCampaignDueDate:f,allowDueDateInPast:x,handleSubmit:b,formError:w}=(0,_.n)(),j=(0,n.useMemo)(()=>{if(!x){let e=new Date;return e.setDate(e.getDate()+1),e}},[x]),v=async e=>{e.preventDefault(),b()},C=(0,n.useId)();return(0,a.jsxs)(a.Fragment,{children:[w&&(0,a.jsx)(i.A,{variant:"danger",children:w.message}),(0,a.jsxs)("form",{onSubmit:v,children:[(0,a.jsx)(s.A,{sx:{pb:3},children:(0,a.jsxs)(o.A,{required:!0,children:[(0,a.jsx)(o.A.Label,{children:"Campaign name"}),(0,a.jsx)(l.A,{placeholder:"A short and descriptive name for this security campaign.",sx:{width:"100%"},value:t,maxLength:50,name:"campaign_name",onChange:e=>r(e.target.value)})]})}),(0,a.jsx)(s.A,{sx:{pb:3},children:(0,a.jsxs)(o.A,{required:!0,children:[(0,a.jsx)(o.A.Label,{children:"Short description"}),(0,a.jsx)(c.Ay,{placeholder:"Let everybody know what this security campaign is about and why it's important to remediate these alerts.",sx:{width:"100%"},rows:5,value:u,maxLength:255,name:"campaign_description",onChange:e=>m(e.target.value)})]})}),(0,a.jsx)(s.A,{sx:{pb:3},children:(0,a.jsxs)(o.A,{required:!0,children:[(0,a.jsx)(o.A.Label,{children:"Campaign due date"}),(0,a.jsx)(d.DatePicker,{value:g,minDate:j,onChange:e=>f(e),anchoredOverlayProps:{side:"outside-top"}}),(0,a.jsx)(o.A.Caption,{children:"Date to address all campaign alerts"})]})}),(0,a.jsx)(s.A,{sx:{pb:3},children:(0,a.jsxs)(o.A,{required:!0,children:[(0,a.jsx)(o.A.Label,{id:C,children:"Campaign manager"}),(0,a.jsx)(y,{value:p,onChange:h,campaignManagersPath:e,"aria-labelledby":C}),(0,a.jsx)(o.A.Caption,{children:"The user will be the campaign contact"})]})})]})]})}try{x.displayName||(x.displayName="SecurityCampaignFormContents")}catch{}},6557:(e,t,r)=>{r.d(t,{E:()=>n,n:()=>i});var a=r(55293);let n=(0,a.createContext)(null);function i(){let e=(0,a.useContext)(n);if(null===e)throw Error("SecurityCampaignFormContext must be used within a SecurityCampaignFormContextProvider");return e}try{n.displayName||(n.displayName="SecurityCampaignFormContext")}catch{}},16388:(e,t,r)=>{r.d(t,{r:()=>l});var a=r(9449),n=r(55293),i=r(86079),s=r(59857),o=r(6557);function l({setIsOpen:e,children:t}){let{campaign:r,validationError:l,handleSubmit:c,resetForm:d,isPending:u}=(0,o.n)(),m=(0,n.useCallback)(()=>{e(!1),d()},[e,d]),p=(0,n.useCallback)(async e=>{e.preventDefault(),c()},[c]),h=r?"Save changes":"Create campaign",g=(0,n.useMemo)(()=>[{buttonType:"default",content:"Cancel",onClick:()=>e(!1)},{buttonType:"primary",content:h,disabled:!!l||u,onClick:p,leadingVisual:u?s.SyncIcon:null}],[p,u,e,h,l]);return(0,a.jsx)(i.l,{title:r?"Edit campaign":"New campaign",onClose:m,footerButtons:g,children:t})}try{l.displayName||(l.displayName="SecurityCampaignFormDialogInner")}catch{}},51514:(e,t,r)=>{r.d(t,{Q:()=>s});var a=r(9449),n=r(55293),i=r(6557);function s({campaign:e,currentUser:t,allowDueDateInPast:r,submitForm:s,reset:o,isPending:l,formError:c,defaultDueDate:d,children:u}){let m=e?.name??"",p=e?.description??"",h=(0,n.useMemo)(()=>void 0!==e?new Date(e.endsAt):d??null,[e,d]),g=e?.manager??t??null,[f,y]=(0,n.useState)(m),[_,x]=(0,n.useState)(p),[b,w]=(0,n.useState)(h),[j,v]=(0,n.useState)(g),[C,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{f.length<=0||f.length>50||_.length<=0||_.length>255||null===b||null===j||!r&&b<=new Date?S("Campaign details are invalid"):S(null)},[f,_,b,j,r]);let A=(0,n.useCallback)(()=>{S(null)},[]),k=(0,n.useRef)(()=>{}),E=(0,n.useCallback)(()=>{k.current()},[]);(0,n.useEffect)(()=>{k.current=()=>{C||null===b||s({name:f,description:_,endsAt:b.toISOString(),manager:j})}},[C,b,f,_,j,s]);let R=(0,n.useCallback)(()=>{y(m),x(p),w(h),v(g),S(null),o()},[m,p,h,g,o]),N=(0,n.useMemo)(()=>({campaign:e,allowDueDateInPast:r,campaignName:f,setCampaignName:y,campaignDescription:_,setCampaignDescription:x,campaignDueDate:b,setCampaignDueDate:w,campaignManager:j,setCampaignManager:v,validationError:C,clearValidationError:A,handleSubmit:E,resetForm:R,isPending:l,formError:c}),[e,r,f,_,b,j,C,A,E,R,l,c]);return(0,a.jsx)(i.E.Provider,{value:N,children:u})}try{s.displayName||(s.displayName="SecurityCampaignFormWrapper")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","primer-react-css","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js","vendors-node_modules_primer_react_lib-esm_FilteredActionList_FilteredActionList_js","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-b1b3d3","vendors-node_modules_primer_react_lib-esm_Popover_Popover_js-node_modules_primer_react_node_m-73dd48","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js-node_modules_tanstack_qu-0e879d","vendors-node_modules_primer_react_lib-esm_UnderlineNav_index_js","vendors-node_modules_primer_react_lib-esm_AnchoredOverlay_AnchoredOverlay_js-node_modules_pri-7d2e27","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx"],()=>t(60129)),e.O()}]);
//# sourceMappingURL=security-campaign-creation-231040200f02.js.map