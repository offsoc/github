"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_marketing_audio-player_ts"],{49999:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var s=i(39595);function r(e,t,i,s){var r,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}let a=class AudioPlayer extends HTMLElement{connectedCallback(){this.media&&this.isConnected&&(this.isReady||(this.browserIsMobile&&this.classList.add("media-player-browser-is-mobile"),this.dispatchEvent(new CustomEvent("media-player-connected")),this.media.addEventListener("ended",()=>{this.ended()}),this.media.addEventListener("play",()=>{this.isBuffering=!1,this.interactionEvent("play"),this.setPlayState(!1)}),this.media.addEventListener("pause",()=>{this.isBuffering=!1,this.interactionEvent("pause"),this.setPlayState(!0)}),this.media.addEventListener("waiting",()=>{this.isBuffering=!0}),this.media.addEventListener("playing",()=>{this.isBuffering=!1}),this.events(this.media,"durationchange loadedmetadata loadeddata canplay canplaythrough",()=>{this.media.duration&&!isNaN(this.media.duration)&&this.loaded()}),this.media&&this.media.duration&&!isNaN(this.media.duration)&&this.loaded(),this.addEventListener("mousedown",()=>{this.interactionEvent("click")}),this.addEventListener("focus",()=>{this.interactionEvent("focus")})))}loaded(){if(!this.isReady&&this.media){for(let e of(this.isReady=!0,this.isBuffering=!1,this.isLive=this.media.duration>=4294967296,this.setTotalTimeLabel(this.media.duration),this.setDiffTimeLabel(0,this.media.duration),this.initScrubber(),this.restoreVolumeState(),this.initVolumeSlider(),this.initBufferingProgress(),this.querySelectorAll("[disabled]")))e.removeAttribute("disabled");this.dispatchEvent(new CustomEvent("media-player-ready"))}}ended(){this.pause()}play(){this.media?.play()}pause(){this.media?.pause()}stop(){this.pause(),this.media&&(this.media.currentTime=0),this.setScrubberPosition(0)}togglePlay(){if(this.media?.paused){this.play();return}this.pause()}setPlayState(e){if(this.isPlaying=!e,e?cancelAnimationFrame(this.requestedAnimationFrame):requestAnimationFrame(this.updateStateWhilePlaying.bind(this)),!this.playToggleButton)return;let t=e?this.playToggleButton.getAttribute("data-label-play"):this.playToggleButton.getAttribute("data-label-pause");t&&(this.playToggleButton.setAttribute("aria-label",t),this.playTooltip&&this.showTooltips&&(this.playTooltip.textContent=t))}setTotalTimeLabel(e){this.totalTimeLabel&&!this.isLive&&(this.totalTimeLabel.textContent=this.formatTime(e))}setCurrentTimeLabel(e){this.currentTimeLabel&&!this.isLive&&(this.currentTimeLabel.textContent=this.formatTime(e))}setDiffTimeLabel(e,t){if(!this.diffTimeLabel||this.isLive)return;let i=-(e-t);if(i<1){this.diffTimeLabel.textContent=` ${this.formatTime(0)}`;return}this.diffTimeLabel.textContent=`-${this.formatTime(i)}`}updateScrubberAria(){this.scrubber&&this.scrubber.setAttribute("aria-valuenow",this.scrubber.value)}updateScrubberTooltip(e){if(!this.showTooltips||!this.scrubberTooltip)return;let t=parseInt(this.scrubber.max,10),i=this.calculatePercentagePostion(e,this.scrubber.offsetWidth),s=t*i/100;s<0&&(s=0),s>t&&(s=t),this.scrubberTooltip.style.left=`${i}%`,this.scrubberTooltip.firstChild&&(this.scrubberTooltip.firstChild.textContent=this.formatTime(s))}updateStateWhilePlaying(){this.media&&!this.isLive&&(this.setCurrentTimeLabel(this.media.currentTime),this.setDiffTimeLabel(this.media.currentTime,this.media.duration),this.setScrubberPosition(this.media.currentTime),this.requestedAnimationFrame=requestAnimationFrame(this.updateStateWhilePlaying.bind(this)))}setScrubberPosition(e){if(!this.scrubber||this.isLive)return;let t=Math.floor(e);this.scrubber.value=`${t}`,this.scrubberProgress&&(this.scrubberProgress.value=t),this.updateScrubberAria()}initScrubber(){if(!this.scrubber||!this.media||this.isLive)return;let e=Math.floor(this.media.duration);this.scrubber.value="0",this.scrubber.min="0",this.scrubber.max=`${e}`,this.scrubber.setAttribute("aria-valuemin",this.scrubber.min),this.scrubber.setAttribute("aria-valuemax",this.scrubber.max),this.scrubberProgress&&(this.scrubberProgress.max=e),this.scrubber.addEventListener("change",()=>{this.media&&(this.media.currentTime=parseInt(this.scrubber.value,10),this.media.paused||requestAnimationFrame(this.updateStateWhilePlaying.bind(this)))}),this.scrubber.addEventListener("input",()=>{if(!this.media)return;let e=parseInt(this.scrubber.value,10);this.setCurrentTimeLabel(e),this.setDiffTimeLabel(e,this.media.duration),this.scrubberProgress&&(this.scrubberProgress.value=e),this.updateScrubberAria(),this.media.paused||cancelAnimationFrame(this.requestedAnimationFrame)}),this.scrubber.addEventListener("mousemove",e=>{this.updateScrubberTooltip(e.offsetX)})}updateVolumeSlider(){if(!this.media)return;let e=100*this.media.volume;this.setVolumeSlider(e)}setVolumeSlider(e){this.volumeSlider&&(this.volumeSlider.setAttribute("aria-valuenow",`${e}`),this.volumeSlider.value=`${e}`,this.volumeProgress&&(this.volumeProgress.value=e))}updateMuteButtonState(){if(!this.media)return;let e=this.media.volume;this.setMuteButtonState(e)}setMuteButtonState(e){if(!this.muteToggleButton)return;let t=e>0?this.muteToggleButton.getAttribute("data-label-unmute"):this.muteToggleButton.getAttribute("data-label-mute");if(t&&(this.muteToggleButton.setAttribute("aria-label",t),this.showTooltips&&this.muteToggleTooltip&&(this.muteToggleTooltip.textContent=t)),e<.1){this.volumeState="mute";return}if(e<.6){this.volumeState="mid";return}this.volumeState="full"}updateVolumeState(){this.updateVolumeSlider(),this.updateMuteButtonState()}toggleMute(){this.media&&this.setMute(!this.media.muted)}setMute(e,t=!0,i=!0){if(this.media&&this.muteToggleButton){if(this.media.muted=e,e)this.media.volume=0;else{let e=this.volumeMemo||this.defaultVolumeStep;this.volumeSlider||(e=1),this.media.volume=e}t&&this.interactionEvent(e?"mute":"unmute"),i&&this.storeValue("muted",e)}}restoreVolumeState(){if(!this.media)return;let e=this.retrieveValue("volume"),t=this.retrieveValue("muted");this.volumeSlider&&null!==e&&this.setVolume(e,!1,!1),this.muteToggleButton&&t&&this.setMute(t,!1,!1),this.updateVolumeState(),this.media.addEventListener("volumechange",this.updateVolumeState.bind(this))}initVolumeSlider(){this.volumeSlider&&(this.volumeSlider.min="0",this.volumeSlider.max="100",this.volumeProgress&&(this.volumeProgress.max=100),this.volumeSlider&&(this.volumeSlider.setAttribute("aria-valuemin",this.volumeSlider.min),this.volumeSlider.setAttribute("aria-valuemax",this.volumeSlider.max)),this.volumeSlider.addEventListener("change",()=>{let e=parseInt(this.volumeSlider.value,10);this.setVolume(e/100)}),this.volumeSlider.addEventListener("input",()=>{if(!this.media)return;let e=parseInt(this.volumeSlider.value,10);this.media.muted&&this.setMute(!1),this.media.volume=this.volumeToFixed(e/100)}))}volumeToFixed(e){return(e=parseFloat(e.toFixed(1)))>.9&&(e=1),e<.1&&(e=0),e}setVolume(e,t=!0,i=!0){"number"==typeof e&&this.media&&this.volumeSlider&&(e=this.volumeToFixed(e),this.media.volume=e,e>0&&(this.volumeMemo=e),0===e&&this.setMute(!0,t,i),t&&this.interactionEvent("volume",e),i&&e>0&&this.storeValue("volume",e))}volumeUp(){if(!this.media)return;let e=this.defaultVolumeStep;this.media.muted&&(e=0,this.setMute(!1)),this.setVolume(this.media.volume+e)}volumeDown(){this.media&&this.setVolume(this.media.volume-this.defaultVolumeStep)}skipForward(){this.skip(!1),this.interactionEvent("skip-forward")}skipBackward(){this.skip(!0)}skip(e,t){if(!this.media||this.isLive)return;t=t||this.defaultSkipStep;let i=this.media.currentTime+t*(e?-1:1);i<0&&(i=0),i>this.media.duration&&(i=this.media.duration),this.media.currentTime=i,this.media.paused&&(this.setCurrentTimeLabel(this.media.currentTime),this.setDiffTimeLabel(this.media.currentTime,this.media.duration),this.setScrubberPosition(this.media.currentTime))}initBufferingProgress(){this.bufferProgress&&this.media&&(this.bufferProgress.max=100,this.media.addEventListener("progress",()=>{!(this.media.duration<=0)&&this.media.buffered&&this.media.buffered.length&&(this.bufferProgress.value=this.media.buffered.end(0)/this.media.duration*100)}))}toggleFullscreen(){}toggleCaptions(){}events(e,t,i){for(let s of t.toLowerCase().split(" "))e.addEventListener(s,e=>{i(e)})}storeValue(e,t){localStorage.setItem(`github-media-player-${e}`,JSON.stringify(t))}retrieveValue(e){let t=localStorage.getItem(`github-media-player-${e}`);return t?JSON.parse(t):null}isMobile(){if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;let e=matchMedia?.("(pointer:coarse)");return e?.media==="(pointer:coarse)"?!!e.matches:"orientation"in window||/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(navigator.userAgent)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(navigator.userAgent)}zeroFormat(e){return e<10?`0${e}`:`${e}`}formatTime(e){let t=Math.floor(e/60),i=Math.floor(e%60);if(t>59){let e=Math.floor(t/60);return t=Math.floor(t%60),`${this.zeroFormat(e)}:${this.zeroFormat(t)}:${this.zeroFormat(i)}`}return`${this.zeroFormat(t)}:${this.zeroFormat(i)}`}calculatePercentagePostion(e,t){return 100*e/t}supportsFullscreen(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||this.webkitRequestFullScreen||this.media.webkitEnterFullscreen)}interactionEvent(e,t=null){let i={target:this,type:e,value:t};(void 0!==t||null!==t)&&(i.value=t),document.dispatchEvent(new CustomEvent("media-player-interaction",{detail:i}))}constructor(...e){super(...e),this.requestedAnimationFrame=0,this.volumeMemo=1,this.browserIsIOS=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&"maxTouchPoints"in navigator&&navigator.maxTouchPoints>1,this.browserIsMobile=this.isMobile(),this.isReady=!1,this.isPlaying=!1,this.defaultSkipStep=10,this.defaultVolumeStep=.1,this.volumeState="full",this.isBuffering=!0,this.isLive=!1}};r([s.CF],a.prototype,"isReady",void 0),r([s.CF],a.prototype,"isPlaying",void 0),r([s.CF],a.prototype,"defaultSkipStep",void 0),r([s.CF],a.prototype,"defaultVolumeStep",void 0),r([s.CF],a.prototype,"volumeState",void 0),r([s.CF],a.prototype,"showTooltips",void 0),r([s.CF],a.prototype,"isBuffering",void 0),r([s.CF],a.prototype,"isLive",void 0),r([s.aC],a.prototype,"media",void 0),r([s.aC],a.prototype,"playToggleButton",void 0),r([s.aC],a.prototype,"playTooltip",void 0),r([s.aC],a.prototype,"scrubber",void 0),r([s.aC],a.prototype,"scrubberProgress",void 0),r([s.aC],a.prototype,"scrubberTooltip",void 0),r([s.aC],a.prototype,"currentTimeLabel",void 0),r([s.aC],a.prototype,"diffTimeLabel",void 0),r([s.aC],a.prototype,"totalTimeLabel",void 0),r([s.aC],a.prototype,"muteToggleButton",void 0),r([s.aC],a.prototype,"muteToggleTooltip",void 0),r([s.aC],a.prototype,"volumeSlider",void 0),r([s.aC],a.prototype,"volumeProgress",void 0),r([s.aC],a.prototype,"bufferProgress",void 0),a=r([s.p_],a)}}]);
//# sourceMappingURL=app_assets_modules_marketing_audio-player_ts-86faf89825e1.js.map