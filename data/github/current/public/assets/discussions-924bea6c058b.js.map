{"version":3,"file":"discussions-xxxxxxxxxxxx.js","mappings":"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","sources":["node_modules/@github/mini-throttle/dist/index.js","node_modules/@primer/behaviors/dist/esm/focus-trap.js","app/assets/modules/github/discussions/polls-preview.ts","app/assets/modules/github/discussions/answer-button.ts","app/assets/modules/github/discussions/categories.ts","app/assets/modules/github/discussions/create-discussion.ts","app/assets/modules/github/discussions/comment-actions-dialog.ts","app/assets/modules/github/discussions/edit-comment-form.ts","app/assets/modules/github/discussions/optimistic-reactions.ts","app/assets/modules/github/discussions/previewable-comment.ts","app/assets/modules/github/discussions/search-input-providers.ts","app/assets/modules/github/discussions/show.ts","app/assets/modules/github/discussions/spotlights.ts","app/assets/modules/github/discussions/spotlight-clickable-div.ts","app/assets/modules/github/discussions/thread-expansion.ts","app/assets/modules/github/discussions/validation.ts","app/assets/modules/github/discussions/polls-voting.ts","app/assets/modules/github/discussions/whats-new.ts","app/assets/modules/github/behaviors/confetti.ts","app/assets/modules/github/behaviors/session-resume.ts","app/assets/modules/github/session-resume-helpers.ts","ui/packages/query-builder-element/query-builder-api.ts","ui/packages/subscription/subscription.ts","node_modules/@github/memoize/dist/esm/index.js"],"sourcesContent":["export function throttle(callback, wait = 0, { start = true, middle = true, once = false } = {}) {\n    let innerStart = start;\n    let last = 0;\n    let timer;\n    let cancelled = false;\n    function fn(...args) {\n        if (cancelled)\n            return;\n        const delta = Date.now() - last;\n        last = Date.now();\n        if (start && middle && delta >= wait) {\n            innerStart = true;\n        }\n        if (innerStart) {\n            innerStart = false;\n            callback.apply(this, args);\n            if (once)\n                fn.cancel();\n        }\n        else if ((middle && delta < wait) || !middle) {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                last = Date.now();\n                callback.apply(this, args);\n                if (once)\n                    fn.cancel();\n            }, !middle ? wait : wait - delta);\n        }\n    }\n    fn.cancel = () => {\n        clearTimeout(timer);\n        cancelled = true;\n    };\n    return fn;\n}\nexport function debounce(callback, wait = 0, { start = false, middle = false, once = false } = {}) {\n    return throttle(callback, wait, { start, middle, once });\n}\n","import { getFocusableChild, isTabbable } from './utils/iterate-focusable-elements.js';\nimport { polyfill as eventListenerSignalPolyfill } from './polyfills/event-listener-signal.js';\neventListenerSignalPolyfill();\nconst suspendedTrapStack = [];\nlet activeTrap = undefined;\nfunction tryReactivate() {\n    const trapToReactivate = suspendedTrapStack.pop();\n    if (trapToReactivate) {\n        focusTrap(trapToReactivate.container, trapToReactivate.initialFocus, trapToReactivate.originalSignal);\n    }\n}\nfunction followSignal(signal) {\n    const controller = new AbortController();\n    signal.addEventListener('abort', () => {\n        controller.abort();\n    });\n    return controller;\n}\nexport function focusTrap(container, initialFocus, abortSignal) {\n    const controller = new AbortController();\n    const signal = abortSignal !== null && abortSignal !== void 0 ? abortSignal : controller.signal;\n    container.setAttribute('data-focus-trap', 'active');\n    const sentinelStart = document.createElement('span');\n    sentinelStart.setAttribute('class', 'sentinel');\n    sentinelStart.setAttribute('tabindex', '0');\n    sentinelStart.setAttribute('aria-hidden', 'true');\n    sentinelStart.onfocus = () => {\n        const lastFocusableChild = getFocusableChild(container, true);\n        lastFocusableChild === null || lastFocusableChild === void 0 ? void 0 : lastFocusableChild.focus();\n    };\n    const sentinelEnd = document.createElement('span');\n    sentinelEnd.setAttribute('class', 'sentinel');\n    sentinelEnd.setAttribute('tabindex', '0');\n    sentinelEnd.setAttribute('aria-hidden', 'true');\n    sentinelEnd.onfocus = () => {\n        const firstFocusableChild = getFocusableChild(container);\n        firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n    };\n    container.prepend(sentinelStart);\n    container.append(sentinelEnd);\n    let lastFocusedChild = undefined;\n    function ensureTrapZoneHasFocus(focusedElement) {\n        if (focusedElement instanceof HTMLElement && document.contains(container)) {\n            if (container.contains(focusedElement)) {\n                lastFocusedChild = focusedElement;\n                return;\n            }\n            else {\n                if (lastFocusedChild && isTabbable(lastFocusedChild) && container.contains(lastFocusedChild)) {\n                    lastFocusedChild.focus();\n                    return;\n                }\n                else if (initialFocus && container.contains(initialFocus)) {\n                    initialFocus.focus();\n                    return;\n                }\n                else {\n                    const firstFocusableChild = getFocusableChild(container);\n                    firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n                    return;\n                }\n            }\n        }\n    }\n    const wrappingController = followSignal(signal);\n    if (activeTrap) {\n        const suspendedTrap = activeTrap;\n        activeTrap.container.setAttribute('data-focus-trap', 'suspended');\n        activeTrap.controller.abort();\n        suspendedTrapStack.push(suspendedTrap);\n    }\n    wrappingController.signal.addEventListener('abort', () => {\n        activeTrap = undefined;\n    });\n    signal.addEventListener('abort', () => {\n        container.removeAttribute('data-focus-trap');\n        const sentinels = container.getElementsByClassName('sentinel');\n        while (sentinels.length > 0)\n            sentinels[0].remove();\n        const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n        if (suspendedTrapIndex >= 0) {\n            suspendedTrapStack.splice(suspendedTrapIndex, 1);\n        }\n        tryReactivate();\n    });\n    document.addEventListener('focus', event => {\n        ensureTrapZoneHasFocus(event.target);\n    }, { signal: wrappingController.signal, capture: true });\n    ensureTrapZoneHasFocus(document.activeElement);\n    activeTrap = {\n        container,\n        controller: wrappingController,\n        initialFocus,\n        originalSignal: signal,\n    };\n    const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n    if (suspendedTrapIndex >= 0) {\n        suspendedTrapStack.splice(suspendedTrapIndex, 1);\n    }\n    if (!abortSignal) {\n        return controller;\n    }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\n\nconst sendRequest = async (url: string, csrfToken: string, question: string, options: string[]) => {\n  const form = new FormData()\n  form.append('question', question)\n  for (const option of options) {\n    form.append('options[]', option)\n  }\n\n  return await fetch(url, {\n    body: form,\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n    },\n  })\n}\n\nclass PollFormElement {\n  pollForm: HTMLElement\n  pollPreviewUrl: string\n\n  constructor(pollForm: HTMLElement) {\n    this.pollForm = pollForm\n    this.pollPreviewUrl = this.pollForm.getAttribute('data-poll-preview-url') || ''\n  }\n\n  hide(): void {\n    this.pollForm.hidden = true\n    this.pollForm?.setAttribute('aria-hidden', 'true')\n  }\n\n  show(): void {\n    this.pollForm.hidden = false\n    this.pollForm?.setAttribute('aria-hidden', 'false')\n  }\n\n  getCsrfInputValue(): string {\n    const csrfInput = this.pollForm.querySelector<HTMLInputElement>('.js-poll-preview-url-post-csrf')\n    return csrfInput ? csrfInput.value : ''\n  }\n\n  getOptions(): string[] {\n    const options: string[] = []\n    const pollOptionsContainer = this.pollForm.querySelector<HTMLElement>('#poll-option-container')\n    if (!pollOptionsContainer) return options\n    const pollOptionInputElements = pollOptionsContainer.querySelectorAll<HTMLInputElement>('.js-poll-option')\n    for (const element of pollOptionInputElements) {\n      if (element.value) options.push(element.value)\n    }\n    return options\n  }\n\n  getQuestion(): string {\n    const questionInputElment = this.pollForm.querySelector<HTMLInputElement>('.js-poll-form-input-question')\n    if (!questionInputElment) return ''\n    return questionInputElment.value\n  }\n}\n\nclass Poll {\n  pollFormElement: PollFormElement\n\n  constructor(pollFormElement: PollFormElement) {\n    this.pollFormElement = pollFormElement\n  }\n\n  hidePollForm(): void {\n    this.pollFormElement.hide()\n  }\n\n  showPollForm(): void {\n    this.pollFormElement.show()\n  }\n\n  async getPreview(): Promise<string> {\n    const question = this.pollFormElement.getQuestion()\n    const options = this.pollFormElement.getOptions()\n\n    if (question && options.length > 0) {\n      const response = await sendRequest(\n        this.pollFormElement.pollPreviewUrl,\n        this.pollFormElement.getCsrfInputValue(),\n        question,\n        options,\n      )\n      return await response.text()\n    }\n    return ''\n  }\n}\n\nlet poll: Poll | null\n\nobserve('.js-discussion-poll-form-component', discussionPollElement => {\n  poll = new Poll(new PollFormElement(discussionPollElement as HTMLElement))\n})\n\non('preview:rendered', '.js-previewable-comment-form', async function (event) {\n  if (!poll) return\n  const target = event.currentTarget\n  const commentBody = target.querySelector<HTMLElement>('.comment-body')!\n  const previewPollHTML = await poll.getPreview()\n  commentBody.append(parseHTML(document, previewPollHTML))\n  poll.hidePollForm()\n})\n\non('poll-preview:toggle:off', '.js-discussion-poll-form-component', async function () {\n  if (!poll) return\n  poll.showPollForm()\n})\n","import type {Kicker} from '@github/remote-form'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {remoteForm} from '@github/remote-form'\n\nobserve('.js-discussions-goto-answer-button', {\n  add: el => {\n    try {\n      const href = el.getAttribute('href')\n      const answerElement = document.querySelector<HTMLButtonElement>(href!)\n\n      if (answerElement) {\n        fromEvent(\n          el,\n          'click',\n          e => {\n            if (href) {\n              e.preventDefault()\n              let blockScrollOption: 'center' | 'start' = 'center'\n\n              // If the answer's height is greater than or equal to the windows\n              // height, we want to use the `start` option which aligns the top of\n              // the answer with the top of the viewport\n              if (answerElement.getBoundingClientRect().height >= window.innerHeight) {\n                blockScrollOption = 'start'\n              }\n              answerElement.scrollIntoView({behavior: 'smooth', block: blockScrollOption})\n\n              // Set focus and tab index to actual comment container\n              const answerComment = answerElement.querySelector<HTMLElement>('.js-targetable-element')!\n              if (answerComment) {\n                answerComment.tabIndex = 0\n                answerComment.focus({preventScroll: true})\n              }\n            }\n          },\n          {capture: true},\n        )\n      }\n    } catch (e) {\n      if (e instanceof DOMException) {\n        // ignore\n      } else {\n        throw e\n      }\n    }\n  },\n})\n\nobserve('.js-discussions-title-container', {\n  add: element => {\n    const answeredPillButton = element.querySelector<HTMLElement>('.js-discussions-goto-answer-button')\n\n    if (answeredPillButton) {\n      removeMarkAsAnswerButtons()\n    } else {\n      addMarkAsAnswerButtons()\n    }\n  },\n})\n\nfunction removeMarkAsAnswerButtons() {\n  const discussion = document.querySelector<HTMLElement>('.js-discussion')\n\n  if (discussion) {\n    discussion.classList.add('answered')\n  }\n}\n\nfunction addMarkAsAnswerButtons() {\n  const discussion = document.querySelector<HTMLElement>('.js-discussion')\n\n  if (discussion) {\n    discussion.classList.remove('answered')\n  }\n}\n\nremoteForm('.js-discussion-comment-mark-answer', async function (form, wants) {\n  await replaceAnswerForm(form, wants)\n})\n\nremoteForm('.js-discussion-comment-unmark-answer', async function (form, wants) {\n  await replaceAnswerForm(form, wants)\n})\n\nasync function replaceAnswerForm(form: HTMLFormElement, wants: Kicker) {\n  const response = await wants.html()\n\n  const commentContainer = form.closest('.js-nested-comment-container')\n  if (commentContainer?.classList.contains('color-bg-success')) {\n    commentContainer.classList.remove('color-bg-success')\n    commentContainer.classList.remove('timeline-child-comment-answer-border')\n  } else {\n    commentContainer?.classList.add('color-bg-success')\n    commentContainer?.classList.add('timeline-child-comment-answer-border')\n  }\n\n  let target: Element = form\n  const container = form.closest('[data-replace-remote-form-target]')\n  if (container) {\n    const id = container.getAttribute('data-replace-remote-form-target')\n    target = id ? document.getElementById(id)! : container\n  }\n  target.replaceWith(response.html)\n}\n","import {focusTrap} from '@primer/behaviors'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport type {EmojiPickerElement} from '../emoji-picker-element'\n\nwindow.addEventListener('action-menu-item-toggle', function (event) {\n  if (!(event instanceof CustomEvent)) return\n  const item = event.detail.item\n  const action = event.detail.action\n  let data\n  if (!(item instanceof HTMLElement)) return\n  const target = item.parentElement\n  if (!(target instanceof HTMLElement)) return\n\n  if (action === 'expanded') {\n    data = {category: 'discussion_section', action: 'collapse', label: 'discussion_section_collapsed'}\n  } else {\n    data = {category: 'discussion_section', action: 'expand', label: 'discussion_section_expanded'}\n  }\n\n  target.setAttribute('data-analytics-event', JSON.stringify(data))\n})\n\non('click', '.js-discussion-category-emoji-button', function (event) {\n  if (!(event.currentTarget instanceof HTMLButtonElement)) return\n  const container = getDiscussionCategoryContainer(event)\n\n  const emojiField = container.querySelector<HTMLInputElement>('.js-discussion-category-emoji-field')!\n  emojiField.value = event.currentTarget.value\n\n  const emojiSpan = container.querySelector<HTMLElement>('.js-discussion-category-custom-emoji')!\n  emojiSpan.innerHTML = event.currentTarget.innerHTML\n\n  for (const previouslySelected of container.querySelectorAll<HTMLButtonElement>('.selected-emoji')) {\n    previouslySelected.classList.remove('selected-emoji')\n  }\n  event.currentTarget.classList.add('selected-emoji')\n\n  container.querySelector<HTMLElement>('.js-discussion-category-emoji-picker')?.hidePopover()\n})\n\nconst traps: WeakMap<HTMLElement, AbortController | undefined> = new WeakMap()\n\n// Workaround for Safari bug where popover does not toggle, will be fixed with https://github.com/WebKit/WebKit/pull/30187\non('click', '.js-discussion-category-form button[popovertarget]', function (event) {\n  const button = event.currentTarget as HTMLElement\n  const target = button.getAttribute('popovertarget')\n  const popover = target ? document.getElementById(target) : null\n\n  if (!(popover instanceof HTMLElement)) return\n\n  popover.togglePopover()\n  event.preventDefault()\n})\n\non(\n  'toggle',\n  '.js-discussion-category-emoji-picker',\n  function (event) {\n    const {newState, currentTarget: popover} = event as unknown as ToggleEvent\n\n    if (!(popover instanceof HTMLElement)) return\n\n    const picker: EmojiPickerElement | null = popover.querySelector('emoji-picker')\n\n    switch (newState) {\n      case 'open':\n        traps.set(popover, focusTrap(popover))\n        picker && picker.open()\n        break\n      case 'closed':\n        traps.get(popover)?.abort()\n        traps.delete(popover)\n        picker && picker.close()\n        break\n    }\n  },\n  {capture: true},\n)\n\non('click', '.js-announcement-radio-button', function (event) {\n  const currentCategory = event.currentTarget.closest('.js-category-container')!\n  const currentCategoryId = currentCategory.getAttribute('data-category-id')!\n\n  if (currentCategory.getAttribute('data-supports-announcements') === 'false') {\n    const announcementWarning = document.getElementById(`${currentCategoryId}-announcement-warning`)!\n    if (announcementWarning) {\n      announcementWarning.removeAttribute('hidden')\n    }\n    const markAsAnswerWarning = document.getElementById(`${currentCategoryId}-mark-as-answer-warning`)!\n    if (markAsAnswerWarning) {\n      markAsAnswerWarning.setAttribute('hidden', 'true')\n    }\n  }\n})\n\non('click', '.js-mark-as-answer-radio-button', function (event) {\n  const currentCategory = event.currentTarget.closest('.js-category-container')!\n  const currentCategoryId = currentCategory.getAttribute('data-category-id')!\n\n  const markAsAnswerWarning = document.getElementById(`${currentCategoryId}-mark-as-answer-warning`)\n  if (markAsAnswerWarning) {\n    markAsAnswerWarning.setAttribute('hidden', 'true')\n  }\n  const announcementWarning = document.getElementById(`${currentCategoryId}-announcement-warning`)\n  if (announcementWarning) {\n    announcementWarning.setAttribute('hidden', 'true')\n  }\n})\n\non('click', '.js-open-ended-radio-button', function (event) {\n  const button = event.currentTarget as HTMLInputElement\n  const currentCategory = event.currentTarget.closest('.js-category-container')!\n  const currentCategoryId = currentCategory.getAttribute('data-category-id')!\n  const selectedCategory = button.value\n  const otherDiscussion =\n    currentCategory.getAttribute('data-supports-mark-as-answer') === 'false' &&\n    currentCategory.getAttribute('data-supports-announcements') === 'false'\n\n  if (currentCategory.getAttribute('data-supports-mark-as-answer') === 'true') {\n    const markAsAnswerWarning = document.getElementById(`${currentCategoryId}-mark-as-answer-warning`)\n    if (markAsAnswerWarning && selectedCategory !== 'mark_as_answer') {\n      markAsAnswerWarning.removeAttribute('hidden')\n      const announcementWarning = document.getElementById(`${currentCategoryId}-announcement-warning`)!\n      announcementWarning.setAttribute('hidden', 'true')\n    }\n  }\n\n  if (otherDiscussion) {\n    const announcementWarning = document.getElementById(`${currentCategoryId}-announcement-warning`)!\n    if (announcementWarning) {\n      announcementWarning.setAttribute('hidden', 'true')\n    }\n    const markAsAnswerWarning = document.getElementById(`${currentCategoryId}-mark-as-answer-warning`)!\n    if (markAsAnswerWarning) {\n      markAsAnswerWarning.setAttribute('hidden', 'true')\n    }\n  }\n})\n\nfunction getDiscussionCategoryContainer(event: Event & {currentTarget: Element}): HTMLElement {\n  return event.currentTarget.closest<HTMLElement>('.js-discussion-category-form')!\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n\non('click', '.js-poll-option-template-button', function (event) {\n  const button = event.currentTarget as HTMLElement\n\n  const parent = button.parentElement!\n  const destroyField = parent.querySelector<HTMLInputElement>('.js-poll-option-destroy-field')\n  const pollOptionContainer = parent.closest('.js-discussion-poll-form-component')\n\n  if (destroyField) {\n    destroyField.value = 'true'\n    destroyField.nextElementSibling?.classList.remove('js-poll-option')\n    parent.hidden = true\n  } else {\n    parent.remove()\n  }\n\n  const getOptionBtn = document.querySelector<HTMLElement>('.js-add-poll-option')\n\n  if (getOptionBtn?.hidden) {\n    getOptionBtn.hidden = false\n    getOptionBtn.setAttribute('aria-hidden', 'false')\n  }\n\n  if (pollOptionContainer) {\n    fire(pollOptionContainer, 'pollOptionRemoved')\n  }\n})\n\non('click', '.js-add-poll-option', function (event) {\n  const getOptionBtn = event.currentTarget as HTMLElement\n  const pollOptionContainer = document.querySelector<HTMLElement>('#poll-option-container')!\n  const pollOptionsLimit: number = +pollOptionContainer.getAttribute('data-poll-options-limit')!\n  const pollOptionTemplate = document.querySelector<HTMLElement>('.js-poll-option-template')!\n  const isNewDiscussion: boolean = pollOptionContainer.getAttribute('data-new-discussion') === 'true'\n\n  if (pollOptionContainer && pollOptionTemplate) {\n    const newPollOption = pollOptionTemplate.cloneNode(true) as HTMLElement\n    newPollOption.hidden = false\n\n    const input = newPollOption.querySelector<HTMLInputElement>('.js-poll-option-template-input')!\n\n    if (isNewDiscussion) {\n      input.name = `discussion[poll_attributes][options_attributes][][option]`\n    } else {\n      const indexCounter = pollOptionContainer.getAttribute('data-poll-option-next-key')!\n      input.name = `discussion[poll_attributes][options_attributes][${indexCounter}][option]`\n\n      // We need to add to this to ensure that we always have a unique key for our forms\n      pollOptionContainer.setAttribute('data-poll-option-next-key', `${parseInt(indexCounter) + 1}`)\n    }\n\n    pollOptionContainer.appendChild(newPollOption)\n  }\n\n  // We remove `.js-poll-option` when marking an existing option for deletion,\n  // so this count is only non-deleted options\n  const optionsCount = pollOptionContainer.querySelectorAll('.js-poll-option').length\n\n  if (getOptionBtn && optionsCount >= pollOptionsLimit) {\n    getOptionBtn.hidden = true\n    getOptionBtn.setAttribute('aria-hidden', 'true')\n  }\n})\n\non('change', '#js-discussion-title', function (event) {\n  const title = event.currentTarget as HTMLInputElement\n  const searchLink = document.querySelector<HTMLAnchorElement>('#js-similar-search-link')\n\n  if (searchLink instanceof HTMLAnchorElement && title instanceof HTMLInputElement) {\n    const searchUrl = new URL(searchLink.getAttribute('data-path')!, window.location.origin)\n    searchUrl.searchParams.set('discussions_q', title.value)\n    searchLink.href = searchUrl.toString()\n  }\n})\n","import {controller, target} from '@github/catalyst'\nimport {TemplateInstance} from '@github/template-parts'\n\n@controller\nclass CommentActionsContainerElement extends HTMLElement {\n  @target dialogTemplate: HTMLTemplateElement\n  @target dialogContainer: HTMLDivElement\n\n  displayDialog(event: Event) {\n    const button = event.currentTarget as HTMLButtonElement\n    const dialogId = button.getAttribute('data-dialog-id')!\n\n    const dialogExist = this.dialogContainer.querySelector<HTMLDialogElement>(`#${dialogId}`)\n    if (!dialogExist) {\n      this.createDialog(dialogId, button)\n    }\n    this.showDialog(dialogId)\n  }\n\n  private createDialog(dialogId: string, button: HTMLButtonElement) {\n    const title = button.getAttribute('data-title')!\n    const src = button.getAttribute('data-src')!\n    const size = button.getAttribute('data-size')!\n    const newDialog = new TemplateInstance(this.dialogTemplate, {title, dialogId, src})\n\n    this.dialogContainer.append(newDialog)\n    if (size) {\n      const dialog = this.querySelector<HTMLDialogElement>(`#${dialogId}`)!\n      dialog.classList.remove('Overlay--size-medium')\n      dialog.classList.add(`Overlay--size-${size}`)\n    }\n  }\n\n  private showDialog(dialogId: string) {\n    const dialog = this.querySelector<HTMLDialogElement>(`#${dialogId}`)\n    if (dialog) {\n      dialog.showModal()\n    }\n  }\n}\n","import {TemplateInstance} from '@github/template-parts'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '@github-ui/onfocus'\nimport {hasDirtyFields} from '@github-ui/has-interactions'\n\ntype TemplateEditFormReplacements = {\n  bodyVersion?: string | null\n  outerDivClasses?: string | null\n  repositoryId?: string | null\n  targetBody?: string | null\n  targetType?: string | null\n  textareaId?: string | null\n  slashCommandUrl?: string | null\n  pollEditUrl?: string | null\n}\n\nobserve('.js-discussions-comment-edit-button', {\n  subscribe: element => fromEvent(element, 'click', handleClick, {capture: false, once: true}),\n})\n\nobserve('.js-task-list-container .contains-task-list', {\n  add: async element => conditionallyRenderEditForm(element as HTMLElement),\n})\n\nobserve('.js-discussion-poll-form-component', {\n  subscribe: element => fromEvent(element, 'pollOptionRemoved', handlePollModificationEvent),\n})\n\nonKey('keyup', '.js-discussion-poll-form-component input', handlePollModificationEvent)\n\nasync function conditionallyRenderEditForm(element: HTMLElement) {\n  const commentContainer = element.closest<HTMLElement>('.js-comment')\n  if (!commentContainer) {\n    return\n  }\n\n  const targetContainer = editFormTargetContainer(commentContainer) as HTMLElement\n\n  if (targetContainer) {\n    const isPreviewContainer = targetContainer.querySelector<HTMLElement>('.js-preview-body')\n    if (isPreviewContainer) return\n\n    const url = targetContainer.getAttribute('data-permissions-url')\n    const type = editFormTemplateReplacements(targetContainer).targetType\n\n    if (url && type) {\n      const isUpdateable = await fetchAndReturnUpdatePermission(url, type)\n\n      if (isUpdateable) {\n        insertEditForm(commentContainer)\n        insertMarkdownToolbar(commentContainer)\n      }\n    }\n  }\n}\n\nasync function fetchAndReturnUpdatePermission(url: string, type: string) {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  const json = await response.json()\n\n  return json[type]['update']\n}\n\nfunction handleClick(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n  const commentContainer = currentTarget.closest<HTMLElement>('.js-comment')!\n\n  insertEditForm(commentContainer)\n  insertMarkdownToolbar(commentContainer)\n  insertPollEditForm(commentContainer)\n}\n\nfunction handlePollModificationEvent(event: Event) {\n  const currentTarget = event.currentTarget as HTMLInputElement\n  const commentContainer = currentTarget.closest('.js-comment') as HTMLElement\n\n  if (commentContainer) {\n    const editPollFormContainer = commentContainer.querySelector('.js-discussion-poll-form-component')\n    if (editPollFormContainer) {\n      toggleFormActionVariant(commentContainer, hasDirtyFields(editPollFormContainer))\n    }\n  }\n}\n\nfunction insertMarkdownToolbar(commentContainer: HTMLElement) {\n  const targetContainer = commentContainer.querySelector('.js-discussions-markdown-toolbar-placeholder:last-child')\n\n  if (targetContainer) {\n    const templateReplacements = {textareaId: targetContainer.getAttribute('data-textarea-id')}\n\n    insertTemplate(\n      'template.js-discussions-markdown-toolbar-template',\n      targetContainer as HTMLElement,\n      templateReplacements,\n    )\n  }\n}\n\nfunction insertPollEditForm(commentContainer: HTMLElement) {\n  const targetContainer = commentContainer.querySelector('.js-discussions-poll-edit-placeholder')\n\n  if (targetContainer) {\n    const pollEditUrl = targetContainer.getAttribute('data-poll-edit-url')\n    if (pollEditUrl === '') {\n      return\n    }\n    const templateReplacements = {pollEditUrl}\n    insertTemplate('template.js-discussions-poll-edit-template', targetContainer as HTMLElement, templateReplacements)\n  }\n}\n\nfunction insertEditForm(commentContainer: HTMLElement) {\n  const targetContainer = editFormTargetContainer(commentContainer) as HTMLElement\n\n  if (targetContainer) {\n    const templateReplacements = editFormTemplateReplacements(targetContainer)\n    insertTemplate('template.js-discussions-edit-form-template', targetContainer, templateReplacements)\n    insertEditFormActions(commentContainer, templateReplacements)\n  }\n}\n\nfunction insertEditFormActions(commentContainer: HTMLElement, templateReplacements: TemplateEditFormReplacements) {\n  const formActionsContainer = editFormActionsContainer(commentContainer) as HTMLElement\n\n  if (formActionsContainer) {\n    insertTemplate('template.js-discussions-edit-actions-template', formActionsContainer, templateReplacements)\n  }\n}\n\nfunction insertPollEditConfirmationPrompt(commentContainer: HTMLElement) {\n  const formActionsContainer = editFormActionsContainer(commentContainer) as HTMLElement\n\n  if (formActionsContainer) {\n    insertTemplate('template.js-discussions-poll-confirmation-template', formActionsContainer, {})\n  }\n}\n\nfunction toggleFormActionVariant(commentContainer: HTMLElement, showConfirmationPrompt: boolean) {\n  const targetContainer = editFormTargetContainer(commentContainer) as HTMLElement\n  const currentVariantIsConfirmation = targetContainer.getAttribute('data-poll-confirmation') === 'true'\n\n  // If there's nothing to toggle, just return instead of inserting the template again.\n  if (currentVariantIsConfirmation === showConfirmationPrompt) {\n    return\n  }\n\n  if (showConfirmationPrompt) {\n    insertPollEditConfirmationPrompt(commentContainer)\n    targetContainer.setAttribute('data-poll-confirmation', 'true')\n  } else {\n    const templateReplacements = editFormTemplateReplacements(targetContainer)\n    insertEditFormActions(commentContainer, templateReplacements)\n    targetContainer.setAttribute('data-poll-confirmation', 'false')\n  }\n}\n\nfunction editFormTargetContainer(commentContainer: HTMLElement) {\n  return commentContainer.querySelector('.js-edit-comment-form-container')\n}\n\nfunction editFormActionsContainer(commentContainer: HTMLElement) {\n  return commentContainer.querySelector('.js-discussions-edit-form-actions')\n}\n\nfunction editFormTemplateReplacements(targetContainer: HTMLElement) {\n  return {\n    bodyVersion: targetContainer.getAttribute('data-body-version'),\n    outerDivClasses: targetContainer.getAttribute('data-outer-div-classes'),\n    repositoryId: targetContainer.getAttribute('data-repository-id'),\n    targetBody: targetContainer.getAttribute('data-target-body'),\n    targetType: targetContainer.getAttribute('data-target-type'),\n    textareaId: targetContainer.getAttribute('data-textarea-id'),\n    slashCommandUrl: targetContainer.getAttribute('data-slash-command-url'),\n    pollEditUrl: targetContainer.getAttribute('data-poll-edit-url'),\n  }\n}\n\nfunction insertTemplate(\n  templateSelector: string,\n  targetContainer: HTMLElement,\n  templateReplacements: TemplateEditFormReplacements,\n) {\n  const template = document.querySelector<HTMLTemplateElement>(templateSelector)!\n\n  if (template) {\n    targetContainer.textContent = ''\n    targetContainer.appendChild(new TemplateInstance(template, templateReplacements))\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-optimistic-reaction-render-button', {\n  subscribe: el => fromEvent(el, 'click', handleReactionEvent, {capture: false}),\n})\n\nfunction handleReactionEvent(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n\n  if (currentTarget) {\n    const renderer = new OptimisticReactionRenderer(currentTarget)\n\n    // Defer the render until after the form values are collected for any remoteForm\n    setTimeout(() => {\n      renderer.render()\n    }, 1)\n  }\n}\n\nclass OptimisticReactionRenderer {\n  clickedReactionButton: HTMLElement\n\n  constructor(clickedReactionButton: HTMLElement) {\n    this.clickedReactionButton = clickedReactionButton\n  }\n\n  render() {\n    if (!this.isReactionAlreadyRendered) {\n      return this.addNewReactionGroup()\n    }\n\n    if (this.isAddingReaction) {\n      this.addReactionToGroup()\n    } else {\n      this.removeReactionFromGroup()\n    }\n  }\n\n  addReactionToGroup() {\n    if (this.existingReactionGroupCountContainer && this.existingReactionGroup) {\n      this.existingReactionGroup.removeAttribute('hidden')\n      this.existingReactionGroup.classList.add('user-has-reacted')\n      this.existingReactionGroupCountContainer.textContent = `${this.existingReactionGroupCount + 1}`\n      this.addReactionToPopoverReactionButtons()\n    }\n  }\n\n  /**\n   * Focus on the next reaction if its present, or the previous one.\n   * Reactions are indexed by their order from [`Emotion.all`](https://github.com/github/github/blob/702571a7f70b3e7bf9ad8bd753ca3acbee1b02bf/packages/issues/app/models/emotion.rb#L19) on the\n   * server, so they might not be something like `[1, 2, 5, 6, 7]` rather than `[1,2,3]`\n   */\n  focusOnAdjacentReaction() {\n    const getIndex = (button: HTMLElement) => {\n      const index = parseInt(button.getAttribute('data-button-index-position') || '')\n      if (isNaN(index)) {\n        return null\n      } else {\n        return index\n      }\n    }\n\n    if (!this.existingReactionGroup) return\n\n    const existingReactionIndex = getIndex(this.existingReactionGroup)\n    if (!existingReactionIndex) return\n    let previousReaction: HTMLElement | undefined\n    let nextReaction: HTMLElement | undefined\n\n    // for a set of indices like `[1, 2, 5, 6, 7]`, if the user picks `5` we want\n    // previousReaction = 2 and nextReaction = 6\n    for (const button of this.reactionGroupsContainer.querySelectorAll('button').values()) {\n      const currentReactionIndex = getIndex(button)\n      if (!currentReactionIndex) return\n      if (currentReactionIndex < existingReactionIndex) {\n        previousReaction = button\n      }\n      if (currentReactionIndex > existingReactionIndex) {\n        nextReaction = button\n        break\n      }\n    }\n\n    if (nextReaction) {\n      nextReaction.focus()\n    } else {\n      if (previousReaction) {\n        previousReaction.focus()\n      }\n    }\n  }\n\n  removeReactionFromGroup() {\n    if (this.existingReactionGroupCount === 1) {\n      this.existingReactionGroup!.setAttribute('hidden', '')\n      this.focusOnAdjacentReaction()\n    }\n\n    this.existingReactionGroupCountContainer!.textContent = `${this.existingReactionGroupCount - 1}`\n    this.existingReactionGroup?.classList.remove('user-has-reacted')\n    this.removeReactionFromPopoverReactionButtons()\n  }\n\n  addNewReactionGroup() {\n    const newEmojiButton = this.newEmojiButtonFromTemplate()\n\n    if (this.newEmojiButtonTemplateContainer && newEmojiButton && this.commentReactionsContainer) {\n      if (this.nextButtonGroup) {\n        this.reactionGroupsContainer.insertBefore(newEmojiButton, this.nextButtonGroup)\n      } else {\n        this.reactionGroupsContainer.append(newEmojiButton)\n      }\n\n      newEmojiButton.classList.add(this.tooltipPositionClass)\n      this.addReactionToPopoverReactionButtons()\n      newEmojiButton.focus()\n\n      if (this.commentReactionsContainer.classList.contains('d-md-none')) {\n        this.commentReactionsContainer.classList.add('has-reactions')\n      }\n    }\n  }\n\n  newEmojiButtonFromTemplate() {\n    if (this.newEmojiButtonTemplateContainer) {\n      const templateContainerContent = this.newEmojiButtonTemplateContainer.content\n      const templateContainerButton = templateContainerContent.querySelector('.js-reaction-group-button')\n\n      if (templateContainerButton) return templateContainerButton.cloneNode(true) as HTMLButtonElement\n    }\n  }\n\n  get nextButtonGroup() {\n    if (this.newEmojiButtonFromTemplatePosition !== undefined && this.newEmojiButtonFromTemplatePosition !== null) {\n      const reactionButtons = this.reactionGroupsContainer.children\n\n      for (const button of reactionButtons) {\n        const buttonIndexPosition = Number(button.getAttribute('data-button-index-position')!)\n\n        if (buttonIndexPosition > this.newEmojiButtonFromTemplatePosition) return button\n      }\n    }\n  }\n\n  get commentContainer() {\n    return this.clickedReactionButton.closest<HTMLElement>('.js-comment')!\n  }\n\n  get buttonsContainer() {\n    return this.commentContainer.querySelector<HTMLElement>('.js-reaction-buttons-container')!\n  }\n\n  get reactionContent() {\n    return this.clickedReactionButton.getAttribute('data-reaction-content')!\n  }\n\n  get reactionGroup() {\n    return this.buttonsContainer.querySelector(`.js-comment-reactions-options g-emoji[alias='${this.reactionContent}'`)\n  }\n\n  get existingReactionGroup() {\n    if (this.reactionGroup) return this.reactionGroup.closest<HTMLElement>('.js-reaction-group-button')!\n  }\n\n  get existingReactionGroupCountContainer() {\n    if (this.existingReactionGroup) {\n      return this.existingReactionGroup.querySelector('.js-discussion-reaction-group-count')\n    }\n  }\n\n  get newEmojiButtonTemplateContainer() {\n    return document.getElementById(`emoji-reaction-button-template-${this.reactionContent}`) as HTMLTemplateElement\n  }\n\n  get commentReactionsContainer() {\n    return this.buttonsContainer.closest<HTMLElement>('.js-reaction-buttons-container')!\n  }\n\n  get reactionGroupsContainer() {\n    return this.buttonsContainer.querySelector<HTMLElement>('.js-comment-reactions-options')!\n  }\n\n  get isReactionAlreadyRendered() {\n    return !!this.reactionGroup\n  }\n\n  get isAddingReaction() {\n    if (this.existingReactionGroup) {\n      return !this.existingReactionGroup.classList.contains('user-has-reacted')\n    }\n  }\n\n  get existingReactionGroupCount() {\n    if (this.existingReactionGroupCountContainer) return Number(this.existingReactionGroupCountContainer.innerHTML)\n    return 0\n  }\n\n  get newEmojiButtonFromTemplatePosition() {\n    const newEmojiButtonFromTemplate = this.newEmojiButtonFromTemplate()\n\n    if (newEmojiButtonFromTemplate) {\n      return Number(newEmojiButtonFromTemplate.getAttribute('data-button-index-position')!)\n    }\n  }\n\n  get tooltipPositionClass() {\n    return this.buttonsContainer.querySelectorAll('button').length > 1 ? 'tooltipped-s' : 'tooltipped-se'\n  }\n\n  addReactionToPopoverReactionButtons() {\n    const popovers = this.commentContainer.querySelectorAll('.js-add-reaction-popover')\n\n    for (const popover of popovers) {\n      const button = popover.querySelector<HTMLInputElement>(`button[data-reaction-content=\"${this.reactionContent}\"]`)!\n      button.classList.add('user-has-reacted')\n      // make it say unreact\n      if (!button.value.match(/unreact/)) {\n        button.value = button.value.replace(/react/, 'unreact')\n      }\n      button.setAttribute('aria-checked', 'true')\n    }\n  }\n\n  removeReactionFromPopoverReactionButtons() {\n    const popovers = this.commentContainer.querySelectorAll('.js-add-reaction-popover')\n\n    for (const popover of popovers) {\n      const button = popover.querySelector<HTMLInputElement>(`button[data-reaction-content=\"${this.reactionContent}\"]`)!\n      button.classList.remove('user-has-reacted')\n      // make it say react\n      if (button.value.match(/unreact/)) {\n        button.value = button.value.replace(/unreact/, 'react')\n      }\n      button.setAttribute('aria-checked', 'false')\n    }\n  }\n}\n","import {blurForm, focusForm} from '../behaviors/inline-comment'\nimport type {Quote} from '@github/quote-selection'\nimport {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {restoreFieldsFromAllBackends} from '../behaviors/session-resume'\n\ntype InsertFormOptions = {\n  willFocus: boolean\n}\n\nobserve('.js-inline-comment-form-container', {\n  add: element => conditionallyInsertForm(element as HTMLElement),\n})\n\non('click', '.js-discussions-previewable-comment-form', function ({currentTarget}) {\n  insertForm(currentTarget, {willFocus: true})\n  // this must be called after the form exists in the DOM\n  restoreFieldsFromAllBackends()\n})\n\non('quote-selection', '.js-discussion-quote-selection', function (event) {\n  const quote = event.detail as Quote\n  const target = quote.closest('.js-timeline-discussion-comment')\n  if (!target) return\n  const range = quote.range\n  // Focus form will reset the Range\n  insertForm(target, {willFocus: true})\n  quote.range = range\n})\n\nfunction conditionallyInsertForm(element: HTMLElement) {\n  const commentContainer = element.closest<HTMLElement>('.discussion-timeline-item.js-comment-container')\n\n  if (commentContainer) {\n    const willOpen = commentContainer.getAttribute('data-open-edit-form-after-load')\n\n    if (willOpen === 'true') {\n      commentContainer.setAttribute('data-open-edit-form-after-load', 'false')\n      insertForm(element, {willFocus: true})\n    }\n  }\n}\n\nfunction insertForm(currentTarget: Element, options: InsertFormOptions) {\n  const commentContainer = currentTarget.closest<HTMLElement>('.js-timeline-discussion-comment')!\n  const targetContainer = commentContainer.querySelector<HTMLElement>(\n    '.js-discussions-previewable-comment-form-container',\n  )\n  if (!targetContainer) return\n  const commentId = targetContainer.getAttribute('data-parent-comment-id')!\n  const anchorId = targetContainer.getAttribute('data-anchor-id')!\n  const backPage = targetContainer.getAttribute('data-back-page')!\n  const template = document.querySelector<HTMLTemplateElement>('template.js-new-comment-template')\n  if (commentId && template && !targetContainer.querySelector('.js-discussion-comment-form')) {\n    targetContainer.textContent = ''\n    targetContainer.appendChild(\n      new TemplateInstance(template, {\n        id: commentId,\n        anchorId,\n        backPage,\n      }),\n    )\n  }\n\n  if (options.willFocus) {\n    focusForm(commentContainer)\n  }\n}\n\nremoteForm(\n  '.js-discussions-previewable-comment-form-container .js-discussion-comment-form',\n  async function (form, wants) {\n    await wants.text()\n    blurForm(form)\n    const container = form.closest('.js-discussions-previewable-comment-form-container')!\n    // eslint-disable-next-line github/no-d-none\n    container.querySelector('.js-comment-form-error')?.classList.add('d-none')\n  },\n)\n","import memoize from '@github/memoize'\nimport {hasMatch} from 'fzy.js'\nimport {\n  type SearchProvider,\n  type FilterProvider,\n  FilterItem,\n  type QueryEvent,\n  type QueryFilterElement,\n  SearchItem,\n  Octicon,\n} from '@github-ui/query-builder-element/query-builder-api'\nimport type {QueryBuilderElement} from '@github-ui/query-builder-element'\n\ninterface Suggestion {\n  value: string\n  description?: string\n}\n\nasync function fetchJSON(url: string) {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n\n  if (response.ok) {\n    return await response.json()\n  } else {\n    return undefined\n  }\n}\nconst memoizeCache = new Map()\nconst memoizeFetchJSON = memoize(fetchJSON, {cache: memoizeCache})\n\nfunction getSearchInput(): HTMLElement {\n  return document.querySelector<HTMLElement>('query-builder#query-builder-discussions-search-combobox')!\n}\n\nasync function fetchAuthorSuggestions(): Promise<Suggestion[]> {\n  const url = getSearchInput().getAttribute('data-suggestable-authors-path')!\n  return memoizeFetchJSON(url)\n}\n\nasync function fetchCategorySuggestions(): Promise<Suggestion[]> {\n  return JSON.parse(getSearchInput().getAttribute('data-suggestable-categories')!)\n}\n\nasync function fetchLabelSuggestions(): Promise<Suggestion[]> {\n  const url = getSearchInput().getAttribute('data-suggestable-labels-path')!\n  return memoizeFetchJSON(url)\n}\n\nconst authors = async (): Promise<Suggestion[]> => await fetchAuthorSuggestions()\nconst categories = async (): Promise<Suggestion[]> => await fetchCategorySuggestions()\nconst labels = async (): Promise<Suggestion[]> => await fetchLabelSuggestions()\nconst states = ['open', 'closed', 'answered', 'unanswered', 'locked', 'unlocked']\nconst getSearchUrl =\n  document.querySelector<HTMLFormElement>('#discussions-search-combobox-form')?.getAttribute('action') || ''\n\nconst filterSuggestions = (suggestions: string[], query: string) =>\n  suggestions.filter(suggestion => {\n    if ((query && hasMatch(query, suggestion)) || query === '') return suggestion\n  })\n\nclass SearchItemProvider extends EventTarget implements SearchProvider {\n  priority = 1\n  name = 'Search'\n  singularItemName = 'search item'\n  value = 'search'\n  type = 'search' as const\n\n  constructor(public queryBuilder: QueryBuilderElement) {\n    super()\n\n    this.queryBuilder.addEventListener('query', this)\n    this.queryBuilder.attachProvider(this)\n  }\n\n  handleEvent(event: QueryEvent) {\n    if (String(event) === '') return\n    this.dispatchEvent(\n      new SearchItem({\n        priority: 1,\n        value: event.toString(),\n        icon: Octicon.Search,\n        scope: 'GENERAL',\n        action: {\n          url: `${getSearchUrl}?discussions_q=${event.toString()}`,\n        },\n      }),\n    )\n  }\n}\n\nclass AuthorProvider extends EventTarget implements FilterProvider {\n  name = 'Authors'\n  singularItemName = 'author'\n  value = 'author'\n  priority = 2\n  type = 'filter' as const\n\n  constructor(public queryBuilder: QueryBuilderElement) {\n    super()\n\n    this.queryBuilder.addEventListener('query', this)\n    this.queryBuilder.attachProvider(this)\n  }\n\n  async handleEvent(event: QueryEvent) {\n    const lastQuery = event.parsedQuery.at(-1)\n    const lastQueryValue = lastQuery?.value || ''\n    const lastQueryType = lastQuery?.type\n    const lastQueryFilter = (lastQuery as QueryFilterElement)?.filter || ''\n\n    if (lastQueryType !== 'filter' && (hasMatch(lastQueryValue, this.value) || lastQueryValue === '')) {\n      this.dispatchEvent(new Event('show'))\n    }\n\n    // Prevents the author filters from being fetched if the author filter was not chosen\n    if (lastQueryType !== 'filter' || lastQueryFilter !== this.value) return\n\n    const getAuthorData = await authors()\n\n    const authorValues = getAuthorData.map(author => author.value)\n    const filteredAuthors = filterSuggestions(authorValues, lastQueryValue)\n\n    // Only show the top 5 results to avoid overwhelming the browser,\n    // fixes https://github.com/github/discussions/issues/2816\n    const limitedFilteredAuthors = filteredAuthors.slice(0, 5)\n\n    for (const author of limitedFilteredAuthors) {\n      this.dispatchEvent(new FilterItem({filter: 'author', value: author}))\n    }\n  }\n}\n\nclass CategoryProvider extends EventTarget implements FilterProvider {\n  name = 'Categories'\n  singularItemName = 'category'\n  value = 'category'\n  priority = 3\n  type = 'filter' as const\n\n  constructor(public queryBuilder: QueryBuilderElement) {\n    super()\n\n    this.queryBuilder.addEventListener('query', this)\n    this.queryBuilder.attachProvider(this)\n  }\n\n  async handleEvent(event: QueryEvent) {\n    const lastQuery = event.parsedQuery.at(-1)\n    const lastQueryValue = lastQuery?.value || ''\n    const lastQueryType = lastQuery?.type\n    const lastQueryFilter = (lastQuery as QueryFilterElement)?.filter || ''\n\n    if (lastQueryType !== 'filter' && (hasMatch(lastQueryValue, this.value) || lastQueryValue === '')) {\n      this.dispatchEvent(new Event('show'))\n    }\n\n    if (lastQueryType !== 'filter' || lastQueryFilter !== this.value) return\n\n    const getCategoryData = await categories()\n\n    const categoryValues = getCategoryData.map(category => {\n      const valueNoQuotes = category.value?.replace(/\"/g, '')\n      return valueNoQuotes\n    })\n\n    const filteredCategories = filterSuggestions(categoryValues, lastQueryValue)\n\n    for (const category of filteredCategories) {\n      this.dispatchEvent(new FilterItem({filter: 'category', value: category}))\n    }\n  }\n}\n\nclass StateProvider extends EventTarget implements FilterProvider {\n  name = 'States'\n  singularItemName = 'state'\n  value = 'is'\n  priority = 4\n  type = 'filter' as const\n\n  constructor(public queryBuilder: QueryBuilderElement) {\n    super()\n\n    this.queryBuilder.addEventListener('query', this)\n    this.queryBuilder.attachProvider(this)\n  }\n\n  handleEvent(event: QueryEvent) {\n    const lastQuery = event.parsedQuery.at(-1)\n    const lastQueryValue = lastQuery?.value || ''\n    const lastQueryType = lastQuery?.type\n    const lastQueryFilter = (lastQuery as QueryFilterElement)?.filter || ''\n\n    const filteredStates = filterSuggestions(states, lastQueryValue)\n\n    if (lastQueryType !== 'filter' && (hasMatch(lastQueryValue, this.value) || lastQueryValue === '')) {\n      this.dispatchEvent(new Event('show'))\n    }\n\n    if (lastQueryType !== 'filter' || lastQueryFilter !== this.value) return\n\n    for (const state of filteredStates) {\n      this.dispatchEvent(new FilterItem({filter: 'is', value: state}))\n    }\n  }\n}\n\nclass LabelProvider extends EventTarget implements FilterProvider {\n  name = 'Labels'\n  singularItemName = 'label'\n  value = 'label'\n  priority = 5\n  type = 'filter' as const\n\n  defaultLabels = [\n    'bug',\n    'documentation',\n    'duplicate',\n    'enhancement',\n    'good first issue',\n    'help wanted',\n    'invalid',\n    'question',\n    'wontfix',\n  ]\n\n  constructor(public queryBuilder: QueryBuilderElement) {\n    super()\n\n    this.queryBuilder.addEventListener('query', this)\n    this.queryBuilder.attachProvider(this)\n  }\n\n  async handleEvent(event: QueryEvent) {\n    const lastQuery = event.parsedQuery.at(-1)\n    const lastQueryValue = lastQuery?.value || ''\n    const lastQueryType = lastQuery?.type\n    const lastQueryFilter = (lastQuery as QueryFilterElement)?.filter || ''\n\n    if (lastQueryType !== 'filter' && (hasMatch(lastQueryValue, this.value) || lastQueryValue === '')) {\n      this.dispatchEvent(new Event('show'))\n    }\n\n    if (lastQueryType !== 'filter' || lastQueryFilter !== this.value) return\n\n    const getLabelData = await labels()\n\n    let labelValues = getLabelData.map(label => label.value)\n\n    // If there are no labels, use the default labels\n    if (labelValues.length === 0) {\n      labelValues = this.defaultLabels\n    }\n\n    const filteredLabels = filterSuggestions(labelValues, lastQueryValue)\n\n    for (const label of filteredLabels) {\n      this.dispatchEvent(new FilterItem({filter: 'label', value: label}))\n    }\n  }\n}\n\ndocument.addEventListener('query-builder:request-provider', (event: Event) => {\n  new SearchItemProvider(event.target as QueryBuilderElement)\n  new AuthorProvider(event.target as QueryBuilderElement)\n  new CategoryProvider(event.target as QueryBuilderElement)\n  new StateProvider(event.target as QueryBuilderElement)\n  new LabelProvider(event.target as QueryBuilderElement)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport poof from '../behaviors/confetti'\n\nobserve('.js-confetti-party', () => {\n  poof()\n})\n","import {controller, target} from '@github/catalyst'\nimport {remoteForm} from '@github/remote-form'\n\n@controller\nclass DiscussionSpotlightPreviewElement extends HTMLElement {\n  @target spotlightElement: HTMLElement\n\n  updatePreview(event: Event) {\n    const currentOption = event.currentTarget as HTMLInputElement\n    const newStyle = currentOption.getAttribute('style')!\n    this.spotlightElement.setAttribute('style', newStyle)\n  }\n}\n\nremoteForm('.js-spotlight-notice-dismiss', async function (form, send) {\n  await send.text()\n  const notice = form.closest<HTMLElement>('.js-notice')!\n  notice.remove()\n\n  if (document.querySelector('.js-discussions-categories')) {\n    const categories_notice = document.querySelector<HTMLElement>('.js-discussions-categories')!\n    categories_notice.classList.remove('v-hidden')\n  }\n})\n","import {controller, target} from '@github/catalyst'\n\n@controller\nclass DiscussionSpotlightContainerElement extends HTMLElement {\n  @target mainLink: HTMLAnchorElement\n\n  openDiscussionLink() {\n    const selection = window.getSelection()!\n    const noTextSelected = !selection.toString()\n\n    if (noTextSelected) {\n      this.mainLink.click()\n    }\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-discussion-comment-thread-expand-button', function ({currentTarget}) {\n  const commentContainer = commentContainerFor(currentTarget as HTMLElement)\n  if (!commentContainer) return\n\n  conditionallyOpenEditFormAfterLoad(commentContainer)\n})\n\nfunction conditionallyOpenEditFormAfterLoad(element: HTMLElement) {\n  if (isReplyFormOpen(element)) {\n    element.setAttribute('data-open-edit-form-after-load', 'true')\n  }\n}\n\nfunction commentContainerFor(element: HTMLElement) {\n  return element.closest<HTMLElement>('.discussion-timeline-item.js-comment-container')\n}\n\nfunction isReplyFormOpen(element: HTMLElement) {\n  const replyForm = element.querySelector<HTMLButtonElement>('.js-inline-comment-form-container')\n  if (!replyForm) return false\n\n  return replyForm.classList.contains('open')\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-remove-error-state-on-click > details', {\n  add: element => conditionallyReselectCategory(element as HTMLElement),\n})\n\nfunction conditionallyReselectCategory(element: HTMLElement) {\n  const categoryId = document.getElementById('discussion_category_id')?.getAttribute('value')\n  if (!categoryId) return\n\n  const selectedCategoryButton = element.querySelector<HTMLButtonElement>(`.discussion-category-${categoryId}`)\n  if (!selectedCategoryButton) return\n\n  selectedCategoryButton.click()\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {parseHTML} from '@github-ui/parse-html'\n\nconst sendRequest = async (url: string, csrfToken: string, option_id: string) => {\n  const form = new FormData()\n  form.append('option_id', option_id)\n\n  return await fetch(url, {\n    body: form,\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n    },\n  })\n}\n\nclass PollOptionsElement {\n  optionsElement: HTMLElement | null\n\n  constructor(optionsElement: HTMLElement | null) {\n    this.optionsElement = optionsElement\n  }\n  checkedValue(): string | undefined {\n    const checked = this.optionsElement?.querySelector<HTMLInputElement>('.js-discussion-poll-option:checked')\n    return checked?.value\n  }\n\n  hide(): void {\n    if (this.optionsElement) this.optionsElement.hidden = true\n    this.optionsElement?.setAttribute('aria-hidden', 'true')\n  }\n\n  show(): void {\n    if (this.optionsElement) this.optionsElement.hidden = false\n    this.optionsElement?.setAttribute('aria-hidden', 'false')\n  }\n}\n\nclass PollResultsElement {\n  resultsElement: HTMLElement | null\n\n  constructor(resultsElement: HTMLElement | null) {\n    this.resultsElement = resultsElement\n  }\n\n  hide(): void {\n    if (this.resultsElement) this.resultsElement.hidden = true\n    this.resultsElement?.setAttribute('aria-hidden', 'true')\n  }\n\n  show(): void {\n    if (this.resultsElement) this.resultsElement.hidden = false\n    this.resultsElement?.setAttribute('aria-hidden', 'false')\n  }\n}\n\nclass PollFormElement {\n  pollForm: HTMLElement\n  resultsElement: PollResultsElement\n  optionsElement: PollOptionsElement\n  showResultsButton: HTMLElement | null\n  hideResultsButton: HTMLElement | null\n  voteButton: HTMLElement | null\n  voteUrl: string\n  pollUrl: string\n  pollLocked: string\n  pollQuestion: HTMLDivElement | null\n\n  constructor(pollForm: HTMLElement) {\n    this.pollForm = pollForm\n    this.resultsElement = new PollResultsElement(pollForm.querySelector<HTMLElement>('.js-discussion-poll-results'))\n    this.optionsElement = new PollOptionsElement(pollForm.querySelector<HTMLElement>('.js-discussion-poll-options'))\n    this.hideResultsButton = pollForm.querySelector<HTMLElement>('.js-poll-hide-results')\n    this.showResultsButton = pollForm.querySelector<HTMLElement>('.js-poll-show-results')\n    this.voteButton = pollForm.querySelector<HTMLElement>('.js-discussion-poll-vote-button')\n    this.voteUrl = this.pollForm.getAttribute('data-vote-url') || ''\n    this.pollUrl = this.pollForm.getAttribute('data-poll-url') || ''\n    this.pollLocked = this.pollForm.getAttribute('data-poll-locked') || ''\n    this.pollQuestion = this.pollForm.querySelector<HTMLDivElement>('#poll-question')\n  }\n\n  getCsrfInputValue(): string {\n    const csrfInput = this.pollForm.querySelector<HTMLInputElement>('.js-data-url-post-csrf')\n    return csrfInput ? csrfInput.value : ''\n  }\n\n  hideResults(): void {\n    this.resultsElement.hide()\n    this.optionsElement.show()\n    if (this.hideResultsButton) this.hideResultsButton.hidden = true\n    this.hideResultsButton?.setAttribute('aria-hidden', 'true')\n    if (this.showResultsButton) this.showResultsButton.hidden = false\n    this.showResultsButton?.setAttribute('aria-hidden', 'false')\n    if (this.pollLocked === 'true') {\n      this.voteButton?.setAttribute('aria-disabled', 'true')\n    } else {\n      this.voteButton?.setAttribute('aria-disabled', 'false')\n    }\n    if (this.pollQuestion) {\n      if (this.pollQuestion.textContent)\n        this.pollQuestion.textContent = this.pollQuestion.textContent.replace('Results: ', '')\n      this.pollQuestion.focus()\n    }\n  }\n\n  showResults(): void {\n    this.resultsElement.show()\n    this.optionsElement.hide()\n    if (this.hideResultsButton) this.hideResultsButton.hidden = false\n    this.hideResultsButton?.setAttribute('aria-hidden', 'false')\n    if (this.showResultsButton) this.showResultsButton.hidden = true\n    this.showResultsButton?.setAttribute('aria-hidden', 'true')\n    this.voteButton?.setAttribute('aria-disabled', 'true')\n    if (this.pollQuestion) {\n      this.pollQuestion.textContent = `Results: ${this.pollQuestion.textContent}`\n      this.pollQuestion.focus()\n    }\n  }\n}\n\nclass Poll {\n  pollFormElement: PollFormElement\n\n  constructor(pollFormElement: PollFormElement) {\n    this.pollFormElement = pollFormElement\n    this.bindHideResultsClick(pollFormElement.hideResultsButton)\n    this.bindShowResultsClick(pollFormElement.showResultsButton)\n    this.bindVoteClick(pollFormElement.voteButton)\n  }\n\n  bindHideResultsClick(button: HTMLElement | null): void {\n    button?.addEventListener('click', async () => {\n      this.hideResults()\n    })\n  }\n\n  bindShowResultsClick(button: HTMLElement | null): void {\n    button?.addEventListener('click', async () => {\n      this.showResults()\n    })\n  }\n\n  bindVoteClick(button: HTMLElement | null): void {\n    button?.addEventListener('click', async () => {\n      this.vote()\n    })\n  }\n\n  async vote(): Promise<void> {\n    const checkedValue = this.pollFormElement.optionsElement.checkedValue()\n    if (checkedValue) {\n      const response = await sendRequest(\n        this.pollFormElement.voteUrl,\n        this.pollFormElement.getCsrfInputValue(),\n        checkedValue,\n      )\n      if (response.ok) {\n        try {\n          const pollResponse = await fetch(this.pollFormElement.pollUrl, {headers: {Accept: 'text/html'}})\n          const html = await pollResponse.text()\n          this.pollFormElement.pollForm.replaceWith(parseHTML(document, html))\n          const pollQuestion = document.querySelector<HTMLDivElement>('#poll-question')!\n          if (pollQuestion) {\n            pollQuestion.textContent = `Results: ${pollQuestion.textContent}`\n            pollQuestion.focus()\n          }\n        } catch {\n          return\n        }\n      }\n    }\n  }\n\n  hideResults(): void {\n    this.pollFormElement.hideResults()\n  }\n  showResults(): void {\n    this.pollFormElement.showResults()\n  }\n}\n\nobserve('.js-discussion-poll-component', discussionPollElement => {\n  new Poll(new PollFormElement(discussionPollElement as HTMLElement))\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\n\nconst observer = new IntersectionObserver(\n  function (entries) {\n    for (const entry of entries) {\n      if (entry.isIntersecting) {\n        ;(entry.target as HTMLElement).hidden = true\n      }\n    }\n  },\n  {\n    root: null,\n    rootMargin: '0px',\n    threshold: 0.1,\n  },\n)\n\nobserve('.js-whats-new', el => observer.observe(el))\n\non('click', '.js-whats-new-state', e => {\n  ;((e.target as HTMLElement)?.parentNode as HTMLElement).scrollIntoView({behavior: 'smooth', block: 'start'})\n})\n\nconst showWhatsNew = () => {\n  const el = document.querySelector('.js-whats-new-state')\n  if (!el) return\n  ;(el as HTMLElement).hidden = false\n}\n\ndocument.addEventListener('turbo:load', showWhatsNew)\n;(async function () {\n  await ready\n  // Delay showing it so that the parent's InteractionObserver can fire first in case the user is scrolled\n  setTimeout(showWhatsNew, 1000)\n})()\n","// This code is an adaptation of https://codepen.io/Pillowfication/pen/PNEJbY\n// Markus Tran deserves all the credit!!!\n\nconst random = Math.random\nconst cos = Math.cos\nconst sin = Math.sin\nconst PI = Math.PI\nconst PI2 = PI * 2\nconst spread = 40\nconst sizeMin = 3\nconst sizeMax = 12 - sizeMin\nconst eccentricity = 10\nconst deviation = 100\nconst dxThetaMin = -0.1\nconst dxThetaMax = -dxThetaMin - dxThetaMin\nconst dyMin = 0.13\nconst dyMax = 0.18\nconst dThetaMin = 0.4\nconst dThetaMax = 0.7 - dThetaMin\nlet timer: number | undefined\nlet frame: number | undefined\n\ninterface Confetti {\n  outer: HTMLElement\n  update: (height: number, delta: number) => boolean\n}\nconst confetti: Confetti[] = []\n\n// GitHub themed color palette\nconst colors = ['#6a737d', '#0366d6', '#28a745', '#ffd33d', '#f66a0a', '#6f42c1', '#ea4aaa']\n\nfunction colorTheme() {\n  const idx = Math.floor(Math.random() * colors.length)\n  return colors[idx]!\n}\n\n// Cosine interpolation\nfunction interpolation(a: number, b: number, t: number) {\n  return ((1 - cos(PI * t)) / 2) * (b - a) + a\n}\n\n// Create a 1D Maximal Poisson Disc over [0, 1]\nconst radius = 1 / eccentricity\nconst radius2 = radius + radius\nfunction createPoisson() {\n  const domain = [radius, 1 - radius]\n  let measure = 1 - radius2\n  const spline = [0, 1]\n  while (measure) {\n    let dart = measure * random()\n    let i\n    let l\n    let interval\n    let a\n    let b\n\n    // Find where dart lies\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      a = domain[i]!\n      b = domain[i + 1]!\n      interval = b - a\n      if (dart < measure + interval) {\n        const newDart = dart + a - measure\n        spline.push(newDart)\n        dart = newDart\n        break\n      }\n      measure += interval\n    }\n\n    const c = dart - radius\n    const d = dart + radius\n\n    // Update the domain\n    for (i = domain.length - 1; i > 0; i -= 2) {\n      l = i - 1\n      a = domain[l]!\n      b = domain[i]!\n\n      if (a >= c && a < d)\n        if (b > d) domain[l] = d\n        else domain.splice(l, 2)\n      else if (a < c && b > c)\n        if (b <= d) domain[i] = c\n        else domain.splice(i, 0, c, d)\n    }\n\n    // Re-measure the domain\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      measure += domain[i + 1]! - domain[i]!\n    }\n  }\n\n  return spline.sort()\n}\n\n// Create the overarching container\nconst container = document.createElement('div')\ncontainer.style.position = 'fixed'\ncontainer.style.top = '0'\ncontainer.style.left = '0'\ncontainer.style.width = '100%'\ncontainer.style.height = '0'\ncontainer.style.overflow = 'visible'\ncontainer.style.zIndex = '9999'\n\nclass Confetto {\n  y: number\n  x: number\n  theta: number\n  axis: string\n  splineX: number[]\n  splineY: number[]\n  frame: number\n  dTheta: number\n  dx: number\n  dy: number\n  inner: HTMLElement\n  outer: HTMLElement\n\n  constructor(theme: () => string) {\n    this.frame = 0\n    this.outer = document.createElement('div')\n    this.inner = document.createElement('div')\n    this.outer.appendChild(this.inner)\n\n    this.outer.style.position = 'absolute'\n    this.outer.style.width = `${sizeMin + sizeMax * random()}px`\n    this.outer.style.height = `${sizeMin + sizeMax * random()}px`\n    this.inner.style.width = '100%'\n    this.inner.style.height = '100%'\n    this.inner.style.backgroundColor = theme()\n\n    this.outer.style.perspective = '50px'\n    this.outer.style.transform = `rotate(${360 * random()}deg)`\n    this.theta = 360 * random()\n    this.axis = `rotate3D(${cos(360 * random())},${cos(360 * random())},0,`\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n\n    this.dTheta = dThetaMin + dThetaMax * random()\n\n    this.x = window.innerWidth * random()\n    this.y = -deviation\n    this.dx = sin(dxThetaMin + dxThetaMax * random())\n    this.dy = dyMin + dyMax * random()\n    this.outer.style.left = `${this.x}px`\n    this.outer.style.top = `${this.y}px`\n\n    // Create the periodic spline\n    this.splineX = createPoisson()\n    this.splineY = []\n    const l = this.splineX.length - 1\n    for (let i = 1; i < l; ++i) {\n      this.splineY[i] = deviation * random()\n    }\n    this.splineY[0] = this.splineY[l] = deviation * random()\n  }\n\n  update(height: number, delta: number) {\n    this.frame += delta\n    this.x += this.dx * delta\n    this.y += this.dy * delta\n    this.theta += this.dTheta * delta\n\n    let phi = (this.frame % 7777) / 7777\n    let i = 0\n    let j = 1\n    while (phi >= this.splineX[j]!) {\n      i = j++\n    }\n    const rho = interpolation(\n      this.splineY[i]!,\n      this.splineY[j]!,\n      (phi - this.splineX[i]!) / (this.splineX[j]! - this.splineX[i]!),\n    )\n    phi *= PI2\n\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n    this.outer.style.left = `${this.x + rho * cos(phi)}px`\n    this.outer.style.top = `${this.y + rho * sin(phi)}px`\n    return this.y > height + deviation\n  }\n}\n\nexport default function poof(duration?: number) {\n  // 5s default\n  const ttl = duration == null ? 5000 : duration\n\n  if (!frame) {\n    document.body.appendChild(container)\n\n    const addConfetto = () => {\n      const confetto = new Confetto(colorTheme)\n      confetti.push(confetto)\n      container.appendChild(confetto.outer)\n      timer = window.setTimeout(addConfetto, spread * random())\n    }\n    addConfetto()\n\n    let prev: number | null\n\n    const loop = (timestamp: number) => {\n      const delta = prev ? timestamp - prev : 0\n      prev = timestamp\n      const height = window.innerHeight\n\n      for (let i = confetti.length - 1; i >= 0; --i) {\n        if (confetti[i]!.update(height, delta)) {\n          container.removeChild(confetti[i]!.outer)\n          confetti.splice(i, 1)\n        }\n      }\n\n      if (timer || confetti.length) {\n        frame = requestAnimationFrame(loop)\n        return\n      }\n\n      document.body.removeChild(container)\n      frame = undefined\n    }\n\n    window.setTimeout(function () {\n      clearTimeout(timer)\n      timer = undefined\n    }, ttl)\n\n    requestAnimationFrame(loop)\n  }\n}\n","import {persistResumableFields, restoreResumableFields, setForm} from '@github/session-resume'\nimport {debounce} from '@github/mini-throttle'\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport safeStorage from '@github-ui/safe-storage'\n\n// For some fields we'll save them to localStorage instead of sessionStorage\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 5,\n  throwQuotaErrorsOnSet: false,\n  sendCacheStats: true,\n})\n\nexport const restoreFieldsFromAllBackends = () => {\n  restoreResumableFields(getPageID())\n  restoreResumableFields(getPageID(), {storage: safeLocalStorage})\n}\n\nconst sessionResumableSelector = '.js-session-resumable'\nconst localStorageResumableSelector = '.js-local-storage-resumable'\n\nconst persistFieldstoAllBackends = () => {\n  persistResumableFields(getPageID(), {selector: sessionResumableSelector})\n  persistResumableFields(getPageID(), {selector: localStorageResumableSelector, storage: safeLocalStorage})\n}\n\nconst debouncedRestoreResumableFields = debounce(function () {\n  restoreFieldsFromAllBackends()\n}, 50)\n\n/**\n * Returns true while turbo is showing a \"preview\" of the route from cache: in other words between\n * the time a route is visited and the time it is loaded\n * @returns boolean\n */\nfunction isTurboRenderingCachePreview(): boolean {\n  return document.querySelector('html')?.hasAttribute('data-turbo-preview') ?? false\n}\n\n// Session Resume.\n//\n// Annotate fields to be persisted on navigation away from the current page.\n// Fields be automatically restored when the user revists the page again in\n// their current browser session (excludes seperate tabs).\n//\n// Not design for persisted crash recovery.\n\n// Listen for all form submit events and to see if their default submission\n// behavior is invoked.\nwindow.addEventListener('submit', setForm, {capture: true})\n\n// Resume field content on regular page loads.\nwindow.addEventListener('pageshow', function () {\n  restoreFieldsFromAllBackends()\n})\n\n// Resume field content on elements that are added later\n// We use a debounced version to avoid repeatedly calling it if multiple\n// fields are added\nobserve('.js-session-resumable', function () {\n  // we don't want to restore fields on turbo-cache previews as that empties the cache\n  // causing the fields to be lost when turbo re-renders with the fetched page\n  if (!isTurboRenderingCachePreview()) {\n    debouncedRestoreResumableFields()\n  }\n})\n\n// Persist resumable fields when page is unloaded\nwindow.addEventListener('pagehide', function () {\n  persistFieldstoAllBackends()\n})\n\n// preserve fields before navigating away\nwindow.addEventListener('turbo:before-fetch-response', function () {\n  persistFieldstoAllBackends()\n})\n\n// restore fields once turbo navigation has finished\nwindow.addEventListener('turbo:load', function () {\n  restoreFieldsFromAllBackends()\n})\n","// Gets the current page's id for persisting fields.\n//\n// The value can be overridden by providing a normalized value in a meta tag.\n//\n//   <meta name=\"session-resume-id\" content=\"/github/github/issues/123\">.\n//\n// Defaults to the current url path.\nexport function getPageID(url?: URL): string {\n  const location = url || window.location\n\n  const metaTag = document.head && document.head.querySelector('meta[name=session-resume-id]')\n  const id = metaTag instanceof HTMLMetaElement && metaTag.content\n\n  return id || location.pathname\n}\n","import type {SafeHTMLString} from '@github-ui/safe-html'\n\nexport type QueryBuilderAction = URLAction | QueryAction | RewriteQueryAction | CommandAction\nexport enum SearchScopeText {\n  DIRECTORY = 'Search in this directory',\n  ORG = 'Search in this organization',\n  OWNER = 'Search in this owner',\n  REPO = 'Search in this repository',\n  GITHUB = 'Search all of GitHub',\n  GENERAL = 'Submit search',\n  COMMAND = 'Run command',\n  COPILOT_CHAT = 'Start a new Copilot thread',\n  COPILOT_SEARCH = 'Search with Copilot',\n  EXPLORE = 'Learn More',\n  DEFAULT = 'Jump to',\n}\n\nexport const AutocompleteText = 'Autocomplete'\n\nexport type Provider = SearchProvider | FilterProvider\n\nexport interface Parser<IntermediateRepresentation> {\n  // Note, the intermediate representation data will be available within\n  // providers on the QueryEvent as QueryEvent.parsedMetadata\n  parse(input: string, caretPosition: number | undefined): IntermediateRepresentation\n\n  // Flattens the intermediate representation into a list of QueryElements that\n  // can be styled by QueryBuilder\n  flatten(input: IntermediateRepresentation): QueryElement[]\n}\n\ninterface FilterItemData {\n  filter: string\n  value: string\n  name?: string\n  description?: string\n  inlineDescription?: boolean\n  priority?: number\n  icon?: Icon\n  avatar?: Avatar\n  action?: QueryBuilderAction\n}\n\nexport interface Avatar {\n  type: 'user' | 'org' | 'team'\n  url: string\n}\n\n/**\n * FilterItem represents a value that can be used in a filter. Some examples:\n * - filter is `repo:`, value is `github/github`\n * - filter is `author:`, value is `@keithamus`\n */\nexport class FilterItem extends Event {\n  public name: string\n  public filter: string\n  public value: string\n  public description: string\n  public inlineDescription = false\n  public action?: QueryBuilderAction\n  public priority: number\n  public icon?: Icon\n  public avatar?: Avatar\n\n  constructor({\n    filter,\n    value,\n    name = '',\n    description = '',\n    inlineDescription = false,\n    priority = Infinity,\n    icon = undefined,\n    avatar = undefined,\n    action,\n  }: FilterItemData) {\n    super('filter-item')\n    this.filter = filter\n    this.value = value\n    this.name = name\n    this.description = description\n    this.inlineDescription = inlineDescription\n    this.priority = priority\n    this.icon = icon\n    this.avatar = avatar\n    this.action = action\n  }\n}\n\n/* URLAction represents the URL a SearchItem will navigate to when enacted on */\ninterface URLAction {\n  url: string\n}\n\n/* QueryAction Represents the new Query String that a SearchItem will populate\n * the query-builder input with, when enacted on*/\ninterface QueryAction {\n  query: string\n}\n\ninterface RewriteQueryAction {\n  // Replaces the entire query with the provided string\n  replaceQueryWith: string\n  // The position in the query to move the caret to\n  moveCaretTo: number\n}\n\ninterface CommandAction {\n  commandName: string\n  data: Record<string, unknown>\n}\n\nexport interface CustomIcon {\n  html: SafeHTMLString\n}\n\nexport function isCustomIcon(icon: Icon): icon is CustomIcon {\n  return icon instanceof Object\n}\n\nexport enum Octicon {\n  Apps = 'apps',\n  Archived = 'archived',\n  Book = 'book',\n  Bookmark = 'bookmark',\n  Branch = 'branch',\n  Calendar = 'calendar',\n  Circle = 'circle',\n  Code = 'code',\n  CodeReview = 'code-review',\n  CodeSquare = 'code-square',\n  Comment = 'comment',\n  CommentDiscussion = 'comment-discussion',\n  Copilot = 'copilot',\n  CopilotError = 'copilot-error',\n  Codespaces = 'codespaces',\n  CreditCard = 'credit-card',\n  Default = 'default',\n  DeviceDesktop = 'device-desktop',\n  DeviceMobile = 'device-mobile',\n  Discussion = 'discussion',\n  Draft = 'draft',\n  FileCode = 'file-code',\n  Filter = 'filter',\n  Forbidden = 'forbidden',\n  Gift = 'gift',\n  Globe = 'globe',\n  Heart = 'heart',\n  History = 'history',\n  Issue = 'issue',\n  IssueOpened = 'issue-opened',\n  IssueClosed = 'issueClosed',\n  Iterations = 'iterations',\n  Mention = 'mention',\n  Merged = 'merged',\n  Milestone = 'milestone',\n  No = 'no',\n  Not = 'not',\n  Organization = 'organization',\n  Package = 'package',\n  Pencil = 'pencil',\n  Person = 'person',\n  Play = 'play',\n  PlusCircle = 'plus-circle',\n  Project = 'project',\n  PullRequest = 'pullRequest',\n  Question = 'question',\n  Reaction = 'reaction',\n  Repo = 'repo',\n  Rocket = 'rocket',\n  Search = 'search',\n  Server = 'server',\n  ShieldCheck = 'shield-check',\n  SingleSelect = 'single-select',\n  Sort = 'sort',\n  Tag = 'tag',\n  Team = 'team',\n  Telescope = 'telescope',\n  Trash = 'trash',\n  Workflow = 'workflow',\n}\n\nexport enum PrefixColor {\n  Entity = '--color-prettylights-syntax-entity',\n  Constant = '--color-prettylights-syntax-constant',\n  Keyword = '--color-prettylights-syntax-keyword',\n  Variable = '--color-prettylights-syntax-variable',\n  String = '--color-prettylights-syntax-string',\n}\n\nexport type Icon = Octicon | CustomIcon\n\ninterface SearchItemData {\n  id?: string\n  priority: number\n  value: string\n  action: QueryBuilderAction\n  description?: string\n  icon?: Icon\n  scope?: keyof typeof SearchScopeText\n  prefixText?: string\n  prefixColor?: PrefixColor\n\n  // If set, the item will only be rendered if no other providers\n  // sent items.\n  isFallbackSuggestion?: boolean\n  isUpdate?: boolean\n}\n\n/* SearchItem represents a result that appears in the results list, and has an action for a user to enact on */\nexport class SearchItem extends Event {\n  public id?: string\n  public priority: number\n  public value: string\n  public action: QueryBuilderAction\n  public description: string\n  public icon?: Icon\n  public scope: keyof typeof SearchScopeText\n  public prefixText?: string\n  public prefixColor?: PrefixColor\n  public isFallbackSuggestion: boolean\n\n  constructor({\n    id,\n    priority,\n    value,\n    action,\n    description = '',\n    icon = undefined,\n    scope = 'DEFAULT',\n    prefixText,\n    prefixColor,\n    isFallbackSuggestion,\n    isUpdate,\n  }: SearchItemData) {\n    super(isUpdate ? 'update-item' : 'search-item')\n    this.id = id\n    this.priority = priority\n    this.value = value\n    this.prefixText = prefixText\n    this.prefixColor = prefixColor\n    this.action = action\n    this.description = description\n    this.icon = icon\n    this.scope = scope\n    this.isFallbackSuggestion = isFallbackSuggestion || false\n  }\n}\n\nexport interface SearchProvider extends EventTarget {\n  priority: number\n  icon?: Icon\n  name: string // plural group name (i.e. \"repositories\" or \"teams\") - will be the visual header\n  description?: string\n  singularItemName: string // singular name for an item (i.e. \"repository\" or \"team\") to construct a meaningful aria-label, doesn't appear visually\n  value: string // visual name of the filter (i.e. \"is:\")\n  type: 'search'\n}\n\nexport interface FilterProvider extends EventTarget {\n  priority: number\n  icon?: Icon\n  name: string // plural group name (i.e. \"repositories\" or \"teams\") - will be the visual header\n  description?: string\n  singularItemName: string // singular name for an item (i.e. \"repository\" or \"team\") to construct a meaningful aria-label, doesn't appear visually\n  value: string // visual name of the filter (i.e. \"is:\")\n  type: 'filter'\n  // When set, if a filter provider emits filter items, always render them in the UI. If not set,\n  // filter items will only be rendered if the querybuilder thinks a filter item is being written\n  // by the user, which may be incorrect if using a custom parser.\n  manuallyDetermineFilterEligibility?: boolean\n}\n\nexport type QueryElement = QueryFilterElement | QueryTextElement\n\nexport interface QueryFilterElement {\n  type: 'filter'\n  filter: string\n  value: string\n  style?: TextElementStyle\n}\n\nexport interface QueryTextElement {\n  type: 'text'\n  value: string\n  style?: TextElementStyle\n}\n\nexport enum TextElementStyle {\n  Normal = 'normal',\n  Entity = 'entity',\n  Constant = 'constant',\n  FilterValue = 'filter-value',\n}\n\nexport class FetchDataEvent extends Event {\n  constructor(public fetchPromise: Promise<unknown>) {\n    super('fetch-data')\n  }\n}\n\nexport class QueryEvent extends Event {\n  constructor(\n    public parsedQuery: QueryElement[],\n    public rawQuery: string,\n    public parsedMetadata: unknown,\n  ) {\n    super('query')\n  }\n\n  override toString() {\n    return this.rawQuery\n  }\n}\n\nclass QueryBuilderProvider extends Event {\n  constructor(public provider: SearchProvider) {\n    super('query-builder-provider', {bubbles: true})\n  }\n}\n\ndeclare global {\n  interface Document {\n    addEventListener(type: 'query-builder-provider', handler: (event: QueryBuilderProvider) => void): void\n  }\n}\n","// TODO: Research replacing this module with a composable observable library.\n// The scope of this module simply returns a finalized subscription object.\n\n// Lightweight TC39 observable Subscription.\nexport class Subscription {\n  constructor(cleanup: () => void) {\n    this.closed = false\n    this.unsubscribe = () => {\n      cleanup()\n      this.closed = true\n    }\n  }\n\n  // A boolean value indicating whether the subscription is closed.\n  closed: boolean\n  // Cancels the subscription.\n  unsubscribe: () => void\n}\n\n// Create a Subscription from an event.\nexport function fromEvent(\n  target: EventTarget,\n  eventName: string,\n  onNext: EventListenerOrEventListenerObject,\n  options: AddEventListenerOptions = {capture: false},\n): Subscription {\n  target.addEventListener(eventName, onNext, options)\n  return new Subscription(() => {\n    target.removeEventListener(eventName, onNext, options)\n  })\n}\n\n// Combine several subscriptions into a single subscription.\n//\n// subscriptions - A list of subscriptions to combine.\n//\n// Returns a single, combined, subscription.\nexport function compose(...subscriptions: Subscription[]): Subscription {\n  return new Subscription(() => {\n    for (const subscription of subscriptions) {\n      subscription.unsubscribe()\n    }\n  })\n}\n","export function defaultHash(...args) {\n    // JSON.stringify ellides `undefined` and function values by default. We do not want that.\n    return JSON.stringify(args, (_, v) => (typeof v === 'object' ? v : String(v)));\n}\nexport default function memoize(fn, opts = {}) {\n    const { hash = defaultHash, cache = new Map() } = opts;\n    return function (...args) {\n        const id = hash.apply(this, args);\n        if (cache.has(id))\n            return cache.get(id);\n        let result = fn.apply(this, args);\n        if (result instanceof Promise) {\n            // eslint-disable-next-line github/no-then\n            result = result.catch(error => {\n                cache.delete(id);\n                throw error;\n            });\n        }\n        cache.set(id, result);\n        return result;\n    };\n}\n"],"names":["throttle","callback","wait","start","middle","once","timer","innerStart","last","cancelled","fn","args","delta","Date","now","apply","cancel","clearTimeout","setTimeout","debounce","activeTrap","focusTrap","container","initialFocus","abortSignal","lastFocusedChild","controller","AbortController","signal","setAttribute","sentinelStart","document","createElement","onfocus","lastFocusableChild","focus","sentinelEnd","ensureTrapZoneHasFocus","focusedElement","HTMLElement","contains","firstFocusableChild","prepend","append","wrappingController","followSignal","addEventListener","abort","suspendedTrap","suspendedTrapStack","push","undefined","removeAttribute","sentinels","getElementsByClassName","length","remove","suspendedTrapIndex","findIndex","t","splice","tryReactivate","trapToReactivate","pop","originalSignal","event","target","capture","activeElement","poll","replaceAnswerForm","form","wants","response","html","commentContainer","closest","classList","add","id","getAttribute","getElementById","replaceWith","observe","el","href","answerElement","querySelector","fromEvent","e","preventDefault","blockScrollOption","getBoundingClientRect","height","window","innerHeight","scrollIntoView","behavior","block","answerComment","tabIndex","preventScroll","DOMException","element","removeMarkAsAnswerButtons","discussion","addMarkAsAnswerButtons","remoteForm","data","CustomEvent","item","detail","action","parentElement","category","label","JSON","stringify","on","currentTarget","HTMLButtonElement","previouslySelected","emojiField","value","emojiSpan","innerHTML","querySelectorAll","hidePopover","traps","WeakMap","button","popover","togglePopover","newState","picker","set","open","get","delete","close","currentCategory","currentCategoryId","announcementWarning","markAsAnswerWarning","selectedCategory","otherDiscussion","parent","destroyField","pollOptionContainer","nextElementSibling","hidden","getOptionBtn","fire","pollOptionsLimit","pollOptionTemplate","isNewDiscussion","newPollOption","cloneNode","input","name","indexCounter","parseInt","appendChild","optionsCount","title","searchLink","HTMLAnchorElement","HTMLInputElement","searchUrl","URL","location","origin","searchParams","toString","CommentActionsContainerElement","displayDialog","dialogId","dialogContainer","createDialog","showDialog","src","size","newDialog","TemplateInstance","dialogTemplate","dialog","showModal","conditionallyRenderEditForm","targetContainer","editFormTargetContainer","url","type","editFormTemplateReplacements","targetType","fetchAndReturnUpdatePermission","insertEditForm","insertMarkdownToolbar","fetch","headers","Accept","json","handleClick","insertPollEditForm","pollEditUrl","insertTemplate","handlePollModificationEvent","editPollFormContainer","toggleFormActionVariant","showConfirmationPrompt","insertPollEditConfirmationPrompt","formActionsContainer","editFormActionsContainer","insertEditFormActions","hasDirtyFields","templateReplacements","textareaId","bodyVersion","outerDivClasses","repositoryId","targetBody","slashCommandUrl","templateSelector","template","textContent","handleReactionEvent","renderer","OptimisticReactionRenderer","render","subscribe","onKey","isReactionAlreadyRendered","addNewReactionGroup","isAddingReaction","addReactionToGroup","removeReactionFromGroup","existingReactionGroupCountContainer","existingReactionGroup","existingReactionGroupCount","addReactionToPopoverReactionButtons","focusOnAdjacentReaction","previousReaction","nextReaction","getIndex","index","existingReactionIndex","reactionGroupsContainer","values","currentReactionIndex","removeReactionFromPopoverReactionButtons","newEmojiButton","newEmojiButtonFromTemplate","newEmojiButtonTemplateContainer","commentReactionsContainer","nextButtonGroup","insertBefore","tooltipPositionClass","templateContainerButton","templateContainerContent","content","newEmojiButtonFromTemplatePosition","children","buttonIndexPosition","clickedReactionButton","buttonsContainer","reactionContent","reactionGroup","Number","match","replace","constructor","insertForm","options","commentId","anchorId","backPage","willFocus","focusForm","conditionallyInsertForm","willOpen","restoreFieldsFromAllBackends","quote","range","text","blurForm","fetchJSON","ok","memoizeCache","Map","memoizeFetchJSON","memoize","cache","getSearchInput","fetchAuthorSuggestions","fetchCategorySuggestions","parse","fetchLabelSuggestions","authors","categories","labels","states","getSearchUrl","filterSuggestions","suggestions","query","filter","suggestion","hasMatch","SearchItemProvider","EventTarget","handleEvent","String","dispatchEvent","SearchItem","priority","icon","Octicon","Search","scope","queryBuilder","singularItemName","attachProvider","AuthorProvider","lastQuery","parsedQuery","at","lastQueryValue","lastQueryType","lastQueryFilter","Event","author","filteredAuthors","getAuthorData","map","slice","FilterItem","CategoryProvider","getCategoryData","StateProvider","filteredStates","state","LabelProvider","labelValues","getLabelData","defaultLabels","poof","DiscussionSpotlightPreviewElement","updatePreview","newStyle","currentOption","spotlightElement","send","notice","categories_notice","DiscussionSpotlightContainerElement","openDiscussionLink","selection","getSelection","mainLink","click","isReplyFormOpen","replyForm","conditionallyReselectCategory","categoryId","selectedCategoryButton","sendRequest","csrfToken","question","FormData","option","body","method","mode","PollFormElement","hide","pollForm","show","getCsrfInputValue","csrfInput","getOptions","pollOptionsContainer","getQuestion","questionInputElment","pollPreviewUrl","Poll","hidePollForm","pollFormElement","showPollForm","getPreview","discussionPollElement","commentBody","previewPollHTML","parseHTML","option_id","PollOptionsElement","checkedValue","checked","optionsElement","PollResultsElement","resultsElement","hideResults","hideResultsButton","showResultsButton","pollLocked","voteButton","pollQuestion","showResults","voteUrl","pollUrl","bindHideResultsClick","bindShowResultsClick","bindVoteClick","vote","pollResponse","observer","IntersectionObserver","entries","entry","isIntersecting","root","rootMargin","threshold","parentNode","showWhatsNew","ready","frame","random","Math","cos","sin","PI","PI2","confetti","colors","colorTheme","idx","floor","style","position","top","left","width","overflow","zIndex","Confetto","update","a","b","x","dx","y","dy","theta","dTheta","phi","i","j","splineX","rho","splineY","inner","transform","axis","outer","theme","sizeMin","sizeMax","backgroundColor","perspective","dThetaMin","dThetaMax","innerWidth","dxThetaMin","dxThetaMax","dyMin","dyMax","createPoisson","domain","measure","spline","l","interval","dart","newDart","c","d","sort","deviation","duration","prev","addConfetto","confetto","spread","loop","timestamp","removeChild","requestAnimationFrame","safeLocalStorage","safeStorage","ttl","throwQuotaErrorsOnSet","sendCacheStats","restoreResumableFields","getPageID","storage","persistFieldstoAllBackends","persistResumableFields","selector","debouncedRestoreResumableFields","setForm","hasAttribute","metaTag","head","HTMLMetaElement","pathname","SearchScopeText","AutocompleteText","description","inlineDescription","Infinity","avatar","isCustomIcon","Object","PrefixColor","prefixText","prefixColor","isFallbackSuggestion","isUpdate","TextElementStyle","FetchDataEvent","fetchPromise","QueryEvent","rawQuery","parsedMetadata","Subscription","cleanup","closed","unsubscribe","eventName","onNext","removeEventListener","compose","subscriptions","subscription","defaultHash","_","v","opts","hash","has","result","Promise","catch","error"],"sourceRoot":""}