{"version":3,"file":"app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/commenting/edit.ts","app/assets/modules/github/behaviors/html-validation.ts"],"sourcesContent":["// Commenting: Edit and delete buttons\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {IncludeFragmentElement} from '@github/include-fragment-element'\nimport {morph, morphContent} from '@github-ui/morpheus'\n\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {fromEvent} from '@github-ui/subscription'\nimport {hasDirtyFields, hasInteractions} from '@github-ui/has-interactions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {remoteForm} from '@github/remote-form'\nimport {updateContent} from '@github-ui/updatable-content'\n\nlet bodyErrors: string[] = []\n\n// Preload the edit form fragment when the dropdown menu is loaded\nobserve('.js-comment-header-actions-deferred-include-fragment', {\n  subscribe: el =>\n    fromEvent(\n      el,\n      'loadstart',\n      () => {\n        const container = el.closest<HTMLElement>('.js-comment')!\n        loadEditFormDeferredIncludeFragment(container)\n      },\n      {capture: false, once: true},\n    ),\n})\n\n// If the comment contains a task list we need to immediately load the edit form\n// because it's used to decide if the user can edit tasks in the list or not\nobserve('.js-comment .contains-task-list', {\n  add: el => {\n    const container = el.closest<HTMLElement>('.js-comment')!\n    loadEditFormDeferredIncludeFragment(container)\n  },\n})\n\n// Edit button\non('click', '.js-comment-edit-button', function (event) {\n  const container = event.currentTarget.closest<HTMLElement>('.js-comment')!\n  container.classList.add('is-comment-editing')\n\n  // Focus on the edit form when it is loaded\n  const editFormIncludeFragment = findEditFormDeferredIncludeFragment(container)\n  if (!editFormIncludeFragment) {\n    // Edit form is already loaded into the DOM so just focus on it\n    focusEditForm(container)\n  } else {\n    // If an <include-fragment> exists, wait till it's loaded before focusing\n    editFormIncludeFragment.addEventListener('include-fragment-replaced', () => focusEditForm(container), {once: true})\n  }\n\n  const dropdown = event.currentTarget.closest('.js-dropdown-details')\n  if (dropdown) {\n    dropdown.removeAttribute('open')\n  }\n})\n\nfunction focusEditForm(container: HTMLElement) {\n  container.querySelector<HTMLElement>('.js-write-tab')!.click()\n  const field = container.querySelector<HTMLElement>('.js-comment-field')!\n  ;(field as HTMLTextAreaElement).focus()\n  // Trigger size-to-fit (see #15696)\n  fire(field, 'change')\n}\n\nfunction findEditFormDeferredIncludeFragment(container: HTMLElement) {\n  return container.querySelector<IncludeFragmentElement>('.js-comment-edit-form-deferred-include-fragment')\n}\n\n// By default the edit form include fragment is set to `loading=lazy` to avoid triggering\n// loading on pageload, however sometimes we want to pre-emptively load it\nfunction loadEditFormDeferredIncludeFragment(container: HTMLElement) {\n  findEditFormDeferredIncludeFragment(container)?.setAttribute('loading', 'eager')\n}\n\n// Show minimize form button\non('click', '.js-comment-hide-button', function (event) {\n  const comment = event.currentTarget.closest<HTMLElement>('.js-comment')!\n  toggleMinimizeError(comment, false)\n  const minimizeForm = comment.querySelector('.js-minimize-comment')\n  /* eslint-disable-next-line github/no-d-none */\n  if (minimizeForm) minimizeForm.classList.remove('d-none')\n\n  const dropdown = event.currentTarget.closest('.js-dropdown-details')\n  if (dropdown) {\n    dropdown.removeAttribute('open')\n  }\n})\n\n// Hide minimize form button\non('click', '.js-comment-hide-minimize-form', function (event) {\n  const minimizeForm = event.currentTarget.closest<HTMLElement>('.js-minimize-comment')!\n  /* eslint-disable-next-line github/no-d-none */\n  minimizeForm.classList.add('d-none')\n})\n\n// Comment Cancel button\nexport function handleCommentCancelButtonClick(event: Event & {currentTarget: Element}) {\n  const form = event.currentTarget.closest<HTMLFormElement>('form')!\n  const confirmText = event.currentTarget.getAttribute('data-confirm-text')!\n  if (hasDirtyFields(form) && !confirm(confirmText)) {\n    return false\n  }\n\n  for (const field of form.querySelectorAll('input, textarea')) {\n    const fieldEl = field as HTMLInputElement | HTMLTextAreaElement\n    fieldEl.value = fieldEl.defaultValue\n\n    if (fieldEl.classList.contains('session-resumable-canceled')) {\n      fieldEl.classList.add('js-session-resumable')\n      fieldEl.classList.remove('session-resumable-canceled')\n    }\n  }\n\n  const comment = event.currentTarget.closest('.js-comment')\n  if (comment) {\n    comment.classList.remove('is-comment-editing')\n  }\n\n  return true\n}\non('click', '.js-comment-cancel-button', handleCommentCancelButtonClick)\n\n// Issue edit cancel\non('click', '.js-cancel-issue-edit', function (event) {\n  const container = event.currentTarget.closest<HTMLElement>('.js-details-container')!\n  container.querySelector<HTMLElement>('.js-comment-form-error')!.hidden = true\n})\n\n// Show loading state for updating, deleting, minimizing, and unminimizing\n// Add version so server can decide if we're working with fresh data\nremoteForm(\n  '.js-comment-delete, .js-comment .js-comment-update, .js-issue-update, .js-comment-minimize, .js-comment-unminimize',\n  function (form, wants, request) {\n    const comment = form.closest<HTMLElement>('.js-comment')!\n    comment.classList.add('is-comment-loading')\n    const bodyVersion = comment.getAttribute('data-body-version')\n    if (bodyVersion) {\n      request.headers.set('X-Body-Version', bodyVersion)\n    }\n  },\n)\n\n// Rejected updates that are stale freezes the form and shows an error.\n// See AbstractRepositoryController#render_stale_error for stale error response.\nremoteForm('.js-comment .js-comment-update', async function (form, wants) {\n  let response\n  const comment = form.closest<HTMLElement>('.js-comment')!\n  const updateError = comment.querySelector('.js-comment-update-error')\n  const bodyError = comment.querySelector('.js-comment-body-error')\n  if (updateError instanceof HTMLElement) {\n    updateError.hidden = true\n  }\n  if (bodyError instanceof HTMLElement) {\n    bodyError.hidden = true\n  }\n  bodyErrors = []\n\n  // Prevent live updates while the form is submitting.\n  form.classList.add('is-dirty')\n\n  try {\n    response = await wants.json()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status === 422) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      const data = JSON.parse(error.response.text)\n\n      if (data.errors) {\n        if (updateError instanceof HTMLElement) {\n          // eslint-disable-next-line i18n-text/no-en\n          updateError.textContent = `There was an error posting your comment: ${data.errors.join(', ')}`\n          updateError.hidden = false\n        }\n        return\n      }\n    } else {\n      throw error\n    }\n  } finally {\n    form.classList.remove('is-dirty')\n  }\n\n  if (!response) return\n  const data = response.json\n\n  if (data.errors && data.errors.length > 0) {\n    bodyErrors = data.errors\n    showBodyErrors(bodyError as HTMLElement)\n  }\n\n  const commentBody = comment.querySelector('.js-comment-body')\n  const trackingBlockDirty =\n    commentBody != null &&\n    form.getAttribute('data-submitting-tracking-block-update') === 'async' &&\n    hasInteractions(commentBody, true, true)\n\n  if (commentBody && data.body && !trackingBlockDirty) {\n    morphContent(commentBody, data.body, {keepInputValues: true})\n  }\n  if (data.source != null) {\n    const commentField = comment.querySelector<HTMLTextAreaElement>('.js-comment-field')\n    if (commentField) {\n      commentField.defaultValue = data.source\n\n      // Only update the markdown if the tracking block has not already updated it.\n      if (!trackingBlockDirty) {\n        commentField.value = data.source\n      }\n    }\n    // if the issue is a PR, update the merge commit message with the updated body text\n    if (data.default_merge_commit_message) {\n      if (document.querySelector('.js-merge-pr.is-merging')) {\n        const mergeFieldMessage = document.querySelector('.js-merge-pull-request textarea')\n        if (\n          mergeFieldMessage instanceof HTMLTextAreaElement &&\n          mergeFieldMessage.value === mergeFieldMessage.defaultValue\n        ) {\n          mergeFieldMessage.value = mergeFieldMessage.defaultValue = data.default_merge_commit_message\n        }\n      }\n      if (data.default_squash_commit_message) {\n        if (document.querySelector('.js-merge-pr.is-squashing')) {\n          const mergeFieldMessage = document.querySelector('.js-merge-pull-request textarea')\n          if (\n            mergeFieldMessage instanceof HTMLTextAreaElement &&\n            mergeFieldMessage.value === mergeFieldMessage.defaultValue\n          ) {\n            mergeFieldMessage.value = mergeFieldMessage.defaultValue = data.default_squash_commit_message\n          }\n        }\n      }\n    }\n    document\n      .querySelector('.js-merge-box-button-merge')\n      ?.setAttribute('data-input-message-value', data.default_merge_commit_message)\n\n    document\n      .querySelector('.js-merge-box-button-squash')\n      ?.setAttribute('data-input-message-value', data.default_squash_commit_message)\n  }\n\n  comment.setAttribute('data-body-version', data.newBodyVersion)\n  const bodyVersionInput = comment.querySelector('.js-body-version')\n  if (bodyVersionInput instanceof HTMLInputElement) {\n    bodyVersionInput.value = data.newBodyVersion\n  }\n\n  const discussionPoll = comment.querySelector('.js-discussion-poll')\n  if (discussionPoll && data.poll) {\n    discussionPoll.innerHTML = data.poll\n  }\n\n  for (const field of comment.querySelectorAll('input, textarea')) {\n    const fieldEl = field as HTMLInputElement | HTMLTextAreaElement\n    fieldEl.defaultValue = fieldEl.value\n  }\n\n  // If the comment was previously stale, remove the warning as it is now fresh\n  comment.classList.remove('is-comment-stale')\n\n  // Only leave edit mode if the user manually submitted the form.\n  if (!form.hasAttribute('data-submitting-tracking-block-update')) {\n    comment.classList.remove('is-comment-editing')\n  }\n\n  const edits = comment.querySelector('.js-comment-edit-history')\n  if (edits) {\n    const html = await fetchSafeDocumentFragment(document, data.editUrl)\n    morph(edits, html)\n  }\n})\n\n// this block will show the error block if there were errors on body modification\nobserve('.js-comment-body-error', {\n  add: el => {\n    if (bodyErrors && bodyErrors.length > 0) {\n      showBodyErrors(el as HTMLElement)\n    }\n  },\n})\n\nfunction showBodyErrors(el: HTMLElement) {\n  const ol = el.querySelector('ol')\n  if (ol) {\n    ol.textContent = ''\n    const items = bodyErrors.map(e => {\n      const li = document.createElement('li')\n      li.textContent = e\n      return li\n    })\n    for (const li of items) {\n      ol.appendChild(li)\n    }\n  }\n  el.hidden = false\n}\n\n// Hide loading state for updating, deleting, minimizing, and unminimizing\nremoteForm(\n  '.js-comment .js-comment-delete, .js-comment .js-comment-update, .js-comment-minimize, .js-comment-unminimize',\n  async function (form, wants) {\n    const comment = form.closest<HTMLElement>('.js-comment')!\n    let error\n\n    try {\n      await wants.text()\n    } catch (err) {\n      error = err\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.response.status === 422) {\n        let data\n        try {\n          // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n          data = JSON.parse(error.response.text)\n        } catch (e) {\n          // Do nothing\n        }\n\n        if (data && data.stale) comment.classList.add('is-comment-stale')\n      } else {\n        throw error\n      }\n    } finally {\n      form.dispatchEvent(new CustomEvent('submit:complete', {bubbles: true, detail: {error}}))\n    }\n\n    comment.classList.remove('is-comment-loading')\n  },\n)\n\nfunction toggleMinimizeError(comment: HTMLElement, errored: boolean) {\n  const minimizeError = comment.querySelector<HTMLElement>('.js-comment-show-on-error')\n  if (minimizeError) {\n    minimizeError.hidden = !errored\n  }\n  const minimizeForm = comment.querySelector<HTMLElement>('.js-comment-hide-on-error')\n  if (minimizeForm) {\n    minimizeForm.hidden = errored\n  }\n}\n\nremoteForm('.js-timeline-comment-unminimize, .js-timeline-comment-minimize', async function (form, wants) {\n  const comment = form.closest<HTMLElement>('.js-minimize-container')!\n  try {\n    const response = await wants.html()\n    comment.replaceWith(response.html)\n  } catch (error) {\n    toggleMinimizeError(comment, true)\n  }\n})\n\nremoteForm('.js-discussion-comment-unminimize, .js-discussion-comment-minimize', async function (form, wants) {\n  const comment = form.closest<HTMLElement>('.js-discussion-comment')!\n  const minimizeError = comment.querySelector<HTMLElement>('.js-discussion-comment-error')\n  if (minimizeError) {\n    minimizeError.hidden = true\n  }\n\n  try {\n    const response = await wants.html()\n    comment.replaceWith(response.html)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status >= 400 && error.response.status < 500) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.response.html) {\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        const errorMessage = error.response.html.querySelector('.js-discussion-comment')!.getAttribute('data-error')!\n        if (minimizeError instanceof HTMLElement) {\n          minimizeError.textContent = errorMessage\n          minimizeError.hidden = false\n        }\n      }\n    } else {\n      throw error\n    }\n  }\n})\n\n// Remove comment if deleted successfully\nremoteForm('.js-comment-delete', async function (form, wants) {\n  await wants.json()\n\n  let container = form.closest('.js-comment-container') || form.closest('.js-line-comments')\n\n  if (container && container.querySelectorAll('.js-comment').length !== 1) {\n    container = form.closest<HTMLElement>('.js-comment')!\n  }\n\n  const thread = container?.closest('.js-comment-container') || container?.closest('.js-line-comments')\n\n  container?.remove()\n\n  if (thread && thread.querySelectorAll('.js-comment').length === 1) {\n    for (const x of thread.querySelectorAll('.js-delete-on-last-reply-deleted')) {\n      x.remove()\n    }\n  }\n})\n\n// Update issue/PR/discussion title if successful\nremoteForm('.js-issue-update', async function (form, wants) {\n  const container = form.closest<HTMLElement>('.js-details-container')!\n  const errorDisplay = container.querySelector<HTMLElement>('.js-comment-form-error')!\n\n  let response\n  try {\n    response = await wants.json()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    // eslint-disable-next-line i18n-text/no-en\n    errorDisplay.textContent = error.response?.json?.errors?.[0] || 'Something went wrong. Please try again.'\n    errorDisplay.hidden = false\n  }\n\n  if (!response) return\n\n  container.classList.remove('open')\n  errorDisplay.hidden = true\n  const data = response.json\n  if (data.issue_title != null) {\n    container.querySelector<HTMLElement>('.js-issue-title')!.textContent = data.issue_title\n    const issuesContainer = container.closest('.js-issues-results')\n    if (issuesContainer) {\n      if (issuesContainer.querySelector('.js-merge-pr.is-merging')) {\n        const mergeFieldTitle = issuesContainer.querySelector('.js-merge-pull-request .js-merge-title')\n        if (mergeFieldTitle instanceof HTMLInputElement && mergeFieldTitle.value === mergeFieldTitle.defaultValue) {\n          mergeFieldTitle.value = mergeFieldTitle.defaultValue = data.default_merge_commit_title\n        }\n      } else if (issuesContainer.querySelector('.js-merge-pr.is-squashing')) {\n        const mergeFieldTitle = issuesContainer.querySelector('.js-merge-pull-request .js-merge-title')\n        if (mergeFieldTitle instanceof HTMLInputElement && mergeFieldTitle.value === mergeFieldTitle.defaultValue) {\n          mergeFieldTitle.value = mergeFieldTitle.defaultValue = data.default_squash_commit_title\n        }\n      }\n\n      const mergeButton = issuesContainer.querySelector('button[value=merge]')\n      if (mergeButton) {\n        mergeButton.setAttribute('data-input-title-value', data.default_merge_commit_title)\n      }\n\n      const squashInput = issuesContainer.querySelector('button[value=squash]')\n      if (squashInput) {\n        squashInput.setAttribute('data-input-title-value', data.default_squash_commit_title)\n      }\n    }\n  }\n  document.title = data.page_title\n  for (const field of form.elements) {\n    if (field instanceof HTMLInputElement || field instanceof HTMLTextAreaElement) {\n      field.defaultValue = field.value\n    }\n  }\n})\n\n// Hide comment if minimized successfully\nremoteForm('.js-comment-minimize', async function (form, wants) {\n  await wants.json()\n  const comment = form.closest<HTMLElement>('.js-comment')!\n\n  const minimizeForm = comment.querySelector('.js-minimize-comment')\n\n  if (minimizeForm && minimizeForm.classList.contains('js-update-minimized-content')) {\n    const submitButton = form.querySelector<HTMLInputElement | HTMLButtonElement>(\n      'input[type=submit], button[type=submit]',\n    )\n\n    if (submitButton) {\n      submitButton.classList.add('disabled')\n    }\n    const updatableCommentContainer = comment.closest<HTMLElement>('.js-comment-container')\n    if (updatableCommentContainer) {\n      await updateContent(updatableCommentContainer)\n    }\n  } else {\n    /* eslint-disable-next-line github/no-d-none */\n    if (minimizeForm) minimizeForm.classList.add('d-none')\n    const unminimizedComment = form.closest<HTMLElement>('.unminimized-comment')!\n    /* eslint-disable-next-line github/no-d-none */\n    unminimizedComment.classList.add('d-none')\n    unminimizedComment.classList.remove('js-comment')\n\n    const commentGroup = form.closest<HTMLElement>('.js-minimizable-comment-group')!\n    const minimizedComment = commentGroup.querySelector('.minimized-comment')\n    /* eslint-disable-next-line github/no-d-none */\n    if (minimizedComment) minimizedComment.classList.remove('d-none')\n    if (minimizedComment) minimizedComment.classList.add('js-comment')\n  }\n})\n\n// Show comment if unminimized successfully\nremoteForm('.js-comment-unminimize', async function (form, wants) {\n  await wants.json()\n  const commentGroup = form.closest<HTMLElement>('.js-minimizable-comment-group')!\n  const unminimizedComment = commentGroup.querySelector('.unminimized-comment')\n  const minimizedComment = commentGroup.querySelector('.minimized-comment')\n\n  if (unminimizedComment) {\n    /* eslint-disable-next-line github/no-d-none */\n    unminimizedComment.classList.remove('d-none')\n    unminimizedComment.classList.add('js-comment')\n\n    /* eslint-disable-next-line github/no-d-none */\n    if (minimizedComment) minimizedComment.classList.add('d-none')\n    if (minimizedComment) minimizedComment.classList.remove('js-comment')\n  } else {\n    // if the unminimizedComment is not present at this point,\n    // try to fetch it from the server\n    if (minimizedComment) {\n      const actionForm = minimizedComment.querySelector('.timeline-comment-actions')\n      // hide form while waiting for updated content\n      /* eslint-disable-next-line github/no-d-none */\n      if (actionForm) actionForm.classList.add('d-none')\n      minimizedComment.classList.remove('js-comment')\n    }\n\n    const updatableCommentContainer = commentGroup.closest<HTMLElement>('.js-comment-container')!\n    await updateContent(updatableCommentContainer)\n  }\n})\n\non(\n  'details-menu-select',\n  '.js-comment-edit-history-menu',\n  event => {\n    const url = (event as CustomEvent).detail.relatedTarget.getAttribute('data-edit-history-url')\n    if (!url) return\n    // Prevent menu from closing\n    event.preventDefault()\n    const content = fetchSafeDocumentFragment(document, url)\n    dialog({\n      content,\n      dialogClass: 'Box-overlay--wide overflow-visible',\n      errorMessage: \"Couldn't display edit history diff\",\n    })\n  },\n  {capture: true},\n)\n","import {onFocus, onInput} from '@github-ui/onfocus'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst supportedFields = [\n  'input[pattern]',\n  'input[required]',\n  'textarea[required]',\n  'input[data-required-change]',\n  'textarea[data-required-change]',\n  'input[data-required-value]',\n  'textarea[data-required-value]',\n].join(',')\n\ntype Field = HTMLInputElement | HTMLTextAreaElement\n\nfunction checkValidityForRequiredValueField(field: Field) {\n  const requiredValue = field.getAttribute('data-required-value')!\n  const prefix = field.getAttribute('data-required-value-prefix')\n\n  if (field.value === requiredValue) {\n    field.setCustomValidity('')\n  } else {\n    let message = requiredValue\n    if (prefix) {\n      message = prefix + message\n    }\n    field.setCustomValidity(message)\n  }\n}\n\nonInput('[data-required-value]', function (event) {\n  const field = event.currentTarget as Field\n  checkValidityForRequiredValueField(field)\n})\n\non('change', '[data-required-value]', function (event) {\n  const field = event.currentTarget as Field\n  checkValidityForRequiredValueField(field)\n\n  // We need to call validate since we don't fire a `change` event on the form\n  // when session-resume dumps the text back into the field.\n  validate(field.form!)\n})\n\nonInput('[data-required-trimmed]', function (event) {\n  const field = event.currentTarget as Field\n  if (field.value.trim() === '') {\n    field.setCustomValidity(field.getAttribute('data-required-trimmed')!)\n  } else {\n    field.setCustomValidity('')\n  }\n})\n\non('change', '[data-required-trimmed]', function (event) {\n  const field = event.currentTarget as Field\n  if (field.value.trim() === '') {\n    field.setCustomValidity(field.getAttribute('data-required-trimmed')!)\n  } else {\n    field.setCustomValidity('')\n  }\n\n  // We need to call validate since we don't fire a `change` event on the form\n  // when session-resume dumps the text back into the field.\n  validate(field.form!)\n})\n\n// Observe required fields and validate form when their validation state\n// changes.\nonFocus(supportedFields, field => {\n  let previousValid = (field as Field).checkValidity()\n  function inputHandler() {\n    const currentValid = (field as Field).checkValidity()\n    if (currentValid !== previousValid && (field as Field).form) {\n      validate((field as Field).form!)\n    }\n    previousValid = currentValid\n  }\n\n  field.addEventListener('input', inputHandler)\n  field.addEventListener('blur', function blurHandler() {\n    field.removeEventListener('input', inputHandler)\n    field.removeEventListener('blur', blurHandler)\n  })\n})\n\nconst installedForms = new WeakMap()\n\n// Install validation handlers on a form.\nfunction installHandlers(form: HTMLFormElement) {\n  if (installedForms.get(form)) return\n  form.addEventListener('change', () => validate(form))\n  installedForms.set(form, true)\n}\n\n// Validate a form or input.\nexport function validate(form: HTMLInputElement | HTMLFormElement) {\n  const validity = form.checkValidity()\n  for (const button of form.querySelectorAll<HTMLButtonElement>('button[data-disable-invalid]')) {\n    button.disabled = !validity\n  }\n}\n\nobserve('button[data-disable-invalid]', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const form = button.form\n    if (form) {\n      installHandlers(form)\n      button.disabled = !form.checkValidity()\n    }\n  },\n})\n\n// A custom attribute similar to `required`, but only passes validation once\n// the value of the field has changed from its initial value.\nobserve('input[data-required-change], textarea[data-required-change]', function (element) {\n  const field = element as Field\n  const radioInputDefault =\n    field.type === 'radio' && field.form ? (field.form.elements.namedItem(field.name) as RadioNodeList).value : null\n\n  // Custom Validity Event Handler.\n  function customValidity(event?: Event) {\n    const form = field.form!\n    if (event && field.type === 'radio' && form && radioInputDefault) {\n      for (const radio of form.elements.namedItem(field.name) as RadioNodeList) {\n        if (radio instanceof HTMLInputElement) {\n          radio.setCustomValidity(field.value === radioInputDefault ? 'unchanged' : '')\n        }\n      }\n    } else {\n      field.setCustomValidity(field.value === (radioInputDefault || field.defaultValue) ? 'unchanged' : '')\n    }\n  }\n\n  field.addEventListener('input', customValidity)\n  field.addEventListener('change', customValidity)\n  customValidity()\n\n  if (field.form) {\n    validate(field.form)\n  }\n})\n\ndocument.addEventListener('reset', function (event: Event) {\n  if (event.target instanceof HTMLFormElement) {\n    const form = event.target\n    setTimeout(() => validate(form))\n  }\n})\n"],"names":["bodyErrors","focusEditForm","container","querySelector","click","field","focus","fire","findEditFormDeferredIncludeFragment","loadEditFormDeferredIncludeFragment","setAttribute","handleCommentCancelButtonClick","event","form","currentTarget","closest","confirmText","getAttribute","hasDirtyFields","confirm","querySelectorAll","fieldEl","value","defaultValue","classList","contains","add","remove","comment","showBodyErrors","el","ol","li","textContent","map","e","document","createElement","appendChild","hidden","toggleMinimizeError","errored","minimizeError","minimizeForm","observe","subscribe","fromEvent","capture","once","on","editFormIncludeFragment","addEventListener","dropdown","removeAttribute","remoteForm","wants","request","bodyVersion","headers","set","response","updateError","bodyError","HTMLElement","json","error","status","data","JSON","parse","text","errors","join","length","commentBody","trackingBlockDirty","hasInteractions","body","morphContent","keepInputValues","source","commentField","default_merge_commit_message","mergeFieldMessage","HTMLTextAreaElement","default_squash_commit_message","newBodyVersion","bodyVersionInput","HTMLInputElement","discussionPoll","poll","innerHTML","hasAttribute","edits","html","fetchSafeDocumentFragment","editUrl","morph","err","stale","dispatchEvent","CustomEvent","bubbles","detail","replaceWith","errorMessage","thread","x","errorDisplay","issue_title","issuesContainer","mergeFieldTitle","default_merge_commit_title","default_squash_commit_title","mergeButton","squashInput","title","page_title","elements","submitButton","updatableCommentContainer","updateContent","unminimizedComment","minimizedComment","commentGroup","actionForm","url","relatedTarget","preventDefault","content","dialog","dialogClass","checkValidityForRequiredValueField","requiredValue","prefix","setCustomValidity","message","onInput","validate","trim","onFocus","previousValid","checkValidity","inputHandler","currentValid","blurHandler","removeEventListener","installedForms","WeakMap","validity","button","disabled","constructor","HTMLButtonElement","initialize","get","element","radioInputDefault","type","namedItem","name","customValidity","radio","target","HTMLFormElement","setTimeout"],"sourceRoot":""}