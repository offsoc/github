"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["advisories"],{36156:(e,t,s)=>{var r=s(39595),o=s(79049);function n(e,t,s,r){var o,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(n<3?o(i):n>3?o(t,s,i):o(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i}let i=class AffectedProductListElement extends HTMLElement{connectedCallback(){this.nextIndex=this.rows.length}get nextIndex(){let e=this.getAttribute("data-next-index");return null===e?0:parseInt(e,10)}set nextIndex(e){this.setAttribute("data-next-index",e.toString())}addRow(){this.body.appendChild(new o.i4(this.rowTemplate,{"affected-product-entry-index":this.nextIndex}));let e=this.rows[this.rows.length-1],t=this.rows[this.rows.length-2];e.ecosystem=t.ecosystem,e.ecosystemOther=t.ecosystemOther,e.package=t.package,e.focusFirstInput(),this.nextIndex++,this.dispatchChangeEvent()}removeRow(e){let t=e.detail;1===this.rows.length?t.clear():null!==this.getAttribute("data-destroy-entries")?(t.markToDestroy(),t.hide(),t.removeAttribute("data-targets")):t.remove(),this.dispatchChangeEvent()}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("affected-product-list-change",{bubbles:!0}))}};function a(e,t,s,r){var o,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(n<3?o(i):n>3?o(t,s,i):o(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i}n([r.aC],i.prototype,"rowTemplate",void 0),n([r.aC],i.prototype,"body",void 0),n([r.zV],i.prototype,"rows",void 0),i=n([r.p_],i);let l=class AffectedProductRowElement extends HTMLElement{connectedCallback(){setTimeout(()=>{this.ecosystemOtherInputElement&&(this.ecosystemOtherInputElement.hidden="other"!==this.ecosystemSelectElement.value)},0),setTimeout(()=>{this.showUnsupportedEcosystemMessage()}),setTimeout(()=>{this.showPackageUrlElement()})}clear(){for(let e of this.inputs)e.value="";this.ecosystem=this.initialEcosystem}delete(){this.dispatchEvent(new CustomEvent("affected-product-row-delete",{bubbles:!0,detail:this}))}focusFirstInput(){this.ecosystemSelectElement.focus()}hide(){for(let e of(this.hidden=!0,this.inputs))e.required=!1}get ecosystem(){return this.ecosystemSelectElement.value}set ecosystem(e){this.ecosystemSelectElement.value=e,this.ecosystemOtherInputElement.hidden="other"!==e}get ecosystemOther(){return this.ecosystemOtherInputElement.value}set ecosystemOther(e){this.ecosystemOtherInputElement.value=e}get initialEcosystem(){return this.getAttribute("data-initial-ecosystem")||""}get package(){return this.packageInputElement.value}set package(e){this.packageInputElement.value=e}markToDestroy(){this.destroyInput.value="true"}handleInputBlur(e){let t=e.target.closest("dl.form-group.errored");t&&t.classList.remove("errored")}showUnsupportedEcosystemMessage(){if(this.unsupportedEcosystemMessageElement){if(this.ecosystemSelectElement.value){this.unsupportedEcosystemMessageElement.hidden="pip"===this.ecosystemSelectElement.value;return}this.unsupportedEcosystemMessageElement.hidden=!0}}async showPackageUrlElement(){let e=this.ecosystemSelectElement,t=e.value,s=this.packageInputElement.value;if(!t||!s){this.packageUrlElement.replaceChildren();return}let r=`/advisories/package-url?ecosystem=${t}&package_name=${s}`,n=await fetch(r,{method:"GET",headers:{Accept:"application/json"}}),i=await n.json(),a=e?.options[e?.selectedIndex]?.innerHTML;if(n.ok&&i.package_url){let e=new o.i4(this.packageLinkFoundTemplate,{packageUrl:i.package_url,ecosystemLabel:a});this.packageUrlElement.replaceChildren(e)}else if("not_found"===i.error){let e=new o.i4(this.packageLinkNotFoundTemplate,{ecosystemLabel:a});this.packageUrlElement.replaceChildren(e)}else this.packageUrlElement.replaceChildren()}};function c(e,t,s,r){var o,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(n<3?o(i):n>3?o(t,s,i):o(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i}a([r.aC],l.prototype,"destroyInput",void 0),a([r.aC],l.prototype,"ecosystemOtherInputElement",void 0),a([r.aC],l.prototype,"ecosystemSelectElement",void 0),a([r.aC],l.prototype,"packageInputElement",void 0),a([r.aC],l.prototype,"unsupportedEcosystemMessageElement",void 0),a([r.zV],l.prototype,"inputs",void 0),a([r.aC],l.prototype,"packageUrlElement",void 0),a([r.aC],l.prototype,"packageLinkFoundTemplate",void 0),a([r.aC],l.prototype,"packageLinkNotFoundTemplate",void 0),l=a([r.p_],l);let d=class ChangeTrackerElement extends HTMLElement{connectedCallback(){this.formObserver=new MutationObserver(()=>this.refresh()),this.formObserver.observe(this.form,{subtree:!0,childList:!0}),this.addEventListener("input",this.refresh),this.addEventListener("change",this.refresh),this.reset()}disconnectedCallback(){this.formObserver.disconnect(),this.removeEventListener("input",this.refresh),this.removeEventListener("change",this.refresh)}refresh(){let e=u(this.form)!==this.initialSignature,t=this.form.checkValidity();(e!==this.changed||t!==this.valid)&&(this.changed=e,this.valid=t,this.render())}render(){for(let t of this.disableWhenUnchanged){var e;e=!this.valid||!this.changed,"disabled"in t?t.disabled=e:t.setAttribute("aria-disabled",e.toString())}}reset(){this.initialSignature=u(this.form),this.changed=!1,this.valid=this.form.checkValidity(),this.render()}constructor(...e){super(...e),this.changed=!1,this.valid=!1}};function u(e){let t=new FormData(e);return t.delete("authenticity_token"),JSON.stringify(Array.from(t.entries()))}c([r.aC],d.prototype,"form",void 0),c([r.zV],d.prototype,"disableWhenUnchanged",void 0),d=c([r.p_],d);var h=s(97797),p=s(13937),m=s(72177),f=s(21232),y=s(21403);function v(){let e=document.querySelector(".js-advisory-form-title"),t=document.querySelector(".js-cwe-list"),s=document.querySelector(".js-advisory-package-name");if(e.hasAttribute("data-user-populated"))return;if(t.childElementCount>0&&""!==s.value){let r=[];for(let e of t.children)r.push(e.getAttribute("data-cwe-name"));e.value=`${r.join(" and ")} in ${s.value}`}else e.value="";let r=e.closest("form");r&&(0,m.t)(r)}function g(e){let t=e.target.closest(".form-group.errored");t&&t.classList.remove("errored")}function b(e){let t=!0;e.getAttribute("data-templated-content")===e.value&&(t=!1),t?e.setCustomValidity(""):e.setCustomValidity("Please fill out the details"),(0,m.t)(e.form)}function E(e,t,s,r){var o,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(n<3?o(i):n>3?o(t,s,i):o(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i}(0,p.JW)(".js-add-repository-advisory-collaborator",async function(e,t){let s=e.querySelector('button[type="submit"]');s&&(s.disabled=!0),await t.html(),e.reset()}),(0,h.on)("click",".js-remove-cwe-link",function(e){e.target.closest(".js-cwe-link").remove(),v()}),(0,h.on)("auto-complete-change",".js-add-cwe-link-auto-complete",function(e){let t=e.target,s=t.querySelector(`.js-cwe-link[data-cwe-id="${t.value}"]`);if(!s)return;let r=document.querySelector(".js-cwe-list"),o=s.querySelector(".js-cwe-id"),n=!1;for(let e of r.querySelectorAll(".js-cwe-id"))if(e.value===o.value){n=!0;break}n||(o.disabled=!1,r.append(s),s.hidden=!1),t.value=""}),(0,h.on)("auto-complete-change",".js-add-cwe-link-auto-complete",v),(0,h.on)("change",".js-advisory-package-name",v),(0,h.on)("focusout",".js-advisory-form-title",g),(0,h.on)("change",".js-advisory-form-title",function(e){e.currentTarget.toggleAttribute("data-user-populated",!0)}),(0,h.on)("change",".js-ecosystem-selection",function(e){let t=e.currentTarget;t.parentElement.querySelector(".js-ecosystem-other").hidden="other"!==t.value,(0,m.t)(t.form)}),(0,f.eC)("#repository_advisory_description",function(e){b(e.currentTarget)}),(0,y.lB)("#repository_advisory_description",e=>{b(e)}),(0,h.on)("affected-product-list-change","affected-product-list",function(e){let t=e.target.closest("form");t&&(0,m.t)(t)});let w=class PrivateForksGitCloneHelpElement extends HTMLElement{connectedCallback(){let e=this.cloneURLButtons[0];e&&this.updateSelectedCloneMethod(e)}updateURL(e){let t=e.currentTarget;this.updateSelectedCloneMethod(t)}updateSelectedCloneMethod(e){let t=e.getAttribute("data-url")||"";if(this.helpField.value=t,e.matches(".js-git-protocol-clone-url"))for(let s of this.helpTexts)this.cloneCommandPrefix.textContent="GitHub CLI"===e.getAttribute("data-protocol")?"":"git clone ",s.textContent=t;for(let e of this.cloneURLButtons)e.classList.remove("selected");e.classList.add("selected")}};E([r.aC],w.prototype,"helpField",void 0),E([r.zV],w.prototype,"helpTexts",void 0),E([r.zV],w.prototype,"cloneURLButtons",void 0),E([r.aC],w.prototype,"cloneCommandPrefix",void 0),w=E([r.p_],w);var j=s(49786),_=s(78350);function k(e){let t=Array.from(e.querySelectorAll(".js-advisory-credit-row")).every(e=>e.hidden);e.hidden=t}function S(e){for(let t of document.querySelectorAll(".js-repository-advisory-details"))t.hidden=e;let t=document.querySelector(".js-repository-advisory-edit-form-container");t&&(t.hidden=!e)}(0,h.on)("details-menu-selected",".js-advisory-menu",function(e){let t=e.detail.relatedTarget.getAttribute("data-advisory-info-show");for(let e of document.querySelectorAll(".js-show-if-publishing, .js-show-if-requesting-cve"))e.hidden=!e.classList.contains(t)},{capture:!0}),(0,p.JW)(".js-repository-advisory-add-credit-form",async function(e,t){let s=e.closest(".js-repository-advisory-form-container");e.reset();let r=await t.html();r&&function(e,t){let s=t.html.querySelector(".js-advisory-credit-row"),r=s.getAttribute("data-recipient-id"),o=e.querySelector(".js-advisory-credits-list"),n=o.querySelector(`.js-advisory-credit-row[data-recipient-id='${r}']`);if(n){let e=n.querySelector(".js-advisory-credit-destroy-field");n.hidden||n.classList.add("user-already-added"),e.value="false",n.hidden=!1}else{let t=e.querySelector(".js-next-credit-index-field");o.append(s),t.value=String(Number(t.value)+1)}k(o)}(s,r)}),(0,h.on)("auto-complete-change",".js-add-credit-auto-complete",function(e){let t=e.target.closest(".js-repository-advisory-form-container").querySelector(".js-repository-advisory-add-credit-form");(0,_.k_)(t)}),(0,h.on)("click",".js-advisory-credit-remove-button",function(e){!function(e){let t=e.querySelector(".js-advisory-credit-destroy-field"),s=e.closest(".js-advisory-credits-list");t.value="true",e.hidden=!0,e.classList.remove("user-already-added"),k(s)}(e.currentTarget.closest(".js-advisory-credit-row"))}),(0,h.on)("click",".js-repository-advisory-credit-popover-edit-button",function(e){let t=e.target;if(!t)return;let s=t.closest("form");(0,_.k_)(s)}),(0,h.on)("click",".js-repository-advisory-edit-button",function(){S(!0)}),(0,h.on)("change",".js-bypass-branch-protections",function({currentTarget:e}){let t=e.closest(".merge-message"),s=e.checked;for(let e of t.querySelectorAll(".merge-button"))e.disabled=!s}),(0,h.on)("click",".js-repository-advisory-edit-form-cancel-button",function(e){if(!(0,j.O)(e))return;let t=document.querySelector("severity-selection");if(t){t.resetSeveritySelectElement();let{severitySelectElement:e}=t;t.handleVectorStringInput(),t.handleVectorStringBlur(),t.toggleSeverityCalculator(e.value)}S(!1)}),(0,h.on)("change",".js-cve-selection",function(e){let t=e.currentTarget;t.form.querySelector(".js-existing-cve").hidden="requesting"===t.value}),(0,h.on)("focusout",".js-existing-cve",g)},65024:(e,t,s)=>{s.d(t,{r:()=>o});var r=s(97797);async function o(e){let t=document.querySelector("#site-details-dialog").content.cloneNode(!0),s=t.querySelector("details"),o=s.querySelector("details-dialog"),n=s.querySelector(".js-details-dialog-spinner");e.detailsClass&&s.classList.add(...e.detailsClass.split(" ")),e.dialogClass&&o.classList.add(...e.dialogClass.split(" ")),e.label?o.setAttribute("aria-label",e.label):e.labelledBy&&o.setAttribute("aria-labelledby",e.labelledBy),document.body.append(t);try{let t=await e.content;n.remove(),o.prepend(t)}catch(s){n.remove();let t=document.createElement("span");t.textContent=e.errorMessage||"Couldn't load the content",t.classList.add("my-6"),t.classList.add("mx-4"),o.prepend(t)}return s.addEventListener("toggle",()=>{s.hasAttribute("open")||((0,r.h)(o,"dialog:remove"),s.remove())}),o}},27193:(e,t,s)=>{s.d(t,{Ee:()=>d,b4:()=>u,Ts:()=>c});var r=s(46650);let o=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),this.response=t}};var n=s(6440),i=s(2240);let a="server-x-safe-html",l=n.wA.createPolicy(a,{createHTML:(e,t)=>i.b.apply({policy:()=>(!function(e,t,s=!1){let r=t.headers.get("content-type")||"";if(!s&&!r.startsWith("text/html"))throw new o(`expected response with text/html, but was ${r}`,t);if(s&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new o(`expected response with text/html or application/json, but was ${r}`,t);let n=t.headers.get("x-html-safe");if(n){if(!e.includes(n))throw new o("response X-HTML-Safe nonce did not match",t)}else throw new o("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(document),t),e),policyName:a,fallback:e,silenceErrorReporting:!0})});async function c(e,t,s){let o=new Request(t,s);o.headers.append("X-Requested-With","XMLHttpRequest");let n=await self.fetch(o);if(n.status<200||n.status>=300)throw Error(`HTTP ${n.status}${n.statusText||""}`);let i=l.createHTML(await n.text(),n);return(0,r.B)(e,i)}function d(e,t,s=1e3,r=[200],o=[202]){return async function s(n){let i=new Request(e,t);i.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(i);if(o.includes(a.status))return await new Promise(e=>setTimeout(e,n)),s(1.5*n);if(r.includes(a.status))return a;if(a.status<200||a.status>=300)throw Error(`HTTP ${a.status}${a.statusText||""}`);throw Error(`Unexpected ${a.status} response status from poll endpoint`)}(s)}async function u(e,t,s){let{wait:r=500,acceptedStatusCodes:o=[200],max:n=3,attempt:i=0}=s||{},a=async()=>new Promise((s,a)=>{setTimeout(async()=>{try{let r=new Request(e,t);r.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(r);if(o.includes(a.status)||i+1===n)return s(a);s("retry")}catch(e){a(e)}},r*i)}),l=await a();return"retry"!==l?l:u(e,t,{wait:r,acceptedStatusCodes:o,max:n,attempt:i+1})}},21232:(e,t,s)=>{s.d(t,{Ff:()=>l,eC:()=>c,uE:()=>a});var r=s(6986);let o=!1,n=new r.A;function i(e){let t=e.target;if(t instanceof HTMLElement&&t.nodeType!==Node.DOCUMENT_NODE)for(let e of n.matches(t))e.data.call(null,t)}function a(e,t){o||(o=!0,document.addEventListener("focus",i,!0)),n.add(e,t),document.activeElement instanceof HTMLElement&&document.activeElement.matches(e)&&t(document.activeElement)}function l(e,t,s){function r(t){let o=t.currentTarget;o&&(o.removeEventListener(e,s),o.removeEventListener("blur",r))}a(t,function(t){t.addEventListener(e,s),t.addEventListener("blur",r)})}function c(e,t){function s(e){let{currentTarget:r}=e;r&&(r.removeEventListener("input",t),r.removeEventListener("blur",s))}a(e,function(e){e.addEventListener("input",t),e.addEventListener("blur",s)})}},79024:(e,t,s)=>{s.d(t,{Rt:()=>r,Zz:()=>o,yU:()=>Subscription});let Subscription=class Subscription{constructor(e){this.closed=!1,this.unsubscribe=()=>{e(),this.closed=!0}}};function r(e,t,s,r={capture:!1}){return e.addEventListener(t,s,r),new Subscription(()=>{e.removeEventListener(t,s,r)})}function o(...e){return new Subscription(()=>{for(let t of e)t.unsubscribe()})}}},e=>{var t=t=>e(e.s=t);e.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_morphdom_dist_morphdom-e-7c534c","vendors-node_modules_github_remote-form_dist_index_js-node_modules_delegated-events_dist_inde-86f690","ui_packages_updatable-content_updatable-content_ts","app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235"],()=>t(36156)),e.O()}]);
//# sourceMappingURL=advisories-5f44d67eb87d.js.map