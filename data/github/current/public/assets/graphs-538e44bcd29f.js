"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["graphs"],{82887:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},5122:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(82887);function a(t){let e=t,n=t;function a(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){let o=r+a>>>1;0>n(t[o],e)?r=o+1:a=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=(e,n)=>(0,r.A)(t(e),n)),{left:a,center:function(t,n,r,o){null==r&&(r=0),null==o&&(o=t.length);let s=a(t,n,r,o-1);return s>r&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){let o=r+a>>>1;n(t[o],e)>0?a=o:r=o+1}return r}}}},29551:(t,e,n)=>{n.d(e,{Fq:()=>o,Nm:()=>a,rR:()=>r});var r=6e4,a=864e5,o=6048e5},12834:(t,e,n)=>{n.d(e,{A:()=>function t(e,n,o,s){function i(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(t,r,a){var o,s=[];if(t=i.ceil(t),a=null==a?1:Math.floor(a),!(t<r)||!(a>0))return s;do s.push(o=new Date(+t)),n(t,a),e(t);while(o<t&&t<r)return s},i.filter=function(r){return t(function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},function(t,e){if(t>=t){if(e<0)for(;++e<=0;)for(;n(t,-1),!r(t););else for(;--e>=0;)for(;n(t,1),!r(t););}})},o&&(i.count=function(t,n){return r.setTime(+t),a.setTime(+n),e(r),e(a),Math.floor(o(r,a))},i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?t>1?i.filter(s?function(e){return s(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}});var r=new Date,a=new Date},83836:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(82562);function a(t){return Intl.NumberFormat((0,r.mf)(),{maximumFractionDigits:2,maximumSignificantDigits:4,notation:"compact"}).format(t)}},87031:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(10541),a=n(50183);function o(){let t=function(){let t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.boxSizing="border-box",t}(),e=null;function n(){return[0,0]}function o(){return" "}function s(n){e=(function(t){let e=t.node();return"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement})(n).createSVGPoint(),document.body.appendChild(t)}return s.show=function(r,a){let i=o(a),l=n(a),c=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft;t.innerHTML=i,t.style.opacity="1",t.style.pointerEvents="all";let d=function(t,e,n){let r=function(t,e){let n=t;for(;void 0===n.getScreenCTM&&"undefined"===n.parentNode;)n=n.parentNode;let r={},a=n.getScreenCTM(),o=n.getBBox(),s=o.width,i=o.height,l=o.x,c=o.y;return e.x=l,e.y=c,r.nw=e.matrixTransform(a),e.x+=s,r.ne=e.matrixTransform(a),e.y+=i,r.se=e.matrixTransform(a),e.x-=s,r.sw=e.matrixTransform(a),e.y-=i/2,r.w=e.matrixTransform(a),e.x+=s,r.e=e.matrixTransform(a),e.x-=s/2,e.y-=i/2,r.n=e.matrixTransform(a),e.y+=i,r.s=e.matrixTransform(a),r}(n,t);return{top:r.n.y-e.offsetHeight,left:r.n.x-e.offsetWidth/2}}(e,t,r.target);return t.classList.toggle("n",!0),t.style.top=`${d.top+l[0]+c}px`,t.style.left=`${d.left+l[1]+u}px`,s},s.hide=function(){return t.style.opacity="0",t.style.pointerEvents="none",s},s.attr=function(e,n){return r.Ay.prototype.attr.apply((0,a.A)(t),[e,n]),s},s.offset=function(t){return n=function(){return t},s},s.html=function(t){return o=t,s},s}},82562:(t,e,n)=>{n.d(e,{US:()=>a,mf:()=>o,mx:()=>r});let r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],o=()=>{try{return Intl.getCanonicalLocales(window.navigator.language)[0]}catch(t){return"en-US"}}},59764:(t,e,n)=>{var r=n(27193),a=n(5225),o=n(21403),s=n(51889),i=n(5122),l=n(21671),c=n(50183),u=n(70240),d=n(96020),f=n(4049),m=n(12834),g=(0,m.A)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});g.range;var p=n(29551),h=(0,m.A)(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*p.rR)/p.Nm,t=>t.getDate()-1);h.range;var y=n(87031),v=n(58679),_=n(14398),x=n(83836),w=n(22211);function b(t){return(0,_.GP)(",")(t)}let A={top:20,right:40,bottom:30,left:40};var T=n(70170);let S=(0,a.A)(j);async function j(t){let e=await (0,r.Ee)(t,{headers:{accept:"application/json"}});return await e.json()}async function L(t){let e=t.getAttribute("data-url");if(e){for(let e of t.querySelectorAll("svg.viz"))e.remove();t.classList.add("is-graph-loading"),t.classList.remove("is-graph-load-error","is-graph-empty");try{let n=await S(e);if(!document.contains(t))return;t.classList.remove("is-graph-loading"),null!=n&&n.unusable?t.classList.add("is-graph-without-usable-data"):null!=n&&0===n.length||null!=n&&null!=n.summary&&0===n.summary.total||null!=n[0]&&null!=n[0].weeks&&0===n[0].weeks.length?t.classList.add("is-graph-empty"):"dashboards-overview"===t.getAttribute("data-graph-name")&&function(t,e){let n;if(!e||null!=e.error)return;let r=t.closest(".js-dashboards-overview-card"),a=e.timespan.period,o=(0,w.DC)("%A, %B %-d, %Y"),m=(0,i.A)(t=>t.date).left,p=t.offsetWidth-A.right-A.left,_=150-A.top-A.bottom;for(let[t,n]of e.metrics.entries()){let e=r.querySelector(`.js-metric[data-metric-index="${t}"] .js-total`);if(null!=e){var T,S,j,L;e.textContent=b(n.total),T=n.total_change,S=r.querySelector(`.js-metric[data-metric-index="${t}"] .js-total-change`),T<0?S.classList.add("is-decrease"):T>0&&S.classList.add("is-increase"),S.querySelector(".js-change-num").textContent=b(Math.abs(T)),j=n.percent_change,L=r.querySelector(`.js-metric[data-metric-index="${t}"] .js-percentage-change`),j<0?(L.classList.add("is-decrease"),L.querySelector(".js-change-num").textContent=`${b(Math.abs(j))}% decrease`):j>0?(L.classList.add("is-increase"),L.querySelector(".js-change-num").textContent=`${b(Math.abs(j))}% increase`):0===j&&(L.querySelector(".js-change-num").textContent=`${b(Math.abs(j))}% increase`)}}if(!e.metrics.some(t=>t.total)){r.classList.add("is-no-activity");return}let M=(0,y.A)().attr("class","svg-tip total-unique comparison").offset([-10,0]).html(function(t){let n,r="";n="year"===a?`Week of ${o(t.date)}`:o(t.date);let s=270/e.metrics.length;for(let[n,a]of e.metrics.entries())r+=`<li class='totals metric-${n}' style='width:${s}px'> <strong>${b(t[a.name])}</strong> ${a.display_name} </li>`;return`<span class='title'>${n}</span> <ul> ${r} </ul>`}),$=(0,d.A)().range([0,p]),k=(0,f.A)().range([_,0]),C=1;"year"===a?n=g:(C="week"===a?1:2,n=h);let D=(0,s.l7)($).tickSize(_+5).tickPadding(10).ticks(n.every(C)).tickFormat(t=>"year"===a?(0,w.DC)("%B")(t):"week"===a&&t.getHours()>=8?"":(0,w.DC)("%a %-d")(t)),E=(0,s.V4)(k).ticks(3).tickFormat(x.A),q=(0,v.A)().x(t=>$(t.date)).y(t=>k(t.count)),F=(0,c.A)(t).append("svg").attr("width",p+A.left+A.right).attr("height",_+A.top+A.bottom).attr("class","vis").append("g").attr("transform",`translate(${A.left},${A.top})`).call(M);$.domain([e.timespan.beginning,e.timespan.ending]),k.domain([0,(0,l.A)(e.metrics.map(t=>t.max))]),F.append("g").attr("class","x axis").call(D).selectAll("text").attr("text-anchor","middle"),F.append("g").attr("class","y axis").call(E);let N=e.metrics.map(t=>t.counts);F.selectAll("path.path").data(N).enter().append("path").attr("class",(t,e)=>`dots total metric-${e||0}`).attr("d",q),F.selectAll("g.dots").data(N).enter().append("g").attr("class",(t,e)=>`dots totals metric-${e||0}`).each(function(){(0,c.A)(this).selectAll("circle").data(t=>t).enter().append("circle").attr("cx",t=>$(t.date)).attr("cy",t=>k(t.count)).attr("r",4)}),E=(0,s.eH)(k).ticks(3).tickFormat(x.A),F.append("g").attr("class","y axis unique").attr("transform",`translate(${p}, 0)`).call(E),F.append("rect").attr("class","overlay").attr("width",p).attr("height",_).on("mousemove",function(t){let n={},r=$.invert((0,u.A)(t)[0]),a=e.metrics[0].counts,o=m(a,r,1),s=a[o-1],i=a[o],l=i&&r-s.date>i.date-r?o:o-1;for(let t of(n.date=a[l].date,e.metrics))n[t.name]=t.counts[l].count;let c=F.selectAll("g.dots circle").filter(t=>t.date===n.date);M.show.call(this,{target:c.node()},n)}).on("mouseout",function(){setTimeout(M.hide,500)})}(t,n)}catch(e){throw t.classList.remove("is-graph-loading"),t.classList.add("is-graph-load-error"),e}}}(0,o.lB)(".js-graph",function(t){if(L(t),"true"===t.getAttribute("data-responsive-graph")){let e=(0,T.n)(L.bind(null,t),100);return{add(){window.addEventListener("resize",e)},remove(){window.removeEventListener("resize",e)}}}})},70240:(t,e,n)=>{n.d(e,{A:()=>r});function r(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}}},t=>{var e=e=>t(t.s=e);t.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_d3-array_src_max_js-node-dcea4e","vendors-node_modules_d3-axis_src_axis_js-node_modules_d3-shape_src_array_js-node_modules_d3-s-d668ee","vendors-node_modules_d3-shape_src_line_js-node_modules_d3-scale_src_time_js","ui_packages_fetch-utils_fetch-utils_ts"],()=>e(59764)),t.O()}]);
//# sourceMappingURL=graphs-d7920cb00af3.js.map