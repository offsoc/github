<%= tag.video(
  width: video[:size],
  height: video[:size],
  loop: true,
  muted: true,
  playsinline: true,
  preload: "none",
  class: "js-build-in-item build-in-scale-up js-viewport-aware-video looping-mktg width-full height-auto position-relative top-lg-n5",
  tabindex: 0,
  data: { threshold: 0,  "play-aria-label": "The video is paused. Press the space bar to play the video.", "pause-aria-label": "The video is playing. Press the space bar to pause the video." }
) do %>
  <% {
    :mov => "video/mp4; codecs=hvc1",
    :webm => "video/webm"
  }.each do |format, type| %>
    <% {
      "(min-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5)" => "@2x",
      "(max-device-pixel-ratio: 1), (-webkit-max-device-pixel-ratio: 1)" => ""
    }.each do |media, suffix| %>
      <%= tag.source(
        src: image_path("modules/site/discussions/animations/#{video[:filename]}#{suffix}.#{format}"),
        type: type,
        media: media
      ) %>
    <% end %>
  <% end %>
<% end %>
