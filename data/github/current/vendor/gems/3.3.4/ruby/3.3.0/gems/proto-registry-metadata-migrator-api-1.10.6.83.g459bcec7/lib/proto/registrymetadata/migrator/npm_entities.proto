syntax = "proto3";

package github.registry.metadata.v1.migrator.npm;

option go_package = "github.com/github/registry-metadata/rms/twirp/proto/rms/v1/npm";
option ruby_package = "Proto::RegistryMetadata::V1::Migrator::NPM";

/* A packument is the package.json provided by the NPM CLI, which also contains
 * a list of every single version and details about every version published
 * as well as the full contents of the user-generated additions to the 
 * package.json. As it's free form, we cannot accurately serizlize it.
 *
 * A corgi is the absolute minimum information required for the NPM CLI to be
 * able to install a package
 * 
 * Examples: https://github.com/github/npm-registry/tree/4c9e628e6254c092f8e2ceeeed1411710f89fcf2/docs/examples
 */
message NPMMetadata {
  string name = 1;
  string version = 2;
  string npm_user = 3;
  Person author = 4;
  Bugs bugs = 5;
  map<string, string> dependencies = 6;
  map<string, string> dev_dependencies = 7;
  map<string, string> peer_dependencies = 8;
  map<string, string> optional_dependencies = 9;
  string description = 10;
  Dist dist = 11;
  string git_head = 12;
  string homepage = 13;
  string license = 14;
  string main = 15;
  Repository repository = 16;
  map<string, string> scripts = 17;
  string id = 18;
  string node_version = 19;
  string npm_version = 20;
  bool has_shrinkwrap = 21;
  repeated Person maintainers = 22;
  repeated Person contributors = 23;
  map<string, string> engines = 24;
  repeated string keywords = 25;
  repeated string files = 26;
  map<string, string> bin = 27;
  map<string, string> man = 28;
  Directories directories = 29;
  repeated string os = 30;
  repeated string cpu = 31;
  string readme = 32;
  string installation_command = 33;
  int32 release_id = 34;
  string commit_oid = 35;
  bool published_via_actions = 36;
  int32 deleted_by_id = 37;
}

message Directories {
  string lib = 1;
  string bin = 2;
  string man = 3;
  string doc = 4;
  string example = 5;
  string test = 6;
}

message Bugs {
  string url = 1;
}

message Repository {
  string type = 1;
  string url = 2;
  string directory = 3;
}

message Person {
  string name = 1;
  string email = 2;
  string url = 3;
}

message Dist {
  string integrity = 3;
  string shashum = 1;
  string tarball = 2;
}

