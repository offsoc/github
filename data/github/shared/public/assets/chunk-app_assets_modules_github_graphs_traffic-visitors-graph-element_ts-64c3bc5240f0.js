"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_graphs_traffic-visitors-graph-element_ts"],{82887:(t,e,r)=>{r.d(e,{A:()=>n});function n(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},5122:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(82887);function a(t){let e=t,r=t;function a(t,e,n,a){for(null==n&&(n=0),null==a&&(a=t.length);n<a;){let l=n+a>>>1;0>r(t[l],e)?n=l+1:a=l}return n}return 1===t.length&&(e=(e,r)=>t(e)-r,r=(e,r)=>(0,n.A)(t(e),r)),{left:a,center:function(t,r,n,l){null==n&&(n=0),null==l&&(l=t.length);let o=a(t,r,n,l-1);return o>n&&e(t[o-1],r)>-e(t[o],r)?o-1:o},right:function(t,e,n,a){for(null==n&&(n=0),null==a&&(a=t.length);n<a;){let l=n+a>>>1;r(t[l],e)>0?a=l:n=l+1}return n}}}},61573:(t,e,r)=>{r.d(e,{A:()=>n});function n(t,e){let r,n;if(void 0===e)for(let e of t)null!=e&&(void 0===r?e>=e&&(r=n=e):(r>e&&(r=e),n<e&&(n=e)));else{let a=-1;for(let l of t)null!=(l=e(l,++a,t))&&(void 0===r?l>=l&&(r=n=l):(r>l&&(r=l),n<l&&(n=l)))}return[r,n]}},44317:(t,e,r)=>{r.d(e,{A:()=>n});function n(t,e){let r;if(void 0===e)for(let e of t)null!=e&&(r>e||void 0===r&&e>=e)&&(r=e);else{let n=-1;for(let a of t)null!=(a=e(a,++n,t))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}},83836:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(82562);function a(t){return Intl.NumberFormat((0,n.mf)(),{maximumFractionDigits:2,maximumSignificantDigits:4,notation:"compact"}).format(t)}},87031:(t,e,r)=>{r.d(e,{A:()=>l});var n=r(10541),a=r(50183);function l(){let t=function(){let t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.boxSizing="border-box",t}(),e=null;function r(){return[0,0]}function l(){return" "}function o(r){e=(function(t){let e=t.node();return"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement})(r).createSVGPoint(),document.body.appendChild(t)}return o.show=function(n,a){let i=l(a),s=r(a),u=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;t.innerHTML=i,t.style.opacity="1",t.style.pointerEvents="all";let f=function(t,e,r){let n=function(t,e){let r=t;for(;void 0===r.getScreenCTM&&"undefined"===r.parentNode;)r=r.parentNode;let n={},a=r.getScreenCTM(),l=r.getBBox(),o=l.width,i=l.height,s=l.x,u=l.y;return e.x=s,e.y=u,n.nw=e.matrixTransform(a),e.x+=o,n.ne=e.matrixTransform(a),e.y+=i,n.se=e.matrixTransform(a),e.x-=o,n.sw=e.matrixTransform(a),e.y-=i/2,n.w=e.matrixTransform(a),e.x+=o,n.e=e.matrixTransform(a),e.x-=o/2,e.y-=i/2,n.n=e.matrixTransform(a),e.y+=i,n.s=e.matrixTransform(a),n}(r,t);return{top:n.n.y-e.offsetHeight,left:n.n.x-e.offsetWidth/2}}(e,t,n.target);return t.classList.toggle("n",!0),t.style.top=`${f.top+s[0]+u}px`,t.style.left=`${f.left+s[1]+c}px`,o},o.hide=function(){return t.style.opacity="0",t.style.pointerEvents="none",o},o.attr=function(e,r){return n.Ay.prototype.attr.apply((0,a.A)(t),[e,r]),o},o.offset=function(t){return r=function(){return t},o},o.html=function(t){return l=t,o},o}},25151:(t,e,r)=>{r.r(e);var n=r(39595),a=r(87031),l=r(27193),o=r(14398),i=r(5225),s=r(21403),u=r(57327),c=r(22211);function f(t,e,r,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(o=(l<3?a(o):l>3?a(e,r,o):a(e,r))||o);return l>3&&o&&Object.defineProperty(e,r,o),o}let d=(0,i.A)(p);async function p(t){let e=await (0,l.Ee)(t,{headers:{accept:"application/json"}});return await e.json()}let m=class TrafficVisitorsGraphElement extends HTMLElement{async connectedCallback(){let t=this.graph,e=t.getAttribute("data-url");if(e){for(let e of t.querySelectorAll("svg.viz"))e.remove();t.classList.add("is-graph-loading"),t.classList.remove("is-graph-load-error","is-graph-empty");try{let r=await d(e);t.classList.remove("is-graph-loading"),null!=r&&r.unusable?t.classList.add("is-graph-without-usable-data"):null!=r&&0===r.length||null!=r&&null!=r.summary&&0===r.summary.total||null!=r[0]&&null!=r[0].weeks&&0===r[0].weeks.length?t.classList.add("is-graph-empty"):function(t,e){let r=(0,c.aL)("%A, %B %-d, %Y"),n=(0,o.GP)(","),l=(0,a.A)().attr("class","svg-tip web-views comparison").offset([-10,0]).html(t=>{let e=1===t.total?"view":"views",a=1===t.unique?"unique visitor":"unique visitors";return`<span class='title'>${r(t.date)}</span> <ul class='web-views'> <li class='totals metric-0'><strong>${n(t.total)}</strong> ${e}</li> <li class='uniques metric-1'><strong>${n(t.unique)}</strong> ${a}</li> </ul>`});(0,s.lB)("#js-visitors-graph .js-graph",{remove(){l.hide()}}),(0,u.E)(t,e,l,{width:719,height:243,margin:{top:20,right:40,bottom:30,left:40}})}(this.container,r)}catch(e){throw t.classList.remove("is-graph-loading"),t.classList.add("is-graph-load-error"),e}}}};f([n.aC],m.prototype,"graph",void 0),f([n.aC],m.prototype,"container",void 0),m=f([n.p_],m)},57327:(t,e,r)=>{r.d(e,{E:()=>L});var n=r(82887),a=r(5122),l=r(61573),o=r(21671),i=r(44317);function s(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}var u=r(51889),c=r(50183),f=r(70240),d=r(30540),p=r(95389),m=r(59312),g=r(60804),h=r(34552),y=r(7146),v=r(86844),A=r(81695),x=r(22211),b=r(96020),w=r(99065),T=r(4049),k=r(58679),M=r(14398),S=r(83836);function C(t){return(0,M.GP)(",")(t)}function L(t,e,r,M){let L=M.margin,q=M.width-L.left-L.right,E=M.height-L.top-L.bottom;if(!e||null!=e.error)return;let $=(function(){return w.C.apply((0,b.B)(d.$Z,d.lk,p.Mb,m.R6,g.Hl,h.dA,y.pz,v.vD,A.R,x.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)})().range([0,q]),j=(0,T.A)().range([E,0]),N=(0,T.A)().range([E,0]),B=(0,x.aL)("%m/%d"),D=(0,u.l7)($).ticks(e.counts.length).tickSize(E+5).tickPadding(10).tickFormat(B),F=(0,u.V4)(j).ticks(3).tickFormat(S.A),G=(0,k.A)().x(t=>$(t.key)).y(t=>j(t.value)),P=(0,c.A)(t).select(".js-graph").append("svg").attr("viewBox",`0 0 ${q+L.left+L.right} ${E+L.top+L.bottom}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").attr("data-hpc","").append("g").attr("transform",`translate(${L.left},${L.top})`).call(r),R=e.counts;for(let t of R)t.date=new Date(1e3*t.bucket);R.sort((t,e)=>(0,n.A)(t.date,e.date));let V=(0,a.A)(t=>t.date).left,_=R.map(t=>({key:t.date,value:t.total})),z=R.map(t=>({key:t.date,value:t.unique})),H=[_,z],[Y,O]=(0,l.A)(R,t=>t.date.getTime()),U=(0,l.A)(_,t=>t.value)[1],J=(0,o.A)(z,t=>t.value)+function(t,e,r){if(a=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let r=-1;for(let n of t)null!=(n=e(n,++r,t))&&(n=+n)>=n&&(yield n)}}(t,r))).length){if((e=+e)<=0||a<2)return(0,i.A)(t);if(e>=1)return(0,o.A)(t);var a,l=(a-1)*e,u=Math.floor(l),c=(0,o.A)((function t(e,r,a=0,l=e.length-1,o=n.A){for(;l>a;){if(l-a>600){let n=l-a+1,i=r-a+1,s=Math.log(n),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(n-u)/n)*(i-n/2<0?-1:1),f=Math.max(a,Math.floor(r-i*u/n+c)),d=Math.min(l,Math.floor(r+(n-i)*u/n+c));t(e,r,f,d,o)}let n=e[r],i=a,u=l;for(s(e,a,r),o(e[l],n)>0&&s(e,a,l);i<u;){for(s(e,i,u),++i,--u;0>o(e[i],n);)++i;for(;o(e[u],n)>0;)--u}0===o(e[a],n)?s(e,a,u):s(e,++u,l),u<=r&&(a=u+1),r<=u&&(l=u-1)}return e})(t,u).subarray(0,u+1));return c+((0,i.A)(t.subarray(u+1))-c)*(l-u)}}(z,.5,t=>t.value);$.domain([Y,O]),j.domain([0,U]),N.domain([0,J]);let X=e.summary.total,I=t.querySelector(".js-traffic-total");I&&(I.textContent=C(X));let W=e.summary.unique,Z=t.querySelector(".js-traffic-uniques");Z&&(Z.textContent=C(W)),P.append("g").attr("class","x axis").call(D),P.append("g").attr("class","y axis views").call(F),P.selectAll("path.path").data(H).enter().append("path").attr("class",(t,e)=>`path ${0===e?"total":"unique"}`).attr("d",(t,e)=>0===e?G(t):G.y(t=>N(t.value))(t)),P.selectAll("g.dots").data(H).enter().append("g").attr("class",(t,e)=>0===e?"dots totals":"dots uniques").each(function(t,e){let r=(0,c.A)(this);return 1===e&&(j=N),r.selectAll("circle").data(t=>t).enter().append("circle").attr("cx",t=>$(t.key)).attr("cy",t=>j(t.value)).attr("r",4)}),F=(0,u.eH)(N).ticks(3).tickFormat(S.A),P.append("g").attr("class","y axis unique").attr("transform",`translate(${q}, 0)`).call(F),P.append("rect").attr("class","overlay").attr("width",q).attr("height",E).on("mousemove",function(t){let e;let n=$.invert((0,f.A)(t)[0]),a=V(R,n,1),l=R[a-1],o=R[a];if(l&&o){let t=n-l.date>o.date-n?o:l;return(e=(e=P.selectAll("g.dots circle").filter(e=>e.key===t.date)).nodes()).sort((t,e)=>Number(t.getAttribute("cy"))-Number(e.getAttribute("cy"))),r.show({target:e[0]},t)}}).on("mouseout",function(){setTimeout(r.hide,500)})}},82562:(t,e,r)=>{r.d(e,{US:()=>a,mf:()=>l,mx:()=>n});let n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],l=()=>{try{return Intl.getCanonicalLocales(window.navigator.language)[0]}catch(t){return"en-US"}}},70240:(t,e,r)=>{r.d(e,{A:()=>n});function n(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}}}]);
//# sourceMappingURL=app_assets_modules_github_graphs_traffic-visitors-graph-element_ts-30b7cf764caf.js.map