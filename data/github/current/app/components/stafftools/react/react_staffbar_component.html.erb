<%# erblint:counter DeprecatedComponentsCounter 1 %>
<react-staffbar data-catalyst-inline hidden>
  <%= render(Primer::Experimental::Dialog.new(title: "React payload", color: :default)) do |dialog| %>
    <% dialog.with_show_button(scheme: :link, color: :on_emphasis, "aria-label": "React payload size", "data-target": "react-staffbar.viewPayloadButton") do %>
      <span id="react-staffbar-icon" class="cursor-pointer" role="button">⚛️</span>
      <span data-target="react-staffbar.payloadSize"></span>
    <% end %>
    <% dialog.with_body(classes: 'ws-normal') do %>
      <p data-target="react-staffbar.payloadText">Calculating the size of the payload.</p>
      <p><%= render(Primer::ButtonComponent.new(scheme: :link, "data-target": "react-staffbar.logPayloadButton")) { "Console log the payload" } %></p>
      <%# target for this link is generated in client code %>
      <p><%= render(Primer::Beta::Link.new(href: "#", "data-target": "react-staffbar.speedscopeLink")) { "Speedscope Flamegraph for React navigation" } %></p>
    <% end %>
  <% end %>

  <%= render(Primer::Beta::Link.new(color: :on_emphasis, href: "https://github.com/github/alloy", target: "_blank", id: "staffbar_ssr_success", ml: 1, "data-target": "react-staffbar.ssrLink")) do |component| %>
    <% component.with_tooltip(text: "This react app has been rendered by Alloy. Click to show more details.") %>
    <%= render(Primer::Beta::Octicon.new(icon: :check, size: :small, "aria-label": "SSR Successful")) %>
    SSR
  <% end %>
  <%= render(Primer::Beta::Link.new(href: "https://github.com/github/alloy", target: "_blank", id: "staffbar_ssr_error", ml: 1, "data-target": "react-staffbar.ssrError", color: :on_emphasis)) do |component| %>
    <% component.with_tooltip(text: "There was an error server-side rendering this app in Alloy. Check the console for the error message.") %>
    🚨<s>SSR</s>🚨
  <% end %>
</react-staffbar>
