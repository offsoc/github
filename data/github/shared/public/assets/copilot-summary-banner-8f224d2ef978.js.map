{"version":3,"file":"copilot-summary-banner-xxxxxxxxxxxx.js","mappings":"kLAoBO,SAASA,EAAoBC,CAAe,CAAEC,CAAsD,EACrGC,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,sCACnBC,EAASC,EAAeJ,GAAK,CAAC,GAAGC,CAAO,CAAEI,QAASJ,GAASI,SAAWL,CAAE,GAChEE,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,+BAAiCD,GAASI,UAAYC,KAAAA,EAChFC,CAAAA,EAAAA,EAAAA,EAAAA,EAA8BP,EAAI,CAChCQ,WAAYP,GAASQ,UAAY,YAAc,QACjD,GAEAN,EAASC,EAAeJ,GAAKC,EAEjC,CAMO,SAASE,EAASO,CAAe,CAAET,CAAsD,EAC9F,GAAM,CAACQ,UAAAA,CAAS,CAAEJ,QAAAA,CAAO,CAAC,CAAGJ,GAAW,CAAC,CAErCC,CAAAA,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,uCAAyC,eAAgBS,QAAQC,SAAS,CAC1FP,CAAAA,GAAWQ,SAASC,IAAI,EAAuCC,UAAU,CAACL,EAAS,CACpFM,UAAWf,GAASQ,UAAY,MAAQ,MAC1C,GACSP,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,+BAAiCG,KAAYC,IAAZD,EAC3DY,CAAAA,EAAAA,EAAAA,EAAAA,EAAmBP,EAAS,CAC1BF,WAAYC,EAAY,YAAc,QACxC,GAEAS,SAKyBR,CAAe,CAAED,CAAmB,CAAEJ,CAAqB,EAItF,IAAMc,EAAYd,GAAWe,EAAAA,EAAeA,EAAEC,cAFrCZ,EAAY,4CAA8C,mCAG9DU,IACDA,EAAUG,WAAW,GAAKZ,EAM5BS,EAAUG,WAAW,CAAG,CAAC,EAAEZ,EAAQ,MAAM,CAAC,CAE1CS,EAAUG,WAAW,CAAGZ,EAE5B,EArBwBA,EAASD,EAAWJ,EAE5C,CAsBA,SAASD,EAAeJ,CAAe,EAGrC,MAAO,CAACA,EAAGuB,YAAY,CAAC,eAAiBvB,EAAGwB,SAAS,EAAI,EAAC,EAAGC,IAAI,EACnE,C,sDC5EO,IAAMC,EAAa,0BACbC,EAAY,yBACZC,EAAmC,oC,sMCOzC,IAAMC,EAAyB,GAElC,WAACC,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,MAAM,E,UACvB,UAACC,EAAAA,CAAOA,CAAAA,CAACC,GAAG,gCAAgCC,aAAY,CAAC,KAAK,EAAEC,EAAMC,OAAO,CAAC,CAAC,CAAEC,UAAU,KAAKC,QAAO,G,SAErG,UAACC,EAAAA,CAAUA,CAAAA,CACTC,qBAAsB,GACtBC,UAAU,gCACVP,aAAY,CAAC,KAAK,EAAEC,EAAMC,OAAO,CAAC,SAAS,CAAC,CAC5CM,KAAMC,EAAAA,YAAYA,CAClBC,KAAK,QACLC,QAAQ,YACRC,QAAS,IAAMX,EAAMW,OAAO,CAAC,YAC7BhB,GAAI,CAACiB,IAAK,CAACC,MAAO,WAAYC,OAAQ,CAAC,CAAC,EACvC,GAAGC,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,+BAA+B,E,GAGnD,UAAClB,EAAAA,CAAOA,CAAAA,CAACC,GAAG,+BAA+BC,aAAY,CAAC,IAAI,EAAEC,EAAMC,OAAO,CAAC,CAAC,CAAEE,QAAO,G,SAEpF,UAACC,EAAAA,CAAUA,CAAAA,CACTC,qBAAsB,GACtBC,UAAU,gCACVP,aAAY,CAAC,IAAI,EAAEC,EAAMC,OAAO,CAAC,SAAS,CAAC,CAC3CM,KAAMS,EAAAA,cAAcA,CACpBP,KAAK,QACLC,QAAQ,YACRC,QAAS,IAAMX,EAAMW,OAAO,CAAC,YAC7BhB,GAAI,CAACiB,IAAK,CAACC,MAAO,WAAYC,OAAQ,CAAC,CAAC,EACvC,GAAGC,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,8BAA8B,E,MAOxD,GAAG,CAAEtB,EAAuBwB,WAAW,EAAlCxB,CAAAA,EAAuBwB,WAAW,CAAK,wBAAuB,CAAE,CAAE,KAAM,CAAC,C,sEChCvE,IAAMC,EAAwB,CAAC,CACpCC,SAAAA,CAAQ,CACRC,iBAAAA,CAAgB,CAChBC,OAAAA,CAAM,CACNC,sBAAAA,CAAqB,CACM,IAC3B,GAAM,CAACC,EAAcC,EAAgB,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC3C,CAACC,EAAYC,EAAc,CAAGF,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACvC,CAACG,EAAgBC,EAAkB,CAAGJ,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,KAG/CK,EACJ,WAACC,EAAAA,CAAIA,CAAAA,CAACpC,GAAI,CAACqC,SAAU,QAASnB,MAAO,UAAU,E,UAAG,wIAEnB,IAC7B,UAACoB,EAAAA,CAAIA,CAAAA,CAACC,OAAM,GAACC,KALY,gFAKgBC,OAAO,SAASC,cAAY,iC,SAAiC,mB,GAE/F,I,GAgBX,MACE,WAACC,EAAAA,CAAMA,CAAAA,CACLvC,aAAW,yDACXsB,OAAQA,EACRkB,UAAWpB,EACXxB,GAAI,CAAC6C,UAAW,MAAM,EACrB,GAAGzB,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,0BAA0B,C,UAE1C,UAACuB,EAAAA,CAAMA,CAACG,MAAM,E,SAhCI,e,GAiClB,WAAC/C,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQ8C,cAAe,SAAUC,QAAS,CAAC,E,UAC5D,WAACC,MAAAA,C,UACC,WAACC,EAAAA,CAAWA,CAAAA,CAAClD,GAAI,CAACmD,GAAI,CAAC,E,UACrB,UAACD,EAAAA,CAAWA,CAACE,KAAK,EAACpD,GAAI,CAACqD,WAAY,MAAM,E,SAAG,gB,GAC7C,UAACC,EAAAA,CAAMA,CAAAA,CACLC,SAAUC,GAAKtB,EAAkBsB,EAAEC,aAAa,CAACC,KAAK,EACtDC,YAAY,YACZ7C,KAAK,QACLd,GAAI,CAAC4D,MAAO,MAAM,E,SAEjBC,OAAOC,OAAO,CAACnC,GAAuBoC,GAAG,CAAC,CAAC,CAACL,EAAOM,EAAY,GAC9D,UAACV,EAAAA,CAAMA,CAACW,MAAM,EAAaP,MAAOA,E,SAC/BM,C,EADiBN,G,MAO1B,WAACR,EAAAA,CAAWA,CAAAA,CAAClD,GAAI,CAACmD,GAAI,CAAC,E,UACrB,UAACD,EAAAA,CAAWA,CAACE,KAAK,EAACpD,GAAI,CAACqD,WAAY,MAAM,E,SAxC7B,S,GAyCb,UAACa,EAAAA,EAAQA,CAAAA,CACPC,KAAM,EACNnE,GAAI,CAAC4D,MAAO,MAAM,EAClBL,SAAUC,GAAK3B,EAAgB2B,EAAEC,aAAa,CAACC,KAAK,EACnD,GAAGtC,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,wBAAwB,G,GAG5C,UAACrB,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQ8C,cAAe,MAAOqB,eAAgB,aAAcjB,GAAI,CAAC,E,SAClF,WAACD,EAAAA,CAAWA,CAAAA,C,UACV,UAACmB,EAAAA,CAAQA,CAAAA,CAACC,QAASvC,EAAYwB,SAAUC,GAAKxB,EAAcwB,EAAEf,MAAM,CAAC6B,OAAO,C,GAC5E,UAACpB,EAAAA,CAAWA,CAACE,KAAK,EAACpD,GAAI,CAACqD,WAAY,QAAQ,E,SAlDlC,+D,UAqBN,OAiCV,UAACtD,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACmD,GAAI,CAAC,E,SAAIhB,C,GACnB,WAACpC,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQ8C,cAAe,MAAOqB,eAAgB,UAAU,E,UACzE,UAACG,EAAAA,CAAMA,CAAAA,CAACvD,QAASQ,E,SAAU,Q,GAC3B,UAAC+C,EAAAA,CAAMA,CAAAA,CACLC,SAAU,CAAC5C,EAAalC,IAAI,GAC5BqB,QAAQ,UACRC,QA1DoB,IAC5BwC,EAAEiB,cAAc,GAEZ7C,EAAalC,IAAI,KACnB8B,IACAC,EAAiBG,EAAcG,EAAYE,GAE/C,EAoDUjC,GAAI,CAAC0E,GAAI,CAAC,EACT,GAAGtD,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,yBAAyB,C,SAC1C,iB,WAOX,EAEA,GAAG,CAAEG,EAAsBD,WAAW,EAAjCC,CAAAA,EAAsBD,WAAW,CAAK,uBAAsB,CAAE,CAAE,KAAM,CAAC,CC1GrE,kBAAMqD,gBAAgBC,MAC3BC,YAAYlG,CAAe,CAAE,CAC3B,KAAK,CAACA,EACR,CACF,EA8CO,eAAemG,EACpBC,CAAY,CACZC,CAAW,CACXC,CAAyB,CACzBC,CAAqB,CACrBC,CAAqB,CACrBC,CAAoB,EAEpB,IAAMC,EAAW,MAAMC,MAAMN,EAAK,CAChCO,OAAQ,OACRxG,KAAM,IAAIyG,gBAAgB,CAACC,mBAAoBR,EAAmBC,cAAAA,EAAeC,cAAAA,EAAeC,aAAAA,CAAY,GAC5GM,QAAS,CACPC,OAAQ,mBACR,mBAAoB,gBACtB,CACF,GAEMC,EAAO,MAAMP,EAASQ,IAAI,GAC1BC,EAASF,EAAKG,GAAG,CAACf,GAAG,CACrBgB,EAAcJ,EAAKG,GAAG,CAACE,YAAY,CACnCC,EAAoBN,EAAKG,GAAG,CAACI,mBAAmB,CAChDC,EAAc,MAAMC,SAhE1BrB,CAAgB,CAChB9G,CAAqB,CACrBoI,EAAsB,GAAI,CAC1BC,EAAsB,CAAC,IAAI,EAE3B,OAAO,eAAgBC,EAAKC,CAAY,EACtC,IAAMC,EAAU,IAAIC,QAAQ3B,EAAK9G,GACjCwI,EAAQhB,OAAO,CAACkB,MAAM,CAAC,mBAAoB,kBAC3C,IAAMvB,EAAW,MAAMwB,KAAKvB,KAAK,CAACoB,GAC5BI,EAAkB,MAAU,CAAC,WAAW,EAAEzB,EAAS0B,MAAM,CAAC,mCAAmC,CAAC,EAEpG,GAAI1B,MAAAA,EAAS0B,MAAM,CAEjB,OADA,MAAM,IAAIC,QAAQC,GAAWC,WAAWD,EAASR,IAC1CD,EAAKC,IAAAA,GAEd,GAAIpB,MAAAA,EAAS0B,MAAM,CAAU,CAC3B,IAAMI,EAAU,MAAM9B,EAASQ,IAAI,GAEnC,GAAIsB,EAAQpB,GAAG,CAACqB,aAAa,CAC3B,MAAM,IAAIzC,QAAQwC,EAAQpB,GAAG,CAACqB,aAAa,CAE3C,OAAMN,CAEV,CACA,GAAIP,EAAoBc,QAAQ,CAAChC,EAAS0B,MAAM,EAC9C,OAAO1B,CAET,OAAMyB,CACR,EAAGR,EACL,EAmCsCR,EAAQ,CAAC,EAAG,KAC1CwB,EAAU,MAAMlB,EAAYP,IAAI,GAChC0B,EAAQD,EAAQvB,GAAG,CAAC5F,EAAE,CACtB,CAACqH,WAAAA,CAAU,CAAC,CAAGF,EAAQvB,GAAG,CAAC0B,OAAO,CAExC,MAAO,CAACD,WAAAA,EAAYD,MAAAA,EAAOvB,YAAAA,EAAaE,kBAAAA,EAAmBwB,UAAW,IAAI,CAC5E,CASO,eAAeC,EAAa3B,CAAmB,CAAEf,CAAyB,CAAE2C,CAAkB,EACnG,IAAM7I,EAAO,IAAIyG,gBAAgB,CAC/BqC,QAAS,MACTpC,mBAAoBR,CACtB,EACA2C,CAAAA,EAASE,SAAS,EAAI/I,EAAKgJ,GAAG,CAAC,sBAAuBH,EAASE,SAAS,EACxEF,EAAS7I,IAAI,EAAIA,EAAKgJ,GAAG,CAAC,iBAAkBH,EAAS7I,IAAI,EACzD6I,EAASI,OAAO,EAAIjJ,EAAKgJ,GAAG,CAAC,oBAAqBH,EAASI,OAAO,CAAG,IAAM,KAC3EJ,EAAS3F,cAAc,EAAIlD,EAAKgJ,GAAG,CAAC,2BAA4BH,EAAS3F,cAAc,EAEvF,MAAMqD,MAAMU,EAAa,CACvBT,OAAQ,OACRxG,KAAAA,EACA2G,QAAS,CACPC,OAAQ,mBACR,mBAAoB,gBACtB,CACF,EACF,CCvFO,SAASsC,EAAsB,CACpCjC,YAAAA,CAAW,CACXE,kBAAAA,CAAiB,CACjBqB,MAAAA,CAAK,CACLG,UAAAA,CAAS,CACT/F,sBAAAA,CAAqB,CACrBgG,aAAAA,EAAeO,CAAmB,CACP,EAC3B,GAAM,CAACC,EAAmBC,EAAqB,CAAGtG,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACrD,CAACuG,EAAwBC,EAA0B,CAAGxG,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC/D,CAACyG,EAAsBC,EAAwB,CAAG1G,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC3DvC,EAAckJ,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,IACnBN,EAAoB,aAAe,2BACzC,CAACA,EAAkB,EAEhBO,EAAoBC,CAAAA,EAAAA,EAAAA,KAAAA,IAEpBC,EAAwBC,CAAAA,EAAAA,EAAAA,MAAAA,EAA0B,MAExD,MACE,uB,UACE,UAACtH,EAAqBA,CACpBG,OAAQ6G,EACR/G,SAAU,KACRgH,EAAwB,IACxBI,EAAsBE,OAAO,EAAEC,OACjC,EACAtH,iBAAkB,MAAOG,EAAcG,EAAYE,KACjDuG,EAAwB,IACxBJ,EAAqB,IACrBE,EAA0B,IAC1BxJ,SAASkK,cAAc,CAAC,sBAAsBD,QAE9C,GAAI,CACF,MAAMpB,EAAa3B,EAAaE,EAAmB,CACjDnH,KAAM6C,EACNoG,QAASjG,EACTE,eAAAA,CACF,EACF,CAAE,MAAOgH,EAAO,CAEdC,QAAQD,KAAK,CAACA,GACdb,EAAqB,IACrBE,EAA0B,GAC5B,CACF,EACA3G,sBAAuBA,C,GAEzB,UAACwH,EAAAA,CAAKA,CAAAA,CACJnJ,GAAI,CAACoJ,OAAQ,OAAQC,gBAAiB,cAAerG,QAAS,CAAC,EAC/DN,cAAY,0BACZ3B,QAAQ,UACRuI,KAAK,QACLC,kBAAiB,CAAC,yBAAyB,EAAEb,EAAkB,CAAC,C,SAEhE,WAAC3I,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQuJ,IAAK,EAAGC,WAAY,QAAQ,E,UACrD,UAAC1J,EAAAA,CAAGA,CAAAA,CACFC,GAAI,CACF0J,aAAc,OACdC,SAAU,WACVC,GAAI,gBACJhG,MAAO,GACPiG,OAAQ,GACR5J,QAAS,OACTwJ,WAAY,SACZrF,eAAgB,SAChB0F,YAAa,MACbV,OAAQ,YACRW,YAAa,gBACf,E,SAEA,UAACC,EAAAA,CAAOA,CAAAA,CAACpJ,KAAMqJ,EAAAA,WAAWA,CAAEnJ,KAAM,GAAId,GAAI,CAACkK,KAAM,UAAU,C,KAE7D,UAAC9H,EAAAA,CAAIA,CAAAA,CACHpC,GAAI,CAACkB,MAAO,WAAYmB,SAAU,CAAC,EACnClC,GAAI,CAAC,yBAAyB,EAAEuI,EAAkB,CAAC,CACnDhG,cAAY,2B,SAEXnD,C,GAEF4I,GAAqBE,GACpB,UAACpF,MAAAA,C,SACC,UAACsB,EAAAA,CAAMA,CAAAA,CACLvD,QAAS,KACPwH,EAAwB,GAC1B,EACAzH,QAAQ,YACRD,KAAK,QACLqJ,IAAKvB,E,SA1EY,0B,KAgFtB,CAACT,GACA,UAACpI,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAAC8J,YAAa,CAAC,E,SACtB,UAAChK,EAAsBA,CACrBkB,QAAS,MAAM8G,IACbM,EAAqB,IACrB,GAAI,CACF,MAAMT,EAAa3B,EAAaE,EAAmB,CAAC4B,UAAAA,CAAS,GAC7Dc,EAAsBE,OAAO,EAAEC,OACjC,CAAE,MAAOE,EAAO,CAEdC,QAAQD,KAAK,CAACA,GACdb,EAAqB,GACvB,CACF,EACA9H,QA5FEoH,EAAaH,EAAQ,6BAA+B,kBAAqB,S,YAoG3F,CAEA,GAAG,CAAEU,EAAsB3G,WAAW,EAAjC2G,CAAAA,EAAsB3G,WAAW,CAAK,uBAAsB,CAAE,CAAE,KAAM,CAAC,CC7HrE,IAAM8I,EAAgC,GAEzC,WAACzH,EAAAA,CAAMA,CAAAA,CACLhC,UAAU,oCACVe,OAAQrB,EAAMqB,MAAM,CACpBkB,UAAWvC,EAAMmB,QAAQ,CACzB6I,eAAgBhK,EAAMgK,cAAc,CACpCjK,aAAW,uBACV,GAAGgB,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,oCAAoC,C,UAEpD,UAACuB,EAAAA,CAAMA,CAACG,MAAM,E,SAAC,sB,GAEf,WAAC/C,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACsK,EAAG,CAAC,E,UAAG,8EAEf,WAACvK,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQsK,GAAI,EAAGnG,eAAgB,UAAU,E,UAC1D,UAACG,EAAAA,CAAMA,CAAAA,CAACvE,GAAI,CAACwK,GAAI,CAAC,EAAGxJ,QAASX,EAAMmB,QAAQ,CAAG,GAAGJ,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,oBAAoB,C,SAAE,Q,GAGpF,UAACmD,EAAAA,CAAMA,CAAAA,CAACxD,QAAQ,SAASC,QAASX,EAAMoK,SAAS,CAAG,GAAGrJ,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,qBAAqB,C,SAAE,kB,YASpG,GAAG,CAAEgJ,EAA8B9I,WAAW,EAAzC8I,CAAAA,EAA8B9I,WAAW,CAAK,+BAA8B,CAAE,CAAE,KAAM,CAAC,CC7BrF,SAASoJ,EAA0B,CAACC,cAAAA,CAAa,CAAEC,cAAAA,CAAa,CAAiC,EACtG,MACE,UAACzB,EAAAA,CAAKA,CAAAA,CACJnJ,GAAI,CAACoJ,OAAQ,OAAQC,gBAAiB,cAAerG,QAAS,EAAG8G,YAAa,CAAC,EAC/EpH,cAAY,+BACZ3B,QAAQ,S,SAER,WAAChB,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQwJ,WAAY,SAAUD,IAAK,CAAC,E,UACrD,UAACzJ,EAAAA,CAAGA,CAAAA,CACFC,GAAI,CACF0J,aAAc,OACdC,SAAU,WACVC,GAAI,gBACJhG,MAAO,GACPiG,OAAQ,GACR5J,QAAS,OACTwJ,WAAY,SACZrF,eAAgB,SAChB0F,YAAa,EACbV,OAAQ,YACRW,YAAa,WACf,EACArH,cAAY,oC,SAEXkI,EAAgB,UAACC,EAAAA,gBAAgBA,CAAAA,CAAC/J,KAAM,E,GAAS,UAACgK,EAAAA,kBAAkBA,CAAAA,CAAChK,KAAM,E,KAE9E,UAACsB,EAAAA,CAAIA,CAAAA,CACHpC,GAAI,CAACkB,MAAO,YAAamB,SAAU,EAAGgB,WAAY,IAAKyG,YAAa,CAAC,EACrEpH,cAAY,uC,SAEXiI,C,OAKX,CAEA,GAAG,CAAED,EAA0BpJ,WAAW,EAArCoJ,CAAAA,EAA0BpJ,WAAW,CAAK,2BAA0B,CAAE,CAAE,KAAM,CAAC,C,0BC3C7E,SAASyJ,EAAyBC,CAAe,EAItD,OAAOA,EACJC,KAAK,CAAC,MACNC,MAAM,CAACC,SACPpH,GAAG,CAACqH,GAAQA,EAAK1L,IAAI,GAC1B,C,yBCMA,IAAM2L,EAAsB,yCAqCrB,SAASC,EAAqB,CACnCtG,IAAAA,CAAG,CACHuG,aAAAA,CAAY,CACZC,aAAAA,CAAY,CACZC,WAAAA,CAAU,CACVC,kBAAAA,CAAiB,CACjB/J,sBAAAA,CAAqB,CACrBmD,eAAAA,EAAiB6G,CAAqB,CACZ,EAC1B,GAAM,CAACC,EAAWC,EAAa,CAAG/J,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACrC,CAACgK,EAAcC,EAAgB,CAAGjK,CAAAA,EAAAA,EAAAA,QAAAA,EAA6BvD,KAAAA,GAC/D,CAACyN,EAAgBC,EAAkB,CAAGnK,CAAAA,EAAAA,EAAAA,QAAAA,EAAqCvD,KAAAA,GAC3E,CAAC2N,EAAmBC,EAAqB,CAAGrK,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACrD,CAACsK,EAAaC,EAAe,CAAGvK,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACzC,CAACwK,EAA+BC,EAAiC,CAAGzK,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAC7E0K,EAAY3D,CAAAA,EAAAA,EAAAA,MAAAA,EAAsB,OAClC4D,EAAiB5D,CAAAA,EAAAA,EAAAA,MAAAA,EAAO,IACxB6D,EAAiB7D,CAAAA,EAAAA,EAAAA,MAAAA,EAAO,IACxB8D,EAAS9D,CAAAA,EAAAA,EAAAA,MAAAA,EAAuB,MAChCwB,EAAiBxB,CAAAA,EAAAA,EAAAA,MAAAA,EAA2B,MAC5C+D,EAAsBzO,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,iCAEvC0O,EAAqBC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACrCjB,EAAa,IAEb,IAAMkB,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QAC/BC,EAAWF,GAAMzN,cAAc,YAChC2N,IAELC,CAAAA,EAAAA,EAAAA,EAAAA,EAAYD,EAAUR,EAAe3D,OAAO,CAAEqE,EAAarO,SAASsO,aAAa,GAAKH,GACtFN,EAAO7D,OAAO,CAAEuE,aAAa,CAAC,IAAIC,YAAY1N,EAAAA,EAASA,CAAE,CAAC2N,QAAS,EAAI,IACzE,EAAG,EAAE,EAECC,EAAyBV,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACzCT,EAAe,IACfF,EAAqB,IACU,OAA3B9B,EAAevB,OAAO,GACxBuB,EAAevB,OAAO,CAACC,KAAK,GAC5BsB,EAAevB,OAAO,CAAG,MAGvBwD,GAAiCI,EAAe5D,OAAO,GACzD+D,EAAmBH,EAAe5D,OAAO,EACzCyD,EAAiC,KAInC,IAAMQ,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QAC/BS,EAASV,GAAMzN,cAAc,iCAC/BmO,GACFA,EAAOC,eAAe,CAAC,WAE3B,EAAG,CAACpB,EAA+BO,EAAmB,EAEhDc,EAAyBb,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACzCT,EAAe,IACfF,EAAqB,IACU,OAA3B9B,EAAevB,OAAO,GACxBuB,EAAevB,OAAO,CAACC,KAAK,GAC5BsB,EAAevB,OAAO,CAAG,MAG3B+D,EAAmB,IAEnB,IAAME,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QACjCD,GACFA,EAAKa,MAAM,EAEf,EAAG,CAACvB,EAAgBF,EAAsBU,EAAoBF,EAAO,EAErEkB,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMd,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QACrC,GAAI,CAACD,EAAM,OAEX,IAAMe,EAAoB,IACpBlC,GAAa,CAACQ,IAChBrH,EAAMN,cAAc,GAEpB0H,EAAqB,IACrB9B,EAAevB,OAAO,CAAGhK,SAASsO,aAAa,CAEnD,EAGA,OADAL,EAAKgB,gBAAgB,CAAC,SAAUD,GACzB,KACLf,EAAKiB,mBAAmB,CAAC,SAAUF,EACrC,CACF,EAAG,CAACnB,EAAQf,EAAWQ,EAAY,EAEnCyB,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMd,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QACrC,GAAuBzO,KAAAA,IAAnByN,GAAgC,CAACe,GACjCT,EADuC,OAE3C,IAAM2B,EAAqB,KACzB,IAAMC,EAAUxB,EAAe5D,OAAO,CACtC,GAAI,CAACoF,EAAS,OAGd,IAAMnP,EAAOgO,EAAKzN,aAAa,CAAsB,YACrD,GAAI,CAACP,EAAM,OAIX,IAEMoP,EAAkBC,SD1IHC,CAAmB,CAAEC,CAA0B,EAExE,IAAMC,EAAyBD,EAAiBE,MAAM,CAClDC,EAAU,EACVN,EAAkB,EAChBO,EAA2B,IAAIJ,EAAiB,CAItD,IAAK,IAAMlD,KAAQkD,EAAkB,CACnC,GAAID,IAAAA,EAAUG,MAAM,CAClB,MAEF,IAAK,IAAMG,KAASN,EAClB,GAAIM,EAAMtH,QAAQ,CAAC+D,GAAO,CACxBqD,IACAJ,EAAUO,MAAM,CAACP,EAAUQ,OAAO,CAACF,GAAQ,GAC3CD,EAAeE,MAAM,CAACF,EAAeG,OAAO,CAACzD,GAAO,GAEpD,KACF,CAEJ,CAEA,GAAIqD,IAAYF,EACd,OAAO,GACF,EAMLJ,EAAkBM,EAAUF,EAC5B,IAAMO,EAAS,EAAIP,EACbQ,EAAuBL,EAAeF,MAAM,CAC9CQ,EAAgB,EACdC,EAAsB,IAAIP,EAAe,CAC/C,GAAIL,EAAUG,MAAM,CAAG,GAAKO,EAAuB,EACjD,IAAK,IAAM3D,KAAQsD,EAAgB,CACjC,GAAIL,IAAAA,EAAUG,MAAM,CAClB,MAEF,IAAK,IAAMG,KAASN,EAClB,GAAIjD,EAAK8D,KAAK,CAAC,EAAG,MAAQP,EAAMO,KAAK,CAAC,EAAG,KAAO9D,EAAK8D,KAAK,CAAC,OAASP,EAAMO,KAAK,CAAC,KAAM,CAEpF,IAAMC,EAAWC,CADGC,EAAAA,EAAAA,CAAAA,EAASjE,EAAMuD,GACJvD,EAAKoD,MAAM,CAC1C,GAAIW,EAAW,EAEb,SAGF,IAAMG,EAAM,EAAIH,EAChB,GAAIG,GAAO,GACT,SAEAN,GAAiBM,EAAMR,EACvBT,EAAUO,MAAM,CAACP,EAAUQ,OAAO,CAACF,GAAQ,GAC3CM,EAAUL,MAAM,CAACK,EAAUJ,OAAO,CAACzD,GAAO,GAC1C,KAEJ,CAEJ,CAIF,GAAIiD,EAAUG,MAAM,CAAG,GAAKS,EAAUT,MAAM,CAAG,EAC7C,IAAK,IAAMpD,KAAQ6D,EAAW,CAC5B,GAAIZ,IAAAA,EAAUG,MAAM,CAClB,MAEF,IAAMe,EAAiBvC,CAAAA,EAAAA,EAAAA,CAAAA,EAAQ5B,EAAMiD,GACrC,GAAIkB,OAAAA,EACF,SAGF,IAAMJ,EAAWC,CADGC,EAAAA,EAAAA,CAAAA,EAASjE,EAAMmE,GACJnE,EAAKoD,MAAM,CACtCW,EAAW,IAMfH,GAAiBM,CAFL,EAAIH,CAAO,EAEAL,EACvBT,EAAUO,MAAM,CAACP,EAAUQ,OAAO,CAACU,GAAiB,GACtD,CAKF,GAAIpB,IAFJA,CAAAA,GAAmBa,CAAY,EAEJ,CACzB,IAAMd,EAAUI,EAAiBkB,IAAI,CAAC,MAEhCL,EAAWC,CADGC,EAAAA,EAAAA,CAAAA,EAAShB,EAAUmB,IAAI,CAAC,MAAOtB,GACpBA,EAAQM,MAAM,CAC7C,GAAIW,EAAW,EAEb,OAAO,EAEThB,EAAkB,EAAIgB,CACxB,CAEA,OAAOhB,IAAAA,CACT,CACF,ECiCwBpD,EAAyBhM,EAAK2E,KAAK,EAC5BqH,EAAyBmD,IAElDuB,CAAAA,EAAAA,EAAAA,EAAAA,EAAU,uCAAwC,CAChDC,iBAAkBvB,EAClBwB,QAASlE,EACTmE,OAAQpD,EAAU1D,OAAO,EAE7B,EAGA,OADAiE,EAAKgB,gBAAgB,CAAC,SAAUE,GACzB,KACLlB,EAAKiB,mBAAmB,CAAC,SAAUC,EACrC,CACF,EAAG,CAACjC,EAAgBP,EAAYa,EAA8B,EAE9DuB,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMd,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QAC/BC,EAAWF,GAAMzN,cAAc,YAC/BF,EAAYuN,EAAO7D,OAAO,EAAEkE,QAAQ,wCACpC6C,EAAQzQ,GAAWE,cAAgC,qBAAqBoE,MAC9E,GAAI,CAACqJ,GAAQ,CAAC3N,GAAa,CAACyQ,EAAO,OAEnC,IAAMC,EAAc,MAAO/K,IACzB,GAAM,CAAC6K,OAAAA,CAAM,CAAC,CAAG,EAAgDG,MAAM,CAGnEnD,GAAuBgD,YAAAA,GACzBxR,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,oCACTqO,EAAe3D,OAAO,CAAG,0CAEzB1K,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,mCACTqO,EAAe3D,OAAO,CAAG,wCAGvBmE,GAAU+C,SLnFO/C,CAA6B,CAAEgD,CAAY,EACpEhD,EAASlE,KAAK,GAGd,IAAMmH,EAAQjD,EAASkD,YAAY,EAAI,EACjCzM,EAAQuJ,EAASvJ,KAAK,CACtB0M,EAAY1M,EAAM2M,SAAS,CAAC,EAAGH,GAC/BI,EAAY5M,EAAM2M,SAAS,CAACH,GAE9BK,EAAUN,EACVO,EAAiBN,EAAQD,EAAKzB,MAAM,CAAG,EAEvC4B,IACE1M,OAAAA,CAAK,CAACwM,EAAQ,EAAE,CAClBM,GAAkB,EAElBD,EAAU,CAAC;AAAE,EAAEA,EAAQ,CAAC,EAI5B,IAAIE,EAAuB,GAC3B,GAAI,CACFA,EAAuB3R,SAAS4R,WAAW,CAAC,aAAc,GAAOH,EACnE,CAAE,MAAO/M,EAAG,CACViN,EAAuB,EACzB,CAEKA,GACHxD,CAAAA,EAASvJ,KAAK,CAAG0M,EAAYG,EAAUD,CAAQ,EAGjDrD,EAAS0D,cAAc,CAAGH,EAC1BvD,EAASkD,YAAY,CAAGK,EAExBvD,EAASI,aAAa,CACpB,IAAIC,YAAY,QAAS,CACvBC,QAAS,GACTqD,WAAY,EACd,GAEJ,EK2C+B3D,EAAUR,EAAe3D,OAAO,EAEzD+C,EAAa,IACbE,EAAgBxN,KAAAA,GAEhB,GAAI,CACF,IAAMsS,EAAyB,MAAM/L,EAAeC,EAAOC,EAAK6K,EAAOtE,EAAcC,EAAcC,GAC/FO,GAAkBA,EAAetE,SAAS,GAE5CmJ,EAAuB7K,WAAW,EAAI,CAAC,YAAY,EAAEgG,EAAetE,SAAS,CAAC,CAAC,CAC/EmJ,EAAuBnJ,SAAS,CAAGsE,EAAetE,SAAS,EAE7DuE,EAAkB4E,GAElBrE,EAAU1D,OAAO,CAAG8G,EACpBlD,EAAe5D,OAAO,CAAGgI,SAzKLb,CAAY,CAAEL,CAAqB,EAE7D,IAAMpI,EAAayI,EAAKvQ,IAAI,GACtBqR,EAAevJ,EAAWqH,OAAO,CAAC,QACpCX,EAAU1G,EACVwJ,EAAUxJ,EAQd,OALqB,KAAjBuJ,IACF7C,EAAU1G,EAAW0H,KAAK,CAAC,EAAG6B,GAC9BC,EAAUxJ,EAAW0H,KAAK,CAAC6B,EAAe,IAGrCnB,YAAAA,EAAuB1B,EAAU0B,YAAAA,EAAuBoB,EAAUxJ,CAC3E,EA2JoDqJ,EAAuBrJ,UAAU,EAAI,GAAIoI,GAIrF,IAAMqB,EAASnS,SAASQ,aAAa,CAAC,qCAClCuR,CAAAA,GAA0B,CAACI,GAC7B7S,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,4BACTyO,EAAmBH,EAAe5D,OAAO,GAEzCyD,EAAiC,GAErC,CAAE,MAAOtD,EAAO,CACd4D,EAAmB,IACnBzO,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,yBAGT8K,QAAQD,KAAK,CAACA,GACVA,aAAiBtE,QACnBoH,EAAgB9C,EAAMtK,OAAO,EAE7BoN,EAAgBV,EAEpB,CACF,EAGA,OADA0B,EAAKgB,gBAAgB,CAACpO,EAAAA,EAAUA,CAAEmQ,GAC3B,KACL/C,EAAKiB,mBAAmB,CAACrO,EAAAA,EAAUA,CAAEmQ,EACvC,CACF,EAAG,CACD9K,EACAuG,EACAC,EACAC,EACA3G,EACA+H,EACAD,EACAZ,EACD,EAED6B,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMd,EAAOJ,EAAO7D,OAAO,EAAEkE,QAAQ,QAC/B5N,EAAYuN,EAAO7D,OAAO,EAAEkE,QAAQ,wCACpC6C,EAAQzQ,GAAWE,cAAgC,qBAAqBoE,MAC9E,GAAI,CAACqJ,GAAQ,CAAC3N,GAAa,CAACyQ,EAAO,OAEnC,IAAMC,EAAc,UAClB/D,EAAgBxN,KAAAA,GAGhB,IAAMqH,EAAO,CAAE,GAAGoG,CAAc,EAEhC,GAAI,CAD0C,CAACpG,EAAKI,WAAW,EAAI,EAAC,EAAGkL,KAAK,CAAC,oBACjC,CAC1C,IAAM7L,EAAW,MAAM8L,CAAAA,EAAAA,EAAAA,EAAAA,EAAkB,CAAC,8BAA8B,EAAE1F,EAAW,CAAC,EACtF,GAAIpG,EAAS+L,EAAE,CAAE,CACf,IAAMvL,EAAO,MAAMR,EAASQ,IAAI,EAChCD,CAAAA,EAAK8B,SAAS,CAAG7B,EAAKwL,UAAU,CAChCzL,EAAKM,iBAAiB,CAAGL,EAAKM,mBAAmB,CACjDP,EAAKI,WAAW,CAAGH,EAAKI,YAAY,CAChCL,EAAK2B,KAAK,EACZ3B,CAAAA,EAAKI,WAAW,EAAI,CAAC,QAAQ,EAAEJ,EAAK2B,KAAK,CAAC,CAAC,EAE7C0E,EAAkBrG,EACpB,MACE,MAAM,MAAU,gCAEpB,CACF,EAEA,OADAmH,EAAKgB,gBAAgB,CAAClO,EAAAA,EAAgCA,CAAEiQ,GACjD,KACL/C,EAAKiB,mBAAmB,CAACnO,EAAAA,EAAgCA,CAAEiQ,EAC7D,CACF,EAAG,CAAC9D,EAAgBP,EAAW,EAE/B,IAAM6F,EAAgB1F,EACpB,UAAC2F,EAAAA,CAAwBA,CAAAA,CAAC3F,UAAWA,C,GACnCE,EACF,UAACpB,EAAyBA,CACxBC,cAAemB,EACflB,cAAekB,IAAiBT,EAC/B,GAAGjK,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,+BAA+B,GAE/CsK,GAAqBM,GAAkB,CAACM,EAC1C,UAACrE,EAAqBA,CACpBtG,sBAAuBA,EACtB,GAAGqK,CAAc,CACjB,GAAG5K,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,0BAA0B,GAE1C,KAEJ,MACE,WAAC6B,MAAAA,CAAIkH,IAAKwC,EAAS,GAAGvL,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,yBAAyB,C,UACxDkQ,EACD,UAAClH,EAA6BA,CAC5B1I,OAAQwK,EACR1K,SAAUgM,EACV/C,UAAWkD,EACXtD,eAAgBA,C,KAIxB,CAEA,GAAG,CAAEiB,EAAqBhK,WAAW,EAAhCgK,CAAAA,EAAqBhK,WAAW,CAAK,sBAAqB,CAAE,CAAE,KAAM,CAAC,CClT1EkQ,CAAAA,EAAAA,EAAAA,CAAAA,EAAqB,yBAA0B,CAC7CC,UAAWnG,CACb,E,sBCQIoG,E,oFATJ,GAAM,CAACC,QAAAA,CAAO,CAAC,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,EAAY,gBAQxBC,EAAkB,aAGlBC,EAAmB,CAAC,aAAc,aAAc,eAAgB,WAAY,cAAe,OAAO,CAExG,GAAI,CACF,IAAM5T,EAAU6T,CAAAA,EAAAA,EAAAA,CAAAA,EAAmB,aAInC,QAAO7T,EAAQ8T,WAAW,CAE1BN,EAAuB,IAAIO,EAAAA,CAAeA,CAAC/T,EAC7C,CAAE,MAAOgU,EAAG,CAEZ,CAEA,SAASC,EAAkB1K,CAAiB,EAC1C,IAAMuK,EAAcD,CAAAA,EAAAA,EAAAA,CAAAA,EAAmB,cAAcC,WAAW,EAAI,CAAC,EAErE,GAAIA,EAKF,IAAK,GAAM,CAACI,EAAK1O,EAAM,GAJvB,OAAOsO,EAAYK,MAAM,CACzB,OAAOL,EAAYM,SAAS,CAC5B,OAAON,EAAYO,IAAI,CAEI1O,OAAOC,OAAO,CAACkO,IAEpCI,EAAII,UAAU,CAACX,KACjBG,CAAW,CAACI,EAAIK,OAAO,CAACZ,EAAiB,IAAI,CAAGnO,EAChD,OAAOsO,CAAW,CAACI,EAAI,EAK7B,IAAMM,EAAc5T,SAASQ,aAAa,CAAkB,8BAO5D,IAAK,GAAM,CAAC8S,EAAK1O,EAAM,GANnBgP,GAEF7O,OAAO8O,MAAM,CAACX,EADMY,KAAKC,KAAK,CAACC,KAAKJ,EAAYK,OAAO,IAIvC,IAAIvN,gBAAgBwN,OAAOC,QAAQ,CAACC,MAAM,GAEtDpB,EAAiBzK,QAAQ,CAAC+K,EAAIe,WAAW,KAC3CnB,CAAAA,CAAW,CAACI,EAAI,CAAG1O,CAAI,EAO3B,OAFAsO,EAAYoB,KAAK,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,IAAUC,QAAQ,GAE/BzP,OAAO8O,MAAM,CAACX,EAAavK,EACpC,CAEO,SAAS8L,EAAa9L,CAAiB,EAC5CiK,GAAsB6B,aAAapB,EAAkB1K,GACvD,CAEO,SAASgI,EAAU+D,CAAY,CAAE/L,EAAwE,CAAC,CAAC,EAChH,IAAMgM,EAAU3U,SAAS4U,IAAI,EAAEpU,cAA+B,yCAAyCyT,QAEjGY,EAAwBF,EAAU,CAACA,QAAAA,CAAO,EAAI,CAAC,EAErD,IAAK,GAAM,CAACrB,EAAK1O,EAAM,GAAIG,OAAOC,OAAO,CAAC2D,SACpC/D,GACFiQ,CAAAA,CAAY,CAACvB,EAAI,CAAG,CAAC,EAAE1O,EAAM,CAAC,EAI9BgO,IAEkBS,EAAkBwB,GACtCjC,EAAqBjC,SAAS,CAFL+D,GAAQ,UAEgBrB,EAAkBwB,IAMvE,CAEO,SAASC,EAAsBC,CAAW,EAC/C,OAAOhQ,OAAOiQ,WAAW,CAACjQ,OAAOC,OAAO,CAAC+P,GAAK9P,GAAG,CAAC,CAAC,CAACgQ,EAAGC,EAAE,GAAK,CAACD,EAAGnB,KAAKqB,SAAS,CAACD,GAAG,EACtF,C,kDC7FO,2BAAME,iBASJC,SAASC,CAAY,CAAEC,CAAe,CAAE,CAC7C,IAAMC,EAAQ,IAAI,CAACC,mBAAmB,CAACH,EAAK,CACxCE,EACFA,EAAMrN,OAAO,GAAGoN,GAEhB,IAAI,CAACE,mBAAmB,CAACH,EAAK,CAAG,CAC/BI,QAASxN,QAAQC,OAAO,CAACoN,EAC3B,CAEJ,CAEOI,gBAAgBL,CAAY,CAAc,C,IAC/C,EACA,MADA,OAAI,CAACG,mBAAmB,EAACH,EAAK,EAA9B,EAAwB,CAACA,EAAK,CAAK,IAAIM,CAAS,EACzC,IAAI,CAACH,mBAAmB,CAACH,EAAK,CAACI,OAAO,C,mBArBvCD,mBAAmB,CAMvB,CAAC,C,CAiBP,EAEA,YAAMG,SAIJ7P,aAAc,CACZ,IAAI,CAAC2P,OAAO,CAAG,IAAIxN,QAAWC,IAC5B,IAAI,CAACA,OAAO,CAAGA,CACjB,EACF,CACF,C,qECrBO,SAAS0N,EACdC,CAA2D,QAe3D,CAbA/G,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMgH,EAASD,GAAeC,OAEzBA,IAID,aAAcA,GAChBA,CAAAA,EAAOrQ,QAAQ,CAAG,EAAI,EAExBqQ,EAAOC,SAAS,CAACC,MAAM,CAAC,eAC1B,EAAG,CAACH,EAAc,EAEbA,GAIE,CACLI,mBAAoB,CAClBC,iBAAkBL,CACpB,CACF,EAPS,CAAC,CAQZ,CAEO,SAASM,EAAkBF,CAAsC,EACtE,IAAM7K,EAAMtB,CAAAA,EAAAA,EAAAA,MAAAA,EAAOmM,EAAmBC,gBAAgB,CAACJ,MAAM,EAAI,MAC3D,CAACM,EAAMC,EAAQ,CAAGtT,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAE3Bd,EAAU8L,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAE1BsI,EAAQ,CAACD,EACX,EAAG,CAACA,EAAMC,EAAQ,EAWlB,MATAvH,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACH1D,EAAIrB,OAAO,GAEhBqB,EAAIrB,OAAO,CAACuM,YAAY,CAAC,gBAAiBF,EAAK7B,QAAQ,IACvDnJ,EAAIrB,OAAO,CAACuM,YAAY,CAAC,gBAAiB,QAC5C,EAAG,CAAClL,EAAKgL,EAAK,EAEdG,EAAiBN,EAAoBhU,GAE9B,CACLmJ,IAAAA,EACAgL,KAAAA,EACAC,QAAAA,CACF,CACF,CAEO,SAASE,EAAiBN,CAAsC,CAAEhU,CAAoC,EAC3G,IAAMmJ,EAAMtB,CAAAA,EAAAA,EAAAA,MAAAA,EAAOmM,EAAmBC,gBAAgB,CAACJ,MAAM,EAE7DhH,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,IAAMvP,EAAU6L,EAAIrB,OAAO,CAC3B,GAAKxK,EAKL,OADAA,EAAQyP,gBAAgB,CAAC,QAAS/M,GAC3B,IAAM1C,EAAQ0P,mBAAmB,CAAC,QAAShN,EACpD,EAAG,CAACmJ,EAAKnJ,EAAQ,CACnB,C,mCCvEO,IAAMuU,EAAkB,GAAIrB,C,UAAAA,CAAgBA,C,gDCEnD,YACMsB,4BAA4BC,EAAAA,CAAgBA,CAGhD,MAAMC,aAAaC,CAAiC,CAAE,KDJxBC,ECK5B,GAAM,CAACnE,UAAAA,CAAS,CAAC,CAAG,ODLQmE,ECKc,IAAI,CAACxB,IAAI,CDJ9CmB,EAAgBd,eAAe,CAACmB,ICO/BhB,EAAgB,IAAI,CAAC5H,OAAO,CAA4B,wBAE9D,MACE,UAAC6I,EAAAA,CAAYA,CAAAA,CACXC,YAAa,IAAI,CAAC1B,IAAI,CACtBuB,aAAcA,EACdlE,UAAWA,EACXsE,kBAAmB,IAAI,CAACC,aAAa,CACrCC,SAAU,IAAI,CAACA,QAAQ,CACvBrB,cAAeA,C,EAGrB,C,mCAlBAsB,aAAa,CAAG,c,CAmBlB,ECxBO,SAAS1E,EAAqB4C,CAAY,CAAEC,CAAiC,EAClFkB,EAAgBpB,QAAQ,CAACC,EAAMC,EACjC,CDEMmB,EAAAA,S,2TAAAA,CADLW,EAAAA,EAAUA,C,CACLX,E,mCERN,GAAM,CAAC7D,QAAAA,CAAO,CAAEyE,QAAAA,CAAO,CAAEC,WAAAA,CAAU,CAAC,CAAGzE,CAAAA,EAAAA,E,OAAAA,CAAAA,EAAY,gBAC7C0E,EAA0B,0BAchC,EANsD,CACpDC,OAAQ,IAAMH,EAAQE,EAAyB,QAC/CE,QAAS,IAAMH,EAAWC,GAC1BG,UAAW,IAAM,CAAC,CAAC9E,EAAQ2E,EAC7B,C,mCCVO,IAAMlV,EAAc,GAClB,EAAC,cAAesC,CAAK,E,kBCCvB,SAASgT,EAAoBC,CAAW,EAE7C,IAAM1L,EAAQ0L,EAAI1L,KAAK,CADR,UAEX2L,EAAQ,EAEZ,IAAK,IAAMC,KAAK5L,EAGd2L,GADYE,MAAMC,IAAI,CAACF,EAAE5L,KAAK,CAAC,mBAAmBuE,IAAI,CAAC,KAAKhB,MAAM,CAKpE,OAAOoI,EAAQ3L,EAAMuD,MAAM,CAWtB,SAAStB,EACdD,CAAgD,CAChD+J,CAAe,CACfC,CAAe,CACfC,EAAY,EAAI,EAEhB,IAAI9G,EAAYnD,EAASvJ,KAAK,CAAC2M,SAAS,CAAC,EAAGpD,EAASkD,YAAY,EAAI,GACjEG,EAAYrD,EAASvJ,KAAK,CAAC2M,SAAS,CAACpD,EAASkD,YAAY,EAAI,GAMlE,OAFAgH,EAA0BlK,EAAUmD,CAHpCA,EAAYA,EAAUqC,OAAO,CAACuE,EAASC,EAAO,EAC9C3G,CAAAA,EAAYA,EAAUmC,OAAO,CAACuE,EAASC,EAAO,EAEa7G,EAAU5B,MAAM,CAAE0I,GAEtED,CACT,CAWO,SAASG,EACdnK,CAAgD,CAChD+J,CAAe,CACfC,CAAe,EAEf,GAAIhK,OAAAA,EAAS0D,cAAc,EAAa1D,OAAAA,EAASkD,YAAY,CAC3D,OAAOjD,EAAYD,EAAU+J,EAASC,GAExC,IAAM7G,EAAYnD,EAASvJ,KAAK,CAAC2M,SAAS,CAAC,EAAGpD,EAAS0D,cAAc,EAC/DL,EAAYrD,EAASvJ,KAAK,CAAC2M,SAAS,CAACpD,EAASkD,YAAY,EAIhE,OAFAgH,EAA0BlK,EAAUmD,EAAY6G,EAAU3G,EAAWF,EAAU5B,MAAM,EAE9EyI,CACT,CAcO,SAASjH,EACd/C,CAAgD,CAChDgD,CAAY,CACZ/R,EAAyB,CAAC,CAAC,EAE3B,IAAMgS,EAAQjD,EAASkD,YAAY,EAAI,EACjCC,EAAYnD,EAASvJ,KAAK,CAAC2M,SAAS,CAAC,EAAGH,GACxCI,EAAYrD,EAASvJ,KAAK,CAAC2M,SAAS,CAACH,GAGrCmH,EAAeC,CAFLrK,KAAAA,EAASvJ,KAAK,EAAW0M,EAAUc,KAAK,CAAC,OAAS,GAAK,IAAG,EAE3CjB,EADP/R,CAAAA,EAAQqZ,aAAa,CAAG,KAAO,EAAC,CAGxDtK,CAAAA,EAASvJ,KAAK,CAAG0M,EAAYiH,EAAe/G,EAC5C,IAAMkH,EAAWtH,EAAQmH,EAAa7I,MAAM,CAK5C,OAJAvB,EAAS0D,cAAc,CAAG6G,EAC1BvK,EAASkD,YAAY,CAAGqH,EACxBvK,EAASI,aAAa,CAAC,IAAIC,YAAY,SAAU,CAACC,QAAS,GAAMqD,WAAY,EAAK,IAClF3D,EAASlE,KAAK,GACPsO,CACT,CAUA,SAASF,EACPlK,CAAgD,CAChDvJ,CAAa,CACb+T,CAAc,CACdP,EAAY,EAAI,EAEhBjK,EAASvJ,KAAK,CAAGA,EAEbwT,IACFjK,EAAS0D,cAAc,CAAG8G,EAC1BxK,EAASkD,YAAY,CAAGsH,GAG1BxK,EAASI,aAAa,CAAC,IAAIC,YAAY,SAAU,CAACC,QAAS,GAAMqD,WAAY,EAAK,GACpF,CAoBO,SAAS8G,EAA6Bf,CAAW,CAAEgB,CAAW,EAInE,IAAMC,EAAW,IAAIjB,EAAI,CACnBkB,EAAU,IAAIC,YAGdC,EAAU,IAAIC,WAAW,GAE/B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAASpJ,MAAM,CAAEyJ,IAAK,CACxC,IAAMC,EAAON,CAAQ,CAACK,EAAE,CAClB,CAACE,QAAAA,CAAO,CAAEC,KAAAA,CAAI,CAAC,CAAGP,EAAQQ,UAAU,CAACH,EAAMH,GACjD,GAAI,CAACI,GAAW,CAACC,EACf,OAAO,GAET,IAAME,EAAOH,EAAUC,EACvB,GAAIE,IAAAA,IAIAL,EAAIN,GACNA,CAAAA,GAAOW,CAAG,EAGRL,GAAKN,GACP,KAEJ,CAEA,OAAOA,CACT,C,uEClKO,SAASY,EAAcC,CAAY,CAAEC,EAAoB,CAAC,CAAC,GAChEC,SAesCF,CAAY,EAGlD,GAAIxT,IADY2T,IAAIH,EAAMxF,OAAOC,QAAQ,CAAC2F,MAAM,EACxCA,MAAM,GAAK5F,OAAOC,QAAQ,CAAC2F,MAAM,CACvC,MAAM,MAAU,wDAEpB,EArBiCJ,GAE/B,IAAM9S,EAAuB,CAC3B,GAAG+S,EAAK/S,OAAO,CACf,wBAAyB,OACzB,mBAAoB,gBACtB,EAEA,OAAOJ,MAAMkT,EAAM,CAAC,GAAGC,CAAI,CAAE/S,QAAAA,CAAO,EACtC,CA2BO,SAASyL,EAAkBqH,CAAY,CAAEC,CAAsB,EAGpE,IAAM/S,EAAuB,CAFuB,GAAnB+S,GAAM/S,SAAW,CAAC,CAGjD,CACAC,OAAQ,mBACR,eAAgB,kBAClB,EAEM5G,EAAO0Z,GAAM1Z,KAAO6T,KAAKqB,SAAS,CAACwE,EAAK1Z,IAAI,EAAIR,KAAAA,EAEtD,OAAOga,EAAcC,EAAM,CAAC,GAAGC,CAAI,CAAE1Z,KAAAA,EAAM2G,QAAAA,CAAO,EACpD,CASO,SAASmT,EAAWL,CAAY,CAAEC,EAAoB,CAAC,CAAC,EAC7D,IAAM/S,EAAuB,CAC3B,GAAG+S,EAAK/S,OAAO,CACf,kBAAmB,MACrB,EAEA,OAAO6S,EAAcC,EAAM,CAAC,GAAGC,CAAI,CAAE/S,QAAAA,CAAO,EAC9C,CASO,SAASoT,EAAeN,CAAY,CAAEC,CAAsB,EAGjE,IAAM/S,EAAuB,CAFuB,GAAnB+S,GAAM/S,SAAW,CAAC,CAGjD,CACA,kBAAmB,MACrB,EAEA,OAAOyL,EAAkBqH,EAAM,CAAC,GAAGC,CAAI,CAAE/S,QAAAA,CAAO,EAClD,C,0ICxFO,IAAM6L,EAA2B,GAC/BlR,EAAMuL,SAAS,CACpB,WAAC7L,EAAAA,CAAGA,CAAAA,CAACC,GAAI,CAACC,QAAS,OAAQwJ,WAAY,SAAUD,IAAK,CAAC,E,UACrD,UAACzJ,EAAAA,CAAGA,CAAAA,CACFC,GAAI,CACF2J,SAAU,WACV/F,MAAO,GACPiG,OAAQ,GACR5J,QAAS,OACTwJ,WAAY,SACZrF,eAAgB,QAClB,EACA1B,cAAY,oC,SAEZ,UAACqW,EAAAA,CAAOA,CAAAA,CAACjY,KAAK,QAAQ4B,cAAY,iB,KAEpC,UAACN,EAAAA,CAAIA,CAAAA,CAACpC,GAAI,CAACkB,MAAO,YAAamB,SAAU,EAAGgB,WAAY,IAAKyG,YAAa,CAAC,E,SAvB1D,oD,MA0BnB,WAAC/J,EAAAA,CAAGA,CAAAA,CACFC,GAAI,CACF0J,aAAc,OACdC,SAAU,WACVC,GAAIvJ,EAAM2Y,OAAO,CAAG,mBAAqB,gBACzC/Y,QAAS,OACTwJ,WAAY,SACZrF,eAAgB,aAChBgF,OAAQ,YACRW,YAAa1J,EAAM2Y,OAAO,CAAG,kBAAoB,iBACjD9X,MAAOb,EAAMuL,SAAS,CAAG,YAAc,YACzC,EACAlJ,cAAY,kB,UAEZ,UAACuH,EAAAA,WAAWA,CAAAA,CAAAA,GACX5J,EAAM2Y,OAAO,CACZ,UAACjZ,EAAAA,CAAGA,CAAAA,CACFC,GAAI,CACF2J,SAAU,WACVsP,OAAQ,EACRC,MAAO,EACPC,UAAW,qBACXjY,MAAO,cACT,E,SAEA,UAACkY,EAAAA,aAAaA,CAAAA,CAACtY,KAAM,E,KAErB,K,GAKV,GAAG,CAAEyQ,EAAyBjQ,WAAW,EAApCiQ,CAAAA,EAAyBjQ,WAAW,CAAK,0BAAyB,CAAE,CAAE,KAAM,CAAC,C,oHClD3E,SAAS+X,EAAc,CAACC,SAAAA,CAAQ,CAAEC,QAAAA,CAAO,CAAQ,EACtD,GAAM,CAACC,EAAOC,EAAS,CAAG3X,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,CACjCmR,SAAUsG,EAAQtG,QAAQ,GAK5B,MAFAyG,CAAAA,EAAAA,EAAAA,CAAAA,EAAkB,IAAMH,EAAQI,MAAM,CAACF,GAAW,CAACF,EAAQ,EAGzD,UAACK,EAAAA,EAAMA,CAAAA,CAAC3G,SAAUuG,EAAMvG,QAAQ,CAAE4G,UAAWN,E,SAC1CD,C,EAGP,CAEA,GAAG,CAAED,EAAc/X,WAAW,EAAzB+X,CAAAA,EAAc/X,WAAW,CAAK,eAAc,CAAE,CAAE,KAAM,CAAC,C,qCCHrD,SAASuU,EAAa,CAC3BC,YAAAA,CAAW,CACXH,aAAAA,CAAY,CACZlE,UAAAA,CAAS,CACTsE,kBAAAA,CAAiB,CACjBE,SAAAA,CAAQ,CACRrB,cAAAA,CAAa,CACP,EAEN,IAAMkF,EAAaC,EAAAA,MAAY,GACzB/G,EAASgH,WAAWhH,MAAM,CAG3B8G,EAAWhR,OAAO,EACrBgR,CAAAA,EAAWhR,OAAO,CAAG,EAEjBmR,CAAAA,EAAAA,EAAAA,CAAAA,EAAqB,CAACjH,OAAAA,CAAM,GAD5BkH,CAAAA,EAAAA,EAAAA,EAAAA,EAAoB,CAACC,eAAgB,CAAC,CAACC,SAAU,GAAG,EAAE,EACzB,EAEnC,IAAMb,EAAUO,EAAWhR,OAAO,CAC5BuR,EAAqB1F,CAAAA,EAAAA,EAAAA,EAAAA,EAAsBC,GAIjD,MACE,UAAC0F,EAAAA,CAAaA,CAAAA,CAAC1E,QAASE,EAAaC,kBAAmBA,E,SACtD,UAACwE,EAAAA,CAAkBA,CAAAA,CAAChB,QAASA,EAASiB,OAAQ,EAAE,C,SAC9C,WAACnB,EAAaA,CAACE,QAASA,E,UACtB,UAAC9H,EAAAA,CAAW,GAAGkE,EAAatV,KAAK,CAAG,GAAIga,CAAkB,GAC1D,UAACI,EAAAA,CAAcA,CAAAA,CAACxE,SAAUA,C,SAKpC,CAEA,GAAG,CAAEJ,EAAavU,WAAW,EAAxBuU,CAAAA,EAAavU,WAAW,CAAK,cAAa,CAAE,CAAE,KAAM,CAAC,C,ucC5C1D,IAAMoZ,EAA8B,mDAE7B,2BAAejF,yBAA4BkF,YAShD,IAAcvG,MAAO,CACnB,OAAO,IAAI,CAAC5U,YAAY,CAAC,IAAI,CAAC0W,aAAa,CAC7C,CAEA,IAAY0E,kBAAmB,CAC7B,IAAM3K,EAAO,IAAI,CAAC0F,YAAY,EAAEpW,YAEhC,GAAI,CAAC0Q,EACH,MAAM,MAAU,CAAC,4CAA4C,EAAE,IAAI,CAACmE,IAAI,CAAC,CAAC,EAG5E,OAAOnE,CACT,CAEA,IAAI+F,eAAgB,CAClB,MAAO,aAAI,CAACxW,YAAY,CAAC,WAC3B,CAEAqb,mBAAoB,CAClB,IAAI,CAACC,WAAW,EAClB,CAEAC,sBAAuB,CACrB,IAAI,CAACC,IAAI,EAAEC,UACX,IAAI,CAACD,IAAI,CAAGzc,KAAAA,CACd,CAEA,MAAcuc,aAAc,CAC1B,GAAI,CAAC,IAAI,CAACI,SAAS,CAAE,MAAM,MAAU,0BACrC,IAAIC,EAAqB,CACvBC,WAAUA,EAAAA,CAAAA,CACVC,YAAWA,EAAAA,CAAAA,EAITC,EAAAA,CAAkBA,CAAC7E,SAAS,IAC9B0E,CAAAA,EAAW,MAAM,IAAI,CAACI,wBAAwB,EAAC,EAGjD,IAAM5F,EAAe/C,KAAKC,KAAK,CAAC,IAAI,CAAC+H,gBAAgB,EAC/CY,EAAe,IAAI,CAACvF,QAAQ,EAAE1W,YAC9Bkc,EAAO,MAAM,IAAI,CAAC/F,YAAY,CAACC,GAC/B+F,EAAW,UAAC3B,EAAAA,UAAgB,E,SAAE0B,C,GAMpC,GAJID,GACF,IAAI,CAACG,WAAW,CAACH,GAGf,IAAI,CAACxF,aAAa,CAAE,CAUtB,IAAM4F,EAAS,IAAI,CAACtc,aAAa,CAAC,6BAC9Bsc,GAAQ9c,SAAS4U,IAAI,CAACmI,WAAW,CAACD,GAKtC,IAAI,CAACZ,IAAI,CAAGG,EAASE,WAAW,CAAC,IAAI,CAACH,SAAS,CAAEQ,EAAU,CACzDI,mBAAoB7S,IAClB,GAAI,CAAEA,CAAAA,aAAiBrE,KAAI,EAAI,OAE/B,IAAMsM,EAAQwJ,EAA4BqB,IAAI,CAAC9S,EAAMtK,OAAO,EACtDqd,EAAYC,OAAO/K,GAAOgL,QAAQF,WAExCG,CAAAA,EAAAA,EAAAA,CAAAA,EAAU,CACRC,aAAc,wBACdC,cAAe,CACbzG,QAAS,IAAI,CAACxB,IAAI,CAClB4H,UAAAA,CACF,CACF,EACF,CACF,GAGIJ,GAEFU,oBAAoB,KAElBV,EAAOW,aAAa,EAAEC,YAAYZ,EACpC,EAEJ,MACE,IAAI,CAACZ,IAAI,CAAGG,EAASC,UAAU,CAAC,IAAI,CAACF,SAAS,EAC9C,IAAI,CAACF,IAAI,CAACyB,MAAM,CAACf,GAGnB,IAAI,CAAC5G,SAAS,CAAC4H,GAAG,CAAC,SACrB,CAEQnB,0BAA2B,CAEjC,OAAO,iDACT,CAEQI,YAAYH,CAAoB,CAAE,CACxC,GAAImB,EAAAA,CAAe,CAACnB,EAAa,CAE/B,OAAOtS,QAAQD,KAAK,CAAC,qCAAsC0T,EAAAA,CAAe,CAACnB,EAAa,EAG1F,GAAI,CACF,IAAMvS,EAAQ2J,KAAKC,KAAK,CAAC2I,GACnBoB,EAAaC,SAaO5T,CAA8B,EAC5D,GAAI,CAACA,EAAM2T,UAAU,CAAE,MAAO,GAC9B,IAAIE,EAAS,MAOb,OAAOC,EANaH,UAAU,CAAC7Y,GAAG,CAAC,IACjC,GAAM,CAACiZ,SAAUC,CAAI,CAAEC,SAAAA,CAAQ,CAAEC,OAAAA,CAAM,CAAEC,MAAAA,CAAK,CAAC,CAAGC,EAC5CjS,EAAO,CAAC,EAAE0R,EAAO,IAAI,EAAEG,EAAK,EAAE,EAAEC,EAAS,CAAC,EAAEC,EAAO,CAAC,EAAEC,EAAM,CAAC,CAAC,CAEpE,OADAN,EAAS,IACF1R,CACT,GACaoE,IAAI,CAAC,KACpB,EAvBgDvG,GAE1CC,QAAQD,KAAK,CAAC,0BAA2B,CAAC,EAAEA,EAAMuK,IAAI,CAAC,EAAE,EAAEvK,EAAMvF,KAAK,CAAC;AAAE,CAAC,CAAEuF,EAAO2T,EACrF,CAAE,KAAM,CAKN1T,QAAQD,KAAK,CAAC,0BAA2BuS,EAAc,0BACzD,CACF,CACF,E,GAjIG/Y,EAAAA,EAAMA,C,CADagT,iBAAAA,SAAAA,CAAAA,eAAAA,KAAAA,G,GAEnBhT,EAAAA,EAAMA,C,CAFagT,iBAAAA,SAAAA,CAAAA,WAAAA,KAAAA,G,GAGnBhT,EAAAA,EAAMA,C,CAHagT,iBAAAA,SAAAA,CAAAA,YAAAA,KAAAA,GAgJtB,GAAG,CAAEiF,EAA4BpZ,WAAW,EAAvCoZ,CAAAA,EAA4BpZ,WAAW,CAAK,6BAA4B,CAAE,CAAE,KAAM,CAAC,C","sources":["ui/packages/aria-live/aria-live.ts","ui/packages/copilot-summary-banner/constants.ts","ui/packages/copilot-summary-banner/CopilotSummaryFeedback.tsx","ui/packages/copilot-summary-banner/CopilotFeedbackDialog.tsx","ui/packages/copilot-summary-banner/utils.ts","ui/packages/copilot-summary-banner/CopilotFeedbackBanner.tsx","ui/packages/copilot-summary-banner/CopilotIsLoadingWarningDialog.tsx","ui/packages/copilot-summary-banner/CopilotSummaryErrorBanner.tsx","ui/packages/copilot-summary-banner/copilot-summary-result-comparator.ts","ui/packages/copilot-summary-banner/CopilotSummaryBanner.tsx","ui/packages/copilot-summary-banner/copilot-summary-banner.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/react-core/deferred-registry.ts","ui/packages/react-core/react-partial-anchor.ts","ui/packages/react-core/react-partial-registry.ts","ui/packages/react-core/ReactPartialElement.tsx","ui/packages/react-core/register-partial.ts","ui/packages/react-profiling-mode/src/index.ts","ui/packages/test-id-props/test-id-props.ts","ui/packages/text/text.ts","ui/packages/verified-fetch/verified-fetch.ts","ui/packages/copilot-progress-indicator/CopilotProgressIndicator.tsx","ui/packages/react-core/PartialRouter.tsx","ui/packages/react-core/PartialEntry.tsx","ui/packages/react-core/ReactBaseElement.tsx"],"sourcesContent":["import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {\n  announce as liveRegionAnnounce,\n  announceFromElement as liveRegionAnnounceFromElement,\n} from '@primer/live-region-element'\n\nexport interface ElementWithAriaNotify extends Element {\n  ariaNotify: (\n    message: string,\n    options?: {interrupt?: 'none' | 'pending' | 'all'; priority?: 'none' | 'important'},\n  ) => void\n}\n\n/**\n * Troubleshooting guide for aria-live regions available on the Hub\n * - https://thehub.github.com/epd/engineering/dev-practicals/frontend/accessibility/readiness-routine/screenreaders/live-regions-and-focus-management-techniques/#why-isnt-my-live-region-working-as-i-expect\n */\n\n// Announce an element's text to the screen reader.\nexport function announceFromElement(el: HTMLElement, options?: {assertive?: boolean; element?: HTMLElement}) {\n  if (isFeatureEnabled('arianotify_comprehensive_migration')) {\n    announce(getTextContent(el), {...options, element: options?.element ?? el})\n  } else if (isFeatureEnabled('primer_live_region_element') && options?.element === undefined) {\n    liveRegionAnnounceFromElement(el, {\n      politeness: options?.assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    announce(getTextContent(el), options)\n  }\n}\n\n// Announce message update to screen reader.\n// Note: Use caution when using this function while a dialog is active.\n// If the message is updated while the dialog is open, the screen reader may not announce the live region.\n// For more information, view the document on dialog and live region support: https://github.com/github/accessibility/blob/main/docs/dialog-live-region-support.md\nexport function announce(message: string, options?: {assertive?: boolean; element?: HTMLElement}) {\n  const {assertive, element} = options ?? {}\n\n  if (isFeatureEnabled('arianotify_comprehensive_migration') && 'ariaNotify' in Element.prototype) {\n    ;((element || document.body) as Element as ElementWithAriaNotify).ariaNotify(message, {\n      interrupt: options?.assertive ? 'all' : 'none',\n    })\n  } else if (isFeatureEnabled('primer_live_region_element') && element === undefined) {\n    liveRegionAnnounce(message, {\n      politeness: assertive ? 'assertive' : 'polite',\n    })\n  } else {\n    setContainerContent(message, assertive, element)\n  }\n}\n\n// Set aria-live container to message.\nfunction setContainerContent(message: string, assertive?: boolean, element?: HTMLElement) {\n  const getQuerySelector = () => {\n    return assertive ? '#js-global-screen-reader-notice-assertive' : '#js-global-screen-reader-notice'\n  }\n  const container = element ?? ssrSafeDocument?.querySelector(getQuerySelector())\n  if (!container) return\n  if (container.textContent === message) {\n    /* This is a hack due to the way the aria live API works.\n    A screen reader will not read a live region again\n    if the text is the same. Adding a space character tells\n    the browser that the live region has updated,\n    which will cause it to read again, but with no audible difference. */\n    container.textContent = `${message}\\u00A0`\n  } else {\n    container.textContent = message\n  }\n}\n\n// Gets the trimmed text content of an element.\nfunction getTextContent(el: HTMLElement): string {\n  // innerText does not contain hidden text\n  /* eslint-disable-next-line github/no-innerText */\n  return (el.getAttribute('aria-label') || el.innerText || '').trim()\n}\n","export const INIT_EVENT = 'copilot-pr-summary:init'\nexport const END_EVENT = 'copilot-pr-summary:end'\nexport const TEXT_COMPLETION_SUGGESTION_EVENT = 'copilot-text-completion:suggestion'\n","import {ThumbsdownIcon, ThumbsupIcon} from '@primer/octicons-react'\nimport {Box, IconButton, Tooltip} from '@primer/react'\nimport {testIdProps} from '@github-ui/test-id-props'\n\nexport interface CopilotSummaryFeedbackProps {\n  onClick: (feedback: 'positive' | 'negative') => void\n  useCase: 'summary' | 'text completion' | 'summary or text completion'\n}\n\nexport const CopilotSummaryFeedback = (props: CopilotSummaryFeedbackProps) => {\n  return (\n    <Box sx={{display: 'flex'}}>\n      <Tooltip id=\"copilot-summary-good-response\" aria-label={`Good ${props.useCase}`} direction=\"ne\" noDelay>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          className=\"copilot-summary-feedback-icon\"\n          aria-label={`Good ${props.useCase} response`}\n          icon={ThumbsupIcon}\n          size=\"small\"\n          variant=\"invisible\"\n          onClick={() => props.onClick('positive')}\n          sx={{svg: {color: 'fg.muted', margin: 0}}}\n          {...testIdProps('summary-good-response-button')}\n        />\n      </Tooltip>\n      <Tooltip id=\"copilot-summary-bad-response\" aria-label={`Bad ${props.useCase}`} noDelay>\n        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n        <IconButton\n          unsafeDisableTooltip={true}\n          className=\"copilot-summary-feedback-icon\"\n          aria-label={`Bad ${props.useCase} response`}\n          icon={ThumbsdownIcon}\n          size=\"small\"\n          variant=\"invisible\"\n          onClick={() => props.onClick('negative')}\n          sx={{svg: {color: 'fg.muted', margin: 0}}}\n          {...testIdProps('summary-bad-response-button')}\n        />\n      </Tooltip>\n    </Box>\n  )\n}\n\ntry{ CopilotSummaryFeedback.displayName ||= 'CopilotSummaryFeedback' } catch {}","import {useState} from 'react'\nimport {Box, Button, Checkbox, Dialog, FormControl, Link, Text, Textarea, Select} from '@primer/react'\nimport {testIdProps} from '@github-ui/test-id-props'\nimport type {ClassificationOptions} from './utils'\n\nexport interface CopilotFeedbackDialogProps {\n  onSubmitFeedback: (feedbackText: string, canContact: boolean, classification: string) => void\n  onCancel: () => void\n  isOpen: boolean\n  classificationOptions: ClassificationOptions\n}\n\nexport const CopilotFeedbackDialog = ({\n  onCancel,\n  onSubmitFeedback,\n  isOpen,\n  classificationOptions,\n}: CopilotFeedbackDialogProps) => {\n  const [feedbackText, setFeedbackText] = useState('')\n  const [canContact, setCanContact] = useState(false)\n  const [classification, setClassification] = useState('0')\n  const headerMessage = 'Give feedback'\n  const privacyStatementHref = 'https://docs.github.com/site-policy/privacy-policies/github-privacy-statement'\n  const disclosure = (\n    <Text sx={{fontSize: 'small', color: 'fg.muted'}}>\n      Pull request description content generated by Copilot will be included in this feedback report. For more\n      information, please view our{' '}\n      <Link inline href={privacyStatementHref} target=\"_blank\" data-testid=\"copilot-privacy-statement-link\">\n        privacy statement\n      </Link>\n      .\n    </Text>\n  )\n  const feedbackPrompt = 'Details'\n  const contactPrompt = 'I am open to a GitHub team member following up on my feedback'\n\n  const onClickSubmitFeedback = (e: React.SyntheticEvent<EventTarget>) => {\n    e.preventDefault()\n\n    if (feedbackText.trim()) {\n      onCancel()\n      onSubmitFeedback(feedbackText, canContact, classification)\n    }\n  }\n\n  return (\n    <Dialog\n      aria-label=\"Provide additional feedback on this Copilot PR Summary\"\n      isOpen={isOpen}\n      onDismiss={onCancel}\n      sx={{overflowY: 'auto'}}\n      {...testIdProps('copilot-feedback-dialog')}\n    >\n      <Dialog.Header>{headerMessage}</Dialog.Header>\n      <Box sx={{display: 'flex', flexDirection: 'column', padding: 3}}>\n        <div key={`q-1`}>\n          <FormControl sx={{pb: 3}}>\n            <FormControl.Label sx={{fontWeight: 'bold'}}>What happened?</FormControl.Label>\n            <Select\n              onChange={e => setClassification(e.currentTarget.value)}\n              placeholder=\"Select...\"\n              size=\"large\"\n              sx={{width: '100%'}}\n            >\n              {Object.entries(classificationOptions).map(([value, description]) => (\n                <Select.Option key={value} value={value}>\n                  {description}\n                </Select.Option>\n              ))}\n            </Select>\n          </FormControl>\n\n          <FormControl sx={{pb: 3}}>\n            <FormControl.Label sx={{fontWeight: 'bold'}}>{feedbackPrompt}</FormControl.Label>\n            <Textarea\n              rows={4}\n              sx={{width: '100%'}}\n              onChange={e => setFeedbackText(e.currentTarget.value)}\n              {...testIdProps('submit-feedback-input')}\n            />\n          </FormControl>\n          <Box sx={{display: 'flex', flexDirection: 'row', justifyContent: 'flex-start', pb: 3}}>\n            <FormControl>\n              <Checkbox checked={canContact} onChange={e => setCanContact(e.target.checked)} />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>{contactPrompt}</FormControl.Label>\n            </FormControl>\n          </Box>\n        </div>\n        <Box sx={{pb: 3}}>{disclosure}</Box>\n        <Box sx={{display: 'flex', flexDirection: 'row', justifyContent: 'flex-end'}}>\n          <Button onClick={onCancel}>Cancel</Button>\n          <Button\n            disabled={!feedbackText.trim()}\n            variant=\"primary\"\n            onClick={onClickSubmitFeedback}\n            sx={{ml: 2}}\n            {...testIdProps('submit-feedback-button')}\n          >\n            Submit feedback\n          </Button>\n        </Box>\n      </Box>\n    </Dialog>\n  )\n}\n\ntry{ CopilotFeedbackDialog.displayName ||= 'CopilotFeedbackDialog' } catch {}","export class UIError extends Error {\n  constructor(message: string) {\n    super(message)\n  }\n}\n\nexport function fetchPoll(\n  url: RequestInfo,\n  options?: RequestInit,\n  timeBetweenRequests = 1000,\n  acceptedStatusCodes = [200],\n): Promise<Response> {\n  return (async function poll(wait: number): Promise<Response> {\n    const request = new Request(url, options)\n    request.headers.append('X-Requested-With', 'XMLHttpRequest')\n    const response = await self.fetch(request)\n    const unexpectedError = new Error(`Unexpected ${response.status} response status from poll endpoint`)\n\n    if (response.status === 202) {\n      await new Promise(resolve => setTimeout(resolve, wait))\n      return poll(wait * 1.2)\n    }\n    if (response.status === 500) {\n      const payload = await response.json()\n\n      if (payload.job.error_message) {\n        throw new UIError(payload.job.error_message)\n      } else {\n        throw unexpectedError\n      }\n    }\n    if (acceptedStatusCodes.includes(response.status)) {\n      return response\n    }\n    throw unexpectedError\n  })(timeBetweenRequests)\n}\n\nexport interface CompletionData {\n  completion: string | null\n  jobId: string | null\n  sessionId: string | null\n  feedbackUrl: string\n  feedbackAuthToken: string\n}\n\nexport interface ClassificationOptions {\n  [key: string]: string\n}\n\nexport async function requestSummary(\n  event: Event,\n  url: string,\n  authenticityToken: string,\n  base_revision: string,\n  head_revision: string,\n  head_repo_id: string,\n): Promise<CompletionData> {\n  const response = await fetch(url, {\n    method: 'POST',\n    body: new URLSearchParams({authenticity_token: authenticityToken, base_revision, head_revision, head_repo_id}),\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  const data = await response.json()\n  const jobUrl = data.job.url\n  const feedbackUrl = data.job.feedback_url\n  const feedbackAuthToken = data.job.feedback_auth_token\n  const jobResponse = await fetchPoll(jobUrl, {}, 2000) // 2, 2.4, 2.8, 3.5, 4.1, 4.9\n  const jobData = await jobResponse.json()\n  const jobId = jobData.job.id\n  const {completion} = jobData.job.context\n\n  return {completion, jobId, feedbackUrl, feedbackAuthToken, sessionId: null}\n}\n\nexport interface Feedback {\n  sentiment?: string\n  body?: string\n  contact?: boolean\n  classification?: string\n}\n\nexport async function sendFeedback(feedbackUrl: string, authenticityToken: string, feedback: Feedback) {\n  const body = new URLSearchParams({\n    _method: 'put',\n    authenticity_token: authenticityToken,\n  })\n  feedback.sentiment && body.set('feedback[sentiment]', feedback.sentiment)\n  feedback.body && body.set('feedback[body]', feedback.body)\n  feedback.contact && body.set('feedback[contact]', feedback.contact ? '1' : '0')\n  feedback.classification && body.set('feedback[classification]', feedback.classification)\n\n  await fetch(feedbackUrl, {\n    method: 'POST',\n    body,\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n\n// This was pulled from SlashCommandToolbarButtonElement and is duplicated in a few other spots\n// Good candidate for being pulled out into a ui-systems component.\nexport function insertText(textarea: HTMLTextAreaElement, text: string) {\n  textarea.focus()\n\n  // similar to the `insertText` utility behavior, but with different cursor positioning\n  const point = textarea.selectionEnd || 0\n  const value = textarea.value\n  const beginning = value.substring(0, point)\n  const remaining = value.substring(point)\n\n  let adjText = text\n  let cursorPosition = point + text.length + 1 // place cursor after the inserted text\n\n  if (beginning) {\n    if (value[point - 1] === '\\n') {\n      cursorPosition -= 1 // we're on a newline so we don't need an extra position\n    } else {\n      adjText = `\\n${adjText}`\n    }\n  }\n\n  let execCommandSucceeded = false\n  try {\n    execCommandSucceeded = document.execCommand('insertText', false, adjText)\n  } catch (e) {\n    execCommandSucceeded = false\n  }\n\n  if (!execCommandSucceeded) {\n    textarea.value = beginning + adjText + remaining\n  }\n\n  textarea.selectionStart = cursorPosition\n  textarea.selectionEnd = cursorPosition\n\n  textarea.dispatchEvent(\n    new CustomEvent('input', {\n      bubbles: true,\n      cancelable: true,\n    }),\n  )\n}\n","import {useId, useMemo, useRef, useState} from 'react'\nimport {CopilotIcon} from '@primer/octicons-react'\nimport {Box, Button, Flash, Octicon, Text} from '@primer/react'\nimport {CopilotSummaryFeedback} from './CopilotSummaryFeedback'\nimport {CopilotFeedbackDialog} from './CopilotFeedbackDialog'\nimport type {ClassificationOptions, Feedback} from './utils'\nimport {sendFeedback as defaultSendFeedback} from './utils'\n\ninterface CopilotFeedbackBannerProps {\n  feedbackUrl: string\n  feedbackAuthToken: string\n  jobId?: string | null\n  sessionId?: string | null\n  classificationOptions: ClassificationOptions\n  sendFeedback?: (feedbackUrl: string, authenticityToken: string, feedback: Feedback) => Promise<void>\n}\n\nexport function CopilotFeedbackBanner({\n  feedbackUrl,\n  feedbackAuthToken,\n  jobId,\n  sessionId,\n  classificationOptions,\n  sendFeedback = defaultSendFeedback,\n}: CopilotFeedbackBannerProps) {\n  const [feedbackCollected, setFeedbackCollected] = useState(false)\n  const [showAdditionalFeedback, setShowAdditionalFeedback] = useState(true)\n  const [openFeedbackDialogue, setOpenFeedbackDialogue] = useState(false)\n  const textContent = useMemo(() => {\n    return feedbackCollected ? 'Thank you!' : 'How did Copilot perform?'\n  }, [feedbackCollected])\n  const additionalFeedbackText = 'Give additional feedback'\n  const feedbackMessageId = useId()\n  const useCase = sessionId ? (jobId ? 'summary or text completion' : 'text completion') : 'summary'\n  const additionalFeedbackRef = useRef<HTMLButtonElement>(null)\n\n  return (\n    <>\n      <CopilotFeedbackDialog\n        isOpen={openFeedbackDialogue}\n        onCancel={() => {\n          setOpenFeedbackDialogue(false)\n          additionalFeedbackRef.current?.focus()\n        }}\n        onSubmitFeedback={async (feedbackText, canContact, classification) => {\n          setOpenFeedbackDialogue(false)\n          setFeedbackCollected(true)\n          setShowAdditionalFeedback(false)\n          document.getElementById('pull_request_body')?.focus()\n\n          try {\n            await sendFeedback(feedbackUrl, feedbackAuthToken, {\n              body: feedbackText,\n              contact: canContact,\n              classification,\n            })\n          } catch (error) {\n            // eslint-disable-next-line no-console\n            console.error(error)\n            setFeedbackCollected(false)\n            setShowAdditionalFeedback(true)\n          }\n        }}\n        classificationOptions={classificationOptions}\n      />\n      <Flash\n        sx={{border: 'none', backgroundColor: 'transparent', padding: 0}}\n        data-testid=\"copilot-feedback-banner\"\n        variant=\"default\"\n        role=\"group\"\n        aria-labelledby={`copilot-feedback-message-${feedbackMessageId}`}\n      >\n        <Box sx={{display: 'flex', gap: 2, alignItems: 'center'}}>\n          <Box\n            sx={{\n              borderRadius: '100%',\n              position: 'relative',\n              bg: 'canvas.subtle',\n              width: 24,\n              height: 24,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              paddingLeft: '8px',\n              border: '1px solid',\n              borderColor: 'border.default',\n            }}\n          >\n            <Octicon icon={CopilotIcon} size={12} sx={{fill: 'fg.muted'}} />\n          </Box>\n          <Text\n            sx={{color: 'fg.muted', fontSize: 0}}\n            id={`copilot-feedback-message-${feedbackMessageId}`}\n            data-testid=\"copilot-feedback-message\"\n          >\n            {textContent}\n          </Text>\n          {feedbackCollected && showAdditionalFeedback && (\n            <div>\n              <Button\n                onClick={() => {\n                  setOpenFeedbackDialogue(true)\n                }}\n                variant=\"invisible\"\n                size=\"small\"\n                ref={additionalFeedbackRef}\n              >\n                {additionalFeedbackText}\n              </Button>\n            </div>\n          )}\n          {!feedbackCollected && (\n            <Box sx={{paddingLeft: 1}}>\n              <CopilotSummaryFeedback\n                onClick={async sentiment => {\n                  setFeedbackCollected(true)\n                  try {\n                    await sendFeedback(feedbackUrl, feedbackAuthToken, {sentiment})\n                    additionalFeedbackRef.current?.focus()\n                  } catch (error) {\n                    // eslint-disable-next-line no-console\n                    console.error(error)\n                    setFeedbackCollected(false)\n                  }\n                }}\n                useCase={useCase}\n              />\n            </Box>\n          )}\n        </Box>\n      </Flash>\n    </>\n  )\n}\n\ntry{ CopilotFeedbackBanner.displayName ||= 'CopilotFeedbackBanner' } catch {}","import {Box, Button, Dialog} from '@primer/react'\nimport {testIdProps} from '@github-ui/test-id-props'\n\nexport interface CopilotIsLoadingWarningDialogProps {\n  isOpen: boolean\n  onCancel: () => void\n  onDiscard: () => void\n  returnFocusRef: React.RefObject<HTMLElement>\n}\n\nexport const CopilotIsLoadingWarningDialog = (props: CopilotIsLoadingWarningDialogProps) => {\n  return (\n    <Dialog\n      className=\"copilot-is-loading-warning-dialog\"\n      isOpen={props.isOpen}\n      onDismiss={props.onCancel}\n      returnFocusRef={props.returnFocusRef}\n      aria-label=\"Summary not complete\"\n      {...testIdProps('copilot-is-loading-warning-dialog')}\n    >\n      <Dialog.Header>Summary not complete</Dialog.Header>\n\n      <Box sx={{p: 3}}>\n        Copilot is not done generating a summary. Are you sure you want to discard?\n        <Box sx={{display: 'flex', mt: 3, justifyContent: 'flex-end'}}>\n          <Button sx={{mr: 1}} onClick={props.onCancel} {...testIdProps('dialog-cancel-btn')}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={props.onDiscard} {...testIdProps('dialog-discard-btn')}>\n            Save and discard\n          </Button>\n        </Box>\n      </Box>\n    </Dialog>\n  )\n}\n\ntry{ CopilotIsLoadingWarningDialog.displayName ||= 'CopilotIsLoadingWarningDialog' } catch {}","import {CopilotErrorIcon, CopilotWarningIcon} from '@primer/octicons-react'\nimport {Box, Flash, Text} from '@primer/react'\n\nexport interface CopilotSummaryErrorBannerProps {\n  bannerMessage: string\n  isServerError: boolean\n}\n\nexport function CopilotSummaryErrorBanner({bannerMessage, isServerError}: CopilotSummaryErrorBannerProps) {\n  return (\n    <Flash\n      sx={{border: 'none', backgroundColor: 'transparent', padding: 0, paddingLeft: 1}}\n      data-testid=\"copilot-summary-error-banner\"\n      variant=\"danger\"\n    >\n      <Box sx={{display: 'flex', alignItems: 'center', gap: 1}}>\n        <Box\n          sx={{\n            borderRadius: '100%',\n            position: 'relative',\n            bg: 'danger.subtle',\n            width: 24,\n            height: 24,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingLeft: 2,\n            border: '1px solid',\n            borderColor: 'danger.fg',\n          }}\n          data-testid=\"copilot-summary-error-banner-icon\"\n        >\n          {isServerError ? <CopilotErrorIcon size={12} /> : <CopilotWarningIcon size={12} />}\n        </Box>\n        <Text\n          sx={{color: 'danger.fg', fontSize: 0, fontWeight: 500, paddingLeft: 1}}\n          data-testid=\"copilot-summary-error-banner-message\"\n        >\n          {bannerMessage}\n        </Text>\n      </Box>\n    </Flash>\n  )\n}\n\ntry{ CopilotSummaryErrorBanner.displayName ||= 'CopilotSummaryErrorBanner' } catch {}","import {distance, closest} from 'fastest-levenshtein'\n\nexport function prepStringsForComparison(strings: string) {\n  // split the paragraph into an array of strings delimited by \\n\n  // for each string be sure to strip any trailing whitespace\n  // remove any empty strings\n  return strings\n    .split('\\n')\n    .filter(Boolean)\n    .map(line => line.trim())\n}\n\n// This function returns a number representing the similarity of two arrays of strings.\n// For example, a return value of `100` means all of the generatedSummary array is in the\n// bodyLines array, a return value of `50` means half of the generatedSummary array is\n// in the bodyLines array, and a return value of `0` means none of the generatedSummary\n// array is in the bodyLines array. A result of `0` is very unlikely because if the lines\n// are different, this function calculates how similar they are at the character level\n// to try and represent lines that might have started the same but were later edited by\n// the user.\nexport function comparator(bodyLines: string[], generatedSummary: string[]) {\n  // get the overall length of generated_summary\n  const generatedSummaryLength = generatedSummary.length\n  let matches = 0\n  let matchPercentage = 0\n  const remainingLines: string[] = [...generatedSummary]\n  // if the line of generatedSummarry matches any line in\n  // bodyLines, then increment matches\n  // and remove the line from bodyLines and generatedSummary\n  for (const line of generatedSummary) {\n    if (bodyLines.length === 0) {\n      break\n    }\n    for (const bLine of bodyLines) {\n      if (bLine.includes(line)) {\n        matches++\n        bodyLines.splice(bodyLines.indexOf(bLine), 1)\n        remainingLines.splice(remainingLines.indexOf(line), 1)\n        // if we have a match, we can break out of the inner loop\n        break\n      }\n    }\n  }\n\n  if (matches === generatedSummaryLength) {\n    return 100\n  } else {\n    // if there are any remaining lines in bodyLines\n    // and any lines in remainingLines then\n    // compare the remaining lines in bodyLines to\n    // the remaining lines in remainingLines\n    // using levenshtein\n    matchPercentage = matches / generatedSummaryLength\n    const weight = 1 / generatedSummaryLength\n    const remainingLinesLength = remainingLines.length\n    let levPercentage = 0\n    const unmatched: string[] = [...remainingLines]\n    if (bodyLines.length > 0 && remainingLinesLength > 0) {\n      for (const line of remainingLines) {\n        if (bodyLines.length === 0) {\n          break\n        }\n        for (const bLine of bodyLines) {\n          if (line.slice(0, 10) === bLine.slice(0, 10) || line.slice(-10) === bLine.slice(-10)) {\n            const levDistance = distance(line, bLine)\n            const variance = levDistance / line.length\n            if (variance > 1) {\n              // this means that the text has changed so much that it is not discernable as a match\n              continue\n            }\n            // if the string is less than 705 similar continue to the next\n            const pct = 1 - variance\n            if (pct <= 0.7) {\n              continue\n            } else {\n              levPercentage += pct * weight\n              bodyLines.splice(bodyLines.indexOf(bLine), 1)\n              unmatched.splice(unmatched.indexOf(line), 1)\n              break\n            }\n          }\n        }\n      }\n    }\n\n    // get a levenshtein distance from all remaining lines\n    if (bodyLines.length > 0 && unmatched.length > 0) {\n      for (const line of unmatched) {\n        if (bodyLines.length === 0) {\n          break\n        }\n        const potentialMatch = closest(line, bodyLines)\n        if (potentialMatch === null) {\n          continue\n        }\n        const levDistance = distance(line, potentialMatch)\n        const variance = levDistance / line.length\n        if (variance > 1) {\n          // this means that the text has changed so much that it is not discernable as a match\n          continue\n        }\n        const pct = 1 - variance\n        // identify the percentage change based on the distance and line.length as floats\n        levPercentage += pct * weight\n        bodyLines.splice(bodyLines.indexOf(potentialMatch), 1)\n      }\n    }\n\n    matchPercentage += levPercentage\n\n    if (matchPercentage === 0) {\n      const summary = generatedSummary.join('\\n')\n      const levDistance = distance(bodyLines.join('\\n'), summary)\n      const variance = levDistance / summary.length\n      if (variance > 1) {\n        // this means that the text has changed so much that it is not discernable as a match\n        return 0\n      }\n      matchPercentage = 1 - variance\n    }\n\n    return matchPercentage * 100\n  }\n}\n","import {useCallback, useEffect, useRef, useState} from 'react'\nimport {CopilotProgressIndicator} from '@github-ui/copilot-progress-indicator'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {replaceText} from '@github-ui/text'\nimport {CopilotFeedbackBanner} from './CopilotFeedbackBanner'\nimport {CopilotIsLoadingWarningDialog} from './CopilotIsLoadingWarningDialog'\nimport {CopilotSummaryErrorBanner} from './CopilotSummaryErrorBanner'\nimport type {ClassificationOptions, CompletionData} from './utils'\nimport {INIT_EVENT, END_EVENT, TEXT_COMPLETION_SUGGESTION_EVENT} from './constants'\nimport {insertText, requestSummary as defaultRequestSummary, UIError} from './utils'\nimport {testIdProps} from '@github-ui/test-id-props'\nimport {prepStringsForComparison, comparator} from './copilot-summary-result-comparator'\nimport {announce} from '@github-ui/aria-live'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\n\nconst defaultErrorMessage = 'Copilot encountered a temporary error.'\n\ntype CopilotAction = 'all' | 'summary' | 'outline'\n\ninterface CopilotSummaryBannerProps {\n  url: string\n  baseRevision: string\n  headRevision: string\n  headRepoId: string\n  userFeedbackOptIn: boolean\n  classificationOptions: ClassificationOptions\n  requestSummary: (\n    event: Event,\n    url: string,\n    authenticityToken: string,\n    baseRevision: string,\n    headRevision: string,\n    headRepoId: string,\n  ) => Promise<CompletionData>\n}\n\nfunction getReplacementText(text: string, action: CopilotAction) {\n  // Divide the returned completion into the summary and the outline\n  const completion = text.trim()\n  const indexOfBreak = completion.indexOf('\\n\\n')\n  let summary = completion\n  let outline = completion\n\n  // Check if a newline character was found\n  if (indexOfBreak !== -1) {\n    summary = completion.slice(0, indexOfBreak)\n    outline = completion.slice(indexOfBreak + 2)\n  }\n\n  return action === 'summary' ? summary : action === 'outline' ? outline : completion\n}\n\nexport function CopilotSummaryBanner({\n  url,\n  baseRevision,\n  headRevision,\n  headRepoId,\n  userFeedbackOptIn,\n  classificationOptions,\n  requestSummary = defaultRequestSummary,\n}: CopilotSummaryBannerProps) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [errorMessage, setErrorMessage] = useState<string | undefined>(undefined)\n  const [completionData, setCompletionData] = useState<CompletionData | undefined>(undefined)\n  const [warningDialogOpen, setWarningDialogOpen] = useState(false)\n  const [forceSubmit, setForceSubmit] = useState(false)\n  const [completionReplacementDeferred, setCompletionReplacementDeferred] = useState(false)\n  const actionRef = useRef<CopilotAction>('all')\n  const placeholderRef = useRef('')\n  const replacementRef = useRef('')\n  const boxRef = useRef<HTMLDivElement>(null)\n  const returnFocusRef = useRef<HTMLElement | null>(null)\n  const splitActionsEnabled = isFeatureEnabled('copilot_split_actions_enabled')\n\n  const replacePlaceholder = useCallback((replacement: string) => {\n    setIsLoading(false)\n\n    const form = boxRef.current?.closest('form')\n    const textarea = form?.querySelector('textarea')\n    if (!textarea) return\n\n    replaceText(textarea, placeholderRef.current, replacement, document.activeElement === textarea)\n    boxRef.current!.dispatchEvent(new CustomEvent(END_EVENT, {bubbles: true}))\n  }, [])\n\n  const warningDialogCancelled = useCallback(() => {\n    setForceSubmit(false)\n    setWarningDialogOpen(false)\n    if (returnFocusRef.current !== null) {\n      returnFocusRef.current.focus()\n      returnFocusRef.current = null\n    }\n\n    if (completionReplacementDeferred && replacementRef.current) {\n      replacePlaceholder(replacementRef.current)\n      setCompletionReplacementDeferred(false)\n    }\n\n    // Re-enable submit button if auto-disabled\n    const form = boxRef.current?.closest('form')\n    const button = form?.querySelector('[data-disable-with][disabled]')\n    if (button) {\n      button.removeAttribute('disabled')\n    }\n  }, [completionReplacementDeferred, replacePlaceholder])\n\n  const warningDialogDiscarded = useCallback(() => {\n    setForceSubmit(true)\n    setWarningDialogOpen(false)\n    if (returnFocusRef.current !== null) {\n      returnFocusRef.current.focus()\n      returnFocusRef.current = null\n    }\n\n    replacePlaceholder('')\n\n    const form = boxRef.current?.closest('form')\n    if (form) {\n      form.submit()\n    }\n  }, [setForceSubmit, setWarningDialogOpen, replacePlaceholder, boxRef])\n\n  useEffect(() => {\n    const form = boxRef.current?.closest('form')\n    if (!form) return\n\n    const handleEarlySubmit = (event: SubmitEvent) => {\n      if (isLoading && !forceSubmit) {\n        event.preventDefault()\n\n        setWarningDialogOpen(true)\n        returnFocusRef.current = document.activeElement as HTMLElement\n      }\n    }\n\n    form.addEventListener('submit', handleEarlySubmit)\n    return () => {\n      form.removeEventListener('submit', handleEarlySubmit)\n    }\n  }, [boxRef, isLoading, forceSubmit])\n\n  useEffect(() => {\n    const form = boxRef.current?.closest('form')\n    if (completionData === undefined || !form) return\n    if (completionReplacementDeferred) return // completion was never inserted\n    const generateComparison = () => {\n      const summary = replacementRef.current\n      if (!summary) return\n\n      // need to get the text body that is being saved.\n      const body = form.querySelector<HTMLTextAreaElement>('textarea')\n      if (!body) return\n\n      // split the body into an array of strings separated by `\\n`\n      // remove any empty strings\n      const bodyLines = prepStringsForComparison(body.value)\n      const generatedSummary = prepStringsForComparison(summary)\n      const matchPercentage = comparator(bodyLines, generatedSummary)\n      sendEvent('copilot.pr_summary.change_percentage', {\n        match_percentage: matchPercentage,\n        repo_id: headRepoId,\n        action: actionRef.current,\n      })\n    }\n\n    form.addEventListener('submit', generateComparison)\n    return () => {\n      form.removeEventListener('submit', generateComparison)\n    }\n  }, [completionData, headRepoId, completionReplacementDeferred])\n\n  useEffect(() => {\n    const form = boxRef.current?.closest('form')\n    const textarea = form?.querySelector('textarea')\n    const container = boxRef.current?.closest('.js-copilot-summary-banner-container')\n    const token = container?.querySelector<HTMLInputElement>('[data-csrf=true]')?.value\n    if (!form || !container || !token) return\n\n    const handleEvent = async (event: Event) => {\n      const {action} = (event as CustomEvent<{action: CopilotAction}>).detail\n\n      // Check the event type to determine the type of request to send, summary or outline\n      if (splitActionsEnabled && action === 'outline') {\n        announce('Copilot is generating an outline')\n        placeholderRef.current = '[Copilot is generating an outline...]'\n      } else {\n        announce('Copilot is generating a summary')\n        placeholderRef.current = '[Copilot is generating a summary...]'\n      }\n\n      if (textarea) insertText(textarea, placeholderRef.current)\n\n      setIsLoading(true)\n      setErrorMessage(undefined)\n\n      try {\n        const returnedCompletionData = await requestSummary(event, url, token, baseRevision, headRevision, headRepoId)\n        if (completionData && completionData.sessionId) {\n          // Preserve associated text completion session\n          returnedCompletionData.feedbackUrl += `?session_id=${completionData.sessionId}`\n          returnedCompletionData.sessionId = completionData.sessionId\n        }\n        setCompletionData(returnedCompletionData)\n\n        actionRef.current = action\n        replacementRef.current = getReplacementText(returnedCompletionData.completion || '', action)\n\n        // Ideally we'd rely on warningDialogOpen instead of inspecting the DOM\n        // but it will be out of date if opened while waiting on requestSummary above.\n        const dialog = document.querySelector('.copilot-is-loading-warning-dialog')\n        if (returnedCompletionData && !dialog) {\n          announce('Copilot summary complete')\n          replacePlaceholder(replacementRef.current)\n        } else {\n          setCompletionReplacementDeferred(true)\n        }\n      } catch (error) {\n        replacePlaceholder('')\n        announce('Copilot summary error')\n\n        // eslint-disable-next-line no-console\n        console.error(error)\n        if (error instanceof UIError) {\n          setErrorMessage(error.message)\n        } else {\n          setErrorMessage(defaultErrorMessage)\n        }\n      }\n    }\n\n    form.addEventListener(INIT_EVENT, handleEvent)\n    return () => {\n      form.removeEventListener(INIT_EVENT, handleEvent)\n    }\n  }, [\n    url,\n    baseRevision,\n    headRevision,\n    headRepoId,\n    requestSummary,\n    replacePlaceholder,\n    splitActionsEnabled,\n    completionData,\n  ])\n\n  useEffect(() => {\n    const form = boxRef.current?.closest('form')\n    const container = boxRef.current?.closest('.js-copilot-summary-banner-container')\n    const token = container?.querySelector<HTMLInputElement>('[data-csrf=true]')?.value\n    if (!form || !container || !token) return\n\n    const handleEvent = async () => {\n      setErrorMessage(undefined)\n      // Point to the feedback URL that factors in the ongoing text completion session,\n      // while preserving any assigned completion/jobId from the PR summary.\n      const data = ({...completionData} as CompletionData) || ({} as CompletionData)\n      const feedbackIncludesTextCompletionSession = (data.feedbackUrl || '').match('feedback/session')\n      if (!feedbackIncludesTextCompletionSession) {\n        const response = await verifiedFetchJSON(`/copilot/completions/feedback/${headRepoId}`)\n        if (response.ok) {\n          const json = await response.json()\n          data.sessionId = json.session_id\n          data.feedbackAuthToken = json.feedback_auth_token\n          data.feedbackUrl = json.feedback_url\n          if (data.jobId) {\n            data.feedbackUrl += `?job_id=${data.jobId}`\n          }\n          setCompletionData(data)\n        } else {\n          throw new Error('Failed to fetch feedback data')\n        }\n      }\n    }\n    form.addEventListener(TEXT_COMPLETION_SUGGESTION_EVENT, handleEvent)\n    return () => {\n      form.removeEventListener(TEXT_COMPLETION_SUGGESTION_EVENT, handleEvent)\n    }\n  }, [completionData, headRepoId])\n\n  const bannerContent = isLoading ? (\n    <CopilotProgressIndicator isLoading={isLoading} />\n  ) : errorMessage ? (\n    <CopilotSummaryErrorBanner\n      bannerMessage={errorMessage}\n      isServerError={errorMessage === defaultErrorMessage}\n      {...testIdProps('copilot-summary-error-banner')}\n    />\n  ) : userFeedbackOptIn && completionData && !completionReplacementDeferred ? (\n    <CopilotFeedbackBanner\n      classificationOptions={classificationOptions}\n      {...completionData}\n      {...testIdProps('copilot-feedback-banner')}\n    />\n  ) : null\n\n  return (\n    <div ref={boxRef} {...testIdProps('copilot-summary-banner')}>\n      {bannerContent}\n      <CopilotIsLoadingWarningDialog\n        isOpen={warningDialogOpen}\n        onCancel={warningDialogCancelled}\n        onDiscard={warningDialogDiscarded}\n        returnFocusRef={returnFocusRef}\n      />\n    </div>\n  )\n}\n\ntry{ CopilotSummaryBanner.displayName ||= 'CopilotSummaryBanner' } catch {}","import {registerReactPartial} from '@github-ui/react-core/register-partial'\nimport {CopilotSummaryBanner} from './CopilotSummaryBanner'\n\nregisterReactPartial('copilot-summary-banner', {\n  Component: CopilotSummaryBanner,\n})\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch (_) {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nexport function stringifyObjectValues(obj: object) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, JSON.stringify(v)]))\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","export class DeferredRegistry<T> {\n  private registrationEntries: Record<\n    string,\n    {\n      promise: Promise<T>\n      resolve?: (r: T) => void\n    }\n  > = {}\n\n  public register(name: string, registration: T) {\n    const entry = this.registrationEntries[name]\n    if (entry) {\n      entry.resolve?.(registration)\n    } else {\n      this.registrationEntries[name] = {\n        promise: Promise.resolve(registration),\n      }\n    }\n  }\n\n  public getRegistration(name: string): Promise<T> {\n    this.registrationEntries[name] ||= new Deferred()\n    return this.registrationEntries[name].promise\n  }\n}\n\nclass Deferred<T> {\n  declare promise\n  declare resolve: (r: T) => void\n\n  constructor() {\n    this.promise = new Promise<T>(resolve => {\n      this.resolve = resolve\n    })\n  }\n}\n","import type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\ninterface ReactPartialAnchor {\n  /**\n   * DO NOT USE THIS PROPERTY DIRECTLY. It is meant to be used with useExternalAnchor and useOnAnchorClick\n   */\n  __wrapperElement: ReactPartialAnchorElement\n}\n\nexport interface ReactPartialAnchorProps {\n  reactPartialAnchor?: ReactPartialAnchor\n}\n\nexport function usePartialAnchorProps(\n  anchorElement: ReactPartialAnchorElement | undefined | null,\n): ReactPartialAnchorProps {\n  useEffect(() => {\n    const anchor = anchorElement?.anchor\n\n    if (!anchor) {\n      return\n    }\n\n    if ('disabled' in anchor) {\n      anchor.disabled = false\n    }\n    anchor.classList.remove('cursor-wait')\n  }, [anchorElement])\n\n  if (!anchorElement) {\n    return {}\n  }\n\n  return {\n    reactPartialAnchor: {\n      __wrapperElement: anchorElement,\n    },\n  }\n}\n\nexport function useExternalAnchor(reactPartialAnchor: ReactPartialAnchor) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor || null)\n  const [open, setOpen] = useState(false)\n\n  const onClick = useCallback(() => {\n    // toggle the open state when clicked\n    setOpen(!open)\n  }, [open, setOpen])\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    ref.current.setAttribute('aria-expanded', open.toString())\n    ref.current.setAttribute('aria-haspopup', 'true')\n  }, [ref, open])\n\n  useOnAnchorClick(reactPartialAnchor, onClick)\n\n  return {\n    ref,\n    open,\n    setOpen,\n  }\n}\n\nexport function useOnAnchorClick(reactPartialAnchor: ReactPartialAnchor, onClick: (event: MouseEvent) => void) {\n  const ref = useRef(reactPartialAnchor.__wrapperElement.anchor)\n\n  useEffect(() => {\n    const element = ref.current\n    if (!element) {\n      return\n    }\n\n    element.addEventListener('click', onClick)\n    return () => element.removeEventListener('click', onClick)\n  }, [ref, onClick])\n}\n\nexport type PropsWithPartialAnchor<T> = T & Required<ReactPartialAnchorProps>\n","import {DeferredRegistry} from './deferred-registry'\n\nexport interface PartialRegistration {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Component: React.ComponentType<any>\n}\n\nexport const partialRegistry = new DeferredRegistry<PartialRegistration>()\n\nexport function getReactPartial(appName: string) {\n  return partialRegistry.getRegistration(appName)\n}\n","import {controller} from '@github/catalyst'\nimport {getReactPartial} from './react-partial-registry'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {ReactBaseElement} from './ReactBaseElement'\nimport {PartialEntry} from './PartialEntry'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\n\n// What is this silliness? Is it react or a web component?!\n// It's a web component we use to bootstrap react partials within the monolith.\n@controller\nclass ReactPartialElement extends ReactBaseElement<EmbeddedPartialData> {\n  nameAttribute = 'partial-name'\n\n  async getReactNode(embeddedData: EmbeddedPartialData) {\n    const {Component} = await getReactPartial(this.name)\n\n    // Some React Partials will be wrapped in a react-partial-anchor, which is used to conditionally render the Partial\n    const anchorElement = this.closest<ReactPartialAnchorElement>('react-partial-anchor')\n\n    return (\n      <PartialEntry\n        partialName={this.name}\n        embeddedData={embeddedData}\n        Component={Component}\n        wasServerRendered={this.hasSSRContent}\n        ssrError={this.ssrError}\n        anchorElement={anchorElement}\n      />\n    )\n  }\n}\n","import {partialRegistry, type PartialRegistration} from './react-partial-registry'\n// Import the web component to get it registered on the window\nimport './ReactPartialElement'\n\n// NOTE: if the signature of this method changes, also update the react-partial-name ESLint rule\n// /workspaces/github/ui/packages/eslint-plugin-github-monorepo/rules/react-partial-name.js\nexport function registerReactPartial(name: string, registration: PartialRegistration) {\n  partialRegistry.register(name, registration)\n}\n","import safeStorage from '@github-ui/safe-storage'\n\nconst {getItem, setItem, removeItem} = safeStorage('localStorage')\nconst REACT_PROFILING_ENABLED = 'REACT_PROFILING_ENABLED'\n\ninterface ReactProfilingModeMethods {\n  enable: () => void\n  disable: () => void\n  isEnabled: () => boolean\n}\n\nconst ReactProfilingMode: ReactProfilingModeMethods = {\n  enable: () => setItem(REACT_PROFILING_ENABLED, 'true'),\n  disable: () => removeItem(REACT_PROFILING_ENABLED),\n  isEnabled: () => !!getItem(REACT_PROFILING_ENABLED),\n}\n\nexport default ReactProfilingMode\n","export interface TestIdProps {\n  /** Test ID to be queried by automated testing suites */\n  'data-testid'?: string\n}\n\nexport const testIdProps = (value: string): TestIdProps => {\n  return {'data-testid': value}\n}\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n/**\n * Replace text in a textarea with a new string and\n * place the cursor at the selectionEnd position.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @param isFocused whether the textarea is currently in focus\n * @returns The new text\n */\nexport function replaceText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n  isFocused = true,\n): string {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  setTextareaValueAndCursor(textarea, beginning + remaining, beginning.length, isFocused)\n\n  return newText\n}\n\n/**\n * Replace selected text in a textarea with a new string.\n * If the selection is empty, the old text is replaced by the\n * new text in the whole textarea.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @returns The new text\n */\nexport function replaceSelection(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n): string {\n  if (textarea.selectionStart === null || textarea.selectionEnd === null) {\n    return replaceText(textarea, oldText, newText)\n  }\n  const beginning = textarea.value.substring(0, textarea.selectionStart)\n  const remaining = textarea.value.substring(textarea.selectionEnd)\n\n  setTextareaValueAndCursor(textarea, beginning + newText + remaining, beginning.length)\n\n  return newText\n}\n\ntype InsertOptions = {\n  appendNewline?: boolean\n}\n/**\n * Inserts text into a text input and moves the cursor appropriately.\n * If the cursor happens to be in the middle of a line, or the textarea isn't empty,\n * we add a newline character before the inserted text. We also advance the cursor\n * appropriately\n * @param textarea an `<input>` or `<textarea>` element\n * @param text The text to add\n * @param appendNewline optionally adds a `\\n` character after `text`\n */\nexport function insertText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  text: string,\n  options: InsertOptions = {},\n): string {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n  const trailingNewline = options.appendNewline ? '\\n' : ''\n  const insertedText = newline + text + trailingNewline\n\n  textarea.value = beginning + insertedText + remaining\n  const newPoint = point + insertedText.length\n  textarea.selectionStart = newPoint\n  textarea.selectionEnd = newPoint\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n  return insertedText\n}\n\n/**\n * Helper function to set the value of a textarea and move the cursor to a given position.\n * Emits a `change` event.\n * @param textarea an `<input>` or `<textarea>` element\n * @param value The new value\n * @param cursor The position to move the cursor to\n * @param isFocused whether the textarea is currently in focus\n */\nfunction setTextareaValueAndCursor(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  value: string,\n  cursor: number,\n  isFocused = true,\n) {\n  textarea.value = value\n\n  if (isFocused) {\n    textarea.selectionStart = cursor\n    textarea.selectionEnd = cursor\n  }\n\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\n// Returns the character index for a given byte position, taking character encoding into account\n// Example usage for this method: highlighing text in a textarea that may contain non-UTF8 characters\n//\n// For context, in Javascript, strings are UTF16. However, Codemirror uses simple Javascript\n// indexing, that isn't Unicode aware. This leads to incorrect highlighting.\n//\n// For example, '💩' is represented as 4 bytes. In Javascript, it has length 2\n// and is composed of a surrogate pair (2 code points). '💩'.length is 2.\n// Given text string such as 'hello 💩 world', this would be represented in hex as:\n// ┌────────┬─────────────────────────┬─────────────────────────┬────────┬────────┐\n// │00000000│ 68 65 6c 6c 6f 20 f0 9f ┊ 92 a9 20 77 6f 72 6c 64 │hello ××┊×× world│\n// └────────┴─────────────────────────┴─────────────────────────┴────────┴────────┘\n// The string 'world' appears at byte positions (11, 16), but in Javascript `str.slice(11, 16)` returns 'rld'.\n// The correct position in Javascript, and codemirror, would be: (9, 14).\n//\n// When encoded using `TextEncoder#encodeInto` with '💩', we'd get an object with\n// the following properties: {written: 4, read: 2}. This discrepancy informs us\n// that we need to offset the start and end positions by 2.\nexport function GetCharIndexFromBytePosition(str: string, pos: number): number {\n  // The string iterator [...str] is unicode aware, and allows us to correctly\n  // iterate over each grapheme in the string. Iterating over `str[i]` would\n  // not work, as it separates the astral symbol into each of its surrogates.\n  const contents = [...str]\n  const encoder = new TextEncoder()\n\n  // Astral code points in Javascript are a surrogate pair of 2 UTF16 code units, or 4 bytes\n  const u8array = new Uint8Array(4)\n\n  for (let i = 0; i < contents.length; i++) {\n    const char = contents[i]!\n    const {written, read} = encoder.encodeInto(char, u8array)\n    if (!written || !read) {\n      return -1\n    }\n    const diff = written - read\n    if (diff === 0) {\n      continue\n    }\n\n    if (i < pos) {\n      pos -= diff\n    }\n\n    if (i >= pos) {\n      break\n    }\n  }\n\n  return pos\n}\n","/**\n * A Fetch function which will automatically add the correct headers for\n * making requests to GitHub application servers as long as the associated controller methods allow it.\n * Track down the associated controller method and confirm the controller includes\n * ApplicationController::VerifiedFetchDependency as well as `allow_verified_fetch only:`\n * to the relevant controller methods.\n *\n * ## Example\n *\n *     const onClick = async () => {\n *       const resp = await verifiedFetch('/foo', {method: 'POST'})\n *       if (resp.ok) console.log('The response was', await resp.text())\ntest.\n *     }\n */\nexport function verifiedFetch(path: string, init: RequestInit = {}): Promise<Response> {\n  assertRelativePathOrSameOrigin(path)\n\n  const headers: HeadersInit = {\n    ...init.headers,\n    'GitHub-Verified-Fetch': 'true',\n    'X-Requested-With': 'XMLHttpRequest',\n  }\n\n  return fetch(path, {...init, headers})\n}\n\nexport interface JSONRequestInit extends Omit<RequestInit, 'body'> {\n  body?: unknown\n}\n\nfunction assertRelativePathOrSameOrigin(path: string) {\n  if (process.env.NODE_ENV === 'test' && !window.location.origin) return\n  const url = new URL(path, window.location.origin)\n  if (url.origin !== window.location.origin) {\n    throw new Error('Can not make cross-origin requests from verifiedFetch')\n  }\n}\n\n/**\n * A Fetch function which will automatically add the correct headers for\n * making JSON requests\n *\n * Will also `JSON.stringify` the request body if provided.\n\n * ## Example\n *\n *     const onClick = async () => {\n *       const resp = await verifiedFetchJSON('/foo', {body: {foo: 'bar'}, method: 'POST'})\n *       if (resp.ok) console.log('The response was', await resp.json())\n *     }\n */\nexport function verifiedFetchJSON(path: string, init?: JSONRequestInit): Promise<Response> {\n  const initHeaders: HeadersInit = init?.headers ?? {}\n\n  const headers: HeadersInit = {\n    ...initHeaders,\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  }\n\n  const body = init?.body ? JSON.stringify(init.body) : undefined\n\n  return verifiedFetch(path, {...init, body, headers})\n}\n\n/**\n * A Fetch function which will automatically add the GitHub-Is-React header for\n * making JSON requests. It will in turn call verifiedFetchJSON.\n *\n * Using this in React components to fetch data enables us to track these\n * requests in Datadog in the request.dist.referrer metric.\n */\nexport function reactFetch(path: string, init: RequestInit = {}): Promise<Response> {\n  const headers: HeadersInit = {\n    ...init.headers,\n    'GitHub-Is-React': 'true',\n  }\n\n  return verifiedFetch(path, {...init, headers})\n}\n\n/**\n * A Fetch function which will automatically add the GitHub-Is-React header for\n * making JSON requests. It will in turn call verifiedFetchJSON.\n *\n * Using this in React components to fetch data enables us to track these\n * requests in Datadog in the request.dist.referrer metric.\n */\nexport function reactFetchJSON(path: string, init?: JSONRequestInit): Promise<Response> {\n  const initHeaders: HeadersInit = init?.headers ?? {}\n\n  const headers: HeadersInit = {\n    ...initHeaders,\n    'GitHub-Is-React': 'true',\n  }\n\n  return verifiedFetchJSON(path, {...init, headers})\n}\n","import {AlertFillIcon, CopilotIcon} from '@primer/octicons-react'\nimport {Box, Spinner, Text} from '@primer/react'\n\nconst waitingMessage = 'Summarizing changes… this might take a minute'\n\nexport interface CopilotProgressIndicatorProps {\n  isError?: boolean\n  isLoading: boolean\n}\n\nexport const CopilotProgressIndicator = (props: CopilotProgressIndicatorProps) => {\n  return props.isLoading ? (\n    <Box sx={{display: 'flex', alignItems: 'center', gap: 1}}>\n      <Box\n        sx={{\n          position: 'relative',\n          width: 24,\n          height: 24,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n        data-testid=\"copilot-summary-error-banner-icon\"\n      >\n        <Spinner size=\"small\" data-testid=\"copilot-spinner\" />\n      </Box>\n      <Text sx={{color: 'fg.subtle', fontSize: 0, fontWeight: 500, paddingLeft: 1}}>{waitingMessage}</Text>\n    </Box>\n  ) : (\n    <Box\n      sx={{\n        borderRadius: '100%',\n        position: 'relative',\n        bg: props.isError ? 'attention.subtle' : 'canvas.subtle',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        border: '1px solid',\n        borderColor: props.isError ? 'attention.muted' : 'border.default',\n        color: props.isLoading ? 'accent.fg' : 'fg.default',\n      }}\n      data-testid=\"copilot-spinner\"\n    >\n      <CopilotIcon />\n      {props.isError ? (\n        <Box\n          sx={{\n            position: 'absolute',\n            bottom: 0,\n            right: 0,\n            transform: 'translate(4px,4px)',\n            color: 'attention.fg',\n          }}\n        >\n          <AlertFillIcon size={12} />\n        </Box>\n      ) : null}\n    </Box>\n  )\n}\n\ntry{ CopilotProgressIndicator.displayName ||= 'CopilotProgressIndicator' } catch {}","import {useState} from 'react'\nimport type {BrowserHistory, MemoryHistory} from '@remix-run/router'\nimport {Router} from 'react-router-dom'\n// eslint-disable-next-line no-restricted-imports\nimport {useHydratedEffect} from '@github-ui/use-hydrated-effect'\n\ntype Props = {\n  children: React.ReactNode\n  history: BrowserHistory | MemoryHistory\n}\n\nexport function PartialRouter({children, history}: Props) {\n  const [state, setState] = useState({\n    location: history.location,\n  })\n\n  useHydratedEffect(() => history.listen(setState), [history])\n\n  return (\n    <Router location={state.location} navigator={history}>\n      {children}\n    </Router>\n  )\n}\n\ntry{ PartialRouter.displayName ||= 'PartialRouter' } catch {}","// Think of this as the entry point into the framework\nimport React from 'react'\nimport type {EmbeddedPartialData} from './embedded-data-types'\nimport {BaseProviders} from './BaseProviders'\nimport type {BrowserHistory} from '@remix-run/router'\nimport {createMemoryHistory} from '@remix-run/router'\nimport {AppContextProvider} from './AppContextProvider'\nimport {PartialRouter} from './PartialRouter'\nimport {CommonElements} from './CommonElements'\nimport {createBrowserHistory} from './create-browser-history'\nimport type {ReactPartialAnchorElement} from '@github-ui/react-partial-anchor-element'\nimport {usePartialAnchorProps} from './react-partial-anchor'\n\ninterface Props {\n  partialName: string\n  embeddedData: EmbeddedPartialData\n  Component: React.ComponentType\n  wasServerRendered: boolean\n  ssrError?: HTMLScriptElement\n  anchorElement?: ReactPartialAnchorElement | null\n}\n\nexport function PartialEntry({\n  partialName,\n  embeddedData,\n  Component,\n  wasServerRendered,\n  ssrError,\n  anchorElement,\n}: Props) {\n  // Create a ref to track the browser history:\n  const historyRef = React.useRef<BrowserHistory>()\n  const window = globalThis.window as Window | undefined\n\n  // For linking to work, we can just pass a dummy pathname here. We may consider plumbing the actual path in\n  if (!historyRef.current) {\n    historyRef.current = !window\n      ? createMemoryHistory({initialEntries: [{pathname: '/'}]})\n      : createBrowserHistory({window})\n  }\n  const history = historyRef.current\n  const partialAnchorProps = usePartialAnchorProps(anchorElement)\n\n  // Wrap the partial in an AppContextProvider and static Router so that react-core links\n  // will be functional.\n  return (\n    <BaseProviders appName={partialName} wasServerRendered={wasServerRendered}>\n      <AppContextProvider history={history} routes={[]}>\n        <PartialRouter history={history}>\n          <Component {...embeddedData.props} {...(partialAnchorProps as object)} />\n          <CommonElements ssrError={ssrError} />\n        </PartialRouter>\n      </AppContextProvider>\n    </BaseProviders>\n  )\n}\n\ntry{ PartialEntry.displayName ||= 'PartialEntry' } catch {}","import {target} from '@github/catalyst'\nimport {createRoot, hydrateRoot} from 'react-dom/client'\nimport type {createRoot as createRootType, hydrateRoot as hydrateRootType, Root} from 'react-dom/client'\nimport React from 'react'\nimport ReactProfilingMode from '@github-ui/react-profiling-mode'\nimport {EXPECTED_ERRORS} from './expected-errors'\nimport {sendStats} from '@github-ui/stats'\n\ntype ReactDOM = {\n  createRoot: typeof createRootType\n  hydrateRoot: typeof hydrateRootType\n}\n\nconst REACT_INVARIANT_ERROR_REGEX = /Minified React error #(?<invariant>\\d+)/\n\nexport abstract class ReactBaseElement<T> extends HTMLElement {\n  @target embeddedData: HTMLScriptElement | undefined\n  @target ssrError: HTMLScriptElement | undefined\n  @target reactRoot: HTMLElement | undefined\n  private root: Root | undefined\n\n  abstract nameAttribute: string\n  abstract getReactNode(embeddedData: T): Promise<React.ReactNode>\n\n  protected get name() {\n    return this.getAttribute(this.nameAttribute) as string\n  }\n\n  private get embeddedDataText() {\n    const text = this.embeddedData?.textContent\n\n    if (!text) {\n      throw new Error(`No embedded data provided for react element ${this.name}`)\n    }\n\n    return text\n  }\n\n  get hasSSRContent() {\n    return this.getAttribute('data-ssr') === 'true'\n  }\n\n  connectedCallback() {\n    this.renderReact()\n  }\n\n  disconnectedCallback() {\n    this.root?.unmount()\n    this.root = undefined\n  }\n\n  private async renderReact() {\n    if (!this.reactRoot) throw new Error('No react root provided')\n    let reactDom: ReactDOM = {\n      createRoot,\n      hydrateRoot,\n    }\n\n    // Override the react-dom import if we're in profiling mode\n    if (ReactProfilingMode.isEnabled()) {\n      reactDom = await this.getReactDomWithProfiling()\n    }\n\n    const embeddedData = JSON.parse(this.embeddedDataText) as T\n    const ssrErrorText = this.ssrError?.textContent\n    const node = await this.getReactNode(embeddedData)\n    const baseNode = <React.StrictMode>{node}</React.StrictMode>\n\n    if (ssrErrorText) {\n      this.logSSRError(ssrErrorText)\n    }\n\n    if (this.hasSSRContent) {\n      /**\n       * Styled-components automatically looks for style tags to hydrate on first page load, but will not detect them\n       * if they are added after the initial page load. This causes a hydration error because React isn't expecting\n       * a style tag within the app. To work around this, we need to manually move the style tags to the head before\n       * hydrating the app.\n       *\n       * During hydration, styled-components will create a new style tag which matches the one we moved to the head.\n       * This means that after hydration, we can safely remove the style tag we manually moved to the head.\n       */\n      const styles = this.querySelector('style[data-styled=\"true\"]')\n      if (styles) document.head.appendChild(styles)\n\n      // Hydrate the react app\n      // onRecoverableError is disabled until we have a react version with this fix in:\n      // https://github.com/facebook/react/pull/25692\n      this.root = reactDom.hydrateRoot(this.reactRoot, baseNode, {\n        onRecoverableError: error => {\n          if (!(error instanceof Error)) return\n\n          const match = REACT_INVARIANT_ERROR_REGEX.exec(error.message)\n          const invariant = String(match?.groups?.invariant)\n\n          sendStats({\n            incrementKey: 'REACT_HYDRATION_ERROR',\n            incrementTags: {\n              appName: this.name,\n              invariant,\n            },\n          })\n        },\n      })\n\n      // Remove the manually moved style tag after hydration\n      if (styles) {\n        // Wait until things are idle to remove the style tag. If we do it immediately, we can cause a flash of unstyled content.\n        requestIdleCallback(() => {\n          // styles could have already been removed by Turbo if a navigation happens quickly. Only remove it from the DOM if it's still there.\n          styles.parentElement?.removeChild(styles)\n        })\n      }\n    } else {\n      this.root = reactDom.createRoot(this.reactRoot)\n      this.root.render(baseNode)\n    }\n\n    this.classList.add('loaded')\n  }\n\n  private getReactDomWithProfiling() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return import('react-dom/profiling') as any as Promise<ReactDOM>\n  }\n\n  private logSSRError(ssrErrorText: string) {\n    if (EXPECTED_ERRORS[ssrErrorText]) {\n      // eslint-disable-next-line no-console\n      return console.error('SSR failed with an expected error:', EXPECTED_ERRORS[ssrErrorText])\n    }\n\n    try {\n      const error = JSON.parse(ssrErrorText) as PlatformJavascriptError\n      const stacktrace = parseFailbotStacktrace(error)\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', `${error.type}: ${error.value}\\n`, error, stacktrace)\n    } catch {\n      /**\n       * In the event we couldn't log the error, we should not break the application\n       */\n      // eslint-disable-next-line no-console\n      console.error('Error During Alloy SSR:', ssrErrorText, 'unable to parse as json')\n    }\n  }\n}\n\nfunction parseFailbotStacktrace(error: PlatformJavascriptError) {\n  if (!error.stacktrace) return ''\n  let prefix = '\\n '\n  const stack = error.stacktrace.map((frame: PlatformStackframe) => {\n    const {function: func, filename, lineno, colno} = frame\n    const line = `${prefix} at ${func} (${filename}:${lineno}:${colno})`\n    prefix = ' '\n    return line\n  })\n  return stack.join('\\n')\n}\n\ntry{ REACT_INVARIANT_ERROR_REGEX.displayName ||= 'REACT_INVARIANT_ERROR_REGEX' } catch {}"],"names":["announceFromElement","el","options","isFeatureEnabled","announce","getTextContent","element","undefined","liveRegionAnnounceFromElement","politeness","assertive","message","Element","prototype","document","body","ariaNotify","interrupt","liveRegionAnnounce","setContainerContent","container","ssrSafeDocument","querySelector","textContent","getAttribute","innerText","trim","INIT_EVENT","END_EVENT","TEXT_COMPLETION_SUGGESTION_EVENT","CopilotSummaryFeedback","Box","sx","display","Tooltip","id","aria-label","props","useCase","direction","noDelay","IconButton","unsafeDisableTooltip","className","icon","ThumbsupIcon","size","variant","onClick","svg","color","margin","testIdProps","ThumbsdownIcon","displayName","CopilotFeedbackDialog","onCancel","onSubmitFeedback","isOpen","classificationOptions","feedbackText","setFeedbackText","useState","canContact","setCanContact","classification","setClassification","disclosure","Text","fontSize","Link","inline","href","target","data-testid","Dialog","onDismiss","overflowY","Header","flexDirection","padding","div","FormControl","pb","Label","fontWeight","Select","onChange","e","currentTarget","value","placeholder","width","Object","entries","map","description","Option","Textarea","rows","justifyContent","Checkbox","checked","Button","disabled","preventDefault","ml","UIError","Error","constructor","requestSummary","event","url","authenticityToken","base_revision","head_revision","head_repo_id","response","fetch","method","URLSearchParams","authenticity_token","headers","Accept","data","json","jobUrl","job","feedbackUrl","feedback_url","feedbackAuthToken","feedback_auth_token","jobResponse","fetchPoll","timeBetweenRequests","acceptedStatusCodes","poll","wait","request","Request","append","self","unexpectedError","status","Promise","resolve","setTimeout","payload","error_message","includes","jobData","jobId","completion","context","sessionId","sendFeedback","feedback","_method","sentiment","set","contact","CopilotFeedbackBanner","defaultSendFeedback","feedbackCollected","setFeedbackCollected","showAdditionalFeedback","setShowAdditionalFeedback","openFeedbackDialogue","setOpenFeedbackDialogue","useMemo","feedbackMessageId","useId","additionalFeedbackRef","useRef","current","focus","getElementById","error","console","Flash","border","backgroundColor","role","aria-labelledby","gap","alignItems","borderRadius","position","bg","height","paddingLeft","borderColor","Octicon","CopilotIcon","fill","ref","CopilotIsLoadingWarningDialog","returnFocusRef","p","mt","mr","onDiscard","CopilotSummaryErrorBanner","bannerMessage","isServerError","CopilotErrorIcon","CopilotWarningIcon","prepStringsForComparison","strings","split","filter","Boolean","line","defaultErrorMessage","CopilotSummaryBanner","baseRevision","headRevision","headRepoId","userFeedbackOptIn","defaultRequestSummary","isLoading","setIsLoading","errorMessage","setErrorMessage","completionData","setCompletionData","warningDialogOpen","setWarningDialogOpen","forceSubmit","setForceSubmit","completionReplacementDeferred","setCompletionReplacementDeferred","actionRef","placeholderRef","replacementRef","boxRef","splitActionsEnabled","replacePlaceholder","useCallback","form","closest","textarea","replaceText","replacement","activeElement","dispatchEvent","CustomEvent","bubbles","warningDialogCancelled","button","removeAttribute","warningDialogDiscarded","submit","useEffect","handleEarlySubmit","addEventListener","removeEventListener","generateComparison","summary","matchPercentage","comparator","bodyLines","generatedSummary","generatedSummaryLength","length","matches","remainingLines","bLine","splice","indexOf","weight","remainingLinesLength","levPercentage","unmatched","slice","variance","levDistance","distance","pct","potentialMatch","join","sendEvent","match_percentage","repo_id","action","token","handleEvent","detail","insertText","text","point","selectionEnd","beginning","substring","remaining","adjText","cursorPosition","execCommandSucceeded","execCommand","selectionStart","cancelable","returnedCompletionData","getReplacementText","indexOfBreak","outline","dialog","match","verifiedFetchJSON","ok","session_id","bannerContent","CopilotProgressIndicator","registerReactPartial","Component","hydroAnalyticsClient","getItem","safeStorage","dimensionPrefix","MARKETING_PARAMS","getOptionsFromMeta","baseContext","AnalyticsClient","_","extendBaseContext","key","app_id","event_url","host","startsWith","replace","visitorMeta","assign","JSON","parse","atob","content","window","location","search","toLowerCase","staff","isStaff","toString","sendPageView","type","service","head","cleanContext","stringifyObjectValues","obj","fromEntries","k","v","stringify","DeferredRegistry","register","name","registration","entry","registrationEntries","promise","getRegistration","Deferred","usePartialAnchorProps","anchorElement","anchor","classList","remove","reactPartialAnchor","__wrapperElement","useExternalAnchor","open","setOpen","setAttribute","useOnAnchorClick","partialRegistry","ReactPartialElement","ReactBaseElement","getReactNode","embeddedData","appName","PartialEntry","partialName","wasServerRendered","hasSSRContent","ssrError","nameAttribute","controller","setItem","removeItem","REACT_PROFILING_ENABLED","enable","disable","isEnabled","getUtf8StringLength","str","count","s","Array","from","oldText","newText","isFocused","setTextareaValueAndCursor","replaceSelection","insertedText","newline","appendNewline","newPoint","cursor","GetCharIndexFromBytePosition","pos","contents","encoder","TextEncoder","u8array","Uint8Array","i","char","written","read","encodeInto","diff","verifiedFetch","path","init","assertRelativePathOrSameOrigin","URL","origin","reactFetch","reactFetchJSON","Spinner","isError","bottom","right","transform","AlertFillIcon","PartialRouter","children","history","state","setState","useHydratedEffect","listen","Router","navigator","historyRef","React","globalThis","createBrowserHistory","createMemoryHistory","initialEntries","pathname","partialAnchorProps","BaseProviders","AppContextProvider","routes","CommonElements","REACT_INVARIANT_ERROR_REGEX","HTMLElement","embeddedDataText","connectedCallback","renderReact","disconnectedCallback","root","unmount","reactRoot","reactDom","createRoot","hydrateRoot","ReactProfilingMode","getReactDomWithProfiling","ssrErrorText","node","baseNode","logSSRError","styles","appendChild","onRecoverableError","exec","invariant","String","groups","sendStats","incrementKey","incrementTags","requestIdleCallback","parentElement","removeChild","render","add","EXPECTED_ERRORS","stacktrace","parseFailbotStacktrace","prefix","stack","function","func","filename","lineno","colno","frame"],"sourceRoot":""}