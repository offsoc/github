{"version":3,"file":"marketplace-react-xxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./ui/packages/copilot-chat/components/ChatMessage.module.css?cd1a","ui/packages/copilot-chat/utils/copilot-feature-flags.ts","ui/packages/copilot-chat/utils/markdown.ts","ui/packages/copilot-chat/utils/copilot-inline-diff-element.ts","ui/packages/get-os/get-os.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/markdown-editor/use-list-editing.ts","ui/packages/markdown-editor/utils.ts","ui/packages/markdown-viewer/use-list-interaction.ts","ui/packages/marketplace-react/components/legacy/TagSection.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundChatInput.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundChat.tsx","ui/packages/marketplace-react/models/routes/show/components/Readme.tsx","ui/packages/marketplace-react/App.tsx","ui/packages/marketplace-react/marketplace.module.css","ui/packages/marketplace-react/utilities/model-filter-options.ts","ui/packages/marketplace-react/contexts/FilterContext.tsx","ui/packages/marketplace-react/components/MarketplaceHeader.tsx","ui/packages/marketplace-react/components/MarketplaceNavigation.tsx","ui/packages/marketplace-react/components/MarketplaceItem.tsx","ui/packages/marketplace-react/components/models/ModelsFilters.tsx","ui/packages/marketplace-react/components/Filters.tsx","ui/packages/marketplace-react/components/ResultList.tsx","ui/packages/marketplace-react/utilities/normalize-model-strings.ts","ui/packages/marketplace-react/models/routes/index/components/ModelItem.tsx","ui/packages/marketplace-react/components/IndexAndSearchContent.tsx","ui/packages/marketplace-react/routes/Index.tsx","ui/packages/marketplace-react/components/Screenshots.tsx","ui/packages/marketplace-react/components/legacy/Plans.tsx","ui/packages/marketplace-react/utilities/not-empty.ts","ui/packages/marketplace-react/utilities/join-words.ts","ui/packages/marketplace-react/utilities/assert-never.ts","ui/packages/marketplace-react/components/legacy/ShowApp.tsx","ui/packages/marketplace-react/components/ListingLayout.tsx","ui/packages/marketplace-react/routes/ShowApp.tsx","ui/packages/marketplace-react/routes/ShowAction.tsx","ui/packages/marketplace-react/components/CallToActionItem.tsx","ui/packages/marketplace-react/components/models/ModelsIndexFilters.tsx","ui/packages/marketplace-react/models/routes/index/ModelsIndexRoute.tsx","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/ModelLayout.module.css","ui/packages/marketplace-react/models/utils/playground-types.ts","ui/packages/marketplace-react/models/utils/feedback.ts","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/types.ts","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/FeedbackDialog.tsx","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/ModelLegalTerms.tsx","ui/packages/marketplace-react/models/routes/playground/components/SidebarInfo.tsx","ui/packages/marketplace-react/models/utils/model-url-helper.ts","ui/packages/marketplace-react/models/routes/playground/components/ModelSwitcher.tsx","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/CodespacesSuggestion.tsx","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/MarkdownContent.tsx","ui/packages/marketplace-react/models/utils/auth-token.ts","ui/packages/marketplace-react/models/utils/streamer.ts","ui/packages/marketplace-react/models/utils/model-client.ts","ui/packages/marketplace-react/models/utils/playground-local-storage.ts","ui/packages/marketplace-react/models/utils/playground-manager.ts","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/GettingStartedDialog.tsx","ui/packages/marketplace-react/models/routes/playground/components/GettingStartedDialog/ModelLayout.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundError.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundChatMessage.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundCodeLanguage.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundChatEmptyState.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundCodeSDK.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundCodeSnippet.tsx","ui/packages/marketplace-react/types.ts","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundJSON.tsx","ui/packages/marketplace-react/models.module.css","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundInput.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundInputs.tsx","ui/packages/marketplace-react/models/routes/playground/components/Playground.tsx","ui/packages/marketplace-react/models/routes/playground/components/PlaygroundWaitingListAsset.tsx","ui/packages/marketplace-react/models/routes/playground/ModelsPlaygroundRoute.tsx","ui/packages/marketplace-react/models/routes/show/components/Evaluation.tsx","ui/packages/marketplace-react/models/routes/show/components/License.tsx","ui/packages/marketplace-react/models/routes/show/components/Transparency.tsx","ui/packages/marketplace-react/models/routes/show/ModelsShowRoute.tsx","ui/packages/marketplace-react/marketplace-react.ts","ui/packages/use-csrf-token/use-csrf-token.ts","ui/packages/use-link-interception/use-link-interception.ts","ui/packages/use-navigate/use-navigate.ts","ui/packages/use-safe-async-callback/use-safe-async-callback.ts","ui/packages/use-user/use-user.ts","ui/packages/copilot-chat/components/CopilotBadge.tsx","ui/packages/copilot-chat/components/ReactMarkdownRenderer.tsx","ui/packages/current-repository/CurrentRepository.tsx","ui/packages/icon-button-with-tooltip/IconButtonWithTooltip.tsx","ui/packages/markdown-viewer/MarkdownViewer.tsx","ui/packages/react-core/JsonRoute.tsx","ui/packages/skeleton/LoadingSkeleton.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"message\":\"ChatMessage-module__message--_amJV\",\"icon-link\":\"ChatMessage-module__icon-link--q1058\",\"color-icon-link\":\"ChatMessage-module__color-icon-link--x_rMl\",\"file\":\"ChatMessage-module__file--nuWNW\",\"snippet\":\"ChatMessage-module__snippet--hiUk6\",\"commit\":\"ChatMessage-module__commit--b4GP5\",\"bing\":\"ChatMessage-module__bing--Zsu7O\",\"agentUnauthorizedAvatar\":\"ChatMessage-module__agentUnauthorizedAvatar--q02uE\"};","import {isFeatureEnabled} from '@github-ui/feature-flags'\n\nclass CopilotFeatureFlags {\n  /**\n   * Returns a boolean indicating whether the Copilot conversational UX embedding update feature is enabled.\n   * @returns {boolean} Whether the feature is enabled.\n   */\n  public get embedding() {\n    return isFeatureEnabled('copilot_conversational_ux_embedding_update')\n  }\n\n  public get copyMessage() {\n    return isFeatureEnabled('copilot_copy_message')\n  }\n\n  public get formatDiff() {\n    return isFeatureEnabled('copilot_format_diff')\n  }\n\n  public get unstickyReferences() {\n    return isFeatureEnabled('copilot_conversational_ux_history_refs')\n  }\n\n  public get vulnerabilityAnnotations() {\n    return isFeatureEnabled('code_vulnerability_scanning')\n  }\n\n  public get implicitContext() {\n    return isFeatureEnabled('COPILOT_IMPLICIT_CONTEXT')\n  }\n\n  public get issueCreation() {\n    return isFeatureEnabled('copilot_issue_creation')\n  }\n\n  public get staticThreadSuggestions() {\n    return isFeatureEnabled('copilot_chat_static_thread_suggestions')\n  }\n\n  public get followUpThreadSuggestions() {\n    return isFeatureEnabled('copilot_chat_follow_up_thread_suggestions')\n  }\n\n  public get followupToAgent() {\n    return isFeatureEnabled('copilot_followup_to_agent')\n  }\n\n  public get customInstructions() {\n    return isFeatureEnabled('copilot_chat_custom_instructions')\n  }\n\n  public get reactMarkdown() {\n    return isFeatureEnabled('copilot_react_markdown')\n  }\n\n  public get dotcomUserServerTokens() {\n    return isFeatureEnabled('copilot_chat_dotcom_user_server_tokens')\n  }\n\n  public get copilotFloatingButton() {\n    return isFeatureEnabled('copilot_floating_button')\n  }\n}\n\nexport const copilotFeatureFlags = new CopilotFeatureFlags()\nexport type {CopilotFeatureFlags}\n","import './copilot-inline-diff-element'\n\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport DOMPurify from 'dompurify'\nimport hljs from 'highlight.js'\nimport type {TokenizerAndRendererExtension, Tokens} from 'marked'\nimport {lexer, Marked} from 'marked'\nimport {markedHighlight} from 'marked-highlight'\n\nimport styles from '../components/ChatMessage.module.css'\nimport {reactReplaceElementPrefix} from '../components/ReactMarkdownRenderer'\nimport {copilotFeatureFlags} from '../utils/copilot-feature-flags'\nimport type {\n  CopilotAnnotations,\n  CopilotChatAgent,\n  CopilotChatReference,\n  NumberedCopilotChatReference,\n  SnippetReference,\n  WebSearchReference,\n} from './copilot-chat-types'\n\nconst TEXT_SANITIZATION_CONFIG = {\n  ALLOWED_TAGS: [\n    'a',\n    'blockquote',\n    'br',\n    'p',\n    'ul',\n    'ol',\n    'li',\n    'pre',\n    'code',\n    'table',\n    'tr',\n    'th',\n    'td',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'hr',\n    'span',\n    'strong',\n    'em',\n    'p',\n    'div',\n    'details',\n    'summary',\n    'copilot-inline-diff',\n  ],\n  FORBID_TAGS: ['style'],\n  ADD_URI_SAFE_ATTR: ['colspan'],\n  ALLOWED_ATTR: ['href', 'target', 'rel', 'class', 'colspan'],\n  ALLOW_DATA_ATTR: false,\n  ALLOWED_URI_REGEXP: /^https?:/i,\n}\n\nfunction linkifyAtMention(\n  inputString: string,\n  agents?: CopilotChatAgent[],\n  fetchAgents?: () => Promise<CopilotChatAgent[]>,\n) {\n  // Use regex to find a substring beginning with '@' at the beginning of the string.\n  const atMentions = inputString.match(/^@\\S+/g)\n\n  // If there is not an '@' mentions, return the original string.\n  if (!atMentions || atMentions.length === 0) {\n    return inputString\n  }\n\n  if (!agents) {\n    // fetch the agents, but don't hold up showing the message.\n    void fetchAgents?.()\n    return inputString\n  }\n\n  // There should only be a single mention.\n  const mention = atMentions[0]\n\n  // If the agents array contains the mention without the '@'\n  const mentionSlug = mention.substring(1)\n  const matchingAgent = agents.find(agent => agent.slug === mentionSlug)\n  if (matchingAgent) {\n    // Replace the mention in the original string with an HTML anchor tag\n    const sanitizedMention = DOMPurify.sanitize(mention)\n    inputString = inputString.replace(\n      mention,\n      // eslint-disable-next-line github/unescaped-html-literal\n      `<a href=\"${matchingAgent.integrationUrl}\" data-hovercard-url=\"/integrations/${mentionSlug}/hovercard\" class=\"bgColor-accent-muted\">${sanitizedMention}</a>`,\n    )\n  }\n  return inputString\n}\n\nexport function transformContentToHTML(\n  body: string | undefined,\n  references?: CopilotChatReference[] | null,\n  extensions?: TokenizerAndRendererExtension[],\n  isAssistive?: boolean,\n  agents?: CopilotChatAgent[],\n  fetchAgents?: () => Promise<CopilotChatAgent[]>,\n  startLine?: number,\n  endLine?: number,\n): SafeHTMLString {\n  if (!body) return '' as SafeHTMLString\n\n  if (startLine) {\n    // add highlight markers\n    const offsets = findLines(body, startLine, endLine)\n    if (offsets.endIndex > -1) {\n      body = body.slice(offsets.startIndex, offsets.endIndex)\n    }\n\n    // remove front matter\n    body = body.replace(/^---\\n[\\s\\S]*?\\n---\\n/, '')\n  }\n\n  if (!copilotFeatureFlags.reactMarkdown) {\n    // replace agent @mention with anchor\n    body = linkifyAtMention(body, agents, fetchAgents)\n  }\n\n  const renderer = new Marked(\n    {\n      gfm: true,\n      extensions: [\n        codeCopyButtonExtension,\n        ...(copilotFeatureFlags.formatDiff ? [diffHunkExtension] : []),\n        ...(extensions ?? []),\n      ],\n    },\n    markedHighlight({\n      langPrefix: 'hljs language-',\n      highlight(code) {\n        return hljs.highlightAuto(code).value\n      },\n    }),\n  )\n\n  const unsafeHTML = renderer.parse(body) as string\n  const purify = DOMPurify()\n  if (copilotFeatureFlags.reactMarkdown) {\n    // Allow id's starting with our react-replace prefix\n    purify.addHook('uponSanitizeAttribute', function (_, data) {\n      if (data.attrName !== 'id') return\n      if (data.attrValue.startsWith(reactReplaceElementPrefix)) {\n        data.forceKeepAttr = true\n      }\n    })\n  }\n  // Allow data-hovercard-url\n  purify.addHook('uponSanitizeAttribute', function (_, data) {\n    if (data.attrName !== 'data-hovercard-url') return\n    data.forceKeepAttr = true\n  })\n  // Allow href on @mentions\n  purify.addHook('uponSanitizeAttribute', function (node, data) {\n    if (data.attrName !== 'href') return\n    if (node.getAttribute('data-hovercard-url') !== null) {\n      data.forceKeepAttr = true\n    }\n  })\n  // Allow class on @mentions\n  purify.addHook('uponSanitizeAttribute', function (_, data) {\n    if (data.attrName !== 'class') return\n    if (data.attrValue === 'bgColor-accent-muted') {\n      data.forceKeepAttr = true\n    }\n  })\n  // Allow classes for syntax highlighting (`hljs` and `language-`)\n  purify.addHook('uponSanitizeAttribute', function (_, data) {\n    if (data.attrName !== 'class') return\n\n    const ALLOWED_LIST = ['file', 'hljs', 'snippet-clipboard-content']\n    const ALLOWED_REGEX = /^(hljs|language-|\\bsnippet-vulnerabilit(y|ies)\\b-|\\b(blob|diff|file)-)/\n    // remove all classes that don't match our allowed list\n\n    data.attrValue = data.attrValue\n      .split(' ')\n      .filter(className => ALLOWED_LIST.includes(className) || ALLOWED_REGEX.test(className))\n      .join(' ')\n\n    // if there are no classes left, remove the attribute\n    if (data.attrValue === '') {\n      data.keepAttr = false\n    }\n  })\n  // Allow data-snippet-clipboard-copy-content for copying code blocks\n  purify.addHook('uponSanitizeAttribute', function (node, data) {\n    const clipboardAttr = 'data-snippet-clipboard-copy-content'\n    if (data.attrName !== clipboardAttr) return\n    // ensuring that the value starts with our nonce so we know it came from our code\n    if (!data.attrValue.startsWith(`${getNonce()}:`)) {\n      data.keepAttr = false\n      return\n    }\n    // remove the nonce\n    data.attrValue = data.attrValue.slice(getNonce().length + 1)\n    // forceKeepAttr doesn't set the attribute's value to the new data.attrValue so we do it instead\n    node.setAttribute(clipboardAttr, data.attrValue)\n    data.forceKeepAttr = true\n  })\n  // Allow data attributes for inline diffs\n  purify.addHook('uponSanitizeAttribute', function (node, data) {\n    if (node.nodeName === 'COPILOT-INLINE-DIFF' && data.attrName.startsWith('data-')) {\n      data.forceKeepAttr = true\n    }\n  })\n  // munge links\n  purify.addHook('afterSanitizeAttributes', function (node) {\n    // set all elements owning target to target=_blank if in immersive\n    if (('target' in node || node instanceof HTMLAnchorElement) && !isAssistive) {\n      node.setAttribute('target', '_blank')\n      // prevent https://www.owasp.org/index.php/Reverse_Tabnabbing\n      node.setAttribute('rel', 'noopener noreferrer')\n    }\n\n    // set non-HTML/MathML links to xlink:show=new\n    if (\n      !node.hasAttribute('target') &&\n      // eslint-disable-next-line github/get-attribute\n      (node.hasAttribute('xlink:href') || node.hasAttribute('href')) &&\n      !isAssistive\n    ) {\n      // eslint-disable-next-line github/get-attribute\n      node.setAttribute('xlink:show', 'new')\n    }\n\n    // add classes to prettify links to certain resources\n    if (node instanceof HTMLAnchorElement) {\n      const originalHref = node.getAttribute('href')\n      if (originalHref) {\n        let href = unabsoluteUrl(originalHref)\n        if (href.startsWith('/')) {\n          href = href.slice(1)\n          const parts = href.split('/')\n          // file (/primer/react/blob/main/packages/react/src/Box/Box.tsx)\n          if (parts.length > 3 && parts[2] === 'blob') {\n            // snippet (/primer/react/blob/main/packages/react/src/Box/Box.tsx#L17-L24)\n            if (parts[parts.length - 1]?.match(/#L\\d+(-L\\d+)?$/)) {\n              node.classList.add(styles.snippet, styles['icon-link'])\n            } else {\n              node.classList.add(styles.file, styles['icon-link'])\n            }\n          }\n          // commit (/primer/react/commit/a3355a5483e37bebe077c7aa000ae8e4ed0f77b9)\n          if (parts.length === 4 && parts[2] === 'commit' && parts[3]?.match(/^[0-9a-f]{40}$/i)) {\n            node.classList.add(styles.commit, styles['icon-link'])\n          }\n        }\n        // bing result\n        const bingRefs = references?.filter(ref => ref.type === 'web-search') as WebSearchReference[] | null\n        if (bingRefs?.some(ref => ref.results.some(result => result.url === originalHref))) {\n          node.classList.add(styles.bing, styles['color-icon-link'])\n        }\n      }\n    }\n  })\n\n  return purify.sanitize(unsafeHTML, TEXT_SANITIZATION_CONFIG) as SafeHTMLString\n}\n\nlet nonce: string | undefined\nfunction getNonce(): string {\n  if (!nonce) {\n    nonce = crypto.randomUUID()\n  }\n  return nonce\n}\n\nlet codeCopyButtonRendering = false\n/** Modifies code blocks so that they can have a copy button */\nconst codeCopyButtonExtension: TokenizerAndRendererExtension = {\n  name: 'code',\n  renderer(token) {\n    if (token.type !== 'code' || codeCopyButtonRendering) return false\n    const codeToken = token as Tokens.Code\n    codeCopyButtonRendering = true\n    // this will render the code block so we set codeCopyButtonRendering so that we return false\n    // to trigger the default rendering and not an infinite loop\n    const html = this.parser.parse([codeToken])\n    codeCopyButtonRendering = false\n    const container = document.createElement('span')\n    container.innerHTML = html\n    const content = token.raw.replace(/^```\\w*\\n/, '').replace(/\\n```\\n?$/, '')\n    // setting this data attribute is what triggers the behavior to add the clipboard button\n    container.setAttribute('data-snippet-clipboard-copy-content', `${getNonce()}:${content}`)\n    container.classList.add('snippet-clipboard-content')\n    return container.outerHTML\n  },\n}\n\n/** Replaces diff code blocks with a stylized diff */\nconst diffHunkExtension: TokenizerAndRendererExtension = {\n  name: 'code',\n  renderer(token) {\n    if (token.type !== 'code') return false\n    let codeToken = token as Tokens.Code\n\n    // This regex will pull out the language and filepath\n    const [, lang = '', filepath = ''] = (codeToken.lang ?? '').match(/^(\\S*)\\s*(.*)$/) ?? []\n    if (lang !== 'diff') return false\n\n    // Re-parse the code block without highlighting\n    codeToken = lexer(codeToken.raw, {gfm: true})[0] as Tokens.Code\n\n    const element = document.createElement('copilot-inline-diff')\n    element.setAttribute('data-diff', codeToken.text)\n    element.setAttribute('data-filepath', filepath)\n    return element.outerHTML\n  },\n}\n\nexport function transformContentToHTMLWithAnnotations(\n  markdown: string | undefined,\n  references: CopilotChatReference[] | null,\n  annotations?: CopilotAnnotations,\n  isAssistive?: boolean,\n  agents?: CopilotChatAgent[],\n  fetchAgents?: () => Promise<CopilotChatAgent[]>,\n): SafeHTMLString {\n  if (!markdown) return '' as SafeHTMLString\n  if (!annotations?.CodeVulnerability)\n    return transformContentToHTML(markdown, references, [], isAssistive, agents, fetchAgents)\n\n  const isCodeToken = (token: Tokens.Generic): token is Tokens.Code => token.type === 'code'\n  const pluralizeVulnerability = (count: number): string =>\n    count === 1 ? `${count} vulnerability` : `${count} vulnerabilities`\n  const {CodeVulnerability: vulnerabilities} = annotations\n\n  const vulnerabilitiesContent = vulnerabilities.map(v => {\n    const {startOffset, endOffset} = v\n    const content = markdown.substring(startOffset, endOffset + 1)\n    return content\n  })\n\n  let vulnerabilityDisclaimerRendering = false\n  const codeVulnerabilityExtension: TokenizerAndRendererExtension = {\n    name: 'code',\n    renderer(token) {\n      if (!isCodeToken(token) || vulnerabilityDisclaimerRendering || !annotations?.CodeVulnerability) {\n        return false\n      }\n\n      vulnerabilityDisclaimerRendering = true\n      const tokenHasAnnotation = vulnerabilitiesContent.some(string => token.raw.includes(string))\n      const html = this.parser.parse([token])\n      vulnerabilityDisclaimerRendering = false\n\n      if (tokenHasAnnotation) {\n        const container = document.createElement('div')\n        const codeContent = document.createElement('div')\n        codeContent.classList.add('snippet-vulnerability-code')\n        codeContent.innerHTML = html\n\n        const vulnerabilitiesDetails = document.createElement('details')\n        vulnerabilitiesDetails.classList.add('snippet-vulnerabilities-details')\n        const vulnerabilitiesSummary = document.createElement('summary')\n        const chevron = document.createElement('div')\n        chevron.classList.add('snippet-vulnerability-chevron')\n        const shield = document.createElement('div')\n        shield.classList.add('snippet-vulnerability-shield-icon')\n\n        vulnerabilitiesSummary.textContent = `${pluralizeVulnerability(vulnerabilitiesContent.length)} detected`\n        vulnerabilitiesSummary.prepend(shield)\n        vulnerabilitiesSummary.appendChild(chevron)\n        vulnerabilitiesSummary.classList.add('snippet-vulnerability-summary')\n\n        vulnerabilitiesDetails.appendChild(vulnerabilitiesSummary)\n\n        for (const v of vulnerabilities) {\n          const vulnerability = document.createElement('div')\n          vulnerability.classList.add('snippet-vulnerability-details')\n          const vulnerabilityTitle = document.createElement('p')\n          vulnerabilityTitle.classList.add('snippet-vulnerability-details-title')\n          const vulnerabilityDescription = document.createElement('p')\n          vulnerabilityDescription.classList.add('snippet-vulnerability-details-description')\n          vulnerabilityTitle.textContent = v.details.uiType\n          vulnerabilityDescription.textContent = v.details.uiDescription\n          vulnerability.append(vulnerabilityTitle, vulnerabilityDescription)\n          vulnerabilitiesDetails.appendChild(vulnerability)\n        }\n\n        container.append(codeContent, vulnerabilitiesDetails)\n\n        return container.outerHTML\n      } else {\n        return html\n      }\n    },\n  }\n\n  return transformContentToHTML(markdown, references, [codeVulnerabilityExtension], isAssistive, agents, fetchAgents)\n}\n\nexport function transformContentToHTMLWithCitations(\n  markdown: string | undefined,\n  references: CopilotChatReference[] | null,\n  isAssistive?: boolean,\n  agents?: CopilotChatAgent[],\n  fetchAgents?: () => Promise<CopilotChatAgent[]>,\n): {html: SafeHTMLString; hasCitations: boolean; referenceMap: Map<number, number>} {\n  if (!markdown) {\n    return {html: '' as SafeHTMLString, hasCitations: false, referenceMap: new Map<number, number>()}\n  }\n  if (!references || references.length === 0) {\n    markdown = `We could not find anything related to your query in your selected knowledge base.\n    Copilot will try its best to answer your question but\n    risks of fabrication are higher without grounding in documentation.\\n\\n${markdown}`\n    references = []\n  }\n\n  const newCitationRegex = /\\[CitationID: ?(?<id>[0-9]{1,3})\\](?!\\()/i\n  const useNewCitations = newCitationRegex.test(markdown)\n  const citationRegex = useNewCitations ? newCitationRegex : /\\[\\^?(?<id>[0-9]{1,3})\\^?\\](?!\\()/\n  const citationRegexAnchored = new RegExp(`^${citationRegex.source}`, citationRegex.flags)\n  let hasCitations = false\n\n  /** a map of citation numbers in the source to the citation number we'll display */\n  let referenceMap: Map<number, number>\n  // don't rewrite citations if we're using old citation style\n  if (!useNewCitations) {\n    referenceMap = new Map(Array.from({length: references.length}, (_, i) => [i + 1, i + 1]))\n  } else {\n    referenceMap = new Map<number, number>()\n  }\n\n  const citationExtension: TokenizerAndRendererExtension = {\n    name: 'citation',\n    level: 'inline',\n    start(src: string) {\n      // find the next citation\n      return src.match(citationRegex)?.index\n    },\n    tokenizer(src: string) {\n      // consume some text, return a citation\n      const match = citationRegexAnchored.exec(src)\n      if (match) {\n        const id = match.groups?.id\n        if (id) {\n          return {\n            type: 'citation',\n            raw: match[0],\n            id,\n          }\n        }\n      }\n    },\n    renderer(token) {\n      // generate html for a citation\n      const link = document.createElement('a')\n      const n = parseInt(token.id as string)\n      const reference = references[n - 1]\n      if (!reference) {\n        return token.raw\n      }\n      const url = (reference as SnippetReference).url\n      if (!url) {\n        return token.raw\n      }\n      hasCitations = true\n      if (!referenceMap.has(n)) {\n        referenceMap.set(n, referenceMap.size + 1)\n      }\n      const displayIndex = referenceMap.get(n)!\n\n      link.setAttribute('href', url)\n      link.textContent = `[${displayIndex}]`\n      return link.outerHTML\n    },\n  }\n  const html = transformContentToHTML(markdown, references, [citationExtension], isAssistive, agents, fetchAgents)\n  return {html, hasCitations, referenceMap}\n}\n\nexport function numberReferences(\n  references: CopilotChatReference[],\n  referenceMap: Map<number, number> | null,\n): NumberedCopilotChatReference[] {\n  if (!referenceMap) {\n    return references.map((ref, i) => ({...ref, n: i + 1}))\n  }\n  const out = [] as NumberedCopilotChatReference[]\n  for (const [a, b] of referenceMap.entries()) {\n    const ref = references[a - 1]!\n    out.push({...ref, n: b})\n  }\n  out.sort((a, b) => a.n - b.n)\n  return out\n}\n\n/** finds the character index of the start of the start line (starting from 1) and the end of the end line */\nfunction findLines(str: string, startLine: number, endLine = startLine - 1) {\n  let index = -1\n  let startIndex = -1\n  let endIndex = -1\n\n  // eslint-disable-next-line no-constant-condition\n  for (let i = 1; true; i++) {\n    if (i === startLine) {\n      startIndex = index + 1\n    }\n    if (i === endLine + 1) {\n      endIndex = index\n      break\n    }\n    index = str.indexOf('\\n', index + 1)\n    if (index === -1) {\n      break\n    }\n  }\n\n  return {startIndex, endIndex}\n}\n\n/**\n * If `to` is an absolute URL, convert it to a relative URL if it's on the same origin. Otherwise returns it unmodified.\n *\n * e.g. if you're on \"https://github.com/foo/bar\" and you pass in \"https://github.com/biz/baz\", it will return /biz/baz.\n */\nfunction unabsoluteUrl(to: string) {\n  if (to.match(/^https?:\\/\\//)) {\n    let url: URL\n    try {\n      url = new URL(to, window.location.href)\n    } catch {\n      // if it's not a valid URL, don't worry about it\n      return to\n    }\n    if (url.origin === window.location.origin) {\n      return url.pathname + url.search + url.hash\n    }\n  }\n  return to\n}\n","import {attr, controller} from '@github/catalyst'\nimport hljs from 'highlight.js'\n\n// This regex will match single lines of code with the leading numbering format [23,23]\n// https://github.com/github/copilot-api/pull/3949\nconst LINE_REGEX = /^(?: *\\[(-?\\d+),(-?\\d+)\\])?([ +-])?(.*)$/\nconst PATH_REGEX = /^(.*?)(?::(\\d+(?:[,-]\\d+)*))?$/\nconst MAX_LINES = 30\n\ntype LineInfo = {\n  leftLineNumber: number | undefined\n  rightLineNumber: number | undefined\n  lineMarker: string\n  code: string\n  html?: string\n}\n\n@controller\nexport class CopilotInlineDiffElement extends HTMLElement {\n  @attr diff = ''\n  @attr filepath = ''\n\n  connectedCallback() {\n    const diffLines = this.diff.split('\\n')\n    const context = diffLines[0]?.trimStart().startsWith('@@') ? diffLines.shift() : ''\n    const code = diffLines.map(line => line.replace(LINE_REGEX, '$4')).join('\\n')\n    const highlightResult = hljs.highlightAuto(code)\n    const htmlLines = highlightResult.value.split('\\n')\n    const lineInfos = diffLines.map((line, i) => this.#parseLine(line, htmlLines[i]))\n    const highlightClass = `hljs language-${highlightResult.language ?? 'plaintext'}`\n    const [, path, lineNumbers] = this.filepath.match(PATH_REGEX) ?? []\n\n    const table = document.createElement('table')\n    table.className = 'diff-table file'\n\n    // Only add a file header if a filepath is provided\n    if (path) {\n      table.appendChild(this.#createFileHeaderRow(path))\n    }\n\n    // Only add header context if provided\n    if (context) {\n      table.appendChild(this.#createContextRow(context))\n    }\n\n    const ranges = this.#createRanges(lineNumbers)\n    let rangeIndex = 0\n    let totalLines = 0\n\n    for (const [start, end] of ranges) {\n      // Avoid potential overlapping ranges and collapsing only a few lines.\n      const nextRange = ranges[++rangeIndex]\n      const newEnd = nextRange && nextRange[0] - end <= 3 ? nextRange[0] - 1 : end\n      const lineInfosInRange = this.#getLinesInRange(start, newEnd, lineInfos)\n\n      totalLines += lineInfosInRange.length\n\n      // Only add up to MAX_LINES lines to the table.\n      for (const lineInfo of lineInfosInRange.slice(0, MAX_LINES)) {\n        table.appendChild(this.#createDiffLineRow(lineInfo, highlightClass))\n      }\n\n      // Add collapsed row if there is another range beyond this one or if the last range was not fully expanded\n      if (nextRange ? newEnd < nextRange[0] : lineInfosInRange.length > MAX_LINES) {\n        table.appendChild(this.#createCollapsedRow())\n      }\n    }\n\n    // Only add the table if there are valid lines to display\n    if (totalLines > 0) {\n      this.replaceChildren(table)\n    }\n  }\n\n  #parseLine(text: string, html?: string): LineInfo {\n    const matches = text.match(LINE_REGEX) ?? []\n\n    return {\n      leftLineNumber: matches[1] ? Number(matches[1]) : undefined,\n      rightLineNumber: matches[2] ? Number(matches[2]) : undefined,\n      lineMarker: matches[3] ?? '',\n      code: matches[4] ?? '',\n      html,\n    }\n  }\n\n  #getLinesInRange(start: number, end: number, lineInfos: LineInfo[]) {\n    // Prefer using the right (added) line numbers.\n    const rightLines = lineInfos.filter(\n      ({rightLineNumber}) => rightLineNumber && rightLineNumber >= start && rightLineNumber <= end,\n    )\n    if (rightLines.length) return rightLines\n\n    // If no right line numbers are found, fallback to using the left line numbers.\n    return lineInfos.filter(({leftLineNumber}) => leftLineNumber && leftLineNumber >= start && leftLineNumber <= end)\n  }\n\n  #createRanges(lineNumbers: string | undefined) {\n    if (!lineNumbers) {\n      // This range should cover the entire diff hunk.\n      return [[1, Number.MAX_SAFE_INTEGER]] as const\n    }\n\n    return lineNumbers\n      .split(',')\n      .filter(Boolean)\n      .map(range => {\n        const lines = range.split('-').map(Number)\n        const start = Math.max(1, lines[0] ?? 1)\n        const end = Math.max(start, lines[1] ?? lines[0] ?? 1)\n        return [start, end] as const\n      })\n      .sort((a, b) => a[0] - b[0])\n  }\n\n  #createFileHeaderRow(path: string) {\n    const row = document.createElement('tr')\n    const cell = document.createElement('th')\n\n    cell.className = 'file-header'\n    cell.setAttribute('colspan', '3')\n    cell.textContent = path\n    row.appendChild(cell)\n\n    return row\n  }\n\n  #createContextRow(context: string) {\n    const row = document.createElement('tr')\n    let cell = document.createElement('td')\n\n    cell.className = 'blob-num blob-code-hunk'\n    cell.setAttribute('colspan', '2')\n    row.appendChild(cell)\n\n    cell = document.createElement('td')\n    cell.className = 'blob-code blob-code-inner blob-code-hunk'\n    cell.textContent = context\n    row.appendChild(cell)\n\n    return row\n  }\n\n  #createCollapsedRow() {\n    const row = document.createElement('tr')\n    let cell = document.createElement('td')\n\n    cell.className = 'blob-num blob-code-hunk non-expandable'\n    cell.setAttribute('colspan', '2')\n    cell.setAttribute('data-line-number', '...')\n    row.appendChild(cell)\n\n    cell = document.createElement('td')\n    cell.className = 'blob-code blob-code-inner blob-code-hunk'\n    row.appendChild(cell)\n\n    return row\n  }\n\n  #createDiffLineRow(lineInfo: LineInfo, highlightClass: string) {\n    const {leftLineNumber, rightLineNumber, lineMarker, html} = lineInfo\n    const changeSuffix = lineMarker === '+' ? 'addition' : lineMarker === '-' ? 'deletion' : 'context'\n    const numClass = `blob-num blob-num-${changeSuffix}`\n    const codeClass = `blob-code blob-code-${changeSuffix} blob-code-inner blob-code-marker ${highlightClass}`\n\n    const row = document.createElement('tr')\n    let cell = document.createElement('td')\n\n    cell.className = numClass\n    cell.setAttribute('data-line-number', lineMarker === '+' ? '' : String(leftLineNumber))\n    row.appendChild(cell)\n\n    cell = document.createElement('td')\n    cell.className = numClass\n    cell.setAttribute('data-line-number', lineMarker === '-' ? '' : String(rightLineNumber))\n    row.appendChild(cell)\n\n    cell = document.createElement('td')\n    cell.className = codeClass\n    cell.innerHTML = html ?? ''\n    cell.setAttribute('data-code-marker', lineMarker)\n    row.appendChild(cell)\n\n    return row\n  }\n}\n","import type {NavigatorUA} from './@types/user-agent-data'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\n\nexport type NavigatorUserAgent = NavigatorUA\n\nexport const OS = {\n  Android: 'Android',\n  iOS: 'iOS',\n  macOS: 'macOS',\n  Windows: 'Windows',\n  Linux: 'Linux',\n  Unknown: 'Unknown',\n}\nexport type OS = (typeof OS)[keyof typeof OS]\n\nexport type OSInformation = {\n  os: OS\n  isAndroid: boolean\n  isIOS: boolean\n  isLinux: boolean\n  isMacOS: boolean\n  isWindows: boolean\n  isDesktop: boolean\n  isMobile: boolean\n}\n\nexport function getOS(): OSInformation {\n  let os: OS = OS.Unknown\n  let isMobileOS = false\n  if (ssrSafeWindow) {\n    // TypeScript doesn't 'know' about userAgentData yet\n    const navigator = ssrSafeWindow.navigator as Navigator & NavigatorUA\n    const userAgent = navigator.userAgent\n    const platform = navigator?.userAgentData?.platform || navigator.platform\n    const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K', 'macOS']\n    const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE']\n    const iosPlatforms = ['iPhone', 'iPad', 'iPod']\n\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      os = OS.macOS\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      os = OS.iOS\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      os = OS.Windows\n    } else if (/Android/.test(userAgent)) {\n      os = OS.Android\n    } else if (/Linux/.test(platform)) {\n      os = OS.Linux\n    }\n    isMobileOS = navigator?.userAgentData?.mobile ?? (os === OS.Android || os === OS.iOS)\n  }\n\n  return {\n    os,\n    isAndroid: os === OS.Android,\n    isIOS: os === OS.iOS,\n    isMacOS: os === OS.macOS,\n    isWindows: os === OS.Windows,\n    isLinux: os === OS.Linux,\n    isDesktop: os === OS.macOS || os === OS.Windows || os === OS.Linux,\n    isMobile: isMobileOS,\n  }\n}\n\nexport function isMobile(): boolean {\n  return getOS().isMobile\n}\n\nexport function isDesktop(): boolean {\n  return getOS().isDesktop\n}\n\nexport function isAndroid(): boolean {\n  return getOS().isAndroid\n}\n\nexport function isIOS(): boolean {\n  return getOS().isIOS\n}\n\nexport function isMacOS(): boolean {\n  return getOS().isMacOS\n}\n\nexport function isWindows(): boolean {\n  return getOS().isWindows\n}\n\nexport function isLinux(): boolean {\n  return getOS().isLinux\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","import {useCallback} from 'react'\nimport {getSelectedLineRange} from './utils'\nimport type {SyntheticChangeEmitter} from '@github-ui/use-synthetic-change'\n\ntype UseListEditingSettings = {\n  emitChange: SyntheticChangeEmitter\n}\n\ntype UseListEditingResult = {\n  onKeyDown: React.KeyboardEventHandler<HTMLTextAreaElement>\n}\n\nconst calculateNextListItemStarter = ({leadingWhitespace = '', delimeter, taskBox, text}: ListItem) => {\n  if (!text) return null // Delete the current list item if the user presses enter without typing anything\n\n  const updatedDelimeter = typeof delimeter === 'number' ? `${delimeter + 1}.` : delimeter\n  const maybeEmptyTaskBox = taskBox ? ' [ ]' : ''\n  return `\\n${leadingWhitespace}${updatedDelimeter}${maybeEmptyTaskBox} `\n}\n\nconst calculatePreviousListItemStarter = ({leadingWhitespace = '', delimeter, taskBox}: ListItem) => {\n  const updatedDelimeter = typeof delimeter === 'number' ? `${delimeter}.` : delimeter\n  const maybeEmptyTaskBox = taskBox ? ' [ ]' : ' '\n  return `${updatedDelimeter}${leadingWhitespace}${maybeEmptyTaskBox}\\n`\n}\n\n/**\n * Adapted from: https://github.com/github/github/blob/ef649172de6802a699638e22798396ca78d61dc8/app/assets/modules/github/behaviors/task-list.ts#L404\n *\n * Groups:\n *  0. Leading whitespace\n *  1. Delimeter\n *  2. Item number (optional)\n *     - Note that we don't have item letter - we don't do autocomplete for lettered lists like (a, b, c) or (i, ii, iii) because it's too complex\n *  3. Task box (optional)\n *  4. Everything following\n *\n * This part of the regex ^(\\s*(?:>\\s*)*(?:[*-]\\s{1,4})*) defines the allowed leading content for a list item.\n * It allows for:\n * - unlimited whitespace (at the start of the line)\n * - any number of (\">\" followed by unlimited spaces) (for blockquotes)\n * - any number of (\"*\" or \"-\" followed by 1-4 spaces) (for nested lists)\n */\nexport const listItemRegex = /^(\\s*(?:>\\s*)*(?:[*-]\\s{1,4})*)([*-]|(\\d+)\\.)(\\s{1,4})(?:(\\[[\\sx]\\])\\s)?(.*)/i\n\nexport type ListItem = {\n  leadingWhitespace: string\n  middleWhitespace: string\n  text: string\n  delimeter: '-' | '*' | number\n  taskBox: '[ ]' | '[x]' | null\n}\n\ntype NumericListItem = ListItem & {delimeter: number}\n\nconst isNumericListItem = (item: ListItem | null): item is NumericListItem => typeof item?.delimeter === 'number'\n\nexport const parseListItem = (line: string): ListItem | null => {\n  const result = listItemRegex.exec(line)\n  if (!result) return null\n  const [, leadingWhitespace = '', fullDelimeter, itemNumberStr = '', middleWhitespace, taskBox = null, text] = result\n  const itemNumber = Number.parseInt(itemNumberStr, 10)\n  const delimeter = Number.isNaN(itemNumber) ? (fullDelimeter as '*' | '-') : itemNumber\n\n  // fixme: handle types better\n  return {\n    leadingWhitespace,\n    text: text!,\n    delimeter,\n    middleWhitespace: middleWhitespace!,\n    taskBox: taskBox as '[ ]' | '[x]' | null,\n  }\n}\n\nexport const listItemToString = (item: ListItem) =>\n  typeof item.delimeter === 'number'\n    ? `${item.leadingWhitespace}${`${item.delimeter}.`}${item.middleWhitespace}${item.text}`\n    : `${item.leadingWhitespace}${item.delimeter}${item.middleWhitespace}${item.taskBox || ''} ${item.text}`\n\n/**\n * Provides support for list editing in the Markdown editor. This includes inserting new\n * list items and auto-incrementing numeric lists.\n */\nexport const useListEditing = ({emitChange}: UseListEditingSettings): UseListEditingResult => {\n  const incrementFollowingNumericLines = useCallback(\n    (textarea: HTMLTextAreaElement, lineRange?: [number, number]) => {\n      // this must be recalculated instead of passed because we are on a new line now\n      const [currentLineStart, currentLineEnd] = lineRange || getSelectedLineRange(textarea)\n      const currentLineText = textarea.value.slice(currentLineStart, currentLineEnd)\n      const currentLineItem = parseListItem(currentLineText)\n      if (!isNumericListItem(currentLineItem)) return\n\n      // Strip off the leading newline by adding 1\n      const followingText = textarea.value.slice(currentLineEnd + 1)\n      const followingLines = followingText.split(/\\r?\\n/)\n\n      const followingNumericListItems: NumericListItem[] = []\n      let prevItemNumber = currentLineItem.delimeter\n      for (const line of followingLines) {\n        const listItem = parseListItem(line)\n\n        if (!isNumericListItem(listItem) || listItem.delimeter !== prevItemNumber) break\n\n        followingNumericListItems.push(listItem)\n        prevItemNumber++\n      }\n\n      if (followingNumericListItems.length === 0) return\n\n      // don't forget to re-add the leading newline stripped off earlier\n      const updatedItems = `\\n${followingNumericListItems\n        .map(item => listItemToString({...item, delimeter: item.delimeter + 1}))\n        .join('\\n')}`\n\n      emitChange(updatedItems, [currentLineEnd, currentLineEnd + updatedItems.length + 1], textarea.selectionStart)\n    },\n    [emitChange],\n  )\n\n  const onKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (event.key === 'Enter' && !event.shiftKey && !event.defaultPrevented) {\n        const textarea = event.currentTarget\n\n        const [activeLineStart, activeLineEnd] = getSelectedLineRange(textarea)\n\n        // current line text without any of the selected text\n        const activeLineValue =\n          textarea.value.slice(activeLineStart, textarea.selectionStart) +\n          textarea.value.slice(textarea.selectionEnd, activeLineEnd)\n\n        const listItem = parseListItem(activeLineValue)\n        if (!listItem) return // not currently editing a list - let the browser handle the event\n\n        event.preventDefault()\n\n        if (textarea.selectionStart === activeLineStart) {\n          // Cursor is at the beginning of a line, potentially before a numeric list item\n          const previousItemStarter = calculatePreviousListItemStarter(listItem)\n\n          if (previousItemStarter === null) {\n            emitChange('', [activeLineStart, textarea.selectionEnd])\n          } else {\n            emitChange(previousItemStarter)\n            // increment following lines as a separate event so the user can separately undo the change\n            incrementFollowingNumericLines(textarea, [\n              activeLineStart,\n              activeLineStart + previousItemStarter.length - 1,\n            ])\n          }\n        } else {\n          // Cursor is not at the beginning of a line, potentially after a numeric list item\n          const nextItemStarter = calculateNextListItemStarter(listItem)\n\n          if (nextItemStarter === null) {\n            emitChange('', [activeLineStart, textarea.selectionEnd])\n          } else {\n            emitChange(nextItemStarter)\n            // increment following lines as a separate event so the user can separately undo the change\n            incrementFollowingNumericLines(textarea)\n          }\n        }\n      }\n    },\n    [emitChange, incrementFollowingNumericLines],\n  )\n\n  return {onKeyDown}\n}\n","import {isMacOS} from '@github-ui/get-os'\n\nexport const getSelectedLineRange = (textarea: HTMLTextAreaElement): [number, number] => {\n  // Subtract one from the caret position so the newline found is not the one _at_ the caret position\n  // then add one because we don't want to include the found newline. Also changes -1 (not found) result to 0\n  const start = textarea.value.lastIndexOf('\\n', textarea.selectionStart - 1) + 1\n\n  // activeLineEnd will be the index of the next newline inclusive, which works because slice is last-index exclusive\n  let end = textarea.value.indexOf('\\n', textarea.selectionEnd)\n  if (end === -1) end = textarea.value.length\n\n  return [start, end]\n}\n\nexport const markdownComment = (text: string) => `<!-- ${text.replaceAll('--', '\\\\-\\\\-')} -->`\n\nexport const markdownLink = (text: string, url: string) =>\n  `[${text.replaceAll('[', '\\\\[').replaceAll(']', '\\\\]')}](${url.replaceAll('(', '\\\\(').replaceAll(')', '\\\\)')})`\n\nexport const markdownImage = (altText: string, url: string) => `!${markdownLink(altText, url)}`\n\nexport const isModifierKey = (event: KeyboardEvent | React.KeyboardEvent<unknown>) =>\n  // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n  isMacOS() ? event.metaKey : event.ctrlKey\n","import {useCallback, useEffect, useRef, useState} from 'react'\n// fixme: circular dependency\nimport type {ListItem} from '@github-ui/markdown-editor/list-editing'\nimport {listItemToString, parseListItem} from '@github-ui/markdown-editor/list-editing'\nimport useIsomorphicLayoutEffect from '@primer/react/lib-esm/utils/useIsomorphicLayoutEffect'\n\ntype TaskListItem = ListItem & {taskBox: '[ ]' | '[x]'}\n\n// Make check for code fences more robust per spec: https://github.github.com/gfm/#fenced-code-blocks\nexport const parseCodeFenceBegin = (line: string) => {\n  const match = line.match(/^ {0,3}(`{3,}|~{3,})[^`]*$/)\n  return match ? match[1] : null\n}\n\nexport const isCodeFenceEnd = (line: string, fence: string) => {\n  const regex = new RegExp(`^ {0,3}${fence}${fence[0]}* *$`)\n  return regex.test(line)\n}\n\nexport const isTaskListItem = (item: ListItem | null): item is TaskListItem => typeof item?.taskBox === 'string'\n\nconst toggleTaskListItem = (item: TaskListItem): TaskListItem => ({\n  ...item,\n  taskBox: item.taskBox === '[ ]' ? '[x]' : '[ ]',\n})\n\ntype UseListInteractionSettings = {\n  htmlContainer?: HTMLElement\n  markdownValue: string\n  onChange: (markdown: string) => void | Promise<void>\n  disabled?: boolean\n  dependencies?: unknown[]\n}\n\n/**\n * Adds support for list interaction to rendered Markdown.\n *\n * Currently only supports checking / unchecking list items - reordering and task-item to\n * issue conversion are not supported yet.\n */\nexport const useListInteraction = ({\n  htmlContainer,\n  markdownValue,\n  onChange,\n  disabled = false,\n  dependencies = [],\n}: UseListInteractionSettings) => {\n  // Storing the value in a ref allows not using the markdown value as a dependency of\n  // onToggleItem, which would mean we'd have to re-bind the event handlers on every change\n  const markdownRef = useRef(markdownValue)\n\n  useIsomorphicLayoutEffect(() => {\n    markdownRef.current = markdownValue\n  }, [markdownValue])\n\n  const onToggleItem = useCallback(\n    (toggledItemIndex: number) => () => {\n      const lines = markdownRef.current.split(/\\r?\\n/)\n      let currentCodeFence: string | null | undefined = null\n\n      for (let lineIndex = 0, taskIndex = 0; lineIndex < lines.length; lineIndex++) {\n        // fixme: fix type assertion\n        const line = lines[lineIndex]!\n\n        if (!currentCodeFence) {\n          currentCodeFence = parseCodeFenceBegin(line)\n        } else if (isCodeFenceEnd(line, currentCodeFence)) {\n          currentCodeFence = null\n          continue\n        }\n\n        if (currentCodeFence) continue\n\n        const parsedLine = parseListItem(line)\n\n        if (!isTaskListItem(parsedLine)) continue\n\n        if (taskIndex === toggledItemIndex) {\n          const updatedLine = listItemToString(toggleTaskListItem(parsedLine))\n          lines.splice(lineIndex, 1, updatedLine)\n\n          const updatedMarkdown = lines.join('\\n')\n          markdownRef.current = updatedMarkdown\n\n          onChange(updatedMarkdown)\n          return\n        }\n\n        taskIndex++\n      }\n    },\n    [onChange],\n  )\n\n  const [checkboxElements, setCheckboxElements] = useState<HTMLInputElement[]>([])\n\n  useEffect(\n    () => {\n      setCheckboxElements(\n        Array.from(\n          htmlContainer?.querySelectorAll<HTMLInputElement>('input[type=checkbox].task-list-item-checkbox') ?? [],\n        ),\n      )\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [htmlContainer, ...dependencies],\n  )\n\n  // This could be combined with the other effect, but then the checkboxes might have a flicker\n  // of being disabled between cleanup & setup\n  useEffect(\n    function enableOrDisableCheckboxes() {\n      const cleanupFns = checkboxElements.map(el => {\n        const previouslyDisabled = el.disabled\n        el.disabled = disabled\n\n        return () => {\n          el.disabled = previouslyDisabled\n        }\n      })\n\n      return () => {\n        for (const fn of cleanupFns) fn()\n      }\n    },\n    [checkboxElements, disabled],\n  )\n\n  useEffect(\n    function bindEventListeners() {\n      const cleanupFns = checkboxElements.map((el, i) => {\n        const toggleHandler = onToggleItem(i)\n        el.addEventListener('change', toggleHandler)\n\n        return () => el.removeEventListener('change', toggleHandler)\n      })\n\n      return () => {\n        for (const fn of cleanupFns) fn()\n      }\n    },\n    [checkboxElements, onToggleItem],\n  )\n}\n","import {GitHubAvatar} from '@github-ui/github-avatar'\nimport type {AppListing, FeaturedCustomer} from '../../types'\nimport {assertNever} from '../../utilities/assert-never'\nimport {joinWords} from '../../utilities/join-words'\nimport {Link} from '@primer/react'\nimport {orgHovercardPath} from '@github-ui/paths'\n\nexport enum TagSectionIdentifier {\n  Category = 'Category',\n  SupportedLanguages = 'Supported languages',\n  FromTheDeveloper = 'From the developer',\n  Customers = 'Customers',\n}\n\nexport function TagSection({\n  identifier,\n  listing,\n  supportedLanguages,\n  customers,\n}: {\n  identifier: TagSectionIdentifier\n  listing: AppListing\n  supportedLanguages: string[]\n  customers: FeaturedCustomer[]\n}) {\n  const CategorySectionContent = () => {\n    return (\n      <>\n        {listing.primaryCategory && (\n          <a\n            href={`/marketplace?type=apps&category=${listing.primaryCategory}`}\n            className=\"m-0 topic-tag topic-tag-large topic-tag-link f6\"\n            data-testid=\"category-section-primary-category\"\n          >\n            {listing.primaryCategory}\n          </a>\n        )}\n        {listing.secondaryCategory && (\n          <a\n            href={`/marketplace?type=apps&category=${listing.secondaryCategory}`}\n            className=\"m-0 topic-tag topic-tag-large topic-tag-link f6\"\n            data-testid=\"category-section-secondary-category\"\n          >\n            {listing.secondaryCategory}\n          </a>\n        )}\n      </>\n    )\n  }\n\n  const SupportedLanguagesSectionContent = () => {\n    const joinedLanguages = joinWords(supportedLanguages)\n    return <p data-testid=\"supported-languages-section\">{joinedLanguages}</p>\n  }\n\n  const FromTheDeveloperSectionContent = () => {\n    return (\n      <>\n        {listing.supportUrl && <a href={listing.supportUrl}>Support</a>}\n        {listing.statusUrl && <a href={listing.statusUrl}>Status</a>}\n        {listing.documentationUrl && <a href={listing.documentationUrl}>Documentation</a>}\n        {listing.pricingUrl && <a href={listing.pricingUrl}>Pricing</a>}\n        {listing.privacyPolicyUrl && <a href={listing.privacyPolicyUrl}>Privacy Policy</a>}\n        {listing.tosUrl && <a href={listing.tosUrl}>Terms of Service</a>}\n      </>\n    )\n  }\n\n  const CustomersSectionContent = () => {\n    return (\n      <>\n        {customers.map(customer => (\n          <Link\n            key={customer.displayLogin}\n            href={`/${customer.displayLogin}`}\n            data-hovercard-type=\"organization\"\n            data-hovercard-url={orgHovercardPath({owner: customer.displayLogin})}\n          >\n            <GitHubAvatar square sx={{mr: 1, mb: 1}} size={32} src={customer.image || ''} alt={customer.displayLogin} />\n          </Link>\n        ))}\n      </>\n    )\n  }\n\n  const content = (() => {\n    switch (identifier) {\n      case TagSectionIdentifier.Category:\n        return CategorySectionContent()\n      case TagSectionIdentifier.SupportedLanguages:\n        return SupportedLanguagesSectionContent()\n      case TagSectionIdentifier.FromTheDeveloper:\n        return FromTheDeveloperSectionContent()\n      case TagSectionIdentifier.Customers:\n        return CustomersSectionContent()\n      default:\n        assertNever(identifier)\n    }\n  })()\n\n  return (\n    <div>\n      <h3 className=\"mt-4 f5 fgColor-muted lh-condensed-ultra\">{identifier}</h3>\n      {identifier === TagSectionIdentifier.FromTheDeveloper ? (\n        <div className=\"mt-2 d-flex flex-column flex-items-start gap-1\">{content}</div>\n      ) : (\n        <div className=\"mt-2 d-flex flex-wrap gap-1\">{content}</div>\n      )}\n    </div>\n  )\n}\n\ntry{ TagSection.displayName ||= 'TagSection' } catch {}\ntry{ CategorySectionContent.displayName ||= 'CategorySectionContent' } catch {}\ntry{ SupportedLanguagesSectionContent.displayName ||= 'SupportedLanguagesSectionContent' } catch {}\ntry{ FromTheDeveloperSectionContent.displayName ||= 'FromTheDeveloperSectionContent' } catch {}\ntry{ CustomersSectionContent.displayName ||= 'CustomersSectionContent' } catch {}","import {Box, Textarea} from '@primer/react'\nimport {useCallback, useRef, type FormEvent} from 'react'\nimport {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {IconButtonWithTooltip} from '@github-ui/icon-button-with-tooltip'\nimport {PaperAirplaneIcon, SquareFillIcon} from '@primer/octicons-react'\nimport {usePlaygroundState, usePlaygroundManager} from '../../../utils/playground-manager'\n\n// TODO: This code could be shared from copilot-chat (if exported)\nfunction SubmitButton({isDisabled, onSubmit}: {isDisabled?: boolean; onSubmit: () => void}) {\n  return (\n    <IconButtonWithTooltip\n      variant=\"invisible\"\n      size=\"small\"\n      onClick={onSubmit}\n      icon={PaperAirplaneIcon}\n      aria-label=\"Send now\"\n      disabled={isDisabled}\n      label=\"Send now\"\n      tooltipDirection=\"w\"\n    />\n  )\n}\n\nexport function PlaygroundChatInput() {\n  const manager = usePlaygroundManager()\n  const messagesState = usePlaygroundState()\n\n  const MIN_HEIGHT = 44\n  const MAX_HEIGHT = 300\n\n  const text = messagesState.chatInput\n  const setText = useCallback(\n    (_text: string) => {\n      manager.setChatInput(_text)\n    },\n    [manager],\n  )\n\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n  const textAreaScrollContainer = useRef<HTMLDivElement>(null)\n\n  const handleSubmit = async (e?: FormEvent) => {\n    e?.preventDefault()\n\n    if (messagesState.isLoading) return\n    if (text.trim().length === 0) return\n\n    manager.sendMessage(messagesState, text)\n    setText('')\n  }\n\n  const handleInput = useCallback(\n    (e: FormEvent<HTMLTextAreaElement>) => {\n      setText((e.target as HTMLTextAreaElement).value)\n    },\n    [setText],\n  )\n\n  const handleKeyDown = async (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n    if (e.key === 'Escape') {\n      e.preventDefault()\n      manager.stopStreaming()\n    }\n\n    // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n    else if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.altKey && !e.nativeEvent.isComposing) {\n      e.preventDefault()\n      await handleSubmit()\n    }\n  }\n\n  useLayoutEffect(() => {\n    let tries = 0\n\n    function adjustHeight() {\n      if (!textAreaRef.current || !textAreaScrollContainer.current) return\n\n      const currentScrollPosition = textAreaScrollContainer.current.scrollTop\n\n      tries++\n      if (textAreaRef.current.scrollHeight === 0 && tries < 10) {\n        // because this is (often) in a Portal, useLayoutEffect() can run before we're inserted in the DOM, and we are\n        // thus unable to get a correct scrollHeight. in that case, let's try again in a bit\n        setTimeout(adjustHeight, 1)\n      }\n\n      textAreaRef.current.style.height = '0'\n      const scrollHeight = textAreaRef.current.scrollHeight\n      const containerHeight = Math.min(scrollHeight, MAX_HEIGHT)\n\n      // textareaPreviewRef.current.style.height = `${scrollHeight}px`\n      textAreaRef.current.style.height = `${scrollHeight}px`\n      textAreaScrollContainer.current.style.height = `${containerHeight}px`\n      textAreaScrollContainer.current.scrollTop = currentScrollPosition\n    }\n\n    adjustHeight()\n  }, [text, textAreaRef])\n\n  const StopButton = ({onSubmit}: {onSubmit: () => void}) => {\n    return (\n      <IconButtonWithTooltip\n        variant=\"invisible\"\n        size=\"small\"\n        onClick={onSubmit}\n        icon={SquareFillIcon}\n        aria-label=\"Stop response\"\n        label=\"Stop\"\n        tooltipDirection=\"w\"\n      />\n    )\n  }\n\n  return (\n    <Box\n      className=\"copilot-chat-input\"\n      sx={{\n        bg: 'canvas.subtle',\n        position: 'relative',\n        border: '1px solid var(--borderColor-default, var(--color-border-default))',\n        borderRadius: 'var(--borderRadius-medium)',\n        overflow: 'hidden',\n        display: 'flex',\n        alignItems: 'end',\n        gap: 2,\n        backgroundColor: 'canvas.default',\n        px: 2,\n        mr: 3,\n\n        '> div': {flex: 1},\n\n        ':focus-within .copilot-keyboard-shortcuts': {\n          opacity: 1,\n          visibility: 'visible',\n        },\n\n        ':has(textarea:focus)': {\n          outline: '2px solid var(--focus-outlineColor, var(--color-accent-emphasis))',\n          borderColor: 'transparent',\n        },\n      }}\n    >\n      <Box\n        as=\"form\"\n        sx={{\n          display: 'flex',\n          alignItems: 'end',\n          flexGrow: 1,\n          '.copilot-chat-textarea::placeholder': {userSelect: 'none'},\n        }}\n        onSubmit={handleSubmit}\n      >\n        <Box\n          ref={textAreaScrollContainer}\n          className=\"copilot-chat-textarea-scroll-container\"\n          sx={{\n            maxHeight: '30dvh',\n            minHeight: `${MIN_HEIGHT}px`,\n            overflowY: 'auto',\n            position: 'relative',\n            '> div:first-child': {position: 'static'},\n            flexGrow: 1,\n          }}\n        >\n          <Textarea\n            // id={copilotChatTextAreaId}\n            className=\"copilot-chat-textarea\"\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            spellCheck=\"false\"\n            role=\"textbox\"\n            aria-multiline=\"true\"\n            block\n            ref={textAreaRef}\n            resize=\"none\"\n            onKeyDown={handleKeyDown}\n            disabled={messagesState.chatClosed}\n            // onScroll={synchronizeScroll}\n            onInput={handleInput}\n            placeholder=\"Type your prompt\"\n            value={text}\n            sx={{\n              border: 'none',\n              borderRadius: 0,\n              borderTopLeftRadius: 'var(--borderRadius-medium)',\n              borderTopRightRadius: 'var(--borderRadius-medium)',\n              display: 'contents',\n              '> textarea': {\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                background: 'transparent',\n                caretColor: 'var(--fgColor-default, var(--color-fg-default))',\n                overflowY: 'hidden',\n                px: 2,\n                py: '12px',\n                verticalAlign: 'middle',\n                resize: 'none',\n                zIndex: 1,\n              },\n              ':focus-within': {\n                boxShadow: 'none',\n              },\n            }}\n          />\n        </Box>\n\n        <span className=\"mb-2\">\n          {messagesState.isLoading ? (\n            <StopButton\n              onSubmit={() => {\n                manager.stopStreaming()\n              }}\n            />\n          ) : (\n            <SubmitButton\n              isDisabled={text.trim().length === 0 || messagesState.isLoading || messagesState.chatClosed}\n              onSubmit={() => {\n                handleSubmit()\n              }}\n            />\n          )}\n        </span>\n      </Box>\n    </Box>\n  )\n}\n\ntry{ SubmitButton.displayName ||= 'SubmitButton' } catch {}\ntry{ PlaygroundChatInput.displayName ||= 'PlaygroundChatInput' } catch {}\ntry{ StopButton.displayName ||= 'StopButton' } catch {}","import {debounce} from '@github/mini-throttle'\nimport {PlaygroundChatInput} from './PlaygroundChatInput'\nimport {PlaygroundChatMessage} from './PlaygroundChatMessage'\nimport {useEffect, useCallback, useRef, useState} from 'react'\nimport {SidebarSelectionOptions, usePlaygroundManager, usePlaygroundState} from '../../../utils/playground-manager'\nimport {Box, Button, IconButton, SegmentedControl} from '@primer/react'\n\nimport {\n  getSavedPlaygroundMessages,\n  setPlaygroundMessages,\n  type StoredChatMessages,\n} from '../../../utils/playground-local-storage'\nimport type {PlaygroundMessage} from '../../../utils/model-client'\nimport {ModelLegalTerms} from './GettingStartedDialog/ModelLegalTerms'\nimport {SidebarExpandIcon, SlidersIcon, SyncIcon, InfoIcon, HistoryIcon} from '@primer/octicons-react'\nimport {PlaygroundCodeLanguage} from './PlaygroundCodeLanguage'\nimport PlayGroundChatEmptyState from './PlaygroundChatEmptyState'\nimport {PlaygroundCodeSDK} from './PlaygroundCodeSDK'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {useLocation} from 'react-router-dom'\nimport {ModelUrlHelper} from '../../../utils/model-url-helper'\nimport {PlaygroundCodeSnippet} from './PlaygroundCodeSnippet'\nimport {PlaygroundJSON} from './PlaygroundJSON'\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\n\nenum PlaygroundContentOption {\n  CHAT = 0,\n  CODE = 1,\n  JSON = 2,\n}\n\nexport function PlaygroundChat() {\n  const playgroundState = usePlaygroundState()\n  const {messages, isLoading, showParameters, iceBreakerCheckPending} = playgroundState\n\n  const lastIndex = messages.length - 1\n  const messagesContainerRef = useRef<HTMLDivElement>(null)\n  const scrolledToBottomRef = useRef(true)\n  const manager = usePlaygroundManager()\n  const model = manager.model\n  const modelInputSchema = manager.modelInputSchema\n  const [history, setHistory] = useState<PlaygroundMessage[]>([])\n\n  const navigate = useNavigate()\n\n  const [toolbarContent, setToolbarContent] = useState<React.ReactNode | null>(null)\n  const [fullWidthToolbarContent, setFullWidthToolbarContent] = useState<React.ReactNode | null>(null)\n\n  const lastPathComponent = useLocation().pathname.split('/').pop()?.toLowerCase()\n\n  const jsonFeatureFlag = useFeatureFlag('project_neutron_json')\n\n  const [selectedOption, setSelectedOption] = useState<number>(() => {\n    if (lastPathComponent === ModelUrlHelper.chatSuffix) {\n      return PlaygroundContentOption.CHAT\n    }\n    if (lastPathComponent === ModelUrlHelper.codeSuffix) {\n      return PlaygroundContentOption.CODE\n    }\n    if (lastPathComponent === ModelUrlHelper.jsonSuffix) {\n      return PlaygroundContentOption.JSON\n    }\n\n    return PlaygroundContentOption.CHAT\n  })\n  const canRestoreHistory = history.length > 0 && !messages.length\n\n  const scrollToBottom = useCallback(() => {\n    const forceScroll = false // Might be needed later\n\n    function isScrollable(element: HTMLElement): boolean {\n      if (!element.scrollTo) return false // This happens in the jest tests on CI\n      return window.getComputedStyle(element).overflowY === 'auto'\n    }\n\n    if (!messagesContainerRef.current) return // This is not expected\n    if (!scrolledToBottomRef.current && !forceScroll) return // The user has scrolled up, let's not scroll them back down\n\n    // Depending on the screen size and the mode, we might either have a scroll\n    // container around the messages, or we might use the window scroll.\n    if (isScrollable(messagesContainerRef.current)) {\n      messagesContainerRef.current.scrollTo(0, messagesContainerRef.current.scrollHeight)\n    } else {\n      window.scrollTo(0, document.body.scrollHeight)\n    }\n  }, [])\n\n  useEffect(() => {\n    const savedMessages = getSavedPlaygroundMessages()\n    const chatHistory = savedMessages && savedMessages.modelName === manager.model.name ? savedMessages.messages : []\n    setHistory(chatHistory)\n    // Get messages and preferred language from the local storage only once on load\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages, scrollToBottom])\n\n  const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\n    const element = e.target as HTMLElement\n    // This calculation can be finnicky with fractional pixels. If we're within 1px of the bottom, we are close enough.\n    scrolledToBottomRef.current = Math.abs(element.scrollHeight - element.scrollTop - element.clientHeight) < 1\n  }, [])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debounceSetPlaygroundMessages = useCallback(\n    debounce((newMessages: StoredChatMessages) => {\n      setPlaygroundMessages(newMessages)\n    }, 200),\n    [],\n  )\n\n  useEffect(() => {\n    if (messages.length > 0) {\n      const chatMessages = {\n        modelName: manager.model.name,\n        messages,\n      }\n      debounceSetPlaygroundMessages(chatMessages)\n    }\n  }, [manager.model.name, messages, debounceSetPlaygroundMessages])\n\n  const handleClearHistory = () => {\n    manager.resetHistory(true)\n    setHistory([])\n  }\n\n  const handleRestoreHistory = () => {\n    manager.setMessages(history)\n  }\n\n  const RestoreHistoryButton = () => {\n    return (\n      <Box className=\"position-sticky d-flex flex-justify-end\" sx={{top: '1rem', marginBottom: '-2rem', zIndex: 1}}>\n        <IconButton\n          data-testid=\"restore-history-button\"\n          icon={HistoryIcon}\n          size=\"small\"\n          onClick={handleRestoreHistory}\n          sx={{display: ['flex', 'none', 'none']}}\n          aria-label=\"Restore last session\"\n        />\n        <Button size=\"small\" onClick={handleRestoreHistory} sx={{display: ['none', 'flex', 'flex']}}>\n          Restore last session\n        </Button>\n      </Box>\n    )\n  }\n\n  const handleOptionChange = (option: PlaygroundContentOption) => {\n    setSelectedOption(option)\n    switch (option) {\n      case PlaygroundContentOption.CHAT:\n        navigate(ModelUrlHelper.playgroundUrl(model))\n        break\n      case PlaygroundContentOption.CODE:\n        navigate(ModelUrlHelper.playgroundCodeUrl(model))\n        break\n      case PlaygroundContentOption.JSON:\n        navigate(ModelUrlHelper.playgroundJsonUrl(model))\n        break\n    }\n  }\n\n  const smallSizeForSegmentControl = {\n    height: '28px',\n    fontSize: 1,\n  }\n\n  const handleRegenerate = useCallback(\n    (index: number) => {\n      if (index > messages.length) return\n      const isLastResponse = index + 1 === messages.length\n      if (!isLastResponse) return\n      const text = messages && messages[index - 1]?.message\n      if (!text) return\n      // Remove the latest message and response\n      const filteredMessages = messages.slice(0, -2)\n      const newPlaygroundState = {...playgroundState, messages: filteredMessages}\n      manager.sendMessage(newPlaygroundState, text)\n    },\n    [manager, messages, playgroundState],\n  )\n\n  const renderToolbar = (option: PlaygroundContentOption) => {\n    switch (option) {\n      case PlaygroundContentOption.CHAT:\n        return (\n          <>\n            {canRestoreHistory ? <RestoreHistoryButton /> : null}\n            <IconButton\n              icon={SyncIcon}\n              size=\"small\"\n              aria-label=\"Reset chat history\"\n              disabled={messages.length === 0}\n              onClick={handleClearHistory}\n            />\n          </>\n        )\n      case PlaygroundContentOption.CODE: {\n        return (\n          <>\n            <PlaygroundCodeLanguage />\n            <PlaygroundCodeSDK />\n          </>\n        )\n      }\n      case PlaygroundContentOption.JSON: {\n        return (\n          <>\n            {canRestoreHistory ? <RestoreHistoryButton /> : null}\n            {toolbarContent}\n          </>\n        )\n      }\n    }\n  }\n\n  const renderOption = (option: PlaygroundContentOption) => {\n    switch (option) {\n      case PlaygroundContentOption.CHAT:\n        return (\n          <div className=\"pl-3 pb-2 overflow-auto flex-1 d-flex flex-column\">\n            <div\n              className=\"flex-1 d-flex flex-column flex-justify-between pr-3 overflow-auto\"\n              ref={messagesContainerRef}\n              onScroll={handleScroll}\n            >\n              <div className=\"flex-1 position-relative pt-3\">\n                {messages.length > 0\n                  ? messages.map((message, index) => (\n                      <PlaygroundChatMessage\n                        message={message}\n                        index={index}\n                        key={`${index}-${message.timestamp}`}\n                        isLoading={index === lastIndex && isLoading}\n                        isError={message.role === 'error'}\n                        lastIndex={index === lastIndex}\n                        handleRegenerate={handleRegenerate}\n                      />\n                    ))\n                  : !iceBreakerCheckPending && (\n                      <PlayGroundChatEmptyState\n                        model={model}\n                        modelInputSchema={modelInputSchema}\n                        submitMessage={content => {\n                          manager.sendMessage(playgroundState, content)\n                        }}\n                      />\n                    )}\n              </div>\n            </div>\n            <PlaygroundChatInput />\n            <div className=\"pt-3 pb-2 d-flex flex-justify-center\">\n              <ModelLegalTerms />\n            </div>\n          </div>\n        )\n      case PlaygroundContentOption.CODE: {\n        return <PlaygroundCodeSnippet model={model} />\n      }\n      case PlaygroundContentOption.JSON: {\n        return jsonFeatureFlag ? (\n          <PlaygroundJSON\n            setFullWidthToolbarContent={setFullWidthToolbarContent}\n            setToolbarContent={setToolbarContent}\n          />\n        ) : null\n      }\n    }\n  }\n\n  return (\n    <div className=\"flex-1 d-flex flex-column min-width-0 height-full\">\n      {fullWidthToolbarContent ? (\n        <Box\n          sx={{\n            backgroundColor: 'canvas.subtle',\n            gap: 2,\n            p: 2,\n            display: 'flex',\n            justifyContent: 'space-between',\n            borderBottomColor: 'border.default',\n            borderBottomWidth: 1,\n            borderBottomStyle: 'solid',\n          }}\n        >\n          {fullWidthToolbarContent}\n        </Box>\n      ) : (\n        <Box\n          sx={{\n            backgroundColor: 'canvas.subtle',\n            p: 2,\n            display: 'flex',\n            justifyContent: 'space-between',\n            borderBottomColor: 'border.default',\n            borderBottomWidth: 1,\n            borderBottomStyle: 'solid',\n          }}\n        >\n          <SegmentedControl\n            aria-label={selectedOption === PlaygroundContentOption.CHAT ? 'Show playground chat' : 'Show code sample'}\n            sx={smallSizeForSegmentControl}\n            size=\"small\"\n            onChange={handleOptionChange}\n          >\n            <SegmentedControl.Button\n              sx={smallSizeForSegmentControl}\n              selected={selectedOption === PlaygroundContentOption.CHAT}\n            >\n              Chat\n            </SegmentedControl.Button>\n            <SegmentedControl.Button\n              sx={smallSizeForSegmentControl}\n              selected={selectedOption === PlaygroundContentOption.CODE}\n            >\n              Code\n            </SegmentedControl.Button>\n            {jsonFeatureFlag && (\n              <SegmentedControl.Button\n                sx={smallSizeForSegmentControl}\n                selected={selectedOption === PlaygroundContentOption.JSON}\n              >\n                Raw\n              </SegmentedControl.Button>\n            )}\n          </SegmentedControl>\n\n          <Box sx={{display: 'flex', gap: 2}}>\n            {renderToolbar(selectedOption)}\n            {!showParameters && (\n              <IconButton\n                icon={SidebarExpandIcon}\n                size=\"small\"\n                aria-label=\"Show parameters setting\"\n                onClick={() => {\n                  manager.setShowParameters(true)\n                }}\n              />\n            )}\n\n            <Box sx={{display: ['flex', 'flex', 'none'], gap: 2}}>\n              <IconButton\n                icon={InfoIcon}\n                size=\"small\"\n                aria-label=\"Show model info\"\n                onClick={() => {\n                  manager.setTab(SidebarSelectionOptions.DETAILS)\n                  manager.setShowParametersOnMobile(true)\n                }}\n              />\n              <IconButton\n                icon={SlidersIcon}\n                size=\"small\"\n                aria-label=\"Show parameters setting\"\n                onClick={() => {\n                  manager.setTab(SidebarSelectionOptions.PARAMETERS)\n                  manager.setShowParametersOnMobile(true)\n                }}\n              />\n            </Box>\n          </Box>\n        </Box>\n      )}\n\n      {renderOption(selectedOption)}\n    </div>\n  )\n}\n\ntry{ PlaygroundChat.displayName ||= 'PlaygroundChat' } catch {}\ntry{ RestoreHistoryButton.displayName ||= 'RestoreHistoryButton' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {Box} from '@primer/react'\nimport type {ShowModelPayload, Model} from '../../../../types'\n\nimport {SafeHTMLBox} from '@github-ui/safe-html'\nimport {PUBLISHER} from '../../../../utilities/normalize-model-strings'\n\nexport function Readme() {\n  const {model, modelReadme} = useRoutePayload<ShowModelPayload>()\n\n  return (\n    <>\n      <MarkdownPublisherHeroImage model={model} />\n      <SafeHTMLBox html={modelReadme} className=\"p-3\" />\n    </>\n  )\n}\n\nfunction MarkdownPublisherHeroImage({model}: {model: Model}) {\n  const lowercaseKey = model.model_family.toLowerCase()\n\n  const MarkdownHero = ({src, webp, alt}: {src: string; webp: string; alt: string}) => {\n    return (\n      <Box\n        sx={{\n          maxWidth: '100%',\n          px: [2, 3, 3],\n          pt: [2, 3, 3],\n          aspectRatio: '830 / 272',\n          img: {\n            bg: 'canvas.subtle',\n            borderRadius: 2,\n            width: '100%',\n          },\n        }}\n      >\n        <picture>\n          <source srcSet={webp} type=\"image/webp\" />\n          <img src={src} alt={alt} />\n        </picture>\n      </Box>\n    )\n  }\n\n  switch (lowercaseKey) {\n    case PUBLISHER.Cohere:\n    case PUBLISHER.Core42:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/cohere-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/cohere-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    case PUBLISHER.Meta:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/meta-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/meta-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    case PUBLISHER.Microsoft:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/microsoft-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/microsoft-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    case PUBLISHER.Mistral:\n    case PUBLISHER.MistralAI:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/mistral-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/mistral-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    case PUBLISHER.AI21Labs:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/ai21labs-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/ai21labs-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    case PUBLISHER.OpenAI:\n    case PUBLISHER.OpenAIEVault:\n      return (\n        <MarkdownHero\n          src=\"/images/modules/marketplace/models/families/openai-hero.jpg\"\n          webp=\"/images/modules/marketplace/models/families/openai-hero.webp\"\n          alt={model.publisher}\n        />\n      )\n    default:\n      return null\n  }\n}\n\ntry{ Readme.displayName ||= 'Readme' } catch {}\ntry{ MarkdownPublisherHeroImage.displayName ||= 'MarkdownPublisherHeroImage' } catch {}\ntry{ MarkdownHero.displayName ||= 'MarkdownHero' } catch {}","import type React from 'react'\n\n/**\n * The App component is used to render content which should be present on _all_ routes within this app\n */\nexport function App(props: {children?: React.ReactNode}) {\n  return <>{props.children}</>\n}\n\ntry{ App.displayName ||= 'App' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"marketplace-module__header--KDICP\",\"gradient\":\"marketplace-module__gradient--GPAgV\",\"gradient-left\":\"marketplace-module__gradient-left--alwMV\",\"gradient-right\":\"marketplace-module__gradient-right--NROap\",\"header-content\":\"marketplace-module__header-content--GF6VA\",\"negative-margin\":\"marketplace-module__negative-margin--udez3\",\"search-input\":\"marketplace-module__search-input--rxqSx\",\"marketplace-featured-grid\":\"marketplace-module__marketplace-featured-grid--AaR0k\",\"marketplace-list-grid\":\"marketplace-module__marketplace-list-grid--k1X6_\",\"marketplace-list-grid-one\":\"marketplace-module__marketplace-list-grid-one--GHOQw\",\"marketplace-item\":\"marketplace-module__marketplace-item--fLNgy\",\"marketplace-item-link\":\"marketplace-module__marketplace-item-link--lsn3d\",\"marketplace-logo\":\"marketplace-module__marketplace-logo--InFOm\",\"marketplace-logo--large\":\"marketplace-module__marketplace-logo--large--_U8qB\",\"marketplace-logo-img\":\"marketplace-module__marketplace-logo-img--b3Doz\",\"marketplace-logo-svg\":\"marketplace-module__marketplace-logo-svg--psxik\",\"details\":\"marketplace-module__details--zzn37\",\"down-icon\":\"marketplace-module__down-icon--qDWsy\",\"up-icon\":\"marketplace-module__up-icon--gIDLQ\",\"image-wrapper\":\"marketplace-module__image-wrapper--i8jLS\",\"copilot\":\"marketplace-module__copilot--ArOP8\",\"models\":\"marketplace-module__models--zJ81P\",\"spin\":\"marketplace-module__spin--KjiIU\",\"arrow\":\"marketplace-module__arrow--cYKoN\",\"donut\":\"marketplace-module__donut--sHywt\",\"semicircles\":\"marketplace-module__semicircles--DF6fb\",\"sparklelarge\":\"marketplace-module__sparklelarge--fB4mp\",\"sparkle\":\"marketplace-module__sparkle--_NmG8\",\"sparklesmall\":\"marketplace-module__sparklesmall--QdH3M\",\"workflow\":\"marketplace-module__workflow--y4V_w\"};","export const taskOptions = ['All', 'Chat-completion', 'Embeddings']\nexport const modelFamilyOptions = ['All providers', 'AI21 Labs', 'Cohere', 'Meta', 'MistralAI', 'Microsoft', 'OpenAI']\nexport const categoryOptions = [\n  'All',\n  'agents',\n  'chat',\n  'conversation',\n  'large context',\n  'low latency',\n  'multilingual',\n  'multimodal',\n  'multipurpose',\n  'rag',\n  'reasoning',\n  'search',\n  'understanding',\n]\n","import {createContext, useContext, useEffect, useMemo, useState, useCallback, useRef} from 'react'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {useSearchParams} from '@github-ui/use-navigate'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport type {IndexPayload, Listing, Model, SearchResults} from '../types'\nimport {categoryOptions, modelFamilyOptions, taskOptions} from '../utilities/model-filter-options'\n\ninterface FilterContextType {\n  featured: Listing[]\n  recommended: Listing[]\n  recentlyAdded: Listing[]\n  searchResults: SearchResults\n  loading: boolean\n  query: string\n  onQueryChange: (query: string) => void\n  page: number\n  setPage: (page: number) => void\n  filter: string\n  setFilter: (filter: string) => void\n  creators: string\n  setCreators: (creators: string) => void\n  sort: string\n  setSort: (sort: string) => void\n  category: string | null\n  setCategory: (category: string | null) => void\n  task: string | null\n  setTask: (task: string | null) => void\n  modelFamily: string | null\n  setModelFamily: (modelFamily: string | null) => void\n  type: string | null\n  copilotApp: string | null\n  isSearching: boolean\n  featuredModels: Model[]\n}\nconst filterOptions = {\n  all: 'All',\n  free_trial: 'Free trial',\n}\nexport const FilterContext = createContext<FilterContextType>({\n  featured: [],\n  recommended: [],\n  recentlyAdded: [],\n  searchResults: {results: [], total: 0, totalPages: 0},\n  loading: false,\n  query: '',\n  onQueryChange: () => undefined,\n  page: 1,\n  setPage: () => undefined,\n  filter: filterOptions.all,\n  setFilter: () => undefined,\n  creators: 'All creators',\n  setCreators: () => undefined,\n  sort: 'popularity-desc',\n  setSort: () => undefined,\n  category: null,\n  setCategory: () => undefined,\n  task: null,\n  setTask: () => undefined,\n  modelFamily: null,\n  setModelFamily: () => undefined,\n  type: null,\n  copilotApp: null,\n  isSearching: false,\n  featuredModels: [],\n})\nexport function useFilterContext() {\n  return useContext(FilterContext)\n}\nexport function FilterProvider({children}: {children: React.ReactNode}) {\n  const payload = useRoutePayload<IndexPayload>()\n  const firstUpdate = useRef(true)\n  const [featured, setFeatured] = useState<Listing[]>(payload.featured)\n  const [recommended, setRecommended] = useState<Listing[]>(payload.recommended)\n  const [recentlyAdded, setRecentlyAdded] = useState<Listing[]>(payload.recentlyAdded)\n  const [searchResults, setSearchResults] = useState<SearchResults>(payload.searchResults)\n  const [loading, setLoading] = useState(false)\n  const [searchParams] = useSearchParams()\n  const queryWithoutSort = useMemo(() => {\n    const queryString = searchParams.get('query')\n    if (!queryString) {\n      return ''\n    }\n    return queryString.replace(/sort:([^ ]*)/, '').trim()\n  }, [searchParams])\n  const [query, setQuery] = useState(queryWithoutSort || '')\n\n  const defaultPage = useMemo(() => {\n    if (searchParams.has('page')) {\n      const page = Number(searchParams.get('page'))\n      return page\n    } else {\n      return 1\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [page, setPage] = useState(defaultPage)\n\n  const defaultFilter = useMemo(() => {\n    if (searchParams.has('filter')) {\n      const filter = searchParams.get('filter')\n      if (filter === 'free_trial') {\n        return filterOptions.free_trial\n      }\n    }\n    return filterOptions.all\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [filter, setFilter] = useState(defaultFilter)\n\n  const defaultCreators = useMemo(() => {\n    if (searchParams.has('verification')) {\n      const verification = searchParams.get('verification')\n      if (verification === 'verified') {\n        return 'Verified creators'\n      }\n    }\n    return 'All creators'\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [creators, setCreators] = useState(defaultCreators)\n\n  const defaultSort = useMemo(() => {\n    const queryFromParams = searchParams.get('query')\n    let sortValue\n    if (queryFromParams) {\n      const match = queryFromParams.match(/sort:([^ ]*)/)\n      sortValue = match ? match[1] : undefined\n    }\n\n    switch (sortValue) {\n      case 'created-desc':\n        return 'created-desc'\n      case 'match-desc':\n        return 'match-desc'\n      default:\n        return 'popularity-desc'\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [sort, setSort] = useState(defaultSort)\n\n  // We should ensure that users can't put arbitrary strings in the URL and have them displayed in the search\n  // dropdowns. Since category is shared between listing types, we can only validate it against the allowlist\n  // if type === model.\n  const defaultCategory = useMemo(() => {\n    if (searchParams.has('type')) {\n      if (searchParams.get('type') !== 'models') {\n        return searchParams.get('category')\n      }\n    }\n    if (categoryOptions.includes(searchParams.get('category') || '')) {\n      return searchParams.get('category')\n    }\n    return null\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const [category, setCategory] = useState<string | null>(defaultCategory)\n\n  const defaultTask = useMemo(() => {\n    const taskFromParams = searchParams.get('task') || ''\n    if (taskOptions.map(t => t.toLowerCase()).includes(taskFromParams.toLowerCase())) {\n      return taskFromParams\n    }\n    return 'All'\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [task, setTask] = useState<string | null>(defaultTask)\n\n  const defaultModelFamily = useMemo(() => {\n    const modelFamilyFromParams = searchParams.get('model_family') || ''\n    if (modelFamilyOptions.includes(modelFamilyFromParams)) {\n      return modelFamilyFromParams\n    }\n    return 'All providers'\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const [modelFamily, setModelFamily] = useState<string | null>(defaultModelFamily)\n\n  const [type, setType] = useState<string | null>(searchParams.get('type'))\n  const [copilotApp, setCopilotApp] = useState<string | null>(searchParams.get('copilot_app'))\n\n  const onQueryChange = useCallback((qry: string) => {\n    // When setting a new query, we reset all filters and sort\n    setPage(1)\n    setFilter(filterOptions.all)\n    setCreators('All creators')\n    setModelFamily('All providers')\n    setTask('All')\n    setSort('popularity-desc')\n    setCategory(null)\n    setType(null)\n    setCopilotApp(null)\n    setQuery(qry)\n  }, [])\n\n  const shouldDisplaySearchResults = useMemo(() => {\n    return !!(query || category || type || copilotApp)\n  }, [category, copilotApp, query, type])\n  const [isSearching, setIsSearching] = useState(shouldDisplaySearchResults)\n\n  const fetchSearchResults = useCallback(\n    async (path: string) => {\n      setLoading(true)\n      const response = await verifiedFetchJSON(path)\n      const data = await response.json()\n      if (shouldDisplaySearchResults) {\n        // This will be just search results\n        setSearchResults(data)\n      } else {\n        // This will be the full index payload\n        setFeatured(data.featured)\n        setRecommended(data.recommended)\n        setRecentlyAdded(data.recentlyAdded)\n        setSearchResults(data.searchResults)\n      }\n      setIsSearching(shouldDisplaySearchResults)\n      setLoading(false)\n    },\n    [shouldDisplaySearchResults],\n  )\n\n  useEffect(() => {\n    if (firstUpdate.current) {\n      // The app is initially rendered with a payload so we don't want to run this on the first page load\n      firstUpdate.current = false\n      return\n    }\n\n    const newParams = new URLSearchParams()\n    if (query || sort !== 'popularity-desc') {\n      if (sort === 'popularity-desc') {\n        newParams.set('query', query)\n      } else {\n        newParams.set('query', `${query} sort:${sort}`.trim())\n      }\n    }\n    if (filter === filterOptions.free_trial) newParams.set('filter', 'free_trial')\n    if (creators === 'Verified creators') newParams.set('verification', 'verified_creator')\n    if (page !== 1) newParams.set('page', page.toString())\n    if (category) newParams.set('category', category)\n    if (modelFamily && modelFamily !== 'All providers') newParams.set('model_family', modelFamily)\n    if (task && task !== 'All') newParams.set('task', task)\n    if (type) newParams.set('type', type)\n    if (copilotApp) newParams.set('copilot_app', copilotApp)\n\n    const path = newParams.toString() ? `/marketplace?${newParams.toString()}` : '/marketplace'\n    window.history.replaceState({}, '', path)\n    fetchSearchResults(path)\n  }, [fetchSearchResults, query, filter, creators, sort, page, category, type, modelFamily, task, copilotApp])\n\n  const value = useMemo<FilterContextType>(() => {\n    return {\n      featured,\n      recommended,\n      recentlyAdded,\n      searchResults,\n      loading,\n      query,\n      onQueryChange,\n      page,\n      setPage,\n      filter,\n      setFilter,\n      creators,\n      setCreators,\n      sort,\n      setSort,\n      category,\n      setCategory,\n      task,\n      setTask,\n      modelFamily,\n      setModelFamily,\n      type,\n      copilotApp,\n      isSearching,\n      featuredModels: payload.featuredModels,\n    }\n  }, [\n    featured,\n    recommended,\n    recentlyAdded,\n    searchResults,\n    loading,\n    query,\n    onQueryChange,\n    page,\n    setPage,\n    filter,\n    setFilter,\n    creators,\n    setCreators,\n    sort,\n    setSort,\n    category,\n    setCategory,\n    task,\n    setTask,\n    modelFamily,\n    setModelFamily,\n    type,\n    copilotApp,\n    isSearching,\n    payload.featuredModels,\n  ])\n\n  return <FilterContext.Provider value={value}>{children}</FilterContext.Provider>\n}\n\ntry{ FilterContext.displayName ||= 'FilterContext' } catch {}\ntry{ FilterProvider.displayName ||= 'FilterProvider' } catch {}","import styles from '../marketplace.module.css'\nimport {TextInput, Spinner} from '@primer/react'\nimport useColorModes from '@github-ui/react-core/use-color-modes'\nimport {SearchIcon} from '@primer/octicons-react'\nimport {useCallback, useMemo, useState} from 'react'\nimport {debounce} from '@github/mini-throttle'\nimport {useFilterContext} from '../contexts/FilterContext'\n\nexport default function MarketplaceHeader() {\n  const {query, onQueryChange, loading} = useFilterContext()\n  const headerImages = ['arrow', 'donut', 'models', 'semicircles', 'sparklesmall', 'sparklelarge', 'workflow']\n  const [privateQuery, setPrivateQuery] = useState<string>(query)\n\n  const colorMode = useColorModes()\n\n  const colorModeAwareAssetDirectory = useMemo(() => {\n    switch (colorMode.colorMode) {\n      case 'night':\n        return 'dark'\n      case 'day':\n      default:\n        return 'light'\n    }\n  }, [colorMode])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedSetQuery = useCallback(\n    debounce((newQuery: string) => {\n      onQueryChange(newQuery)\n    }, 400),\n    [onQueryChange],\n  )\n\n  const handleQueryChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      setPrivateQuery(event.target.value)\n      debouncedSetQuery(event.target.value)\n    },\n    [debouncedSetQuery],\n  )\n\n  const handleSubmit = useCallback(\n    (event: React.FormEvent) => {\n      event.preventDefault()\n      const search = new URLSearchParams()\n      search.set('query', privateQuery)\n      location.replace(`/marketplace?${search.toString()}`)\n    },\n    [privateQuery],\n  )\n\n  return (\n    <header\n      className={`mb-2 border-bottom borderColor-default d-flex flex-items-start py-5 py-lg-4 position-relative overflow-hidden ${styles['header']}`}\n    >\n      <div className={`${styles['gradient']} ${styles['gradient-left']}`} />\n      <div className={`${styles['gradient']} ${styles['gradient-right']}`} />\n      <div className=\"container-xl width-full m-auto d-flex flex-items-center flex-column flex-lg-row-reverse flex-justify-between gap-4 px-3 pl-lg-4 pr-lg-5 pl-xl-3\">\n        <div className={`position-relative mb-4 mb-lg-0 user-select-none ${styles['image-wrapper']}`}>\n          {headerImages.map(image => (\n            <img\n              key={image}\n              src={`/images/modules/marketplace/header/${colorModeAwareAssetDirectory}/${image}.png`}\n              srcSet={`/images/modules/marketplace/header/${colorModeAwareAssetDirectory}/${image}@2x.png 2x`}\n              className={`position-absolute ${styles[image as keyof typeof styles]}`}\n              alt=\"\"\n            />\n          ))}\n          <img\n            src={`/images/modules/marketplace/header/${colorModeAwareAssetDirectory}/copilot.png`}\n            srcSet={`/images/modules/marketplace/header/${colorModeAwareAssetDirectory}/copilot@2x.png 2x`}\n            className={`m-lg-4 ${styles['copilot']}`}\n            alt=\"\"\n          />\n        </div>\n        <div className={`text-center text-lg-left ${styles['header-content']}`}>\n          <h1 className=\"lh-condensed text-wrap-balance\">Enhance your workflow with extensions</h1>\n          <p className=\"fgColor-muted f3\">\n            Tools from the community and partners to simplify tasks and automate processes\n          </p>\n          <form onSubmit={handleSubmit}>\n            <TextInput\n              block\n              size=\"large\"\n              sx={{mt: 3}}\n              leadingVisual={\n                loading ? (\n                  <div className=\"d-flex\">\n                    <Spinner size=\"small\" />\n                  </div>\n                ) : (\n                  SearchIcon\n                )\n              }\n              aria-label=\"Search Marketplace\"\n              placeholder={'Search for Copilot extensions, apps, actions, and models'}\n              className={`width-full ${styles['search-input']}`}\n              value={privateQuery}\n              onChange={handleQueryChange}\n              data-testid=\"search-input\"\n            />\n          </form>\n        </div>\n      </div>\n    </header>\n  )\n}\n\ntry{ MarketplaceHeader.displayName ||= 'MarketplaceHeader' } catch {}","import {useMemo, useState} from 'react'\n\nimport styles from '../marketplace.module.css'\n\nimport {Button, NavList} from '@primer/react'\nimport {Dialog} from '@primer/react/drafts'\nimport {AppsIcon, CopilotIcon, FlameIcon, PlayIcon, PlusIcon} from '@primer/octicons-react'\nimport type {Category} from '../types'\nimport {useFilterContext} from '../contexts/FilterContext'\nimport {useLocation} from 'react-router-dom'\n\ntype Props = {\n  categories: {\n    apps: Category[]\n    actions: Category[]\n  }\n}\n\nfunction Menu({categories}: Props) {\n  const {type, copilotApp, category} = useFilterContext()\n  const location = useLocation()\n\n  const currentNavItem = useMemo(() => {\n    if (location.pathname.includes('/marketplace/models')) {\n      return 'models'\n    } else if (!type && !category && !copilotApp) {\n      return 'featured'\n    } else if (type === 'apps' && copilotApp === 'true') {\n      return 'copilot'\n    } else if (category) {\n      return category || ''\n    }\n    return ''\n  }, [location.pathname, category, copilotApp, type])\n\n  const currentType = useMemo(() => {\n    if (type && !copilotApp) {\n      if (type === 'apps') {\n        return 'apps'\n      } else if (type === 'actions') {\n        return 'actions'\n      }\n    }\n    return ''\n  }, [copilotApp, type])\n\n  return (\n    <NavList>\n      <NavList.Item href=\"/marketplace\" {...(currentNavItem === 'featured' ? {'aria-current': 'page'} : {})}>\n        <NavList.LeadingVisual>\n          <FlameIcon />\n        </NavList.LeadingVisual>\n        Featured\n      </NavList.Item>\n      <NavList.Item\n        href=\"/marketplace?type=apps&copilot_app=true\"\n        {...(currentNavItem === 'copilot' ? {'aria-current': 'page'} : {})}\n      >\n        <NavList.LeadingVisual>\n          <CopilotIcon />\n        </NavList.LeadingVisual>\n        Copilot\n      </NavList.Item>\n      <NavList.Item href=\"/marketplace/models\" {...(currentNavItem === 'models' ? {'aria-current': 'page'} : {})}>\n        <NavList.LeadingVisual>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            width=\"16\"\n            height=\"16\"\n            aria-label=\"AI Model icon\"\n            fill=\"var(--fgColor-muted, var(--color-muted-fg))\"\n          >\n            <path d=\"M10.628 7.25a2.25 2.25 0 1 1 0 1.5H8.622a2.25 2.25 0 0 1-2.513 1.466L5.03 12.124a2.25 2.25 0 1 1-1.262-.814l1.035-1.832A2.245 2.245 0 0 1 4.25 8c0-.566.209-1.082.553-1.478L3.768 4.69a2.25 2.25 0 1 1 1.262-.814l1.079 1.908A2.25 2.25 0 0 1 8.622 7.25ZM2.5 2.5a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm4 4.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm6.25 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-9.5 5.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\" />\n          </svg>\n        </NavList.LeadingVisual>\n        Models\n      </NavList.Item>\n      <NavList.Item defaultOpen={currentType === 'apps'}>\n        <NavList.LeadingVisual>\n          <AppsIcon />\n        </NavList.LeadingVisual>\n        Apps\n        <NavList.SubNav>\n          <NavList.Item\n            href={`/marketplace?type=apps`}\n            {...(currentType === 'apps' && currentNavItem === '' ? {'aria-current': 'page'} : {})}\n          >\n            All apps\n          </NavList.Item>\n          {categories?.apps?.map(cat => (\n            <NavList.Item\n              key={`apps-category-${cat.slug}`}\n              href={`/marketplace?type=apps&category=${cat.slug}`}\n              {...(currentType === 'apps' && currentNavItem === cat.slug ? {'aria-current': 'page'} : {})}\n            >\n              {cat.name}\n            </NavList.Item>\n          ))}\n        </NavList.SubNav>\n      </NavList.Item>\n      <NavList.Item defaultOpen={currentType === 'actions'}>\n        <NavList.LeadingVisual>\n          <PlayIcon />\n        </NavList.LeadingVisual>\n        Actions\n        <NavList.SubNav>\n          <NavList.Item\n            href={`/marketplace?type=actions`}\n            {...(currentType === 'actions' && currentNavItem === '' ? {'aria-current': 'page'} : {})}\n          >\n            All actions\n          </NavList.Item>\n          {categories?.actions?.map(cat => (\n            <NavList.Item\n              key={`actions-category-${cat.slug}`}\n              href={`/marketplace?type=actions&category=${cat.slug}`}\n              {...(currentType === 'actions' && currentNavItem === cat.slug ? {'aria-current': 'page'} : {})}\n            >\n              {cat.name}\n            </NavList.Item>\n          ))}\n        </NavList.SubNav>\n      </NavList.Item>\n      <NavList.Divider />\n      <NavList.Item href=\"/marketplace/new\">\n        <NavList.LeadingVisual>\n          <PlusIcon />\n        </NavList.LeadingVisual>\n        Create a new extension\n      </NavList.Item>\n    </NavList>\n  )\n}\n\nexport default function MarketplaceNavigation({categories}: Props) {\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n  const onMenuClose = () => setIsMenuOpen(false)\n\n  return (\n    <>\n      <div className=\"hide-sm hide-md\">\n        <Menu categories={categories} />\n      </div>\n\n      <Button block className=\"hide-lg hide-xl\" onClick={() => setIsMenuOpen(true)}>\n        Menu\n      </Button>\n      {isMenuOpen && (\n        <Dialog title=\"Menu\" onClose={onMenuClose} position={{narrow: 'bottom'}}>\n          <div className={styles['negative-margin']}>\n            <Menu categories={categories} />\n          </div>\n        </Dialog>\n      )}\n    </>\n  )\n}\n\ntry{ Menu.displayName ||= 'Menu' } catch {}\ntry{ MarketplaceNavigation.displayName ||= 'MarketplaceNavigation' } catch {}","import styles from '../marketplace.module.css'\n\nimport {Box, Heading, Label, Octicon} from '@primer/react'\nimport {PlayIcon, VerifiedIcon} from '@primer/octicons-react'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {useLocation} from 'react-router-dom'\nimport type {Listing} from '../types'\nimport {useMemo} from 'react'\n\ninterface FeaturedItemProps {\n  listing: Listing\n  isFeatured: boolean\n}\n\nexport default function FeaturedItem(props: FeaturedItemProps) {\n  const {listing, isFeatured} = props\n  const description = listing.type === 'marketplace_listing' ? listing.shortDescription : listing.description\n  let backgroundColor = 'ffffff'\n  let listingUrl = ''\n  let isVerifiedOwner = false\n\n  if (listing.type === 'marketplace_listing') {\n    backgroundColor = listing.bgColor\n    listingUrl = `/marketplace/${listing.slug}`\n    isVerifiedOwner = listing.isVerifiedOwner\n  } else if (listing.type === 'repository_action') {\n    backgroundColor = listing.color\n    listingUrl = `/marketplace/actions/${listing.slug}`\n    isVerifiedOwner = listing.isVerifiedOwner\n  } else {\n    listingUrl = listing.model_url\n    isVerifiedOwner = false\n  }\n\n  const listingType = useMemo(() => {\n    if (listing.type === 'repository_action') {\n      return 'Action'\n    } else if (listing.type === 'model') {\n      return 'Model'\n    } else if (listing.copilotApp) {\n      return 'Copilot'\n    } else {\n      return 'App'\n    }\n  }, [listing])\n\n  const location = useLocation()\n\n  const sendClickEvent = () => {\n    if (listing.type === 'marketplace_listing') {\n      sendEvent('marketplace_listing_click', {\n        marketplace_listing_id: listing.id,\n        source_url: location.pathname,\n        destination_url: listingUrl,\n      })\n    }\n  }\n\n  return (\n    <div\n      className={`position-relative border rounded-2 d-flex ${styles['marketplace-item']} ${\n        isFeatured ? 'flex-column flex-items-center p-4' : 'gap-3 p-3'\n      }`}\n      data-testid=\"marketplace-item\"\n    >\n      <Box\n        data-testid=\"logo\"\n        className={`flex-shrink-0 rounded-3 overflow-hidden ${styles['marketplace-logo']}`}\n        sx={{\n          backgroundColor: `#${backgroundColor}`,\n          color: backgroundColor === 'ffffff' ? 'var(--fgColor-black)' : 'var(--fgColor-white)',\n        }}\n      >\n        {listing.type === 'marketplace_listing' ? (\n          <img src={listing.listingLogoUrl} alt={`${listing.name} logo`} className={styles['marketplace-logo-img']} />\n        ) : listing.type === 'model' ? (\n          <img\n            src={listing.logo_url}\n            alt={`${listing.friendly_name} logo`}\n            className={styles['marketplace-logo-img']}\n          />\n        ) : listing.iconSvg ? (\n          <SafeHTMLBox html={listing.iconSvg as SafeHTMLString} className={styles['marketplace-logo-svg']} />\n        ) : (\n          <PlayIcon className={styles['marketplace-logo-svg']} />\n        )}\n      </Box>\n      {isFeatured ? (\n        <div\n          className=\"d-flex flex-column flex-items-center height-full width-full text-center\"\n          data-testid=\"featured-item\"\n        >\n          <Heading as=\"h3\" className=\"mt-3 d-flex f4 lh-condensed\">\n            <a\n              href={listingUrl}\n              className={`fgColor-default line-clamp-1 ${styles['marketplace-item-link']}`}\n              onClick={sendClickEvent}\n            >\n              {listing.type === 'model' ? listing.friendly_name : listing.name}\n            </a>\n            {isVerifiedOwner && (\n              <Octicon icon={VerifiedIcon} className=\"fgColor-accent\" sx={{ml: 2, transform: 'translateY(2px)'}} />\n            )}\n          </Heading>\n          <p className=\"mt-2 mb-auto height-full text-small fgColor-muted line-clamp-2\">{description}</p>\n          <Label\n            variant=\"secondary\"\n            size=\"large\"\n            data-testid=\"listing-type-label\"\n            className=\"position-absolute\"\n            sx={{top: '1rem', right: '1rem'}}\n          >\n            {listingType}\n          </Label>\n        </div>\n      ) : (\n        <div className=\"flex-1\" data-testid=\"non-featured-item\" style={{minWidth: 0}}>\n          <div className=\"d-flex flex-justify-between flex-items-start gap-3\">\n            <Heading as=\"h3\" className=\"d-flex f4 lh-condensed\">\n              <a\n                href={listingUrl}\n                className={`${styles['marketplace-item-link']} line-clamp-1`}\n                onClick={sendClickEvent}\n              >\n                {listing.type === 'model' ? listing.friendly_name : listing.name}\n              </a>\n              {isVerifiedOwner && (\n                <Octicon icon={VerifiedIcon} className=\"fgColor-accent\" sx={{ml: 2, transform: 'translateY(2px)'}} />\n              )}\n            </Heading>\n            <Label variant=\"secondary\" data-testid=\"listing-type-label\">\n              {listingType}\n            </Label>\n          </div>\n          <p className=\"mt-1 mb-0 text-small fgColor-muted line-clamp-2\">{description}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\ntry{ FeaturedItem.displayName ||= 'FeaturedItem' } catch {}","import {ActionList, ActionMenu} from '@primer/react'\nimport {useFilterContext} from '../../contexts/FilterContext'\nimport {taskOptions, modelFamilyOptions, categoryOptions} from '../../utilities/model-filter-options'\n\nexport default function ModelsFilters() {\n  const {task, setTask, modelFamily, setModelFamily, category, setCategory} = useFilterContext()\n\n  const onTaskChange = (newTask: string) => {\n    setTask(newTask)\n  }\n\n  const onModelFamilyChange = (newModelFamily: string) => {\n    setModelFamily(newModelFamily)\n  }\n\n  const onCategoryChange = (newCategory: string) => {\n    setCategory(newCategory)\n  }\n\n  return (\n    <div className=\"d-flex gap-2 flex-wrap\">\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"family-button\">\n          <span className=\"fgColor-muted\">By:</span> {modelFamily}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {modelFamilyOptions.map(option => (\n              <ActionList.Item\n                key={option}\n                selected={option === modelFamily}\n                onSelect={() => onModelFamilyChange(option)}\n              >\n                {option}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"task-button\">\n          <span className=\"fgColor-muted\">Capability:</span>{' '}\n          {task?.toLowerCase() === 'chat-completion' ? 'Chat/completion' : task}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {taskOptions.map(option => (\n              <ActionList.Item key={option} selected={option === task} onSelect={() => onTaskChange(option)}>\n                {option.toLowerCase() === 'chat-completion' ? 'Chat/completion' : option}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"category-button\">\n          <span className=\"fgColor-muted\">Tag:</span> {category || 'All'}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {categoryOptions.map(option => {\n              // Default to \"All\" if no category is selected. We can't do this with default state\n              // because `category` is shared between models and apps/actions\n              let selected = option === category\n              if (option === 'All' && !category) {\n                selected = true\n              }\n              return (\n                <ActionList.Item key={option} selected={selected} onSelect={() => onCategoryChange(option)}>\n                  {option}\n                </ActionList.Item>\n              )\n            })}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </div>\n  )\n}\n\ntry{ ModelsFilters.displayName ||= 'ModelsFilters' } catch {}","import {useMemo} from 'react'\n\nimport {ActionList, ActionMenu} from '@primer/react'\nimport {useFilterContext} from '../contexts/FilterContext'\nimport ModelsFilters from './models/ModelsFilters'\n\nexport default function Filters() {\n  const filterOptions = {\n    all: 'All',\n    free_trial: 'Free trial',\n  }\n  const {filter, setFilter, creators, setCreators, sort, setSort, type} = useFilterContext()\n\n  // TODO: Let's add some constants\n  const creatorOptions = ['All creators', 'Verified creators']\n\n  const sortOptions = useMemo(() => {\n    return {\n      'popularity-desc': 'Popularity',\n      'created-desc': 'Recently added',\n      'match-desc': 'Best match',\n    }\n  }, [])\n\n  const sortText = useMemo(() => {\n    switch (sort) {\n      case 'popularity-desc':\n        return sortOptions['popularity-desc']\n      case 'created-desc':\n        return sortOptions['created-desc']\n      case 'match-desc':\n        return sortOptions['match-desc']\n      default:\n        return ''\n    }\n  }, [sort, sortOptions])\n\n  const onCreatorChange = (creator: string) => {\n    setCreators(creator)\n  }\n\n  const onFilterChange = (newFilter: string) => {\n    setFilter(newFilter)\n  }\n\n  const onSortChange = (newSort: string) => {\n    setSort(newSort)\n  }\n\n  if (type === 'models') {\n    return <ModelsFilters />\n  }\n\n  return (\n    <div className=\"d-flex gap-2 flex-wrap\">\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"filter-button\">\n          <span className=\"fgColor-muted\">Filter:</span> {filter}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"filter-menu\">\n            {Object.entries(filterOptions).map(([key, value]) => (\n              <ActionList.Item key={key} selected={value === filter} onSelect={() => onFilterChange(value)}>\n                {value}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"creator-button\">\n          <span className=\"fgColor-muted\">By:</span> {creators}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {creatorOptions.map(option => (\n              <ActionList.Item key={option} selected={option === creators} onSelect={() => onCreatorChange(option)}>\n                {option}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"sort-button\">\n          <span className=\"fgColor-muted\">Sort:</span> {sortText}\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"sort-menu\">\n            {Object.entries(sortOptions).map(([key, value]) => (\n              <ActionList.Item key={key} selected={key === sort} onSelect={() => onSortChange(key)}>\n                {value}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </div>\n  )\n}\n\ntry{ Filters.displayName ||= 'Filters' } catch {}","import styles from '../marketplace.module.css'\n\nimport {Box, Label, Link, Pagination} from '@primer/react'\nimport {SearchIcon} from '@primer/octicons-react'\nimport {Blankslate} from '@primer/react/experimental'\nimport {useCallback, useMemo} from 'react'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport Filters from './Filters'\nimport MarketplaceItem from './MarketplaceItem'\nimport type {Category} from '../types'\nimport {useFilterContext} from '../contexts/FilterContext'\n\ntype Props = {\n  categories: {\n    apps: Category[]\n    actions: Category[]\n  }\n}\n\nexport default function ResultList({categories}: Props) {\n  const {searchResults} = useFilterContext()\n  const {page, setPage, query, copilotApp, category, type} = useFilterContext()\n\n  const onPageChange = useCallback(\n    (e: React.MouseEvent<Element, MouseEvent>, p: number) => {\n      e.preventDefault()\n      setPage(p)\n    },\n    [setPage],\n  )\n\n  const categoryNameMapping = useMemo(() => {\n    const mapping = new Map<string, Category>()\n    for (const cat of [...categories.apps, ...categories.actions]) {\n      mapping.set(cat.slug, cat)\n    }\n    return mapping\n  }, [categories.actions, categories.apps])\n\n  const headingText = useMemo(() => {\n    if (query) {\n      return `Search results for ${query}`\n    } else if (type === 'models') {\n      return 'Models'\n    } else if (copilotApp) {\n      return 'Copilot Extensions'\n    } else if (category) {\n      const categoryParam = category\n      const cat = categoryParam ? categoryNameMapping.get(categoryParam) : undefined\n      const listingType = type === 'actions' ? 'actions' : 'apps'\n      return cat ? `${cat.name} ${listingType}` : 'Apps'\n    } else if (type === 'actions') {\n      return 'Actions'\n    } else if (type === 'apps') {\n      return 'Apps'\n    }\n    return 'Search results'\n  }, [category, categoryNameMapping, copilotApp, query, type])\n\n  const detailText = useMemo(() => {\n    if (query) {\n      return `${searchResults.total} ${searchResults.total === 1 ? 'result' : 'results'}`\n    } else if (type === 'models') {\n      return 'Try, test, and deploy from a wide range of model types, sizes, and specializations'\n    } else if (copilotApp) {\n      return 'Extend Copilot capabilities using third party tools, services, and data'\n    } else if (category) {\n      const categoryParam = category\n      const cat = categoryParam ? categoryNameMapping.get(categoryParam) : undefined\n      return cat ? <SafeHTMLBox html={cat.description_html as SafeHTMLString} /> : ''\n    } else if (type === 'actions') {\n      return 'Automate your workflow from idea to production'\n    } else if (type === 'apps') {\n      return 'Build on your workflow with apps that integrate with GitHub'\n    }\n  }, [category, categoryNameMapping, copilotApp, query, searchResults.total, type])\n\n  return (\n    <>\n      <div className=\"d-flex flex-column flex-sm-row flex-justify-between flex-wrap gap-2\">\n        <div>\n          <h2 className=\"f2 lh-condensed\" data-testid=\"heading-text\">\n            {headingText}\n          </h2>\n          {detailText && (\n            <span className=\"fgColor-muted\" data-testid=\"detail-text\">\n              {detailText}\n            </span>\n          )}\n        </div>\n        {copilotApp && (\n          <div className=\"d-flex flex-items-center gap-2\">\n            <Label variant=\"success\">Beta</Label>\n            <Link href=\"https://github.com/orgs/community/discussions/125067\">Give feedback</Link>\n          </div>\n        )}\n      </div>\n\n      <div className=\"mt-3\">\n        <Filters />\n      </div>\n\n      {searchResults.results.length > 0 ? (\n        <>\n          <div\n            className={`mt-4 ${\n              searchResults.results.length === 1 ? styles['marketplace-list-grid-one'] : styles['marketplace-list-grid']\n            }`}\n            data-testid=\"search-results\"\n          >\n            {searchResults.results.map(listing => (\n              <MarketplaceItem key={`${listing.type}-${listing.id}`} listing={listing} isFeatured={false} />\n            ))}\n          </div>\n          {searchResults.totalPages > 1 && (\n            <Pagination\n              pageCount={searchResults.totalPages}\n              currentPage={page}\n              onPageChange={onPageChange}\n              showPages={{\n                narrow: false,\n              }}\n            />\n          )}\n        </>\n      ) : (\n        <Box sx={{mt: 4}}>\n          <Blankslate border>\n            <Blankslate.Visual>\n              <SearchIcon size=\"medium\" />\n            </Blankslate.Visual>\n            <Blankslate.Heading>No results</Blankslate.Heading>\n            <Blankslate.Description>Try searching by different keywords.</Blankslate.Description>\n          </Blankslate>\n        </Box>\n      )}\n    </>\n  )\n}\n\ntry{ ResultList.displayName ||= 'ResultList' } catch {}","export enum PUBLISHER {\n  Cohere = 'cohere',\n  Core42 = 'core42',\n  Meta = 'meta',\n  Microsoft = 'microsoft',\n  Mistral = 'mistral',\n  MistralAI = 'mistralai',\n  OpenAI = 'openai',\n  OpenAIEVault = 'openaidevault',\n  AI21Labs = 'ai21 labs',\n}\n\nconst KNOWN_PUBLISHERS: Record<string, string> = {\n  cohere: 'Cohere',\n  core42: 'Core42',\n  meta: 'Meta',\n  microsoft: 'Microsoft',\n  mistral: 'Mistral',\n  mistralai: 'Mistral',\n  openai: 'OpenAI',\n  openaidevault: 'OpenAI',\n  ai21labs: 'AI21 Labs',\n}\n\nexport function normalizeModelPublisher(publisher: string): string {\n  const publisherLowercase = publisher.toLowerCase()\n  return KNOWN_PUBLISHERS[publisherLowercase] || publisher\n}\n","import styles from '../../../../marketplace.module.css'\n\nimport {Heading, Label} from '@primer/react'\nimport type {Model} from '../../../../types'\n\nimport {normalizeModelPublisher} from '../../../../utilities/normalize-model-strings'\n\ninterface ModelItemProps {\n  model: Model\n  isFeatured?: boolean\n}\n\nexport default function ModelItem(props: ModelItemProps) {\n  const {model, isFeatured} = props\n  const listingUrl = `/marketplace/models/${model.registry}/${model.name}`\n  // Jamba logo has some padding so we need to adjust the size\n  const isJamba = model.name === 'AI21-Jamba-Instruct'\n  const jambaStyle = isJamba ? {width: '36px', height: '36px'} : {}\n  return (\n    <div\n      className={`position-relative border rounded-2 d-flex ${styles['marketplace-item']} ${\n        isFeatured ? 'flex-column flex-items-center p-4' : 'gap-3 p-3'\n      }`}\n      data-testid=\"marketplace-item\"\n    >\n      <div data-testid=\"logo\" className={`flex-shrink-0 rounded-3 overflow-hidden ${styles['marketplace-logo']}`}>\n        <img\n          src={model.logo_url}\n          alt={`${model.publisher} logo`}\n          className={styles['marketplace-logo-img']}\n          style={jambaStyle}\n        />\n      </div>\n      {isFeatured ? (\n        <div\n          className=\"d-flex flex-column flex-items-center height-full width-full text-center\"\n          data-testid=\"featured-item\"\n        >\n          <Heading as=\"h3\" className=\"mt-3 d-flex f4 lh-condensed\">\n            <a href={listingUrl} className={`fgColor-default line-clamp-1 ${styles['marketplace-item-link']}`}>\n              {model.friendly_name}\n            </a>\n          </Heading>\n          <p className=\"mt-2 mb-auto text-small fgColor-muted line-clamp-2\">\n            by {normalizeModelPublisher(model.publisher)}\n          </p>\n          {model.summary && <p className=\"mt-2 text-small fgColor-muted line-clamp-2\">{model.summary}</p>}\n          <Label\n            variant=\"secondary\"\n            size=\"large\"\n            data-testid=\"listing-type-label\"\n            className=\"position-absolute\"\n            sx={{top: '1rem', right: '1rem'}}\n          >\n            Model\n          </Label>\n        </div>\n      ) : (\n        <div className=\"flex-1\" data-testid=\"non-featured-item\">\n          <div className=\"d-flex flex-justify-between flex-items-start gap-3\">\n            <h3 className=\"d-flex f4 lh-condensed\">\n              <a href={listingUrl} className={`${styles['marketplace-item-link']} line-clamp-1`}>\n                {model.friendly_name}\n              </a>\n            </h3>\n            <Label variant=\"secondary\">Model</Label>\n          </div>\n          {model.summary && <p className=\"mt-1 mb-0 text-small fgColor-muted line-clamp-2\">{model.summary}</p>}\n          {!model.summary && (\n            <p className=\"mt-1 mb-0 text-small fgColor-muted line-clamp-2\">\n              {normalizeModelPublisher(model.publisher)}\n            </p>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n\ntry{ ModelItem.displayName ||= 'ModelItem' } catch {}","import styles from '../marketplace.module.css'\n\nimport {Heading, UnderlineNav} from '@primer/react'\nimport MarketplaceItem from '../components/MarketplaceItem'\nimport type {IndexPayload} from '../types'\nimport {useState} from 'react'\nimport ResultList from '../components/ResultList'\nimport {useFilterContext} from '../contexts/FilterContext'\nimport ModelItem from '../models/routes/index/components/ModelItem'\n\ntype Props = {\n  payload: IndexPayload\n}\nexport function IndexAndSearchContent({payload}: Props) {\n  const {featured, recommended, recentlyAdded, isSearching, featuredModels} = useFilterContext()\n  const [currentList, setCurrentList] = useState<'recommended' | 'recentlyAdded'>('recommended')\n\n  return (\n    <>\n      {isSearching ? (\n        <ResultList categories={payload.categories} />\n      ) : (\n        <>\n          <Heading as=\"h2\" className=\"f2\">\n            Models for your every use case\n          </Heading>\n          <span className=\"fgColor-muted\">\n            Try, test, and deploy from a wide range of model types, sizes, and specializations.\n          </span>\n          <div className={`mt-4 ${styles['marketplace-featured-grid']}`}>\n            {featuredModels.map(model => (\n              <ModelItem key={model.id} model={model} isFeatured={true} />\n            ))}\n          </div>\n          <Heading as=\"h2\" className=\"mt-4 f2\">\n            Discover apps with Copilot extensions\n          </Heading>\n          <span className=\"fgColor-muted\">Your favorite tools now work with GitHub Copilot.</span>\n          <div className={`mt-4 ${styles['marketplace-featured-grid']}`}>\n            {featured.map(listing => (\n              <MarketplaceItem key={`${listing.type}-${listing.id}`} listing={listing} isFeatured={true} />\n            ))}\n          </div>\n\n          <UnderlineNav\n            aria-label=\"View recommended or recent marketplace listings\"\n            sx={{mt: 4, pl: 0, '& button': {padding: '0.375rem 0.5rem !important'}}}\n          >\n            <UnderlineNav.Item\n              as=\"button\"\n              aria-current={currentList === 'recommended' ? 'page' : undefined}\n              onSelect={event => {\n                event?.preventDefault()\n                setCurrentList('recommended')\n              }}\n            >\n              Recommended\n            </UnderlineNav.Item>\n            <UnderlineNav.Item\n              as=\"button\"\n              aria-current={currentList === 'recentlyAdded' ? 'page' : undefined}\n              onSelect={event => {\n                event?.preventDefault()\n                setCurrentList('recentlyAdded')\n              }}\n            >\n              Recently added\n            </UnderlineNav.Item>\n          </UnderlineNav>\n          {currentList === 'recommended' && (\n            <div className={`mt-4 ${styles['marketplace-list-grid']}`}>\n              {recommended.map(listing => (\n                <MarketplaceItem key={`${listing.type}-${listing.id}`} listing={listing} isFeatured={false} />\n              ))}\n            </div>\n          )}\n          {currentList === 'recentlyAdded' && (\n            <div className={`mt-4 ${styles['marketplace-list-grid']}`}>\n              {recentlyAdded.map(listing => (\n                <MarketplaceItem key={`${listing.type}-${listing.id}`} listing={listing} isFeatured={false} />\n              ))}\n            </div>\n          )}\n        </>\n      )}\n    </>\n  )\n}\n\ntry{ IndexAndSearchContent.displayName ||= 'IndexAndSearchContent' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport {PageLayout} from '@primer/react'\nimport MarketplaceHeader from '../components/MarketplaceHeader'\nimport MarketplaceNavigation from '../components/MarketplaceNavigation'\nimport type {IndexPayload} from '../types'\nimport {FilterProvider} from '../contexts/FilterContext'\nimport {IndexAndSearchContent} from '../components/IndexAndSearchContent'\n\nexport function Index() {\n  const payload = useRoutePayload<IndexPayload>()\n\n  return (\n    <FilterProvider>\n      <MarketplaceHeader />\n      <PageLayout>\n        <PageLayout.Pane position=\"start\">\n          <MarketplaceNavigation categories={payload.categories} />\n        </PageLayout.Pane>\n        <PageLayout.Content as=\"div\">\n          <IndexAndSearchContent payload={payload} />\n        </PageLayout.Content>\n      </PageLayout>\n    </FilterProvider>\n  )\n}\n\ntry{ Index.displayName ||= 'Index' } catch {}","import {useCallback, useState} from 'react'\nimport type {Screenshot} from '../types'\n\ntype Props = {\n  screenshots: Screenshot[]\n}\n\nexport default function Screenshots({screenshots}: Props) {\n  const [activeScreenshotId, setActiveScreenshotId] = useState(screenshots[0]?.id)\n\n  return (\n    <>\n      {screenshots.length > 0 && (\n        <>\n          <div className=\"ScreenshotCarousel\" data-testid=\"screenshot-carousel\">\n            {screenshots.map(screenshot => (\n              <div\n                key={screenshot.id}\n                role=\"tabpanel\"\n                className={`ScreenshotCarousel-screenshot anim-fade-in`}\n                hidden={activeScreenshotId !== screenshot.id}\n                data-testid={`screenshot-container-${screenshot.id}`}\n              >\n                <img\n                  src={screenshot.src}\n                  width={670}\n                  alt={screenshot.alt_text}\n                  className=\"img-responsive\"\n                  data-testid={`screenshot-${screenshot.id}`}\n                />\n                {screenshot.caption && <div className=\"pt-2\">{screenshot.caption}</div>}\n              </div>\n            ))}\n            {screenshots.length > 1 && (\n              <div role=\"tablist\" className=\"ScreenshotCarousel-nav\">\n                {screenshots.map(screenshot => (\n                  <ScreenshotThumbnail\n                    key={screenshot.id}\n                    screenshot={screenshot}\n                    activeScreenshotId={activeScreenshotId}\n                    setActiveScreenshotId={setActiveScreenshotId}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </>\n  )\n}\n\ntype ScreenshotThumbnailProps = {\n  screenshot: Screenshot\n  activeScreenshotId?: number\n  setActiveScreenshotId: (id: number) => void\n}\n\nconst ScreenshotThumbnail = (props: ScreenshotThumbnailProps) => {\n  const {screenshot, activeScreenshotId, setActiveScreenshotId} = props\n\n  const handleClick = useCallback(() => {\n    setActiveScreenshotId(screenshot.id)\n  }, [screenshot.id, setActiveScreenshotId])\n\n  const handleKeyPress = useCallback(\n    (e: React.KeyboardEvent) => {\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (e.key === 'Enter') {\n        setActiveScreenshotId(screenshot.id)\n      }\n    },\n    [screenshot.id, setActiveScreenshotId],\n  )\n\n  return (\n    <div\n      key={screenshot.id}\n      className=\"ScreenshotCarousel-navitem\"\n      role=\"tab\"\n      tabIndex={0}\n      aria-selected={activeScreenshotId === screenshot.id}\n      onClick={handleClick}\n      onKeyDown={handleKeyPress}\n      data-testid={`screenshot-thumbnail-${screenshot.id}`}\n    >\n      <img src={screenshot.src} width={670} alt={screenshot.alt_text} className=\"img-responsive\" />\n    </div>\n  )\n}\n\ntry{ Screenshots.displayName ||= 'Screenshots' } catch {}\ntry{ ScreenshotThumbnail.displayName ||= 'ScreenshotThumbnail' } catch {}","import {useCallback, useMemo, useState} from 'react'\nimport type {PlanInfo, Plan, AppListing} from '../../types'\n\nimport {\n  ActionList,\n  ActionMenu,\n  Box,\n  Button,\n  Label,\n  Link,\n  Octicon,\n  Dialog,\n  Radio,\n  RelativeTime,\n  Text,\n  TextInput,\n} from '@primer/react'\nimport {CheckIcon} from '@primer/octicons-react'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {useCSRFToken} from '@github-ui/use-csrf-token'\n\ntype Props = {\n  planInfo: PlanInfo\n  listing: AppListing\n}\n\nexport default function Plans({planInfo, listing}: Props) {\n  const [selectedPlanId, setSelectedPlanId] = useState(planInfo.selected_plan_id)\n\n  const onPlanChange = useCallback((planId: string) => {\n    setSelectedPlanId(planId)\n  }, [])\n\n  const selectedPlan = useMemo(() => {\n    return planInfo.plans.find(plan => plan.id === selectedPlanId)\n  }, [planInfo.plans, selectedPlanId])\n\n  const installSection = useMemo(() => {\n    if (planInfo.is_regular_emu_user) {\n      return (\n        <div>\n          Only enterprise administrators and organization admins can purchase applications from the marketplace.\n        </div>\n      )\n    } else if (planInfo.emu_owner_but_not_admin) {\n      return <div>Only enterprise admins are able to install paid Marketplace plans.</div>\n    } else if (selectedPlan) {\n      return <PlanForm planInfo={planInfo} plan={selectedPlan} listing={listing} />\n    }\n  }, [planInfo, selectedPlan, listing])\n\n  return (\n    <Box className=\"d-flex flex-column flex-md-row flex-items-start\" sx={{gap: '2.5rem'}}>\n      <Box\n        className=\"flex-1 width-full width-md-auto\"\n        sx={{\n          backgroundColor: 'canvas.default',\n          borderStyle: 'solid',\n          borderWidth: 1,\n          display: 'flex',\n          fontSize: 1,\n          borderColor: 'border.default',\n          borderRadius: 2,\n          boxShadow: 'shadow.small',\n          flexDirection: 'column',\n        }}\n      >\n        {planInfo.plans.map((plan, index) => (\n          <Box\n            key={plan.id}\n            sx={{\n              display: 'flex',\n              gap: 2,\n              p: 3,\n              borderBottom: index === planInfo.plans.length - 1 ? 'none' : '1px solid',\n              borderBottomColor: 'border.default',\n            }}\n          >\n            <Radio\n              aria-describedby=\"price-yearly\"\n              name=\"plan\"\n              value={plan.id}\n              id={plan.id}\n              checked={selectedPlanId === plan.id}\n              onChange={() => onPlanChange(plan.id)}\n            />\n            <Box\n              sx={{\n                display: 'flex',\n                flex: 1,\n                gap: [1, 1, 0],\n                width: '100%',\n                flexDirection: ['column', 'row', 'row'],\n              }}\n            >\n              <div className=\"flex-1\">\n                <Box as=\"label\" htmlFor={plan.id} sx={{fontWeight: 'bold'}}>\n                  {plan.name} {plan.is_paid && plan.has_free_trial && <Label sx={{ml: 1}}>Free trial available</Label>}\n                </Box>\n                <p className=\"mb-0\">{plan.description}</p>\n              </div>\n              <Text\n                sx={{\n                  color: 'fg.muted',\n                  textAlign: ['left', 'left', 'right'],\n                  fontWeight: 'normal',\n                }}\n              >\n                {plan.is_paid && (\n                  <>\n                    <span>{plan.price}</span>\n                    {plan.per_unit && <span> {plan.unit_name}</span>}\n                    <span>{planInfo.is_user_billed_monthly ? '/ month' : '/ year'}</span>\n                  </>\n                )}\n                {!plan.is_paid && !plan.direct_billing && <span>$0</span>}\n              </Text>\n            </Box>\n          </Box>\n        ))}\n      </Box>\n\n      {selectedPlan && (\n        <div className=\"flex-1 width-full width-md-auto\">\n          <div className=\"border rounded-3 bgColor-default p-4 color-shadow-small\">\n            <h3 className=\"f3 text-normal lh-condensed\">{selectedPlan.name}</h3>\n            <p className=\"mt-1\">{selectedPlan.description}</p>\n\n            {selectedPlan.for_organizations_only && <div>For organizations only</div>}\n            {selectedPlan.for_users_only && <div>For users only</div>}\n\n            {selectedPlan.bullets.length > 0 && (\n              <ul className=\"mt-3 list-style-none d-flex flex-column gap-1\">\n                {selectedPlan.bullets.map(bullet => (\n                  <li key={bullet} className=\"d-flex gap-2\">\n                    <Octicon icon={CheckIcon} className=\"color-fg-success\" sx={{transform: 'translateY(2px)'}} />\n                    {bullet}\n                  </li>\n                ))}\n              </ul>\n            )}\n\n            {installSection}\n          </div>\n          <TermsOfService planInfo={planInfo} plan={selectedPlan} listing={listing} />\n        </div>\n      )}\n    </Box>\n  )\n}\n\nconst PlanForm = ({planInfo, plan, listing}: {planInfo: PlanInfo; plan: Plan; listing: AppListing}) => {\n  const [seatQuantity, setSeatQuantity] = useState(planInfo.order_preview?.quantity || 1)\n  const [selectedOrganization, setSelectedOrganization] = useState<string | undefined>(planInfo.selected_account)\n\n  const formMethod = useMemo(() => {\n    // For direct billing plans, we skip the order review stage since payment is setup outside of GitHub\n    return plan?.direct_billing ? 'POST' : 'GET'\n  }, [plan])\n\n  const authToken = useCSRFToken(`/marketplace/${listing.slug}/order/${plan.id}`, 'post')\n\n  return (\n    <form method={formMethod} action={`/marketplace/${listing.slug}/order/${plan.id}`} id=\"plan-form\">\n      <input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\" />\n      {plan.direct_billing && (\n        <>\n          {\n            // eslint-disable-next-line github/authenticity-token\n            <input type=\"hidden\" name=\"authenticity_token\" value={authToken} />\n          }\n          <input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\" />\n          {planInfo.can_sign_end_user_agreement && planInfo.end_user_agreement && (\n            <>\n              <input type=\"hidden\" name=\"marketplace_listing_id\" id=\"marketplace_listing_id\" value={listing.id} />\n              <input\n                type=\"hidden\"\n                name=\"marketplace_agreement_id\"\n                id=\"marketplace_agreement_id\"\n                value={planInfo.end_user_agreement.id}\n              />\n            </>\n          )}\n        </>\n      )}\n      {plan.is_paid && (\n        <>\n          {plan.per_unit && (\n            <div className=\"mt-3\">\n              <TextInput\n                type=\"number\"\n                value={seatQuantity}\n                name=\"quantity\"\n                id=\"quantity\"\n                min=\"0\"\n                max=\"100000\"\n                sx={{width: '6rem'}}\n                onChange={e => setSeatQuantity(parseInt(e.target.value))}\n              />{' '}\n              <label htmlFor=\"quantity\" className=\"text-normal\">\n                {plan.unit_name}\n                {seatQuantity === 1 ? '' : 's'} in this plan\n              </label>\n            </div>\n          )}\n          <div className=\"my-3 border-top border-bottom py-2 d-flex flex-items-baseline flex-justify-between\">\n            <div className=\"d-flex flex-items-baseline\">\n              <span className=\"f2 mr-2\">{plan.price}</span>\n              <span className=\"text-small color-fg-muted\">\n                {planInfo.is_user_billed_monthly ? '/ month ' : '/ year '}\n              </span>\n            </div>\n            {plan.per_unit && <span>per {plan.unit_name}</span>}\n          </div>\n        </>\n      )}\n\n      {listing.copilotApp && (\n        <p className=\"my-2\">\n          Copilot extensions are currently in{' '}\n          <Link href=\"https://docs.github.com/en/site-policy/github-terms/github-pre-release-license-terms\" inline>\n            limited public beta\n          </Link>{' '}\n          and not yet available for all users and organizations. Supported organizations are indicated.\n        </p>\n      )}\n\n      {planInfo.selected_account && (\n        <>\n          {planInfo.organizations.length === 0 ? (\n            <input type=\"hidden\" name=\"account\" id=\"account\" value={planInfo.selected_account} />\n          ) : (\n            <div className=\"mt-2\">\n              <ActionMenu>\n                <ActionMenu.Button>{selectedOrganization || 'Select account'}</ActionMenu.Button>\n                <ActionMenu.Overlay maxHeight=\"large\" width=\"medium\" sx={{overflow: 'auto'}}>\n                  <ActionList>\n                    {planInfo.current_user && (\n                      <ActionList.Item onSelect={() => setSelectedOrganization(planInfo.current_user?.display_login)}>\n                        <ActionList.LeadingVisual>\n                          {planInfo.current_user.image && <GitHubAvatar src={planInfo.current_user.image} />}\n                        </ActionList.LeadingVisual>\n                        {planInfo.current_user.display_login}\n                        {listing.copilotApp && planInfo.current_user.has_extensibility_access && (\n                          <ActionList.Description variant=\"block\">Supports Copilot extensions</ActionList.Description>\n                        )}\n                      </ActionList.Item>\n                    )}\n                    {planInfo.organizations.map(org => (\n                      <ActionList.Item\n                        key={org.display_login}\n                        onSelect={() => setSelectedOrganization(org.display_login)}\n                      >\n                        <ActionList.LeadingVisual>\n                          {org.image && <GitHubAvatar src={org.image} />}\n                        </ActionList.LeadingVisual>\n                        {org.display_login}\n                        {listing.copilotApp && org.has_extensibility_access && (\n                          <ActionList.Description variant=\"block\">Supports Copilot extensions</ActionList.Description>\n                        )}\n                      </ActionList.Item>\n                    ))}\n                  </ActionList>\n                </ActionMenu.Overlay>\n              </ActionMenu>\n              {selectedOrganization && <input type=\"hidden\" name=\"account\" id=\"account\" value={selectedOrganization} />}\n            </div>\n          )}\n        </>\n      )}\n\n      <InstallButton planInfo={planInfo} plan={plan} listing={listing} />\n      <InstallHelpText planInfo={planInfo} plan={plan} listing={listing} />\n    </form>\n  )\n}\n\nconst InstallButton = ({planInfo, plan, listing}: {planInfo: PlanInfo; plan: Plan; listing: AppListing}) => {\n  let isDisabled\n  let buttonText\n  let gaClickDetail\n\n  if (plan.direct_billing) {\n    isDisabled = !planInfo.is_buyable\n    buttonText = `Set up with ${listing.name}`\n    gaClickDetail = 'setup direct billing'\n  } else if (\n    plan.is_paid &&\n    plan.has_free_trial &&\n    (planInfo.subscription_item.on_free_trial || planInfo.any_account_eligible_for_free_trial)\n  ) {\n    isDisabled = !planInfo.is_buyable\n    if (planInfo.is_buyable || planInfo.organizations.length > 0) {\n      buttonText = `Try free for ${planInfo.free_trial_length}`\n    } else if (planInfo.viewer_free_trial_days_left && planInfo.viewer_free_trial_days_left > 0) {\n      buttonText = `${planInfo.viewer_free_trial_days_left} ${\n        planInfo.viewer_free_trial_days_left === 1 ? 'day' : 'days'\n      } left of free trial`\n    } else {\n      buttonText = `Try free for ${planInfo.free_trial_length}`\n    }\n    gaClickDetail = `try free for ${planInfo.free_trial_length}`\n  } else if (plan.is_paid) {\n    isDisabled = !planInfo.is_buyable\n    buttonText = 'Buy with GitHub'\n    gaClickDetail = 'buy with github'\n  } else if (planInfo.is_buyable) {\n    isDisabled = false\n    buttonText = 'Install it for free'\n    gaClickDetail = 'install it for free'\n  } else {\n    isDisabled = true\n    buttonText = 'Install it for free'\n    gaClickDetail = 'install it for free'\n  }\n\n  return (\n    <Button\n      variant=\"primary\"\n      size=\"large\"\n      disabled={isDisabled}\n      type=\"submit\"\n      sx={{mt: 3}}\n      data-octo-click=\"marketplace-listing_order_click\"\n      data-octo-dimensions={`marketplace_listing_id:${listing.id}`}\n      data-ga-click={`Marketplace listing, ${gaClickDetail}, marketplace_id:${listing.id}`}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\nconst InstallHelpText = ({planInfo, plan, listing}: {planInfo: PlanInfo; plan: Plan; listing: AppListing}) => {\n  if (planInfo.free_trials_used) {\n    return <div>Youve already used a free trial for this app</div>\n  } else if (!planInfo.installation_url_requirement_met) {\n    if (planInfo.user_can_edit_listing) {\n      return (\n        <div>\n          This app is not installable because it is missing{' '}\n          <a href={`/marketplace/${listing.slug}/edit/description#naming_and_links`}>an installation URL</a>.\n        </div>\n      )\n    } else {\n      return null\n    }\n  } else if (planInfo.is_buyable) {\n    return (\n      <p className=\"mt-2 mb-0 f6\">\n        Next: Confirm your installation location{plan.is_paid && ' and payment information'}\n      </p>\n    )\n  } else {\n    return <p className=\"mt-2 mb-0 f6\">Youve already purchased this on all of your GitHub accounts</p>\n  }\n}\n\nconst TermsOfService = ({planInfo, plan, listing}: {planInfo: PlanInfo; plan: Plan; listing: AppListing}) => {\n  const agreement = planInfo.end_user_agreement\n  const [agreementDialogOpen, setAgreementDialogOpen] = useState(false)\n\n  const buttonText = useMemo(() => {\n    return `Set up with ${listing.name}`\n  }, [listing.name])\n\n  return (\n    <>\n      {plan.direct_billing && planInfo.is_logged_in && agreement ? (\n        <p className=\"mt-3 text-center text-wrap-balance f6 fgColor-muted\">\n          {listing.tosUrl ? (\n            <>\n              By clicking {buttonText}, you are agreeing to{' '}\n              {!agreement.user_signed_at && (\n                <>\n                  the{' '}\n                  <Link as=\"button\" inline={true} onClick={() => setAgreementDialogOpen(true)}>\n                    {agreement.name}\n                  </Link>\n                  ,\n                </>\n              )}\n              {listing.name}s{' '}\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={listing.tosUrl}>\n                Terms of Service\n              </a>{' '}\n              and the{' '}\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={listing.privacyPolicyUrl}>\n                Privacy Policy\n              </a>\n              .\n            </>\n          ) : (\n            <>\n              By clicking {buttonText}, you agree to{' '}\n              {!agreement.user_signed_at && (\n                <>\n                  the{' '}\n                  <Link as=\"button\" inline={true} onClick={() => setAgreementDialogOpen(true)}>\n                    {agreement.name}\n                  </Link>\n                  , and{' '}\n                </>\n              )}\n              {listing.name}s{' '}\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={listing.privacyPolicyUrl}>\n                Privacy Policy\n              </a>\n              .\n            </>\n          )}\n\n          {agreement.user_signed_at && (\n            <>\n              {' '}\n              You previously agreed to the{' '}\n              <Link as=\"button\" inline={true} onClick={() => setAgreementDialogOpen(true)}>\n                {agreement.name}\n              </Link>\n              .\n            </>\n          )}\n          <Dialog isOpen={agreementDialogOpen} onDismiss={() => setAgreementDialogOpen(false)} aria-labelledby=\"header\">\n            <div data-testid=\"inner\">\n              <Dialog.Header id=\"header\">{`GitHub ${agreement.name} ${agreement.version}`}</Dialog.Header>\n              <SafeHTMLBox html={agreement.html as SafeHTMLString} sx={{p: 3}} />\n              {agreement.user_signed_at && (\n                <Box sx={{borderTopStyle: 'solid', borderTopColor: 'border.default', borderTopWidth: 1, p: 3}}>\n                  You agreed to these terms <RelativeTime date={new Date(agreement.user_signed_at)} />\n                </Box>\n              )}\n            </div>\n          </Dialog>\n        </p>\n      ) : (\n        <>\n          {planInfo.listing_by_github ? (\n            <p className=\"mt-3 text-center text-wrap-balance f6 fgColor-muted\">\n              {listing.name} is owned and operated by GitHub{' '}\n              {listing.tosUrl ? (\n                <>\n                  with separate <a href={listing.tosUrl}>terms of service</a>\n                  {', '}\n                  <a href={listing.privacyPolicyUrl}>privacy policy</a>,\n                </>\n              ) : (\n                <>\n                  with separate <a href={listing.privacyPolicyUrl}>privacy policy</a>\n                </>\n              )}{' '}\n              and{' '}\n              {planInfo.support_email ? (\n                <>\n                  <a href={planInfo.support_email}>support contact</a>.\n                </>\n              ) : (\n                <>\n                  <a href={listing.supportUrl}>support documentation</a>.\n                </>\n              )}\n            </p>\n          ) : (\n            <p className=\"mt-3 text-center text-wrap-balance f6 fgColor-muted\">\n              {listing.name} is provided by a third-party and is governed by{' '}\n              {listing.tosUrl ? (\n                <>\n                  separate <a href={listing.tosUrl}>terms of service</a>\n                  {', '}\n                  <a href={listing.privacyPolicyUrl}>privacy policy</a>,\n                </>\n              ) : (\n                <>\n                  separate <a href={listing.privacyPolicyUrl}>privacy policy</a>\n                </>\n              )}{' '}\n              and{' '}\n              {planInfo.support_email ? (\n                <>\n                  <a href={planInfo.support_email}>support contact</a>.\n                </>\n              ) : (\n                <>\n                  <a href={listing.supportUrl}>support documentation</a>\n                </>\n              )}\n            </p>\n          )}\n        </>\n      )}\n    </>\n  )\n}\n\ntry{ Plans.displayName ||= 'Plans' } catch {}\ntry{ PlanForm.displayName ||= 'PlanForm' } catch {}\ntry{ InstallButton.displayName ||= 'InstallButton' } catch {}\ntry{ InstallHelpText.displayName ||= 'InstallHelpText' } catch {}\ntry{ TermsOfService.displayName ||= 'TermsOfService' } catch {}","export function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n  return value !== null && value !== undefined\n}\n","export function joinWords(words: string[]): string {\n  if (words.length < 2) {\n    return words[0] || ''\n  }\n\n  switch (words.length) {\n    case 2:\n      return `${words[0]} and ${words[1]}`\n    default:\n      return `${words.slice(0, -1).join(', ')}, and ${words[words.length - 1]}`\n  }\n}\n","export function assertNever(value: never) {\n  throw new Error(`Unexpected value: ${value}`)\n}\n","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport styles from '../../marketplace.module.css'\nimport {\n  ActionList,\n  ActionMenu,\n  Box,\n  Breadcrumbs,\n  Button,\n  IconButton,\n  Label,\n  Link,\n  Octicon,\n  PageLayout,\n} from '@primer/react'\nimport {Stack} from '@primer/react/experimental'\nimport {\n  DownloadIcon,\n  GearIcon,\n  KebabHorizontalIcon,\n  PencilIcon,\n  VerifiedIcon,\n  ShieldLockIcon,\n  UnlockIcon,\n} from '@primer/octicons-react'\nimport {SafeHTMLBox, type SafeHTMLString} from '@github-ui/safe-html'\nimport type {ShowAppPayload} from '../../types'\nimport Screenshots from '../../components/Screenshots'\nimport Plans from './Plans'\nimport {notEmpty} from '../../utilities/not-empty'\nimport {TagSection, TagSectionIdentifier} from './TagSection'\nimport {useMemo} from 'react'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\n\nexport function ShowApp() {\n  const {\n    listing,\n    screenshots,\n    plan_info,\n    supported_languages: supportedLanguages,\n    verified_domain,\n    user_can_edit,\n    customers,\n  } = useRoutePayload<ShowAppPayload>()\n  const appRestricted = false\n  const hideSetupButton = plan_info.viewer_has_purchased && plan_info.viewer_has_purchased_for_all_organizations\n  const showHeaderActionMenu =\n    plan_info.viewer_has_purchased || plan_info.any_orgs_purchased || plan_info.installed_for_viewer || user_can_edit\n  const anyPlansExist = plan_info.viewer_has_purchased || plan_info.any_orgs_purchased\n  const hasSupportedLanguages = supportedLanguages.length > 0\n  const hasCustomers = customers.length > 0\n\n  const tagSections = [\n    TagSectionIdentifier.Category,\n    hasSupportedLanguages ? TagSectionIdentifier.SupportedLanguages : null,\n    hasCustomers ? TagSectionIdentifier.Customers : null,\n    TagSectionIdentifier.FromTheDeveloper,\n  ].filter(notEmpty)\n\n  const reportUrl = useMemo(() => {\n    const host = ssrSafeWindow?.location.origin\n    if (!host) return undefined\n    const listingUrl = `${host}/marketplace/${listing.slug}`\n\n    const query = `report=${listingUrl}+(Marketplace Listing)`\n    const reportTargetUrl = `${host}/contact/report-abuse?${query}`\n\n    return reportTargetUrl\n  }, [listing.slug])\n\n  return (\n    <div data-testid=\"legacy-app-listing\">\n      <PageLayout>\n        <PageLayout.Header>\n          <Breadcrumbs>\n            <Breadcrumbs.Item href=\"/marketplace\">Marketplace</Breadcrumbs.Item>\n            <Breadcrumbs.Item href=\"/marketplace?type=apps\">Apps</Breadcrumbs.Item>\n            <Breadcrumbs.Item href=\"#\" selected>\n              {listing.name}\n            </Breadcrumbs.Item>\n          </Breadcrumbs>\n\n          <Stack\n            gap=\"normal\"\n            direction={{narrow: 'vertical', regular: 'horizontal'}}\n            className=\"border-bottom color-border-muted py-4\"\n          >\n            <Box\n              className={`rounded-3 flex-shrink-0 ${styles['marketplace-logo']} ${styles['marketplace-logo--large']}`}\n              sx={{\n                backgroundColor: `#${listing.bgColor}`,\n                color: listing.bgColor === 'ffffff' ? 'var(--fgColor-black)' : 'var(--fgColor-white)',\n              }}\n            >\n              <img src={listing.listingLogoUrl} alt={listing.name} className={styles['marketplace-logo-img']} />\n            </Box>\n            <div className=\"flex-1\">\n              <div className=\"d-flex flex-items-center gap-2\">\n                <h1 className=\"lh-condensed\">{listing.name}</h1>\n                {listing.copilotApp && (\n                  <Label size=\"large\" variant=\"secondary\">\n                    Copilot\n                  </Label>\n                )}\n              </div>\n              <p className=\"h4 text-normal mb-0\" data-testid=\"short-description\">\n                {listing.shortDescription}\n              </p>\n              <div className=\"mt-1 d-flex flex-items-center fgColor-muted\">\n                {listing.ownerLogin && (\n                  <span className=\"fgColor-muted mr-3\">\n                    by{' '}\n                    <Link muted={true} href={`/${listing.ownerLogin}`} sx={{fontWeight: 'bold'}}>\n                      {listing.ownerLogin}\n                    </Link>\n                  </span>\n                )}\n                <Octicon icon={DownloadIcon} sx={{mr: 2}} />\n                <span className=\"text-bold\">{listing.installationCount.toLocaleString()}&nbsp;</span>\n                <span>install{listing.installationCount === 1 ? '' : 's'}</span>\n              </div>\n            </div>\n\n            {(!hideSetupButton || showHeaderActionMenu) && (\n              <div className=\"d-flex gap-2\">\n                {!hideSetupButton && (\n                  <Button\n                    as=\"a\"\n                    variant=\"primary\"\n                    size=\"large\"\n                    className=\"js-smoothscroll-anchor\"\n                    disabled={appRestricted ? true : false}\n                    href=\"#pricing-and-setup\"\n                    data-testid=\"setup-button\"\n                  >\n                    {plan_info.viewer_has_purchased || plan_info.any_orgs_purchased\n                      ? 'Add'\n                      : plan_info.plans.some(plan => plan.has_free_trial)\n                        ? 'Set up a free trial'\n                        : 'Add'}\n                  </Button>\n                )}\n\n                {showHeaderActionMenu && (\n                  <div data-testid=\"listing-actions\">\n                    <ActionMenu>\n                      <ActionMenu.Anchor>\n                        {/* eslint-disable-next-line primer-react/a11y-remove-disable-tooltip */}\n                        <IconButton\n                          icon={KebabHorizontalIcon}\n                          size=\"large\"\n                          aria-label=\"More actions\"\n                          unsafeDisableTooltip={true}\n                          data-testid=\"listing-actions-button\"\n                        />\n                      </ActionMenu.Anchor>\n\n                      <ActionMenu.Overlay width=\"small\" align=\"end\">\n                        <ActionList>\n                          {anyPlansExist && (\n                            <ActionList.Group>\n                              <ActionList.GroupHeading>Edit current plan</ActionList.GroupHeading>\n                              {plan_info.viewer_has_purchased && plan_info.current_user && (\n                                <ActionList.LinkItem\n                                  href={`/marketplace/${listing.slug}/order/${\n                                    plan_info.plan_id_by_login[plan_info.current_user.display_login]\n                                  }?account=${plan_info.current_user.display_login}`}\n                                >\n                                  {plan_info.current_user.display_login}\n                                </ActionList.LinkItem>\n                              )}\n                              {plan_info.viewer_billed_organizations.map(orgName => (\n                                <ActionList.LinkItem\n                                  key={orgName}\n                                  href={`/marketplace/${listing.slug}/order/${plan_info.plan_id_by_login[orgName]}?account=${orgName}`}\n                                >\n                                  {orgName}\n                                </ActionList.LinkItem>\n                              ))}\n                            </ActionList.Group>\n                          )}\n\n                          {anyPlansExist && (plan_info.installed_for_viewer || user_can_edit) && <ActionList.Divider />}\n\n                          {plan_info.installed_for_viewer && (\n                            <ActionList.LinkItem href=\"/settings/installations\">\n                              <ActionList.LeadingVisual>\n                                <Octicon icon={GearIcon} />\n                              </ActionList.LeadingVisual>\n                              Configure account access\n                            </ActionList.LinkItem>\n                          )}\n                          {user_can_edit && (\n                            <ActionList.LinkItem href={`/marketplace/${listing.slug}/edit`}>\n                              <ActionList.LeadingVisual>\n                                <Octicon icon={PencilIcon} />\n                              </ActionList.LeadingVisual>\n                              Manage app listing\n                            </ActionList.LinkItem>\n                          )}\n                        </ActionList>\n                      </ActionMenu.Overlay>\n                    </ActionMenu>\n                  </div>\n                )}\n              </div>\n            )}\n          </Stack>\n        </PageLayout.Header>\n        <PageLayout.Pane position=\"start\">\n          {(listing.isVerifiedOwner || verified_domain || listing.copilotApp) && (\n            <>\n              <h2 className=\"mt-4 f5 fgColor-muted lh-condensed-ultra\">About</h2>\n            </>\n          )}\n          {(listing.isVerifiedOwner || verified_domain) && (\n            <>\n              <div className=\"mt-2 d-flex flex-column gap-1\">\n                <div className=\"d-flex flex-items-center gap-2\">\n                  {verified_domain && <a href={`https://${verified_domain}`}>{verified_domain}</a>}\n                </div>\n                {listing.isVerifiedOwner && (\n                  <div className=\"d-flex gap-2\">\n                    <Octicon icon={VerifiedIcon} className=\"fgColor-accent\" vertical-align=\"middle\" sx={{mt: '2px'}} />\n                    <span>\n                      GitHub has verified that the publisher controls the domain and meets other requirements.\n                    </span>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n          {listing.copilotApp && (\n            <>\n              <div className=\"mt-2 d-flex gap-2\">\n                <Octicon icon={UnlockIcon} className=\"fgColor-accent\" vertical-align=\"middle\" sx={{mt: '2px'}} />\n                <span>\n                  Using Copilot Extensions requires a{' '}\n                  <a href=\"https://github.com/features/copilot/plans\">{'GitHub Copilot'}</a> license.\n                </span>\n              </div>\n              <div className=\"mt-2 d-flex gap-2\">\n                <Octicon icon={ShieldLockIcon} className=\"fgColor-accent\" vertical-align=\"middle\" sx={{mt: '2px'}} />\n                <span>An Admin must enable access for organization or enterprise use.</span>\n              </div>\n            </>\n          )}\n          <div className=\"mb-1\">\n            {tagSections.map(identifier => (\n              <TagSection\n                key={identifier}\n                identifier={identifier}\n                listing={listing}\n                supportedLanguages={supportedLanguages}\n                customers={customers}\n              />\n            ))}\n          </div>\n          {reportUrl && <Link href={reportUrl}>Report abuse</Link>}\n        </PageLayout.Pane>\n\n        <PageLayout.Content as=\"div\" width=\"medium\">\n          <div className=\"markdown-body\" data-testid=\"description\">\n            {listing.fullDescription && <SafeHTMLBox html={listing.fullDescription as SafeHTMLString} />}\n            {listing.extendedDescription && <SafeHTMLBox html={listing.extendedDescription as SafeHTMLString} />}\n          </div>\n          <Screenshots screenshots={screenshots} />\n        </PageLayout.Content>\n      </PageLayout>\n\n      <div className=\"bgColor-muted p-5\" id=\"pricing-and-setup\">\n        <div className=\"container-lg\">\n          <h2 className=\"mb-4\">Pricing and setup</h2>\n          <Plans planInfo={plan_info} listing={listing} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\ntry{ ShowApp.displayName ||= 'ShowApp' } catch {}","import {Box, PageLayout, UnderlineNav} from '@primer/react'\nimport {BookIcon} from '@primer/octicons-react'\n\ninterface ListingLayoutProps {\n  header: React.ReactNode\n  body: React.ReactNode\n  sidebar: React.ReactNode\n}\n\nexport const ListingLayout = (props: ListingLayoutProps) => {\n  const {header, body, sidebar} = props\n\n  return (\n    <div className=\"d-flex flex-column\">\n      <PageLayout columnGap=\"normal\" sx={{p: 3}}>\n        <PageLayout.Header>{header}</PageLayout.Header>\n\n        <Box\n          sx={{\n            display: 'flex',\n            gap: 2,\n            width: ['100%', '100%', 'auto'],\n            justifyContent: 'flex-end',\n            flexGrow: [0, 0, 1],\n            flexShrink: 0,\n            flexDirection: ['column-reverse', 'column-reverse', 'row'],\n          }}\n        >\n          <PageLayout.Content as=\"div\" sx={{pt: 0}}>\n            <Box\n              sx={{\n                width: '100%',\n                borderColor: 'border.default',\n                borderStyle: 'solid',\n                borderWidth: 1,\n                borderRadius: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                boxShadow: 'var(--shadow-resting-small,var(--color-shadow-small))',\n              }}\n            >\n              <div>\n                <UnderlineNav aria-label=\"Listing navigation\">\n                  <UnderlineNav.Item icon={BookIcon} aria-current={'page'}>\n                    README\n                  </UnderlineNav.Item>\n                </UnderlineNav>\n              </div>\n              <Box sx={{p: [2, 2, 3]}}>{body}</Box>\n            </Box>\n          </PageLayout.Content>\n          <PageLayout.Pane>{sidebar}</PageLayout.Pane>\n        </Box>\n      </PageLayout>\n    </div>\n  )\n}\n\ntry{ ListingLayout.displayName ||= 'ListingLayout' } catch {}","import {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport {ShowApp as LegacyShowApp} from '../components/legacy/ShowApp'\nimport {ListingLayout} from '../components/ListingLayout'\n\nexport function ShowApp() {\n  const redesignFeatureFlag = useFeatureFlag('marketplace_layout_redesign')\n\n  return <>{redesignFeatureFlag ? <RedesignedShowApp /> : <LegacyShowApp />}</>\n}\n\nconst RedesignedShowApp = () => {\n  return (\n    <div className=\"d-flex flex-column\" data-testid=\"app-listing\">\n      <ListingLayout header=\"Header\" body={<div>Body</div>} sidebar={<div>Sidebar</div>} />\n    </div>\n  )\n}\n\ntry{ ShowApp.displayName ||= 'ShowApp' } catch {}\ntry{ RedesignedShowApp.displayName ||= 'RedesignedShowApp' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport styles from '../marketplace.module.css'\n\nimport {Breadcrumbs, PageLayout} from '@primer/react'\nimport type {ShowActionPayload} from '../types'\n\nexport function ShowAction() {\n  const payload = useRoutePayload<ShowActionPayload>()\n\n  return (\n    <>\n      <PageLayout>\n        <PageLayout.Header>\n          <Breadcrumbs>\n            <Breadcrumbs.Item href=\"/marketplace\">Marketplace</Breadcrumbs.Item>\n            <Breadcrumbs.Item href=\"#\" selected>\n              {payload.action.name}\n            </Breadcrumbs.Item>\n          </Breadcrumbs>\n        </PageLayout.Header>\n        <PageLayout.Pane position=\"start\">\n          <div\n            className={`rounded-3 bgColor-accent-emphasis ${styles['marketplace-logo']} ${styles['marketplace-logo--large']}`}\n          >\n            <img src=\"\" alt=\"\" className={styles['marketplace-logo-img']} />\n          </div>\n        </PageLayout.Pane>\n\n        <PageLayout.Content as=\"div\" width=\"medium\">\n          <div className=\"d-flex flex-items-center gap-2\">\n            <span className=\"fgColor-muted\">Copilot plugin</span>\n          </div>\n          <h1>{payload.action.name}</h1>\n        </PageLayout.Content>\n      </PageLayout>\n    </>\n  )\n}\n\ntry{ ShowAction.displayName ||= 'ShowAction' } catch {}","import styles from '../marketplace.module.css'\nimport {Box, Heading} from '@primer/react'\nimport {ArrowUpRightIcon} from '@primer/octicons-react'\n\nexport function CallToActionItem() {\n  return (\n    <Box\n      sx={{\n        position: 'relative',\n        backgroundColor: 'var(--bgColor-upsell-muted)',\n        border: '1px solid var(--borderColor-upsell-muted)',\n        display: 'flex',\n        flexDirection: 'column',\n        borderRadius: 2,\n        p: 3,\n        boxShadow: 'var(--shadow-resting-small, var(--color-shadow-small))',\n        transition: 'background-color .3s',\n        ':hover': {\n          cursor: 'pointer',\n          backgroundColor: 'var(--borderColor-upsell-muted)',\n        },\n      }}\n    >\n      <Box sx={{display: 'flex', justifyContent: 'space-between'}}>\n        <Heading as=\"h3\" className=\"f4\">\n          <a href={'/marketplace/models/waitlist'} className={`${styles['marketplace-item-link']}`}>\n            Get early access to our playground for models\n          </a>\n        </Heading>\n        <ArrowUpRightIcon />\n      </Box>\n      <p className=\"mt-2 mb-auto text-small fgColor-muted\">\n        Join our limited beta waiting list today and be among the first to try out an easy way to test models.\n      </p>\n    </Box>\n  )\n}\n\ntry{ CallToActionItem.displayName ||= 'CallToActionItem' } catch {}","import {ActionList, ActionMenu, Link} from '@primer/react'\nimport {taskOptions, modelFamilyOptions, categoryOptions} from '../../utilities/model-filter-options'\n\nexport default function ModelsIndexFilters() {\n  return (\n    <div className=\"d-flex gap-2 flex-wrap\">\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"creator-button\">\n          <span className=\"fgColor-muted\">By:</span> All providers\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {modelFamilyOptions.map(option => (\n              <Link muted key={option} href={`/marketplace?type=models&model_family=${option}`}>\n                <ActionList.Item key={option} selected={option === 'All'}>\n                  {option}\n                </ActionList.Item>\n              </Link>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"creator-button\">\n          <span className=\"fgColor-muted\">Capability:</span> All\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {taskOptions.map(option => (\n              <Link muted key={option} href={`/marketplace?type=models&task=${option}`}>\n                <ActionList.Item key={option} selected={option === 'All'}>\n                  {option.toLowerCase() === 'chat-completion' ? 'Chat/completion' : option}\n                </ActionList.Item>\n              </Link>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n      <ActionMenu>\n        <ActionMenu.Button data-testid=\"creator-button\">\n          <span className=\"fgColor-muted\">Tag:</span> All\n        </ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\" data-testid=\"creator-menu\">\n            {categoryOptions.map(option => (\n              <Link muted key={option} href={`/marketplace?type=models&category=${option}`}>\n                <ActionList.Item key={option} selected={option === 'All'}>\n                  {option}\n                </ActionList.Item>\n              </Link>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </div>\n  )\n}\n\ntry{ ModelsIndexFilters.displayName ||= 'ModelsIndexFilters' } catch {}","import styles from '../../../marketplace.module.css'\n\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport type {IndexModelsPayload} from '../../../types'\n\nimport {Label, Link, PageLayout} from '@primer/react'\nimport MarketplaceHeader from '../../../components/MarketplaceHeader'\nimport MarketplaceNavigation from '../../../components/MarketplaceNavigation'\nimport ModelItem from './components/ModelItem'\nimport {CallToActionItem} from '../../../components/CallToActionItem'\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport ModelsIndexFilters from '../../../components/models/ModelsIndexFilters'\n\nexport function ModelsIndexRoute() {\n  const payload = useRoutePayload<IndexModelsPayload>()\n  const projectNeutronPlaygroundEnabled = useFeatureFlag('project_neutron_playground')\n  const searchFiltersFeatureFlag = useFeatureFlag('project_neutron_filtering')\n\n  return (\n    <>\n      <MarketplaceHeader />\n      <PageLayout>\n        <PageLayout.Pane position=\"start\">\n          <MarketplaceNavigation categories={payload.categories} />\n        </PageLayout.Pane>\n        <PageLayout.Content as=\"div\">\n          <div className=\"d-flex flex-column flex-sm-row flex-justify-between flex-wrap gap-2 mb-4\">\n            <div>\n              <h2 className=\"f2 lh-condensed\">Models</h2>\n              <p className=\"fgColor-muted mb-0\">\n                Try, test, and deploy from a wide range of model types, sizes, and specializations.{' '}\n                <Link inline href=\"https://docs.github.com/github-models/prototyping-with-ai-models\">\n                  Learn more\n                </Link>\n                .\n              </p>\n            </div>\n            <div className=\"d-flex flex-items-center gap-2\">\n              <Label variant=\"success\">Beta</Label>\n              <Link href=\"https://gh.io/models-feedback\">Give feedback</Link>\n            </div>\n          </div>\n\n          {searchFiltersFeatureFlag && <ModelsIndexFilters />}\n\n          <div className={`mt-4 ${styles['marketplace-list-grid']}`}>\n            {/* We should only render the CTA when someone is NOT on the waitlist AND they do NOT have access to the playground */}\n            {!payload.on_waitlist && !projectNeutronPlaygroundEnabled && <CallToActionItem />}\n            {payload.models?.map(model => <ModelItem key={model.name} model={model} />)}\n          </div>\n        </PageLayout.Content>\n      </PageLayout>\n    </>\n  )\n}\n\ntry{ ModelsIndexRoute.displayName ||= 'ModelsIndexRoute' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"fadeInOut\":\"ModelLayout-module__fadeInOut--gB0Bh\",\"fadeInOutShow\":\"ModelLayout-module__fadeInOutShow--I3Vre\",\"animateHeight\":\"ModelLayout-module__animateHeight--wIXHm\"};","export class ContentErrorResponseError extends Error {}\nexport const TokenLimitReachedResponseErrorDescription = 'The conversation token limit has been reached. '\nexport class TokenLimitReachedResponseError extends Error {\n  constructor() {\n    super(TokenLimitReachedResponseErrorDescription)\n  }\n}\n\nexport class RetryableError extends Error {\n  retryable: boolean\n  constructor(message: string) {\n    super(message)\n    this.retryable = true\n  }\n}\n\nexport class TooManyRequestsError extends RetryableError {}\n\n// Analytics events\nexport const PlaygroundChatRequestSent = 'github_models.playground.chat_request.sent'\nexport const PlaygroundChatRateLimited = 'github_models.playground.chat_request.rate_limited'\nexport const PlaygroundChatRequestStreamingStarted = 'github_models.playground.chat_request.streaming_started'\nexport const PlaygroundChatRequestStreamingCompleted = 'github_models.playground.chat_request.streaming_completed'\nexport const GettingStartedButtonClicked = 'github_models.getting_started.clicked'\nexport const RunCodespaceButtonClicked = 'github_models.run_codespace.clicked'\n\n// Codespaces\nexport const templateRepositoryNwo = 'github/codespaces-models'\n","import {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport type {Model} from '../../types'\nimport type {FeedbackState} from '../routes/playground/components/GettingStartedDialog/types'\n\nexport async function sendFeedback({model, feedback}: {model: Model; feedback: FeedbackState}): Promise<Response> {\n  const response = await verifiedFetchJSON(`/marketplace/models/${model.registry}/${model.name}/feedback`, {\n    method: 'POST',\n    body: {\n      feedback,\n    },\n  })\n  if (response.ok) {\n    return response\n  } else {\n    throw new Error('Failed to submit feedback')\n  }\n}\n","import type {MarkdownHeadingsTocItem, ShowModelPayload} from '../../../../../types'\n\nexport type LanguageTocItem = {\n  name: string\n  key: string\n  active: boolean\n}\n\nexport type ModelToc = {\n  [language: string]: Language\n}\n\nexport interface GettingStartedPayload extends ShowModelPayload {\n  gettingStarted: Record<string, ShowModelGettingStartedPayloadLanguageEntry>\n}\n\nexport type ShowModelGettingStartedPayloadLanguageEntry = {\n  name: string\n  sdks: Record<string, ShowModelGettingStartedPayloadSDKEntry>\n}\n\nexport type ShowModelGettingStartedPayloadSDKEntry = {\n  name: string\n  content: string\n  tocHeadings: MarkdownHeadingsTocItem[]\n  codeSamples: string\n}\n\nexport enum Feedback {\n  UNKNOWN = 0,\n  POSITIVE = 1,\n  NEGATIVE = 2,\n}\n\nexport type NegativeFeedbackReason = 'harmful' | 'untrue' | 'unhelpful' | 'other'\n\nexport type FeedbackState = {\n  satisfaction: Feedback\n  reasons: NegativeFeedbackReason[]\n  feedbackText: string\n  contactConsent: boolean\n}\n","import {Button, Checkbox, CheckboxGroup, Dialog, FormControl, IconButton, Textarea} from '@primer/react'\nimport {Feedback, type FeedbackState} from './types'\nimport {useCallback, useEffect, useState, type FormEvent} from 'react'\nimport type {ShowModelPayload} from '../../../../../types'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {ThumbsdownIcon, ThumbsupIcon} from '@primer/octicons-react'\nimport {sendFeedback} from '../../../../utils/feedback'\n\nconst initialState = {\n  satisfaction: Feedback.UNKNOWN,\n  reasons: [],\n  feedbackText: '',\n  contactConsent: false,\n}\n\nexport function FeedbackDialog({\n  returnFocusRef,\n  isFeedbackDialogOpen,\n  setIsFeedbackDialogOpen,\n  isNegativePreSelected,\n  setIsNegativeFeedbackConfirmed,\n}: {\n  returnFocusRef: React.RefObject<HTMLDivElement>\n  isFeedbackDialogOpen: boolean\n  setIsFeedbackDialogOpen: (isFeedbackDialogOpen: boolean) => void\n  isNegativePreSelected?: boolean\n  setIsNegativeFeedbackConfirmed?: (isNegativeFeedbackConfirmed: boolean) => void\n}) {\n  const payload = useRoutePayload<ShowModelPayload>()\n  const {canProvideAdditionalFeedback, model} = payload\n\n  const [feedback, setFeedback] = useState<FeedbackState>(initialState)\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false)\n\n  const submitButtonDisabled =\n    (feedback.satisfaction === Feedback.UNKNOWN && feedback.feedbackText.length === 0) || isSubmitting\n  const isNegative = feedback.satisfaction === Feedback.NEGATIVE || isNegativePreSelected\n\n  useEffect(() => {\n    // If the user selects the thumbs down icon on the playground page, display the feedback dialog without the thumbs up/down options\n    if (isNegativePreSelected) {\n      setFeedback({...feedback, satisfaction: Feedback.NEGATIVE})\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      const {value, checked} = event.target\n      if (checked) {\n        setFeedback({...feedback, reasons: [...feedback.reasons, value] as FeedbackState['reasons']})\n      } else {\n        setFeedback({\n          ...feedback,\n          reasons: feedback.reasons.filter(reason => reason !== value),\n        })\n      }\n    },\n    [feedback, setFeedback],\n  )\n\n  const handleSubmit = useCallback(async () => {\n    setIsSubmitting(true)\n    try {\n      const res = await sendFeedback({model, feedback})\n      if (res.ok) {\n        setFeedback(initialState)\n        setIsNegativeFeedbackConfirmed?.(true)\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error)\n    }\n    setIsFeedbackDialogOpen(false)\n    setIsSubmitting(false)\n  }, [feedback, model, setIsFeedbackDialogOpen, setIsNegativeFeedbackConfirmed])\n\n  useEffect(() => {\n    if (!canProvideAdditionalFeedback && feedback.satisfaction === Feedback.POSITIVE) {\n      // The feedback gets instantly submitted when a user cannot provide additional feedback and clicks the thumbs up icon\n      handleSubmit()\n    }\n    // handleSubmit does not need to be included in the dependency list because it gets triggered every time feedback changes\n    // This useEffect should only be triggered when feedback.satisfaction or canProvideAdditionalFeedback changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [canProvideAdditionalFeedback, feedback.satisfaction])\n\n  const handleClick = useCallback(\n    (event: FormEvent<HTMLButtonElement>) => {\n      const response = Number(event.currentTarget.value)\n      if (response === Feedback.POSITIVE) {\n        setFeedback({...feedback, satisfaction: response, reasons: []})\n      } else {\n        setFeedback({...feedback, satisfaction: response})\n      }\n    },\n    [feedback],\n  )\n\n  return (\n    <Dialog\n      returnFocusRef={returnFocusRef}\n      onDismiss={() => {\n        setIsFeedbackDialogOpen(false)\n      }}\n      isOpen={isFeedbackDialogOpen}\n      aria-labelledby=\"feedback-header\"\n      sx={{width: 640}}\n    >\n      <Dialog.Header sx={{border: 0, bg: 'transparent'}} id=\"feedback-header\">\n        Provide feedback\n      </Dialog.Header>\n      <form className=\"px-3 pb-3 d-flex flex-column gap-3\">\n        {!isNegativePreSelected && (\n          <div className=\"d-flex flex-column\">\n            <h4 className=\"f5\">How has your experience been with GitHub Models?</h4>\n            <div className=\"d-flex mt-2\">\n              <IconButton\n                sx={{\n                  color: 'fg.muted',\n                  backgroundColor: feedback.satisfaction === Feedback.POSITIVE ? 'canvas.subtle' : 'canvas.default',\n                }}\n                icon={ThumbsupIcon}\n                variant=\"invisible\"\n                aria-label=\"Positive\"\n                value=\"1\"\n                onClick={handleClick}\n              />\n              <IconButton\n                sx={{\n                  color: 'fg.muted',\n                  backgroundColor: feedback.satisfaction === Feedback.NEGATIVE ? 'canvas.subtle' : 'canvas.default',\n                }}\n                icon={ThumbsdownIcon}\n                variant=\"invisible\"\n                aria-label=\"Negative\"\n                value=\"2\"\n                onClick={handleClick}\n              />\n            </div>\n          </div>\n        )}\n        {isNegative && (\n          <CheckboxGroup>\n            <CheckboxGroup.Label sx={{fontSize: 1, fontWeight: 'bold'}}>This response is...</CheckboxGroup.Label>\n            <FormControl>\n              <Checkbox value=\"harmful\" onChange={handleChange} />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>Harmful or unsafe</FormControl.Label>\n            </FormControl>\n            <FormControl>\n              <Checkbox value=\"not true\" onChange={handleChange} />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>Not true</FormControl.Label>\n            </FormControl>\n            <FormControl>\n              <Checkbox value=\"unhelpful\" onChange={handleChange} />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>Not helpful</FormControl.Label>\n            </FormControl>\n            <FormControl>\n              <Checkbox value=\"other\" onChange={handleChange} />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>Other</FormControl.Label>\n            </FormControl>\n          </CheckboxGroup>\n        )}\n        {canProvideAdditionalFeedback && (\n          <>\n            <FormControl>\n              <FormControl.Label>Additional information</FormControl.Label>\n              <Textarea\n                aria-label=\"Additional information\"\n                resize=\"vertical\"\n                rows={3}\n                value={feedback.feedbackText}\n                placeholder=\"Give as much detail and context as possible but do not share any personal or sensitive information.\"\n                onChange={e => {\n                  setFeedback({\n                    ...feedback,\n                    feedbackText: e.target.value,\n                  })\n                }}\n                sx={{width: '100%'}}\n              />\n            </FormControl>\n            <FormControl>\n              <Checkbox\n                value=\"default\"\n                checked={feedback.contactConsent}\n                onChange={() => {\n                  setFeedback({...feedback, contactConsent: !feedback.contactConsent})\n                }}\n              />\n              <FormControl.Label sx={{fontWeight: 'normal'}}>\n                Allow GitHub to follow up about this feedback using the primary email address on your account.\n              </FormControl.Label>\n            </FormControl>\n          </>\n        )}\n        {(canProvideAdditionalFeedback || isNegative) && (\n          <div className=\"d-flex mt-2 flex-justify-end\">\n            <Button variant=\"primary\" onClick={handleSubmit} disabled={submitButtonDisabled}>\n              Submit feedback\n            </Button>\n          </div>\n        )}\n      </form>\n    </Dialog>\n  )\n}\n\ntry{ FeedbackDialog.displayName ||= 'FeedbackDialog' } catch {}","import {Link, Text} from '@primer/react'\nimport {useRef, useState} from 'react'\nimport {FeedbackDialog} from './FeedbackDialog'\nimport {useNavigate} from '@github-ui/use-navigate'\nimport {useLocation} from 'react-router-dom'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {GettingStartedPayload} from './types'\n\nexport const ModelLegalTerms = () => {\n  const {isLoggedIn} = useRoutePayload<GettingStartedPayload>()\n\n  const productTermsLink = 'https://www.microsoft.com/licensing/terms/productoffering/MicrosoftAzure/MCA'\n  const privacyStatementLink = 'https://www.microsoft.com/licensing/terms/product/PrivacyandSecurityTerms/MCA'\n  const [isFeedbackDialogOpen, setIsFeedbackDialogOpen] = useState(false)\n  const returnFocusRef = useRef(null)\n  const navigate = useNavigate()\n  const currentUrl = useLocation().pathname\n  const handleClick = () => {\n    if (isLoggedIn) {\n      setIsFeedbackDialogOpen(true)\n    } else {\n      navigate(`/login?return_to=${encodeURIComponent(currentUrl)}`)\n    }\n  }\n  return (\n    <>\n      <Text sx={{color: 'fg.muted', fontSize: 0}}>\n        Azure hosted. AI powered, can make mistakes.{' '}\n        <Link as=\"button\" ref={returnFocusRef} onClick={handleClick} inline muted>\n          Share feedback\n        </Link>\n        . Subject to{' '}\n        <Link href={productTermsLink} inline muted>\n          Product Terms\n        </Link>{' '}\n        &{' '}\n        <Link href={privacyStatementLink} inline muted>\n          Privacy Statement\n        </Link>\n        . Not intended for production/sensitive data.\n      </Text>\n      {isFeedbackDialogOpen && (\n        <FeedbackDialog\n          returnFocusRef={returnFocusRef}\n          isFeedbackDialogOpen={isFeedbackDialogOpen}\n          setIsFeedbackDialogOpen={setIsFeedbackDialogOpen}\n        />\n      )}\n    </>\n  )\n}\n\ntry{ ModelLegalTerms.displayName ||= 'ModelLegalTerms' } catch {}","import {useState} from 'react'\nimport {Text, Box, CounterLabel, Link, Label} from '@primer/react'\nimport {EllipsisIcon} from '@primer/octicons-react'\nimport type {Model} from '../../../../types'\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\n\nexport type Labels = {\n  task: string\n  tags: string[]\n}\n\nexport function TagsSection({labels}: {labels: Labels}) {\n  const searchFiltersFeatureFlag = useFeatureFlag('project_neutron_filtering')\n\n  const {tags, task} = labels\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        width: '100%',\n        gap: 2,\n      }}\n    >\n      <Heading title=\"Tags\" count={tags.length} />\n      {tags.length > 0 && (\n        <Box sx={{display: 'flex', gap: 2, flexWrap: 'wrap'}}>\n          {tags.map(tag => {\n            if (searchFiltersFeatureFlag) {\n              // categories cannot contain `-` characters, or ES wil analyze them as separate words\n              const category = tag.toLowerCase().split('-')[0]\n\n              return (\n                <a\n                  href={`/marketplace?type=models&category=${category}`}\n                  key={tag}\n                  className=\"topic-tag topic-tag-link\"\n                >\n                  {tag}\n                </a>\n              )\n            } else {\n              return (\n                <Label key={tag} size=\"large\" variant=\"secondary\">\n                  {tag}\n                </Label>\n              )\n            }\n          })}\n\n          {task &&\n            (searchFiltersFeatureFlag ? (\n              <a href={`/marketplace?type=models&task=${task}`} key={task} className=\"topic-tag topic-tag-link\">\n                {task}\n              </a>\n            ) : (\n              <Label key={task} size=\"large\" variant=\"secondary\">\n                {task}\n              </Label>\n            ))}\n        </Box>\n      )}\n    </Box>\n  )\n}\n\nexport function LanguagesSection({languages}: {languages: string[]}) {\n  const [languagesIsOpen, setLanguagesIsOpen] = useState(false)\n  const shouldTruncateLanguages = languages.length > 12\n  let languagesString: string | undefined\n  const languageNames = new Intl.DisplayNames(['en'], {type: 'language'})\n  const formattedLanguages = languages.map(language => languageNames.of(language))\n\n  if (formattedLanguages.length === 1) {\n    languagesString = formattedLanguages[0]\n  } else if (shouldTruncateLanguages && !languagesIsOpen) {\n    languagesString = formattedLanguages.slice(0, 12).join(', ')\n  } else {\n    const languagesButLast = formattedLanguages.slice(0, formattedLanguages.length - 1).join(', ')\n    languagesString = `${languagesButLast}, and ${formattedLanguages[formattedLanguages.length - 1]}`\n  }\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 2,\n      }}\n    >\n      <Heading title=\"Languages\" count={languages.length} />\n      <div>\n        {languagesString}{' '}\n        {shouldTruncateLanguages && !languagesIsOpen && (\n          <>\n            {' '}\n            <Box\n              as=\"button\"\n              aria-label=\"Reveal all languages\"\n              sx={{color: 'fg.muted', display: 'inline', cursor: 'pointer', border: 0, bg: 'transparent'}}\n              onClick={() => setLanguagesIsOpen(true)}\n            >\n              <EllipsisIcon />\n            </Box>\n          </>\n        )}\n      </div>\n    </Box>\n  )\n}\n\nconst Heading = ({title, count}: {title: string; count?: number}) => (\n  <Box sx={{display: 'flex', alignItems: 'baseline', gap: 1}}>\n    <Text as=\"h3\" sx={{fontWeight: 'bold', fontSize: [1, 1, 2]}}>\n      {title}\n    </Text>\n    {count && <CounterLabel>{count}</CounterLabel>}\n  </Box>\n)\n\nconst tokenLabel = (n: number) => `${Math.round(n / 1000)}k`\nconst capitalize = (s: string) => `${s.charAt(0).toUpperCase()}${s.slice(1)}`\n\nfunction InfoItem({isInline = false, children, label}: {isInline: boolean; children: React.ReactNode; label?: string}) {\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        fontSize: 1,\n        flex: 1,\n        ...(isInline && {\n          flexBasis: '140px',\n          mr: [2, 2, 0],\n        }),\n      }}\n    >\n      {label && <Box sx={{color: 'fg.default', fontSize: 1, fontWeight: 'semibold', mb: 0}}>{label}</Box>}\n      <Box sx={{color: 'fg.muted'}}>{children}</Box>\n    </Box>\n  )\n}\n\nexport function ModelDetails({direction = 'column', model}: {direction?: 'column' | 'row'; model: Model}) {\n  const rateLimitTier = model.rate_limit_tier\n  const maxOutputTokens = model.max_output_tokens ? tokenLabel(model.max_output_tokens) : ''\n  const maxInputTokens = tokenLabel(model.max_input_tokens)\n  const inline = direction === 'row'\n  const layout = {\n    column: {\n      flexDirection: 'column',\n    },\n    row: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n    },\n  }[direction]\n\n  return (\n    <Box\n      sx={{\n        width: '100%',\n        display: 'flex',\n        gap: 2,\n        ...layout,\n      }}\n    >\n      <InfoItem isInline={inline} label=\"Context\">\n        {maxInputTokens} input {maxOutputTokens ? <>&middot; {maxOutputTokens} output</> : ``}\n      </InfoItem>\n\n      <InfoItem isInline={inline} label=\"Training date\">\n        {model.training_data_date || 'Undisclosed'}\n      </InfoItem>\n\n      {rateLimitTier && (\n        <InfoItem isInline={inline} label=\"Rate limit tier\">\n          <Link inline={true} href=\"https://docs.github.com/en/github-models/prototyping-with-ai-models#rate-limits\">\n            {capitalize(rateLimitTier)}\n          </Link>\n        </InfoItem>\n      )}\n\n      <InfoItem isInline={inline} label=\"Provider support\">\n        <Link inline={true} href={`https://ai.azure.com/github/support/${model.name}`}>\n          Azure support site\n        </Link>\n      </InfoItem>\n    </Box>\n  )\n}\n\nexport default function SidebarInfo({model}: {model: Model}) {\n  const {task, summary, tags} = model\n  const labels = {tags, task}\n  const languages = model.supported_languages.filter(language => language !== null)\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 4,\n      }}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n        }}\n      >\n        <Heading title=\"About\" />\n        <Text sx={{lineHeight: 1.5}}>{summary}</Text>\n      </Box>\n      <ModelDetails model={model} />\n      {(labels.tags.length > 0 || labels.task) && <TagsSection labels={labels} />}\n      {languages.length > 0 && <LanguagesSection languages={languages} />}\n    </Box>\n  )\n}\n\ntry{ TagsSection.displayName ||= 'TagsSection' } catch {}\ntry{ LanguagesSection.displayName ||= 'LanguagesSection' } catch {}\ntry{ Heading.displayName ||= 'Heading' } catch {}\ntry{ InfoItem.displayName ||= 'InfoItem' } catch {}\ntry{ ModelDetails.displayName ||= 'ModelDetails' } catch {}\ntry{ SidebarInfo.displayName ||= 'SidebarInfo' } catch {}","import type {Model} from '../../types'\n\nexport class ModelUrlHelper {\n  static playgroundSuffix = 'playground'\n  static codeSuffix = 'code'\n  static jsonSuffix = 'json'\n  static chatSuffix = 'chat'\n\n  static modelUrl(model: Model) {\n    return `/marketplace/models/${model.registry}/${model.name}`\n  }\n\n  static playgroundUrl(model: Model) {\n    return `${ModelUrlHelper.modelUrl(model)}/${ModelUrlHelper.playgroundSuffix}`\n  }\n\n  static playgroundCodeUrl(model: Model) {\n    return `${ModelUrlHelper.playgroundUrl(model)}/${ModelUrlHelper.codeSuffix}`\n  }\n\n  static playgroundJsonUrl(model: Model) {\n    return `${ModelUrlHelper.playgroundUrl(model)}/${ModelUrlHelper.jsonSuffix}`\n  }\n}\n","import {useEffect, useState, useRef} from 'react'\nimport {Box, ActionList} from '@primer/react'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {ChevronDownIcon} from '@primer/octicons-react'\nimport {LoadingSkeleton} from '@github-ui/skeleton/LoadingSkeleton'\nimport {SelectPanel} from '@primer/react/drafts'\nimport {useSafeAsyncCallback} from '@github-ui/use-safe-async-callback'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\n\nimport {useNavigate} from '@github-ui/use-navigate'\nimport type {Model} from '../../../../types'\nimport {normalizeModelPublisher} from '../../../../utilities/normalize-model-strings'\nimport {ModelUrlHelper} from '../../../utils/model-url-helper'\n\nexport default function ModelSwitcher({model}: {model: Model}) {\n  const [isLoadingModels, setIsLoadingModels] = useState(false)\n  const [models, setModels] = useState<Model[] | null>(null)\n  const [showPanel, setShowPanel] = useState(false)\n  const anchorRef = useRef<HTMLButtonElement>(null)\n\n  const loadModels = useSafeAsyncCallback(async () => {\n    if (isLoadingModels) return\n    if (models) return\n\n    setIsLoadingModels(true)\n    const res = await verifiedFetchJSON('/marketplace/models')\n    if (res.ok) {\n      setModels((await res.json()) as Model[])\n    }\n    setIsLoadingModels(false)\n  })\n\n  const [filter, setFilter] = useState('')\n\n  useEffect(() => {\n    loadModels()\n  }, [filter, loadModels])\n\n  const modelsOrEmpty = models || []\n\n  const navigate = useNavigate()\n  const _models = modelsOrEmpty\n  const selectedModelElement = useRef<HTMLLIElement | null>(null)\n\n  useEffect(() => {\n    if (showPanel) {\n      selectedModelElement.current?.scrollIntoView()\n    }\n  }, [showPanel])\n\n  const filteredModels = _models.filter(\n    m =>\n      m.task === 'chat-completion' &&\n      (m.friendly_name.toLowerCase().includes(filter.toLowerCase()) ||\n        normalizeModelPublisher(m.publisher).toLowerCase().includes(filter.toLowerCase())),\n  )\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        maxWidth: '100%',\n        minWidth: 0,\n        alignItems: 'center',\n      }}\n    >\n      <Box\n        as=\"button\"\n        ref={anchorRef}\n        onClick={() => setShowPanel(true)}\n        aria-label=\"Switch model\"\n        sx={{\n          display: 'flex',\n          flex: 1,\n          height: 32,\n          bg: 'canvas.default',\n          alignItems: 'center',\n          minWidth: 0,\n          maxWidth: '100%',\n          borderColor: 'border.default',\n          borderWidth: 1,\n          borderStyle: 'solid',\n          borderRadius: 2,\n          boxShadow: 'var(--shadow-resting-small,var(--color-shadow-small))',\n          transition: 'background-color 0.2s',\n          ':hover': {\n            bg: 'canvas.inset',\n          },\n        }}\n      >\n        <Box sx={{flexShrink: 0, mr: 2, display: 'flex'}}>\n          <GitHubAvatar square size={18} src={model.logo_url} />\n        </Box>\n        <Box sx={{fontWeight: 'semibold', color: 'fg.muted', mr: 1}}>Model:</Box>\n        <Box\n          sx={{\n            whiteSpace: 'nowrap',\n            fontWeight: 'semibold',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            color: 'fg.default',\n          }}\n        >\n          {model.friendly_name}\n        </Box>\n        <Box sx={{color: 'fg.muted', ml: 1}}>\n          <ChevronDownIcon />\n        </Box>\n      </Box>\n      <SelectPanel\n        open={showPanel}\n        anchorRef={anchorRef}\n        onSubmit={() => setShowPanel(false)}\n        onCancel={() => setShowPanel(false)}\n        title=\"Switch model\"\n        selectionVariant=\"instant\"\n      >\n        <SelectPanel.Header>\n          <SelectPanel.SearchInput value={filter} onChange={e => setFilter(e.target.value)} />\n        </SelectPanel.Header>\n\n        {isLoadingModels ? (\n          // As of shipping, we have 16 models so we show 19 loading skeletons to avoid layout shift\n          Array.from({length: 16}).map((_, i) => (\n            <ActionList.Item key={i} disabled={true}>\n              <ActionList.LeadingVisual>\n                <LoadingSkeleton width=\"20px\" variant=\"rounded\" />\n              </ActionList.LeadingVisual>\n              <LoadingSkeleton variant=\"rounded\" />\n            </ActionList.Item>\n          ))\n        ) : (\n          <ActionList>\n            {filteredModels.map(m => (\n              <ActionList.Item\n                key={m.id}\n                onSelect={() => {\n                  const currentUrl = new URL('', window.location.href)\n                  const newUrl = currentUrl.pathname.endsWith(ModelUrlHelper.codeSuffix)\n                    ? ModelUrlHelper.playgroundCodeUrl\n                    : ModelUrlHelper.playgroundUrl\n                  navigate(newUrl(m))\n                }}\n                ref={m.id === model.id ? selectedModelElement : null}\n                selected={m.id === model.id}\n              >\n                <ActionList.LeadingVisual>\n                  <GitHubAvatar size={20} square src={m.logo_url} />\n                </ActionList.LeadingVisual>\n                {m.friendly_name}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        )}\n\n        <SelectPanel.Footer>\n          <SelectPanel.SecondaryAction variant=\"link\" href=\"/marketplace/models\">\n            View all models\n          </SelectPanel.SecondaryAction>\n        </SelectPanel.Footer>\n      </SelectPanel>\n    </Box>\n  )\n}\n\ntry{ ModelSwitcher.displayName ||= 'ModelSwitcher' } catch {}","import {Box, Button, Text} from '@primer/react'\nimport {CodespacesIcon} from '@primer/octicons-react'\nimport {RunCodespaceButtonClicked} from '../../../../utils/playground-types'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\nexport default function CodespacesCard({openInCodespaceUrl}: {openInCodespaceUrl: string}) {\n  return (\n    <Box\n      sx={{\n        px: [0, 0, 3],\n        pt: [4, 4, 3],\n        pb: [0, 0, 3],\n        display: 'flex',\n        flexDirection: 'column',\n        borderWidth: [0, 0, 1],\n        borderStyle: 'solid',\n        borderColor: 'border.default',\n        borderRadius: [0, 0, 2],\n        gap: 2,\n      }}\n    >\n      <Text\n        sx={{\n          fontWeight: 'bold',\n          fontSize: [3, 2, 2],\n          borderBottomColor: 'border.default',\n          borderBottomStyle: 'solid',\n          borderBottomWidth: [1, 1, 0],\n          pb: [2, 2, 0],\n          mb: [0, 2, 2],\n        }}\n      >\n        Run with codespaces\n      </Text>\n      <Text sx={{fontSize: 1, pb: 2}}>Seriously, you&apos;ll be up and running in seconds. It will be great.</Text>\n      <Box sx={{display: ['contents', 'inline', 'grid'], my: [0, 2, 0]}}>\n        <Button\n          as=\"a\"\n          leadingVisual={CodespacesIcon}\n          variant=\"primary\"\n          href={openInCodespaceUrl}\n          onClick={() => sendEvent(RunCodespaceButtonClicked)}\n        >\n          Run codespace\n        </Button>\n      </Box>\n    </Box>\n  )\n}\n\ntry{ CodespacesCard.displayName ||= 'CodespacesCard' } catch {}","import {forwardRef} from 'react'\nimport {Text, Box} from '@primer/react'\nimport {AlertIcon} from '@primer/octicons-react'\nimport {SharedMarkdownContent} from '@github-ui/code-view-shared/components/SharedMarkdownContent'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\n\ninterface MarkdownContentProps {\n  payload: SafeHTMLString\n}\n\nconst MarkdownContent = forwardRef<HTMLDivElement, MarkdownContentProps>(({payload}, ref) => {\n  const gettingStartedContent = payload\n\n  return (\n    <Box sx={{display: 'flex', flexDirection: 'column'}} ref={ref}>\n      {/*\n          We need to suppress the hydration warning because some of the HTML rendered here (e.g. clipboard copy)\n          relies on behaviors/ non-React JS to replace meta- tags with other elements. When React goes to hydrate,\n          it will see that the HTML has changed and throw an warning. We can safely suppress this warning because\n          the content is static, so it's OK if the client re-render doesn't actually get written to the page.\n\n          Right now we overriding the styles using the sx prop. In the future we want to handle this better.\n      */}\n\n      {gettingStartedContent ? (\n        <>\n          <Text\n            as=\"h2\"\n            sx={{\n              color: 'fg.default',\n              fontSize: [3, 2, 2],\n              pb: 2,\n              fontWeight: 'bold',\n              display: ['block', 'block', 'none'],\n              borderBottomColor: 'border.default',\n              borderBottomStyle: 'solid',\n              borderBottomWidth: 1,\n              mb: 3,\n            }}\n          >\n            Or set it up yourself...\n          </Text>\n          <Text as=\"h2\" sx={{fontSize: 4, fontWeight: 'bold', display: ['none', 'none', 'block'], pb: 4}}>\n            Get started\n          </Text>\n          <Box className=\"readme\" sx={{pb: 3}}>\n            <SharedMarkdownContent\n              suppressHydrationWarning={true}\n              richText={gettingStartedContent}\n              sx={{\n                h2: {\n                  fontSize: 2,\n                  pb: 2,\n                },\n                h3: {\n                  fontSize: 1,\n                },\n                p: {\n                  fontSize: 1,\n                },\n                'a.btn': {\n                  fontSize: '14px !important',\n                },\n                code: {\n                  fontSize: 0,\n                },\n                '.highlight pre': {\n                  fontSize: 0,\n                },\n                pre: {\n                  borderColor: 'border.muted',\n                  borderWidth: 1,\n                  borderStyle: 'solid',\n                  borderRadius: 2,\n                },\n                '.highlight': {\n                  'clipboard-copy': {\n                    top: 0,\n                    right: 0,\n                    width: 32,\n                    height: 32,\n                    position: 'absolute',\n                  },\n                },\n                'pre code': {\n                  fontSize: 0,\n                },\n                '.anchor': {\n                  visibility: 'hidden',\n                },\n                '.snippet-clipboard-content': {\n                  'clipboard-copy': {\n                    top: 0,\n                    right: 0,\n                    width: 32,\n                    height: 32,\n                    position: 'absolute',\n                    '.octicon': {\n                      marginRight: 0,\n                    },\n                  },\n                },\n              }}\n            />\n          </Box>\n        </>\n      ) : (\n        <MissingCombinationPlaceholder />\n      )}\n    </Box>\n  )\n})\n\nfunction MissingCombinationPlaceholder() {\n  return (\n    <Box\n      sx={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 2,\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Box sx={{color: 'attention.fg'}}>\n        <AlertIcon size={16} />\n      </Box>\n      <Text as=\"h2\" sx={{fontWeight: 'bold', textAlign: 'center', fontSize: 2, pt: 2}}>\n        Documentation for this language and SDK combination is unavailable\n      </Text>\n      <Text as=\"p\" sx={{color: 'fg.muted', textAlign: 'center'}}>\n        Try a different combination\n      </Text>\n    </Box>\n  )\n}\n\nMarkdownContent.displayName = 'MarkdownContent'\n\nexport default MarkdownContent\n\ntry{ MissingCombinationPlaceholder.displayName ||= 'MissingCombinationPlaceholder' } catch {}","export type AuthTokenResult = {\n  token: string\n  expiration: string\n}\n\n/**\n * AuthToken represents an authentication token that is passed to azure.ai, which is used to authenticate\n * requests to the Azure AI API.\n *\n * It also can tell if it needs refreshing, i.e. if it is expired or if the SSO orgs have changed since\n * it was minted.\n *\n * Finally, it can convert itself to/from ordinary JS objects that can be stored/retrieved from\n * local storage.\n */\nexport class AuthToken {\n  token: string\n  expiration: string\n\n  constructor(token: string, expiration: string) {\n    this.token = token\n    this.expiration = expiration\n  }\n\n  /**\n   * Returns a formatted string to be used as the value of an `Authorization` header,\n   * e.g. \"GitHub-Bearer <encrypted token>\"\n   */\n  get authorizationHeaderValue() {\n    return `GitHub-Bearer ${this.token}`\n  }\n\n  /**\n   * Returns true if this auth token needs to be refreshed.\n   */\n  needsRefreshing() {\n    return this.isExpired\n  }\n\n  /**\n   * Returns true if this auth token is expired.\n   */\n  get isExpired() {\n    const expirationDateString = new Date(this.expiration)\n\n    const expirationDate = new Date(\n      Date.UTC(\n        expirationDateString.getUTCFullYear(),\n        expirationDateString.getUTCMonth(),\n        expirationDateString.getUTCDate(),\n        expirationDateString.getUTCHours(),\n        expirationDateString.getUTCMinutes(),\n        expirationDateString.getUTCSeconds(),\n        expirationDateString.getUTCMilliseconds(),\n      ),\n    )\n\n    const padding = 15 * 1000 // seconds\n\n    return expirationDate < new Date(Date.now() + padding)\n  }\n\n  /**\n   * Build a new AuthToken from the results of a call to the token API endpoint.\n   */\n  static fromResult(result: AuthTokenResult) {\n    return new AuthToken(result.token, result.expiration)\n  }\n\n  /**\n   * Convert this token into a plain JS object, which can be stringified and put into localStorage.\n   */\n  serialize(): AuthTokenResult {\n    return {\n      token: this.token,\n      expiration: this.expiration,\n    }\n  }\n\n  /**\n   * Build a new auth token from a plain JS object, i.e. one parsed from localStorage.\n   */\n  static deserialize(serialized: AuthTokenResult): AuthToken {\n    return new AuthToken(serialized.token, serialized.expiration)\n  }\n}\n","const MESSAGE_DELIMITER = '\\n\\n'\nconst MESSAGE_REGEXP = /^data:\\s+/\n\nexport type ChatCompletionChunk = {\n  choices: Array<{\n    delta?: {\n      content: string\n    }\n  }>\n}\n\ntype Reader = ReadableStreamDefaultReader<Uint8Array>\n\nexport class MessageStreamer {\n  reader: Reader\n\n  constructor(reader: Reader) {\n    this.reader = reader\n  }\n\n  async *stream(): AsyncIterable<ChatCompletionChunk> {\n    const utf8Decoder = new TextDecoder('utf-8')\n\n    let partialMessage = ''\n\n    for (;;) {\n      let value\n      let done\n      try {\n        ;({value, done} = await this.reader.read())\n      } catch (err) {\n        throw err\n      }\n\n      if (done) break\n\n      // Keep track of partial messages in between stream chunks.\n      partialMessage += utf8Decoder.decode(value)\n\n      for (;;) {\n        // If we get a DONE chunk, we can exit early.\n        if (partialMessage.startsWith('data: [DONE]')) return\n\n        // Find the end of the first message. If there isn't one we need to get the next chunk in the stream.\n        const messageEnd = partialMessage.indexOf(MESSAGE_DELIMITER)\n        if (messageEnd === -1) break\n\n        const rawMessage = partialMessage.slice(0, messageEnd).replace(MESSAGE_REGEXP, '')\n        // Empty chunk, nothing to do.\n        if (rawMessage === '') {\n          // Move to the next potential message in this chunk.\n          partialMessage = partialMessage.slice(messageEnd + MESSAGE_DELIMITER.length)\n          continue\n        }\n        const parsedMessage: ChatCompletionChunk = JSON.parse(rawMessage)\n\n        yield parsedMessage\n\n        // Move to the next potential message in this chunk.\n        partialMessage = partialMessage.slice(messageEnd + MESSAGE_DELIMITER.length)\n      }\n    }\n  }\n\n  async stop() {\n    return this.reader.cancel()\n  }\n}\n","import safeStorage from '@github-ui/safe-storage'\nimport {verifiedFetchJSON} from '@github-ui/verified-fetch'\nimport {AuthToken} from './auth-token'\nimport type {AuthTokenResult} from './auth-token'\nimport type {Model, PlaygroundAPIMessage, PlaygroundAPIMessageAuthor} from '../../types'\nimport {MessageStreamer} from './streamer'\nimport {\n  TooManyRequestsError,\n  PlaygroundChatRequestSent,\n  PlaygroundChatRequestStreamingStarted,\n  PlaygroundChatRequestStreamingCompleted,\n  PlaygroundChatRateLimited,\n  ContentErrorResponseError,\n  TokenLimitReachedResponseError,\n} from './playground-types'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {sendStats} from '@github-ui/stats'\n\nexport type PlaygroundMessage = {\n  timestamp: Date\n  message: string\n  role: PlaygroundAPIMessageAuthor\n}\n\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nexport type PlaygroundRequestParameters = Record<string, any>\n\ntype SendMessageCallback = (message: PlaygroundMessage) => void\n\nexport interface ModelClient {\n  sendMessage(\n    model: Model,\n    messages: PlaygroundMessage[],\n    parameters: PlaygroundRequestParameters,\n    systemPrompt: string | null,\n    callback: SendMessageCallback,\n  ): Promise<boolean>\n}\n\nexport class AzureModelClient implements ModelClient {\n  url: string\n  currentAuthTokenRequest: Promise<AuthToken> | null\n  authTokenLocalStorageKey: string = 'NEUTRON_AUTH_TOKEN'\n  authTokenLocalStorageOverwriteKey: string = 'NEUTRON_AUTH_TOKEN_OVERWRITE'\n  streamer: MessageStreamer | null = null\n\n  constructor(url: string) {\n    this.url = url\n    this.currentAuthTokenRequest = null\n  }\n\n  async sendMessage(\n    model: Model,\n    messages: PlaygroundMessage[],\n    parameters: PlaygroundRequestParameters,\n    systemPrompt: string | null,\n    callback: SendMessageCallback,\n  ): Promise<boolean> {\n    const res = await this.makeRequest(model, messages, parameters, systemPrompt)\n    this.emitChatRequestSent(res, model)\n    if (!res.ok) {\n      switch (res.status) {\n        case 413:\n          throw new TokenLimitReachedResponseError()\n\n        case 429: {\n          this.emitRateLimitedEvent(res, model)\n          const timeLeft = res.headers.get('retry-after')\n          const errorMessage = timeLeft\n            ? `Rate limited, please try again in ${timeLeft} seconds.`\n            : 'Rate limited, please try again later.'\n          throw new TooManyRequestsError(errorMessage)\n        }\n        default: {\n          // No special handling, lets check if the response is JSON and has more info\n\n          let errorMessage = null\n          try {\n            const json = await res.json()\n            errorMessage = json?.error?.message\n          } catch {\n            // Response was no JSON, so show a generic error\n            throw new Error('An error occurred while processing your request.')\n          }\n          if (typeof errorMessage === 'string') {\n            throw new ContentErrorResponseError(errorMessage)\n          } else {\n            throw new Error('An error occurred while processing your request.')\n          }\n        }\n      }\n    }\n    const reader = res.body?.getReader()\n    if (!reader) {\n      return false\n    }\n\n    this.streamer = new MessageStreamer(reader)\n\n    this.emitStreamingStarted(model)\n    let fullMessage = ''\n    for await (const chunk of this.streamer.stream()) {\n      if (chunk.choices.length === 0) {\n        continue\n      }\n      if (!chunk.choices[0]?.delta?.content) {\n        continue\n      }\n      fullMessage += chunk.choices[0]?.delta?.content\n      callback({\n        timestamp: new Date(),\n        role: 'assistant',\n        message: fullMessage,\n      })\n    }\n    this.emitStreamingCompleted(model)\n    return true\n  }\n\n  private async makeRequest(\n    model: Model,\n    messages: PlaygroundMessage[],\n    parameters: PlaygroundRequestParameters,\n    systemPrompt: string | null,\n  ) {\n    // For local dev, set local storage with key this.authTokenLocalStorageOverwriteKey to \"Bearer <PAT>\"\n    const tokenOverwrite = this.localStorage.getItem(this.authTokenLocalStorageOverwriteKey)\n\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      'x-ms-model-mesh-model-name': model.original_name.toLowerCase(),\n      Authorization: tokenOverwrite ?? (await this.getAuthToken()).authorizationHeaderValue,\n    }\n\n    if (crypto && typeof crypto.randomUUID === 'function') {\n      const uuid = crypto.randomUUID()\n      headers['x-ms-client-request-id'] = uuid\n    }\n\n    const newMessages: PlaygroundAPIMessage[] = []\n    if (systemPrompt) {\n      newMessages.push({role: 'system', content: systemPrompt})\n    }\n\n    const existingMessagesAsPayload: PlaygroundAPIMessage[] = messages\n      // Dont send error messages back to the API\n      .filter(m => m.role !== 'error')\n      .map(m => {\n        return {role: m.role, content: m.message}\n      })\n\n    for (const m of existingMessagesAsPayload) {\n      if (m.content.trim() !== '') {\n        newMessages.push(m)\n      }\n    }\n\n    const body = {\n      ...parameters,\n      messages: newMessages,\n      stream: true,\n    }\n    return fetch(this.url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n  }\n\n  private localStorage = safeStorage('localStorage', {\n    throwQuotaErrorsOnSet: false,\n    ttl: 1000 * 60 * 60 * 24,\n  })\n\n  /**\n   * Get the current auth token, either from local storage or by minting a new one from dotcom.\n   */\n  private async getAuthToken(): Promise<AuthToken> {\n    const stored = this.localStorage.getItem(this.authTokenLocalStorageKey)\n    if (!stored) {\n      return this.fetchAuthToken()\n    }\n    const token = AuthToken.deserialize(JSON.parse(stored) as AuthTokenResult)\n    return this.validateAuthToken(token)\n  }\n\n  /**\n   * Validate the given auth token.  If it's all good, return it, otherwise, go mint a new one from\n   * dotcom and return it instead.\n   */\n  private async validateAuthToken(token: AuthToken): Promise<AuthToken> {\n    return token.needsRefreshing() ? this.fetchAuthToken() : token\n  }\n\n  /**\n   * Return the current auth token request, or start a new one.\n   *\n   * The inner workings of the chat app can cause multiple requests to CAPI in quick succession.  If we\n   * do not have an auth token available in local storage, each of those requests will trigger their own\n   * token fetch, hence the storing of the current request on `this`.\n   */\n  private fetchAuthToken(): Promise<AuthToken> {\n    if (!this.currentAuthTokenRequest) {\n      this.currentAuthTokenRequest = this._fetchAuthToken()\n    }\n\n    return this.currentAuthTokenRequest\n  }\n\n  /**\n   * Start a new auth token request, parsing the result, persisting it in local storage,\n   * and clearing the current request once finished.\n   */\n  private async _fetchAuthToken(): Promise<AuthToken> {\n    const response = await verifiedFetchJSON('/marketplace/models/token', {method: 'POST'})\n\n    if (response.ok) {\n      const result = (await response.json()) as AuthTokenResult\n\n      this.currentAuthTokenRequest = null\n\n      const token = AuthToken.fromResult(result)\n\n      this.localStorage.setItem(this.authTokenLocalStorageKey, JSON.stringify(token.serialize()))\n\n      return token\n    } else {\n      this.currentAuthTokenRequest = null\n\n      throw new Error('Failed to mint new auth token')\n    }\n  }\n\n  private emitChatRequestSent(res: Response, model: Model) {\n    sendEvent(PlaygroundChatRequestSent, {\n      registry: model.registry,\n      model: model.name,\n      publisher: model.publisher,\n      success: res.ok,\n      result_code: res.status,\n    })\n\n    if (res.ok) {\n      sendStats({incrementKey: 'MODELS_CHAT_REQUEST', requestUrl: window.location.href})\n    } else {\n      sendStats({incrementKey: 'MODELS_CHAT_REQUEST_ERROR', requestUrl: window.location.href})\n    }\n  }\n\n  private emitRateLimitedEvent(res: Response, model: Model) {\n    sendEvent(PlaygroundChatRateLimited, {\n      registry: model.registry,\n      model: model.name,\n      publisher: model.publisher,\n      rate_limit_type: res.headers.get('X-RateLimit-Type'),\n    })\n  }\n\n  private emitStreamingStarted(model: Model) {\n    sendEvent(PlaygroundChatRequestStreamingStarted, {\n      registry: model.registry,\n      model: model.name,\n      publisher: model.publisher,\n    })\n  }\n\n  private emitStreamingCompleted(model: Model) {\n    sendEvent(PlaygroundChatRequestStreamingCompleted, {\n      registry: model.registry,\n      model: model.name,\n      publisher: model.publisher,\n    })\n  }\n}\n","import safeStorage from '@github-ui/safe-storage'\nimport type {PlaygroundMessage} from './model-client'\n\nexport type StoredChatMessages = {\n  modelName: string\n  messages: PlaygroundMessage[]\n}\n\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 60 * 24,\n  throwQuotaErrorsOnSet: false,\n})\n\nexport function getSavedPlaygroundMessages() {\n  const savedMessages = safeLocalStorage.getItem('playground-chat-messages')\n  return savedMessages\n    ? JSON.parse(savedMessages, (key, value) => {\n        if (key === 'timestamp') {\n          return new Date(value)\n        } else {\n          return value\n        }\n      })\n    : null\n}\n\nexport function setPlaygroundMessages(chatMessages: StoredChatMessages) {\n  const value = JSON.stringify(chatMessages)\n  safeLocalStorage.setItem('playground-chat-messages', value)\n}\n\nexport function clearPlaygroundLocalStorage() {\n  safeLocalStorage.removeItem('playground-chat-messages')\n}\n\nexport type SidebarSelection = 'parameters' | 'details'\n\nexport type ModelPersistentUIState = {\n  sidebarSelection: number\n  sidebarHidden: boolean\n  preferredLanguage: string // value is validated by the components, as it depends on the model\n  preferredSdk: string // value is validated by the components, as it depends on the model\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isValidModelPersistentUIState(state: any): state is ModelPersistentUIState {\n  const validKeys: Array<keyof ModelPersistentUIState> = [\n    'sidebarSelection',\n    'sidebarHidden',\n    'preferredLanguage',\n    'preferredSdk',\n  ]\n\n  return (\n    typeof state === 'object' &&\n    state !== null &&\n    validKeys.every(key => key in state) &&\n    typeof state.sidebarSelection === 'number' &&\n    typeof state.sidebarHidden === 'boolean' &&\n    typeof state.preferredLanguage === typeof 'string' &&\n    typeof state.preferredSdk === typeof 'string'\n  )\n}\n\nexport class PlaygroundLocalStorage {\n  uiStateKey = 'models:uiState'\n  marketplaceModelsPreferredLanguageKey = 'marketplaceModelsPreferredLanguage'\n\n  set uiState(uiState: ModelPersistentUIState) {\n    safeLocalStorage.setItem(this.uiStateKey, JSON.stringify(uiState))\n  }\n\n  get uiState(): ModelPersistentUIState {\n    const defaultValues: ModelPersistentUIState = {\n      sidebarSelection: 0,\n      sidebarHidden: false,\n      preferredLanguage: 'js',\n      preferredSdk: '',\n    }\n\n    const storedStateJSON = safeLocalStorage.getItem(this.uiStateKey)\n    if (storedStateJSON) {\n      const storedState = JSON.parse(storedStateJSON)\n      if (storedState) {\n        if (isValidModelPersistentUIState(storedState)) {\n          return storedState\n        }\n      }\n    }\n\n    return defaultValues\n  }\n}\n","import {createContext, useContext} from 'react'\nimport {AzureModelClient, type PlaygroundMessage, type PlaygroundRequestParameters} from './model-client'\nimport type {Model, ModelInputSchema, ModelInputSchemaParameter} from '../../types'\nimport type {ShowModelGettingStartedPayloadLanguageEntry} from '../routes/playground/components/GettingStartedDialog/types'\nimport {RetryableError, TokenLimitReachedResponseError} from './playground-types'\nimport {clearPlaygroundLocalStorage, PlaygroundLocalStorage} from './playground-local-storage'\n\ntype PlaygroundState = typeof initialPlaygroundState\n\nexport const initialPlaygroundState = {\n  messages: [] as PlaygroundMessage[],\n  parameters: {} as PlaygroundRequestParameters,\n  isLoading: false,\n  systemPrompt: '',\n  chatInput: '',\n  chatClosed: false,\n  showParameters: true,\n  showParametersOnMobile: false,\n  parametersHasChanges: false,\n  tab: 0,\n  selectedLanguage: 'js',\n  iceBreakerCheckPending: true, // used to avoid flashing of empty states before an ice breaker was sent\n  selectedSDK: '',\n}\n\nexport const PlaygroundStateContext = createContext<PlaygroundState>(initialPlaygroundState)\nexport const PlaygroundStateDispatcherContext = createContext<React.Dispatch<PlaygroundStateAction>>(\n  {} as React.Dispatch<PlaygroundStateAction>,\n)\nexport const PlaygroundManagerContext = createContext<PlaygroundManager>({} as PlaygroundManager)\n\nexport function usePlaygroundState() {\n  return useContext(PlaygroundStateContext)\n}\n\nexport function usePlaygroundManager() {\n  return useContext(PlaygroundManagerContext)\n}\n\nexport function usePlaygroundDispatcher() {\n  return useContext(PlaygroundStateDispatcherContext)\n}\n\nexport type PlaygroundStateAction =\n  | {type: 'SET_MESSAGES'; messages: PlaygroundMessage[]}\n  | {type: 'SET_IS_LOADING'; isLoading: boolean}\n  | {type: 'ADD_ERROR_RESPONSE'; message: string}\n  | {type: 'SET_PARAMETERS'; parameters: PlaygroundRequestParameters}\n  | {type: 'SET_SYSTEM_PROMPT'; systemPrompt: string}\n  | {type: 'CLEAR_LAST_PLACEHODER_MESSAGE'}\n  | {type: 'RETRY_LAST_MESSAGE'}\n  | {type: 'SET_CHAT_INPUT'; chatInput: string}\n  | {type: 'SET_CHAT_CLOSED'; chatClosed: boolean}\n  | {type: 'SET_SHOW_PARAMETERS'; showParameters: boolean}\n  | {type: 'SET_SHOW_PARAMETERS_ON_MOBILE'; showParametersOnMobile: boolean}\n  | {type: 'SET_PARAMETERS_HAS_CHANGES'; parametersHasChanges: boolean}\n  | {type: 'SET_TAB'; tab: number}\n  | {type: 'SET_SELECTED_LANGUAGE'; selectedLanguage: string}\n  | {type: 'SET_ICEBREAKER_CHECK_PENDING'; iceBreakerCheckPending: boolean}\n  | {type: 'SET_SELECTED_SDK'; selectedSDK: string}\n\nexport function tasksReducer(state: PlaygroundState, action: PlaygroundStateAction): PlaygroundState {\n  switch (action.type) {\n    case 'SET_IS_LOADING':\n      return {...state, isLoading: action.isLoading}\n    case 'SET_MESSAGES':\n      return {...state, messages: action.messages}\n    case 'SET_PARAMETERS':\n      return {...state, parameters: action.parameters}\n    case 'SET_SYSTEM_PROMPT':\n      return {...state, systemPrompt: action.systemPrompt}\n    case 'ADD_ERROR_RESPONSE':\n      return {...state, messages: [...state.messages, {timestamp: new Date(), role: 'error', message: action.message}]}\n    case 'CLEAR_LAST_PLACEHODER_MESSAGE': {\n      const lastMessage = state.messages.slice(-1)[0]\n      if (!lastMessage) return {...state}\n      if (lastMessage.role === 'assistant' && lastMessage?.message === '') {\n        return {...state, messages: state.messages.slice(0, -1)}\n      } else {\n        return {...state}\n      }\n    }\n    case 'SET_CHAT_CLOSED': {\n      return {...state, chatClosed: action.chatClosed}\n    }\n    case 'SET_CHAT_INPUT':\n      return {...state, chatInput: action.chatInput}\n    case 'RETRY_LAST_MESSAGE': {\n      const lastUserMessage = [...state.messages].reverse().find(message => message.role === 'user')\n      return lastUserMessage ? {...state, chatInput: lastUserMessage.message} : {...state}\n    }\n    case 'SET_PARAMETERS_HAS_CHANGES':\n      return {...state, parametersHasChanges: action.parametersHasChanges}\n    case 'SET_SHOW_PARAMETERS':\n      return {...state, showParameters: action.showParameters}\n    case 'SET_SHOW_PARAMETERS_ON_MOBILE':\n      return {...state, showParametersOnMobile: action.showParametersOnMobile}\n    case 'SET_TAB':\n      return {...state, tab: action.tab}\n    case 'SET_SELECTED_LANGUAGE':\n      return {...state, selectedLanguage: action.selectedLanguage}\n    case 'SET_ICEBREAKER_CHECK_PENDING':\n      return {...state, iceBreakerCheckPending: action.iceBreakerCheckPending}\n    case 'SET_SELECTED_SDK':\n      return {...state, selectedSDK: action.selectedSDK}\n  }\n}\n\nexport enum SidebarSelectionOptions {\n  PARAMETERS = 0,\n  DETAILS = 1,\n}\n\nexport class PlaygroundManager {\n  dispatch: React.Dispatch<PlaygroundStateAction>\n\n  client: AzureModelClient\n  model: Model\n  modelInputSchema: ModelInputSchema\n  localStorage = new PlaygroundLocalStorage()\n  gettingStarted: Record<string, ShowModelGettingStartedPayloadLanguageEntry>\n\n  constructor(\n    dispatch: React.Dispatch<PlaygroundStateAction>,\n    model: Model,\n    playgroundURL: string,\n    modelInputSchema: ModelInputSchema,\n    gettingStarted: Record<string, ShowModelGettingStartedPayloadLanguageEntry>,\n  ) {\n    this.dispatch = dispatch\n    this.model = model\n    this.client = new AzureModelClient(playgroundURL)\n    this.modelInputSchema = modelInputSchema\n    this.gettingStarted = gettingStarted\n\n    this.setDefaultParameters(modelInputSchema.parameters)\n\n    this.setPreferredLanguageFromLocalStorage()\n\n    const storedDefaults = this.localStorage.uiState\n    this.setTab(storedDefaults.sidebarSelection)\n    this.setShowParameters(!storedDefaults.sidebarHidden)\n  }\n\n  setModel(\n    model: Model,\n    playgroundURL: string,\n    modelInputSchema: ModelInputSchema,\n    gettingStarted: Record<string, ShowModelGettingStartedPayloadLanguageEntry>,\n  ) {\n    if (this.model.name === model.name) {\n      return\n    }\n\n    this.stopStreaming()\n    this.setMessages([])\n    this.setDefaultParameters(modelInputSchema.parameters)\n\n    this.client = new AzureModelClient(playgroundURL)\n    this.model = model\n    this.modelInputSchema = modelInputSchema\n    this.gettingStarted = gettingStarted\n  }\n\n  checkForIcebreakerRan = false\n  checkForIcebreaker(message: string | undefined, state: PlaygroundState) {\n    if (this.checkForIcebreakerRan) {\n      return\n    }\n    if (state.iceBreakerCheckPending) {\n      if (message) {\n        this.sendMessage(state, message)\n      }\n    }\n    this.checkForIcebreakerRan = true\n    this.dispatch({type: 'SET_ICEBREAKER_CHECK_PENDING', iceBreakerCheckPending: false})\n  }\n\n  setPreferredLanguageFromLocalStorage() {\n    const savedLanguage = this.localStorage.uiState.preferredLanguage\n    const languages = this.getAvailableLanguages()\n    const language = languages.includes(savedLanguage) ? savedLanguage : languages[0]\n    if (!language) return\n\n    const savedSdk = this.localStorage.uiState.preferredSdk\n    this.setSelectedLanguage(language, savedSdk)\n  }\n\n  setSelectedLanguage(selectedLanguage: string, selectedSDK: string) {\n    const languageSnippet = this.gettingStarted[selectedLanguage]\n    // Code sample for C# is currently not available\n    if (selectedLanguage === 'csharp') return\n    if (languageSnippet) {\n      this.localStorage.uiState = {...this.localStorage.uiState, preferredLanguage: selectedLanguage}\n      this.dispatch({type: 'SET_SELECTED_LANGUAGE', selectedLanguage})\n\n      const sdks = Object.keys(languageSnippet.sdks)\n      const savedSDKSnippet = sdks.find(sdk => sdk === selectedSDK)\n      const sdk = savedSDKSnippet ? savedSDKSnippet : sdks[0]\n      if (sdk) this.setSelectedSDK(sdk)\n    }\n  }\n\n  setSelectedSDK(selectedSDK: string) {\n    this.localStorage.uiState = {...this.localStorage.uiState, preferredSdk: selectedSDK}\n    this.dispatch({type: 'SET_SELECTED_SDK', selectedSDK})\n  }\n\n  handleRequestParameterChange(state: PlaygroundState, key: string, value: string | number | boolean | string[]) {\n    const newParams = {\n      ...state.parameters,\n      [key]: value,\n    } as PlaygroundRequestParameters\n    this.dispatch({type: 'SET_PARAMETERS', parameters: newParams})\n  }\n\n  setDefaultParameters(parameters: ModelInputSchemaParameter[]) {\n    const schema = parameters.reduce((acc, parameter) => {\n      acc[parameter.key] = parameter.default\n      return acc\n    }, {} as PlaygroundRequestParameters)\n    this.dispatch({type: 'SET_PARAMETERS', parameters: schema})\n  }\n\n  setChatInput(chatInput: string) {\n    this.dispatch({type: 'SET_CHAT_INPUT', chatInput})\n  }\n\n  setSystemPrompt(systemPrompt: string) {\n    this.dispatch({type: 'SET_SYSTEM_PROMPT', systemPrompt})\n  }\n\n  setMessages(messages: PlaygroundMessage[]) {\n    this.dispatch({type: 'SET_MESSAGES', messages})\n  }\n\n  setShowParameters(showParameters: boolean) {\n    this.localStorage.uiState = {...this.localStorage.uiState, sidebarHidden: !showParameters}\n    this.dispatch({type: 'SET_SHOW_PARAMETERS', showParameters})\n  }\n\n  setShowParametersOnMobile(showParametersOnMobile: boolean) {\n    this.dispatch({type: 'SET_SHOW_PARAMETERS_ON_MOBILE', showParametersOnMobile})\n  }\n\n  setParametersHasChanges(parametersHasChanges: boolean) {\n    this.dispatch({type: 'SET_PARAMETERS_HAS_CHANGES', parametersHasChanges})\n  }\n\n  setTab(tab: number) {\n    this.localStorage.uiState = {...this.localStorage.uiState, sidebarSelection: tab}\n    this.dispatch({type: 'SET_TAB', tab})\n  }\n\n  resetHistory(clearLocalStorage: boolean) {\n    if (clearLocalStorage) {\n      clearPlaygroundLocalStorage()\n    }\n    this.stopStreaming()\n    this.dispatch({type: 'SET_MESSAGES', messages: []})\n    this.dispatch({type: 'SET_CHAT_CLOSED', chatClosed: false})\n  }\n\n  stopStreaming() {\n    this.client.streamer?.stop()\n  }\n\n  async sendMessage(state: PlaygroundState, message: string): Promise<void> {\n    const messages = state.messages\n\n    if (!this.model) {\n      return\n    }\n\n    messages.push({\n      timestamp: new Date(),\n      role: 'user',\n      message,\n    })\n\n    // Add placeholder message\n    messages.push({\n      timestamp: new Date(),\n      role: 'assistant',\n      message: '',\n    })\n\n    // Update the UI\n    this.dispatch({type: 'SET_MESSAGES', messages})\n    this.dispatch({type: 'SET_IS_LOADING', isLoading: true})\n\n    // Start work\n    try {\n      const success = await this.client.sendMessage(\n        this.model,\n        state.messages,\n        state.parameters,\n        state.systemPrompt,\n        response => {\n          this.dispatch({type: 'SET_MESSAGES', messages: [...messages.slice(0, -1), response]})\n        },\n      )\n\n      if (!success) {\n        this.dispatch({type: 'CLEAR_LAST_PLACEHODER_MESSAGE'})\n        this.dispatch({type: 'ADD_ERROR_RESPONSE', message: 'An error occurred. Please try again.'})\n      }\n    } catch (error) {\n      // TODO: Messages should probably have an ID so we can refer to them correctly in the future\n      this.dispatch({type: 'CLEAR_LAST_PLACEHODER_MESSAGE'})\n      if (error instanceof Error) {\n        this.dispatch({type: 'ADD_ERROR_RESPONSE', message: error.message})\n        if (error instanceof RetryableError) {\n          this.dispatch({type: 'RETRY_LAST_MESSAGE'})\n        }\n        if (error instanceof TokenLimitReachedResponseError) {\n          this.dispatch({type: 'SET_CHAT_CLOSED', chatClosed: true})\n        }\n      } else {\n        this.dispatch({type: 'ADD_ERROR_RESPONSE', message: 'An error occurred. Please try again.'})\n      }\n    } finally {\n      this.dispatch({type: 'SET_IS_LOADING', isLoading: false})\n    }\n  }\n\n  private getAvailableLanguages() {\n    // Some languages are only available in the getting started section and not in the code sample view\n    return Object.keys(this.gettingStarted).filter(language => {\n      const content = this.gettingStarted[language]\n      if (content && content.sdks) {\n        return Object.values(content.sdks).some(sdk => {\n          return sdk.codeSamples && sdk.codeSamples.length > 0\n        })\n      }\n    })\n  }\n}\n","/* eslint eslint-comments/no-use: off */\n/* eslint-disable primer-react/no-system-props */\n\n// The above line is needed to keep alignContent=\"start\" from being removed by autoformatters\n\nimport {useEffect, useRef, useState} from 'react'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {\n  GettingStartedPayload,\n  LanguageTocItem,\n  ShowModelGettingStartedPayloadLanguageEntry,\n  ShowModelGettingStartedPayloadSDKEntry,\n} from './types'\n\nimport {Box, Text, ActionList, ActionMenu} from '@primer/react'\nimport {Dialog} from '@primer/react/drafts'\n\nimport CodespacesSuggestion from './CodespacesSuggestion'\nimport MarkdownContent from './MarkdownContent'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\n\nimport {usePlaygroundManager, usePlaygroundState} from '../../../../utils/playground-manager'\nimport {ModelLegalTerms} from './ModelLegalTerms'\ninterface GettingStartedDialogProps {\n  onClose: () => void\n  openInCodespaceUrl: string\n  playgroundEnabled: boolean\n}\n\nexport default function GettingStartedDialog({\n  onClose,\n  openInCodespaceUrl,\n  playgroundEnabled,\n}: GettingStartedDialogProps) {\n  return (\n    <Dialog\n      title=\"Get started\"\n      position={{narrow: 'fullscreen', regular: 'center'}}\n      onClose={onClose}\n      sx={{maxWidth: 965, width: '100%', p: 0}}\n      renderBody={() => {\n        return <CodeContainer openInCodespaceUrl={openInCodespaceUrl} playgroundEnabled={playgroundEnabled} />\n      }}\n    />\n  )\n}\n\nfunction CodeContainer({\n  openInCodespaceUrl,\n  playgroundEnabled,\n}: {\n  openInCodespaceUrl: string\n  playgroundEnabled: boolean\n}) {\n  const manager = usePlaygroundManager()\n  const {gettingStarted} = useRoutePayload<GettingStartedPayload>()\n\n  const {selectedLanguage: defaultLanguage, selectedSDK: defaultSDK} = usePlaygroundState()\n\n  const selectedIndex = Object.keys(gettingStarted).findIndex(key => key === defaultLanguage)\n\n  const firstLanguageEntry =\n    Object.entries(gettingStarted)[selectedIndex]?.[1] ?? (Object.entries(gettingStarted)[0]?.[1] || null)\n\n  let firstSDK: ShowModelGettingStartedPayloadSDKEntry | null = null\n  if (firstLanguageEntry) {\n    if (defaultSDK) {\n      firstSDK = firstLanguageEntry.sdks[defaultSDK]\n        ? firstLanguageEntry.sdks[defaultSDK]\n        : Object.entries(firstLanguageEntry.sdks)[0]?.[1] || null\n    } else {\n      firstSDK = Object.entries(firstLanguageEntry.sdks)[0]?.[1] || null\n    }\n  }\n\n  const [selectedLanguage, setSelectedLanguage] = useState<ShowModelGettingStartedPayloadLanguageEntry | null>(\n    firstLanguageEntry,\n  )\n  const [selectedSDK, setSelectedSDK] = useState<ShowModelGettingStartedPayloadSDKEntry | null>(firstSDK)\n  const [currentHeading, setCurrentHeading] = useState<string | null>(null)\n\n  const contentRef = useRef<HTMLDivElement>(null)\n  const contentWrapperRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const wrapperElement = contentWrapperRef.current\n    if (!wrapperElement || !selectedSDK) return\n\n    const anchors = selectedSDK.tocHeadings.filter(heading => heading.level === 2).map(heading => heading.anchor)\n    const options = {root: wrapperElement, rootMargin: '0px', threshold: 0.5}\n    const callback = (entries: IntersectionObserverEntry[]) => {\n      for (const entry of entries) {\n        const id = entry.target.id\n        if (entry.isIntersecting) {\n          setCurrentHeading(id)\n        }\n      }\n    }\n    const observer = new IntersectionObserver(callback, options)\n\n    for (const anchor of anchors) {\n      const el = wrapperElement.querySelector(`#user-content-${anchor}`)\n      if (el) observer.observe(el)\n    }\n\n    return () => {\n      for (const anchor of anchors) {\n        const el = wrapperElement?.querySelector(`#user-content-${anchor}`)\n        if (el) {\n          observer.unobserve(el)\n        }\n      }\n    }\n  }, [selectedSDK])\n\n  if (!selectedSDK || !selectedLanguage) {\n    return <p>Error</p>\n  }\n\n  const {tocHeadings, content} = selectedSDK\n\n  // Construct a language options dropdown that includes the current SDK in the link, if possible\n  const languageToc = Object.entries(gettingStarted).map(([key, language]) => {\n    return {key, active: language.name === selectedLanguage.name, name: language.name} as LanguageTocItem\n  })\n\n  const levelTwoTitles = tocHeadings.filter(heading => heading.level === 2)\n\n  const scrollToAnchor = (anchor: string) => {\n    if (contentRef.current === null) return\n    const element = contentRef.current.querySelector(`#user-content-${anchor}`)\n    element?.scrollIntoView({block: 'start', behavior: 'smooth'})\n  }\n\n  const selectLanguage = (key: string) => {\n    const language = gettingStarted[key] || null\n    if (language) {\n      setSelectedLanguage(language)\n      // Reset SDK selection\n      const _firstSDK = language.sdks[defaultSDK]\n        ? language.sdks[defaultSDK]\n        : Object.entries(language.sdks)[0]?.[1] || null\n      if (_firstSDK) setSelectedSDK(_firstSDK)\n      if (manager.setSelectedLanguage) {\n        // manager only exists in the playground view\n        manager.setSelectedLanguage(key, defaultSDK)\n      }\n    }\n  }\n\n  const handleSelectedSDK = (sdk: string) => {\n    if (manager.setSelectedSDK) {\n      manager.setSelectedSDK(sdk)\n    }\n    const SDK = selectedLanguage.sdks[sdk] || null\n    if (SDK) setSelectedSDK(SDK)\n  }\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        width: '100%',\n        flexDirection: ['column', 'column', 'row'],\n        maxHeight: ['100%', '100%', 600],\n        height: '100%',\n      }}\n    >\n      <Box\n        sx={{\n          width: ['100%', '100%', 300],\n          borderRightColor: 'border.default',\n          borderRightStyle: 'solid',\n          borderRightWidth: [0, 0, 1],\n          display: 'flex',\n          flexDirection: 'column',\n          p: 3,\n          px: [0, 4, 2],\n        }}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            gap: 2,\n            px: [2, 0, 2],\n            flexDirection: 'column',\n            borderBottomColor: 'border.default',\n            borderBottomStyle: 'solid',\n            borderBottomWidth: [1, 1, 0],\n            pb: [3, 4, 0],\n          }}\n        >\n          <ActionMenu>\n            <ActionMenu.Button alignContent=\"start\" block>\n              <Text sx={{color: 'fg.muted'}}>Language: </Text>\n              {selectedLanguage.name}\n            </ActionMenu.Button>\n            <ActionMenu.Overlay width=\"small\">\n              <ActionList selectionVariant=\"single\">\n                {languageToc.map(({key, name}) => (\n                  <ActionList.Item\n                    key={key}\n                    selected={name === selectedLanguage.name}\n                    onSelect={() => selectLanguage(key)}\n                  >\n                    {name}\n                  </ActionList.Item>\n                ))}\n              </ActionList>\n            </ActionMenu.Overlay>\n          </ActionMenu>\n          <ActionMenu>\n            <ActionMenu.Button block alignContent=\"start\">\n              <Text sx={{color: 'fg.muted'}}>SDK: </Text>\n              {selectedSDK.name}\n            </ActionMenu.Button>\n            <ActionMenu.Overlay width=\"small\">\n              <ActionList selectionVariant=\"single\">\n                {Object.entries(selectedLanguage.sdks).map(([key, sdk]) => (\n                  <ActionList.Item\n                    key={key}\n                    selected={sdk.name === selectedSDK.name}\n                    onSelect={() => handleSelectedSDK(key)}\n                  >\n                    {sdk.name}\n                  </ActionList.Item>\n                ))}\n              </ActionList>\n            </ActionMenu.Overlay>\n          </ActionMenu>\n        </Box>\n        <Box sx={{px: 2, py: 3, display: ['none', 'none', 'block']}}>\n          <Text\n            sx={{\n              fontSize: 0,\n              px: 3,\n              fontWeight: 'bold',\n              color: 'fg.muted',\n            }}\n          >\n            Chapters\n          </Text>\n          <ActionList>\n            {levelTwoTitles.map(heading => (\n              <ActionList.Item\n                key={heading.anchor}\n                onSelect={() => scrollToAnchor(heading.anchor)}\n                active={currentHeading === `user-content-${heading.anchor}`}\n              >\n                {heading.text}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </Box>\n        <Box\n          sx={{\n            px: [3, 1, 0],\n            flexGrow: [0, 0, 1],\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: ['flex-start', 'flex-start', 'flex-end'],\n          }}\n        >\n          {playgroundEnabled && <CodespacesSuggestion openInCodespaceUrl={openInCodespaceUrl} />}\n        </Box>\n      </Box>\n      <Box\n        sx={{\n          flex: 1,\n          px: [3, 5, 5],\n          pt: [2, 0, 3],\n          pb: 3,\n          display: 'flex',\n          flexDirection: 'column',\n          overflowX: ['visible', 'visible', 'hidden'],\n          overflowY: ['visible', 'visible', 'scroll'],\n        }}\n        ref={contentWrapperRef}\n      >\n        <MarkdownContent payload={content as SafeHTMLString} ref={contentRef} />\n        <ModelLegalTerms />\n      </Box>\n    </Box>\n  )\n}\n\ntry{ GettingStartedDialog.displayName ||= 'GettingStartedDialog' } catch {}\ntry{ CodeContainer.displayName ||= 'CodeContainer' } catch {}","import styles from './ModelLayout.module.css'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {\n  Breadcrumbs,\n  Label,\n  Text,\n  UnderlineNav,\n  Link,\n  Box,\n  PageLayout,\n  Button,\n  FormControl,\n  IconButton,\n  Textarea,\n  useResponsiveValue,\n} from '@primer/react'\n\nimport {\n  CodeIcon,\n  BookIcon,\n  LawIcon,\n  PaperAirplaneIcon,\n  ArrowUpRightIcon,\n  ChecklistIcon,\n  CommandPaletteIcon,\n  LogIcon,\n} from '@primer/octicons-react'\nimport type {Model, ModelInputSchema, ShowModelPayload} from '../../../../../types'\nimport {GettingStartedButtonClicked, templateRepositoryNwo} from '../../../../utils/playground-types'\nimport {normalizeModelPublisher} from '../../../../../utilities/normalize-model-strings'\n\nimport {ModelLegalTerms} from './ModelLegalTerms'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport SidebarInfo, {LanguagesSection, ModelDetails, TagsSection} from '../SidebarInfo'\nimport {ModelUrlHelper} from '../../../../utils/model-url-helper'\nimport ModelSwitcher from '../ModelSwitcher'\nimport GettingStartedDialog from './GettingStartedDialog'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\nexport type ModelLayoutTab = 'playground' | 'readme' | 'transparency' | 'evaluation' | 'license'\n\nexport function ModelLayout({\n  activeTab,\n  selectTab,\n  children,\n}: React.PropsWithChildren<{\n  activeTab: ModelLayoutTab\n  selectTab:\n    | ((\n        tab: ModelLayoutTab,\n        e: React.KeyboardEvent<HTMLAnchorElement> | React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n      ) => void)\n    | null\n}>) {\n  const {model, modelInputSchema, modelLicense, on_waitlist} = useRoutePayload<ShowModelPayload>()\n  const {tags, task} = model\n  const labels = {tags, task}\n  const noEvaluationReport = 'This model does not provide an evaluation report.'\n  const noTransparencyNotes = 'The model does not have specific notes.'\n  const noAdditionalTransparencyNotes = 'This model does not provide any additional notes.'\n  const languages = model.supported_languages.filter(language => language !== null)\n  const isMobile = useResponsiveValue({narrow: true}, false)\n\n  if (activeTab === 'playground') {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: 'calc(100dvh - 64px)',\n        }}\n      >\n        <Box\n          sx={{\n            display: ['block', 'block', 'none'],\n          }}\n        >\n          <GiveFeedback mobile />\n        </Box>\n        <Box sx={{height: '100%', width: '100%', p: 3, overflow: 'auto'}}>\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              flex: 1,\n              width: '100%',\n              height: '100%',\n            }}\n          >\n            <Box\n              sx={{\n                flex: 1,\n                display: 'flex',\n                flexDirection: 'column',\n                width: '100%',\n                maxHeight: '100%',\n                height: '100%',\n              }}\n            >\n              <PlaygroundHeader model={model} />\n              {children}\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  return (\n    <div className=\"d-flex flex-column\">\n      <Box\n        sx={{\n          display: ['block', 'block', 'none'],\n        }}\n      >\n        <GiveFeedback mobile />\n      </Box>\n\n      <PageLayout columnGap=\"normal\" sx={{p: isMobile ? 0 : 3}}>\n        <PageLayout.Header>\n          <OverviewHeader model={model} />\n        </PageLayout.Header>\n\n        <PageLayout.Content as=\"div\" sx={{p: isMobile ? 3 : 0, pt: 0}}>\n          {model.task === 'chat-completion' && (\n            <div>\n              <MiniPlayground model={model} modelInputSchema={modelInputSchema} onWaitlist={on_waitlist} />\n            </div>\n          )}\n          <Box\n            sx={{\n              width: '100%',\n              borderColor: 'border.default',\n              borderStyle: 'solid',\n              borderWidth: 1,\n              borderRadius: 2,\n              display: 'flex',\n              flexDirection: 'column',\n              boxShadow: 'var(--shadow-resting-small,var(--color-shadow-small))',\n            }}\n          >\n            <div>\n              <UnderlineNav aria-label=\"Model navigation\">\n                <UnderlineNav.Item\n                  icon={BookIcon}\n                  onSelect={e => selectTab && selectTab('readme', e)}\n                  aria-current={activeTab === 'readme' ? 'page' : undefined}\n                >\n                  README\n                </UnderlineNav.Item>\n                {model.evaluation && noEvaluationReport !== model.evaluation && (\n                  <UnderlineNav.Item\n                    icon={ChecklistIcon}\n                    onSelect={e => selectTab && selectTab('evaluation', e)}\n                    aria-current={activeTab === 'evaluation' ? 'page' : undefined}\n                  >\n                    Evaluation\n                  </UnderlineNav.Item>\n                )}\n                {model.notes &&\n                  noTransparencyNotes !== model.notes &&\n                  noAdditionalTransparencyNotes !== model.notes && (\n                    <UnderlineNav.Item\n                      icon={LogIcon}\n                      onSelect={e => selectTab && selectTab('transparency', e)}\n                      aria-current={activeTab === 'transparency' ? 'page' : undefined}\n                    >\n                      Transparency\n                    </UnderlineNav.Item>\n                  )}\n                {modelLicense && (\n                  <UnderlineNav.Item\n                    icon={LawIcon}\n                    onSelect={e => selectTab && selectTab('license', e)}\n                    aria-current={activeTab === 'license' ? 'page' : undefined}\n                  >\n                    License\n                  </UnderlineNav.Item>\n                )}\n              </UnderlineNav>\n            </div>\n            <Box sx={{p: [2, 2, 3]}}>{children}</Box>\n          </Box>\n          <Box sx={{display: ['flex', 'flex', 'none'], flexDirection: 'column', gap: 3, pt: 3, pb: 5}}>\n            {(labels.tags.length > 0 || labels.task) && <TagsSection labels={labels} />}\n            {languages.length > 0 && <LanguagesSection languages={languages} />}\n          </Box>\n        </PageLayout.Content>\n        <PageLayout.Pane hidden={{narrow: true, regular: false}}>\n          <SidebarInfo model={model} />\n        </PageLayout.Pane>\n      </PageLayout>\n    </div>\n  )\n}\n\nfunction BreadcrumbHeader({model}: {model: Model}) {\n  return (\n    <Breadcrumbs>\n      <Breadcrumbs.Item href=\"/marketplace\">Marketplace</Breadcrumbs.Item>\n      <Breadcrumbs.Item href=\"/marketplace/models\">Models</Breadcrumbs.Item>\n      <Breadcrumbs.Item href=\"\" selected>\n        {normalizeModelPublisher(model.publisher)}\n      </Breadcrumbs.Item>\n    </Breadcrumbs>\n  )\n}\n\nfunction OverviewHeader({model}: {model: Model}) {\n  const {summary} = model\n  const openInCodespacesUrl = `/codespaces/new?template_repository=${templateRepositoryNwo}`\n  const [isGettingStartedDialogOpen, setGettingStartedDialogOpen] = useState(false)\n  const playgroundEnabled = useFeatureFlag('project_neutron_playground')\n  const isMobile = useResponsiveValue({narrow: true}, false) as boolean\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        gap: 3,\n        flexDirection: 'column',\n        p: isMobile ? 3 : 0,\n        backgroundColor: isMobile ? 'canvas.inset' : 'canvas.default',\n        borderColor: 'border.default',\n        borderBottomWidth: isMobile ? 1 : 0,\n        borderBottomStyle: 'solid',\n      }}\n    >\n      <BreadcrumbHeader model={model} />\n      <div>\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: ['column', 'column', 'row'],\n            alignItems: 'center',\n            gap: 3,\n          }}\n        >\n          <Box\n            sx={{\n              flexGrow: [1, 1, 1],\n              display: 'flex',\n              minWidth: 0,\n              alignItems: 'center',\n              width: ['100%', '100%', 'auto'],\n            }}\n          >\n            <Box sx={{display: 'flex', flexDirection: 'row', alignItems: 'center', gap: 2}}>\n              <GitHubAvatar square size={isMobile ? 24 : 32} src={model.logo_url} />\n              <h1 className={isMobile ? 'h4' : 'h3'}>{model.friendly_name}</h1>\n            </Box>\n          </Box>\n\n          <Box\n            sx={{\n              display: ['flex', 'flex', 'none'],\n              flexDirection: 'column',\n              width: '100%',\n              gap: 3,\n            }}\n          >\n            <Text sx={{lineHeight: 1.5}}>{summary}</Text>\n          </Box>\n\n          <Box sx={{display: ['block', 'block', 'none'], width: '100%'}}>\n            <ModelDetails model={model} direction=\"row\" />\n          </Box>\n\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 2,\n              width: ['100%', '100%', 'auto'],\n              justifyContent: 'flex-end',\n              flexGrow: [0, 0, 1],\n              flexShrink: 0,\n              flexDirection: ['column-reverse', 'column-reverse', 'row'],\n            }}\n          >\n            <Box sx={{display: ['none', 'none', 'flex']}}>\n              <GiveFeedback />\n            </Box>\n            <Box sx={{display: 'flex', flexDirection: ['column', 'row', 'row'], gap: 2}}>\n              {model.task === 'chat-completion' && (\n                <Button\n                  variant=\"default\"\n                  as=\"a\"\n                  block={isMobile}\n                  href={ModelUrlHelper.playgroundUrl(model)}\n                  leadingVisual={CommandPaletteIcon}\n                >\n                  Playground\n                </Button>\n              )}\n              <Button\n                block={isMobile}\n                leadingVisual={CodeIcon}\n                variant=\"primary\"\n                onClick={() => {\n                  setGettingStartedDialogOpen(true)\n                  sendEvent(GettingStartedButtonClicked, {\n                    registry: model.registry,\n                    model: model.name,\n                    publisher: model.publisher,\n                    playgroundEnabled,\n                  })\n                }}\n              >\n                Get started\n              </Button>\n            </Box>\n            {isGettingStartedDialogOpen && (\n              <GettingStartedDialog\n                openInCodespaceUrl={openInCodespacesUrl}\n                onClose={() => setGettingStartedDialogOpen(false)}\n                playgroundEnabled={playgroundEnabled}\n              />\n            )}\n          </Box>\n        </Box>\n      </div>\n    </Box>\n  )\n}\n\nfunction PlaygroundHeader({model}: {model: Model}) {\n  const openInCodespacesUrl = `/codespaces/new?template_repository=${templateRepositoryNwo}`\n  const [isGettingStartedDialogOpen, setGettingStartedDialogOpen] = useState(false)\n  const playgroundEnabled = useFeatureFlag('project_neutron_playground')\n  return (\n    <Box sx={{display: 'flex', gap: 3, flexDirection: 'column', pb: 3}}>\n      <div>\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row',\n            alignItems: 'center',\n            gap: 3,\n          }}\n        >\n          <Box\n            sx={{\n              flexGrow: 1,\n              display: 'flex',\n              minWidth: 0,\n              alignItems: 'center',\n              width: 'auto',\n            }}\n          >\n            <ModelSwitcher model={model} />\n          </Box>\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 2,\n              width: 'auto',\n              justifyContent: 'flex-end',\n              flexGrow: 1,\n              flexShrink: 0,\n              flexDirection: 'row',\n            }}\n          >\n            <Box sx={{display: ['none', 'none', 'flex']}}>\n              <GiveFeedback />\n            </Box>\n\n            <>\n              <IconButton\n                sx={{display: ['flex', 'none', 'none']}}\n                icon={CodeIcon}\n                variant=\"primary\"\n                aria-label=\"Get started\"\n                onClick={() => {\n                  setGettingStartedDialogOpen(true)\n                  sendEvent(GettingStartedButtonClicked, {\n                    registry: model.registry,\n                    model: model.name,\n                    publisher: model.publisher,\n                    playgroundEnabled,\n                  })\n                }}\n              />\n              <Button\n                sx={{display: ['none', 'flex', 'flex']}}\n                leadingVisual={CodeIcon}\n                variant=\"primary\"\n                onClick={() => {\n                  setGettingStartedDialogOpen(true)\n                  sendEvent(GettingStartedButtonClicked, {\n                    registry: model.registry,\n                    model: model.name,\n                    publisher: model.publisher,\n                    playgroundEnabled,\n                  })\n                }}\n              >\n                Get started\n              </Button>\n            </>\n            {isGettingStartedDialogOpen && (\n              <GettingStartedDialog\n                openInCodespaceUrl={openInCodespacesUrl}\n                onClose={() => setGettingStartedDialogOpen(false)}\n                playgroundEnabled={playgroundEnabled}\n              />\n            )}\n          </Box>\n        </Box>\n      </div>\n    </Box>\n  )\n}\n\nfunction GiveFeedback({mobile}: {mobile?: boolean}) {\n  if (mobile) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          py: 3,\n          px: 3,\n          bg: 'canvas.subtle',\n          borderBottomColor: 'border.default',\n          borderBottomWidth: 1,\n          borderBottomStyle: 'solid',\n        }}\n      >\n        <Box sx={{flex: 1, fontSize: 0, color: 'fg.muted'}}>Thoughts on GitHub Models?</Box>\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            flexShrink: 0,\n            gap: 'var(--base-size-6)',\n            fontSize: 0,\n          }}\n        >\n          <Label variant=\"success\">Beta</Label>\n          <Link href=\"https://gh.io/models-feedback\">Give feedback</Link>\n        </Box>\n      </Box>\n    )\n  }\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'nowrap',\n        mr: 2,\n        gap: 'var(--base-size-6)',\n      }}\n    >\n      <Label variant=\"success\">Beta</Label>\n      <Link href=\"https://gh.io/models-feedback\" sx={{fontSize: 0, whiteSpace: 'nowrap'}}>\n        Give feedback\n      </Link>\n    </Box>\n  )\n}\n\nfunction MiniPlayground({\n  model,\n  modelInputSchema,\n  onWaitlist,\n}: {\n  model: Model\n  modelInputSchema: ModelInputSchema\n  onWaitlist?: boolean\n}) {\n  const [text, setText] = useState('')\n  const hasText = text.length > 0\n  const isMobile = useResponsiveValue({narrow: true}, false)\n  const playgroundEnabled = useFeatureFlag('project_neutron_playground')\n\n  const miniPlaygroundRef = useRef<HTMLFormElement>(null)\n  const miniPlaygroundInputRef = useRef<HTMLTextAreaElement>(null)\n  const legalContainerRef = useRef<HTMLDivElement>(null)\n  const icebreakerContainerRef = useRef<HTMLDivElement>(null)\n  const animationContainerRef = useRef<HTMLDivElement>(null)\n\n  const samplesToContent = modelInputSchema.sampleInputs?.map(input => {\n    const firstMessageWithContent = input.messages?.find(message => message.content)\n    return firstMessageWithContent?.content\n  })\n\n  const samplesWithContent = samplesToContent?.filter(sample => sample !== undefined)\n  const SUGGESTION_DISPLAY_MAX = 4\n  // If mobile, we only show one, so pick one at random\n  const randomPrompt = useMemo(() => {\n    return samplesWithContent[Math.floor(Math.random() * samplesWithContent?.length)]\n  }, [samplesWithContent])\n  const suggestedPrompts = isMobile ? [randomPrompt] : samplesWithContent?.slice(0, SUGGESTION_DISPLAY_MAX)\n\n  const handlePlaygroundCardClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.currentTarget.parentNode instanceof HTMLFormElement) {\n      e.currentTarget.parentNode.submit()\n    }\n  }\n\n  const handleKeyDown = async (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n    if (e.key === 'Escape') {\n      e.preventDefault()\n      setText('')\n    }\n\n    // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n    else if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.altKey && !e.nativeEvent.isComposing) {\n      const form = miniPlaygroundRef.current\n      if (form) {\n        e.preventDefault()\n        form.submit()\n      }\n    }\n  }\n\n  const adjustHeights = useCallback(() => {\n    if (animationContainerRef.current && legalContainerRef.current && icebreakerContainerRef.current) {\n      animationContainerRef.current.style.height = hasText\n        ? `${legalContainerRef.current.offsetHeight}px`\n        : `${icebreakerContainerRef.current.offsetHeight}px`\n    }\n  }, [hasText])\n\n  useEffect(() => {\n    adjustHeights()\n  }, [hasText, adjustHeights])\n\n  useEffect(() => {\n    const observer = new ResizeObserver(adjustHeights)\n    if (legalContainerRef.current) observer.observe(legalContainerRef.current)\n    if (icebreakerContainerRef.current) observer.observe(icebreakerContainerRef.current)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [adjustHeights])\n\n  const playgroundURL = ModelUrlHelper.playgroundUrl(model)\n\n  return (\n    <>\n      <Text\n        sx={{\n          fontWeight: 'bold',\n          display: ['block', 'block', 'none'],\n          mb: 2,\n        }}\n      >\n        Try {model.friendly_name}\n      </Text>\n      {playgroundEnabled ? (\n        <>\n          <Box as=\"form\" sx={{mb: 3, pt: 1, position: 'relative'}} action={playgroundURL} ref={miniPlaygroundRef}>\n            <FormControl>\n              <FormControl.Label visuallyHidden>Mini Playground Prompt Input</FormControl.Label>\n              <Textarea\n                name=\"p\"\n                id=\"miniplayground_icebreaker\"\n                ref={miniPlaygroundInputRef}\n                value={text}\n                onChange={e => setText(e.target.value)}\n                onKeyDown={handleKeyDown}\n                rows={1}\n                placeholder={`Enter a message...`}\n                resize=\"none\"\n                block\n                sx={{pr: 5}}\n              />\n\n              <IconButton\n                icon={PaperAirplaneIcon}\n                variant=\"invisible\"\n                aria-label=\"Submit message\"\n                onClick={() => miniPlaygroundRef.current?.submit()}\n                sx={{\n                  position: 'absolute',\n                  right: 0,\n                  mr: 2,\n                  // center vertically\n                  top: '50%',\n                  marginTop: '-14px',\n                }}\n              />\n            </FormControl>\n          </Box>\n          <Box sx={{pb: 3}}>\n            <Box sx={{position: 'relative'}} className={styles.animateHeight} ref={animationContainerRef}>\n              <Box\n                sx={{position: 'absolute', top: 0}}\n                ref={legalContainerRef}\n                className={`${styles.fadeInOut} ${hasText ? styles.fadeInOutShow : ''}`}\n              >\n                <Box sx={{marginTop: '-2px'}}>\n                  <ModelLegalTerms />\n                </Box>\n              </Box>\n\n              {suggestedPrompts && (\n                <Box\n                  ref={icebreakerContainerRef}\n                  className={`${styles.fadeInOut} ${hasText ? '' : styles.fadeInOutShow}`}\n                  sx={{\n                    position: 'relative', // necessary for z-index to work\n                    display: 'grid',\n                    gridTemplateColumns: [\n                      '1fr',\n                      '1fr',\n                      '1fr 1fr',\n                      Array(suggestedPrompts.length).fill('1fr').join(' '),\n                    ],\n                    gap: 3,\n                  }}\n                >\n                  {suggestedPrompts.map(sample => {\n                    if (sample) {\n                      // random value is memoized and can be null on first render\n                      return (\n                        <Box as=\"form\" sx={{display: 'flex'}} key={sample} action={playgroundURL}>\n                          <input type=\"hidden\" value={sample} name=\"p\" />\n                          <PlaygroundCard sample={sample} onClick={handlePlaygroundCardClick} />\n                        </Box>\n                      )\n                    }\n                  })}\n                </Box>\n              )}\n            </Box>\n          </Box>\n        </>\n      ) : (\n        <Box sx={{pb: 3}}>\n          <Box\n            sx={{\n              bg: 'done.subtle',\n              borderColor: 'done.muted',\n              borderStyle: 'solid',\n              borderWidth: 1,\n              borderRadius: 2,\n              flexDirection: ['column', 'column', 'row'],\n              px: 4,\n              py: 3,\n              display: 'flex',\n              alignItems: 'flex-start',\n              gap: [2, 2, 3],\n            }}\n          >\n            <Box sx={{display: 'flex', flexDirection: 'column', flex: 1, gap: [1, 1, 0]}}>\n              <Text sx={{fontWeight: 'bold', lineHeight: '20px'}}>Get early access to our playground for models</Text>\n              <Text sx={{color: 'fg.muted', lineHeight: '20px'}}>\n                {onWaitlist\n                  ? \"You're already on the waitlist! We'll send you an email once your access is granted.\"\n                  : 'Join our limited beta waiting list today and be among the first to try out an easy way to test models'}\n              </Text>\n            </Box>\n            {!onWaitlist && (\n              <Box sx={{height: '100%', py: 1}}>\n                <Button as=\"a\" href=\"/marketplace/models/waitlist\">\n                  Join the waitlist\n                </Button>\n              </Box>\n            )}\n          </Box>\n        </Box>\n      )}\n    </>\n  )\n}\n\nexport function PlaygroundCard({\n  sample,\n  onClick,\n  size = 'small',\n}: {\n  sample: string\n  onClick: React.MouseEventHandler<HTMLDivElement> | undefined\n  size?: 'small' | 'large'\n}) {\n  const sizes = {\n    small: {\n      p: '12px',\n      fontSize: 0,\n    },\n    large: {\n      p: 3,\n      fontSize: 1,\n    },\n  }\n\n  return (\n    <Box\n      onClick={onClick}\n      sx={{\n        ...sizes[size],\n        borderRadius: 2,\n        height: '100%',\n        flex: 1,\n        borderColor: 'border.muted',\n        borderWidth: 1,\n        borderStyle: 'solid',\n        bg: 'var(--card-bgColor)',\n\n        display: 'flex',\n        boxShadow: 'var(--shadow-resting-small,var(--color-shadow-small))',\n        transition: 'background-color .3s',\n        gap: 3,\n        ':hover': {\n          bg: 'var(--control-transparent-bgColor-hover,var(--color-canvas-subtle))',\n          cursor: 'pointer',\n        },\n      }}\n    >\n      <Box sx={{flex: 1}}>{sample}</Box>\n      <Box sx={{color: 'fg.muted'}}>\n        <ArrowUpRightIcon />\n      </Box>\n    </Box>\n  )\n}\n\ntry{ ModelLayout.displayName ||= 'ModelLayout' } catch {}\ntry{ BreadcrumbHeader.displayName ||= 'BreadcrumbHeader' } catch {}\ntry{ OverviewHeader.displayName ||= 'OverviewHeader' } catch {}\ntry{ PlaygroundHeader.displayName ||= 'PlaygroundHeader' } catch {}\ntry{ GiveFeedback.displayName ||= 'GiveFeedback' } catch {}\ntry{ MiniPlayground.displayName ||= 'MiniPlayground' } catch {}\ntry{ PlaygroundCard.displayName ||= 'PlaygroundCard' } catch {}","import {AlertIcon} from '@primer/octicons-react'\nimport {Box, Button, Flash, Octicon} from '@primer/react'\nimport {usePlaygroundManager} from '../../../utils/playground-manager'\n\nexport type PlaygroundErrorProps = {\n  message: string\n  showResetButton: boolean\n}\n\nexport function PlaygroundError(props: PlaygroundErrorProps) {\n  const manager = usePlaygroundManager()\n\n  return (\n    <Box data-testid=\"playground-error\" sx={{py: 2}}>\n      <Flash\n        variant=\"warning\"\n        sx={{\n          display: 'grid',\n          gridTemplateColumns: 'min-content 1fr minmax(0, auto)',\n          gridTemplateRows: 'min-content',\n          gridTemplateAreas: `'visual message actions'`,\n          '@media screen and (max-width: 543.98px)': {\n            gridTemplateColumns: 'min-content 1fr',\n            gridTemplateRows: 'min-content min-content',\n            gridTemplateAreas: `\n        'visual message'\n        '.      actions'\n      `,\n          },\n        }}\n      >\n        <Box\n          sx={{\n            display: 'grid',\n            alignSelf: 'center',\n            gridArea: 'visual',\n          }}\n        >\n          <Octicon icon={AlertIcon} />\n        </Box>\n        <Box\n          sx={{\n            fontSize: 1,\n            lineHeight: '1.5',\n            alignSelf: 'center',\n            gridArea: 'message',\n          }}\n        >\n          {props.message}\n        </Box>\n        {props.showResetButton && (\n          <Box\n            sx={{\n              gridArea: 'actions',\n              '@media screen and (max-width: 543.98px)': {\n                alignSelf: 'start',\n                margin: 'var(--base-size-8) 0 0 var(--base-size-8)',\n              },\n            }}\n          >\n            <Button onClick={() => manager.resetHistory(true)}>Reset chat</Button>\n          </Box>\n        )}\n      </Flash>\n    </Box>\n  )\n}\n\ntry{ PlaygroundError.displayName ||= 'PlaygroundError' } catch {}","import CopilotBadge from '@github-ui/copilot-chat/components/CopilotBadge'\nimport {GitHubAvatar} from '@github-ui/github-avatar'\nimport {Box, IconButton, RelativeTime, Text} from '@primer/react'\nimport type {PlaygroundMessage} from '../../../utils/model-client'\nimport {MarkdownViewer} from '@github-ui/markdown-viewer'\nimport {useUser} from '@github-ui/use-user'\n\nimport {transformContentToHTML} from '@github-ui/copilot-chat/utils/markdown'\nimport {usePlaygroundManager} from '../../../utils/playground-manager'\nimport {PlaygroundError} from './PlaygroundError'\nimport {TokenLimitReachedResponseErrorDescription} from '../../../utils/playground-types'\nimport {CopyToClipboardButton} from '@github-ui/copy-to-clipboard'\nimport {ThumbsdownIcon, ThumbsupIcon, SyncIcon} from '@primer/octicons-react'\nimport {useCallback, useRef, useState} from 'react'\nimport {FeedbackDialog} from './GettingStartedDialog/FeedbackDialog'\nimport {Feedback} from './GettingStartedDialog/types'\nimport {sendFeedback} from '../../../utils/feedback'\n\nexport enum FeedbackState {\n  POSITIVE,\n  NEGATIVE,\n}\n\nexport type PlaygroundChatMessageProps = {\n  isLoading: boolean\n  isError: boolean\n  index: number\n  message: PlaygroundMessage\n  handleRegenerate: (index: number) => void\n  lastIndex: boolean\n}\n\nexport function PlaygroundChatMessage(props: PlaygroundChatMessageProps) {\n  const {message, index, handleRegenerate, lastIndex} = props\n\n  const htmlMessage = transformContentToHTML(message.message)\n\n  const user = useUser()\n  const manager = usePlaygroundManager()\n  const model = manager.model\n  const returnFocusRef = useRef(null)\n  const [submittedFeedback, setSubmittedFeedback] = useState<\n    FeedbackState.POSITIVE | FeedbackState.NEGATIVE | undefined\n  >(undefined)\n\n  const positiveFeedbackSubmitted = submittedFeedback === FeedbackState.POSITIVE\n  const [isFeedbackDialogOpen, setIsFeedbackDialogOpen] = useState(false)\n  // In order to submit negative feedback, the user must click the thumbs down icon and then click the \"Submit feedback\" button in a dialog\n  const [isNegativeFeedbackConfirmed, setIsNegativeFeedbackConfirmed] = useState(false)\n\n  const isAssistantMessage = message.role === 'assistant' && message.message\n  const isLastResponse = isAssistantMessage && lastIndex\n\n  const determineMessageMeta = (_message: PlaygroundMessage) => {\n    switch (_message.role) {\n      case 'error':\n      case 'assistant':\n        return {\n          name: model.name,\n          avatarUrl: model.logo_url,\n        }\n      case 'user':\n        return {\n          name: user.currentUser?.name ?? 'User',\n          avatarUrl: user.currentUser?.avatarUrl ?? '/github.png',\n        }\n      default:\n        return {\n          name: 'default',\n          avatarUrl: '/github.png',\n        }\n    }\n  }\n\n  const messageMeta = determineMessageMeta(message)\n\n  const handleSubmit = async () => {\n    const feedback = {\n      satisfaction: Feedback.POSITIVE,\n      reasons: [],\n      feedbackText: '',\n      contactConsent: false,\n    }\n    try {\n      const res = await sendFeedback({model, feedback})\n      if (res.ok) {\n        setSubmittedFeedback(FeedbackState.POSITIVE)\n      }\n    } catch (error) {\n      return error\n    }\n  }\n\n  const handleClick = useCallback(() => {\n    setIsFeedbackDialogOpen(true)\n    setSubmittedFeedback(FeedbackState.NEGATIVE)\n  }, [])\n\n  return (\n    <Box\n      key={index}\n      sx={{\n        pb: 2,\n        '&:hover, &:focus-within': {\n          '.message-actions': {\n            opacity: 1,\n            pointerEvents: 'auto',\n          },\n        },\n        // We dont want delay for keyboard users\n        '&:hover': {\n          '.message-actions': {\n            transition: 'opacity 0.1s ease-in-out',\n            transitionDelay: '0.2s',\n          },\n        },\n      }}\n    >\n      <Box\n        className=\"message-container\"\n        data-testid=\"playground-chat-message\"\n        tabIndex={0}\n        // ref={myRef}\n        sx={{\n          p: 1,\n          // borderBottom: '1px solid var(--borderColor-muted, var(--color-border-muted))',\n          fontSize: 1,\n        }}\n      >\n        <Box\n          sx={{\n            width: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2,\n            fontSize: 1,\n          }}\n        >\n          <CopilotBadge\n            isLoading={props.isLoading}\n            isError={props.isError}\n            customIcon={<GitHubAvatar src={messageMeta.avatarUrl} size={12} square={message.role !== 'user'} />}\n          />\n\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              flexGrow: 1,\n            }}\n          >\n            <Box sx={{display: 'flex', gap: 2, alignItems: 'baseline'}}>\n              <Text\n                data-testid=\"chat-message-author-name\"\n                sx={{\n                  fontWeight: 'bold',\n                }}\n              >\n                {messageMeta.name}\n              </Text>\n              <Text\n                sx={{\n                  fontSize: 0,\n                  fontWeight: 400,\n                  color: 'fg.subtle',\n                }}\n              >\n                {messageMeta.name !== 'user' && props.isLoading ? (\n                  `Responding...`\n                ) : (\n                  <RelativeTime date={message.timestamp} format=\"relative\" />\n                )}\n              </Text>\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n      {props.isError ? (\n        <PlaygroundError\n          message={message.message}\n          showResetButton={message.message === TokenLimitReachedResponseErrorDescription}\n        />\n      ) : (\n        <div className=\"position-relative\">\n          <Box sx={{p: 1}}>\n            <MarkdownViewer verifiedHTML={htmlMessage} />\n          </Box>\n          {isAssistantMessage && !props.isLoading && (\n            <Box\n              className=\"message-actions\"\n              sx={{\n                display: 'inline-flex',\n                alignItems: 'center',\n                // Floating actions for previous messages\n                position: isLastResponse ? undefined : 'absolute',\n                bottom: isLastResponse ? undefined : '-2.25rem',\n                backgroundColor: 'var(--bgColor-default, var(--color-canvas-default))',\n                borderRadius: isLastResponse ? undefined : 2,\n                boxShadow: isLastResponse ? undefined : 'var(--shadow-floating-small)',\n                // Opacity and pointer events rules instead of changing `display` let us animate the actions in and out\n                opacity: isLastResponse ? undefined : 0,\n                pointerEvents: isLastResponse ? undefined : 'none',\n                // This is not ideal but required to ensure the shadow is not completely clipped\n                left: isLastResponse ? undefined : '2px',\n\n                // Adds a lil invisible target to make hovering less precise so they dont disappear if you miss a bit\n                '&::before': {\n                  // Not on the inline actions though\n                  content: isLastResponse ? undefined : '\"\"',\n                  // Make it wider than it is tall to cover the triangular hover path\n                  inset: '-0.5rem -0.75rem',\n                  zIndex: -1,\n                  position: 'absolute',\n                },\n              }}\n            >\n              {!isNegativeFeedbackConfirmed && (\n                <IconButton\n                  sx={{\n                    backgroundColor: positiveFeedbackSubmitted ? 'canvas.subtle' : 'canvas.default',\n                  }}\n                  icon={ThumbsupIcon}\n                  variant=\"invisible\"\n                  aria-label=\"Positive\"\n                  onClick={handleSubmit}\n                  disabled={positiveFeedbackSubmitted}\n                />\n              )}\n              {submittedFeedback !== FeedbackState.POSITIVE && (\n                <IconButton\n                  sx={{\n                    backgroundColor: isNegativeFeedbackConfirmed ? 'canvas.subtle' : 'canvas.default',\n                  }}\n                  icon={ThumbsdownIcon}\n                  variant=\"invisible\"\n                  aria-label=\"Negative\"\n                  onClick={handleClick}\n                  disabled={isNegativeFeedbackConfirmed}\n                />\n              )}\n              <CopyToClipboardButton textToCopy={message.message} ariaLabel={'Copy to clipboard'} />\n              {isLastResponse && (\n                <IconButton\n                  icon={SyncIcon}\n                  variant=\"invisible\"\n                  aria-label=\"Regenerate\"\n                  onClick={() => handleRegenerate(index)}\n                />\n              )}\n            </Box>\n          )}\n          {submittedFeedback === FeedbackState.NEGATIVE && (\n            <FeedbackDialog\n              isNegativePreSelected\n              setIsNegativeFeedbackConfirmed={setIsNegativeFeedbackConfirmed}\n              returnFocusRef={returnFocusRef}\n              isFeedbackDialogOpen={isFeedbackDialogOpen}\n              setIsFeedbackDialogOpen={setIsFeedbackDialogOpen}\n            />\n          )}\n        </div>\n      )}\n    </Box>\n  )\n}\n\ntry{ PlaygroundChatMessage.displayName ||= 'PlaygroundChatMessage' } catch {}","import {ActionList, ActionMenu} from '@primer/react'\nimport {Stack} from '@primer/react/drafts'\nimport {usePlaygroundManager, usePlaygroundState} from '../../../utils/playground-manager'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {GettingStartedPayload} from './GettingStartedDialog/types'\n\nexport function PlaygroundCodeLanguage() {\n  const {selectedLanguage, selectedSDK} = usePlaygroundState()\n  const manager = usePlaygroundManager()\n  const {gettingStarted} = useRoutePayload<GettingStartedPayload>()\n\n  // Code sample for C# is currently not available\n  const languages = Object.keys(gettingStarted).filter(language => language !== 'csharp')\n\n  const snippet = gettingStarted[selectedLanguage]\n\n  const handleSelectLanguage = (language: string) => {\n    manager.setSelectedLanguage(language, selectedSDK)\n  }\n\n  if (!snippet) {\n    return null\n  }\n\n  return (\n    <Stack gap=\"normal\" className=\"width-fit d-block\">\n      <ActionMenu>\n        <ActionMenu.Button size=\"small\">{snippet.name}</ActionMenu.Button>\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\">\n            {/* For each language, add an item to the dropdown */}\n            {languages.map(language => (\n              <ActionList.Item\n                key={language}\n                selected={language === selectedLanguage}\n                onSelect={() => {\n                  handleSelectLanguage(language)\n                }}\n              >\n                {gettingStarted[language]?.name}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </Stack>\n  )\n}\n\ntry{ PlaygroundCodeLanguage.displayName ||= 'PlaygroundCodeLanguage' } catch {}","import {GitHubAvatar} from '@github-ui/github-avatar'\nimport {Box, useResponsiveValue, Text} from '@primer/react'\nimport type {Model, ModelInputSchema} from '../../../../types'\nimport {PlaygroundCard} from './GettingStartedDialog/ModelLayout'\n\ninterface Props {\n  model: Model\n  modelInputSchema: ModelInputSchema\n  submitMessage: (s: string) => void\n}\n\nexport default function PlayGroundChatEmptyState({model, modelInputSchema, submitMessage}: Props) {\n  const MAX_SUGGESTIONS = 3\n  const isMobile = useResponsiveValue({narrow: true}, false)\n\n  return (\n    <div className=\"d-flex height-full flex-column flex-justify-center\">\n      <div className=\"d-flex flex-row flex-justify-center pb-3\">\n        <GitHubAvatar size={{narrow: 32, regular: 40}} square={true} src={model.logo_url} />\n      </div>\n      <Text as=\"h3\" sx={{fontWeight: 'bold', textAlign: 'center', pb: 1, fontSize: [2, 2, 3]}}>\n        {model.friendly_name}\n      </Text>\n      <Text as=\"p\" sx={{color: 'fg.muted', textAlign: 'center', pb: [3, 3, 7], fontSize: 1}}>\n        {model.summary}\n      </Text>\n      {modelInputSchema.sampleInputs && modelInputSchema.sampleInputs.length > 0 ? (\n        <Box sx={{display: 'flex', justifyContent: 'center'}}>\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 3,\n              maxWidth: ['100%', '100%', `${MAX_SUGGESTIONS * 240 + 32}px`],\n              flexDirection: ['column', 'column', 'row'],\n              pb: [3, 3, 0],\n            }}\n          >\n            {modelInputSchema.sampleInputs.slice(0, MAX_SUGGESTIONS).map((input, index) => {\n              const content =\n                input.messages && input?.messages[0] && input.messages[0].content ? input.messages[0].content : null\n              if (!content) {\n                return null\n              }\n              return (\n                <PlaygroundCard\n                  size={isMobile ? 'small' : 'large'}\n                  sample={content}\n                  key={index}\n                  onClick={() => submitMessage(content)}\n                />\n              )\n            })}\n          </Box>\n        </Box>\n      ) : null}\n    </div>\n  )\n}\n\ntry{ PlayGroundChatEmptyState.displayName ||= 'PlayGroundChatEmptyState' } catch {}","import {KebabHorizontalIcon} from '@primer/octicons-react'\nimport {ActionList, ActionMenu, IconButton, useResponsiveValue} from '@primer/react'\nimport {Stack} from '@primer/react/drafts'\nimport {usePlaygroundManager, usePlaygroundState} from '../../../utils/playground-manager'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {GettingStartedPayload} from './GettingStartedDialog/types'\n\nexport function PlaygroundCodeSDK() {\n  const {selectedSDK, selectedLanguage} = usePlaygroundState()\n  const manager = usePlaygroundManager()\n  const {gettingStarted} = useRoutePayload<GettingStartedPayload>()\n  const isMobile = useResponsiveValue({narrow: true}, false)\n  const snippet = gettingStarted[selectedLanguage]\n\n  if (!snippet) return null\n\n  const sdks = Object.keys(snippet.sdks)\n\n  if (!sdks.length) return null\n\n  const currentSDK = sdks.includes(selectedSDK)\n    ? {[selectedSDK]: snippet.sdks[selectedSDK]}\n    : {[Object.keys(snippet.sdks)[0] as string]: Object.values(snippet.sdks)[0]} || null\n\n  if (!currentSDK) return null\n\n  const handleSelectedSDK = (sdk: string) => {\n    manager.setSelectedSDK(sdk)\n  }\n  const currentSDKName = Object.keys(currentSDK)[0]\n\n  if (!currentSDKName) return null\n\n  return (\n    <Stack gap=\"normal\" className=\"width-fit d-block\">\n      <ActionMenu>\n        {isMobile ? (\n          <ActionMenu.Anchor>\n            <IconButton\n              icon={KebabHorizontalIcon}\n              size=\"small\"\n              aria-label=\"Open SDK options\"\n              sx={{color: 'fg.muted'}}\n            />\n          </ActionMenu.Anchor>\n        ) : (\n          <ActionMenu.Button size=\"small\">{currentSDK[currentSDKName]?.name}</ActionMenu.Button>\n        )}\n        <ActionMenu.Overlay width=\"small\">\n          <ActionList selectionVariant=\"single\">\n            {sdks.map(sdk => (\n              <ActionList.Item\n                key={sdk}\n                selected={sdk === currentSDKName}\n                onSelect={() => {\n                  handleSelectedSDK(sdk)\n                }}\n              >\n                {snippet.sdks[sdk]?.name}\n              </ActionList.Item>\n            ))}\n          </ActionList>\n        </ActionMenu.Overlay>\n      </ActionMenu>\n    </Stack>\n  )\n}\n\ntry{ PlaygroundCodeSDK.displayName ||= 'PlaygroundCodeSDK' } catch {}","import {CopyToClipboardButton} from '@github-ui/copy-to-clipboard'\nimport {usePlaygroundState} from '../../../utils/playground-manager'\nimport type {PlaygroundRequestParameters} from '../../../utils/model-client'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {Model} from '../../../../types'\nimport React, {lazy} from 'react'\nimport type {GettingStartedPayload} from './GettingStartedDialog/types'\n\nconst CodeMirror = lazy(() => import('@github-ui/code-mirror'))\n\nfunction replaceKeywords(template: string, values: PlaygroundRequestParameters) {\n  const regex = /\\{(\\w+)\\}/g\n  return template.replace(regex, (match, key) => values[key] ?? match)\n}\n\nfunction getLanguageExt(lang: 'rest' | 'python' | 'js' | string): string {\n  const extensionMap: {[key in 'rest' | 'python' | 'js']: string} = {\n    rest: 'sh',\n    python: 'py',\n    js: 'js',\n  }\n\n  return lang in extensionMap ? extensionMap[lang as keyof typeof extensionMap] : 'txt'\n}\n\nexport function PlaygroundCodeSnippet({model}: {model: Model}) {\n  const playgroundState = usePlaygroundState()\n  const {playgroundUrl, gettingStarted} = useRoutePayload<GettingStartedPayload>()\n\n  const {systemPrompt, parameters} = playgroundState\n\n  // Note: Never directly modify state\n  const enrichedParameters = Object.assign({}, parameters)\n\n  enrichedParameters['system_message'] = systemPrompt || ''\n  enrichedParameters['model_name'] = model.name\n  enrichedParameters['model_endpoint'] = playgroundUrl\n  const {selectedSDK, selectedLanguage} = usePlaygroundState()\n  const snippet = gettingStarted[selectedLanguage]\n\n  const extension = getLanguageExt(selectedLanguage)\n\n  if (!snippet) {\n    return null\n  }\n\n  const hasCodeSample = snippet.sdks[selectedSDK]\n\n  let content = 'Code snippet not available'\n  if (hasCodeSample) {\n    if (hasCodeSample.codeSamples.length > 0) {\n      content = hasCodeSample.codeSamples\n    }\n  } else {\n    const defaultSDK = Object.values(snippet.sdks)[0]\n    if (defaultSDK) {\n      content = defaultSDK.codeSamples\n    }\n  }\n\n  content = replaceKeywords(content, enrichedParameters)\n\n  return (\n    <div className=\"d-flex position-relative flex-column overflow-auto\" style={{flex: 1}}>\n      <CopyToClipboardButton\n        className=\"position-absolute\"\n        sx={{right: '8px', top: '8px', zIndex: 10}}\n        textToCopy={content}\n        ariaLabel={'Copy to clipboard'}\n      />\n\n      <React.Suspense fallback={<></>}>\n        <CodeMirror\n          fileName={`document.${extension}`}\n          value={content}\n          ariaLabelledBy={''}\n          height=\"100%\"\n          spacing={{\n            indentUnit: 2,\n            indentWithTabs: false,\n            lineWrapping: false,\n          }}\n          hideHelpUntilFocus={true}\n          onChange={() => {}}\n          isReadOnly\n        />\n      </React.Suspense>\n    </div>\n  )\n}\n\ntry{ CodeMirror.displayName ||= 'CodeMirror' } catch {}\ntry{ PlaygroundCodeSnippet.displayName ||= 'PlaygroundCodeSnippet' } catch {}","import type {SafeHTMLString} from '@github-ui/safe-html'\n\nexport type IndexPayload = {\n  featured: Listing[]\n  recommended: Listing[]\n  recentlyAdded: Listing[]\n  searchResults: SearchResults\n  featuredModels: Model[]\n  categories: {\n    apps: Category[]\n    actions: Category[]\n  }\n}\n\nexport type ShowAppPayload = {\n  listing: AppListing\n  screenshots: Screenshot[]\n  plan_info: PlanInfo\n  supported_languages: string[]\n  verified_domain?: string\n  user_can_edit: boolean\n  customers: FeaturedCustomer[]\n}\n\nexport type ShowActionPayload = {\n  action: ActionListing\n}\n\nexport type IndexModelsPayload = {\n  models: Model[]\n  categories: {\n    apps: Category[]\n    actions: Category[]\n  }\n  on_waitlist: boolean\n}\n\nexport type MarkdownHeadingsTocItem = {\n  level: number\n  text: SafeHTMLString\n  anchor: string\n  htmlText: SafeHTMLString\n}\n\nexport type ShowModelPayload = {\n  model: Model\n  modelReadme: SafeHTMLString\n  modelInputSchema: ModelInputSchema\n  readmeToc: MarkdownHeadingsTocItem[]\n  modelTransparencyContent: SafeHTMLString\n  playgroundUrl: string\n  on_waitlist?: boolean\n  miniplaygroundIcebreaker?: string\n  modelLicense: SafeHTMLString\n  modelEvaluation: SafeHTMLString\n  canProvideAdditionalFeedback: boolean\n  isLoggedIn: boolean\n}\n\nexport type ModelInputSchema = {\n  sampleInputs: Array<{messages?: Array<{content?: string}>}>\n  parameters: ModelInputSchemaParameter[]\n  capabilities: Record<string, boolean>\n}\n\nexport type ModelInputSchemaParameter = {\n  key: string\n  type: 'number' | 'integer' | 'array' | 'string' | 'boolean'\n  payloadPath: string\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  default?: number | string | boolean | any[]\n  min?: number\n  max?: number\n  required: boolean\n  description?: string\n  friendlyName?: string\n}\n\nexport type Listing = AppListing | ActionListing | ModelListing\n\nexport type AppListing = {\n  bgColor: string\n  copilotApp: boolean\n  documentationUrl?: string\n  extendedDescription?: string\n  fullDescription?: string\n  id: number\n  installationCount: number\n  isVerifiedOwner: boolean\n  listingLogoUrl?: string\n  name: string\n  ownerLogin?: string\n  pricingUrl?: string\n  primaryCategory?: string\n  privacyPolicyUrl?: string\n  secondaryCategory?: string\n  shortDescription?: string\n  slug: string\n  statusUrl?: string\n  supportUrl?: string\n  tosUrl?: string\n  type: 'marketplace_listing'\n}\n\nexport type ActionListing = {\n  categories: string[]\n  color: string\n  description?: string\n  iconSvg?: string\n  id: number\n  isVerifiedOwner: boolean\n  name: string\n  ownerLogin?: string\n  slug?: string\n  stars: number\n  type: 'repository_action'\n}\n\nexport type ModelListing = {\n  description?: string\n  highlights?: {description?: string; 'name.ngram': string | string[]}\n  logo_url?: string\n  model_url: string\n  id: string\n  name: string\n  friendly_name: string\n  type: 'model'\n}\n\nexport type ModelSnippet = {\n  friendly_name: string\n  sdks: {\n    [key in 'azure-ai-inference' | 'curl']: {\n      friendly_name: string\n      code: string\n    }\n  }\n}\n\nexport type Model = {\n  id: string\n  registry: string\n  name: string\n  original_name: string\n  friendly_name: string\n  publisher: string\n  task: string\n  description: string\n  samples: {\n    code: {rest: ModelSnippet; js: ModelSnippet; python: ModelSnippet}\n    inputs?: Array<{messages?: Array<{content?: string}>}>\n  }\n  summary: string\n  license: string\n  logo_url: string\n  tags: string[]\n  rate_limit_tier: string | null\n  supported_languages: string[]\n  max_output_tokens: number | null\n  max_input_tokens: number\n  training_data_date: string | null\n  model_family: string\n  evaluation: string\n  notes: string\n}\n\nexport type Category = {\n  name: string\n  slug: string\n  description_html: string\n}\n\nexport type SearchResults = {\n  results: Listing[]\n  total: number\n  totalPages: number\n}\n\nexport type Screenshot = {\n  id: number\n  src: string\n  caption?: string\n  alt_text?: string\n}\n\nexport type PlanInfo = {\n  plans: Plan[]\n  is_user_billed_monthly: boolean\n  selected_plan_id?: string\n  is_regular_emu_user: boolean\n  emu_owner_but_not_admin: boolean\n  can_sign_end_user_agreement: boolean\n  end_user_agreement?: {html: string; id: number; name: string; user_signed_at?: string; version: string}\n  order_preview?: {quantity?: number}\n  selected_account?: string\n  organizations: Array<{display_login: string; has_extensibility_access: boolean; image?: string}>\n  is_buyable: boolean\n  subscription_item: {on_free_trial?: boolean}\n  any_account_eligible_for_free_trial: boolean\n  free_trial_length: string\n  viewer_free_trial_days_left?: number\n  free_trials_used: boolean\n  installation_url_requirement_met: boolean\n  user_can_edit_listing: boolean\n  listing_by_github: boolean\n  is_logged_in: boolean\n  support_email?: string\n  viewer_has_purchased: boolean\n  any_orgs_purchased: boolean\n  viewer_billed_organizations: string[]\n  viewer_has_purchased_for_all_organizations: boolean\n  installed_for_viewer: boolean\n  plan_id_by_login: Record<string, string>\n  current_user?: {display_login: string; has_extensibility_access: boolean; image?: string}\n}\n\nexport type Plan = {\n  id: string\n  name: string\n  description: string\n  yearly_price_in_cents: number\n  monthly_price_in_cents: number\n  per_unit: boolean\n  unit_name?: string\n  is_paid: boolean\n  has_free_trial: boolean\n  price: string\n  direct_billing: boolean\n  for_organizations_only: boolean\n  for_users_only: boolean\n  bullets: string[]\n}\n\nexport type FeaturedCustomer = {\n  displayLogin: string\n  image?: string\n}\n\nexport type PlaygroundAPIMessage = {\n  role: PlaygroundAPIMessageAuthor\n  content: string\n}\n\nexport const PlaygroundAPIMessageAuthorValues = ['user', 'system', 'assistant', 'error'] as const\nexport type PlaygroundAPIMessageAuthor = (typeof PlaygroundAPIMessageAuthorValues)[number]\n","import {CopyToClipboardButton} from '@github-ui/copy-to-clipboard'\nimport React, {lazy, useCallback, useEffect, useState} from 'react'\nimport {usePlaygroundManager, usePlaygroundState} from '../../../utils/playground-manager'\nimport {Box, Button, IconButton} from '@primer/react'\nimport type {PlaygroundMessage} from '../../../utils/model-client'\nimport {PlaygroundChatInput} from './PlaygroundChatInput'\nimport {AlertIcon, PencilIcon} from '@primer/octicons-react'\nimport {PlaygroundAPIMessageAuthorValues} from '../../../../types'\nimport {ModelLegalTerms} from './GettingStartedDialog/ModelLegalTerms'\nconst CodeMirror = lazy(() => import('@github-ui/code-mirror'))\n\nexport type PlaygroundJSONProps = {\n  setToolbarContent: React.Dispatch<React.SetStateAction<React.ReactNode>>\n  setFullWidthToolbarContent: React.Dispatch<React.SetStateAction<React.ReactNode>>\n}\n\nfunction validateJSONAsPlaygroundMessages(input: string): PlaygroundMessage[] | null {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function isPlaygroundMessage(obj: any): obj is PlaygroundMessage {\n    return (\n      typeof obj === 'object' &&\n      obj !== null &&\n      typeof obj.timestamp === 'string' &&\n      typeof obj.role === 'string' &&\n      typeof obj.message === 'string' &&\n      PlaygroundAPIMessageAuthorValues.includes(obj.role)\n    )\n  }\n\n  try {\n    const parsed = JSON.parse(input)\n    if (Array.isArray(parsed) && parsed.every(isPlaygroundMessage)) {\n      let parsedAndValidated = parsed\n      // Make sure dates are parsed\n      parsedAndValidated = parsedAndValidated.map(message => ({\n        ...message,\n        timestamp: new Date(message.timestamp),\n      }))\n      return parsedAndValidated\n    }\n    return null\n  } catch (e) {\n    return null\n  }\n}\n\nexport function PlaygroundJSON(props: PlaygroundJSONProps) {\n  const state = usePlaygroundState()\n  const [initialContent, setInitialContent] = useState<string>(JSON.stringify(state.messages, null, 2))\n  const [content, setContent] = useState<string>(initialContent)\n  const [isValidJSON, setIsValidJSON] = useState<boolean>(true)\n  const [editMode, setEditMode] = useState<boolean>(false)\n\n  const manager = usePlaygroundManager()\n\n  const validateJSON = (input: string): boolean => {\n    try {\n      return validateJSONAsPlaygroundMessages(input) !== null\n    } catch (e) {\n      return false\n    }\n  }\n\n  const onChange = (input: string) => {\n    setContent(input)\n    setIsValidJSON(validateJSON(input))\n  }\n\n  const renderToolbar = useCallback(() => {\n    const applyInput = (input: string) => {\n      if (!validateJSON(input)) {\n        return\n      }\n\n      const parsed = validateJSONAsPlaygroundMessages(input)\n      if (parsed) {\n        manager.setMessages(parsed)\n        setInitialContent(input)\n        setEditMode(false)\n      }\n    }\n\n    const resetInput = () => {\n      setContent(initialContent)\n      setIsValidJSON(true)\n      setEditMode(false)\n    }\n\n    if (!editMode) {\n      return (\n        <>\n          <IconButton\n            sx={{display: ['flex', 'none', 'none']}}\n            size=\"small\"\n            icon={PencilIcon}\n            aria-label=\"Edit JSON\"\n            onClick={() => {\n              manager.stopStreaming()\n              setEditMode(true)\n            }}\n          />\n          <Button\n            sx={{display: ['none', 'flex', 'flex']}}\n            onClick={() => {\n              manager.stopStreaming()\n              setEditMode(true)\n            }}\n            size=\"small\"\n          >\n            Edit\n          </Button>\n        </>\n      )\n    } else {\n      return (\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'flex-end',\n            alignItems: 'center',\n            width: '100%',\n            gap: 2,\n          }}\n        >\n          <>\n            <span className=\"color-fg-danger\">\n              {!isValidJSON && (\n                <>\n                  <AlertIcon aria-hidden /> Invalid JSON or value\n                </>\n              )}\n            </span>\n          </>\n          <>\n            <Button onClick={() => resetInput()} size=\"small\">\n              Cancel\n            </Button>\n            <Button\n              variant=\"primary\"\n              onClick={() => applyInput(content)}\n              size=\"small\"\n              disabled={content === initialContent || !isValidJSON}\n            >\n              Apply changes\n            </Button>\n          </>\n        </Box>\n      )\n    }\n  }, [content, editMode, initialContent, isValidJSON, manager])\n\n  useEffect(() => {\n    props.setFullWidthToolbarContent(editMode ? renderToolbar() : null)\n    props.setToolbarContent(!editMode ? renderToolbar() : null)\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [content, initialContent, isValidJSON, editMode])\n\n  // Important if last session is restored by the user\n  useEffect(() => {\n    const _content = JSON.stringify(state.messages, null, 2)\n    setInitialContent(_content)\n    setContent(_content)\n  }, [state])\n\n  return (\n    <div className=\"d-flex position-relative flex-column overflow-auto flex-1\">\n      <CopyToClipboardButton\n        className=\"position-absolute\"\n        sx={{right: '8px', top: '8px', zIndex: 10}}\n        textToCopy={initialContent}\n        ariaLabel={'Copy to clipboard'}\n      />\n\n      <div className=\"height-full overflow-auto\">\n        <React.Suspense fallback={<></>}>\n          <CodeMirror\n            fileName={`document.json`}\n            value={content}\n            ariaLabelledBy={''}\n            height=\"100%\"\n            spacing={{\n              indentUnit: 2,\n              indentWithTabs: false,\n              lineWrapping: true,\n            }}\n            hideHelpUntilFocus={true}\n            onChange={onChange}\n            isReadOnly={!editMode || state.isLoading}\n          />\n        </React.Suspense>\n      </div>\n\n      {!editMode && (\n        <div className=\"ml-3 mb-3\">\n          <PlaygroundChatInput />\n          <div className=\"pt-3 pb-2 d-flex flex-justify-center\">\n            <ModelLegalTerms />\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\ntry{ CodeMirror.displayName ||= 'CodeMirror' } catch {}\ntry{ PlaygroundJSON.displayName ||= 'PlaygroundJSON' } catch {}","// extracted by mini-css-extract-plugin\nexport default {\"logo-container\":\"models-module__logo-container--xBMtP\",\"logo-svg\":\"models-module__logo-svg--oC8to\"};","import {Checkbox, FormControl, TextInput, Textarea} from '@primer/react'\nimport type {ModelInputSchemaParameter} from '../../../../types'\nimport {useCallback, useEffect, useRef, useState} from 'react'\n\nimport styles from '../../../../models.module.css'\n\nexport function PlaygroundInput({\n  parameter,\n  value,\n  onChange,\n}: {\n  parameter: ModelInputSchemaParameter\n  value: string | number | string[] | boolean\n  onChange: (key: string, value: string | number | boolean | string[]) => void\n}) {\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n  const [height, setHeight] = useState<string>('auto')\n\n  const checkBounds = (val: number, min?: number, max?: number): number => {\n    if (max !== undefined && val > max) {\n      return max\n    }\n    if (min !== undefined && val < min) {\n      return min\n    }\n    return val\n  }\n\n  const validateNumber = useCallback(\n    (val: string | number | boolean | string[]): number | null => {\n      const number =\n        parameter.type === 'number'\n          ? parseFloat(val as string)\n          : parameter.type === 'integer'\n            ? parseInt(val as string)\n            : null\n\n      if (number == null) {\n        return null\n      }\n      return checkBounds(number, parameter.min, parameter.max)\n    },\n    [parameter.max, parameter.min, parameter.type],\n  )\n\n  const handleBlur = () => {\n    const validatedNumber = validateNumber(value)\n    validatedNumber !== null && onChange(parameter.key, validatedNumber)\n  }\n\n  const handleRangeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      const validatedNumber = validateNumber(event.target.value)\n      validatedNumber !== null && onChange(parameter.key, validatedNumber)\n    },\n    [onChange, parameter.key, validateNumber],\n  )\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      let newValue: string | number | boolean | string[] = event.target.value\n\n      if (event.target.type === 'checkbox') {\n        if (event.target instanceof HTMLInputElement) {\n          newValue = event.target.checked\n        }\n      }\n\n      if (parameter.type === 'array') {\n        newValue = event.target.value.split('\\n')\n      }\n\n      onChange(parameter.key, newValue)\n    },\n    [onChange, parameter.key, parameter.type],\n  )\n\n  useEffect(() => {\n    const current = textAreaRef.current\n    if (!current) return\n    current.style.height = 'auto'\n    current.style.height = current.scrollHeight > 72 ? '72px' : `${current.scrollHeight}px`\n    setHeight(current.style.height)\n  }, [value])\n\n  const renderInput = (param: ModelInputSchemaParameter): JSX.Element | null => {\n    switch (param.type) {\n      case 'string':\n        return (\n          <TextInput type=\"text\" value={value as string} block={true} onChange={handleChange} name={parameter.key} />\n        )\n      case 'number':\n      case 'integer':\n        return (\n          <div className=\"width-full d-flex gap-3 flex-items-center\">\n            <TextInput\n              name={parameter.key}\n              id={parameter.key}\n              type=\"number\"\n              max={parameter.max}\n              min={parameter.min}\n              step={parameter.max === 1 ? 0.01 : 1}\n              value={value as string}\n              block={true}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              sx={{width: '30%'}}\n            />\n            {}\n            {parameter.max !== undefined &&\n              parameter.min !== undefined && ( // If min AND max is unknown, do not show a slider\n                <>\n                  <input\n                    id={`${parameter.key}-range-input`}\n                    name={`${parameter.key}-range-input`}\n                    type=\"range\"\n                    value={value as number}\n                    min={parameter.min}\n                    max={parameter.max}\n                    step={parameter.max === 1 ? 0.01 : 1}\n                    onChange={handleRangeChange}\n                    // @ts-expect-error this style is invalid\n                    className={`flex-1 ${styles['range-input']}`}\n                  />\n                  <label htmlFor={`${parameter.key}-range-input`} className=\"sr-only\">\n                    {parameter.key}\n                  </label>\n                </>\n              )}\n          </div>\n        )\n\n      case 'array':\n        return (\n          <Textarea\n            ref={textAreaRef}\n            name={parameter.key}\n            value={(value as string[]).join('\\n')}\n            block={true}\n            rows={1}\n            resize=\"vertical\"\n            onChange={handleChange}\n            style={{height}}\n          />\n        )\n      case 'boolean':\n        return <Checkbox name={parameter.key} checked={value as boolean} onChange={handleChange} />\n    }\n  }\n\n  return (\n    <FormControl key={parameter.key} required={parameter.type === 'string' && parameter.required} id={parameter.key}>\n      <FormControl.Label htmlFor={parameter.key}>\n        {parameter.friendlyName ? parameter.friendlyName : parameter.key}\n      </FormControl.Label>\n      {parameter.description && <FormControl.Caption>{parameter.description}</FormControl.Caption>}\n      {renderInput(parameter)}\n    </FormControl>\n  )\n}\n\ntry{ PlaygroundInput.displayName ||= 'PlaygroundInput' } catch {}","import {\n  Box,\n  SegmentedControl,\n  FormControl,\n  IconButton,\n  Textarea,\n  Text,\n  ActionList,\n  useResponsiveValue,\n} from '@primer/react'\nimport {XIcon, SidebarCollapseIcon, ArrowUpRightIcon, SyncIcon} from '@primer/octicons-react'\nimport {Tooltip} from '@primer/react/next'\nimport {Stack, Dialog} from '@primer/react/drafts'\nimport {useCallback, useEffect, useRef, useState} from 'react'\nimport {PlaygroundInput} from './PlaygroundInput'\nimport SidebarInfo from './SidebarInfo'\nimport {usePlaygroundState, usePlaygroundManager, SidebarSelectionOptions} from '../../../utils/playground-manager'\nimport {ModelUrlHelper} from '../../../utils/model-url-helper'\n\nexport function PlaygroundInputs() {\n  const isMobile = useResponsiveValue({narrow: true}, false)\n  const manager = usePlaygroundManager()\n  const state = usePlaygroundState()\n\n  const resetLabel = 'Reset to default inputs'\n\n  const resetAllInputs = () => {\n    manager.setDefaultParameters(manager.modelInputSchema.parameters)\n    manager.setParametersHasChanges(false)\n    manager.setSystemPrompt('')\n  }\n\n  if (isMobile) {\n    return (\n      <>\n        {state.showParametersOnMobile && isMobile && (\n          <Dialog\n            position={{narrow: 'fullscreen', regular: 'center'}}\n            renderHeader={() => {\n              return (\n                <Box\n                  as=\"header\"\n                  sx={{\n                    borderBottomColor: 'border.default',\n                    borderBottomStyle: 'solid',\n                    borderBottomWidth: 1,\n                    py: 2,\n                    pr: 2,\n                    pl: 3,\n                    alignItems: 'center',\n                    display: 'flex',\n                  }}\n                >\n                  <Text as=\"h1\" sx={{fontSize: 1, fontWeight: 'bold', flex: 1}}>\n                    {state.tab === SidebarSelectionOptions.DETAILS ? 'Info' : 'Parameters'}\n                  </Text>\n                  <Box sx={{display: 'flex'}}>\n                    {state.tab === SidebarSelectionOptions.PARAMETERS && state.parametersHasChanges && (\n                      <Tooltip text={resetLabel}>\n                        <IconButton\n                          icon={SyncIcon}\n                          as=\"button\"\n                          variant=\"invisible\"\n                          aria-label={resetLabel}\n                          onClick={resetAllInputs}\n                        />\n                      </Tooltip>\n                    )}\n                    <Tooltip text=\"Close\">\n                      <IconButton\n                        icon={XIcon}\n                        as=\"button\"\n                        variant=\"invisible\"\n                        aria-label=\"Close\"\n                        onClick={() => manager.setShowParametersOnMobile(false)}\n                      />\n                    </Tooltip>\n                  </Box>\n                </Box>\n              )\n            }}\n            onClose={() => manager.setShowParametersOnMobile(false)}\n          >\n            <Content activeTab={state.tab} />\n          </Dialog>\n        )}\n      </>\n    )\n  }\n\n  const smallSizeForSegmentControl = {\n    height: '28px',\n    fontSize: 1,\n  }\n\n  return (\n    <Box\n      sx={{\n        height: '100%',\n        flexDirection: 'column',\n        width: '30%',\n        maxWidth: '480px',\n        minWidth: '280px',\n        overflow: 'auto',\n        display: state.showParameters ? ['none', 'none', 'flex'] : 'none',\n      }}\n      className=\"border-top border-md-top-0 border-md-left\"\n    >\n      <div\n        className=\"d-flex flex-justify-between position-sticky top-0 p-2 border-bottom bgColor-muted flex-items-center\"\n        style={{zIndex: 1}}\n      >\n        <div className=\"flex-1 pr-2\">\n          <SegmentedControl\n            sx={smallSizeForSegmentControl}\n            size=\"small\"\n            onChange={selectedIndex => {\n              manager.setTab(selectedIndex)\n            }}\n            fullWidth={{narrow: true, regular: false}}\n            aria-label=\"Mode\"\n          >\n            <SegmentedControl.Button selected={state.tab === SidebarSelectionOptions.PARAMETERS}>\n              Parameters\n            </SegmentedControl.Button>\n            <SegmentedControl.Button selected={state.tab === SidebarSelectionOptions.DETAILS}>\n              Details\n            </SegmentedControl.Button>\n          </SegmentedControl>\n        </div>\n        <div>\n          {state.tab === SidebarSelectionOptions.PARAMETERS && state.parametersHasChanges && (\n            <Tooltip text={resetLabel}>\n              <IconButton size=\"small\" icon={SyncIcon} as=\"button\" aria-label={resetLabel} onClick={resetAllInputs} />\n            </Tooltip>\n          )}\n          <IconButton\n            size=\"small\"\n            icon={SidebarCollapseIcon}\n            aria-label=\"Hide parameters setting\"\n            onClick={() => {\n              manager.setShowParameters(false)\n            }}\n            className=\"ml-2\"\n          />\n        </div>\n      </div>\n\n      <Content activeTab={state.tab} />\n    </Box>\n  )\n}\n\nfunction Content({activeTab}: {activeTab: number}) {\n  const manager = usePlaygroundManager()\n  const state = usePlaygroundState()\n  const modelInputSchema = manager.modelInputSchema\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n  const [height, setHeight] = useState<string>('auto')\n\n  const handleSystemPromptChange = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n      manager.setSystemPrompt(event.target.value)\n      manager.setParametersHasChanges(true)\n    },\n    [manager],\n  )\n\n  const handleInputChange = (key: string, value: string | number | boolean | string[]) => {\n    manager.handleRequestParameterChange(state, key, value)\n    manager.setParametersHasChanges(true)\n  }\n\n  useEffect(() => {\n    const current = textAreaRef.current\n    if (!current) return\n    current.style.height = 'auto'\n    current.style.height = current.scrollHeight > 72 ? '72px' : `${current.scrollHeight}px`\n    setHeight(current.style.height)\n  }, [state.systemPrompt])\n\n  return (\n    <>\n      {activeTab === SidebarSelectionOptions.DETAILS && (\n        <div className=\"\">\n          <div className=\"p-0 pb-6 p-md-3 border-bottom\">\n            <SidebarInfo model={manager.model} />\n          </div>\n          <div className=\"p-0 pt-2 p-md-2\">\n            <ActionList.Item as=\"a\" href={ModelUrlHelper.modelUrl(manager.model)}>\n              <ArrowUpRightIcon className=\"mr-2 fgColor-muted\" />\n              Model details page\n            </ActionList.Item>\n          </div>\n        </div>\n      )}\n\n      {activeTab === SidebarSelectionOptions.PARAMETERS && (\n        <Stack gap=\"normal\" className=\"p-0 p-md-3\">\n          {modelInputSchema.capabilities.systemPrompt && (\n            <FormControl>\n              <FormControl.Label>System prompt</FormControl.Label>\n              <FormControl.Caption>Prompt the system</FormControl.Caption>\n              <Textarea\n                ref={textAreaRef}\n                value={state.systemPrompt}\n                block={true}\n                resize=\"vertical\"\n                rows={1}\n                onChange={handleSystemPromptChange}\n                name=\"systemPrompt\"\n                style={{height}}\n              />\n            </FormControl>\n          )}\n          {/* For each of a models inputs, display form components */}\n          {modelInputSchema.parameters.map(parameter => (\n            <PlaygroundInput\n              key={parameter.key}\n              value={state.parameters[parameter.key] ?? ''}\n              parameter={parameter}\n              onChange={handleInputChange}\n            />\n          ))}\n        </Stack>\n      )}\n    </>\n  )\n}\n\ntry{ PlaygroundInputs.displayName ||= 'PlaygroundInputs' } catch {}\ntry{ Content.displayName ||= 'Content' } catch {}","import {PlaygroundChat} from './PlaygroundChat'\nimport {PlaygroundInputs} from './PlaygroundInputs'\nimport type {ShowModelPayload} from '../../../../types'\nimport {useEffect} from 'react'\nimport {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport {usePlaygroundManager, usePlaygroundState} from '../../../utils/playground-manager'\n\nexport function Playground() {\n  const {miniplaygroundIcebreaker} = useRoutePayload<ShowModelPayload>()\n  const manager = usePlaygroundManager()\n  const playgroundState = usePlaygroundState()\n\n  useEffect(() => {\n    manager.checkForIcebreaker(miniplaygroundIcebreaker, playgroundState)\n  }, [manager, miniplaygroundIcebreaker, playgroundState])\n\n  return (\n    // I have no idea why but the height needs to be a fixed value for this div to fill but not exceed the height\n    // of the parent container. It doesnt matter what the value is, as long as its here and its fixed.\n    <div className=\"flex-1 d-flex flex-column flex-md-row rounded-2 border overflow-hidden\" style={{height: '100px'}}>\n      <PlaygroundChat />\n      <PlaygroundInputs />\n    </div>\n  )\n}\n\ntry{ Playground.displayName ||= 'Playground' } catch {}","import {useMemo} from 'react'\nimport useColorModes from '@github-ui/react-core/use-color-modes'\n\nfunction PlaygroundWaitingListAsset() {\n  const colorMode = useColorModes()\n\n  const lightIllustrationPath = '/images/modules/marketplace/models/waitlist-light_1x.png'\n  const lightIllustrationPath2x = '/images/modules/marketplace/models/waitlist-light_2x.png'\n  const darkIllustrationPath = '/images/modules/marketplace/models/waitlist-dark_1x.png'\n  const darkIllustrationPath2x = '/images/modules/marketplace/models/waitlist-dark_2x.png'\n\n  const colorModeIllustration = useMemo(() => {\n    switch (colorMode.colorMode) {\n      case 'night':\n        return darkIllustrationPath\n      case 'day':\n      default:\n        return lightIllustrationPath\n    }\n  }, [colorMode])\n\n  const colorModeIllustration2x = useMemo(() => {\n    switch (colorMode.colorMode) {\n      case 'night':\n        return darkIllustrationPath2x\n      case 'day':\n      default:\n        return lightIllustrationPath2x\n    }\n  }, [colorMode])\n\n  return (\n    <img\n      src={colorModeIllustration}\n      srcSet={`${colorModeIllustration} 1x, ${colorModeIllustration2x} 2x`}\n      alt=\"A grid showing different company logos being connected by lines\"\n      width=\"100%\"\n    />\n  )\n}\n\nexport default PlaygroundWaitingListAsset\n\ntry{ PlaygroundWaitingListAsset.displayName ||= 'PlaygroundWaitingListAsset' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\nimport type {GettingStartedPayload} from './components/GettingStartedDialog/types'\nimport {Box, Button, Text} from '@primer/react'\nimport styled from 'styled-components'\n\nimport {ModelLayout} from './components/GettingStartedDialog/ModelLayout'\nimport {Playground as PlaygroundComponent} from './components/Playground'\nimport PlaygroundWaitingListAsset from './components/PlaygroundWaitingListAsset'\n\nimport {useFeatureFlag} from '@github-ui/react-core/use-feature-flag'\nimport {\n  PlaygroundStateContext,\n  PlaygroundManagerContext,\n  PlaygroundStateDispatcherContext,\n  PlaygroundManager,\n  initialPlaygroundState,\n  tasksReducer,\n} from '../../utils/playground-manager'\nimport {useReducer, useMemo, useEffect} from 'react'\n\nexport function ModelsPlaygroundRoute() {\n  const {model, modelInputSchema, on_waitlist, playgroundUrl, gettingStarted} = useRoutePayload<GettingStartedPayload>()\n  const playgroundEnabled = useFeatureFlag('project_neutron_playground')\n\n  const [playgroundState, playgroundDispatch] = useReducer(tasksReducer, initialPlaygroundState)\n\n  // Make sure we only have one manager\n  const manager = useMemo(\n    () => new PlaygroundManager(playgroundDispatch, model, playgroundUrl, modelInputSchema, gettingStarted),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [], // Do not add any dependencies here - the manager is designed to only exist once\n  )\n\n  // Make sure to update the manager if the current model changes\n  useEffect(() => {\n    manager.setModel(model, playgroundUrl, modelInputSchema, gettingStarted)\n  }, [model, playgroundUrl, modelInputSchema, manager, gettingStarted])\n\n  if (playgroundEnabled) {\n    return (\n      <PlaygroundStateContext.Provider value={playgroundState}>\n        <PlaygroundManagerContext.Provider value={manager}>\n          <PlaygroundStateDispatcherContext.Provider value={playgroundDispatch}>\n            <ModelLayout selectTab={null} activeTab=\"playground\">\n              <PlaygroundComponent />\n            </ModelLayout>\n          </PlaygroundStateDispatcherContext.Provider>\n        </PlaygroundManagerContext.Provider>\n      </PlaygroundStateContext.Provider>\n    )\n  }\n  return (\n    <>\n      <Box\n        sx={{\n          flex: 1,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          flexDirection: 'column',\n          height: 'calc(100dvh - 64px)',\n        }}\n      >\n        <Box sx={{width: '100%', zIndex: 1, pb: 7, display: 'flex', justifyContent: 'center'}}>\n          <Box\n            sx={{\n              textAlign: 'center',\n              display: 'flex',\n              flexDirection: 'column',\n              zIndex: 1,\n              gap: 2,\n              justifyContent: 'center',\n              minHeight: 600,\n            }}\n          >\n            <Text as=\"h2\" sx={{fontSize: [2, 3, 3]}}>\n              Get early access to our playground for models\n            </Text>\n            <Text sx={{color: 'fg.muted'}}>\n              {on_waitlist\n                ? \"You're already on the waitlist! We'll send you an email once your access is granted\"\n                : 'Join our limited public beta waiting list today and be among the first to try out an easy way to test models'}\n            </Text>\n            {!on_waitlist && (\n              <Box sx={{pt: 3}}>\n                <Button variant=\"primary\" as=\"a\" href=\"/marketplace/models/waitlist\">\n                  Join the waitlist\n                </Button>\n              </Box>\n            )}\n          </Box>\n          <HeroImageHolder\n            sx={{\n              position: 'absolute',\n              left: 0,\n              bottom: 0,\n              right: 0,\n              height: '100%',\n            }}\n          >\n            <Box\n              sx={{\n                position: 'relative',\n                width: '100%',\n                height: '100%',\n              }}\n            >\n              <Box\n                sx={{\n                  position: 'absolute',\n                  bottom: 0,\n                  left: '50%',\n                  marginLeft: -720,\n                  overflow: 'hidden',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  justifyContent: 'flex-end',\n                  top: 0,\n                  right: 0,\n                  img: {\n                    width: 1440,\n                  },\n                }}\n              >\n                <PlaygroundWaitingListAsset />\n              </Box>\n            </Box>\n          </HeroImageHolder>\n        </Box>\n      </Box>\n    </>\n  )\n}\n\nconst HeroImageHolder = styled(Box)`\n  /* stylelint-disable-next-line primer/spacing */\n  top: 200px;\n  pointer-events: none;\n\n  @media (min-height: 500px) {\n    /* stylelint-disable-next-line primer/spacing */\n    top: 100px;\n  }\n\n  @media (min-height: 600px) {\n    /* stylelint-disable-next-line primer/spacing */\n    top: 80px;\n  }\n\n  @media (min-height: 800px) {\n    /* stylelint-disable-next-line primer/spacing */\n    top: 0px;\n  }\n`\n\ntry{ ModelsPlaygroundRoute.displayName ||= 'ModelsPlaygroundRoute' } catch {}\ntry{ HeroImageHolder.displayName ||= 'HeroImageHolder' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport type {ShowModelPayload} from '../../../../types'\n\nimport {SafeHTMLBox} from '@github-ui/safe-html'\n\nexport function Evaluation() {\n  const {modelEvaluation} = useRoutePayload<ShowModelPayload>()\n\n  return <>{modelEvaluation && <SafeHTMLBox html={modelEvaluation} className=\"p-3\" />}</>\n}\n\ntry{ Evaluation.displayName ||= 'Evaluation' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport type {ShowModelPayload} from '../../../../types'\n\nimport {SafeHTMLBox} from '@github-ui/safe-html'\n\nexport function License() {\n  const {modelLicense} = useRoutePayload<ShowModelPayload>()\n\n  return <SafeHTMLBox className=\"p-3\" html={modelLicense} />\n}\n\ntry{ License.displayName ||= 'License' } catch {}","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nimport type {ShowModelPayload} from '../../../../types'\n\nimport {SafeHTMLBox} from '@github-ui/safe-html'\n\nexport function Transparency() {\n  const {modelTransparencyContent} = useRoutePayload<ShowModelPayload>()\n\n  return <SafeHTMLBox className=\"p-3\" html={modelTransparencyContent} />\n}\n\ntry{ Transparency.displayName ||= 'Transparency' } catch {}","import {useSearchParams} from '@github-ui/use-navigate'\nimport type React from 'react'\nimport {useEffect, useState} from 'react'\nimport {ModelLayout, type ModelLayoutTab} from '../playground/components/GettingStartedDialog/ModelLayout'\nimport {Evaluation} from './components/Evaluation'\nimport {ModelsPlaygroundRoute} from '../playground/ModelsPlaygroundRoute'\nimport {Readme} from './components/Readme'\nimport {License} from './components/License'\nimport {Transparency} from './components/Transparency'\n\nexport function ModelsShowRoute() {\n  const [searchParams] = useSearchParams()\n  const selectedTabFromUrl = (searchParams.get('tab') || 'readme') as ModelLayoutTab\n  const [selectedTab, setSelectedTab] = useState<ModelLayoutTab>(selectedTabFromUrl)\n\n  const selectTab = (\n    tab: ModelLayoutTab,\n    e: React.KeyboardEvent<HTMLAnchorElement> | React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n  ) => {\n    const url = new URL('', window.location.href)\n    url.searchParams.set('tab', tab)\n    history.pushState(null, '', url)\n    setSelectedTab(tab)\n    e.preventDefault()\n  }\n\n  // When using browser back/forward, set state from popstate\n  useEffect(() => {\n    function handlePopState() {\n      setSelectedTab((searchParams.get('tab') || 'readme') as ModelLayoutTab)\n    }\n\n    window.addEventListener('popstate', handlePopState)\n\n    return () => {\n      window.removeEventListener('popstate', handlePopState)\n    }\n  }, [searchParams])\n\n  const renderTab = (tab: ModelLayoutTab): JSX.Element => {\n    switch (tab) {\n      case 'readme':\n        return <Readme />\n      case 'evaluation':\n        return <Evaluation />\n      case 'license':\n        return <License />\n      case 'transparency':\n        return <Transparency />\n      case 'playground':\n        return <ModelsPlaygroundRoute />\n    }\n  }\n\n  return (\n    <ModelLayout activeTab={selectedTab} selectTab={selectTab}>\n      {renderTab(selectedTab)}\n    </ModelLayout>\n  )\n}\n\ntry{ ModelsShowRoute.displayName ||= 'ModelsShowRoute' } catch {}","import {App} from './App'\nimport {Index} from './routes/Index'\nimport {ShowApp} from './routes/ShowApp'\nimport {ShowAction} from './routes/ShowAction'\nimport {ModelsIndexRoute} from './models/routes/index/ModelsIndexRoute'\nimport {ModelsPlaygroundRoute} from './models/routes/playground/ModelsPlaygroundRoute'\nimport {registerReactAppFactory} from '@github-ui/react-core/register-app'\nimport {jsonRoute} from '@github-ui/react-core/json-route'\nimport {ModelsShowRoute} from './models/routes/show/ModelsShowRoute'\n\nregisterReactAppFactory('marketplace-react', () => ({\n  App,\n  routes: [\n    jsonRoute({path: '/marketplace', Component: Index}),\n    jsonRoute({path: '/marketplace/:slug', Component: ShowApp}),\n    jsonRoute({path: '/marketplace/actions/:slug', Component: ShowAction}),\n    jsonRoute({path: '/marketplace/models', Component: ModelsIndexRoute}),\n    jsonRoute({path: '/marketplace/models/:registry/:model', Component: ModelsShowRoute}),\n    jsonRoute({path: '/marketplace/models/:registry/:model/playground', Component: ModelsPlaygroundRoute}),\n    jsonRoute({path: '/marketplace/models/:registry/:model/playground/code', Component: ModelsPlaygroundRoute}),\n    jsonRoute({path: '/marketplace/models/:registry/:model/playground/json', Component: ModelsPlaygroundRoute}),\n  ],\n}))\n","import {useRoutePayload} from '@github-ui/react-core/use-route-payload'\n\nexport interface CSRFTokens {\n  csrf_tokens?: {\n    [path: string]:\n      | {\n          [method: string]: string | undefined\n        }\n      | undefined\n  }\n}\n\nexport function useCSRFToken(path: string, method: string): string | undefined {\n  const {csrf_tokens} = useRoutePayload<CSRFTokens>()\n  return csrf_tokens?.[path]?.[method]\n}\n","import {useEffect} from 'react'\n\ntype UseLinkInterceptionSettings = {\n  htmlContainer?: HTMLElement\n  onLinkClick?: (event: MouseEvent) => void\n  openLinksInNewTab: boolean\n}\n\n/**\n * Updates all links in the container to open a new tab and call `onLinkClick` on click.\n */\nexport const useLinkInterception = ({htmlContainer, onLinkClick, openLinksInNewTab}: UseLinkInterceptionSettings) => {\n  useEffect(() => {\n    const clickHandler = (event: MouseEvent) => {\n      const link = (event.target as Element).closest('a')\n      if (!link) return\n\n      onLinkClick?.(event)\n\n      if (!event.defaultPrevented && openLinksInNewTab && link.href) {\n        window.open(link.href, '_blank', 'noopener noreferrer')\n        event.preventDefault()\n      }\n    }\n\n    if (!htmlContainer) return\n\n    htmlContainer.addEventListener('click', clickHandler)\n\n    return () => {\n      htmlContainer.removeEventListener('click', clickHandler)\n    }\n  }, [htmlContainer, onLinkClick, openLinksInNewTab])\n}\n","import React, {startTransition} from 'react'\nimport {\n  createSearchParams,\n  matchRoutes,\n  resolvePath,\n  useLocation,\n  useNavigate as useReactRouterNavigate,\n  useSearchParams as useReactRouterSearchParams,\n  type NavigateOptions,\n  type To,\n  type URLSearchParamsInit,\n} from 'react-router-dom'\n\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {AppContext} from '@github-ui/react-core/app-context'\nimport {startSoftNav} from '@github-ui/soft-nav/state'\nimport {PREVENT_AUTOFOCUS_KEY} from '@github-ui/react-core/prevent-autofocus'\n\nexport interface NavigateOptionsWithPreventAutofocus extends NavigateOptions {\n  preventAutofocus?: boolean\n}\n\nexport const useNavigate = (): ((to: To, options?: NavigateOptionsWithPreventAutofocus) => void) => {\n  const {routes, history} = React.useContext(AppContext)\n  const reactRouterNavigate = useReactRouterNavigate()\n  return React.useCallback(\n    (to, navigateOptions = {}) => {\n      const pathname = resolvePath(to).pathname\n      const isExternalToApp = !matchRoutes(routes, pathname)\n\n      if (isExternalToApp) {\n        const href = history.createHref(to)\n        ;(async () => {\n          const {softNavigate: turboSoftNavigate} = await import('@github-ui/soft-navigate')\n          turboSoftNavigate(href)\n        })()\n      } else {\n        if (!isHashNavigation(location.href, to.toString())) {\n          startSoftNav('react')\n        }\n        const {preventAutofocus, ...options} = navigateOptions\n        startTransition(() => {\n          reactRouterNavigate(\n            to,\n            preventAutofocus\n              ? {\n                  ...options,\n                  state: {\n                    [PREVENT_AUTOFOCUS_KEY]: true,\n                    ...options.state,\n                  },\n                }\n              : options,\n          )\n          const {turbo, ...state} = window.history.state\n          window.history.replaceState({...state, skipTurbo: true}, '', location.href)\n        })\n      }\n    },\n    [history, reactRouterNavigate, routes],\n  )\n}\n\n/**\n * An implementation of `useSearchParams` that mirrors `react-router-dom`'s `useSearchParams` hook\n * but utilizes `@github-ui/useNavigate` instead of `react-router` `useNavigate` to handle updates.\n */\nexport const useSearchParams = () => {\n  const [searchParams] = useReactRouterSearchParams()\n  const navigate = useNavigate()\n  const {pathname} = useLocation()\n\n  const setSearchParams = React.useCallback<\n    (\n      nextInit?: URLSearchParamsInit | ((prev: URLSearchParams) => URLSearchParamsInit),\n      navigateOpts?: NavigateOptionsWithPreventAutofocus,\n    ) => void\n  >(\n    (nextInit, navigateOptions = {}) => {\n      const newSearchParams = createSearchParams(typeof nextInit === 'function' ? nextInit(searchParams) : nextInit)\n      navigate(\n        {\n          pathname,\n          search: newSearchParams.toString(),\n        },\n        navigateOptions,\n      )\n    },\n    [searchParams, navigate, pathname],\n  )\n\n  return [searchParams, setSearchParams] as const\n}\n","import {useLayoutEffect} from '@github-ui/use-layout-effect'\nimport {useCallback, useEffect, useRef} from 'react'\n\nexport const callbackCancelledResult = Symbol('callbackCancelledResult')\nexport type CallbackCancelledResult = typeof callbackCancelledResult\n\n/**\n * Making async callbacks within React components is risky and error-prone. It's easy to\n * accidentally call an outdated reference to the function, or to call it after the\n * component has unmounted.\n *\n * This hook solves these problems by returning a function that is referentially constant\n * (it can never be outdated) and will have no effect if called after unmounting. If the\n * callback is cancelled due to calling after unmounting, the returned value will be\n * the unique symbol `callbackCancelledResult`.\n *\n * This callback is safe to call after `await`ing a `Promise` (or in the `.then` clause of a\n * `Promise`) and in `setTimeout`.\n *\n * @param fn the function to call\n * @param allowCallingAfterUnmount If the component is unmounted, should this be called?\n * This should typically be `false` but may be desirable in cases where user's changes would\n * not get saved unless the call is made, so the call can be made in the background after\n * unmount. If this is `true`, it's very important not to set state in this callback!\n */\nexport const useSafeAsyncCallback = <A extends unknown[], R>(\n  fn: (...args: A) => R,\n  allowCallingAfterUnmount = false,\n): ((...args: A) => R | CallbackCancelledResult) => {\n  const trackingRef = useRef(fn)\n  useLayoutEffect(() => {\n    trackingRef.current = fn\n  }, [fn])\n\n  const isMountedRef = useRef(false)\n  useEffect(() => {\n    isMountedRef.current = true\n    return () => {\n      if (!allowCallingAfterUnmount) isMountedRef.current = false\n    }\n  }, [allowCallingAfterUnmount])\n\n  return useCallback(\n    (...args: A) => (isMountedRef.current ? trackingRef.current(...args) : callbackCancelledResult),\n    [], // this dependency array must always be empty\n  )\n}\n","import {useAppPayload} from '@github-ui/react-core/use-app-payload'\n\nexport type UserHookPayload = {\n  current_user: {\n    avatarUrl: string\n    id: string\n    login: string\n    name: string\n    is_emu: boolean\n  }\n}\n\nexport const useUser = () => {\n  const payload = useAppPayload<UserHookPayload>()\n  const currentUser = payload?.current_user ?? null\n\n  return {currentUser}\n}\n","import {AlertFillIcon, CopilotIcon} from '@primer/octicons-react'\nimport {Box, Spinner} from '@primer/react'\nimport type React from 'react'\n\nexport interface CopilotBadgeProps {\n  isLoading?: boolean\n  isError?: boolean\n  hasUnreadMessages?: boolean\n  zIndex?: number\n  fill?: string\n  bg?: string\n  borderColor?: string\n  customIcon?: React.ReactNode\n}\n\nexport default function CopilotBadge(props: CopilotBadgeProps) {\n  const {isLoading, isError, hasUnreadMessages, zIndex, fill, bg, borderColor, customIcon} = props\n  return (\n    <Box\n      sx={{\n        borderRadius: '100%',\n        position: 'relative',\n        bg: bg ? bg : isError ? 'attention.subtle' : 'canvas.subtle',\n        width: 24,\n        height: 24,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid',\n        borderColor: borderColor ? borderColor : isError ? 'attention.muted' : 'border.default',\n        color: fill ? fill : isLoading ? 'accent.fg' : 'fg.default',\n        zIndex: zIndex ? zIndex : -1,\n        flexShrink: 0,\n      }}\n    >\n      <Box\n        sx={{\n          position: 'absolute',\n          display: isLoading ? 'flex' : 'none',\n        }}\n      >\n        <Spinner\n          size=\"medium\"\n          sx={{\n            width: 24,\n            height: 24,\n            color: 'accent.fg',\n          }}\n        />\n      </Box>\n      {hasUnreadMessages && (\n        <Box\n          className=\"unread-indicator\"\n          sx={{width: '10px', height: '10px', left: '16px', top: '-2px', borderColor: 'canvas.default'}}\n        />\n      )}\n      {customIcon ? customIcon : <CopilotIcon size={12} />}\n      {isError ? (\n        <Box\n          sx={{\n            position: 'absolute',\n            bottom: 0,\n            right: 0,\n            transform: 'translate(4px,4px)',\n            color: 'attention.fg',\n          }}\n        >\n          <AlertFillIcon size={12} />\n        </Box>\n      ) : null}\n    </Box>\n  )\n}\n\ntry{ CopilotBadge.displayName ||= 'CopilotBadge' } catch {}","import {MarkdownViewer} from '@github-ui/markdown-viewer'\nimport type {SafeHTMLString} from '@github-ui/safe-html'\nimport {useEffect, useMemo, useState} from 'react'\nimport {createPortal} from 'react-dom'\n\nexport const reactReplaceElementPrefix = `react-replace-${Math.floor(Math.random() * 1000000000)}`\n\nexport interface ReactReplaceBlock {\n  regex: RegExp\n  renderer: (match: string) => JSX.Element\n}\n\nexport interface ReactReplaceMatch {\n  id: string\n  componentType: string\n  matchedContent: string\n}\n\nexport interface ReactMarkdownRendererProps {\n  body: string | undefined\n  matches: ReactReplaceMatch[]\n  onLinkClick?: (event: MouseEvent) => void\n  reactReplaceBlocks: {[key: string]: ReactReplaceBlock}\n}\n\nexport function ReactMarkdownRenderer(props: ReactMarkdownRendererProps): JSX.Element {\n  const {body, matches, onLinkClick, reactReplaceBlocks} = props\n\n  const [rendered, setRendered] = useState<boolean>(false)\n\n  useEffect(() => {\n    setRendered(true)\n  }, [])\n\n  const markdownViewer = useMemo(() => {\n    return <MarkdownViewer onLinkClick={onLinkClick} verifiedHTML={body as SafeHTMLString} />\n  }, [body, onLinkClick])\n\n  return (\n    <>\n      {markdownViewer}\n      {rendered &&\n        matches.map(match => {\n          const domNode = document.getElementById(match.id)\n          if (domNode && reactReplaceBlocks[match.componentType]) {\n            return createPortal(reactReplaceBlocks[match.componentType]?.renderer(match.matchedContent), domNode)\n          }\n          return null\n        })}\n    </>\n  )\n}\n\nexport function replaceStringsWithReactContainers(\n  blocks: {[key: string]: ReactReplaceBlock},\n  messageId: string,\n  input?: string,\n): {output: string; matches: ReactReplaceMatch[]} {\n  if (!input) return {output: '', matches: []}\n  const matches: ReactReplaceMatch[] = []\n  let output = input\n  for (const [key, block] of Object.entries(blocks)) {\n    let match\n    while ((match = block.regex.exec(output)) !== null) {\n      const id = `${reactReplaceElementPrefix}-${matches.length}-${messageId}`\n      output = output.replace(\n        match[0],\n        // eslint-disable-next-line github/unescaped-html-literal\n        `<span id=\"${id}\"></span>`,\n      )\n      matches.push({id, componentType: key, matchedContent: match[0]})\n    }\n  }\n  return {output, matches}\n}\n\ntry{ ReactMarkdownRenderer.displayName ||= 'ReactMarkdownRenderer' } catch {}","import React from 'react'\n\nconst CurrentRepositoryContext = React.createContext({} as Repository)\n\nexport function CurrentRepositoryProvider({repository, children}: React.PropsWithChildren<{repository: Repository}>) {\n  return <CurrentRepositoryContext.Provider value={repository}> {children} </CurrentRepositoryContext.Provider>\n}\n\nexport function useCurrentRepository() {\n  return React.useContext(CurrentRepositoryContext)\n}\n\nexport interface Repository {\n  id: number\n  name: string\n  ownerLogin: string\n  defaultBranch: string\n  createdAt: string\n\n  /**\n   * Whether the user can push to this repository. It doesn't depend on the current ref.\n   */\n  currentUserCanPush: boolean\n  /**\n   * Indicates whether the repository is a fork.\n   */\n  isFork: boolean\n  /**\n   * Indicates whether the repository has files.\n   */\n  isEmpty: boolean\n  ownerAvatar: string\n  public: boolean\n  private: boolean\n  isOrgOwned: boolean\n}\n\nexport type RepositoryNWO = Pick<Repository, 'ownerLogin' | 'name'>\n\ntry{ CurrentRepositoryContext.displayName ||= 'CurrentRepositoryContext' } catch {}\ntry{ CurrentRepositoryProvider.displayName ||= 'CurrentRepositoryProvider' } catch {}","import {isMacOS} from '@github-ui/get-os'\nimport type {BetterSystemStyleObject} from '@primer/react/lib-esm/sx'\nimport {IconButton, type IconButtonProps, Tooltip, type TooltipProps} from '@primer/react'\nimport {forwardRef, useCallback} from 'react'\n\ntype IconButtonWithTooltipProps = Omit<IconButtonProps, 'aria-label' | 'aria-labelledby'> & {\n  /**\n   * The accessible button label and tooltip content. This will be the `aria-label` of the\n   * button, so it must be succinct and descriptive.\n   */\n  label: string\n  /**\n   * String describing the keyboard shortcut to activate this button. This will NOT actually\n   * bind the keyboard shortcut; it is only a description. Use the special modifier `Mod` for operating-system\n   * independent `Command`/`Control`.\n   *\n   * Examples of valid shortcuts include:\n   *  - `\"A\"` (use capital letters)\n   *  - `\"Shift+Space\"` (capitalize modifier keys)\n   *  - `\"Control+Alt+.\"` (don't abbreviate \"Ctrl\" or \"Cmd\")\n   *  - `\"Mod+Shift+&#39;\"` (use the special sequence \"Mod\" for dynamically\n   *    showing \"Command\" on Mac and \"Control\" on Windows/Unix)\n   *  - `\"Alt+Shift+P Mod+F\"` (use a space separated list if multiple apply)\n   */\n  shortcut?: string\n  tooltipDirection?: TooltipProps['direction']\n  /**\n   * Set to true to hide the tooltip.\n   */\n  hideTooltip?: boolean\n  // We don't have a way to override the tooltip content because the `Tooltip` component\n  // doesn't suport setting it as the aria-describedby target. So there would be no way\n  // for screen readers to access the content.\n}\n\nconst formatShortcutForDisplay = (shortcut: string) =>\n  ` ${shortcut\n    .split(' ')\n    .map(\n      s =>\n        `<${s\n          .replaceAll('Mod', isMacOS() ? 'Cmd' : 'Ctrl')\n          .replaceAll('Command', 'Cmd')\n          .replaceAll('Control', 'Ctrl')\n          .toLowerCase()}>`,\n    )\n    .join(' / ')}`\n\nconst formatShortcutForAttribute = (shortcut: string) =>\n  shortcut.replaceAll('{CMD_CTRL}', isMacOS() ? 'Command' : 'Control')\n\n/**\n * An `IconButton` where the label is accessible to mouse/keyboard users through a tooltip.\n * This is a temporary workaround until Primer adds a tooltip to the `IconButton` component by\n * default (see https://github.com/primer/react/issues/2008).\n */\nexport const IconButtonWithTooltip = forwardRef<HTMLButtonElement, IconButtonWithTooltipProps>(\n  ({label, hideTooltip, icon: Icon, shortcut, sx, tooltipDirection, ...props}, ref) => {\n    // The button gets an accessible label from aria-label, so the tooltip is only for the visible label.\n    // We don't want the button to have two labels read, so we give the tooltip the presentation role. It's\n    // definitely weird to have a presentation role in combination with aria-label, but the Tooltip component\n    // requires aria-label as its text so we don't have a choice there. It does seem to work well though.\n    const TooltippedIcon = useCallback(() => {\n      let tooltipSx: BetterSystemStyleObject = {display: 'flex'}\n      if (tooltipDirection?.includes('w')) {\n        tooltipSx = {...tooltipSx, pl: 2, ml: -2}\n      }\n      if (tooltipDirection?.includes('e')) {\n        tooltipSx = {...tooltipSx, pr: 2, mr: -2}\n      }\n      if (tooltipDirection?.includes('s')) {\n        tooltipSx = {...tooltipSx, pb: 2, mb: -2}\n      }\n      if (tooltipDirection?.includes('n') || !tooltipDirection) {\n        tooltipSx = {...tooltipSx, pt: 2, mt: -2}\n      }\n      return !hideTooltip ? (\n        <Tooltip\n          aria-label={`${label}${shortcut ? formatShortcutForDisplay(shortcut) : ''}`}\n          // Apply a known classname so the parent can control the visibility (can only be done through CSS)\n          className=\"icon-button-with-tooltip__tooltip\"\n          direction={tooltipDirection}\n          sx={tooltipSx}\n        >\n          <Icon />\n        </Tooltip>\n      ) : (\n        <Icon />\n      )\n    }, [hideTooltip, label, shortcut, tooltipDirection, Icon])\n\n    // The IconButton takes a props-less component as the icon. We can 'trick' it by giving it an argument-less\n    // function that returns a component (which is the same thing as a props-less component under the hood).\n    return (\n      // eslint-disable-next-line primer-react/a11y-remove-disable-tooltip -- We will come back to refactor this. Just adding the disable here to keep zero impact on the current behavior.\n      <IconButton\n        unsafeDisableTooltip={true}\n        ref={ref}\n        // The IconButton takes a props-less component as the icon. We can 'trick' it by giving it an argument-less\n        // function that returns a component (which is the same thing as a props-less component under the hood).\n        icon={TooltippedIcon}\n        aria-keyshortcuts={shortcut ? formatShortcutForAttribute(shortcut) : undefined}\n        sx={{\n          ...sx,\n          // Make the tooltip appear when the button is focused or hovered\n          // The hover part would work automatically if the tooltip was a wrapper around the button, but\n          // then the role=presentation on the tooltip would make the whole button invisible to screen readers\n          // Adapted from https://github.com/primer/react/blob/8ce0eb92d23e2d46760e8b77900e10e7c04da43e/src/Tooltip.tsx#L57-L70\n          '&:focus-visible, &:hover': {\n            '& .icon-button-with-tooltip__tooltip': {\n              '&::after, &::before': {\n                display: 'inline-block',\n                textDecoration: 'none',\n                animationName: 'tooltip-appear',\n                animationDuration: '0.1s',\n                animationFillMode: 'forwards',\n                animationTimingFunction: 'ease-in',\n              },\n            },\n          },\n\n          // override delay for focus\n          '&:hover .icon-button-with-tooltip__tooltip': {\n            '&::after, &::before': {\n              animationDelay: '0.4s',\n            },\n          },\n        }}\n        {...props}\n        aria-label={label}\n      />\n    )\n  },\n)\n\nIconButtonWithTooltip.displayName = 'IconButtonWithTooltip'\n\ntry{ TooltippedIcon.displayName ||= 'TooltippedIcon' } catch {}","import {useCallback, useMemo, useState, type MutableRefObject} from 'react'\nimport {Box, Spinner} from '@primer/react'\nimport {type SafeHTMLProps, type SafeHTMLString, SafeHTMLBox} from '@github-ui/safe-html'\n\nimport {useLinkInterception} from '@github-ui/use-link-interception'\nimport {useListInteraction} from './use-list-interaction'\n\ntype CoreMarkdownViewerProps = Omit<SafeHTMLProps, 'html'> & {\n  /** Show a loading spinner instead of content. */\n  loading?: boolean\n  /**\n   * Set the rendered HTML of the viewer. To prevent XSS, ensure that the source of this\n   * HTML is trusted!\n   */\n  verifiedHTML: SafeHTMLString\n  /**\n   * Called when the user clicks a link element. This can be used to intercept the click\n   * and provide custom routing. Note that this is a native HTML `MouseEvent` and not a\n   * `React.ClickEvent`.\n   */\n  onLinkClick?: (event: MouseEvent) => void\n  openLinksInNewTab?: boolean\n  teamHovercardsEnabled?: boolean\n  /**\n   * External ref for the container element.\n   */\n  containerRef?: MutableRefObject<HTMLElement | undefined>\n}\n\nexport type InteractiveMarkdownViewerProps = CoreMarkdownViewerProps & {\n  /**\n   * The markdown the HTML was rendered from. This is not used for viewing, only as a source\n   * for change events.\n   */\n  markdownValue: string\n  /**\n   * Called when the user interacts and updates the Markdown. The rendered Markdown is\n   * updated eagerly - if the request fails, a rejected Promise should be returned by\n   * this handler. In that case, the viewer will revert the visual change.\n   *\n   * If the change is handled by an async API request (as it typically will be in production\n   * code), the viewer should be `disabled` while the request is pending to avoid conflicts.\n   * To allow users to check multiple boxes rapidly, the API request should be debounced (an\n   * ideal debounce duration is about 1 second).\n   */\n  onChange: (markdown: string) => void | Promise<void>\n  /** Control whether interaction is disabled. */\n  disabled?: boolean\n}\n\ntype NoninteractiveMarkdownViewerProps = CoreMarkdownViewerProps & {\n  // This is externally useless, but internally it lets us use unpacking to get the props.\n  // If a prop was present only on one member of the type union, Typescript would treat it as\n  // though it doesn't exist at all until you discriminate which type the props are.\n  markdownValue?: undefined\n  onChange?: undefined\n  disabled?: undefined\n}\n\nexport type MarkdownViewerProps = NoninteractiveMarkdownViewerProps | InteractiveMarkdownViewerProps\n\nexport const MarkdownViewer = ({\n  verifiedHTML,\n  loading = false,\n  markdownValue = '',\n  onChange: externalOnChange,\n  disabled = false,\n  onLinkClick,\n  openLinksInNewTab = false,\n  teamHovercardsEnabled = false,\n  containerRef,\n}: MarkdownViewerProps) => {\n  // We're using state to store the HTML container because we want the value\n  // to re-run effects when it changes\n  const [htmlContainer, setHtmlContainer] = useState<HTMLElement | undefined>(containerRef?.current)\n  const htmlContainerRef = useCallback(\n    (node: HTMLElement | null) => {\n      if (!node) return\n      // Update external container ref with the node\n      if (containerRef) containerRef.current = node\n      setHtmlContainer(node)\n    },\n    [containerRef],\n  )\n\n  const onChange = useCallback(\n    async (value: string) => {\n      try {\n        await externalOnChange?.(value)\n      } catch (error) {\n        if (htmlContainer) {\n          htmlContainer.innerHTML = verifiedHTML\n        }\n      }\n    },\n    [externalOnChange, htmlContainer, verifiedHTML],\n  )\n\n  useListInteraction({\n    onChange,\n    disabled: disabled || !externalOnChange,\n    htmlContainer,\n    markdownValue,\n    dependencies: [verifiedHTML],\n  })\n\n  useLinkInterception({\n    htmlContainer,\n    onLinkClick,\n    openLinksInNewTab,\n  })\n\n  return useMemo(\n    () =>\n      loading ? (\n        <Box sx={{display: 'flex', justifyContent: 'space-around', p: 2}}>\n          <Spinner aria-label=\"Loading content...\" />\n        </Box>\n      ) : (\n        <SafeHTMLBox\n          ref={htmlContainerRef}\n          className=\"markdown-body\"\n          sx={{fontSize: 1, maxWidth: '100%', '& > div > :last-child': {mb: 0}}}\n          html={verifiedHTML}\n          {...(teamHovercardsEnabled ? {'data-team-hovercards-enabled': true} : {})}\n        />\n      ),\n    [htmlContainerRef, loading, teamHovercardsEnabled, verifiedHTML],\n  )\n}\n\ntry{ MarkdownViewer.displayName ||= 'MarkdownViewer' } catch {}","import type {ChildRoute, LoaderResult, RouteRegistration, TransitionType} from './app-routing-types'\nimport type React from 'react'\nimport type {Location} from '@remix-run/router'\n\nexport interface JsonRouteProps {\n  path: string\n  Component: React.ComponentType\n  transitionType?: TransitionType\n  shouldNavigateOnError?: boolean\n  children?: ChildRoute[]\n}\n/**\n * A utility for building a route registration for a route that consumes a JSON object (either via embedding in a\n * script tag or via a JSON fetch on React soft navigations).\n */\nexport function jsonRoute<TRouteData, TEmbeddedData>({\n  path,\n  Component,\n  /**\n   * Some routes want to handle their own errors and not just show a generic error page. In this case,\n   * the error is just handled like any other payload for the route.\n   * NOTE: We might consider replacing the shouldNavigateOnError flag with a parallel implementation to jsonRoute.\n   */\n  shouldNavigateOnError,\n  transitionType,\n  children,\n}: JsonRouteProps): RouteRegistration<TRouteData, TEmbeddedData> {\n  async function coreLoader({location}: {location: Location}): Promise<LoaderResult<TRouteData>> {\n    let response: Response\n    try {\n      const fetchPath = `${location.pathname}${location.search}`\n      response = await window.fetch(fetchPath, {\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'X-GitHub-Target': 'dotcom',\n          'X-React-Router': 'json',\n        },\n      })\n    } catch (error) {\n      return {\n        type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n        error: {type: 'fetchError'},\n      }\n    }\n    if (response.redirected) {\n      return {\n        type: 'redirect',\n        url: response.url,\n      }\n    } else if (!response.ok) {\n      return {\n        type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n        error: {type: 'httpError', httpStatus: response.status},\n      }\n    } else {\n      try {\n        const responseJson = await response.json()\n        return {\n          type: 'loaded',\n          data: responseJson,\n          title: responseJson.title,\n        }\n      } catch (error) {\n        return {\n          type: shouldNavigateOnError ? 'route-handled-error' : 'error',\n          error: {type: 'badResponseError'},\n        }\n      }\n    }\n  }\n\n  function loadFromEmbeddedData({embeddedData}: {embeddedData: TEmbeddedData}): {data: TRouteData; title: string} {\n    const data = embeddedData as unknown as TRouteData & {title: string}\n    return {data, title: data.title}\n  }\n\n  return {\n    path,\n    // TODO: consider wrapping Component with a component that passes payload as a prop  ideally as part of migrating\n    // away from useRoutePayload.\n    Component,\n    coreLoader,\n    loadFromEmbeddedData,\n    transitionType,\n    children,\n  }\n}\n","import {Box, sx, type SxProp, themeGet} from '@primer/react'\nimport type React from 'react'\nimport styled, {css, keyframes} from 'styled-components'\n\nexport type LoadingSkeletonProps = {\n  animationStyle?: 'wave' | 'pulse'\n  as?: string | React.ComponentType | undefined\n  height?: string\n  variant?: 'rectangular' | 'elliptical' | 'rounded' | 'pill' | 'text'\n  width?: 'random' | string\n} & SxProp\n\nconst waveAnimation = keyframes`\n  0% {\n    transform: translateX(-100%);\n  }\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n`\nconst waveMixin = css`\n  animation: ${waveAnimation} 1.5s infinite linear;\n`\n\nconst pulseAnimation = keyframes`\n  0% {\n    opacity: .3;\n  }\n  10% {\n    opacity: 1;\n  }\n  100% {\n    opacity: .3;\n  }\n`\n\nconst pulseMixin = css`\n  animation: ${pulseAnimation} 2s infinite linear;\n`\n\nexport const LoadingSkeleton = styled(Box)<LoadingSkeletonProps>`\n  /* stylelint-disable declaration-block-no-duplicate-properties, color-named */\n  position: relative;\n  overflow: hidden;\n  mask-image: radial-gradient(white, black);\n  ${({animationStyle}) => animationStyle === 'pulse' && pulseMixin};\n  &::after {\n    ${({animationStyle}) => animationStyle !== 'pulse' && waveMixin};\n    background: linear-gradient(90deg, transparent, ${themeGet('colors.neutral.subtle')}, transparent);\n    content: '';\n    position: absolute;\n    transform: translateX(-100%); /* Avoid flash during server-side hydration */\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n  }\n  background-color: ${themeGet('colors.neutral.subtle')};\n  border-radius: ${({theme, variant}) => {\n    switch (variant) {\n      case 'rounded':\n        return themeGet('radii.1')(theme)\n      case 'pill':\n        return '100px'\n      case 'elliptical':\n        return '50%'\n      default:\n        return '0'\n    }\n  }};\n  display: block;\n  height: 1.2em;\n  ${({variant}) =>\n    variant === 'elliptical' && {\n      borderRadius: '50%',\n    }}\n  width: ${({width}) => {\n    switch (width) {\n      case 'random':\n        return `${Math.floor(Math.random() * 40 + 40)}%`\n      case 'xl':\n        return '32px'\n      case 'lg':\n        return '24px'\n      case 'md':\n        return '20px'\n      case 'sm':\n        return '16px'\n      default:\n        return width\n    }\n  }};\n  height: ${({height}) => {\n    switch (height) {\n      case 'xl':\n        return '32px'\n      case 'lg':\n        return '24px'\n      case 'md':\n        return '20px'\n      case 'sm':\n        return '16px'\n      default:\n        return height\n    }\n  }};\n  ${sx}\n`\n\ntry{ LoadingSkeleton.displayName ||= 'LoadingSkeleton' } catch {}"],"names":["copilotFeatureFlags","CopilotFeatureFlags","embedding","isFeatureEnabled","copyMessage","formatDiff","unstickyReferences","vulnerabilityAnnotations","implicitContext","issueCreation","staticThreadSuggestions","followUpThreadSuggestions","followupToAgent","customInstructions","reactMarkdown","dotcomUserServerTokens","copilotFloatingButton","nonce","LINE_REGEX","PATH_REGEX","CopilotInlineDiffElement","HTMLElement","connectedCallback","diffLines","diff","split","context","trimStart","startsWith","shift","code","map","line","replace","join","highlightResult","hljs","htmlLines","value","lineInfos","i","parseLine","highlightClass","language","path","lineNumbers","filepath","match","table","document","createElement","className","appendChild","createFileHeaderRow","createContextRow","ranges","createRanges","rangeIndex","totalLines","start","end","nextRange","newEnd","lineInfosInRange","getLinesInRange","lineInfo","length","slice","createDiffLineRow","createCollapsedRow","replaceChildren","text","html","matches","leftLineNumber","Number","undefined","rightLineNumber","lineMarker","rightLines","filter","Boolean","range","lines","Math","max","sort","a","b","MAX_SAFE_INTEGER","row","cell","setAttribute","textContent","changeSuffix","numClass","codeClass","String","innerHTML","attr","controller","TEXT_SANITIZATION_CONFIG","ALLOWED_TAGS","FORBID_TAGS","ADD_URI_SAFE_ATTR","ALLOWED_ATTR","ALLOW_DATA_ATTR","ALLOWED_URI_REGEXP","transformContentToHTML","body","references","extensions","isAssistive","agents","fetchAgents","startLine","endLine","offsets","findLines","str","index","startIndex","endIndex","indexOf","linkifyAtMention","inputString","atMentions","mention","mentionSlug","substring","matchingAgent","find","agent","slug","sanitizedMention","DOMPurify","integrationUrl","unsafeHTML","renderer","Marked","gfm","codeCopyButtonExtension","diffHunkExtension","markedHighlight","langPrefix","highlight","parse","purify","addHook","_","data","attrName","attrValue","reactReplaceElementPrefix","forceKeepAttr","node","getAttribute","ALLOWED_LIST","ALLOWED_REGEX","includes","test","keepAttr","clipboardAttr","getNonce","nodeName","HTMLAnchorElement","hasAttribute","originalHref","href","unabsoluteUrl","to","url","URL","window","location","origin","pathname","search","hash","parts","classList","add","styles","snippet","file","commit","bingRefs","ref","type","some","results","result","bing","sanitize","crypto","randomUUID","codeCopyButtonRendering","name","token","parser","container","content","raw","outerHTML","codeToken","lang","lexer","element","transformContentToHTMLWithAnnotations","markdown","annotations","CodeVulnerability","isCodeToken","pluralizeVulnerability","count","vulnerabilities","vulnerabilitiesContent","v","startOffset","endOffset","vulnerabilityDisclaimerRendering","tokenHasAnnotation","string","codeContent","vulnerabilitiesDetails","vulnerabilitiesSummary","chevron","shield","prepend","vulnerability","vulnerabilityTitle","vulnerabilityDescription","details","uiType","uiDescription","append","transformContentToHTMLWithCitations","referenceMap","hasCitations","Map","newCitationRegex","useNewCitations","citationRegex","citationRegexAnchored","source","flags","Array","from","level","src","tokenizer","exec","id","groups","link","n","parseInt","reference","has","set","size","displayIndex","get","numberReferences","out","entries","push","OS","Android","iOS","macOS","Windows","Linux","Unknown","isMacOS","getOS","os","isMobileOS","ssrSafeWindow","navigator","userAgent","platform","userAgentData","macosPlatforms","iosPlatforms","windowsPlatforms","mobile","isAndroid","isIOS","isWindows","isLinux","isDesktop","isMobile","currentUrl","targetUrl","current","target","hasHash","host","calculateNextListItemStarter","leadingWhitespace","delimeter","taskBox","updatedDelimeter","calculatePreviousListItemStarter","listItemRegex","isNumericListItem","item","parseListItem","fullDelimeter","itemNumberStr","middleWhitespace","itemNumber","isNaN","listItemToString","useListEditing","emitChange","incrementFollowingNumericLines","useCallback","textarea","lineRange","currentLineStart","currentLineEnd","getSelectedLineRange","currentLineItem","followingLines","followingText","followingNumericListItems","prevItemNumber","listItem","updatedItems","selectionStart","onKeyDown","event","key","shiftKey","defaultPrevented","currentTarget","activeLineStart","activeLineEnd","selectionEnd","preventDefault","previousItemStarter","nextItemStarter","lastIndexOf","markdownComment","replaceAll","markdownLink","markdownImage","altText","isModifierKey","metaKey","ctrlKey","parseCodeFenceBegin","isCodeFenceEnd","fence","regex","isTaskListItem","toggleTaskListItem","useListInteraction","htmlContainer","markdownValue","onChange","disabled","dependencies","markdownRef","useRef","useIsomorphicLayoutEffect","onToggleItem","currentCodeFence","lineIndex","taskIndex","parsedLine","toggledItemIndex","updatedLine","splice","updatedMarkdown","checkboxElements","setCheckboxElements","useState","useEffect","querySelectorAll","cleanupFns","el","previouslyDisabled","fn","toggleHandler","addEventListener","removeEventListener","CategorySectionContent","SupportedLanguagesSectionContent","FromTheDeveloperSectionContent","CustomersSectionContent","StopButton","RestoreHistoryButton","MarkdownHero","App","props","children","displayName","taskOptions","modelFamilyOptions","categoryOptions","filterOptions","all","free_trial","FilterContext","createContext","featured","recommended","recentlyAdded","searchResults","total","totalPages","loading","query","onQueryChange","page","setPage","setFilter","creators","setCreators","setSort","category","setCategory","task","setTask","modelFamily","setModelFamily","copilotApp","isSearching","featuredModels","useFilterContext","useContext","FilterProvider","payload","useRoutePayload","firstUpdate","setFeatured","setRecommended","setRecentlyAdded","setSearchResults","setLoading","searchParams","useSearchParams","queryWithoutSort","useMemo","queryString","trim","setQuery","defaultPage","defaultFilter","defaultCreators","verification","defaultSort","sortValue","queryFromParams","defaultCategory","defaultTask","taskFromParams","t","toLowerCase","defaultModelFamily","modelFamilyFromParams","setType","setCopilotApp","qry","shouldDisplaySearchResults","setIsSearching","fetchSearchResults","response","verifiedFetchJSON","json","newParams","URLSearchParams","toString","history","replaceState","Provider","MarketplaceHeader","privateQuery","setPrivateQuery","colorMode","useColorModes","colorModeAwareAssetDirectory","debouncedSetQuery","debounce","newQuery","handleQueryChange","handleSubmit","header","div","headerImages","image","img","srcSet","alt","h1","p","form","onSubmit","TextInput","block","sx","mt","leadingVisual","Spinner","SearchIcon","aria-label","placeholder","data-testid","Menu","categories","useLocation","currentNavItem","currentType","NavList","Item","LeadingVisual","FlameIcon","CopilotIcon","svg","xmlns","viewBox","width","height","fill","d","defaultOpen","AppsIcon","SubNav","apps","cat","PlayIcon","actions","Divider","PlusIcon","MarketplaceNavigation","isMenuOpen","setIsMenuOpen","Button","onClick","Dialog","title","onClose","position","narrow","FeaturedItem","listing","isFeatured","description","shortDescription","backgroundColor","listingUrl","isVerifiedOwner","bgColor","color","model_url","listingType","sendClickEvent","sendEvent","marketplace_listing_id","source_url","destination_url","Box","listingLogoUrl","logo_url","friendly_name","iconSvg","SafeHTMLBox","Heading","as","Octicon","icon","VerifiedIcon","ml","transform","Label","variant","top","right","style","minWidth","ModelsFilters","onTaskChange","newTask","onModelFamilyChange","newModelFamily","onCategoryChange","newCategory","ActionMenu","span","Overlay","ActionList","selectionVariant","option","selected","onSelect","Filters","sortOptions","sortText","onCreatorChange","creator","onFilterChange","newFilter","onSortChange","newSort","Object","creatorOptions","ResultList","onPageChange","e","categoryNameMapping","mapping","headingText","categoryParam","detailText","description_html","h2","Link","MarketplaceItem","Pagination","pageCount","currentPage","showPages","Blankslate","border","Visual","Description","PUBLISHER","KNOWN_PUBLISHERS","cohere","core42","meta","microsoft","mistral","mistralai","openai","openaidevault","ai21labs","normalizeModelPublisher","publisher","ModelItem","model","registry","isJamba","summary","h3","IndexAndSearchContent","currentList","setCurrentList","UnderlineNav","pl","padding","aria-current","Index","PageLayout","Pane","Content","Screenshots","screenshots","activeScreenshotId","setActiveScreenshotId","screenshot","role","hidden","alt_text","caption","ScreenshotThumbnail","handleClick","handleKeyPress","tabIndex","aria-selected","Plans","planInfo","selectedPlanId","setSelectedPlanId","selected_plan_id","onPlanChange","planId","selectedPlan","plans","plan","installSection","is_regular_emu_user","emu_owner_but_not_admin","PlanForm","gap","borderStyle","borderWidth","display","fontSize","borderColor","borderRadius","boxShadow","flexDirection","borderBottom","borderBottomColor","Radio","aria-describedby","checked","flex","htmlFor","fontWeight","is_paid","has_free_trial","Text","textAlign","price","per_unit","unit_name","is_user_billed_monthly","direct_billing","for_organizations_only","for_users_only","bullets","ul","bullet","li","CheckIcon","TermsOfService","seatQuantity","setSeatQuantity","order_preview","quantity","selectedOrganization","setSelectedOrganization","selected_account","formMethod","authToken","useCSRFToken","method","action","input","can_sign_end_user_agreement","end_user_agreement","min","label","inline","organizations","maxHeight","overflow","current_user","display_login","GitHubAvatar","has_extensibility_access","org","InstallButton","InstallHelpText","isDisabled","buttonText","gaClickDetail","is_buyable","subscription_item","on_free_trial","any_account_eligible_for_free_trial","free_trial_length","viewer_free_trial_days_left","data-octo-click","data-octo-dimensions","data-ga-click","free_trials_used","installation_url_requirement_met","user_can_edit_listing","agreement","agreementDialogOpen","setAgreementDialogOpen","is_logged_in","tosUrl","user_signed_at","rel","privacyPolicyUrl","isOpen","onDismiss","aria-labelledby","Header","version","borderTopStyle","borderTopColor","borderTopWidth","RelativeTime","date","Date","listing_by_github","support_email","supportUrl","notEmpty","TagSection","identifier","supportedLanguages","customers","primaryCategory","secondaryCategory","joinedLanguages","words","statusUrl","documentationUrl","pricingUrl","customer","displayLogin","data-hovercard-type","data-hovercard-url","orgHovercardPath","owner","square","mr","mb","assertNever","TagSectionIdentifier","ShowApp","plan_info","supported_languages","verified_domain","user_can_edit","hideSetupButton","viewer_has_purchased","viewer_has_purchased_for_all_organizations","showHeaderActionMenu","any_orgs_purchased","installed_for_viewer","anyPlansExist","hasSupportedLanguages","hasCustomers","tagSections","Category","SupportedLanguages","Customers","FromTheDeveloper","reportUrl","Breadcrumbs","Stack","direction","regular","ownerLogin","muted","DownloadIcon","installationCount","toLocaleString","Anchor","IconButton","KebabHorizontalIcon","unsafeDisableTooltip","align","Group","GroupHeading","LinkItem","plan_id_by_login","viewer_billed_organizations","orgName","GearIcon","PencilIcon","vertical-align","UnlockIcon","ShieldLockIcon","fullDescription","extendedDescription","ListingLayout","sidebar","columnGap","justifyContent","flexGrow","flexShrink","pt","BookIcon","redesignFeatureFlag","useFeatureFlag","RedesignedShowApp","LegacyShowApp","ShowAction","CallToActionItem","transition","cursor","ArrowUpRightIcon","ModelsIndexFilters","ModelsIndexRoute","projectNeutronPlaygroundEnabled","searchFiltersFeatureFlag","on_waitlist","models","ContentErrorResponseError","Error","TokenLimitReachedResponseErrorDescription","TokenLimitReachedResponseError","constructor","RetryableError","message","retryable","TooManyRequestsError","GettingStartedButtonClicked","templateRepositoryNwo","sendFeedback","feedback","ok","Feedback","initialState","satisfaction","UNKNOWN","reasons","feedbackText","contactConsent","FeedbackDialog","returnFocusRef","isFeedbackDialogOpen","setIsFeedbackDialogOpen","isNegativePreSelected","setIsNegativeFeedbackConfirmed","canProvideAdditionalFeedback","setFeedback","isSubmitting","setIsSubmitting","submitButtonDisabled","isNegative","NEGATIVE","handleChange","reason","res","error","console","POSITIVE","bg","h4","ThumbsupIcon","ThumbsdownIcon","CheckboxGroup","FormControl","Checkbox","Textarea","resize","rows","ModelLegalTerms","isLoggedIn","navigate","useNavigate","encodeURIComponent","TagsSection","labels","tags","flexWrap","tag","LanguagesSection","languages","languagesString","languagesIsOpen","setLanguagesIsOpen","shouldTruncateLanguages","languageNames","Intl","DisplayNames","formattedLanguages","of","languagesButLast","EllipsisIcon","alignItems","CounterLabel","tokenLabel","round","capitalize","s","charAt","toUpperCase","InfoItem","isInline","flexBasis","ModelDetails","rateLimitTier","rate_limit_tier","maxOutputTokens","max_output_tokens","maxInputTokens","max_input_tokens","column","training_data_date","SidebarInfo","lineHeight","ModelUrlHelper","modelUrl","playgroundUrl","playgroundSuffix","playgroundCodeUrl","codeSuffix","playgroundJsonUrl","jsonSuffix","chatSuffix","ModelSwitcher","isLoadingModels","setIsLoadingModels","setModels","showPanel","setShowPanel","anchorRef","loadModels","useSafeAsyncCallback","modelsOrEmpty","selectedModelElement","scrollIntoView","filteredModels","_models","m","maxWidth","whiteSpace","textOverflow","ChevronDownIcon","SelectPanel","open","onCancel","SearchInput","LoadingSkeleton","newUrl","endsWith","Footer","SecondaryAction","CodespacesCard","openInCodespaceUrl","px","pb","borderBottomStyle","borderBottomWidth","my","CodespacesIcon","MarkdownContent","forwardRef","gettingStartedContent","SharedMarkdownContent","suppressHydrationWarning","richText","pre","visibility","marginRight","MissingCombinationPlaceholder","AlertIcon","AuthToken","authorizationHeaderValue","needsRefreshing","isExpired","expirationDateString","expiration","expirationDate","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","now","fromResult","serialize","deserialize","serialized","MESSAGE_REGEXP","MessageStreamer","stream","utf8Decoder","TextDecoder","partialMessage","done","reader","read","err","decode","messageEnd","rawMessage","parsedMessage","JSON","stop","cancel","AzureModelClient","sendMessage","messages","parameters","systemPrompt","callback","makeRequest","emitChatRequestSent","status","emitRateLimitedEvent","timeLeft","headers","errorMessage","getReader","streamer","emitStreamingStarted","fullMessage","chunk","choices","delta","timestamp","emitStreamingCompleted","tokenOverwrite","localStorage","getItem","authTokenLocalStorageOverwriteKey","original_name","Authorization","getAuthToken","uuid","newMessages","fetch","stringify","stored","authTokenLocalStorageKey","fetchAuthToken","validateAuthToken","currentAuthTokenRequest","_fetchAuthToken","setItem","success","result_code","sendStats","incrementKey","requestUrl","rate_limit_type","safeStorage","throwQuotaErrorsOnSet","ttl","safeLocalStorage","PlaygroundLocalStorage","uiState","uiStateKey","storedStateJSON","storedState","state","validKeys","every","sidebarSelection","sidebarHidden","preferredLanguage","preferredSdk","marketplaceModelsPreferredLanguageKey","initialPlaygroundState","isLoading","chatInput","chatClosed","showParameters","showParametersOnMobile","parametersHasChanges","tab","selectedLanguage","iceBreakerCheckPending","selectedSDK","PlaygroundStateContext","PlaygroundStateDispatcherContext","PlaygroundManagerContext","usePlaygroundState","usePlaygroundManager","tasksReducer","lastMessage","lastUserMessage","reverse","SidebarSelectionOptions","PlaygroundManager","setModel","playgroundURL","modelInputSchema","gettingStarted","stopStreaming","setMessages","setDefaultParameters","client","checkForIcebreaker","checkForIcebreakerRan","dispatch","setPreferredLanguageFromLocalStorage","savedLanguage","getAvailableLanguages","savedSdk","setSelectedLanguage","languageSnippet","sdks","keys","sdk","savedSDKSnippet","setSelectedSDK","handleRequestParameterChange","schema","reduce","acc","parameter","default","setChatInput","setSystemPrompt","setShowParameters","setShowParametersOnMobile","setParametersHasChanges","setTab","resetHistory","clearLocalStorage","removeItem","values","codeSamples","storedDefaults","GettingStartedDialog","playgroundEnabled","renderBody","CodeContainer","manager","defaultLanguage","defaultSDK","selectedIndex","findIndex","firstLanguageEntry","firstSDK","currentHeading","setCurrentHeading","contentRef","contentWrapperRef","wrapperElement","anchors","tocHeadings","heading","anchor","observer","IntersectionObserver","entry","isIntersecting","root","rootMargin","threshold","querySelector","observe","unobserve","languageToc","active","levelTwoTitles","scrollToAnchor","behavior","selectLanguage","_firstSDK","handleSelectedSDK","SDK","borderRightColor","borderRightStyle","borderRightWidth","alignContent","py","CodespacesSuggestion","overflowX","overflowY","ModelLayout","activeTab","selectTab","modelLicense","useResponsiveValue","GiveFeedback","PlaygroundHeader","OverviewHeader","MiniPlayground","onWaitlist","evaluation","noEvaluationReport","ChecklistIcon","notes","noTransparencyNotes","noAdditionalTransparencyNotes","LogIcon","LawIcon","BreadcrumbHeader","openInCodespacesUrl","isGettingStartedDialogOpen","setGettingStartedDialogOpen","CommandPaletteIcon","CodeIcon","setText","hasText","miniPlaygroundRef","miniPlaygroundInputRef","legalContainerRef","icebreakerContainerRef","animationContainerRef","samplesToContent","sampleInputs","firstMessageWithContent","samplesWithContent","sample","randomPrompt","floor","random","suggestedPrompts","handlePlaygroundCardClick","parentNode","HTMLFormElement","submit","handleKeyDown","altKey","nativeEvent","isComposing","adjustHeights","offsetHeight","ResizeObserver","disconnect","visuallyHidden","pr","PaperAirplaneIcon","marginTop","animateHeight","fadeInOut","fadeInOutShow","gridTemplateColumns","PlaygroundCard","sizes","small","large","SubmitButton","IconButtonWithTooltip","tooltipDirection","PlaygroundChatInput","messagesState","_text","textAreaRef","textAreaScrollContainer","handleInput","useLayoutEffect","tries","adjustHeight","currentScrollPosition","scrollTop","scrollHeight","setTimeout","containerHeight","opacity","outline","userSelect","minHeight","autoComplete","autoCorrect","spellCheck","aria-multiline","onInput","borderTopLeftRadius","borderTopRightRadius","left","background","caretColor","verticalAlign","zIndex","SquareFillIcon","PlaygroundError","Flash","gridTemplateRows","gridTemplateAreas","alignSelf","gridArea","showResetButton","margin","PlaygroundChatMessage","handleRegenerate","lastIndex","htmlMessage","user","useUser","submittedFeedback","setSubmittedFeedback","positiveFeedbackSubmitted","isNegativeFeedbackConfirmed","isAssistantMessage","isLastResponse","messageMeta","determineMessageMeta","_message","avatarUrl","currentUser","pointerEvents","transitionDelay","CopilotBadge","isError","customIcon","format","MarkdownViewer","verifiedHTML","bottom","inset","CopyToClipboardButton","textToCopy","ariaLabel","SyncIcon","FeedbackState","PlaygroundCodeLanguage","handleSelectLanguage","PlayGroundChatEmptyState","submitMessage","PlaygroundCodeSDK","currentSDK","currentSDKName","CodeMirror","lazy","PlaygroundCodeSnippet","playgroundState","enrichedParameters","assign","extension","getLanguageExt","extensionMap","rest","python","js","hasCodeSample","template","React","fallback","fileName","ariaLabelledBy","spacing","indentUnit","indentWithTabs","lineWrapping","hideHelpUntilFocus","isReadOnly","PlaygroundAPIMessageAuthorValues","validateJSONAsPlaygroundMessages","parsed","isArray","obj","parsedAndValidated","PlaygroundJSON","initialContent","setInitialContent","setContent","isValidJSON","setIsValidJSON","editMode","setEditMode","validateJSON","renderToolbar","applyInput","resetInput","aria-hidden","setFullWidthToolbarContent","setToolbarContent","_content","PlaygroundChat","messagesContainerRef","scrolledToBottomRef","setHistory","toolbarContent","fullWidthToolbarContent","lastPathComponent","pop","jsonFeatureFlag","selectedOption","setSelectedOption","canRestoreHistory","scrollToBottom","scrollTo","getComputedStyle","savedMessages","getSavedPlaygroundMessages","modelName","handleScroll","abs","clientHeight","debounceSetPlaygroundMessages","setPlaygroundMessages","chatMessages","handleClearHistory","handleRestoreHistory","marginBottom","HistoryIcon","smallSizeForSegmentControl","filteredMessages","newPlaygroundState","SegmentedControl","SidebarExpandIcon","InfoIcon","DETAILS","SlidersIcon","PARAMETERS","renderOption","onScroll","PlaygroundContentOption","PlaygroundInput","setHeight","checkBounds","val","validateNumber","number","parseFloat","handleBlur","validatedNumber","handleRangeChange","newValue","HTMLInputElement","required","friendlyName","Caption","renderInput","param","step","onBlur","PlaygroundInputs","resetLabel","resetAllInputs","renderHeader","Tooltip","XIcon","fullWidth","SidebarCollapseIcon","handleSystemPromptChange","handleInputChange","capabilities","Playground","miniplaygroundIcebreaker","PlaygroundWaitingListAsset","colorModeIllustration","colorModeIllustration2x","ModelsPlaygroundRoute","playgroundDispatch","useReducer","PlaygroundComponent","HeroImageHolder","marginLeft","styled","Evaluation","modelEvaluation","Readme","modelReadme","MarkdownPublisherHeroImage","lowercaseKey","model_family","webp","aspectRatio","picture","Cohere","Core42","Meta","Microsoft","Mistral","MistralAI","AI21Labs","OpenAI","OpenAIEVault","License","Transparency","modelTransparencyContent","ModelsShowRoute","selectedTabFromUrl","selectedTab","setSelectedTab","handlePopState","pushState","renderTab","registerReactAppFactory","routes","jsonRoute","Component","csrf_tokens","useLinkInterception","onLinkClick","openLinksInNewTab","clickHandler","closest","AppContext","reactRouterNavigate","useReactRouterNavigate","navigateOptions","resolvePath","matchRoutes","isHashNavigation","startSoftNav","preventAutofocus","options","startTransition","PREVENT_AUTOFOCUS_KEY","turbo","skipTurbo","createHref","softNavigate","turboSoftNavigate","useReactRouterSearchParams","setSearchParams","nextInit","newSearchParams","createSearchParams","callbackCancelledResult","Symbol","allowCallingAfterUnmount","trackingRef","isMountedRef","args","useAppPayload","hasUnreadMessages","AlertFillIcon","ReactMarkdownRenderer","reactReplaceBlocks","rendered","setRendered","markdownViewer","domNode","getElementById","componentType","createPortal","matchedContent","replaceStringsWithReactContainers","blocks","messageId","output","CurrentRepositoryContext","CurrentRepositoryProvider","repository","useCurrentRepository","TooltippedIcon","formatShortcutForDisplay","shortcut","formatShortcutForAttribute","hideTooltip","Icon","tooltipSx","aria-keyshortcuts","textDecoration","animationName","animationDuration","animationFillMode","animationTimingFunction","animationDelay","externalOnChange","teamHovercardsEnabled","containerRef","setHtmlContainer","htmlContainerRef","shouldNavigateOnError","transitionType","coreLoader","fetchPath","Accept","redirected","httpStatus","responseJson","loadFromEmbeddedData","embeddedData","waveAnimation","keyframes","waveMixin","css","pulseAnimation","pulseMixin","animationStyle","themeGet","theme"],"sourceRoot":""}