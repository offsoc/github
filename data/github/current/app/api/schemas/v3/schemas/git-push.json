{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/git-push.json",
  "title": "GitPush",
  "description": "A Git push.",
  "type": "object",
  "definitions": {
    "id": {
      "description": "The id of the repo or gist (id column in the database)",
      "example": 12,
      "type": "integer"
    },
    "pusher": {
      "description": "The User login of the user who performed the push, either directly or via a repository deploy key that they verified.",
      "example": "defunkt",
      "type": "string"
    },
    "ref_updates": {
      "description": "An Array of objects, one for each ref that was updated. `refname`s have to be URL encoded.",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "refname": {
            "type": "string",
            "example": "master"
          },
          "before_oid": {
            "type": "string",
            "minLength": 40,
            "maxLength": 40
          },
          "after_oid": {
            "type": "string",
            "minLength": 40,
            "maxLength": 40
          }
        },
        "required": [
          "refname",
          "before_oid",
          "after_oid"
        ],
        "additionalProperties": false
      }
    },
    "protocol": {
      "description": "The protocol used to push to the repository.",
      "enum": [
        "ssh",
        "http",
        "mirror",
        "wiki",
        "merge-button"
      ],
      "type": "string"
    },
    "repository_id": {
      "description": "The ID of the repository.",
      "example": 42,
      "type": "integer"
    },
    "committed_at": {
      "description": "The timestamp for the 3PC commit that updated the refs, in ISO 8601 format.",
      "example": "2021-01-13 14:04:40 -0800",
      "type": "string"
    }
  },
  "links": [
    {
      "href": "/internal/repositories/{repository_id}/git/pushes",
      "method": "POST",
      "rel": "create",
      "schema": {
        "properties": {
          "pusher": {
            "$ref": "#/definitions/pusher"
          },
          "ref_updates": {
            "$ref": "#/definitions/ref_updates"
          },
          "protocol": {
            "$ref": "#/definitions/protocol"
          },
          "committed_at": {
            "$ref": "#/definitions/committed_at"
          }
        },
        "type": "object",
        "required": [
          "ref_updates",
          "protocol"
        ]
      },
      "title": "Notify about push to Git repository updating refs"
    },
    {
      "href": "/internal/gists/{id}/git/pushes",
      "method": "POST",
      "rel": "create",
      "schema": {
        "properties": {
          "pusher": {
            "$ref": "#/definitions/pusher"
          },
          "ref_updates": {
            "$ref": "#/definitions/ref_updates"
          },
          "protocol": {
            "$ref": "#/definitions/protocol"
          },
          "committed_at": {
            "$ref": "#/definitions/committed_at"
          }
        },
        "type": "object",
        "required": [
          "ref_updates",
          "protocol"
        ]
      },
      "title": "Notify about push to gist updating refs"
    },
    {
      "href": "/internal/repositories/{repository_id}/wiki/git/pushes",
      "method": "POST",
      "rel": "create",
      "schema": {
        "properties": {
          "pusher": {
            "$ref": "#/definitions/pusher"
          },
          "ref_updates": {
            "$ref": "#/definitions/ref_updates"
          },
          "protocol": {
            "$ref": "#/definitions/protocol"
          },
          "committed_at": {
            "$ref": "#/definitions/committed_at"
          }
        },
        "type": "object",
        "required": [
          "ref_updates",
          "protocol"
        ]
      },
      "title": "Notify about push to wiki updating refs"
    }
  ]
}
