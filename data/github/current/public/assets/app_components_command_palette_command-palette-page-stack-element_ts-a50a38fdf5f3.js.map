{"version":3,"file":"chunk-app_components_command_palette_command-palette-page-stack-element_ts-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/command-palette/command-palette-item-element.ts","app/components/command_palette/command-palette-page-element.ts","app/components/command_palette/command-palette-page-stack-element.ts"],"sourcesContent":["import type {Item, ItemInteraction} from '@github-ui/command-palette'\nimport {type TemplateResult, html, render} from '@github-ui/jtml-shimmed'\nimport {attr, controller, target} from '@github/catalyst'\nimport {hasMatch, positions} from 'fzy.js'\nimport {AccessPolicyItem} from './items/access-policy-item'\nimport type CommandPalette from './command-palette-element'\nimport {HelpItem} from './items/help-item'\nimport {JumpToOrgItem} from './items/jump-to-org-item'\nimport {JumpToTeamItem} from './items/jump-to-team-item'\nimport {SearchLinkItem} from './items/search-link-item'\nimport {ServerDefinedItem} from './items/server-defined-item'\nimport {copyText} from './copy'\nimport {sendTrackingEvent} from './tracking'\n\n@controller\nexport class CommandPaletteItemElement extends HTMLElement implements ItemInteraction {\n  @attr itemId = ''\n  @attr itemTitle = ''\n  @attr subtitle = ''\n  @attr selected = false\n  @attr score = 0\n\n  @target titleElement: HTMLElement\n  @target iconElement: HTMLElement\n  @target subtitleElement: HTMLElement\n  @target hintText: HTMLElement\n  @target persistentHint: HTMLElement\n  @target containerElement: HTMLAnchorElement\n\n  titleNodes: Node[] = []\n  item: Item\n  hint?: string\n  href: string\n  rendered = false\n  newTabOpened = false\n\n  containerDataTarget = 'command-palette-item.containerElement'\n  containerClasses = 'mx-2 px-2 rounded-2 d-flex flex-items-start no-underline border-0'\n  containerStyle = 'padding-top: 10px; padding-bottom: 10px; cursor: pointer;'\n\n  activate(commandPalette: CommandPalette, event?: Event): void {\n    this.item.activate(commandPalette, event)\n    sendTrackingEvent('activate', this.item)\n  }\n\n  copy(commandPalette: CommandPalette): string | undefined {\n    sendTrackingEvent('copy', this.item)\n    return this.item.copy(commandPalette)\n  }\n\n  select() {\n    /* no-op */\n  }\n\n  renderOcticon(octiconSvg: string) {\n    this.iconElement.innerHTML = octiconSvg\n  }\n\n  renderAvatar(src: string, alt: string) {\n    let avatarTemplate: TemplateResult\n\n    if (this.item instanceof JumpToOrgItem) {\n      avatarTemplate = html`<img src=\"${src}\" alt=\"${alt}\" class=\"avatar avatar-1 avatar-small\" />`\n    } else if (this.item instanceof JumpToTeamItem) {\n      avatarTemplate = html`<img src=\"${src}\" alt=\"${alt}\" class=\"avatar avatar-1\" />`\n    } else {\n      avatarTemplate = html`<img src=\"${src}\" alt=\"${alt}\" class=\"avatar avatar-1 avatar-small circle\" />`\n    }\n\n    render(avatarTemplate, this.iconElement)\n  }\n\n  setItemAttributes(item: Item) {\n    this.item = item\n    this.itemId = item.id\n    this.itemTitle = item.title\n    this.hint = item.hint\n    this.href = item.path ?? ''\n\n    if (item.subtitle) {\n      this.subtitle = item.subtitle\n    }\n\n    if (item instanceof ServerDefinedItem) {\n      item.element = this\n    }\n  }\n\n  render(selected: boolean, queryText: string): CommandPaletteItemElement {\n    this.renderBaseElement()\n\n    if (selected) {\n      this.selected = true\n    }\n\n    if (this.item instanceof AccessPolicyItem && this.item.typeahead) {\n      this.titleNodes = this.emphasizeTextMatchingQuery(this.item.title, this.item.typeahead)\n    } else if (this.item instanceof HelpItem) {\n      const span = document.createElement('span')\n      span.innerHTML = this.item.title\n      this.titleNodes = [span]\n\n      if (this.item.persistentHint) {\n        this.persistentHint.innerHTML = this.item.persistentHint\n        this.persistentHint.hidden = false\n      }\n    } else if (this.item instanceof SearchLinkItem && queryText) {\n      const nodes: Node[] = []\n\n      nodes.push(document.createTextNode('Search'))\n\n      const mark = document.createElement('strong')\n      mark.textContent = ` '${queryText}' `\n      nodes.push(mark)\n      nodes.push(document.createTextNode(this.item.titleScope))\n\n      this.titleNodes = nodes\n    } else if (queryText) {\n      this.titleNodes = this.emphasizeTextMatchingQuery(this.item.title, queryText)\n    }\n\n    return this\n  }\n\n  connectedCallback() {\n    if (this.subtitle) {\n      this.subtitleElement.removeAttribute('hidden')\n    }\n\n    // titleNodes can contain <strong> tags to emphasise any text present in the query\n    // so we can replace the plain text title with these, if there are any\n    if (this.titleNodes.length > 0) {\n      this.titleElement.textContent = ''\n      this.titleElement.append(...this.titleNodes)\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onClick(event: Event) {\n    this.activate(this.commandPalette, event)\n  }\n\n  get commandPalette() {\n    return this.closest<CommandPalette>('command-palette')!\n  }\n\n  static observedAttributes = ['data-selected', 'data-item-title', 'data-subtitle']\n\n  attributeChangedCallback(name: string, _old: string, newValue: string) {\n    if (this.rendered) {\n      if (name === 'data-selected') {\n        this.setSelectionAppearance()\n      } else if (name === 'data-item-title') {\n        this.titleElement.textContent = newValue\n      } else if (name === 'data-subtitle') {\n        this.subtitleElement.textContent = newValue\n      }\n    }\n  }\n\n  setSelectionAppearance() {\n    if (this.selected) {\n      this.containerElement.classList.add('color-bg-subtle')\n      this.hintText.hidden = false\n    } else {\n      this.containerElement.classList.remove('color-bg-subtle')\n      this.hintText.hidden = true\n    }\n  }\n\n  renderLinkContainer(content: TemplateResult) {\n    return html`\n      <a\n        data-target=\"${this.containerDataTarget}\"\n        data-action=\"click:command-palette-item#onClick\"\n        href=\"${this.href}\"\n        class=\"${this.containerClasses}\"\n        style=\"${this.containerStyle}\"\n      >\n        ${content}\n      </a>\n    `\n  }\n\n  renderSpanContainer(content: TemplateResult) {\n    return html`\n      <span\n        data-target=\"${this.containerDataTarget}\"\n        class=\"${this.containerClasses}\"\n        style=\"${this.containerStyle}\"\n        data-action=\"click:command-palette-item#onClick\"\n      >\n        ${content}\n      </span>\n    `\n  }\n\n  renderElementContent(): TemplateResult {\n    return html`\n      <div\n        data-target=\"command-palette-item.iconElement\"\n        class=\"mr-2 color-fg-muted d-flex flex-items-center\"\n        style=\"height: 24px; min-width: 16px;\"\n      ></div>\n\n      <div class=\"flex-1 d-flex flex-column\" style=\"line-height: 24px;\">\n        <span data-target=\"command-palette-item.titleElement\" class=\"color-fg-default f5\">${this.itemTitle}</span>\n        <p data-target=\"command-palette-item.subtitleElement\" class=\"color-fg-muted f6 mb-0\" hidden>${this.subtitle}</p>\n      </div>\n\n      <div class=\"color-fg-muted f5\" style=\"line-height: 20px;\">\n        <span class=\"hide-sm\" data-target=\"command-palette-item.hintText\" style=\"line-height: 24px;\" hidden\n          >${this.getHint()}</span\n        >\n        <span\n          class=\"hide-sm\"\n          data-target=\"command-palette-item.persistentHint\"\n          style=\"line-height: 24px;\"\n          hidden\n        ></span>\n      </div>\n    `\n  }\n\n  renderBaseElement() {\n    const content = this.renderElementContent()\n    const itemTemplate = () => {\n      if (this.href) {\n        return this.renderLinkContainer(content)\n      } else {\n        return this.renderSpanContainer(content)\n      }\n    }\n\n    render(itemTemplate(), this)\n    this.rendered = true\n  }\n\n  // Behavior moved over from Item.ts\n\n  // Link behavior\n\n  activateLinkBehavior(commandPalette: CommandPalette, event: Event, isPlatformMetaKey: boolean) {\n    const link = this.containerElement\n\n    if (isPlatformMetaKey && link instanceof HTMLAnchorElement) {\n      this.newTabOpened = true\n      this.openLinkInNewTab(link)\n    } else {\n      this.newTabOpened = false\n      this.openLink(link)\n    }\n  }\n\n  openLinkInNewTab(link: HTMLAnchorElement) {\n    const previousTarget = link.getAttribute('target')\n    link.setAttribute('target', '_blank')\n    link.click()\n\n    if (previousTarget) {\n      link.setAttribute('target', previousTarget)\n    } else {\n      link.removeAttribute('target')\n    }\n  }\n\n  openLink(link: HTMLAnchorElement) {\n    link.click()\n  }\n\n  //Compy behavior\n\n  /**\n   * Copy given text to the clipboard and display a hint to the user.\n   *\n   * @param text to be copied\n   * @param hintText to display to user (defaults to 'Copied!')\n   */\n  copyToClipboardAndAnnounce(text: string, hintText?: string) {\n    copyText(text)\n\n    const hint = this.hintText\n    const previousHint = hint.textContent\n    hint.classList.add('color-fg-success')\n    hint.textContent = hintText ?? 'Copied!'\n    setTimeout(() => {\n      hint.classList.remove('color-fg-success')\n      hint.textContent = previousHint\n    }, 2000)\n  }\n\n  // Default hint behavior\n\n  /**\n   * Returns hint text to display on hover\n   */\n  getHint(): TemplateResult {\n    if (this.item instanceof AccessPolicyItem || this.item instanceof HelpItem) {\n      return html``\n    } else if (this.hint) {\n      return html`<span class=\"hide-sm\">${this.hint}</span>`\n    } else if (this.item instanceof ServerDefinedItem && this.item.scope) {\n      return html`<div class=\"hide-sm\">\n        <kbd class=\"hx_kbd\">Enter</kbd>\n        to jump to\n        <kbd class=\"hx_kbd ml-1\">Tab</kbd>\n        to search\n      </div>`\n    } else {\n      return html`<span class=\"hide-sm\">Jump to</span>`\n    }\n  }\n\n  /**\n   * Takes a string and emphasizes the portion that matches. The match is case\n   * insensitive and emphasizes any partial match.\n   *\n   * When there is no match, an array containing a single text node is returned.\n   *\n   * @param text\n   * @param queryText\n   * @returns list of nodes representing the text\n   */\n  emphasizeTextMatchingQuery(text: string, queryText: string): Node[] {\n    if (!hasMatch(queryText, text)) {\n      const textNodeWithEverything = document.createTextNode(text)\n      return [textNodeWithEverything]\n    }\n\n    const nodes = [] as Node[]\n    let lastPosition = 0\n    for (const matchingPosition of positions(queryText, text)) {\n      const notMatchingText = text.slice(lastPosition, matchingPosition)\n      if (notMatchingText !== '') {\n        const textNode = document.createTextNode(text.slice(lastPosition, matchingPosition))\n        nodes.push(textNode)\n      }\n\n      lastPosition = matchingPosition + 1\n      const mark = document.createElement('strong')\n      mark.textContent = text[matchingPosition]!\n      nodes.push(mark)\n    }\n\n    const textNode = document.createTextNode(text.slice(lastPosition))\n    nodes.push(textNode)\n\n    return nodes\n  }\n}\n","import type {Item, Octicon, Page, Provider, ProviderResponse} from '@github-ui/command-palette'\nimport {attr, controller} from '@github/catalyst'\nimport {CommandPaletteItemElement} from '../../assets/modules/github/command-palette/command-palette-item-element'\nimport {CommandPaletteItemGroupElement} from '../../assets/modules/github/command-palette/command-palette-item-group-element'\nimport {GlobalProvidersPage} from '../../assets/modules/github/command-palette/pages/global-providers-page'\nimport type {OcticonSvgs} from './command-palette-page-stack-element'\nimport {Query} from '../../assets/modules/github/command-palette/query'\nimport type {Scope} from '../../assets/modules/github/command-palette/command-palette-scope-element'\nimport {debounce} from '@github/mini-throttle/decorators'\nimport {ServerDefinedProvider} from '../../assets/modules/github/command-palette/providers/server-defined-provider'\n\ntype PageProps = {\n  page?: Page\n  hidden?: boolean\n  defaultScopeId?: string\n  defaultScopeType?: string\n}\n\n@controller\nexport class CommandPalettePageElement extends HTMLElement {\n  static TopResultThreshold = 6.5\n\n  @attr isRoot = false\n  @attr pageTitle = ''\n  @attr scopeId = ''\n  @attr scopeType = ''\n  @attr hasVisibleTip = false\n\n  currentHeight = 0\n  octicons: OcticonSvgs = {}\n  #query: Query\n  requestsInProgress: Array<Array<Promise<void>>> = []\n  #page: Page | undefined\n\n  /*\n    This constructor should only used for attribute setting.\n    Other setup should be performed in `connectedCallback`.\n    See https://github.github.io/catalyst/guide/anti-patterns/\n  */\n  /* eslint-disable-next-line custom-elements/no-constructor */\n  constructor(props: PageProps = {}) {\n    super()\n\n    this.hidden = props.hidden ?? true\n    this.page = props.page\n\n    this.#query = new Query('', '', {\n      scope: this.scope,\n      subjectId: props.defaultScopeId,\n      subjectType: props.defaultScopeType,\n    })\n  }\n\n  tryDefaultSelection = true\n\n  // a cache of Items organized by query path\n  items: {\n    [queryPath: string]: Item[]\n  } = {}\n\n  get providers(): Provider[] {\n    return this.page?.providers || []\n  }\n\n  get query(): Query {\n    return this.#query\n  }\n\n  set query(newQuery: Query) {\n    // Take any existing items that we know about and add them to the new query's cache immediately\n    // This prevents items from briefly disappearing between each keystroke\n    if (!this.items[newQuery.path]) {\n      this.items[newQuery.path] = this.currentItems.filter(item => {\n        return item.calculateScore(newQuery.text) > 0\n      })\n    }\n\n    this.#query = newQuery\n  }\n\n  get scope(): Scope {\n    return {\n      text: this.pageTitle,\n      type: this.scopeType,\n      id: this.scopeId,\n      tokens: [],\n    }\n  }\n\n  get selectedItem(): CommandPaletteItemElement | undefined {\n    return this.findSelectedElement()\n  }\n\n  set selectedItem(newSelection: CommandPaletteItemElement | undefined) {\n    const currentlySelected = this.findSelectedElement()\n\n    if (currentlySelected) {\n      currentlySelected.selected = false\n    }\n\n    if (newSelection) {\n      newSelection.selected = true\n      this.selectedItemChanged(newSelection.item)\n    }\n  }\n\n  get page(): Page | undefined {\n    return this.#page\n  }\n\n  set page(page: Page | undefined) {\n    if (!page) return\n\n    this.#page = page\n    this.pageTitle = page.title\n    this.scopeId = page.scopeId\n    this.scopeType = page.scopeType\n  }\n\n  // We're unable to use Catalyst targets here since the groups get rebuilt as new results come in\n  get groups(): CommandPaletteItemGroupElement[] {\n    return Array.from(this.querySelectorAll<CommandPaletteItemGroupElement>('command-palette-item-group'))\n  }\n\n  get visibleGroups(): CommandPaletteItemGroupElement[] {\n    return this.groups.filter(g => !g.hidden)\n  }\n\n  get currentItems(): Item[] {\n    const items = this.items[this.query.path]\n\n    if (!items) return []\n\n    if (this.query.isBlank()) {\n      // use default sort order returned from server when no query is present\n      return items.sort((a, b) => b.priority - a.priority)\n    } else {\n      return items.sort((a, b) => {\n        const aScore = a.calculateScore(this.query.text)\n        const bScore = b.calculateScore(this.query.text)\n\n        // sort by score and then use priority as a tie-breaker\n        return bScore - aScore || b.priority - a.priority\n      })\n    }\n  }\n\n  get firstItem(): CommandPaletteItemElement | undefined {\n    const visibleGroups = this.visibleGroups\n\n    if (visibleGroups.length > 0) {\n      return visibleGroups[0]!.querySelector<CommandPaletteItemElement>('command-palette-item')!\n    }\n  }\n\n  get shouldSetDefaultSelection(): boolean {\n    return this.tryDefaultSelection && this.query.isPresent()\n  }\n\n  get isSelectedItemInvalid() {\n    return !this.currentItems.some(item => item.id === this.selectedItem?.itemId)\n  }\n\n  updateSelectedItem() {\n    // Reset selected item if it is no longer in the list\n    if (this.isSelectedItemInvalid) {\n      this.clearSelection()\n    }\n\n    if (this.setDefaultSelection()) {\n      this.selectedItem = this.firstItem\n    }\n  }\n\n  setDefaultSelection() {\n    const inScopeOrSearch = this.query.hasScope() || this.query.isPresent()\n    return this.tryDefaultSelection && inScopeOrSearch\n  }\n\n  clearSelection() {\n    this.selectedItem = undefined\n  }\n\n  findSelectedElement(): CommandPaletteItemElement | undefined {\n    return this.querySelector<CommandPaletteItemElement>('command-palette-item[data-selected]')!\n  }\n\n  findGroup(groupId: string): CommandPaletteItemGroupElement {\n    return this.groups.find(g => g.groupId === groupId)!\n  }\n\n  navigate(indexDiff: number) {\n    this.tryDefaultSelection = false\n\n    const movingDownward = indexDiff > 0\n\n    const scrollOptions = {\n      behavior: 'smooth',\n      block: 'nearest',\n    } as ScrollIntoViewOptions\n\n    if (this.selectedItem) {\n      let next\n\n      if (movingDownward) {\n        next = this.selectedItem?.nextElementSibling as CommandPaletteItemElement\n      } else {\n        next = this.selectedItem?.previousElementSibling as CommandPaletteItemElement\n      }\n\n      if (next) {\n        this.selectedItem = next\n        this.selectedItem.scrollIntoView(scrollOptions)\n      } else if (this.selectedItem) {\n        // move to next/previous visible group\n        const nextGroup = this.visibleGroups[this.calculateIndex(indexDiff)]!\n        nextGroup.scrollIntoView(scrollOptions)\n\n        if (movingDownward) {\n          this.selectedItem = nextGroup.firstItem\n        } else {\n          this.selectedItem = nextGroup.lastItem\n        }\n      }\n    } else {\n      this.selectedItem = this.firstItem\n    }\n  }\n\n  /**\n   * Calculate a valid index by adding a number (positive or negative). If the\n   * index goes out of bounds, it is moved into bounds again.\n   *\n   * For example, if you have 3 items and the current index is 1.\n   * - When you pass 1, it will return 2.\n   * - When you pass 2, it will return 0.\n   * - When you pass -2, it will return 2.\n   *\n   * JavaScript modulo operator doesn't handle negative numbers the same as\n   * positive numbers so we have to do some additional work in the last line.\n   *\n   * @param indexDiff a positive or negative number\n   * @returns new index (always in bound)\n   */\n  calculateIndex(indexDiff: number) {\n    let currentIndex = this.visibleGroups.findIndex(group => group.groupId === this.selectedItem?.item.group)\n\n    if (this.findGroup(CommandPaletteItemGroupElement.topGroupId).firstItem === this.selectedItem) {\n      currentIndex = 0\n    }\n\n    const newIndexUnbounded = currentIndex + indexDiff\n    const length = this.visibleGroups.length\n    return ((newIndexUnbounded % length) + length) % length\n  }\n\n  async fetchWithDebounce(provider: Provider, query: Query, isEmpty: boolean): Promise<ProviderResponse> {\n    if (provider instanceof ServerDefinedProvider) {\n      return provider.element.fetchWithDebounce(query, isEmpty)\n    } else {\n      return provider.fetch(query, isEmpty)\n    }\n  }\n\n  async fetch(providers: Provider[] = this.providers, givenOptions: {isEmpty?: boolean} = {}) {\n    if (this.hidden) return\n\n    const defaultOptions = {isEmpty: false}\n    const options = {\n      ...defaultOptions,\n      ...givenOptions,\n    }\n\n    const query = this.query\n\n    await this.fetchWithSpinner(\n      providers.map(async provider => {\n        if (!provider || !provider.enabledFor(query)) return\n\n        // For prefetched providers, this will prefetch the data and store the results in memory\n        if (provider.prefetch) await provider.prefetch(query)\n\n        const data = await this.fetchWithDebounce(provider, query, options.isEmpty)\n\n        if (data) {\n          if (data.error) {\n            this.fetchError()\n          }\n\n          if (data.octicons && data.octicons.length > 0) {\n            this.cacheIcons(data.octicons, true)\n          }\n\n          if (data.results.length > 0) {\n            this.addItems(query, data.results)\n          }\n\n          this.renderCurrentItems()\n        }\n      }),\n    )\n\n    this.itemsUpdated()\n  }\n\n  /**\n   * This function uses the `requestsInProgress` array to show/hide\n   * the loading spinner only when all in-flight requests have finished.\n   *\n   * @param promises an array of promises to be executed\n   */\n  async fetchWithSpinner(promises: Array<Promise<void>>) {\n    // push the array of promises into the request stack\n    this.requestsInProgress.push(promises)\n\n    // show the loading spinner & perform the requests\n    this.loadingStateChanged(true)\n    await Promise.all(promises)\n\n    // remove this group of requests from the request stack once they have finished\n    this.requestsInProgress.splice(this.requestsInProgress.indexOf(promises), 1)\n\n    // if there are no other requests still pending, we can hide the loading spinner\n    this.loadingStateChanged(this.requestsInProgress.length > 0)\n  }\n\n  addItems(query: Query, items: Item[]) {\n    if (!(query.path in this.items)) {\n      this.items[query.path] = []\n    }\n\n    this.items[query.path]!.push(...items)\n  }\n\n  cacheIcons(octicons: Octicon[], dispatchEvent = false) {\n    for (const octicon of octicons) {\n      this.octicons[octicon.id] = octicon.svg\n    }\n\n    if (dispatchEvent) {\n      this.dispatchEvent(new CustomEvent('command-palette-page-octicons-cached', {bubbles: true, detail: {octicons}}))\n    }\n  }\n\n  buildGroups(items: Item[]) {\n    const groupIds = [\n      CommandPaletteItemGroupElement.topGroupId,\n      CommandPaletteItemGroupElement.defaultGroupId,\n      ...new Set(items.map(item => item.group)),\n    ]\n\n    const querySelector = groupIds.map(id => `command-palette-item-group[data-group-id=\"${id}\"]`).join(',')\n    const groupList = document.querySelectorAll<CommandPaletteItemGroupElement>(querySelector)\n\n    for (const groupElement of groupList) {\n      if (!this.querySelector(`command-palette-item-group[data-group-id=\"${groupElement.groupId}\"]`)) {\n        this.append(groupElement.cloneNode(true))\n      }\n    }\n  }\n\n  // Semi-hacky way to remove the top border from the first visible group,\n  // but ensure that the other groups still have their top borders.\n  setGroupBorders() {\n    if (this.visibleGroups.length > 0) {\n      this.visibleGroups[0]!.classList.remove('border-top')\n\n      for (const group of this.visibleGroups) {\n        const i = this.visibleGroups.indexOf(group)\n\n        if (i === 0) {\n          group.classList.remove('border-top')\n\n          if (group.header) {\n            group.classList.remove('py-2')\n            group.classList.add('mb-2')\n\n            if (!this.hasVisibleTip) {\n              group.classList.add('mt-3')\n            } else {\n              group.classList.remove('mt-3')\n            }\n          }\n        } else {\n          group.classList.add('border-top')\n\n          if (group.header) {\n            group.classList.remove('mb-2', 'mt-3')\n            group.classList.add('py-2')\n          }\n        }\n      }\n    }\n  }\n\n  createItemElementAndRender(item: Item, selected: boolean, queryText: string): CommandPaletteItemElement {\n    const element = new CommandPaletteItemElement()\n    element.setItemAttributes(item)\n    element.render(selected, queryText)\n\n    return element\n  }\n\n  @debounce(10)\n  renderCurrentItems() {\n    this.reset()\n\n    const currentItems = this.currentItems\n    const renderedItemIds: string[] = []\n\n    if (currentItems && currentItems.length > 0) {\n      this.buildGroups(currentItems)\n\n      for (const item of currentItems) {\n        if (renderedItemIds.indexOf(item.id) >= 0) continue\n\n        // add the item priority for top result consideration\n        const itemScore = item.calculateScore(this.query.text) + item.priority\n        let groupId = item.group || CommandPaletteItemGroupElement.defaultGroupId\n\n        if (currentItems.indexOf(item) === 0 && itemScore > CommandPalettePageElement.TopResultThreshold) {\n          groupId = 'top'\n        }\n\n        const itemElement = this.createItemElementAndRender(item, false, this.query.text)\n        const group = this.querySelector<CommandPaletteItemGroupElement>(\n          `command-palette-item-group[data-group-id=\"${groupId}\"]`,\n        )!\n\n        if (!group.atLimitForScopeType(this.scopeType)) {\n          group.push(itemElement)\n          renderedItemIds.push(item.id)\n\n          if (item.icon) {\n            if (item.icon.type === 'octicon') {\n              const iconSvg = this.octicons[item.icon.id!]\n              const fallbackIconSvg = this.octicons['dash-color-fg-muted']!\n\n              itemElement.renderOcticon(iconSvg || fallbackIconSvg)\n            } else if (item.icon.type === 'avatar') {\n              itemElement.renderAvatar(item.icon.url!, item.icon.alt!)\n            }\n          } else {\n            itemElement.iconElement.hidden = true\n          }\n\n          itemElement.addEventListener('mousemove', e => {\n            const moved = e.movementX !== 0 || e.movementY !== 0\n\n            if (moved && this.selectedItem?.itemId !== itemElement.itemId) {\n              this.tryDefaultSelection = false\n              this.selectedItem = itemElement\n            }\n          })\n        }\n      }\n\n      if (this.shouldSetDefaultSelection) {\n        this.selectedItem = this.firstItem\n      }\n\n      this.recomputeStyles()\n      this.updateSelectedItem()\n    }\n  }\n\n  recomputeStyles() {\n    this.setGroupBorders()\n    this.setMaxHeight()\n  }\n\n  // sort of like using CSS vh units, we set the max height of the results container to be a % the height of the viewport\n  get maximumHeight(): number {\n    const maximumPixelHeight = 475\n    const percentage = 50 // the item stack should never be more than X% of the viewport height\n    const percentagePixels = window.innerHeight * (percentage / 100)\n\n    return Math.min(percentagePixels, maximumPixelHeight)\n  }\n\n  get innerContentHeight(): number {\n    let height = 0\n\n    for (const child of this.children) {\n      const el = child as HTMLElement\n      const style = getComputedStyle(el)\n      const marginTop = parseInt(style.marginTop.replace('px', ''), 10)\n      const marginBottom = parseInt(style.marginBottom.replace('px', ''), 10)\n      const totalHeight = el.offsetHeight + marginTop + marginBottom\n\n      if (el.offsetHeight > 0) {\n        height += totalHeight\n      }\n    }\n\n    return height\n  }\n\n  // setting the max (& min) height of the item stack will trigger a CSS transition\n  // to smoothly animate as results are added and removed\n  setMaxHeight() {\n    // we disable the transition if the height change is too drastic (X% of max height)\n    const distanceThresholdPercentage = 0.9\n    const distanceThreshold = this.maximumHeight * distanceThresholdPercentage\n\n    const newHeight = Math.round(Math.min(this.maximumHeight, this.innerContentHeight))\n    const diff = Math.abs(this.currentHeight - newHeight)\n\n    if (diff > distanceThreshold) {\n      this.classList.add('no-transition')\n    } else {\n      this.classList.remove('no-transition')\n    }\n\n    this.setAttribute('style', `max-height:${newHeight}px; min-height:${newHeight}px;`)\n    this.currentHeight = newHeight\n  }\n\n  selectedItemChanged(item: Item) {\n    const event = new CustomEvent('selectedItemChanged', {\n      bubbles: true,\n      cancelable: true,\n      detail: {\n        item,\n        isDefaultSelection: this.tryDefaultSelection,\n      },\n    })\n\n    return this.dispatchEvent(event as CustomEvent)\n  }\n\n  loadingStateChanged(loading: boolean) {\n    const event = new CustomEvent('loadingStateChanged', {\n      bubbles: true,\n      cancelable: true,\n      detail: {\n        loading,\n      },\n    })\n\n    return this.dispatchEvent(event as CustomEvent)\n  }\n\n  fetchError() {\n    const event = new CustomEvent('pageFetchError', {\n      bubbles: true,\n      cancelable: true,\n    })\n\n    return this.dispatchEvent(event as CustomEvent)\n  }\n\n  itemsUpdated() {\n    const currentItems = this.currentItems\n    const searchAndHelpItems = currentItems.filter(item => {\n      return (\n        item.group === CommandPaletteItemGroupElement.footerGroupId ||\n        CommandPaletteItemGroupElement.helpGroupIds.includes(item.group)\n      )\n    })\n\n    if (currentItems.length - searchAndHelpItems.length === 0 && this.requestsInProgress.length > 0) return\n\n    const event = new CustomEvent('itemsUpdated', {\n      bubbles: true,\n      detail: {\n        items: currentItems,\n        queryPath: this.query.immutableCopy().path,\n      },\n    })\n\n    return this.dispatchEvent(event)\n  }\n\n  // Called when a previously hidden page is re-shown\n  reactivate(query: Query) {\n    this.query = query\n    this.hidden = false\n    this.tryDefaultSelection = true\n    this.recomputeStyles()\n    this.fetch()\n  }\n\n  reset() {\n    this.tryDefaultSelection = true\n    this.textContent = ''\n  }\n\n  connectedCallback() {\n    this.classList.add('rounded-bottom-2', 'page-stack-transition-height')\n    if (!this.getAttribute('data-targets')) {\n      this.setAttribute('data-targets', 'command-palette-page-stack.pages')\n    }\n    this.setAttribute('style', `max-height:400px;`)\n\n    if (!this.page) {\n      this.page = new GlobalProvidersPage({\n        title: this.pageTitle,\n        scopeId: this.scopeId,\n        scopeType: this.scopeType,\n      })\n    }\n  }\n\n  clearItems() {\n    this.items = {}\n    this.reset()\n  }\n}\n","import type {Scope} from '../../assets/modules/github/command-palette/command-palette-scope-element'\nimport {CommandPaletteScopeElement} from '../../assets/modules/github/command-palette/command-palette-scope-element'\nimport type {Octicon, Page} from '@github-ui/command-palette'\nimport {attr, controller, targets} from '@github/catalyst'\nimport {CommandPalettePageElement} from './command-palette-page-element'\nimport {Query} from '../../assets/modules/github/command-palette/query'\n\nexport type OcticonSvgs = {[name: string]: string}\n\n@controller\nexport class CommandPalettePageStackElement extends HTMLElement {\n  @attr currentMode = ''\n  @attr currentQueryText = ''\n  @attr defaultScopeId = ''\n  @attr defaultScopeType = ''\n  @attr hasVisibleTip = false\n\n  @targets pages: CommandPalettePageElement[]\n  @targets defaultPages: CommandPalettePageElement[]\n  @targets localOcticons: HTMLElement[]\n\n  eventListenersBound = false\n  octiconCache: OcticonSvgs = {}\n\n  get currentPage(): CommandPalettePageElement {\n    return this.pages[this.pages.length - 1]!\n  }\n\n  get nonRootPages(): CommandPalettePageElement[] {\n    return this.pages.filter(p => !p.isRoot)\n  }\n\n  get resetPages(): CommandPalettePageElement[] {\n    const defaultPages = this.defaultPages\n    const lastPageIndex = defaultPages.length - 1\n\n    return defaultPages.map((page, index) => {\n      const pageElement = page.cloneNode() as CommandPalettePageElement\n      pageElement.hidden = index !== lastPageIndex\n      pageElement.removeAttribute('data-targets')\n\n      return pageElement\n    })\n  }\n\n  get query(): Query {\n    return new Query(this.currentQueryText, this.currentMode, {\n      scope: this.scope,\n      subjectId: this.defaultScopeId,\n      subjectType: this.defaultScopeType,\n    })\n  }\n\n  get scope(): Scope {\n    if (this.currentPage.isRoot) {\n      return CommandPaletteScopeElement.emptyScope\n    }\n\n    return {\n      text: this.currentPage.pageTitle,\n      type: this.currentPage.scopeType,\n      id: this.currentPage.scopeId,\n      tokens: this.nonRootPages.map(page => {\n        return {\n          text: page.pageTitle,\n          type: page.scopeType,\n          id: page.scopeId,\n          value: page.pageTitle,\n        }\n      }),\n    }\n  }\n\n  push(page: Page, hidden = false) {\n    if (this.hasPage(page)) return\n\n    const pageElement = new CommandPalettePageElement({\n      page,\n      hidden,\n      defaultScopeId: this.defaultScopeId,\n      defaultScopeType: this.defaultScopeType,\n    })\n    pageElement.hasVisibleTip = this.hasVisibleTip\n\n    this.hideCurrentPages()\n    this.append(pageElement)\n    pageElement.octicons = this.octiconCache\n    pageElement.fetch()\n    this.pageStackUpdated()\n  }\n\n  pop() {\n    if (!this.currentPage.isRoot) {\n      this.removeChild(this.currentPage)\n      this.activateCurrentPage()\n    }\n  }\n\n  clear(activateAfterClear = true) {\n    for (const page of this.nonRootPages) {\n      this.removeChild(page)\n    }\n\n    if (activateAfterClear) this.activateCurrentPage()\n  }\n\n  reset() {\n    this.clear(false)\n    this.currentPage.clearItems()\n\n    for (const pageElement of this.resetPages) {\n      this.append(pageElement)\n    }\n\n    this.currentPage.octicons = this.octiconCache\n    this.pageStackUpdated()\n  }\n\n  activateCurrentPage() {\n    this.currentQueryText = ''\n    this.currentPage.hasVisibleTip = this.hasVisibleTip\n    this.currentPage.octicons = this.octiconCache\n    this.currentPage.reactivate(this.query)\n    this.pageStackUpdated()\n  }\n\n  // Checks if the stack contains a page matching these props.\n  // Currently only checks scope ID, other attributes can be added as needed.\n  hasPage(page: Page): boolean {\n    return this.pages.some(existingPage => existingPage.scopeId === page.scopeId)\n  }\n\n  hideCurrentPages() {\n    for (const page of this.pages) {\n      page.hidden = true\n    }\n  }\n\n  navigate(diff: number) {\n    this.currentPage.navigate(diff)\n  }\n\n  cacheOcticons(event: Event) {\n    if (!(event instanceof CustomEvent)) return\n    this.addOcticonsToCache(event.detail.octicons)\n  }\n\n  cacheLocalOcticons() {\n    this.addOcticonsToCache(\n      this.localOcticons.map(octiconElement => {\n        return {id: octiconElement.getAttribute('data-octicon-id'), svg: octiconElement.innerHTML.trim()} as Octicon\n      }),\n    )\n  }\n\n  addOcticonsToCache(octicons: Octicon[]) {\n    for (const octicon of octicons) {\n      this.octiconCache[octicon.id] = octicon.svg\n    }\n  }\n\n  // Things that need to be done whenever the command palette is activated\n  commandPaletteActivated() {\n    this.hideCurrentPages()\n    this.activateCurrentPage()\n    this.bindListeners()\n  }\n\n  pageStackUpdated() {\n    this.dispatchEvent(new CustomEvent('command-palette-page-stack-updated', {bubbles: true}))\n  }\n\n  connectedCallback() {\n    this.setAttribute('data-target', 'command-palette.pageStack')\n\n    this.cacheLocalOcticons()\n  }\n\n  static observedAttributes = ['data-current-mode', 'data-current-query-text', 'data-has-visible-tip']\n\n  attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\n    if (!this.isConnected) return\n    if (!this.currentPage) return\n\n    if (oldValue !== newValue) {\n      switch (name) {\n        case 'data-current-query-text':\n        case 'data-current-mode':\n          this.currentPage.query = this.query\n          this.currentPage.fetch()\n          break\n        case 'data-has-visible-tip':\n          this.currentPage.hasVisibleTip = this.hasVisibleTip\n          break\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    this.unbindListeners()\n  }\n\n  bindListeners() {\n    // we can't use ResizeObserver because we're actively\n    // resizing this element when we `setMaxHeight`.\n\n    if (!this.eventListenersBound) {\n      // eslint-disable-next-line github/prefer-observers\n      window.addEventListener('resize', () => this.currentPage.setMaxHeight())\n      this.eventListenersBound = true\n    }\n  }\n\n  unbindListeners() {\n    window.removeEventListener('resize', () => this.currentPage.setMaxHeight())\n    this.eventListenersBound = false\n  }\n}\n"],"names":["CommandPaletteItemElement","HTMLElement","activate","commandPalette","event","item","sendTrackingEvent","copy","select","renderOcticon","octiconSvg","iconElement","innerHTML","renderAvatar","src","alt","avatarTemplate","JumpToOrgItem","html","JumpToTeamItem","render","setItemAttributes","itemId","id","itemTitle","title","hint","href","path","subtitle","ServerDefinedItem","element","selected","queryText","renderBaseElement","AccessPolicyItem","typeahead","titleNodes","emphasizeTextMatchingQuery","HelpItem","span","document","createElement","persistentHint","hidden","SearchLinkItem","nodes","push","createTextNode","mark","textContent","titleScope","connectedCallback","subtitleElement","removeAttribute","length","titleElement","append","onClick","closest","attributeChangedCallback","name","_old","newValue","rendered","setSelectionAppearance","containerElement","classList","add","hintText","remove","renderLinkContainer","content","containerDataTarget","containerClasses","containerStyle","renderSpanContainer","renderElementContent","getHint","activateLinkBehavior","isPlatformMetaKey","link","HTMLAnchorElement","newTabOpened","openLinkInNewTab","openLink","previousTarget","getAttribute","setAttribute","click","copyToClipboardAndAnnounce","text","copyText","previousHint","setTimeout","scope","hasMatch","lastPosition","matchingPosition","positions","notMatchingText","slice","textNode","score","observedAttributes","attr","target","controller","CommandPalettePageElement","providers","page","query","newQuery","items","currentItems","filter","calculateScore","pageTitle","type","scopeType","scopeId","tokens","selectedItem","findSelectedElement","newSelection","currentlySelected","selectedItemChanged","groups","Array","from","querySelectorAll","visibleGroups","g","isBlank","sort","a","b","priority","aScore","bScore","firstItem","querySelector","shouldSetDefaultSelection","tryDefaultSelection","isPresent","isSelectedItemInvalid","some","updateSelectedItem","clearSelection","setDefaultSelection","inScopeOrSearch","hasScope","undefined","findGroup","groupId","find","navigate","indexDiff","movingDownward","scrollOptions","behavior","block","next","nextElementSibling","previousElementSibling","scrollIntoView","nextGroup","calculateIndex","lastItem","currentIndex","findIndex","group","CommandPaletteItemGroupElement","topGroupId","newIndexUnbounded","fetchWithDebounce","provider","isEmpty","ServerDefinedProvider","fetch","givenOptions","options","fetchWithSpinner","map","enabledFor","prefetch","data","error","fetchError","octicons","cacheIcons","results","addItems","renderCurrentItems","itemsUpdated","promises","requestsInProgress","loadingStateChanged","Promise","all","splice","indexOf","dispatchEvent","octicon","svg","CustomEvent","bubbles","detail","buildGroups","groupIds","defaultGroupId","Set","join","groupElement","cloneNode","setGroupBorders","i","header","hasVisibleTip","createItemElementAndRender","reset","renderedItemIds","itemScore","TopResultThreshold","itemElement","atLimitForScopeType","icon","iconSvg","fallbackIconSvg","url","addEventListener","e","movementX","movementY","recomputeStyles","setMaxHeight","maximumHeight","Math","min","window","innerHeight","innerContentHeight","height","child","children","style","getComputedStyle","marginTop","parseInt","replace","marginBottom","totalHeight","el","offsetHeight","distanceThreshold","newHeight","round","diff","abs","currentHeight","cancelable","isDefaultSelection","loading","searchAndHelpItems","footerGroupId","helpGroupIds","includes","queryPath","immutableCopy","reactivate","GlobalProvidersPage","clearItems","constructor","props","isRoot","Query","subjectId","defaultScopeId","subjectType","defaultScopeType","debounce","CommandPalettePageStackElement","currentPage","pages","nonRootPages","p","resetPages","defaultPages","lastPageIndex","index","pageElement","currentQueryText","currentMode","CommandPaletteScopeElement","emptyScope","value","hasPage","hideCurrentPages","octiconCache","pageStackUpdated","pop","removeChild","activateCurrentPage","clear","activateAfterClear","existingPage","cacheOcticons","addOcticonsToCache","cacheLocalOcticons","localOcticons","octiconElement","trim","commandPaletteActivated","bindListeners","oldValue","isConnected","disconnectedCallback","unbindListeners","eventListenersBound","removeEventListener","targets"],"sourceRoot":""}