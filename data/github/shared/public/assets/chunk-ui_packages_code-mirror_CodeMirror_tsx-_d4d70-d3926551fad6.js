"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_code-mirror_CodeMirror_tsx-_d4d70","ui_packages_code-mirror_CodeMirror_tsx-_d4d71"],{72646:(e,t,r)=>{r.d(t,{E:()=>o});let o=r(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},55643:(e,t,r)=>{r.d(t,{G:()=>a});var o=r(24774);function a(e=null,t="bottom"){return[o.S7.of(()=>({dom:e,top:"top"===t}))]}},66465:(e,t,r)=>{r.d(t,{BE:()=>c,Cw:()=>M,I6:()=>C,Lo:()=>d,Md:()=>g,TB:()=>k,TC:()=>y,TU:()=>m,YH:()=>h,Z3:()=>f,eO:()=>v,e_:()=>x,f9:()=>i,fV:()=>p,tJ:()=>b,td:()=>u,w0:()=>s,ye:()=>w});var o=r(15874),a=r(54528),n=r(6585),l=r(24774);let c=e=>e.state.selection.main,i=(e,t)=>{e.dispatch({selection:{anchor:t}})},s=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,r)=>{e.dispatch({selection:{anchor:t,head:r}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function f(e,t){let r=e.state.doc.lineAt(t);return{line:r.number-1,ch:t-r.from}}let p=(e,t)=>e.state.doc.line(t),g=(e,t,r)=>{let o=p(e,t);x(e,o.from,o.from,r)},h=(e,t,r)=>{let o=p(e,t);x(e,o.from,o.from+r.length,"")},b=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},v=(e,t,r)=>e.sliceDoc(t,r),x=(e,t,r,o)=>{e.dispatch({changes:{from:t,to:r,insert:o}})},y=(e,t)=>{let r=c(e);x(e,r.from,r.to,t)},C=(e,t)=>new a.ZX(e.state.doc,t).next(),k=(e,t,r)=>{let o=new a.ZX(e.state.doc,t).next();e.dispatch({changes:{from:o.value.from,to:o.value.to,insert:r}})},w=(e,t,r,o,a)=>{if(void 0!==r)try{let c=p(e,t),i=p(e,r);if(c&&i){e.focus();let t=a?i.from+a:i.to;u(e,c.from+(o??0),t),e.dispatch({effects:[l.Lz.scrollIntoView(n.OF.range(c.from,i.to),{y:"center"})]})}}catch(e){}else try{let r=p(e,t);r&&(e.focus(),i(e,r.from+(o??0)),e.dispatch({effects:[l.Lz.scrollIntoView(r.from,{y:"center"})]}))}catch(e){}};function M(e){return e.state.facet(o.Xt)}},18558:(e,t,r)=>{r.d(t,{JC:()=>o.JC,KK:()=>o.KK,SK:()=>n,Vy:()=>o.Vy,ai:()=>o.ai,oc:()=>o.oc,rd:()=>o.rd});var o=r(50515);let a=/(?:^|,)((?:[^,]|,(?=\+| |$))*(?:,(?=,))?)/g;function n(e){return Array.from(e.matchAll(a)).map(([,e])=>e)}},98164:(e,t,r)=>{r.d(t,{$$:()=>c,GI:()=>n,zw:()=>a});var o=r(18558);let a=()=>{let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");return!e||"all"===e.content},n=e=>/Enter|Arrow|Escape|Meta|Control|Mod|Esc/.test(e)||e.includes("Alt")&&e.includes("Shift"),l=new Set(["button","checkbox","color","file","hidden","image","radio","range","reset","submit"]),c=e=>{let t=(0,o.Vy)(e),r=a()&&!function(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),r=e.getAttribute("type")?.toLowerCase()??"text",o="true"===e.ariaReadOnly||"true"===e.getAttribute("aria-readonly")||null!==e.getAttribute("readonly");return("select"===t||"textarea"===t||"input"===t&&!l.has(r)||e.isContentEditable)&&!o}(e.target);return n(t)||r}},64846:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var o=r(9449),a=r(24774),n=r(55293),l=r(6585),c=r(5853),i=r(9299),s=r(45230),d=r(54528),u=r(15874);let m=(0,r(98164).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],f=[(0,s.b6)(),(0,u.WD)(),(0,a.$K)(),(0,u.SG)(),(0,a.vX)({position:"absolute"}),(0,d.$P)({top:!0}),a.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),a.w4.of([...m,...s.pw,...d.Eo,...s.cL])];var p=r(43720);let g={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"12px",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"12px",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},h=[{tag:[p._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[p._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[p._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[p._A.string,p._A.url,p._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[p._A.constant(p._A.name),p._A.propertyName,p._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[p._A.atom,p._A.number,p._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[p._A.function(p._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:p._A.definition(p._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:p._A.meta,color:"inherit"},{tag:p._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:p._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],b=[{tag:p._A.link,textDecoration:"underline"},{tag:p._A.emphasis,fontStyle:"italic"},{tag:p._A.strong,fontWeight:"bold"},{tag:p._A.strikethrough,textDecoration:"line-through"}],v=[...h,...b],x=[...h,...b];function y(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?x:v,...e];return[a.Lz.theme(g),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let C=e=>{let t=[l.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(a.Lz.lineWrapping),t};var k=r(66465);let w=(e,t)=>{let{state:r,placeholder:o,replacementText:a}=e.detail;"uploading"===r?(0,k.w0)(t)?(0,k.tJ)(t,o):(0,k.TC)(t,a):("uploaded"===r||"failed"===r)&&(0,k.TB)(t,o,a)},M=(e,t)=>{let{left:r,top:o}=e.detail,a=t.posAtCoords({x:r,y:o});a&&t.dispatch({selection:{anchor:a,head:a}})},A=new WeakMap;function L(e,t){if((0,k.w0)(e)){let r=(0,k.Lo)(e.state);(0,k.tJ)(e,`${t}${r}${t}`)}else{let r=(0,k.BE)(e);(0,k.TC)(e,t.repeat(2)),(0,k.f9)(e,r.anchor+t.length)}return!0}function _(e,t){let r=(0,k.BE)(e),o=e.state.doc.lineAt(r.from),a=(0,k.Lo)(e.state),n=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(a){let r=(a.endsWith("\n")?a.slice(0,-2):a).split("\n").map((t,r)=>{let a=o.number+r;return{text:e.state.doc.line(a).text,lineNumber:a}}),l=r.every(e=>n.test(e.text));for(let o=0;o<r.length;o++){let a=r[o];if(l){let t=a.text.match(n);t&&(0,k.YH)(e,a?.lineNumber,t[0])}else{let r=`${"ol"===t?`${o+1}.`:t} `;(0,k.Md)(e,a?.lineNumber,r)}}}else{let a=o.text.match(n);if(a)(0,k.YH)(e,o.number,a[0]);else{let a=`${"ol"===t?"1.":t} `;(0,k.Md)(e,o.number,a),o.text||(0,k.f9)(e,r.anchor+a.length)}}return!0}let S=[{key:"Mod-i",run:e=>L(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>L(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>L(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,k.Lo)(e.state);if(t){let r=`[${t}](url)`;(0,k.tJ)(e,r);let o=(0,k.I6)(e,r).value.from;(0,k.td)(e,o+t.length+3,o+t.length+6)}else{let t=(0,k.BE)(e);(0,k.TC)(e,"[](url)"),(0,k.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>_(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>_(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>_(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(A.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(A.set(e,!0),!1)}];function z(e){let t=a.NZ.line({attributes:{dir:"auto"}}),r=new l.vB;for(let{from:o,to:a}of e.visibleRanges)for(let n=o;n<=a;){let o=e.state.doc.lineAt(n);r.add(o.from,o.from,t),n=o.to+1}return r.finish()}let E=a.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=z(e.view))}constructor(e){this.decorations=z(e)}},{decorations:e=>e.decorations}),R=[a.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){A.get(t)||function(e,t){let r=(0,k.Lo)(e.state),o=t.clipboardData;if(r&&o){let a=o.getData("text/plain");if(!/^https?:\/\//i.test(a))return;a&&(t.preventDefault(),(0,k.tJ)(e,`[${r}](${a})`))}}(t,e),A.set(t,!1)}}),a.w4.of(S),E];var T=r(47404),$=r(5225),D=r(72646);let N=(0,$.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let r=await t.json();return Object.keys(r).map(e=>{let t=r[e];return{name:e,src:t[0],emoji:t[1]}})}),B=l.Pe.define({map:({from:e,to:t,severity:r},o)=>({from:o.mapPos(e),to:o.mapPos(t),severity:r})}),j=l.sU.define({create:()=>a.NZ.none,update(e,t){for(let r of(e=e.map(t.changes),t.effects))r.is(B)&&("error"===r.value.severity?e=e.update({add:[W.range(r.value.from,r.value.to)]}):"warning"===r.value.severity?e=e.update({add:[H.range(r.value.from,r.value.to)]}):"info"===r.value.severity&&(e=e.update({add:[O.range(r.value.from,r.value.to)]})));return e},provide:e=>a.Lz.decorations.from(e)}),W=a.NZ.mark({class:"CodeMirror-lint-mark-error"}),H=a.NZ.mark({class:"CodeMirror-lint-mark-warning"}),O=a.NZ.mark({class:"CodeMirror-lint-mark-info"}),Z=(e,t)=>{let{from:r,to:o,severity:a}=e.detail,n=(0,k.TU)(t,{line:r.lineNumber,ch:r.character}),l=(0,k.TU)(t,{line:o.lineNumber,ch:o.character});t.dispatch({effects:[B.of({from:n,to:l,severity:a})]})},I={ruby:[{tag:p._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}]},U=Object.keys(I);var X=r(55643);let q={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,s.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:s.Mg},K=(0,n.forwardRef)((e,t)=>{let{value:r="",extensions:s=[],keyBindings:d=[],height:u="85vh",width:m="100%",focusNextRenderRef:p,...g}=e,h=(0,n.useRef)(null),b=function({extensions:e=[],fileName:t="",onChange:r,spacing:o,isHpc:s,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:p="Enter file contents here",ariaLabelledBy:g,value:h,width:b="",height:v="",minHeight:x="",hideHelpUntilFocus:k,onCreateEditor:A,onDestroyEditor:L}){let _=(0,n.useRef)(void 0),S=(0,n.useMemo)(()=>new l.xx,[]),z=(0,n.useMemo)(()=>new l.xx,[]),E=(0,n.useMemo)(()=>new l.xx,[]),$=(0,n.useCallback)(e=>{e.docChanged&&r(e.state.doc.toString()||"")},[r]),B=a.Lz.updateListener.of($),W=a.Lz.theme({"&":{height:v,minHeight:x,width:b}}),H=(0,n.useMemo)(()=>[...f,B,W,(0,a.qf)(p),...C(o),[a.Lz.domEventHandlers({"secret-detected:lint":Z}),j],S.of([]),z.of([]),E.of([y()]),[a.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",g)}})],a.Lz.contentAttributes.of({"aria-labelledby":`${g} focus-trap-help-panel`}),a.Lz.editorAttributes.of({class:k?"hide-help-until-focus":""})],[B,W,p,o,S,z,E,g,k]);return u&&(H.push((0,a.A)()),H.push([a.Lz.domEventHandlers({"upload:editor:change":w,"upload:editor:cursor":M})])),s&&H.push(a.Lz.editorAttributes.of({"data-hpc":"true"})),d?H.push(l.$t.readOnly.of(!0)):H.push([function(e,t,r){let o=new l.xx;return[o.of(r?t:[]),a.w4.of([{key:e,run:function(e){let r=o.get(e.state)===t;return e.dispatch({effects:o.reconfigure(r?[]:t)}),!0}}])]}("Shift-Ctrl-m",a.w4.of([q]),!0),(0,X.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}())]),H=H.concat(e),(0,n.useEffect)(()=>{let e=m.current;if(!e)return;let t=l.$t.create({doc:h,extensions:H}),r=new a.Lz({state:t,parent:e});return A&&A(r),_.current=r,()=>{r.destroy(),L&&L(r)}},[]),(0,n.useEffect)(()=>{_.current&&(_.current.dispatch({effects:z.reconfigure([])}),_.current.dispatch({effects:l.Pe.reconfigure.of(H)}))},[z,H]),(0,n.useEffect)(()=>{if(_.current&&void 0!==h){let e=_.current.state.doc.toString()||"",t=h||"";t!==e&&_.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[h]),(0,n.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",r=e?c.e.find(r=>r.extensions.includes(e)||r.filename&&r.filename.test(t)):void 0;if(r&&_.current){var o;let e=(o=r.name,U.includes(o.toLowerCase())?I[o.toLowerCase()]:null);e&&_.current.dispatch({effects:E.reconfigure(y(e))}),"Markdown"===r.name?(_.current.dispatch({effects:S.reconfigure((0,i.markdown)({base:i.markdownLanguage}))}),_.current.dispatch({effects:l.Pe.reconfigure.of([...R,...H])}),_.current.dispatch({effects:z.reconfigure([D.E,(0,T.yU)({override:[async e=>(function(e,t=[]){let r=e.matchBefore(/:\w+/);if(!r||r&&r.from===r.to&&!e.explicit)return null;let o=t.filter(e=>-1!==e.name.indexOf(r.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:r.from,to:r.to,options:o,filter:!1}})(e,await N())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),l.Nb.highest(a.w4.of([{key:"Tab",run:T.$w}]))])})):(_.current.dispatch({effects:z.reconfigure([])}),_.current.dispatch({effects:S.reconfigure(await r.load())}))}};_.current&&e()},[t,S,z,H,E]),_}({parentRef:h,value:r,height:u,width:m,extensions:[...s,a.w4.of(d)],...g});return(0,n.useImperativeHandle)(t,()=>({editor:h.current,view:b.current}),[h,b]),p?.current&&b&&(window.requestAnimationFrame(()=>{b.current&&!b.current.hasFocus&&b.current.focus()}),p.current=!1),(0,o.jsx)("div",{ref:h})});K.displayName="CodeMirror";let F=K}}]);
//# sourceMappingURL=ui_packages_code-mirror_CodeMirror_tsx-_d4d70-c27fe18284d2.js.map