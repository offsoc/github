"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["billing","ui_packages_soft-navigate_soft-navigate_ts"],{17938:(e,t,n)=>{var a=n(98893),r=n.n(a),o=n(97797);(0,o.on)("submit",".js-braintree-encrypt",function({currentTarget:e}){let t=e.getAttribute("data-braintree-key");if(!t)throw Error("Missing `data-braintree-key` attribute on element");window.Braintree.create(t).encryptForm(e)});var i=n(21403),s=n(5728);function l(e){let t=e.closest("form");if(!t)return;let n=t.querySelector(".js-redeem-button");n instanceof HTMLButtonElement&&(n.disabled=e.classList.contains("free-plan"))}function c(e){let t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(let e of document.querySelectorAll(".js-account-row, .js-choose-account"))e.classList.remove("selected");e.classList.add("selected");let a=e.querySelector(".js-choose-account");a&&a.classList.add("selected");let r=document.querySelector(".js-account");r&&(r.value=t);let o=document.querySelector(".js-plan-section");for(let e of(o&&(o.hidden=!1),document.querySelectorAll(".js-billing-plans")))e.hidden=!0;let i=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!i)return;i.hidden=!1;let s=i.querySelectorAll(".js-plan-row"),l=1===s.length?s[0]:i.querySelector(`[data-name='${n}']`);l instanceof Element&&u(l)}function u(e){let t=e.getAttribute("data-name"),n=e.closest(".js-billing-plans");if(!n)return;let a=n.getAttribute("data-login");if(!a)return;let r="true"===n.getAttribute("data-has-billing"),o=parseInt(e.getAttribute("data-cost")||"",10);for(let e of document.querySelectorAll(".js-plan-row, .js-choose-plan"))e.classList.remove("selected");e.classList.add("selected");let i=e.querySelector(".js-choose-plan");i&&i.classList.add("selected");let s=e.querySelector(".js-choose-plan-radio");s instanceof HTMLInputElement&&(s.checked=!0);let l=document.querySelector(".js-plan");if(l&&(l.value=t||""),!document.querySelector(".js-coupons-data-collection-wrapper")){if(0===o||r){let e=document.querySelector(".js-billing-section");e&&e.classList.add("has-removed-contents")}else if(a){let e=document.querySelector(`.js-billing-section[data-login='${a}']`);e&&e.classList.remove("has-removed-contents")}}}(0,o.on)("submit",".js-find-coupon-form",function(e){let t=e.target;if(!(t instanceof HTMLFormElement))return;let n=t.action,a=document.querySelector("#code");window.location.href=`${n}/${encodeURIComponent(a.value)}`,e.preventDefault()}),(0,o.on)("click",".js-choose-account",function(e){for(let e of document.querySelectorAll(".js-plan-row, .js-choose-plan"))e.classList.remove("selected");for(let e of(document.querySelector(".js-plan").value="",document.querySelectorAll(".js-billing-section")))e.classList.add("has-removed-contents");let t=e.currentTarget.closest(".js-account-row");t&&c(t)}),(0,o.on)("click",".js-billing-settings-redeem-coupon-btn",function({currentTarget:e}){document.querySelector(".js-billing-settings-redeem-coupon-form-wrapper").hidden=!1,e.hidden=!0,document.querySelector('input[name="code"]').focus()}),(0,o.on)("click",".js-billing-settings-cancel-redeem-coupon-btn",function({currentTarget:e}){e.closest(".js-billing-settings-redeem-coupon-form-wrapper").hidden=!0,document.querySelector(".js-billing-settings-redeem-coupon-btn").hidden=!1}),(0,o.on)("click",".js-choose-plan",function(e){e.target instanceof Element&&u(e.target.closest(".js-plan-row"))}),(0,i.lB)(".js-choose-plan-radio:checked",{add(e){u(e.closest(".js-plan-row"))}}),(0,i.lB)(".js-plan-row.selected",{add:l}),(0,i.lB)(".js-choose-account.selected",{add:l}),async function(){await s.G;let e=document.querySelector(".js-account-row.selected");e&&c(e);let t=document.querySelector(".js-coupons-data-collection-wrapper");if(t)!function(e){let t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(let e of document.querySelectorAll(".js-billing-plans"))e.hidden=!0;let a=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!a)return;a.hidden=!1;let r=a.querySelectorAll(".js-plan-row"),o=1===r.length?r[0]:a.querySelector(`[data-name='${n}']`);o instanceof Element&&u(o)}(t);else{let e=document.querySelector(".js-plan-row.selected");e instanceof Element&&u(e)}}(),(0,o.on)("click",".js-enter-new-card",function(e){let t=e.currentTarget.closest(".js-zuora-existing-card")||document.querySelector(".js-zuora-existing-card"),n=document.querySelector(".js-billing-section"),a=document.querySelector(".js-enter-new-card");t.classList.add("d-none"),n.hidden=!1;let r=n.querySelector("iframe");r.setAttribute("width","100%");let o="true"===a.getAttribute("data-sdn-data-collection")?"237":"677";r.setAttribute("height",o)}),(0,o.on)("click",".js-edit-card-details",function(e){let t=document.getElementById("zuora_payment"),n=e.currentTarget.closest(".js-zuora-billing-info"),a=document.querySelector(".js-billing-section");t.classList.toggle("d-none"),n.classList.toggle("d-none"),a.classList.remove("PaymentMethod--creditcard-added"),a.classList.add("PaymentMethod--creditcard")});let d={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},m=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","C\xf4te d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],p="United States of America",g="Canada";function f(e){let t;let n=e.options[e.selectedIndex];n&&(t=n.textContent);let a=t?d[t]:null,r=e.closest(".js-setup-creditcard");r.classList.toggle("is-vat-country",null!=a),r.querySelector(".js-vat-help-text").textContent=a?`(${a})`:"";let o=r.querySelector(".js-select-state");if(r.classList.toggle("is-international",t!==p&&t!==g),o.required=t===p,t!==p&&(o.value=""),t===g){let e=r.querySelector(".js-select-province");r.querySelector(".js-region-label").textContent="Province",e.disabled=!1,e.required=!0,o.classList.add("d-none"),e.classList.remove("d-none")}else{let e=r.querySelector(".js-select-province");r.querySelector(".js-region-label").textContent="State",e.disabled=!0,e.required=!1,e.value="",o.classList.remove("d-none"),e.classList.add("d-none")}let i=r.querySelector(".js-postal-code-field"),s=m.indexOf(t||"")>=0;r.classList.toggle("no-postcodes",s),i.required=!s,s&&(i.value="")}function y(e){if(!(e.currentTarget instanceof Element))return;let t=e.currentTarget.closest(".js-payment-methods"),n=e.currentTarget.getAttribute("data-selected-tab");for(let e of t.querySelectorAll(".js-selected-payment-method"))e.classList.remove("active");t.querySelector(`.${n}`).classList.add("active");let a=t.querySelector(".js-payment-method-type");if("pay-with-paypal"===n)a.value="paypal";else if("pay-with-azure"===n)a.value="azure";else{a.value="credit_card";let e=t.querySelector(".js-sponsors-payment-method-update-confirmation-dialog");e?.classList.add("has-removed-contents")}let r=t.closest(".js-billing-section");if(r){if("pay-with-paypal"===n){r.classList.add("PaymentMethod--paypal"),r.classList.remove("PaymentMethod--creditcard"),r.classList.remove("PaymentMethod--azure"),r.classList.remove("PaymentMethod--creditcard-added");let e=document.querySelector(".js-zuora-billing-info"),t=document.querySelector(".js-zuora-payment-page");e.classList.add("d-none"),t.classList.remove("d-none")}else"pay-by-credit-card"===n?(r.classList.remove("PaymentMethod--paypal"),r.classList.remove("PaymentMethod--azure"),r.classList.add("PaymentMethod--creditcard")):"pay-by-azure"===n&&(r.classList.remove("PaymentMethod--paypal"),r.classList.remove("PaymentMethod--creditcard"),r.classList.add("PaymentMethod--azure"))}}(0,i.lB)(".js-select-country",{constructor:HTMLSelectElement,initialize(e){f(e),e.form&&(0,o.h)(e.form,"change"),e.addEventListener("change",function(){f(e)})}}),(0,o.on)("click",".js-payment-methods .js-payment-method",y),(0,o.on)("click",".js-payment-method-href",y),(0,i.lB)(".js-selected-payment-method:not(.active)",{add(e){e.classList.add("has-removed-contents")},remove(e){e.classList.remove("has-removed-contents")}}),(0,i.lB)(".js-billing-payment-methods",function(e){e.classList.remove("disabled")});let h=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function v(e,t){e.classList.remove(...h),h.indexOf(t)>=0&&e.classList.add(t)}async function S(e){let t=e.getAttribute("data-token");if(t)return t;let n=await fetch("/account/billing/client_token",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw Error("Response is not OK");return await n.text()}async function b(e){let t=e.closest(".js-payment-methods");if(!(t.classList.contains("paypal-loading")||t.classList.contains("paypal-logged-in"))){e.textContent="",v(t,"paypal-loading");try{let n=await S(t);t.hasAttribute("data-token")||t.setAttribute("data-token",n);let a=e.getAttribute("data-nonce-field"),o=t.querySelector(a);await function(e,t,n){let{onSuccess:a}=n;return new Promise(o=>r().setup(e,t,Object.assign({},n,{onSuccess:()=>{a(),o()}})))}(n,"paypal",{container:e,displayName:"GitHub",paymentMethodNonceInputField:o,enableCORS:!0,onSuccess(){v(t,"paypal-logged-in");let e=document.querySelector(".js-awaiting-payment");e&&"true"===e.getAttribute("data-toggle-plan-upgrade-visibility")&&!0===e.hidden&&(e.hidden=!1)},onReady(){v(t,"paypal-logged-out")}});let i=document.querySelector("#bt-pp-cancel");i.setAttribute("type","button");let s=document.querySelector(".js-paypal-cancel-icon").cloneNode(!0);s instanceof Element&&s.classList.remove("d-none"),i.appendChild(s)}catch(e){throw v(t,"paypal-down"),e}}}(0,o.on)("click","#bt-pp-cancel",function(e){v(e.currentTarget.closest(".js-payment-methods"),"paypal-logged-out"),b(e.currentTarget.closest(".js-paypal-container"))}),(0,i.lB)(".js-paypal-container",{add(e){null!=e.closest(".active")&&b(e)}});var w=n(38147),_=n(63120);async function j(e){let t=new URL(document.location.href,window.location.origin).searchParams;t.set("plan_duration",e),await q();let n=`?${t.toString()}`;(0,_.softNavigate)(n)}(0,i.lB)("input.js-plan-choice:checked",{constructor:HTMLInputElement,add(e){let t="free"===e.value;for(let t of document.querySelectorAll(".js-plan-choice-label"))t.classList.toggle("open",t===e);let n=e.closest(".js-plan-choice-label");if(n){let t=n.querySelector(".js-addon-purchase-field");t instanceof HTMLInputElement&&(0,w.pk)(t),e.checked&&n.classList.add("open")}let a=e.classList.contains("js-data-ghe-cloud-trial")&&"business_plus"===e.value,r=t||a;for(let e of document.querySelectorAll(".js-billing-section"))e.classList.toggle("has-removed-contents",r);if(t){let e=document.querySelector(".js-contact-us");null!=e&&e.classList.add("d-none");let t=document.querySelector(".js-purchase-button");null!=t&&t.removeAttribute("disabled")}if(!0===(document.querySelector("input.js-enterprise-choice[value=server]:checked")&&"business_plus"===e.value)){let e=document.querySelector(".SignUpContinueActions");null!=e&&e.classList.add("has-removed-contents")}}}),(0,o.on)("click",".js-duration-change",async function({currentTarget:e}){let t=document.querySelector(".js-upgrade-plan-change:checked"),n=document.querySelector(".js-transform-user"),a=`?plan_duration=${e.getAttribute("data-duration")}`;n&&(a=`${a}&transform_user=1`),t instanceof HTMLInputElement&&(a=`${a}&new_plan=${t.value}`),await q(),(0,_.softNavigate)(a)}),(0,o.on)("change","input.js-upgrade-plan-change",function({currentTarget:e}){let t=document.querySelector(".js-transform-user"),n=`?new_plan=${e.value}`;t&&(n=`${n}&transform_user=1`),(0,_.softNavigate)(n)}),(0,o.on)("change","input.js-org-duration-change",async function({currentTarget:e}){let t=new URL(document.location.href,window.location.origin).searchParams;if(document.querySelectorAll(".js-experiment-seats").length>0)t.set("plan_duration",e.value);else{let n=document.querySelector(".js-upgrade-org-plan-change:checked"),a=document.querySelector(".js-account-name");t.set("plan",n.value),t.set("plan_duration",e.value),t.set("org",a.value)}await q();let n=`?${t.toString()}`;(0,_.softNavigate)(n)}),(0,o.on)("change","input.js-bus-duration-change",function({currentTarget:e}){j(e.value)}),(0,o.on)("click",".js-bus-year-duration",function(){j("year")}),(0,o.on)("click",".js-bus-month-duration",function(){j("month")}),(0,o.on)("change","input.js-upgrade-org-plan-change",function({currentTarget:e}){let t=document.querySelector(".js-account-name"),n=new URL(document.location.href,window.location.origin).searchParams;n.set("plan",e.value),n.set("org",t.value);let a=`?${n.toString()}`;(0,_.softNavigate)(a)});let q=async()=>{let e=document.querySelector(".js-name-address-collection");if(e){let t;let n={first_name:e?.querySelector("#account_screening_profile_first_name")?.value,last_name:e?.querySelector("#account_screening_profile_last_name")?.value,entity_name:e?.querySelector("#account_screening_profile_entity_name")?.value,address1:e?.querySelector("#account_screening_profile_address1")?.value,address2:e?.querySelector("#account_screening_profile_address2")?.value,city:e?.querySelector("#account_screening_profile_city")?.value,vat_code:e?.querySelector("#account_screening_profile_vat_code")?.value,country_code:e?.querySelector("#account_screening_profile_country_code")?.value,region:e?.querySelector("#account_screening_profile_region")?.value,postal_code:e?.querySelector("#account_screening_profile_postal_code")?.value},a=new FormData;for(let[e,t]of Object.entries(n))void 0!==t&&a.append(`account_screening_profile[${e}]`,t);if(!Array.from(a).length)return;let r=document.querySelector("#account_screening_profile_target");if(!r)return;let o=r.value,i="";"organization"===o?(t=document.querySelector("#account_screening_profile_organization_id")?.value,i="organization_id"):"business"===o&&(t=document.querySelector("#account_screening_profile_business_id")?.value,i="business_id"),a.set("target",o),t&&a.set(i,t);try{let e=document.querySelector(".js-stash-billing-info-csrf").getAttribute("value"),t=new Request("/account/stash_billing_information",{method:"POST",headers:{"Scoped-CSRF-Token":e,"X-Requested-With":"XMLHttpRequest"},body:a});await self.fetch(t)}catch(e){}}};var L=n(27260),A=n(8968);let E=null,T="month";function R(){return document.querySelectorAll(".js-trial-upgrade-seats")}function k(e){return e?e.closest(".js-stepper")?.querySelector(".js-trial-upgrade-seats"):null}async function z(e){let[t]=C(e),n=new URL(e.getAttribute("data-url"),window.location.origin),a=new URL(window.location.href,window.location.origin),r=e.getAttribute("data-url-param-name")||"seats";a.searchParams.set(r,t),(0,A.g5)(null,"",a.toString()),function(){let e=document.querySelectorAll('input[name="return_to"]'),t=new URL(window.location.href,window.location.origin);for(let n of e){let e=new URL(n?.getAttribute("value")||"",window.location.origin);t.pathname===e.pathname&&n?.setAttribute("value",t.pathname+t.search)}}();let o=new URLSearchParams(n.search.slice(1)),i=R();for(let e=0;e<i.length;e++){let t=i[e];if(!t)continue;let n=t.getAttribute("data-url-param-name")||"seats",[a]=C(t);o.append(n,a)}document.querySelectorAll(".js-trial-upgrade-seats").length>0&&(T=document.querySelector(".js-org-duration-change:checked,.js-bus-duration-change:checked,.js-bus-duration-input")?.value||"month",o.append("plan_duration",T)),n.search=o.toString(),E?.abort();let{signal:s}=E=new AbortController,l=null;try{let e=await fetch(n.toString(),{signal:s,headers:{Accept:"application/json"}});if(!e.ok)return;l=await e.json()}catch{}if(s.aborted||!l)return;let c=l.selectors;for(let e in c)for(let t of document.querySelectorAll(e)){t.innerHTML=c[e];let n=t.closest(".js-stepper-show-with-value");n&&(n.hidden=!c[e])}}function M(e){let t=e.target;t&&!t.disabled&&(N(t),z(t))}function C(e){let t=Number(e.getAttribute("data-minimum"))??1,n=Number(e.getAttribute("data-maximum"))??1e3,a=e.value,r=Number(a);return!r&&0!==r||r<t?[t.toString(),!0,!1]:r>n?[n.toString(),!1,!0]:[a,!1,!1]}function N(e){if(!e||e.disabled)return;let[t,n,a]=C(e);e.value=t;let r=e.closest(".js-stepper");r&&(r.querySelector(".js-minimum-seats").hidden=!n,r.querySelector(".js-maximum-seats").hidden=!a)}(0,i.lB)(".js-trial-upgrade-seats",{constructor:HTMLInputElement,add(e){z(e),(0,w.Up)(e,function(){z(e)})}}),async function(){await s.G;let e=R(),t=document.getElementById("plan_duration_month");t&&(T=t.checked?"month":"year");for(let t=0;t<e.length;t++){let n=e[t];N(n),z(n)}}(),document.addEventListener(L.z.SUCCESS,function(){let e=R();for(let t=0;t<e.length;t++)N(e[t])}),(0,o.on)("click",".js-increase-seats-number",function(e){let t=k(e.currentTarget);if(!t||t.disabled)return;let n=Number(t.value)+1;t.value=n.toString(),N(t),z(t)}),(0,o.on)("click",".js-decrease-seats-number",function(e){let t=k(e.currentTarget);if(!t||t.disabled)return;let n=Number(t.value)-1;t.value=n.toString(),N(t),z(t)}),(0,i.lB)(".js-trial-upgrade-seats",e=>{e.addEventListener("change",M)});var x=n(72040),P=n(70170),B=n(40588),I=n(18036);async function H(e){let t=e.getAttribute("data-url"),n=e.getAttribute("data-organization-id"),a=e.getAttribute("data-business-id"),r=e.getAttribute("data-signature-view-context"),o=e.getAttribute("data-manual-payment"),i=e.getAttribute("data-terms-of-service"),s=e.getAttribute("data-target"),l=e.getAttribute("data-invoices"),c=e.getAttribute("data-payment-gateway"),u=new URLSearchParams;if(n&&u.append("organization_id",n),r&&u.append("view_context",r),a&&u.append("business_id",a),o&&u.append("manual_payment",o),i&&u.append("terms_of_service",i),s&&u.append("target",s),l)for(let e of l.split(","))u.append("invoices[]",e);c&&u.append("payment_gateway",c);let d=await fetch(`${t}?${u.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!d.ok){G(e.getAttribute("data-general-signature-error-message")||"");let t=Error(),n=d.statusText?` ${d.statusText}`:"";throw t.message=`HTTP ${d.status}${n}`,t}let m=await d.json();if(e.classList.contains("js-zuora-payment-page")){if(m.error){G(m.error);return}let t=e.getAttribute("data-id");F(e,m,{creditCardHolderName:t},X)}else F(e,m,{creditCardHolderName:"GitHub Organization"},W)}async function U(e,t,n){let a=new URLSearchParams;a.append("payment_method_id",e.refId),t&&a.append("organization_id",t);let r=await fetch(`/settings/billing/payment_method?${a.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!r.ok){let e=Error(),t=r.statusText?` ${r.statusText}`:"";throw e.message=`HTTP ${r.status}${t}`,e}n(await r.json())}async function $(e,t,n=5,a=1e3){if(0===n)throw Error("Max retries exhausted");let r=`/settings/billing/bill_pay/${e}`;if(t){let e=new URLSearchParams;e.append("organization_id",t),r=`${r}?${e.toString()}`}let o=await fetch(r,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(200===o.status)return o;if(202===o.status)return await new Promise(e=>setTimeout(e,a)),$(e,t,n-1,1.5*a);throw Error(`Unexpected ${o.status} response from poll endpoint`)}function O(e){if(e)try{let t=new URL(e,window.location.origin);("http:"===t.protocol||"https:"===t.protocol)&&window.location.replace(t.toString())}catch(e){return}}function F(e,t,n,a){let r=Object.assign({},t.prepopulate,n);delete t.prepopulate,x.Z.renderWithErrorHandler(t,r,async t=>{if(a(t),"true"===t.success){let n=document.querySelector(".js-payment-method-form");if(n){if(!(n instanceof HTMLFormElement))return;let a=e.getAttribute("data-redirect-to");if(a){if("Approved"===t.AuthorizeResult){let n=e.getAttribute("data-organization-id"),r=document.querySelector(".js-payment-verification-spinner"),o=document.querySelector(".js-payment-verification-success"),i=document.querySelector(".js-payment-method-section-wrapper"),s=document.querySelector(".js-payment-still-processing");try{i.hidden=!0,r.hidden=!1,await $(t.PaymentId,n),r.hidden=!0,o.hidden=!1}catch(e){r.hidden=!0,s.hidden=!1,await new Promise(e=>setTimeout(e,3e3))}await new Promise(e=>setTimeout(e,150)),O(a)}else(0,B.N7)(Error(`Unknown AuthorizationResult ${t.AuthorizeResult}`)),O(a)}else n.submit()}else U(t,e.getAttribute("data-organization-id"),t=>{let n=document.querySelector(".js-zuora-billing-info"),a=n.querySelector(".js-new-card-type"),r=n.querySelector(".js-new-card-number"),o=t.masked_number.replace(/\*/g,""),i=e.closest(".js-billing-section"),s=document.querySelector(".js-awaiting-payment");a.textContent=t.card_type,r.textContent=o,e.classList.add("d-none"),n.classList.remove("d-none"),s&&s.toggleAttribute("hidden"),i.classList.remove("PaymentMethod--creditcard"),i.classList.add("PaymentMethod--creditcard-added")})}},(t,n,a)=>{let r=a,o="",i=JSON.parse(e.getAttribute("data-error-messages")),s=r.match(/\[(.*?)\]/);s&&"string"==typeof s[1]&&(o=s[1]);let l={processor_response_reason:r,processor_response_code:o};"error"===t&&(e.setAttribute("data-hydro-client-context",JSON.stringify(l)),(0,I.$3)(e),r="Attempt_Exceed_Limitation"===o?i.attempts_exceeded_limit_error:i.processor_declined_error),x.Z.sendErrorMessageToHpm(t,r)})}function X(e){if("true"===e.success){let t=document.querySelector(".js-zuora-billing-info"),n=t.querySelector(".js-zuora-payment-method-id"),a=t.querySelector(".js-zuora-select-country"),r=t.querySelector(".js-zuora-select-region"),o=t.querySelector(".js-zuora-select-postal-code");n.value=e.refId,a.value=a.value||e.creditCardCountry||"",r.value=r.value||e.creditCardState||"",o.value=o.value||e.creditCardPostalCode||""}}function W(e){let t=new URLSearchParams;t.append("success",e.success),t.append("response_from",e.responseFrom),e.success?t.append("ref_id",e.refId):(t.append("error_code",e.errorCode),t.append("error_message",e.errorMessage));let n=`pay?${t.toString()}`;window.location.replace(n)}function D(){let e=document.getElementById("z_hppm_iframe");if(null!=e){window.innerWidth<544?(e.style.width="400px",e.style.height="350px"):window.innerWidth<768?(e.style.width="95%",e.style.height="300px"):e.style.width="95%";let t=document.getElementById("zuora_payment");t&&e.setAttribute("title",t.getAttribute("title")),x.Z.post(e.id,"resize")}}function G(e){let t=document.querySelector(".js-zuora-spinner");t&&(t.textContent=e)}(0,i.lB)("#zuora_payment",{constructor:HTMLElement,add(e){if(e.classList.contains("js-zuora-payment-page")){let t=document.querySelector(".js-zuora-spinner");t&&t.classList.remove("d-none"),e.style.opacity="0",x.Z.runAfterRender(()=>{t&&t.classList.add("d-none"),e.style.opacity="1",window.addEventListener("resize",(0,P.s)(D,200))})}H(e)}}),n(79585)},18036:(e,t,n)=>{n.d(t,{$3:()=>o,HV:()=>i,Vb:()=>r});var a=n(51528);function r(e,t,n){let r={hydroEventPayload:e,hydroEventHmac:t,visitorPayload:"",visitorHmac:"",hydroClientContext:n},o=document.querySelector("meta[name=visitor-payload]");o instanceof HTMLMetaElement&&(r.visitorPayload=o.content);let i=document.querySelector("meta[name=visitor-hmac]")||"";i instanceof HTMLMetaElement&&(r.visitorHmac=i.content),(0,a.i)(r,!0)}function o(e){r(e.getAttribute("data-hydro-view")||"",e.getAttribute("data-hydro-view-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}function i(e){r(e.getAttribute("data-hydro-click-payload")||"",e.getAttribute("data-hydro-click-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}},38147:(e,t,n)=>{n.d(t,{NB:()=>c,Up:()=>l,pk:()=>u});let a=new WeakMap;function r(e){let t=a.get(e);t&&(null!=t.timer&&clearTimeout(t.timer),t.timer=window.setTimeout(()=>{null!=t.timer&&(t.timer=null),t.inputed=!1,t.listener.call(null,e)},t.wait))}function o(e){let t=e.currentTarget,n=a.get(t);n&&(n.keypressed=!0,null!=n.timer&&clearTimeout(n.timer))}function i(e){let t=e.currentTarget,n=a.get(t);n&&(n.keypressed=!1,n.inputed&&r(t))}function s(e){let t=e.currentTarget,n=a.get(t);n&&(n.inputed=!0,n.keypressed||r(t))}function l(e,t,n={wait:null}){a.set(e,{keypressed:!1,inputed:!1,timer:void 0,listener:t,wait:null!=n.wait?n.wait:100}),e.addEventListener("keydown",o),e.addEventListener("keyup",i),e.addEventListener("input",s)}function c(e,t){e.removeEventListener("keydown",o),e.removeEventListener("keyup",i),e.removeEventListener("input",s);let n=a.get(e);n&&(null!=n.timer&&n.listener===t&&clearTimeout(n.timer),a.delete(e))}function u(e){let t=a.get(e);t&&t.listener.call(null,e)}},67327:(e,t,n)=>{n.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var a=n(27260);let r=class SoftNavEvent extends Event{constructor(e,t){super(t),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends r{constructor(e){super(e,a.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends r{constructor(e,t){super(e,a.z.SUCCESS),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends r{constructor(e,t){super(e,a.z.ERROR),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends r{constructor(e){super(e,a.z.END)}}},56725:(e,t,n)=>{n.d(t,{Bu:()=>g,SC:()=>c,Ti:()=>m,iS:()=>u,k5:()=>l,o4:()=>d,rZ:()=>p});var a=n(27260),r=n(67327),o=n(47175),i=n(54861);let s=0;function l(){s=0,document.dispatchEvent(new Event(a.z.INITIAL)),(0,i.xT)()}function c(e){(0,i.LM)()||(document.dispatchEvent(new Event(a.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,i.Vy)(e),(0,i.ZW)(),(0,i.HK)(),(0,o.E5)())}function u(e={}){y(e)&&(s+=1,document.dispatchEvent(new r.ni((0,i.di)(),s)),m(e))}function d(e={}){if(!y(e))return;s=0;let t=(0,i.my)()||i.BW;document.dispatchEvent(new r.Kq((0,i.di)(),t)),f(),(0,o.Cd)(t),(0,i.xT)()}function m(e={}){if(!y(e))return;let t=(0,i.di)();f(),document.dispatchEvent(new r.RQ(t)),(0,i.Ff)(),(0,i.JA)(t)}function p(e={}){y(e)&&((0,o.Im)(),document.dispatchEvent(new Event(a.z.RENDER)))}function g(){document.dispatchEvent(new Event(a.z.FRAME_UPDATE))}function f(){document.dispatchEvent(new Event(a.z.PROGRESS_BAR.END))}function y({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,i.LM)()&&(0===t.length||t.includes((0,i.di)()))&&(!e||!(0,i.fX)())}},47175:(e,t,n)=>{n.d(t,{Cd:()=>l,E5:()=>s,Im:()=>c,Up:()=>o,nW:()=>i});var a=n(51528),r=n(54861);let o="stats:soft-nav-duration",i={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function s(){performance.clearResourceTimings(),performance.mark(o)}function l(e){(0,a.i)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(o).length)return null;performance.measure(o,o);let e=performance.getEntriesByName(o).pop();return e?e.duration:null}();if(!e)return;let t=i[(0,r.di)()],n=Math.round(e);t===i.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:n}})),(0,a.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:n,initiator:(0,r.Pv)()||"rails"}})}},63120:(e,t,n)=>{n.d(t,{softNavigate:()=>o});var a=n(56725),r=n(7332);function o(e,t){(0,a.SC)("turbo"),(0,r.YR)(e,{...t})}}},e=>{var t=t=>e(e.s=t);e.O(0,["vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_delegated-events_dist_in-0c3331","vendors-node_modules_github_braintree-encryption_target_braintree-1_3_10_js-node_modules_gith-79efd5","app_assets_modules_github_billing_name-address-form_ts-ui_packages_browser-history-state_brow-79cad3"],()=>t(17938)),e.O()}]);
//# sourceMappingURL=billing-fabb7dab82e6.js.map