{"version":3,"file":"chunk-app_assets_modules_marketing_confetti-on-scroll_ts-_1bdc1-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/confetti.ts","app/assets/modules/marketing/confetti-on-scroll.ts"],"sourcesContent":["// This code is an adaptation of https://codepen.io/Pillowfication/pen/PNEJbY\n// Markus Tran deserves all the credit!!!\n\nconst random = Math.random\nconst cos = Math.cos\nconst sin = Math.sin\nconst PI = Math.PI\nconst PI2 = PI * 2\nconst spread = 40\nconst sizeMin = 3\nconst sizeMax = 12 - sizeMin\nconst eccentricity = 10\nconst deviation = 100\nconst dxThetaMin = -0.1\nconst dxThetaMax = -dxThetaMin - dxThetaMin\nconst dyMin = 0.13\nconst dyMax = 0.18\nconst dThetaMin = 0.4\nconst dThetaMax = 0.7 - dThetaMin\nlet timer: number | undefined\nlet frame: number | undefined\n\ninterface Confetti {\n  outer: HTMLElement\n  update: (height: number, delta: number) => boolean\n}\nconst confetti: Confetti[] = []\n\n// GitHub themed color palette\nconst colors = ['#6a737d', '#0366d6', '#28a745', '#ffd33d', '#f66a0a', '#6f42c1', '#ea4aaa']\n\nfunction colorTheme() {\n  const idx = Math.floor(Math.random() * colors.length)\n  return colors[idx]!\n}\n\n// Cosine interpolation\nfunction interpolation(a: number, b: number, t: number) {\n  return ((1 - cos(PI * t)) / 2) * (b - a) + a\n}\n\n// Create a 1D Maximal Poisson Disc over [0, 1]\nconst radius = 1 / eccentricity\nconst radius2 = radius + radius\nfunction createPoisson() {\n  const domain = [radius, 1 - radius]\n  let measure = 1 - radius2\n  const spline = [0, 1]\n  while (measure) {\n    let dart = measure * random()\n    let i\n    let l\n    let interval\n    let a\n    let b\n\n    // Find where dart lies\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      a = domain[i]!\n      b = domain[i + 1]!\n      interval = b - a\n      if (dart < measure + interval) {\n        const newDart = dart + a - measure\n        spline.push(newDart)\n        dart = newDart\n        break\n      }\n      measure += interval\n    }\n\n    const c = dart - radius\n    const d = dart + radius\n\n    // Update the domain\n    for (i = domain.length - 1; i > 0; i -= 2) {\n      l = i - 1\n      a = domain[l]!\n      b = domain[i]!\n\n      if (a >= c && a < d)\n        if (b > d) domain[l] = d\n        else domain.splice(l, 2)\n      else if (a < c && b > c)\n        if (b <= d) domain[i] = c\n        else domain.splice(i, 0, c, d)\n    }\n\n    // Re-measure the domain\n    for (i = 0, l = domain.length, measure = 0; i < l; i += 2) {\n      measure += domain[i + 1]! - domain[i]!\n    }\n  }\n\n  return spline.sort()\n}\n\n// Create the overarching container\nconst container = document.createElement('div')\ncontainer.style.position = 'fixed'\ncontainer.style.top = '0'\ncontainer.style.left = '0'\ncontainer.style.width = '100%'\ncontainer.style.height = '0'\ncontainer.style.overflow = 'visible'\ncontainer.style.zIndex = '9999'\n\nclass Confetto {\n  y: number\n  x: number\n  theta: number\n  axis: string\n  splineX: number[]\n  splineY: number[]\n  frame: number\n  dTheta: number\n  dx: number\n  dy: number\n  inner: HTMLElement\n  outer: HTMLElement\n\n  constructor(theme: () => string) {\n    this.frame = 0\n    this.outer = document.createElement('div')\n    this.inner = document.createElement('div')\n    this.outer.appendChild(this.inner)\n\n    this.outer.style.position = 'absolute'\n    this.outer.style.width = `${sizeMin + sizeMax * random()}px`\n    this.outer.style.height = `${sizeMin + sizeMax * random()}px`\n    this.inner.style.width = '100%'\n    this.inner.style.height = '100%'\n    this.inner.style.backgroundColor = theme()\n\n    this.outer.style.perspective = '50px'\n    this.outer.style.transform = `rotate(${360 * random()}deg)`\n    this.theta = 360 * random()\n    this.axis = `rotate3D(${cos(360 * random())},${cos(360 * random())},0,`\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n\n    this.dTheta = dThetaMin + dThetaMax * random()\n\n    this.x = window.innerWidth * random()\n    this.y = -deviation\n    this.dx = sin(dxThetaMin + dxThetaMax * random())\n    this.dy = dyMin + dyMax * random()\n    this.outer.style.left = `${this.x}px`\n    this.outer.style.top = `${this.y}px`\n\n    // Create the periodic spline\n    this.splineX = createPoisson()\n    this.splineY = []\n    const l = this.splineX.length - 1\n    for (let i = 1; i < l; ++i) {\n      this.splineY[i] = deviation * random()\n    }\n    this.splineY[0] = this.splineY[l] = deviation * random()\n  }\n\n  update(height: number, delta: number) {\n    this.frame += delta\n    this.x += this.dx * delta\n    this.y += this.dy * delta\n    this.theta += this.dTheta * delta\n\n    let phi = (this.frame % 7777) / 7777\n    let i = 0\n    let j = 1\n    while (phi >= this.splineX[j]!) {\n      i = j++\n    }\n    const rho = interpolation(\n      this.splineY[i]!,\n      this.splineY[j]!,\n      (phi - this.splineX[i]!) / (this.splineX[j]! - this.splineX[i]!),\n    )\n    phi *= PI2\n\n    this.inner.style.transform = `${this.axis}${this.theta}deg)`\n    this.outer.style.left = `${this.x + rho * cos(phi)}px`\n    this.outer.style.top = `${this.y + rho * sin(phi)}px`\n    return this.y > height + deviation\n  }\n}\n\nexport default function poof(duration?: number) {\n  // 5s default\n  const ttl = duration == null ? 5000 : duration\n\n  if (!frame) {\n    document.body.appendChild(container)\n\n    const addConfetto = () => {\n      const confetto = new Confetto(colorTheme)\n      confetti.push(confetto)\n      container.appendChild(confetto.outer)\n      timer = window.setTimeout(addConfetto, spread * random())\n    }\n    addConfetto()\n\n    let prev: number | null\n\n    const loop = (timestamp: number) => {\n      const delta = prev ? timestamp - prev : 0\n      prev = timestamp\n      const height = window.innerHeight\n\n      for (let i = confetti.length - 1; i >= 0; --i) {\n        if (confetti[i]!.update(height, delta)) {\n          container.removeChild(confetti[i]!.outer)\n          confetti.splice(i, 1)\n        }\n      }\n\n      if (timer || confetti.length) {\n        frame = requestAnimationFrame(loop)\n        return\n      }\n\n      document.body.removeChild(container)\n      frame = undefined\n    }\n\n    window.setTimeout(function () {\n      clearTimeout(timer)\n      timer = undefined\n    }, ttl)\n\n    requestAnimationFrame(loop)\n  }\n}\n","// The <confetti-container> element will trigger confetti once in the viewport.\n// <confetti-container data-load-on=\"visible\" data-delay=\"200\" data-duration=\"3000\">\n//  ...\n// </confetti-container>\n\nimport poof from '../github/behaviors/confetti'\nimport {shouldReduceMotion} from './animate-on-scroll'\nimport {controller, attr} from '@github/catalyst'\n\n@controller\nclass ConfettiContainerElement extends HTMLElement {\n  @attr delay = 0\n  @attr duration = 3000\n\n  connectedCallback() {\n    if (shouldReduceMotion(this)) return\n    window.setTimeout(() => poof(this.duration), this.delay)\n  }\n}\n"],"names":["timer","frame","random","Math","cos","sin","PI","PI2","confetti","colors","colorTheme","idx","floor","length","container","document","createElement","style","position","top","left","width","height","overflow","zIndex","Confetto","update","delta","a","b","x","dx","y","dy","theta","dTheta","phi","i","j","splineX","rho","splineY","inner","transform","axis","outer","constructor","theme","appendChild","sizeMin","sizeMax","backgroundColor","perspective","dThetaMin","dThetaMax","window","innerWidth","dxThetaMin","dxThetaMax","dyMin","dyMax","createPoisson","domain","measure","spline","l","interval","dart","newDart","push","c","d","splice","sort","deviation","poof","duration","prev","body","addConfetto","confetto","setTimeout","spread","loop","timestamp","innerHeight","removeChild","requestAnimationFrame","undefined","clearTimeout","ConfettiContainerElement","HTMLElement","connectedCallback","shouldReduceMotion","delay","attr","controller"],"sourceRoot":""}