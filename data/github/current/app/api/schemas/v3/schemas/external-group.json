{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/external-group.json",
  "title": "ExternalGroups",
  "description": "External Groups to be linked to a team for membership",
  "type": "object",
  "definitions": {
    "group-id": {
      "description": "The ID of the external group",
      "example": 1234,
      "type": "integer"
    },
    "group-name": {
      "description": "The name of the external group",
      "example": "saml-azuread-test",
      "type": "string"
    },
    "updated-at": {
      "description": "The time of the last update for the external group",
      "example": "2019-06-03 22:27:15:000 UTC",
      "type": "string"
    },
    "team-id": {
      "description": "The id of a team that is linked to an external group",
      "example": 567,
      "type": "integer"
    },
    "team-name": {
      "description": "The name of a team that is linked to an external group",
      "example": "saml-team-test",
      "type": "string"
    },
    "member-id": {
      "description": "The id of an external group member as provisioned in GitHub",
      "example": 1,
      "type": "integer"
    },
    "member-login": {
      "description": "The login handle of an external group member as provisioned in GitHub",
      "example": "mona_fab",
      "type": "string"
    },
    "member-name": {
      "description": "The name of an external group member as provisioned in GitHub",
      "example": "Mona Lisa",
      "type": "string"
    },
    "member-email": {
      "description": "The email of an external group member as provisioned in GitHub",
      "example": "mona@fabrikam.com",
      "type": "string"
    },
    "members": {
      "description": "An array of external group provisioned members",
      "example": [
        {
          "member_id": 1,
          "member_login": "mona_fab",
          "member_name": "Mona Lisa",
          "member_email": "mona@fabrikam.com"
        }
      ],
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "member_id",
          "member_login",
          "member_name",
          "member_email"
        ],
        "properties": {
          "member_id": {
            "$ref": "#/definitions/member-id"
          },
          "member_login": {
            "$ref": "#/definitions/member-login"
          },
          "member_name": {
            "$ref": "#/definitions/member-name"
          },
          "member_email": {
            "$ref": "#/definitions/member-email"
          }
        }
      }
    },
    "teams": {
      "description": "An array of teams already linked to an external group",
      "example": [
        {
          "team_id": 12,
          "group_name": "saml-team-test"
        },
        {
          "team_id": 56,
          "group_name": "saml-team-test2"
        }
      ],
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "team_id",
          "team_name"
        ],
        "properties": {
          "team_id": {
            "$ref": "#/definitions/team-id"
          },
          "team_name": {
            "$ref": "#/definitions/team-name"
          }
        }
      }
    },
    "group": {
      "description": "A external groups available for linking to a team",
      "example": {
        "group_id": 5678,
        "group_name": "saml-azuread-test2",
        "updated_at": "2019-06-03 22:27:15:000 UTC",
        "teams": [
          {
            "team_id": 12,
            "group_name": "saml-team-test"
          },
          {
            "team_id": 56,
            "group_name": "saml-team-test2"
          }
        ],
        "members": [
          {
            "member_id": 1,
            "member_login": "mona_fab",
            "member_name": "Mona Lisa",
            "member_email": "mona@fabrikam.com"
          }
        ]
      },
      "type": "object",
      "items": {
        "type": "object",
        "required": [
          "group_id",
          "group_name",
          "updated_at"
        ],
        "properties": {
          "group_id": {
            "$ref": "#/definitions/group-id"
          },
          "group_name": {
            "$ref": "#/definitions/group-name"
          },
          "updated_at": {
            "$ref": "#/definitions/updated-at"
          },
          "teams": {
            "$ref": "#/definitions/teams"
          },
          "members": {
            "$ref": "#/definitions/members"
          }
        }
      }
    },
    "groups": {
      "description": "An array of external groups available for linking to a team",
      "example": [
        {
          "group_id": 1234,
          "group_name": "saml-azuread-test",
          "updated_at": "2019-06-03 22:27:15:000 UTC"
        },
        {
          "group_id": 5678,
          "group_name": "saml-azuread-test2",
          "updated_at": "2019-06-03 22:27:15:000 UTC"
        }
      ],
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "#/definitions/group"
      }
    }
  },
  "properties": {
    "group_id": {
      "$ref": "#/definitions/group-id"
    },
    "group_name": {
      "$ref": "#/definitions/group-name"
    },
    "updated_at": {
      "$ref": "#/definitions/updated-at"
    },
    "group": {
      "$ref": "#/definitions/group"
    },
    "groups": {
      "$ref": "#/definitions/groups"
    },
    "teams": {
      "$ref": "#/definitions/teams"
    },
    "members": {
      "$ref": "#/definitions/members"
    }
  },
  "additionalProperties": false,
  "links": [
    {
      "title": "Add or update an IdP external-group link for this team",
      "href": "/organizations/{org_id}/team/{team_id}/external-groups",
      "method": "PATCH",
      "rel": "link-external-group",
      "schema": {
        "type": "object",
        "properties": {
          "group_id": {
            "$ref": "#/definitions/group-id"
          }
        },
        "additionalProperties": false
      }
    },
    {
      "title": "Delete an IdP external-group link for this team",
      "href": "/organizations/{org_id}/team/{team_id}/external-groups",
      "method": "DELETE",
      "rel": "unlink-external-group"
    }
  ]
}
