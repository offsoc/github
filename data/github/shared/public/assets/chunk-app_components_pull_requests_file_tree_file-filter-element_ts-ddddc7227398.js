"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_pull_requests_file_tree_file-filter-element_ts"],{70170:(e,t,i)=>{function l(e,t=0,{start:i=!0,middle:l=!0,once:n=!1}={}){let r,s=i,o=0,a=!1;function c(...d){if(a)return;let u=Date.now()-o;o=Date.now(),i&&l&&u>=t&&(s=!0),s?(s=!1,e.apply(this,d),n&&c.cancel()):(l&&u<t||!l)&&(clearTimeout(r),r=setTimeout(()=>{o=Date.now(),e.apply(this,d),n&&c.cancel()},l?t-u:t))}return c.cancel=()=>{clearTimeout(r),a=!0},c}function n(e,t=0,{start:i=!1,middle:n=!1,once:r=!1}={}){return l(e,t,{start:i,middle:n,once:r})}i.d(t,{n:()=>l,s:()=>n})},22592:(e,t,i)=>{i.d(t,{U:()=>n});var l=i(8968);function n(e,t,i,n,r,s,o,a,c=window.location.search){let d=document.querySelector(".js-file-filter"),u=new URL(window.location.href,window.location.origin),h=new URLSearchParams(c),f=h.get("w");if(!e&&!n){if(s)return;let e=new URLSearchParams,t=h.get("diff");t&&e.set("diff",t),f&&e.set("w",f),u.search=e.toString(),(0,l.g5)((0,l.Gu)(),"",u.toString());return}let p=new FormData(d.querySelector(".js-file-filter-form")),g=i.filter(e=>!p.getAll("file-filters[]").includes(e)),m=r.filter(e=>!p.getAll("owned-by[]").includes(e));for(let e of g)p.append("file-filters[]",e);for(let e of m)p.append("owned-by[]",e);let y=new URLSearchParams(p);y.has("file-filters[]")&&""!==y.toString()||y.set("file-filters[]",""),t&&y.set("w",f??"1"),s&&y.set("manifests","true"),o&&y.set("show-deleted-files","false"),a&&y.set("show-viewed-files","false"),y.delete("authenticity_token"),u.search=y.toString(),(0,l.g5)((0,l.Gu)(),"",u.toString())}},18036:(e,t,i)=>{i.d(t,{$3:()=>r,HV:()=>s,Vb:()=>n});var l=i(51528);function n(e,t,i){let n={hydroEventPayload:e,hydroEventHmac:t,visitorPayload:"",visitorHmac:"",hydroClientContext:i},r=document.querySelector("meta[name=visitor-payload]");r instanceof HTMLMetaElement&&(n.visitorPayload=r.content);let s=document.querySelector("meta[name=visitor-hmac]")||"";s instanceof HTMLMetaElement&&(n.visitorHmac=s.content),(0,l.i)(n,!0)}function r(e){n(e.getAttribute("data-hydro-view")||"",e.getAttribute("data-hydro-view-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}function s(e){n(e.getAttribute("data-hydro-click-payload")||"",e.getAttribute("data-hydro-click-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}},91212:(e,t,i)=>{i.r(t),i.d(t,{FileFilterElement:()=>FileFilterElement});var l=i(39595),n=i(18036),r=i(22592);function s(e,t,i,l){var n,r=arguments.length,s=r<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,l);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}let FileFilterElement=class FileFilterElement extends HTMLElement{connectedCallback(){this.updateFileInputs(),this.updateFilterState()}updateFileInputs(e){e&&this.instrumentFilterToggle(e);let t={hideDeletedFiles:this.shouldHideDeletedFiles,hideViewedFiles:this.shouldHideViewedFiles,showManifestFilesOnly:this.shouldShowManifestFilesOnly,selectedOwners:Array.from(this.selectedOwners()),showCodeownersFiles:this.shouldShowOwnedFilesOnly,selectedFileTypes:Array.from(this.selectedFileTypes()),fileTypeFilterActive:this.fileTypeFilterActive,filtersActive:this.filtersActive};this.dispatchEvent(new CustomEvent("file-filter-change",{detail:t})),this.updateFilterState(),this.updateUrl()}clearFilters(){this.resetDefaultFilters(),this.updateFileInputs()}updateFilterState(){this.activateFilterHighlight(),this.toggleSelectAll(),this.toggleFileTypeCounts(),this.toggleAvailableOptions()}enableAllFileInputs(){if(this.fileTypeFilterActive){for(let e of this.fileExtensions)e.checked=!0;this.updateFileInputs()}}get filtersActive(){return this.fileTypeFilterActive||this.shouldShowOwnedFilesOnly||this.shouldHideDeletedFiles||this.shouldHideViewedFiles||this.shouldShowManifestFilesOnly}activateFilterHighlight(){this.filtersActive?this.fileFilterActiveText.classList.toggle("color-fg-accent",!0):this.fileFilterActiveText.classList.toggle("color-fg-accent",!1)}toggleSelectAll(){let e=this.fileTypeFilterActive,t=this.fileTypeFilterActive?"data-select-all-markup":"data-all-selected-markup",i=this.selectAllContainer.getAttribute(t);this.selectAllContainer.textContent=i,this.selectAllContainer.classList.toggle("color-fg-muted",!e),this.selectAllContainer.classList.toggle("color-fg-accent",e)}toggleFileTypeCounts(){for(let e of this.fileTypeCount){let t=this.shouldHideDeletedFiles?"data-non-deleted-file-count-markup":"data-all-file-count-markup",i=e.getAttribute(t);i&&(e.textContent=i)}}toggleAvailableOptions(){for(let e of this.fileExtensions)if(this.shouldHideDeletedFiles){let t="0"===e.getAttribute("data-non-deleted-files-count");e.disabled=t}else e.disabled=!1}instrumentFilterToggle(e){let t=e.currentTarget,i=t.checked;t.setAttribute("data-hydro-client-context",JSON.stringify({file_filter_checked:i})),(0,n.HV)(t)}get fileTypeFilterActive(){return Array.from(this.selectedFileTypes()).length!==this.fileExtensions.length}get whitespaceFilterActive(){return new URLSearchParams(window.location.search).has("w")}*selectedFileTypes(){for(let e of this.fileExtensions)e.checked&&(yield e.value)}get shouldShowOwnedFilesOnly(){return Array.from(this.selectedOwners()).length>0}*selectedOwners(){for(let e of this.codeownersFilterInputs)e.checked&&(yield e.value)}get shouldShowManifestFilesOnly(){return!!this.manifestFilesInput?.checked}get shouldHideDeletedFiles(){return!!this.deletedFilesInput&&!this.deletedFilesInput.checked}get shouldHideViewedFiles(){return!this.viewedFilesInput.checked}resetDefaultFilters(){for(let e of(this.deletedFilesInput&&(this.deletedFilesInput.checked=!0),this.manifestFilesInput&&(this.manifestFilesInput.checked=!1),this.codeownersFilterInputs))e.checked=!1;for(let e of this.fileExtensions)e.checked=!0;this.viewedFilesInput.checked=!0,this.summary.focus()}updateUrl(){(0,r.U)(this.fileTypeFilterActive,this.whitespaceFilterActive,Array.from(this.selectedFileTypes()),this.shouldShowOwnedFilesOnly,Array.from(this.selectedOwners()),this.shouldShowManifestFilesOnly,this.shouldHideDeletedFiles,this.shouldHideViewedFiles)}};s([l.aC],FileFilterElement.prototype,"deletedFilesInput",void 0),s([l.aC],FileFilterElement.prototype,"manifestFilesInput",void 0),s([l.aC],FileFilterElement.prototype,"viewedFilesInput",void 0),s([l.zV],FileFilterElement.prototype,"codeownersFilterInputs",void 0),s([l.zV],FileFilterElement.prototype,"fileExtensions",void 0),s([l.aC],FileFilterElement.prototype,"selectAllContainer",void 0),s([l.aC],FileFilterElement.prototype,"fileFilterActiveText",void 0),s([l.zV],FileFilterElement.prototype,"fileTypeCount",void 0),s([l.aC],FileFilterElement.prototype,"summary",void 0),FileFilterElement=s([l.p_],FileFilterElement)},8968:(e,t,i)=>{let l,n;i.d(t,{Gu:()=>a,c8:()=>h,g5:()=>f});var r=i(97156);let s=[],o=0;function a(){return l}function c(){try{return Math.min(Math.max(0,r.Kn?.length||0)||0,9007199254740991)}catch(e){return 0}}function d(e){l=e;let t=r.fV?.href;s[c()-1+o]={url:t,state:l},s.length=c(),r.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}function u(){return new Date().getTime()}function h(e,t,i){o=0;let l={_id:u(),...e};r.Kn?.pushState(l,t,i),d(l)}function f(e,t,i){let n={...l,...e};r.Kn?.replaceState(n,t,i),d(n)}l=function(){let e={_id:new Date().getTime(),...r.Kn?.state};return d(e),e}(),r.cg?.addEventListener("popstate",function(e){let t=e.state;if(!t||!t._id&&!t.turbo?.restorationIdentifier)return;let i=t.turbo?.restorationIdentifier;s[c()-1+o-1]?.state?.turbo?.restorationIdentifier===i?o--:o++,d(t)},!0),r.cg?.addEventListener("turbo:visit",e=>{e instanceof CustomEvent&&(n=e.detail.action)}),r.cg?.addEventListener("turbo:load",()=>{"restore"!==n&&(o=0,f(r.Kn?.state,"",""))}),r.cg?.addEventListener("hashchange",function(){if(c()>s.length){let e={_id:u()};r.Kn?.replaceState(e,"",r.fV.href),d(e)}},!0),r.cg?.addEventListener("pageshow",()=>{s=[],o=0})},27756:(e,t,i)=>{let l;function n(){if(!l)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return l}function r(){return l?.locale??"en-US"}i.d(t,{JK:()=>r,_$:()=>n}),function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{l=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},5728:(e,t,i)=>{i.d(t,{G:()=>n,K:()=>r});var l=i(97156);let n=l.XC?.readyState==="interactive"||l.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{l.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),r=l.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{l.cg?.addEventListener("load",e)})},97564:(e,t,i)=>{i.d(t,{G7:()=>a,XY:()=>c,fQ:()=>o});var l=i(5225),n=i(27756);function r(){return new Set((0,n._$)().featureFlags.map(e=>e.toLowerCase()))}let s=i(97156).X3?r:(0,l.A)(r);function o(){return Array.from(s())}function a(e){return s().has(e.toLowerCase())}let c={isFeatureEnabled:a}},14740:(e,t,i)=>{i.d(t,{k:()=>s,v:()=>o});var l=i(5225),n=i(97156);let r=(0,l.A)(function(){return n.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),s=(0,l.A)(function(){return"enterprise"===r()}),o="webpack-css-layers"},97156:(e,t,i)=>{i.d(t,{KJ:()=>l.KJ,Kn:()=>n.Kn,X3:()=>l.X3,XC:()=>n.XC,cg:()=>n.cg,fV:()=>n.fV,g5:()=>l.g5});var l=i(15572),n=i(86733)},86733:(e,t,i)=>{i.d(t,{Kn:()=>r,XC:()=>l,cg:()=>n,fV:()=>s});let l="undefined"==typeof document?void 0:document,n="undefined"==typeof window?void 0:window,r="undefined"==typeof history?void 0:history,s="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:"",href:""}:location},15572:(e,t,i)=>{i.d(t,{KJ:()=>r,X3:()=>n,g5:()=>s});var l=i(86733);let n=void 0===l.XC,r=!n;function s(){return!!n||!!l.XC.querySelector('react-app[data-ssr="true"]')}},51528:(e,t,i)=>{i.d(t,{X:()=>f,i:()=>c});var l=i(97156),n=i(5728),r=i(14740),s=i(97564),o=i(70170);let a=[];function c(e,t=!1,i=.5){if(!0!==(0,s.G7)("BROWSER_STATS_DISABLED")){if(i<0||i>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!l.XC?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=f(),e.bundler=r.v,Math.random()<i&&a.push(e),t?h():u()}}let d=null,u=(0,o.n)(async function(){await n.K,null==d&&(d=window.requestIdleCallback(h))},5e3);function h(){if(d=null,!a.length)return;let e=l.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],i=e.map(e=>JSON.stringify(e));for(;i.length>0;)t.push(function(e){let t=e.shift(),i=[t],l=t.length;for(;e.length>0&&l<=65536;){let t=e[0].length;if(l+t<=65536){let n=e.shift();i.push(n),l+=t}else break}return i}(i));return t}(a))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);a=[]}}function f(){return!!l.XC?.head?.querySelector('meta[name="user-staff"]')?.content}l.XC?.addEventListener("pagehide",h),l.XC?.addEventListener("visibilitychange",h)},5225:(e,t,i)=>{function l(...e){return JSON.stringify(e,(e,t)=>"object"==typeof t?t:String(t))}function n(e,t={}){let{hash:i=l,cache:n=new Map}=t;return function(...t){let l=i.apply(this,t);if(n.has(l))return n.get(l);let r=e.apply(this,t);return r instanceof Promise&&(r=r.catch(e=>{throw n.delete(l),e})),n.set(l,r),r}}i.d(t,{A:()=>n})}}]);
//# sourceMappingURL=app_components_pull_requests_file_tree_file-filter-element_ts-a6d06199a0f5.js.map