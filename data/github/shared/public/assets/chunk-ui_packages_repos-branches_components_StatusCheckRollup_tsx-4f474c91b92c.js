"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_repos-branches_components_StatusCheckRollup_tsx"],{1946:(e,o,t)=>{t.d(o,{xC:()=>k,B6:()=>j,ym:()=>A});var a=t(9449),r=t(59857),l=t(30729),s=t(94977),c=t(55847),i=t(87330),n=t(55293),d=t(20053),u=t(75177),h=t(38553),x=t(86079),p=t(22868),f=t(86519),g=t(69909);function m({checkRun:e}){let{icon:o,iconColor:t}=function(e){switch(e){case"check":return{icon:r.CheckIcon,iconColor:"success.fg"};case"dot-fill":return{icon:r.DotFillIcon,iconColor:"attention.fg"};case"stop":return{icon:r.StopIcon,iconColor:"muted.fg"};case"issue-reopened":return{icon:r.IssueReopenedIcon,iconColor:"muted.fg"};case"clock":return{icon:r.ClockIcon,iconColor:"attention.fg"};case"square-fill":return{icon:r.SquareFillIcon,iconColor:"fg.default"};case"skip":return{icon:r.SkipIcon,iconColor:"muted.fg"};case"alert":return{icon:r.AlertIcon,iconColor:"danger.fg"};default:return{icon:r.XIcon,iconColor:"danger.fg"}}}(e.icon),c="in_progress"===e.state;return(0,a.jsxs)(u.A,{"data-testid":"check-run-item",as:"li",sx:{display:"flex",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.default",backgroundColor:"canvas.subtle",py:2,pr:3,pl:"12px",alignItems:"center"},children:[(0,a.jsxs)(u.A,{sx:{alignSelf:"center",display:"flex"},children:[c?(0,a.jsx)(u.A,{sx:{height:"16px",width:"16px",minWidth:"16px",alignSelf:"center",mx:"7px"},children:(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 16 16",className:"anim-rotate","aria-hidden":"true",role:"img",children:[(0,a.jsx)("path",{opacity:".5",d:"M8 15A7 7 0 108 1a7 7 0 000 14v0z",stroke:"#dbab0a",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M15 8a7 7 0 01-7 7",stroke:"#dbab0a",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 12a4 4 0 100-8 4 4 0 000 8z",fill:"#dbab0a"})]})}):(0,a.jsx)(l.A,{icon:o,sx:{color:t,margin:"0px 7px",alignSelf:"center"}}),(0,a.jsx)(s.A,{"aria-label":e.avatarDescription,direction:"e",children:(0,a.jsx)(f.A,{href:e.avatarUrl,sx:{mr:2},"aria-label":"Avatar",children:(0,a.jsx)(p.r,{square:!0,src:e.avatarLogo,sx:{backgroundColor:e.avatarBackgroundColor}})})})]}),(0,a.jsxs)(g.A,{sx:{fontSize:"13px",color:"fg.muted"},children:[(0,a.jsxs)(g.A,{sx:{fontWeight:"bold",color:"fg.default",mr:"2px"},children:[e.name," "]}),e.pending?(0,a.jsx)(g.A,{sx:{fontStyle:"italic"},children:e.additionalContext}):e.additionalContext,e.description&&(0,a.jsxs)("span",{children:[" ","- ",e.pending?(0,a.jsx)(g.A,{sx:{fontStyle:"italic"},children:e.description}):e.description]})]}),(0,a.jsx)(f.A,{href:e.targetUrl,sx:{pl:"12px",fontSize:"13px",marginLeft:"auto"},children:"Details"})]})}try{m.displayName||(m.displayName="CheckRunItem")}catch{}function b({checkRuns:e}){return(0,a.jsx)(u.A,{as:"ul",sx:{display:"flex",flexDirection:"column",maxHeight:["230px","380px"],overflow:"auto"},children:e.map((e,o)=>(0,a.jsx)(m,{checkRun:e},o))})}try{b.displayName||(b.displayName="ChecksStatusBadgeFooter")}catch{}function C({checksHeaderState:e}){switch(e){case"SUCCEEDED":return(0,a.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:2},children:"All checks have passed"});case"FAILED":return(0,a.jsx)(g.A,{sx:{color:"var(--fgColor-danger, var(--color-danger-fg))",fontWeight:"bold",fontSize:2},children:"All checks have failed"});case"PENDING":return(0,a.jsx)(g.A,{sx:{color:"var(--fgColor-attention, var(--color-attention-fg))",fontWeight:"bold",fontSize:2},children:"Some checks haven\u2019t completed yet"});default:return(0,a.jsx)(g.A,{sx:{color:"var(--fgColor-danger, var(--color-danger-fg))",fontWeight:"bold",fontSize:2},children:"Some checks were not successful"})}}try{C.displayName||(C.displayName="HeaderState")}catch{}function k(e){let{combinedStatus:o,isOpen:t,onDismiss:r}=e,l=o?(0,a.jsx)(C,{checksHeaderState:o.checksHeaderState}):"Loading...";return t?(0,a.jsx)(x.l,{onClose:r,sx:{overflowY:"auto",backgroundColor:"canvas.default",boxShadow:"none",border:"1px solid",borderColor:"border.default",borderBottom:0},title:l,subtitle:o?o.checksStatusSummary:void 0,width:"xlarge",renderBody:()=>(0,a.jsx)(x.l.Body,{sx:{padding:0},children:o?(0,a.jsx)(b,{checkRuns:o.checkRuns}):(0,a.jsx)(u.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,a.jsx)(h.A,{size:"medium"})})})}):null}try{k.displayName||(k.displayName="CheckStatusDialog")}catch{}let v={success:{circled:r.CheckCircleIcon,filled:r.CheckCircleFillIcon,default:r.CheckIcon,color:"var(--bgColor-success-emphasis, var(--color-success-emphasis))"},pending:{circled:r.CircleIcon,filled:r.DotFillIcon,default:r.DotFillIcon,color:"var(--bgColor-attention-emphasis, var(--color-scale-yellow-4))"},failure:{circled:r.XCircleIcon,filled:r.XCircleFillIcon,default:r.XIcon,color:"var(--bgColor-danger-emphasis, var(--color-scale-red-4))"},error:{circled:r.QuestionIcon,filled:r.QuestionIcon,default:r.QuestionIcon,color:"var(--fgColor-muted, var(--color-canvas-subtle))"}};function y({className:e,descriptionText:o,icon:t,iconColor:r,tooltipText:c}){let i=(0,n.useId)(),u=(0,a.jsx)(l.A,{"aria-labelledby":c?i:void 0,icon:t,"aria-label":c?void 0:o||"See all checks",sx:{color:r}});return c&&(u=(0,a.jsx)(s.A,{id:i,"aria-label":c,direction:"e",children:u})),(0,a.jsxs)("span",{className:(0,d.$)(e,"d-flex flex-items-center gap-1"),"data-testid":"checks-status-badge-icon-only",children:[u,o&&(0,a.jsxs)("span",{children:[" ",o]})]})}function j(e){let{statusRollup:o,combinedStatus:t,variant:r="default",disablePopover:l,buttonSx:d,size:u="medium",descriptionText:h="",onWillOpenPopup:x}=e,[p,f]=(0,n.useState)(!1),g=(0,n.useId)(),m=(0,n.useRef)(null),b=v[o],{icon:C,iconColor:j}={icon:b?.[r]||v.error[r],iconColor:b?.color||v.error.color};return"error"===o?(0,a.jsx)(y,{className:l?void 0:"p-1",descriptionText:"?/?",icon:C,iconColor:j,tooltipText:"There was an error retrieving checks status"}):l?(0,a.jsx)(y,{descriptionText:h,icon:C,iconColor:j}):(0,a.jsxs)(a.Fragment,{children:[h?(0,a.jsx)(c.Q,{"data-testid":"checks-status-badge-button",leadingVisual:C,variant:"invisible",size:u,"aria-label":t?.checksStatusSummary??`Status checks: ${o}`,sx:{p:1,color:"fg.default",fontWeight:"normal",svg:{color:j},...d},ref:m,onClick:()=>{x?.(),f(!0)},children:h}):(0,a.jsx)(s.A,{id:g,"aria-label":t?.checksStatusSummary??o,direction:"se",sx:{mr:2},children:(0,a.jsx)(i.K,{unsafeDisableTooltip:!0,"data-testid":"checks-status-badge-icon",icon:C,variant:"invisible",size:u,"aria-labelledby":g,sx:{py:0,px:0,svg:{color:j},":hover:not([disabled])":{bg:"pageHeaderBg"},...d},ref:m,onClick:()=>{x?.(),f(!0)}})}),p&&(0,a.jsx)(k,{combinedStatus:t,isOpen:p,onDismiss:()=>{f(!1),setTimeout(()=>{m.current?.focus()},0)}})]})}try{y.displayName||(y.displayName="IconOnlyStatus")}catch{}try{j.displayName||(j.displayName="ChecksStatusBadge")}catch{}var S=t(83056),I=t(28784);function A(e,o){let[t,a]=(0,n.useState)(),[r,l]=(0,n.useState)();return[t,(0,n.useCallback)(async()=>{if(r!==e&&(l(e),a(void 0),e)){let t=(0,S.vk)(o,e),r=await (0,I.lS)(t);a(await r.json())}},[e,r,o])]}},63586:(e,o,t)=>{t.r(o),t.d(o,{default:()=>c});var a=t(9449),r=t(75177),l=t(89504),s=t(1946);function c({oid:e,statusCheckRollup:{state:o,shortText:t}}){let c=(0,l.t)(),[i,n]=(0,s.ym)(e,c),d="";try{d=t?.split("checks")[0]?.trim()||""}catch{}return(0,a.jsx)(r.A,{sx:{ml:-2},children:(0,a.jsx)(s.B6,{statusRollup:o,buttonSx:{fontSize:"12px"},combinedStatus:i,descriptionText:d,onWillOpenPopup:n})})}try{c.displayName||(c.displayName="StatusCheckRollup")}catch{}}}]);
//# sourceMappingURL=ui_packages_repos-branches_components_StatusCheckRollup_tsx-b4729b381f8d.js.map