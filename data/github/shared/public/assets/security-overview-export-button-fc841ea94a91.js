"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["security-overview-export-button"],{7572:(e,t,r)=>{r.d(t,{C:()=>i,i:()=>s});var n=r(97156),a=r(97564),o=r(46493);function i(e,t){(0,a.G7)("arianotify_comprehensive_migration")?s(l(e),{...t,element:t?.element??e}):(0,a.G7)("primer_live_region_element")&&t?.element===void 0?(0,o.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):s(l(e),t)}function s(e,t){let{assertive:r,element:i}=t??{};(0,a.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(i||document.body).ariaNotify(e,{interrupt:t?.assertive?"all":"none"}):(0,a.G7)("primer_live_region_element")&&void 0===i?(0,o.iP)(e,{politeness:r?"assertive":"polite"}):function(e,t,r){let a=r??n.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");a&&(a.textContent===e?a.textContent=`${e}\u00A0`:a.textContent=e)}(e,r,i)}function l(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},92536:(e,t,r)=>{r.d(t,{R:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new n),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let n=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},75014:(e,t,r)=>{r.d(t,{Mm:()=>o,QJ:()=>i,w8:()=>a});var n=r(96540);function a(e){return((0,n.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function o(e){let t=(0,n.useRef)(e.__wrapperElement.anchor||null),[r,a]=(0,n.useState)(!1),o=(0,n.useCallback)(()=>{a(!r)},[r,a]);return(0,n.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),i(e,o),{ref:t,open:r,setOpen:a}}function i(e,t){let r=(0,n.useRef)(e.__wrapperElement.anchor);(0,n.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},72245:(e,t,r)=>{r.d(t,{k:()=>c});let n=new(r(92536)).R;var a=r(74848),o=r(39595),i=r(24508),s=r(23235);let l=class ReactPartialElement extends i.H{async getReactNode(e){var t;let{Component:r}=await (t=this.name,n.getRegistration(t)),o=this.closest("react-partial-anchor");return(0,a.jsx)(s.c,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:o})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){n.register(e,t)}l=function(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}([o.p_],l)},23581:(e,t,r)=>{r.d(t,{A:()=>s});let{getItem:n,setItem:a,removeItem:o}=(0,r(74572).A)("localStorage"),i="REACT_PROFILING_ENABLED",s={enable:()=>a(i,"true"),disable:()=>o(i),isEnabled:()=>!!n(i)}},58840:(e,t,r)=>{var n=r(72245),a=r(84434);(0,n.k)("security-overview-export-button",{Component:a.I})},28784:(e,t,r)=>{function n(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function a(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return n(e,{...t,body:a,headers:r})}function o(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return n(e,{...t,headers:r})}function i(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return a(e,{...t,headers:r})}r.d(t,{DI:()=>n,QJ:()=>o,Sr:()=>i,lS:()=>a})},23235:(e,t,r)=>{r.d(t,{c:()=>m});var n=r(74848),a=r(96540),o=r(36165),i=r(45588),s=r(49107),l=r(47767),c=r(59840);function d({children:e,history:t}){let[r,o]=(0,a.useState)({location:t.location});return(0,c.m)(()=>t.listen(o),[t]),(0,n.jsx)(l.Ix,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(17857),p=r(51261),h=r(75014);function m({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:m}){let f=a.useRef(),g=globalThis.window;f.current||(f.current=g?(0,p.z)({window:g}):(0,i.sC)({initialEntries:[{pathname:"/"}]}));let y=f.current,_=(0,h.w8)(m);return(0,n.jsx)(o.U,{appName:e,wasServerRendered:l,children:(0,n.jsx)(s.Q,{history:y,routes:[],children:(0,n.jsxs)(d,{history:y,children:[(0,n.jsx)(r,{...t.props,..._}),(0,n.jsx)(u.h,{ssrError:c})]})})})}try{m.displayName||(m.displayName="PartialEntry")}catch{}},24508:(e,t,r)=>{r.d(t,{H:()=>ReactBaseElement});var n=r(74848),a=r(39595),o=r(5338),i=r(96540),s=r(23581),l=r(79461),c=r(51528);function d(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:o.H,hydrateRoot:o.c};s.A.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,a=await this.getReactNode(t),l=(0,n.jsx)(i.StrictMode,{children:a});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,87335,19))}logSSRError(e){if(l.z[e])return console.error("SSR failed with an expected error:",l.z[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:n,lineno:a,colno:o}=e,i=`${t} at ${r} (${n}:${a}:${o})`;return t=" ",i}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([a.aC],ReactBaseElement.prototype,"embeddedData",void 0),d([a.aC],ReactBaseElement.prototype,"ssrError",void 0),d([a.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}},84434:(e,t,r)=>{r.d(t,{I:()=>u});var n=r(74848),a=r(7572),o=r(28784),i=r(59857),s=r(38553),l=r(55847),c=r(96540);let ExportError=class ExportError extends Error{};let d=(0,c.memo)(()=>(0,n.jsx)(s.A,{size:"small",sx:{color:"fg.default"}}));function u({createExportUrl:e,errorBannerId:t,successBannerId:r,startedBannerId:s,buttonSize:u="small"}){let[p,h]=(0,c.useState)("stopped"),m="loading"===p,f=null==s?"Generating your report. Stay on this page to automatically download the report.":"Generating your report. You will receive an email when it's ready. Stay on this page to automatically download the report.";async function g(e){return new Promise(t=>setTimeout(t,e))}async function y(e){let t=await (0,o.DI)(e);if(202===t.status)return await g(2e3),y(e);if(t.status>399){let e=await t.json();throw new ExportError(e?.job?.error_message||"We couldn't generate your report. Please try again later. If the problem persists, please contact support.")}}async function _(n){if(n.preventDefault(),!m){h("loading");let n=t?document.getElementById(t):null;n&&(n.hidden=!0);let i=r?document.getElementById(r):null;i&&(i.hidden=!0);let l=s?document.getElementById(s):null;l?(l.hidden=!0,(0,a.i)(l.querySelector("p:last-child")?.textContent||f)):(0,a.i)(f),await g(10);try{l&&(l.hidden=!1);let t=await (0,o.DI)(e,{method:"POST"}),{jobStatusUrl:r,downloadExportUrl:n,error:c}=await t.json();if(c)throw new ExportError(c);await y(r),window.location.assign(n);let d=null==s?"Your report is ready and the download has started.":"Your report is ready and the download has started. An email with the report has also been sent to you.";(0,a.i)(d),i&&(l&&(l.hidden=!0),i.hidden=!1)}catch(t){let e=t instanceof ExportError?t.message:"Something went wrong while exporting your data. Please try again later. If the problem persists, please contact support.";if((0,a.i)(e),n){let t=n.querySelector("p:last-child");t&&(t.textContent=e),n.hidden=!1,l&&(l.hidden=!0)}}finally{h("stopped")}}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Q,{size:u,onClick:_,"aria-disabled":m,...m?{"aria-describedby":"so-export-loading-description"}:{},leadingVisual:m?d:i.DownloadIcon,variant:m?"invisible":"default","data-state":p,sx:{':not([data-state="stopped"])':{":hover,:active":{bg:"transparent"}}},children:"Export CSV"}),m&&(0,n.jsx)("span",{id:"so-export-loading-description",hidden:!0,children:f})]})}d.displayName="SmallSpinner";try{u.displayName||(u.displayName="SecurityOverviewExportButton")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-1ae216","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(58840)),e.O()}]);
//# sourceMappingURL=security-overview-export-button-fd3a8a83fa80.js.map