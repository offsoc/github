<% 1.upto(3) do |step| %>
  <template
    id="change-repository-visibility-<%= new_visibility %>-step-<%= step %>"
    <%= test_selector("change-repository-visibility-#{new_visibility}-step-#{step}") %>
  >
    <%= render Repositories::Settings::Visibilities::WarningComponent.new(
      repository: repository,
      new_visibility: new_visibility,
      stage: step,
    ) %>
  </template>

  <template
    id="proceed-button-visibility-<%= new_visibility %>-step-<%= step %>"
    <%= test_selector("proceed-button-visibility-#{new_visibility}-step-#{step}") %>
  >
    <%= render Repositories::Settings::Visibilities::ProceedButtonComponent.new(
      repository: repository,
      new_visibility: new_visibility,
      stage: step,
    ) %>
  </template>
<% end %>
