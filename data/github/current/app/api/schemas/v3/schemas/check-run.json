{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "id": "https://schema.github.com/v3/check-run.json",
  "title": "CheckRun",
  "description": "A check performed on the code of a given code change",
  "type": "object",
  "definitions": {
    "id": {
      "description": "The id of the check.",
      "example": 21,
      "type": "integer"
    },
    "name": {
      "description": "The name of the check.",
      "example": "test-coverage",
      "type": "string"
    },
    "head_sha": {
      "description": "The SHA of the commit that is being checked.",
      "example": "009b8a3a9ccbb128af87f9b1c0f4c62e8a304f6d",
      "type": "string"
    },
    "details_url": {
      "description": "The URL on the integrator's site that contains more information about the check.",
      "example": "http://example.com/builds/123",
      "type": "string"
    },
    "external_id": {
      "description": "An identifier defined by the integrator for this check.",
      "example": "abc123",
      "type": "string"
    },
    "status": {
      "description": "The phase of the lifecycle that the check is currently in.",
      "example": "queued",
      "type": "string",
      "enum": [
        "queued",
        "in_progress",
        "completed"
      ]
    },
    "conclusion": {
      "description": "The outcome of the check.",
      "example": "success",
      "type": "string",
      "enum": [
        "success",
        "failure",
        "neutral",
        "cancelled",
        "timed_out",
        "action_required",
        "skipped"
      ]
    },
    "started_at": {
      "description": "The time that the check started, in ISO 8601 format.",
      "example": "2018-05-07T08:00:00-07:00",
      "format": "date-time",
      "type": "string"
    },
    "completed_at": {
      "description": "The time that the check finished, in ISO 8601 format.",
      "example": "2018-05-07T08:00:00-07:00",
      "format": "date-time",
      "type": "string"
    },
    "action_label": {
      "description": "The text to be displayed on a button for the action.",
      "example": "Fix",
      "type": "string",
      "maxLength": 20
    },
    "action_identifier": {
      "description": "The short reference for the action.",
      "example": "fix_errors",
      "type": "string",
      "maxLength": 20
    },
    "action_description": {
      "description": "The description of what the action will do.",
      "example": "Fix the errors",
      "type": "string",
      "maxLength": 40
    },
    "actions": {
      "description": "Actions that can be requested following the check run.",
      "type": "array",
      "maxItems": 3,
      "items": {
        "type": "object",
        "required": [
          "label",
          "description",
          "identifier"
        ],
        "properties": {
          "label": {
            "$ref": "#/definitions/action_description"
          },
          "identifier": {
            "$ref": "#/definitions/action_identifier"
          },
          "description": {
            "$ref": "#/definitions/action_description"
          }
        }
      }
    },
    "repository_id": {
      "description": "The ID of the repository.",
      "example": 42,
      "type": "integer"
    },
    "check_run_id": {
      "description": "The id of the check.",
      "example": 21,
      "type": "integer"
    },
    "node_id": {
      "type": "string",
      "example": "MDg6Q2hlY2tSdW40"
    },
    "url": {
      "type": "string",
      "example": "https://api.github.com/repos/github/hello-world/check-runs/4"
    },
    "html_url": {
      "type": [
        "string",
        "null"
      ],
      "example": "https://github.com/github/hello-world/runs/4"
    },
    "check_run_details_url": {
      "type": [
        "string",
        "null"
      ],
      "example": "https://example.com"
    },
    "check_run_conclusion": {
      "type": [
        "string",
        "null"
      ],
      "example": "neutral"
    },
    "check_run_started_at": {
      "type": [
        "string",
        "null"
      ],
      "format": "date-time",
      "example": "2018-05-04T01:14:52Z"
    },
    "check_run_completed_at": {
      "type": [
        "string",
        "null"
      ],
      "format": "date-time",
      "example": "2018-05-04T01:14:52Z"
    },
    "check_run_external_id": {
      "type": [
        "string",
        "null"
      ],
      "example": ""
    }
  },
  "links": [
    {
      "title": "Create a new check run",
      "method": "POST",
      "rel": "create-legacy",
      "href": "/repositories/{repository_id}/check-runs",
      "schema": {
        "properties": {
          "head_sha": {
            "$ref": "#/definitions/head_sha"
          },
          "name": {
            "$ref": "#/definitions/name"
          },
          "details_url": {
            "$ref": "#/definitions/details_url"
          },
          "external_id": {
            "$ref": "#/definitions/external_id"
          },
          "status": {
            "$ref": "#/definitions/status"
          },
          "conclusion": {
            "$ref": "#/definitions/conclusion"
          },
          "started_at": {
            "$ref": "#/definitions/started_at"
          },
          "completed_at": {
            "$ref": "#/definitions/completed_at"
          },
          "output": {
            "$ref": "https://schema.github.com/v3/check-output.json#/definitions/legacy-output-request"
          },
          "actions": {
            "$ref": "#/definitions/actions"
          }
        },
        "required": [
          "name",
          "head_sha"
        ],
        "anyOf": [
          {
            "properties": {
              "status": {
                "enum": [
                  "completed"
                ]
              }
            },
            "required": [
              "conclusion"
            ]
          },
          {
            "properties": {
              "status": {
                "enum": [
                  "queued",
                  "in_progress"
                ]
              }
            }
          }
        ],
        "type": "object"
      }
    },
    {
      "title": "Update a check run",
      "method": "PATCH",
      "rel": "update-legacy",
      "href": "/repositories/{repository_id}/check-runs/{check_run_id}",
      "schema": {
        "properties": {
          "name": {
            "$ref": "#/definitions/name"
          },
          "details_url": {
            "$ref": "#/definitions/details_url"
          },
          "external_id": {
            "$ref": "#/definitions/external_id"
          },
          "status": {
            "$ref": "#/definitions/status"
          },
          "conclusion": {
            "$ref": "#/definitions/conclusion"
          },
          "started_at": {
            "$ref": "#/definitions/started_at"
          },
          "completed_at": {
            "$ref": "#/definitions/completed_at"
          },
          "output": {
            "$ref": "https://schema.github.com/v3/check-output.json#/definitions/legacy-output-request"
          },
          "actions": {
            "$ref": "#/definitions/actions"
          }
        },
        "anyOf": [
          {
            "properties": {
              "status": {
                "enum": [
                  "completed"
                ]
              }
            },
            "required": [
              "conclusion"
            ]
          },
          {
            "properties": {
              "status": {
                "enum": [
                  "queued",
                  "in_progress"
                ]
              }
            }
          }
        ],
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Create a new check run",
      "method": "POST",
      "href": "/repositories/{repository_id}/check-runs",
      "rel": "create",
      "schema": {
        "properties": {
          "head_sha": {
            "$ref": "#/definitions/head_sha"
          },
          "name": {
            "$ref": "#/definitions/name"
          },
          "details_url": {
            "$ref": "#/definitions/details_url"
          },
          "external_id": {
            "$ref": "#/definitions/external_id"
          },
          "status": {
            "$ref": "#/definitions/status"
          },
          "conclusion": {
            "$ref": "#/definitions/conclusion"
          },
          "started_at": {
            "$ref": "#/definitions/started_at"
          },
          "completed_at": {
            "$ref": "#/definitions/completed_at"
          },
          "output": {
            "$ref": "https://schema.github.com/v3/check-output.json#/definitions/output-request"
          },
          "actions": {
            "$ref": "#/definitions/actions"
          }
        },
        "required": [
          "name",
          "head_sha"
        ],
        "anyOf": [
          {
            "properties": {
              "status": {
                "enum": [
                  "completed"
                ]
              }
            },
            "required": [
              "conclusion"
            ]
          },
          {
            "properties": {
              "status": {
                "enum": [
                  "queued",
                  "in_progress"
                ]
              }
            }
          }
        ],
        "type": "object",
        "additionalProperties": false
      }
    },
    {
      "title": "Rerequest check run",
      "method": "POST",
      "rel": "rerequest",
      "href": "/repositories/{repository_id}/check-runs/{check_run_id}/rerequest",
      "schema": {
        "additionalProperties": false,
        "type": [
          "object",
          "null"
        ]
      }
    },
    {
      "title": "Update a check run",
      "method": "PATCH",
      "href": "/repositories/{repository_id}/check-runs/{check_run_id}",
      "rel": "update",
      "schema": {
        "properties": {
          "name": {
            "$ref": "#/definitions/name"
          },
          "details_url": {
            "$ref": "#/definitions/details_url"
          },
          "external_id": {
            "$ref": "#/definitions/external_id"
          },
          "status": {
            "$ref": "#/definitions/status"
          },
          "conclusion": {
            "$ref": "#/definitions/conclusion"
          },
          "started_at": {
            "$ref": "#/definitions/started_at"
          },
          "completed_at": {
            "$ref": "#/definitions/completed_at"
          },
          "output": {
            "$ref": "https://schema.github.com/v3/check-output.json#/definitions/output-request"
          },
          "actions": {
            "$ref": "#/definitions/actions"
          }
        },
        "anyOf": [
          {
            "properties": {
              "status": {
                "enum": [
                  "completed"
                ]
              }
            },
            "required": [
              "conclusion"
            ]
          },
          {
            "properties": {
              "status": {
                "enum": [
                  "queued",
                  "in_progress"
                ]
              }
            }
          }
        ],
        "type": [
          "object",
          "null"
        ],
        "additionalProperties": false
      }
    }
  ],
  "properties": {
    "id": {
      "$ref": "#/definitions/id"
    },
    "node_id": {
      "$ref": "#/definitions/node_id"
    },
    "head_sha": {
      "$ref": "#/definitions/head_sha"
    },
    "name": {
      "$ref": "#/definitions/name"
    },
    "url": {
      "$ref": "#/definitions/url"
    },
    "html_url": {
      "$ref": "#/definitions/html_url"
    },
    "details_url": {
      "$ref": "#/definitions/check_run_details_url"
    },
    "status": {
      "$ref": "#/definitions/status"
    },
    "conclusion": {
      "$ref": "#/definitions/check_run_conclusion"
    },
    "started_at": {
      "$ref": "#/definitions/check_run_started_at"
    },
    "completed_at": {
      "$ref": "#/definitions/check_run_completed_at"
    },
    "external_id": {
      "$ref": "#/definitions/check_run_external_id"
    },
    "check_suite": {
      "type": [
        "object",
        "null"
      ],
      "properties": {
        "id": {
          "type": "number"
        }
      },
      "additionalProperties": false,
      "required": [
        "id"
      ]
    },
    "output": {
      "$ref": "https://schema.github.com/v3/check-output.json#/definitions/check-output-response"
    },
    "app": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "https://schema.github.com/v3/integration.json#"
        }
      ]
    },
    "pull_requests": {
      "items": {
        "$ref": "https://schema.github.com/v3/pull-request-minimal.json#"
      }
    },
    "deployment": {
      "items": {
        "$ref": "https://schema.github.com/v3/deployment.json#"
      }
    }
  },
  "additionalProperties": false,
  "required": [
    "id",
    "node_id",
    "head_sha",
    "name",
    "url",
    "html_url",
    "details_url",
    "status",
    "conclusion",
    "started_at",
    "completed_at",
    "external_id",
    "check_suite",
    "output",
    "app",
    "pull_requests"
  ]
}
