import {Meta, Story} from '@storybook/blocks'

<Meta title="Recipes/Filter/Documentation/Events and validation" />

# Events and validation

## üìù Overview

Below are diagrams that illustrate the events and validation that occur when a user interacts with the filter input. The diagrams are generated using [mermaid](https://mermaid-js.github.io/mermaid/#/). The diagrams are interactive and can be edited and viewed from their respective source links.

User provided props are highlighted in aqua, and context methods are highlighted in goldenrod.

## Events

### `onKeyDown`

They `onKeyDown` event starts with the filter input. It's triggered when the user presses a key while the input is focused. The event triggers the `checkCursorPosition` method, which ultimately uses `updateInputSelection` to update where the cursor is active. It also triggers the `inputKeyDown` method from the input context which handles various specific key bindings to handle navigating any suggestions that might appear. Lastly, if a user has provided an `onKeyDown` prop, it will be called.

![flowchart of onKeyDown events](https://mermaid.ink/img/pako:eNqdVmlv2zgQ_SsqjS4cIDEk2cqhogWyTYIabdFus9sFVtYHRhrbRCRSJakctf3flyJ1R06PAIGs4Zs3M2-GpDYoYjEgH604ztbW3xcLaqm_KMFCXMDSEnkUgRDWkiSJn5AUXvUA9yzNzGpG6G1_NWJUwoM0gBVLYqCcxX1ULoB_5qzkwd9yrBAGcx5ckUQCn8xplsvQOjp6s2X0PTxesHu6teZwB1Ta41G0huj2bc4F45-ZIJIwemD9Ua474xEp3Eu3A9_3q8QqiGvCvXy5J-KfSc6rcNOS7pO2tth-wPF2jekKKpZZzWLsP89zxaJcVDReTaPNv5BNQqLbiuV4PCot7zCNE-AHVQOUfwkp_CrBB9dU3FgrHwQ6pWtIICreryXm0nrx-rUFyUR0rGFYU9XuOkHJcyVVhrmajX44u5WKo5qfZzGWMO_ErAsQ-Y2Z7ZGem1gNQFmjWX92hDoQFbUOexoMRg378pfTNa5ntmhQNe9tiKPZt-ecs_sPsFST-RW4JBFOPhAKr7pvloZ9Iau13KoCVysQRXRhBws0WpMYrhvbAoX74hT5_EScf7JOEKcIIkCeq4rvWpGGA10qMXjH3w0UAVla48Z2oHzDql0NsDUILfM0aF6M8BAPRhYRzrqu9gDsHUvheREuadwVwLAAjfekvMSJqPf5SaDSzG9SIsNO6-uZbga0dar0Jn5qZq8VaaY2mZgX4mLVB7r6l8h1q-utfdV2MiUbSTnIN-o_5_Q5bFmL2dBSDfxms0Cq-3OhJ18fOhCPNUy1cbf7MdfThih0reZznuVxEIyWjEfwBfR7WGi5X02dYU9Oz8jZFOUMV1UI1S2q49_K0_uddnjtdjTJuK1k9hEOCb5HQm9IwmHNzGJtL7HW0UT5Y_FIo60xOYF-ntP4K05IcQyGPSezucxvN7grUX_lwB_7UNfk90KQNEuqppaBpsVZoQ9mc4VpgmuVSHNg1DzTlpqt8o-rk7qlnkJGatvf4OhWqmfYlbDXbMd5YjJTaV1V1Ca5hubKpGIWzZUypzE8bKs7q4esAgXVR0L45JZoWMWa5UlsjpSqH-gQpcBTTGL1KbcpPBZIriGFBfLVzxiWOE_kAi3oTkFNXpfqtmUc-XowDhHOJSuUrQ0GdUGwmo20tmaYIn-DHpDvTicns5nt2VO7eJwdH6JHZfXsieuenbgzd-ac2ra3O0TfGVMEzsS2p96ZN_Vc58Q99RzlADqHj-YTVH-J6gj_aYeik7v_AXelll8?type=png)
[Diagram source](https://mermaid.live/edit#pako:eNqdVmlv2zgQ_SsqjS4cIDEk2cqhogWyTYIabdFus9sFVtYHRhrbRCRSJakctf3flyJ1R06PAIGs4Zs3M2-GpDYoYjEgH604ztbW3xcLaqm_KMFCXMDSEnkUgRDWkiSJn5AUXvUA9yzNzGpG6G1_NWJUwoM0gBVLYqCcxX1ULoB_5qzkwd9yrBAGcx5ckUQCn8xplsvQOjp6s2X0PTxesHu6teZwB1Ta41G0huj2bc4F45-ZIJIwemD9Ua474xEp3Eu3A9_3q8QqiGvCvXy5J-KfSc6rcNOS7pO2tth-wPF2jekKKpZZzWLsP89zxaJcVDReTaPNv5BNQqLbiuV4PCot7zCNE-AHVQOUfwkp_CrBB9dU3FgrHwQ6pWtIICreryXm0nrx-rUFyUR0rGFYU9XuOkHJcyVVhrmajX44u5WKo5qfZzGWMO_ErAsQ-Y2Z7ZGem1gNQFmjWX92hDoQFbUOexoMRg378pfTNa5ntmhQNe9tiKPZt-ecs_sPsFST-RW4JBFOPhAKr7pvloZ9Iau13KoCVysQRXRhBws0WpMYrhvbAoX74hT5_EScf7JOEKcIIkCeq4rvWpGGA10qMXjH3w0UAVla48Z2oHzDql0NsDUILfM0aF6M8BAPRhYRzrqu9gDsHUvheREuadwVwLAAjfekvMSJqPf5SaDSzG9SIsNO6-uZbga0dar0Jn5qZq8VaaY2mZgX4mLVB7r6l8h1q-utfdV2MiUbSTnIN-o_5_Q5bFmL2dBSDfxms0Cq-3OhJ18fOhCPNUy1cbf7MdfThih0reZznuVxEIyWjEfwBfR7WGi5X02dYU9Oz8jZFOUMV1UI1S2q49_K0_uddnjtdjTJuK1k9hEOCb5HQm9IwmHNzGJtL7HW0UT5Y_FIo60xOYF-ntP4K05IcQyGPSezucxvN7grUX_lwB_7UNfk90KQNEuqppaBpsVZoQ9mc4VpgmuVSHNg1DzTlpqt8o-rk7qlnkJGatvf4OhWqmfYlbDXbMd5YjJTaV1V1Ca5hubKpGIWzZUypzE8bKs7q4esAgXVR0L45JZoWMWa5UlsjpSqH-gQpcBTTGL1KbcpPBZIriGFBfLVzxiWOE_kAi3oTkFNXpfqtmUc-XowDhHOJSuUrQ0GdUGwmo20tmaYIn-DHpDvTicns5nt2VO7eJwdH6JHZfXsieuenbgzd-ac2ra3O0TfGVMEzsS2p96ZN_Vc58Q99RzlADqHj-YTVH-J6gj_aYeik7v_AXelll8)

### `onChange`

The `onChange` event is fired when the user types in the input field or otherwise changes the value. The event is handled by `inputOnChange` which is provided by the context. It will call `updateFilter` which, depending on the cursor index, will use `updateInputSelection` to update the cursor position. Lastly, if the user has provided an `onChange` prop, it will be called.

![flowchart of onChange event](https://mermaid.ink/img/pako:eNqdVvtv2zYQ_ldUGh0cwDEs-a2iBbI8UGMd1jVbB0zWD4x0toVIpEZSecz2_z6K1INS5DSYAcPW8bvvPt4dj9qjgIaAXLRlON1Zf1ytiSU_QYw5v4KNxbMgAM6tTRTHbhwl8KEFeKRJqlfTiNy3VwNKBDwJDdjSOATCaNhGZRzYV0YLHvxPhiVCY96_ty68mygWwIYrkmbCt87PPx0o-QWer-gjOVgreAAiRv1esIPg_jJjnLKvlEciouTM-qlYt_u9KHcv3M5c1y21lRDnBxF_jjNWhhsXdL8pq8GmOboJLneYbKGkmFQU2v6C5KSQGxpkvKSZVjTK_HaWyzgK7kuWWb9XWD5jEsbAzowCFJDcr8x255qMG6q0e56SdAsxBPnzrcBMWO8-frQgHvKG1fcrqspdCRQsk6lKMZO90Q43MqTYsvJZGmIBq0ZMcwM8u9Pt3VN9E8oGKLbZJu7uoo7wVfyF1xne76hD0Wb9XtW9ebXK5m_BbBXkcMEYffwCG9mm34GJKMDxl4jAh-aTpWDfou1OHORut1vguQg-8taot4tCuK1ta-S_EipX9YZQf6aNOHYeh4O4kHt_MIKdjHUtM8MaFI4nOaKN1a9tZ9LdN4pYY40OMcxjr37QhYDwVHwe4LTpPepGfqYJvJ6QaxI2k1ERAQlPy9_gmFfDYO5JydldEgm_0RItTWPdeQbXRJ41vsqziWXuyfavSOyMYnfnb6K3phPIQHyS34yR17CFWn2uhWz3_X6NZMVXXPW9mj0Q9hVM1u14rLhql7b2kdfuzU4F-rgVk8DrbSgL4BuoZz_PUMcxNydiK4VTncJald29kzw5zY00_A190_9TgqlZglqMY4g5RdiV5BOdNm0UrxqmXTnTi5W9wFrnQ-mP-TMJDtpke-r3goTfcRzlg89vOdlGvRzvoUD9ngF7bkMdre8dj5I0LotaBBrnA0FNY317KYJbKaQxFQqskU1j-7NyNhvZk8hAHuk7HNwL-es3U9ieAXZpKu5sXfwbz9O8-p5YkRCeSk0NYM2SL9X9qb31vvTajylt2ytfIfwX18ZNIcx-421k9ov2PbwIfygv2BbyDXJqVr6jWRzq0VZ2EBqgBFiCo1C-d-5zjzUSO0hgjVz5N4QNzmKxRmtylFCt61q-GlCGXNXKA4QzQfNeqAwadRVhmeGksqaYIHePnpBrT8dDx7EX48V86UychT0ZoGfkjpej4Xy-mC1nU2e5nNjOcYD-pVQyjIazmS0XJrPZeDSZz5cDBErDr_p9Wb02qwh_K3zee8f_ADHZyxo?type=png)

[Diagram source](https://mermaid.live/edit#pako:eNqdVvtv2zYQ_ldUGh0cwDEs-a2iBbI8UGMd1jVbB0zWD4x0toVIpEZSecz2_z6K1INS5DSYAcPW8bvvPt4dj9qjgIaAXLRlON1Zf1ytiSU_QYw5v4KNxbMgAM6tTRTHbhwl8KEFeKRJqlfTiNy3VwNKBDwJDdjSOATCaNhGZRzYV0YLHvxPhiVCY96_ty68mygWwIYrkmbCt87PPx0o-QWer-gjOVgreAAiRv1esIPg_jJjnLKvlEciouTM-qlYt_u9KHcv3M5c1y21lRDnBxF_jjNWhhsXdL8pq8GmOboJLneYbKGkmFQU2v6C5KSQGxpkvKSZVjTK_HaWyzgK7kuWWb9XWD5jEsbAzowCFJDcr8x255qMG6q0e56SdAsxBPnzrcBMWO8-frQgHvKG1fcrqspdCRQsk6lKMZO90Q43MqTYsvJZGmIBq0ZMcwM8u9Pt3VN9E8oGKLbZJu7uoo7wVfyF1xne76hD0Wb9XtW9ebXK5m_BbBXkcMEYffwCG9mm34GJKMDxl4jAh-aTpWDfou1OHORut1vguQg-8taot4tCuK1ta-S_EipX9YZQf6aNOHYeh4O4kHt_MIKdjHUtM8MaFI4nOaKN1a9tZ9LdN4pYY40OMcxjr37QhYDwVHwe4LTpPepGfqYJvJ6QaxI2k1ERAQlPy9_gmFfDYO5JydldEgm_0RItTWPdeQbXRJ41vsqziWXuyfavSOyMYnfnb6K3phPIQHyS34yR17CFWn2uhWz3_X6NZMVXXPW9mj0Q9hVM1u14rLhql7b2kdfuzU4F-rgVk8DrbSgL4BuoZz_PUMcxNydiK4VTncJald29kzw5zY00_A190_9TgqlZglqMY4g5RdiV5BOdNm0UrxqmXTnTi5W9wFrnQ-mP-TMJDtpke-r3goTfcRzlg89vOdlGvRzvoUD9ngF7bkMdre8dj5I0LotaBBrnA0FNY317KYJbKaQxFQqskU1j-7NyNhvZk8hAHuk7HNwL-es3U9ieAXZpKu5sXfwbz9O8-p5YkRCeSk0NYM2SL9X9qb31vvTajylt2ytfIfwX18ZNIcx-421k9ov2PbwIfygv2BbyDXJqVr6jWRzq0VZ2EBqgBFiCo1C-d-5zjzUSO0hgjVz5N4QNzmKxRmtylFCt61q-GlCGXNXKA4QzQfNeqAwadRVhmeGksqaYIHePnpBrT8dDx7EX48V86UychT0ZoGfkjpej4Xy-mC1nU2e5nNjOcYD-pVQyjIazmS0XJrPZeDSZz5cDBErDr_p9Wb02qwh_K3zee8f_ADHZyxo)

### `onFocus`

The `onFocus` event is triggered when the user clicks on the input field or tabs into the input. It will call `inputOnFocus` from the input context which will set the `isInputFocused` state to true and if the user was previously interacting with suggestions, it will set `isInteractingWithSuggestions` to false. If the user was not previously interacting with suggestions, it will reparse the input value.

![flowchart of onFocus event](https://mermaid.ink/img/pako:eNqVVttu2zgQ_RWVRgsHcAxLdnxR0QJpk6BGW7Tb7HaBlfXASGObiEyqJJVLbf_7UqQkU4pyqQHD1vDMmcOZ4VBbFLEYkI9WHKdr5--zBXXUJ0qwEGewdEQWRSCEsyRJ4idkA28bgFu2Sc1qSuh1czViVMKdNIAVS2KgnMVNVCaAf-es4MG_MqwQBvP6tXMaXJBEAu_PaZrJ0Dk-fr9j9DPcn7FbunPmcANUDrqdaA3R9ceMC8a_M0EkYfTIeVOsu90Oyd0LtyPf90ttJcR7JuKHJONluGFB901bLbZnOD6uMV1ByTKqWIz9AU87yQWLMlFynFQc2vwHUhISXZcs426nsHzCNE6AH1kFKCC5X5nt1jUVN9ZpDwIt6RISiPLnS4m5dF69e-dA0hc1axhWVJW7Fih5pvKUYq56oxluYElxVeWzNMYS5rWY9gZEdmXau6P7JlYNUGyzSdzeRS3hq_jToDV82FKHos26nap782qVzd-AuTrI7pRzdvsFlqpNfwKXJMLJF0Lhbf3J0bAfZLWWO7Xb1QpELkIMggXqrEkMlwfbAoVPhMpVvSDUP2ktjpvHESBP1d5vrGCPxjpXmeE1Ci9QHGTpdA-2I-UeWkU8YK0OsczD4PBgCgHxY_FFhNO696Ad-Ylt4OmEnNO4noyKCGj8uPwlTkQ1CSaBkpxdbYgMay3R0DQ0nWdxjdRZE_M8m1jlnq7-JXJtFbs9fyOzNZNADvK9-macPoUt1JpzLVW7b7cLpCo-F7rv9eyBuKthqm77fcV1cGlqHwTN3mxVYI5bMQmCzpLxCH6Afg7zDBmfYhqaBB1iuu06861bMmvOVuiTl2XX9rBTe5DhWTIeY3uQvIe0RRWey4U98gy2sheuznFf0WFxT6OdMbmB_j2l8U-ckHyghQ0n16qDF9wUqL8y4PdNqGfkvhJkkyalwCLQMD_oesqaW0kTXCohtdNeYK1sWtkYlzPXyp5CRuqoXuHoWqrfsH4IG-fINLVzEQSGx8z7OY3hLgzbscVQcFsuFcNhdlMtv4jbdYPynSBsuwouCp3uyy8Ze-YY990DHbvy6mwg_0TUTqxZlsRmaJU9hHpoA3yDSazeKLe5xwLJNWxggXz1N4YlzhK5QAu6V1Cj61xd-owjX_d2D-FMsrwbKoNBnRGssr2prCmmyN-iO-S7J8O-57nT4XQy80be1B310D3yh7NBfzKZjmfjE282G7nevod-M6YYBv3x2FULo_F4OBhNJrMeAq3hq3kT1i_EOsJ_Gp933_5_DoG_ng?type=png)

[Diagram source](https://mermaid.live/edit#pako:eNqVVttu2zgQ_RWVRgsHcAxLdnxR0QJpk6BGW7Tb7HaBlfXASGObiEyqJJVLbf_7UqQkU4pyqQHD1vDMmcOZ4VBbFLEYkI9WHKdr5--zBXXUJ0qwEGewdEQWRSCEsyRJ4idkA28bgFu2Sc1qSuh1czViVMKdNIAVS2KgnMVNVCaAf-es4MG_MqwQBvP6tXMaXJBEAu_PaZrJ0Dk-fr9j9DPcn7FbunPmcANUDrqdaA3R9ceMC8a_M0EkYfTIeVOsu90Oyd0LtyPf90ttJcR7JuKHJONluGFB901bLbZnOD6uMV1ByTKqWIz9AU87yQWLMlFynFQc2vwHUhISXZcs426nsHzCNE6AH1kFKCC5X5nt1jUVN9ZpDwIt6RISiPLnS4m5dF69e-dA0hc1axhWVJW7Fih5pvKUYq56oxluYElxVeWzNMYS5rWY9gZEdmXau6P7JlYNUGyzSdzeRS3hq_jToDV82FKHos26nap782qVzd-AuTrI7pRzdvsFlqpNfwKXJMLJF0Lhbf3J0bAfZLWWO7Xb1QpELkIMggXqrEkMlwfbAoVPhMpVvSDUP2ktjpvHESBP1d5vrGCPxjpXmeE1Ci9QHGTpdA-2I-UeWkU8YK0OsczD4PBgCgHxY_FFhNO696Ad-Ylt4OmEnNO4noyKCGj8uPwlTkQ1CSaBkpxdbYgMay3R0DQ0nWdxjdRZE_M8m1jlnq7-JXJtFbs9fyOzNZNADvK9-macPoUt1JpzLVW7b7cLpCo-F7rv9eyBuKthqm77fcV1cGlqHwTN3mxVYI5bMQmCzpLxCH6Afg7zDBmfYhqaBB1iuu06861bMmvOVuiTl2XX9rBTe5DhWTIeY3uQvIe0RRWey4U98gy2sheuznFf0WFxT6OdMbmB_j2l8U-ckHyghQ0n16qDF9wUqL8y4PdNqGfkvhJkkyalwCLQMD_oesqaW0kTXCohtdNeYK1sWtkYlzPXyp5CRuqoXuHoWqrfsH4IG-fINLVzEQSGx8z7OY3hLgzbscVQcFsuFcNhdlMtv4jbdYPynSBsuwouCp3uyy8Ze-YY990DHbvy6mwg_0TUTqxZlsRmaJU9hHpoA3yDSazeKLe5xwLJNWxggXz1N4YlzhK5QAu6V1Cj61xd-owjX_d2D-FMsrwbKoNBnRGssr2prCmmyN-iO-S7J8O-57nT4XQy80be1B310D3yh7NBfzKZjmfjE282G7nevod-M6YYBv3x2FULo_F4OBhNJrMeAq3hq3kT1i_EOsJ_Gp933_5_DoG_ng)

### `onBlur`

The `onBlur` event happens when the user leaves the input field. This event calls `inputOnBlur` from the input context and handles the showing/hiding of the suggestions list as well as reparsing the input value (if the user is not currently interacting with suggestions).

![flowchart of onBlur event](https://mermaid.ink/img/pako:eNqVVm1v2zYQ_isqjQ4O4BiW_BJZRQtkTYIa67Cu2Tpgsj4w0tkmIpMqSeVltv_7KFKSKUXuMgOGreNzzz28Ox61QzFLAAVozXG2cf64WlJHfeIUC3EFK0fkcQxCOCuSpkFKtvCuBXhk28ysZoTet1djRiU8SQNYszQBylnSRuUC-BfOSh78PccKYTBv3zqX4Q1JJfDhgma5jJzz8w97Rn-B5yv2SPfOAh6AylG_F28gvv-Yc8H4FyaIJIyeOT-V626_Rwr30u0sCIJKWwXxTMTucD-nOa9ijUuu37TVovoPyR83mK6hYpnULMb-ep4bFueiopnWNNr8P9SkJL6vWGb9Xmn5hGmSAj-zClBCCr8q251rKm6i0x6GWtItpBAXz7cSc-m8ef_egXQoGtYoqqlqdy1Q8lylKsNc9UY73MiS4qrK51mCJSwaMe0NiPzOtHdP902iGqDcZpu4u4s6wtfx_bAzfNRRh7LN-r26e4tqVc3fgrk6yP6Sc_b4GVaqTb8BlyTG6WdC4V3zydGwr2S9kXu12_UaRCFCjMIl6m1IArdH2xJFPwhVqHpFqD-zRhy3iCNAXqq9P1jBTsa6VpnhDQovVBxk5fSPtjPlHllFPGKtDrHM4_D4YAoByan4IsZZ03vUjfzEtvDjhFzTpJmMmghoclr-CqeiHgYXoZKc322JjBotYdzLsWPaziKaqIMmFkUqsUo8Xf9F5MaqdJU828NsyqSOg_ygvjmnJ4GlSHOcpery3W6JVKEXQre7HjmQ9DVMletwMERHfFvyKGz348vY5nyVRz_srRiP4Svo56hISce5tkdgq45Tk7ajJLd7D0VOrC20_S1909elvVn0qZ35oxjPEnOK8EV6T7fWtFG2enp25cws1vYS65wPlT8WzzTeG5Mb6t9LmnzDKSkmXdRycq16eeFDifo9B_7chnpG3xtBtllaFbUMNC4mgB6_5rrSBLdKSGMMlFgrm9b2Z9UwtrKnkLE6w3c4vpfqN2qmsH3o3RcmcxKcm4raiDvS3BgpZtFcHAuawNO-up9ayCpQWL0QRF2XQMkqNixPEzMZqnqgAdoC32KSqNe2XeGxRHIDW1iiQP1NYIXzVC7Rkh4U1Oi6Vjcr4yjQjTFAOJesyGxtMKgrglVvbGtrhikKdugJBe50PPQ81x_7F3Nv4vnuZICeUTCej4YXF_5sPpt68_nE9Q4D9A9jimE0nM1ctTCZ-KOZP_L9AQKt4VfzuqnfOnWEvzW-qOThX4ifjPM?type=png)

[Diagram source](https://mermaid.live/edit#pako:eNqVVm1v2zYQ_isqjQ4O4BiW_BJZRQtkTYIa67Cu2Tpgsj4w0tkmIpMqSeVltv_7KFKSKUXuMgOGreNzzz28Ox61QzFLAAVozXG2cf64WlJHfeIUC3EFK0fkcQxCOCuSpkFKtvCuBXhk28ysZoTet1djRiU8SQNYszQBylnSRuUC-BfOSh78PccKYTBv3zqX4Q1JJfDhgma5jJzz8w97Rn-B5yv2SPfOAh6AylG_F28gvv-Yc8H4FyaIJIyeOT-V626_Rwr30u0sCIJKWwXxTMTucD-nOa9ijUuu37TVovoPyR83mK6hYpnULMb-ep4bFueiopnWNNr8P9SkJL6vWGb9Xmn5hGmSAj-zClBCCr8q251rKm6i0x6GWtItpBAXz7cSc-m8ef_egXQoGtYoqqlqdy1Q8lylKsNc9UY73MiS4qrK51mCJSwaMe0NiPzOtHdP902iGqDcZpu4u4s6wtfx_bAzfNRRh7LN-r26e4tqVc3fgrk6yP6Sc_b4GVaqTb8BlyTG6WdC4V3zydGwr2S9kXu12_UaRCFCjMIl6m1IArdH2xJFPwhVqHpFqD-zRhy3iCNAXqq9P1jBTsa6VpnhDQovVBxk5fSPtjPlHllFPGKtDrHM4_D4YAoByan4IsZZ03vUjfzEtvDjhFzTpJmMmghoclr-CqeiHgYXoZKc322JjBotYdzLsWPaziKaqIMmFkUqsUo8Xf9F5MaqdJU828NsyqSOg_ygvjmnJ4GlSHOcpery3W6JVKEXQre7HjmQ9DVMletwMERHfFvyKGz348vY5nyVRz_srRiP4Svo56hISce5tkdgq45Tk7ajJLd7D0VOrC20_S1909elvVn0qZ35oxjPEnOK8EV6T7fWtFG2enp25cws1vYS65wPlT8WzzTeG5Mb6t9LmnzDKSkmXdRycq16eeFDifo9B_7chnpG3xtBtllaFbUMNC4mgB6_5rrSBLdKSGMMlFgrm9b2Z9UwtrKnkLE6w3c4vpfqN2qmsH3o3RcmcxKcm4raiDvS3BgpZtFcHAuawNO-up9ayCpQWL0QRF2XQMkqNixPEzMZqnqgAdoC32KSqNe2XeGxRHIDW1iiQP1NYIXzVC7Rkh4U1Oi6Vjcr4yjQjTFAOJesyGxtMKgrglVvbGtrhikKdugJBe50PPQ81x_7F3Nv4vnuZICeUTCej4YXF_5sPpt68_nE9Q4D9A9jimE0nM1ctTCZ-KOZP_L9AQKt4VfzuqnfOnWEvzW-qOThX4ifjPM)

### `onClick`

The `onClick` event is triggered when the user clicks inside the input field. The event triggers the `checkCursorPosition` method, which ultimately uses `updateInputSelection` to update where the cursor is active. If the previous position of the input selection state does not match the new position, the `forceReparse` method is called.

![flowchart of onClick event](https://mermaid.ink/img/pako:eNqlVv1v2zYQ_VdUGh0cwDEs-VtFC2RNghrr0K7ZOmCyfmCks01EIlWSykdt_--jSEmWFDn11gBBIvLdu8d3d5S2KGAhIBetOU421p-XS2qpnyDCQlzCyhJpEIAQ1opEkRuRGN40AA8sTsxuQuhdczdgVMKjNIA1i0KgnIVNVCqAf-Ys58HfUqwQBvP6tXXhXZNIAu8vaJJK3zo_f7dj9Dd4umQPdGct4B6oHHQ7wQaCu_cpF4x_ZoJIwuiZ9Uu-b3c7JAvPw85c1y20FRDnBxl_jVJepBvmdJ_0aoXtBxzvN5iuoWAZlSxm_XSeaxakoqAZlzR6-RnLESkRCe5K-5QLKibUrlW8N7uTLOSw73k63Q1EEGTPNxJzab16-9aCqC9qq75fUpXhOr_kqbIhwVyVftBIN9Dp8rqpwqZJiCUsajnPKiJFemu6t6PbIlT1_YBpGAFvErc3SUv6Mv_Ma03vt1Qq76Jup2zOrBJFbzdgtk6yu-CcPXyElerCr8AlCXD0kVB4U3-yNOwLWW_kTp12vQaRiRADb4k6GxLCzWFtifwXUmWqTkj1V1LLY2d5BMgLdfb7SrKjua6UM7xG4XiKg6ys7mHtTIX7lSIesJUOqSwPvcODKQSEx_KLACf16EE78gOL4WVDrmhYN6MkAhoel7_CkSgHfeopyeltTKRfawkTXu1fPZW17v2ZsXth5rzOivEAvoB-zvEnjMlPzIj2q1GGoSGq2DdS5xSLrIGwoqHrv4ncVPq7vWVGpprmhBzkO_WbcvoSNi-Q8VQq9dvtEqkmXwh9DH2VQtjVMNWq-33JdQhpaleuNsaxVYFx71ghnnk0Nh4d0trtUrPT15XW4isCxv_H43HV44MYpyLmGGGbi8-Z84qc4Es5MQZbrueh1nlf0WHxRIOdWbI9_feChl9xRLJe9RtBdqUmjnefo_5IgT81oY6R-0qQOIkKgXmiYXbP6ekx71xNcKOE1C67HFsxtOLGpBinioEKGaib6hYHd1L99et3UKPepsGta88zPGaOFzSER99vx-Z3ot3yTjUc5jTl9knctu0VXzx-25vwOtdpn_6OrV65Jnz3TMeu-HJoIP-LqJ3YsDQKzZ1d9BDqoRh4jEmovpe3WcQSyQ3EsESu-jeEFU4juURLuldQo-tK3b-MI1f3dg_hVLKsG8oFg7okWLkdl6sJpsjdokfk2uNh33Hs2XA2nTsjZ2aPeugJucP5oD-dzibzydiZz0e2s--h74wphkF_MrHVxmgyGQ5G0-m8h0Br-N185-vPfZ3hH43Pum__Lx37DR8?type=png)

[Diagram source](https://mermaid.live/edit#pako:eNqlVv1v2zYQ_VdUGh0cwDEs-VtFC2RNghrr0K7ZOmCyfmCks01EIlWSykdt_--jSEmWFDn11gBBIvLdu8d3d5S2KGAhIBetOU421p-XS2qpnyDCQlzCyhJpEIAQ1opEkRuRGN40AA8sTsxuQuhdczdgVMKjNIA1i0KgnIVNVCqAf-Ys58HfUqwQBvP6tXXhXZNIAu8vaJJK3zo_f7dj9Dd4umQPdGct4B6oHHQ7wQaCu_cpF4x_ZoJIwuiZ9Uu-b3c7JAvPw85c1y20FRDnBxl_jVJepBvmdJ_0aoXtBxzvN5iuoWAZlSxm_XSeaxakoqAZlzR6-RnLESkRCe5K-5QLKibUrlW8N7uTLOSw73k63Q1EEGTPNxJzab16-9aCqC9qq75fUpXhOr_kqbIhwVyVftBIN9Dp8rqpwqZJiCUsajnPKiJFemu6t6PbIlT1_YBpGAFvErc3SUv6Mv_Ma03vt1Qq76Jup2zOrBJFbzdgtk6yu-CcPXyElerCr8AlCXD0kVB4U3-yNOwLWW_kTp12vQaRiRADb4k6GxLCzWFtifwXUmWqTkj1V1LLY2d5BMgLdfb7SrKjua6UM7xG4XiKg6ys7mHtTIX7lSIesJUOqSwPvcODKQSEx_KLACf16EE78gOL4WVDrmhYN6MkAhoel7_CkSgHfeopyeltTKRfawkTXu1fPZW17v2ZsXth5rzOivEAvoB-zvEnjMlPzIj2q1GGoSGq2DdS5xSLrIGwoqHrv4ncVPq7vWVGpprmhBzkO_WbcvoSNi-Q8VQq9dvtEqkmXwh9DH2VQtjVMNWq-33JdQhpaleuNsaxVYFx71ghnnk0Nh4d0trtUrPT15XW4isCxv_H43HV44MYpyLmGGGbi8-Z84qc4Es5MQZbrueh1nlf0WHxRIOdWbI9_feChl9xRLJe9RtBdqUmjnefo_5IgT81oY6R-0qQOIkKgXmiYXbP6ekx71xNcKOE1C67HFsxtOLGpBinioEKGaib6hYHd1L99et3UKPepsGta88zPGaOFzSER99vx-Z3ot3yTjUc5jTl9knctu0VXzx-25vwOtdpn_6OrV65Jnz3TMeu-HJoIP-LqJ3YsDQKzZ1d9BDqoRh4jEmovpe3WcQSyQ3EsESu-jeEFU4juURLuldQo-tK3b-MI1f3dg_hVLKsG8oFg7okWLkdl6sJpsjdokfk2uNh33Hs2XA2nTsjZ2aPeugJucP5oD-dzibzydiZz0e2s--h74wphkF_MrHVxmgyGQ5G0-m8h0Br-N185-vPfZ3hH43Pum__Lx37DR8)

## Validation

Query validation happens client-side and begins with the `onClick`, `onBlur`, and `onFocus` events. It is possible that validation will also occur from the `onChange` event if we are submitting the query to the server. If the event path determines a discrepancy between the internal state and current query, the query is re-parsed and the results are stored in the filter context. If the user provided an `onValidation` prop, that will be called after the parser methods are run. If appropriate, the query value is then compared against the suggestion providers to update the suggestions list.

### `onValidation`

`onValidation` is called once the parser methods are run. It passes the validation message and the validation query along with the callback for the consumer.

### Parser

![Flowchart of validation and parser events](https://mermaid.ink/img/pako:eNplVE1zmzAQ_SuMfCUOGIwNnXEnjZuZHDrTxp0eChwUELbGQiL6qOPa_u8VEjRgc4Ldt2_36S06gYKVCCRgy2Gzc36uM-ropyBQiDWqHKGKAgnhVJiQhOAafboCHFjd2GyD6f46WzAq0bu0gC0jJaKcldcoJRD_zlnHA98UvEZAcaSFTU-qOMqozT-kT5hIxKfPtFEyd-7uVmdGHwku9menatJJxXiBXlADuUB5V9OhvhDFW9A4-sQKJW7DjztIt-jc6imxxIymqdgxRcqNeq2x_Jx35P_zuk4XSq50kenOvX7oqmlJ-2h6Dw8QS_v5QMtfkOASSnSfJ0liZNuqDj4oDYaJyAxK0eGHQvzY9_TTyZ-Oz8Rbzs6SYbFvWFVrgZcy2o2gVbT43pzbMYTabpFoccJLJ6pp22w-YqNmtlqoV7tnlmZIGYwO4kO9OcgOE_aYXpR130i7Pi9EyxH9kGfez9N9pmkGnoVDNKOQzltLl4HcrtPQwuh0ysBEIDnom4HL5VZoR2y3oIJEaA6OpOJ0tcaigLx0XpBQROZDfOiMZhwTrc6jjTtbv3ztl42MvQIuqBGvIS71v31quTIgd6hGGUj0awn5PgMZvWgcVJJt9LmBpNXqAmvkGkNtVT0OftXLzThIjCIXNJCC5ATeQeLP_els5sfzOIyjReDPXHAESRB708ViuZhH4dKLg7kfXVzwlzHN6k2jyF9GcRhFgRcuFrELkCH_Zq8jcyuZDr8Nvp3i8g86dZHK?type=png)

[Diagram source](https://mermaid.live/edit#pako:eNplVE1zmzAQ_SuMfCUOGIwNnXEnjZuZHDrTxp0eChwUELbGQiL6qOPa_u8VEjRgc4Ldt2_36S06gYKVCCRgy2Gzc36uM-ropyBQiDWqHKGKAgnhVJiQhOAafboCHFjd2GyD6f46WzAq0bu0gC0jJaKcldcoJRD_zlnHA98UvEZAcaSFTU-qOMqozT-kT5hIxKfPtFEyd-7uVmdGHwku9menatJJxXiBXlADuUB5V9OhvhDFW9A4-sQKJW7DjztIt-jc6imxxIymqdgxRcqNeq2x_Jx35P_zuk4XSq50kenOvX7oqmlJ-2h6Dw8QS_v5QMtfkOASSnSfJ0liZNuqDj4oDYaJyAxK0eGHQvzY9_TTyZ-Oz8Rbzs6SYbFvWFVrgZcy2o2gVbT43pzbMYTabpFoccJLJ6pp22w-YqNmtlqoV7tnlmZIGYwO4kO9OcgOE_aYXpR130i7Pi9EyxH9kGfez9N9pmkGnoVDNKOQzltLl4HcrtPQwuh0ysBEIDnom4HL5VZoR2y3oIJEaA6OpOJ0tcaigLx0XpBQROZDfOiMZhwTrc6jjTtbv3ztl42MvQIuqBGvIS71v31quTIgd6hGGUj0awn5PgMZvWgcVJJt9LmBpNXqAmvkGkNtVT0OftXLzThIjCIXNJCC5ATeQeLP_els5sfzOIyjReDPXHAESRB708ViuZhH4dKLg7kfXVzwlzHN6k2jyF9GcRhFgRcuFrELkCH_Zq8jcyuZDr8Nvp3i8g86dZHK)
