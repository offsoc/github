apiVersion: apps/v1
kind: Deployment
metadata:
    name: cache
spec:
    replicas: 1
    template:
        metadata:
            labels:
                service: cache
            annotations:
        spec:
            restartPolicy: Always
            containers:
                - name: cache
                  image: octofactory.service.private-us-east-1.github.net/kustomize-labs-docker-releases-local/github/ghes-db-container/memcached15:694ace6f3d48b4a3d4d2c17550e01dbe3ac2e909
                  command: ["memcached", "-m", "64"]
                  resources:
                    limits:
                        cpu: 0.1
                        # memory is ^ memcached memory plus a 16Mi overhead
                        memory: "80Mi"
                    requests:
                        cpu: 0.001
                        memory: "80Mi"
                  ports:
                    - name: memcached
                      containerPort: 11211
                  readinessProbe:
                    tcpSocket:
                        port: 11211
    selector:
        matchLabels:
            service: cache
