"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_tracking_blocks_tracking-block-element_ts","app_components_tracking_blocks_tracking-block-omnibar-element_ts"],{97797:(e,t,i)=>{function n(){if(!(this instanceof n))return new n;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}i.d(t,{h:()=>q,A:()=>C,on:()=>A});var r,a=window.document.documentElement,o=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;n.prototype.matchesSelector=function(e,t){return o.call(e,t)},n.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)},n.prototype.indexes=[];var l=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"ID",selector:function(e){var t;if(t=e.match(l))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var s=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(s))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var c=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(c))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),n.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},r="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e}();var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function u(e,t){var i,n,r,a,o,l,s=(e=e.slice(0).concat(e.default)).length,c=t,u=[];do if(d.exec(""),(r=d.exec(c))&&(c=r[3],r[2]||!c)){for(i=0;i<s;i++)if(o=(l=e[i]).selector(r[1])){for(n=u.length,a=!1;n--;)if(u[n].index===l&&u[n].key===o){a=!0;break}a||u.push({index:l,key:o});break}}while(r)return u}function h(e,t){return e.id-t.id}n.prototype.logDefaultIndexUsed=function(){},n.prototype.add=function(e,t){var i,n,a,o,l,s,c,d,h=this.activeIndexes,m=this.selectors,p=this.selectorObjects;if("string"==typeof e){for(n=0,p[(i={id:this.uid++,selector:e,data:t}).id]=i,c=u(this.indexes,e);n<c.length;n++)o=(d=c[n]).key,(l=function(e,t){var i,n,r;for(i=0,n=e.length;i<n;i++)if(r=e[i],t.isPrototypeOf(r))return r}(h,a=d.index))||((l=Object.create(a)).map=new r,h.push(l)),a===this.indexes.default&&this.logDefaultIndexUsed(i),(s=l.map.get(o))||(s=[],l.map.set(o,s)),s.push(i);this.size++,m.push(e)}},n.prototype.remove=function(e,t){if("string"==typeof e){var i,n,r,a,o,l,s,c,d=this.activeIndexes,h=this.selectors=[],m=this.selectorObjects,p={},f=1==arguments.length;for(r=0,i=u(this.indexes,e);r<i.length;r++)for(n=i[r],a=d.length;a--;)if(l=d[a],n.index.isPrototypeOf(l)){if(s=l.map.get(n.key))for(o=s.length;o--;)(c=s[o]).selector===e&&(f||c.data===t)&&(s.splice(o,1),p[c.id]=!0);break}for(r in p)delete m[r],this.size--;for(r in m)h.push(m[r].selector)}},n.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,i,n,r,a,o,l,s,c={},d=[],u=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,n=u.length;t<n;t++)for(i=0,a=u[t],r=(o=this.matches(a)).length;i<r;i++)c[(s=o[i]).id]?l=c[s.id]:(l={id:s.id,selector:s.selector,data:s.data,elements:[]},c[s.id]=l,d.push(l)),l.elements.push(a);return d.sort(h)},n.prototype.matches=function(e){if(!e)return[];var t,i,n,r,a,o,l,s,c,d,u,m=this.activeIndexes,p={},f=[];for(t=0,r=m.length;t<r;t++)if(s=(l=m[t]).element(e)){for(i=0,a=s.length;i<a;i++)if(c=l.map.get(s[i]))for(n=0,o=c.length;n<o;n++)!p[u=(d=c[n]).id]&&this.matchesSelector(e,d.selector)&&(p[u]=!0,f.push(d))}return f.sort(h)};var m={},p={},f=new WeakMap,b=new WeakMap,g=new WeakMap,y=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function k(e,t,i){var n=e[t];return e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)},e}function v(){f.set(this,!0)}function w(){f.set(this,!0),b.set(this,!0)}function S(){return g.get(this)||null}function T(e,t){y&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||y.get})}function E(e){if(function(e){try{return e.eventPhase,!0}catch(e){return!1}}(e)){var t=(1===e.eventPhase?p:m)[e.type];if(t){var i=function(e,t,i){var n=[],r=t;do{if(1!==r.nodeType)break;var a=e.matches(r);if(a.length){var o={node:r,observers:a};i?n.unshift(o):n.push(o)}}while(r=r.parentElement)return n}(t,e.target,1===e.eventPhase);if(i.length){k(e,"stopPropagation",v),k(e,"stopImmediatePropagation",w),T(e,S);for(var n=0,r=i.length;n<r&&!f.get(e);n++){var a=i[n];g.set(e,a.node);for(var o=0,l=a.observers.length;o<l&&!b.get(e);o++)a.observers[o].data.call(a.node,e)}g.delete(e),T(e)}}}}function A(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!!r.capture,o=a?p:m,l=o[e];l||(l=new n,o[e]=l,document.addEventListener(e,E,a)),l.add(t,i)}function C(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=!!n.capture,a=r?p:m,o=a[e];o&&(o.remove(t,i),o.size||(delete a[e],document.removeEventListener(e,E,r)))}function q(e,t,i){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i}))}},99297:(e,t,i)=>{i.d(t,{D:()=>n});function n(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let i=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(i),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let i=document.createRange();i.selectNodeContents(e),t.addRange(i),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(i),t.removeChild(i),Promise.resolve()}},18036:(e,t,i)=>{i.d(t,{$3:()=>a,HV:()=>o,Vb:()=>r});var n=i(51528);function r(e,t,i){let r={hydroEventPayload:e,hydroEventHmac:t,visitorPayload:"",visitorHmac:"",hydroClientContext:i},a=document.querySelector("meta[name=visitor-payload]");a instanceof HTMLMetaElement&&(r.visitorPayload=a.content);let o=document.querySelector("meta[name=visitor-hmac]")||"";o instanceof HTMLMetaElement&&(r.visitorHmac=o.content),(0,n.i)(r,!0)}function a(e){r(e.getAttribute("data-hydro-view")||"",e.getAttribute("data-hydro-view-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}function o(e){r(e.getAttribute("data-hydro-click-payload")||"",e.getAttribute("data-hydro-click-hmac")||"",e.getAttribute("data-hydro-client-context")||"")}},88738:(e,t,i)=>{let n;i.d(t,{A:()=>C});var r=i(85971),a=i(97797),o=i(78350),l=i(59017);function s(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function d(e,t){var i=c(e,t,"get");return i.get?i.get.call(e):i.value}function u(e,t,i){s(e,t),t.set(e,i)}function h(e,t,i){var n=c(e,t,"set");return!function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}(e,n,i),i}function m(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function p(e,t){s(e,t),t.add(e)}let f=Promise.resolve();var b=new WeakMap,g=new WeakMap,y=new WeakMap,k=new WeakMap,v=new WeakSet,w=new WeakSet,S=new WeakSet,T=new WeakSet,E=new WeakSet,A=new WeakSet;let C=class TrackingBlockAPIComponent{get canSync(){return d(this,b)&&(!d(this,y)||!!d(this,k))}init(){return d(this,b)||(h(this,k,d(this,y)?.querySelector("[data-form-tracking-block-update]")??null),h(this,b,!0)),this}async appendDraftItem(e){return await m(this,v,q).call(this,e)}async updateDraftItemTitleMD(e){return await m(this,v,q).call(this,e)}async updateDraftItemStateMD(e){return await m(this,v,q).call(this,e)}async removeItemMD(e){return await m(this,v,q).call(this,e)}async removeTasklistBlock(e){return await m(this,v,q).call(this,e)}async addTasklistBlock(e){return await m(this,v,q).call(this,e)}async convertToIssueMD(e){return await m(this,v,q).call(this,e)}async updateTasklistTitle(e){return await m(this,v,q).call(this,e)}async updateItemPositionMD(e){return await m(this,v,q).call(this,e)}dispatchEvent(e){return d(this,g).dispatchEvent(e)}async refreshTasklistBlocks(e){d(this,g).classList.add("is-dirty"),this.dispatchEvent(new CustomEvent("tracking-block:dirty-change",{bubbles:!0})),await this.queueMDAtRestRequest(e)}async queueMDAtRestRequest(e,t){document.body.removeAttribute("data-turbo"),window.clearTimeout(n),n=void 0;let i=()=>m(this,S,M).call(this,e,t);return f=f.then(i,i)}disableCommentElements(e){m(this,T,I).call(this,e),m(this,E,_).call(this,e),m(this,A,j).call(this,e)}constructor(e,t){p(this,v),p(this,w),p(this,S),p(this,T),p(this,E),p(this,A),u(this,b,{writable:!0,value:void 0}),u(this,g,{writable:!0,value:void 0}),u(this,y,{writable:!0,value:void 0}),u(this,k,{writable:!0,value:void 0}),h(this,b,!1),h(this,k,null),h(this,g,e),h(this,y,t)}};async function q(e){this.disableCommentElements(!0);try{return await m(this,w,L).call(this,e)}finally{this.disableCommentElements(!1)}}async function L(e){let{formId:t,...i}=e,o=!1,s=!t;if(d(this,g).classList.add("is-dirty"),this.dispatchEvent(new CustomEvent("tracking-block:dirty-change",{bubbles:!0})),s)o=await new Promise((t,i)=>{let n=new CustomEvent("tracking-block:operation",{bubbles:!0,detail:{payload:e,resolve:t,reject:i}});this.dispatchEvent(n)});else{let n=document.querySelector(`form#${t}`),a=n?.querySelector(".js-comment-field"),l=a?.value;if(l){let t=await (0,r.nj)(l,e);null!=t&&(a.value=t,o=!0)}if(n){let e=n.querySelector('input[name="tasklist_blocks_operation_tracker"]'),t={name:i.operation};if("append_item"===i.operation&&(t.value=i.value),e){let i=e.getAttribute("value");try{let n=JSON.parse(i);n.push(t),e.setAttribute("value",JSON.stringify(n))}catch(e){}}else{let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","tasklist_blocks_operation_tracker"),e.setAttribute("value",JSON.stringify([t])),n.appendChild(e)}}}if(d(this,y)?.handleStateChange("unsaved-changes"),!o)return await this.queueMDAtRestRequest(t,JSON.stringify(i));let c=async()=>{let{activeElement:e}=document,t=d(this,g),i=e?.closest(".js-tracking-block-omnibar-container")!=null;if(t?.querySelector(".js-tasklist-dragging")||t?.querySelector(".js-edit-metadata-popover-container:not([hidden])")||!(0,l.l_)(t)&&(i?e.value:t?.contains(e))){n=window.setTimeout(c,200);return}await u()},u=async()=>{(0,a.A)("click","a[href], .js-comment-edit-button",u),window.clearTimeout(n),n=window.setTimeout(async()=>{try{await this.queueMDAtRestRequest(t)}catch(e){console.error(e)}finally{window.removeEventListener("beforeunload",h)}},0)},h=e=>{n&&(u(),e.preventDefault(),e.returnValue="Please wait a second while we save your changes.")};window.addEventListener("beforeunload",h,{once:!0}),(0,a.on)("click","a[href], .js-comment-edit-button",u),window.clearTimeout(n),n=window.setTimeout(c,2e3),document.body.setAttribute("data-turbo","false")}async function M(e,t){if(!this.canSync)return null;d(this,y)?.handleStateChange("saving"),d(this,g).classList.remove("is-dirty");try{if(e){let i=document.querySelector(`form#${e}`);if(!i)return null;let n=i.querySelectorAll('input[name="tasklist_blocks_operation"]'),r=i.querySelectorAll('input[name="tasklist_blocks_operation_tracker"]');for(let e of n)e.remove();if(t){let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","tasklist_blocks_operation"),e.setAttribute("value",t),i.appendChild(e)}i.setAttribute("data-submitting-tracking-block-update",t?"sync":"async"),await new Promise((e,t)=>{let n=n=>{i.removeAttribute("data-submitting-tracking-block-update");let{detail:r}=n;r.error?t(r.error):e()};i.addEventListener("submit:complete",n,{once:!0});try{for(let e of((0,o.k_)(i),r))e.remove()}catch(e){i.removeEventListener("submit:complete",n),t(e)}})}else await new Promise((e,i)=>{let n=new CustomEvent("tracking-block:update",{bubbles:!0,cancelable:!0,detail:{payload:t,resolve:e,reject:i}});this.dispatchEvent(n)&&e()})}catch(e){throw d(this,y)?.handleStateChange("failed-save"),e}this.dispatchEvent(new CustomEvent("tracking-block:dirty-change",{bubbles:!0})),d(this,y)?.handleStateChange("successful-save")}function I(e){for(let t of d(this,g).querySelectorAll("button, details.dropdown, .js-item-avatar-stack, .js-label-assignee-container"))t.toggleAttribute("disabled",e)}function _(e){for(let t of d(this,g).querySelectorAll('tracking-block-omnibar, [data-targets="tracking-block.inputs"]'))t.disabled=e}function j(e){for(let t of d(this,g).querySelectorAll("tracking-block"))t.sortable?.option("disabled",e)}},48282:(e,t,i)=>{i.r(t),i.d(t,{TrackingBlockElement:()=>TrackingBlockElement});var n=i(39595),r=i(71344),a=i.n(r),o=i(85971);i(11113);var l=i(88738),s=i(99297),c=i(10734),d=i.n(c),u=i(18036);function h(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t,i){var n=function(e,t,i){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.get(e)}(e,t,0);return!function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}(e,n,i),i}function p(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function f(e,t){h(e,t),t.add(e)}function b(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}let g=Object.freeze({issueType:"data-issue",draftIssueType:"data-draft-issue",itemUuid:"data-item-uuid",itemId:"data-item-id",itemTitle:"data-item-title",itemState:"data-item-state",itemPosition:"data-item-position",displayNumber:"data-display-number",repositoryId:"data-repository-id",repositoryName:"data-repository-name"}),y=Object.freeze({convertButton:"[data-tracking-block-convert-button]",removeButton:"[data-tracking-block-remove-button]",draftTitle:"[data-tracking-block-draft-title]",issue:"[data-issue]",draftIssue:"[data-draft-issue]"}),k={};var v=new WeakMap,w=new WeakSet,S=new WeakSet,T=new WeakSet,E=new WeakSet,A=new WeakSet,C=new WeakSet,q=new WeakSet,L=new WeakSet,M=new WeakSet,I=new WeakSet,_=new WeakSet,j=new WeakSet,x=new WeakSet,D=new WeakSet,B=new WeakSet,W=new WeakSet,P=new WeakSet,O=new WeakSet,F=new WeakSet,H=new WeakSet,N=new WeakSet,R=new WeakSet,K=new WeakSet,$=new WeakSet,X=new WeakSet,V=new WeakSet,U=new WeakSet,z=new WeakSet,J=new WeakSet,G=new WeakSet,Q=new WeakSet,Y=new WeakSet,Z=new WeakSet,ee=new WeakSet,et=new WeakSet,ei=new WeakSet,en=new WeakSet,er=new WeakSet,ea=new WeakSet,eo=new WeakSet,el=new WeakSet,es=new WeakSet,ec=new WeakSet;let TrackingBlockElement=class TrackingBlockElement extends HTMLElement{getAsJSON(){let e=[];for(let t of this.listItems){let i=t.getAttribute(g.itemState),n="closed"===i||"draftClosed"===i||"merged"===i,r={uuid:t.getAttribute(g.itemUuid)||"",isClosed:n,isDraft:t.hasAttribute(g.draftIssueType),displayNumber:t.getAttribute(g.displayNumber)||"",title:t.getAttribute(g.itemTitle)||"",repositoryId:t.getAttribute(g.repositoryId)||"",repositoryName:t.getAttribute(g.repositoryName)||""};e.push(r)}return e}connectedCallback(){this.readonly||p(this,ec,eQ).call(this),p(this,ei,e$).call(this),p(this,W,eA).call(this),p(this,D,eT).call(this),p(this,z,eP).call(this),p(this,T,eh).call(this),p(this,q,eb).call(this),p(this,O,eq).call(this),p(this,C,ef).call(this),p(this,E,em).call(this),p(this,S,eu).call(this),p(this,ee,eR).call(this,{dirty:!1}),p(this,w,ed).call(this)}getOptimisticMetadata(){return k}resetOptimisticMetadata(){k={}}disconnectedCallback(){p(this,P,eC).call(this),p(this,B,eE).call(this)}async transformMarkdownToHTML(e){return await (0,o.Oh)(e)}handleEditLabels(e){p(this,A,ep).call(this,e,"labels")}handleEditAssignees(e){p(this,A,ep).call(this,e,"assignees")}handleEditProject(e){p(this,A,ep).call(this,e,"project")}handleMarkAsDone(e){if(e instanceof KeyboardEvent&&"Enter"!==e.code)return;let t=p(this,ea,eU).call(this,e.target,"draftIssue"),i=t?.querySelector('[data-targets="tracking-block.inputs"]');t&&i&&(p(this,Z,eN).call(this,t),i.checked=!i.checked,i.dispatchEvent(new Event("change")))}handleStateChange(e){this.state=e,this.isSavingIcon.toggleAttribute("hidden","saving"!==e);let t=document.querySelector(".js-add-tasklist-button");t?.toggleAttribute("disabled","saving"===e)}handleClosePopover(e,t){let i=e.target;if(!i)return;let n=p(this,ea,eU).call(this,i,"issue"),r=n?.getAttribute(g.itemUuid)||n?.getAttribute(g.itemId),a=i?.closest(".js-edit-metadata-popover-container");if(!a||!r||!n||(t||(t=a.getAttribute("data-menu-type")||""),!t))return;a.hidden=!0;let o=a.querySelector("details");if(o&&(o.open=!1,o.querySelector(".select-menu-list"))){if(`${r}` in k||(k[r]={}),"assignees"===t){let e=Array.from(a.querySelectorAll("input:checked")).map(e=>e.closest("label")).filter(e=>null!==e).sort((e,t)=>{let i=e.querySelector(".js-username")?.innerHTML,n=t.querySelector(".js-username")?.innerHTML;return i&&n?i<n?-1:i>n?1:0:0}),i=[];for(let t of e){let e=t.querySelector(".js-username")?.innerHTML||"",n=t.querySelector(".js-avatar")?.getAttribute("src")||"";i.push({alt:e,src:n})}k[r][t]=i,p(this,M,ey).call(this,n,i)}else if("labels"===t){let e=Array.from(a.querySelectorAll("input:checked")).sort((e,t)=>{let i=e.getAttribute("data-label-name"),n=t.getAttribute("data-label-name");return i&&n?i<n?-1:i>n?1:0:0}).map(e=>e.closest("label")).filter(e=>null!==e),i=[];for(let t of e){let e=t.querySelector(".js-label-name-html")?.innerHTML||"",n=t.querySelector(".js-label-color"),r=n?.getAttribute("label-color")||"";i.push({name:e,color:r})}k[r][t]=i,p(this,I,ek).call(this,n,i)}else"project"===t&&p(this,L,eg).call(this,a)}}toggleLabelCountPopover(e){let t=p(this,eo,ez).call(this,e.target,"issue",".js-label-count-popover-container");t&&(e.preventDefault(),e.stopPropagation(),t.hidden=!t.hidden)}hideLabelCountPopover(e){let t=p(this,eo,ez).call(this,e.target,"issue",".js-label-count-popover-container");t&&(e.preventDefault(),e.stopPropagation(),t.hidden=!0)}handleRename(e,t){if(e instanceof KeyboardEvent&&!t&&"Enter"!==e.code)return;let i=p(this,ea,eU).call(this,e.target,"draftIssue"),n=i?.querySelector("[data-tracking-block-draft-title]");i&&n&&(p(this,Z,eN).call(this,i),p(this,j,ew).call(this,n))}handleDraftTitleClick(e){if(e.target instanceof HTMLAnchorElement)return;let t=p(this,ea,eU).call(this,e.target,"draftTitle");t&&p(this,j,ew).call(this,t)}draftTitleInputOutFocus(){p(this,x,eS).call(this)}activateOmnibar(){p(this,U,eW).call(this)}disableTasklistListener(e){let t=e.detail;this.apiComponent?.disableCommentElements(t)}attributeChangedCallback(e){if("data-readonly"===e||"data-disabled"===e){p(this,ei,e$).call(this);return}}handleEvent(e){switch(e.type){case"tracking-block-omnibar-append":p(this,R,e_).call(this,e);break;case"tasklist-block-title-update":p(this,K,ej).call(this,e);break;case"click":this.handleConvertItem(e),this.handleRemoveItem(e);break;case"change":"checkbox"===e.currentTarget.type?this.updateTaskItemStateMD(e):this.updateTaskItemTitleMD(e);break;case"focus":this.handleOmnibarFocus();break;case"blur":this.handleOmnibarBlur();break;case"keydown":e.currentTarget===this.omnibar?.input?p(this,$,ex).call(this,e):Array.from(this.inputs).includes(e.currentTarget)&&p(this,V,eB).call(this,e)}}handleOmnibarFocus(){let e=this.omnibar?.input;e&&!e.value&&(e.value="#",queueMicrotask(()=>{e.defaultValue=e.value=""}))}handleOmnibarBlur(){if("unsaved-changes"===this.state||"saving"===this.state){TrackingBlockElement.refocusOmnibarIndex=null;return}this.omnibar?.disabled||this.omnibar?.input?.value||this.omnibar?.autocomplete?.open||(this.omnibar?.toggleAttribute("hidden",!0),this.omnibarToggleButton?.toggleAttribute("hidden",!1))}handleOmnibarToggleButtonClick(){this.omnibarToggleButton?.toggleAttribute("hidden",!0),this.omnibar?.toggleAttribute("hidden",!1),this.omnibar?.focus()}handleConvertItem(e){let t=p(this,ea,eU).call(this,e.target,"convertButton");if(!t||t.disabled)return;let i=t.closest("li.TrackingBlock-item");i&&this.convertTaskItemMD(i)}copyBlockMarkdown(){let e=this.getAsJSON().map((e,t)=>{let i=`- [${e.isClosed?"x":" "}]`;return e.isDraft?`${i} ${e.title}`:`${i} [${e.title} | ${e.repositoryName}#${e.displayNumber}](${this.listItems[t].querySelector("a")?.href})`}).join("\n");(0,s.D)(e);let t=this.querySelector(".copy-markdown-button");t&&(0,u.HV)(t),this.dropdownMenu?.toggleAttribute("open")}showTitleEditMode(){this.dropdownMenu?.toggleAttribute("open",!1),this.titleEditMode?.toggleAttribute("hidden",!1),this.titleViewMode?.toggleAttribute("hidden",!0);let e=this.titleEditMode?.querySelector(".js-tasklist-title-input");e?.focus(),e?.select()}hideTitleEditMode(){this.titleEditMode?.toggleAttribute("hidden",!0),this.titleViewMode?.toggleAttribute("hidden",!1)}handleRemoveItem(e){let t;if(e instanceof MouseEvent&&(t=p(this,ea,eU).call(this,e.target,"removeButton")),e instanceof KeyboardEvent&&(t=p(this,ea,eU).call(this,e.target,"issue")||p(this,ea,eU).call(this,e.target,"draftIssue")),!t)return;let i=t.closest("li.TrackingBlock-item");if(!i)return;let{form:n,comment:r}=this.findFormAndCommentElements(),a=t.closest("tracking-block"),o=Array.from(r.querySelectorAll("tracking-block")).findIndex(e=>e===a),l=Array.from(i.parentElement?.children).findIndex(e=>e===i);if(-1===l)return;let s={operation:"remove_item",position:[o,l],formId:n?.id||""};this.removeTaskItemMD(i,s)}findFormAndCommentElements(){let e=this.closest(".js-comment"),t=null;return e?t=e.querySelector(".js-comment-update"):e=this.closest(".markdown-body"),{form:t,comment:e}}async updateTasklistTitle(e){if(!p(this,es,eG).call(this))return;let t=this.omnibarToggleButton?.querySelector(".js-tracking-block-omnibar-title"),i=t?.innerHTML;t&&t.innerHTML&&(t.innerHTML=await this.transformMarkdownToHTML(e.name));try{await this.apiComponent.updateTasklistTitle(e)}catch(e){console.error("updateTasklistTitle: Error occurred",e),t&&t.innerHTML&&(t.innerHTML=i||"Tasks")}}async appendTaskItem(e){let t;if(!p(this,es,eG).call(this))return;TrackingBlockElement.refocusOmnibarIndex=e.position;let i=/^https?:\/\//.test(e.value)?this.omnibar?.querySelector(`[data-autocomplete-value='${e.value}'] .ActionListItem-label`):null;if(i){t=this.emptyIssueTemplate.cloneNode(!0),i.querySelector(".truncated-autocomplete-suggestion-title")?.classList.remove("truncated-autocomplete-suggestion-title");let n=t.querySelector(".js-issue-template-content");n&&(n.appendChild(i.cloneNode(!0)),n.setAttribute("data-hovercard-type","issue"),n.setAttribute("data-hovercard-url",`${e.value}/hovercard`))}else(t=this.emptyItemTemplate.cloneNode(!0)).querySelector(".empty-template-title span").innerHTML=await this.transformMarkdownToHTML(e.value),t.querySelector("textarea").defaultValue=e.value;for(let e of(t.hidden=!1,t.classList.remove("js-template"),t.removeAttribute("data-target"),t.setAttribute("data-targets","tracking-block.listItems"),t.querySelectorAll("input, textarea")))e.setAttribute("data-targets","tracking-block.inputs");this.emptyItemTemplate.before(t),p(this,ee,eR).call(this,{dirty:!0,completed:this.completionCompleted,total:this.completionTotal+1});try{await this.apiComponent.appendDraftItem(e),p(this,T,eh).call(this)}catch(e){console.error(e),p(this,ee,eR).call(this,{dirty:!1,completed:this.completionCompleted,total:this.completionTotal-1})}setTimeout(()=>p(this,U,eW).call(this),0)}async updateTaskItemTitleMD(e){if(!p(this,es,eG).call(this))return;let t=e.currentTarget;if(!t||!t.value||e.target!==t)return;let i=e.target;if(!i)return;let{form:n,comment:r}=this.findFormAndCommentElements(),a=i.closest("li"),o=i.closest("tracking-block"),l={operation:"update_item_title",position:[Array.from(r.querySelectorAll("tracking-block")).findIndex(e=>e===o),Array.from(a?.parentElement?.children).findIndex(e=>e===a)],value:t.value,formId:n?.id||""},s=Array.from(this.renderedTitles).find(e=>a?.contains(e)),c=s?.innerHTML;if(s){let e=await this.transformMarkdownToHTML(t.value);s.innerHTML=`<span class="wb-break-word">${e}</span>`}try{await this.apiComponent?.updateDraftItemTitleMD(l)}catch(e){console.error(e),s&&(s.innerHTML=c||"")}}async updateTaskItemStateMD(e){if(!p(this,es,eG).call(this))return;let t=e.currentTarget;if(e.target!==t)return;let i=e.target;if(!i)return;let{form:n,comment:r}=this.findFormAndCommentElements(),a=i.closest("li"),o=i.closest("tracking-block"),l=Array.from(r.querySelectorAll("tracking-block")).findIndex(e=>e===o),s=Array.from(a?.parentElement?.children).findIndex(e=>e===a);if(!t||"checkbox"!==t.type)return;a&&a.setAttribute(g.itemState,t.checked?"draftClosed":"draft"),p(this,ee,eR).call(this,{dirty:!0,completed:this.completionCompleted+(t.checked?1:-1)});let c={operation:"update_item_state",position:[l,s],closed:t.checked,formId:n?.id||""};try{await this.apiComponent?.updateDraftItemStateMD(c)}catch(e){console.error(e),p(this,ee,eR).call(this,{dirty:!1,completed:this.completionCompleted+(t.checked?-1:1)})}}async removeTasklistBlock(e){if(!p(this,es,eG).call(this))return;let t=e.target;if(!t)return;let{form:i,comment:n}=this.findFormAndCommentElements(),r=t.closest("tracking-block"),a=Array.from(n.querySelectorAll("tracking-block")).findIndex(e=>e===r),o={operation:"remove_tasklist_block",formId:i?.id||"",position:a};this.hidden=!0;try{await this.apiComponent.removeTasklistBlock(o)}catch(e){console.error(e),this.hidden=!1}let l=t.closest("details-menu");l&&(l.style.display="none")}async updateItemPosition(e){if(!p(this,es,eG).call(this))return;let{oldIndex:t,newIndex:i}=e,{form:n,comment:r}=this.findFormAndCommentElements(),a=Array.from(r.querySelectorAll("tracking-block")),o=e.from.closest("tracking-block"),l=e.to.closest("tracking-block"),s=a.findIndex(e=>e===o),c=a.findIndex(e=>e===l);if(-1===s||-1===c||null==t||null==i)return;let d={operation:"update_item_position",src:[s,t],dst:[c,i],formId:n?.id||""};try{await this.apiComponent.updateItemPositionMD(d)}catch(e){console.error(e)}}async convertTaskItemMD(e){if(!p(this,es,eG).call(this)||!p(this,G,eO).call(this,e))return;let{form:t,comment:i}=this.findFormAndCommentElements(),n=e.closest("tracking-block"),r=Array.from(i.querySelectorAll("tracking-block")).findIndex(e=>e===n),a=Array.from(e.parentElement?.children).findIndex(t=>t===e);if(-1===a)return;let o={operation:"convert_to_issue",position:[r,a],formId:t?.id||""};try{await this.apiComponent.convertToIssueMD(o)}catch(e){console.error(e)}}async removeTaskItemMD(e,t){if(!p(this,es,eG).call(this))return;let i=e.getAttribute(g.itemState),n="closed"===i||"draftClosed"===i||"merged"===i;e.hidden=!0,p(this,ee,eR).call(this,{dirty:!0,completed:this.completionCompleted+(n?-1:0),total:this.completionTotal-1}),e.hidden=!0;try{await this.apiComponent.removeItemMD(t)}catch(t){console.error(t),e.hidden=!1,p(this,ee,eR).call(this,{dirty:!1,completed:this.completionCompleted+(n?1:0),total:this.completionTotal+1})}e.parentElement?.removeChild(e)}lockForConversion(e){let t=this.querySelectorAll(`input:not([name="_method"]), textarea, ${y.convertButton}`);for(let[,i]of(this.disabled=e,t.entries()))e?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled");this.apiComponent?.disableCommentElements(e),m(this,v,e)}constructor(...e){super(...e),f(this,w),f(this,S),f(this,T),f(this,E),f(this,A),f(this,C),f(this,q),f(this,L),f(this,M),f(this,I),f(this,_),f(this,j),f(this,x),f(this,D),f(this,B),f(this,W),f(this,P),f(this,O),f(this,F),f(this,H),f(this,N),f(this,R),f(this,K),f(this,$),f(this,X),f(this,V),f(this,U),f(this,z),f(this,J),f(this,G),f(this,Q),f(this,Y),f(this,Z),f(this,ee),f(this,et),f(this,ei),f(this,en),f(this,er),f(this,ea),f(this,eo),f(this,el),f(this,es),f(this,ec),function(e,t,i){h(e,t),t.set(e,i)}(this,v,{writable:!0,value:void 0}),this.id="",this.readonly=!1,this.disabled=!1,this.queryType="",this.responseSourceType="",this.completionCompleted=0,this.completionTotal=0,this.state="",this.precache=!1,this.apiComponent=null,this.sortable=null,m(this,v,!1)}};function ed(){!this.readonly&&this.classList.contains("is-dirty")&&this.apiComponent?.queueMDAtRestRequest("")}function eu(){let{form:e}=this.findFormAndCommentElements();e&&e.addEventListener("submit:complete",e=>{let t=e.detail.error;t&&JSON.parse(t.response?.text)?.stale&&(this.staleBanner.hidden=!1)},{once:!0})}function eh(){let e=Array.from(this.querySelectorAll("ol .TrackingBlock-item")).filter(e=>!e.classList.contains("js-template"));for(let t of e){let i=i=>{let n;if(null===i.target)return;let r=i.target?.classList.contains("ActionListContent"),a=Array.from(e).indexOf(i.target);switch(i.code){case"ArrowUp":i.target===t&&(i.preventDefault(),n=a>0?a-1:e.length-1,e[n].focus());break;case"ArrowDown":i.target===t&&(i.preventDefault(),n=(a+1)%e.length,e[n].focus());break;case"Escape":(r||i.target!==t)&&i.stopPropagation(),i.target===t||r||t.focus();break;case"Enter":if(!i.altKey)break;if(i.target===t&&p(this,G,eO).call(this,t)){i.preventDefault();let e=t.querySelector('[data-targets="tracking-block.inputs"]');e.checked=!e.checked,e.dispatchEvent(new Event("change"))}else i.target===t&&p(this,Q,eF).call(this,t)&&(i.preventDefault(),window.open(t.getElementsByTagName("a")[0]?.href,"_blank"));break;case"KeyC":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&p(this,G,eO).call(this,t)&&(i.preventDefault(),this.convertTaskItemMD(t));break;case"KeyA":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&p(this,Q,eF).call(this,t)&&(i.preventDefault(),this.handleEditAssignees(i));break;case"KeyL":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&p(this,Q,eF).call(this,t)&&(i.preventDefault(),this.handleEditLabels(i));break;case"KeyP":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&p(this,Q,eF).call(this,t)&&(i.preventDefault(),this.handleEditProject(i));break;case"KeyR":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&p(this,G,eO).call(this,t)&&(i.preventDefault(),this.handleRename(i,!0));break;case"Home":i.target===t&&(i.preventDefault(),e[0].focus());break;case"End":i.target===t&&(i.preventDefault(),e[e.length-1].focus());break;case"Tab":if(i.target===t)i.shiftKey?0!==a&&(i.preventDefault(),t.querySelector('[data-targets="tracking-block.dropdownMenu"]')?.focus(),n=a>0?a-1:e.length-1,e[n].querySelector('[data-targets="tracking-block.dropdownMenu"]')?.focus()):(i.preventDefault(),t.querySelector('[data-targets="tracking-block.dropdownMenu"]')?.focus());else if(i.shiftKey)i.preventDefault(),t.focus();else{let n=Array.from(e).indexOf(t);n!==e.length-1&&(i.preventDefault(),e[n+1].focus())}break;case"Backspace":i.altKey&&(i.target===t||p(this,Y,eH).call(this,i.target))&&(i.preventDefault(),this.handleRemoveItem(i))}};t.removeEventListener("keydown",i),t.addEventListener("keydown",i)}let t=e=>{if(null===e.target)return;let t=e.target?.classList.contains("ActionListContent");"Escape"===e.code&&t&&e.stopPropagation()},i=this.querySelector(".tracking-block-list-item-dropdown-menu");i?.removeEventListener("keydown",t),i?.addEventListener("keydown",t)}function em(){this.addEventListener("change",e=>{let t=e.target?e.target:null;t?.matches('[type="checkbox"]')&&(t.checked?t.setAttribute("checked","checked"):t.removeAttribute("checked"))})}function ep(e,t){let i=p(this,ea,eU).call(this,e.target,"issue"),n=i?.getAttribute(g.itemId);if(!i||!n)return;e.preventDefault(),e.stopPropagation(),p(this,Z,eN).call(this,i);let r=i.querySelector(`.js-edit-metadata-popover-container[data-menu-type=${t}]`),a=r?.querySelector("turbo-frame");if(!r||!a)return;r.hidden=!1,a.hidden=!1;let o=()=>{let e=r.querySelector("details");if(!e)return;e.open=!1,e.open=!0,e.addEventListener("toggle",i=>{e.open||this.handleClosePopover(i,t)},{once:!0}),e.addEventListener("keydown",i=>{let{key:n}=i;"Escape"!==n||e.open||this.handleClosePopover(i,t)});let i=e.querySelector(".js-filterable-field");i?.focus()};a.hasAttribute("complete")?o():(document.addEventListener("turbo:before-frame-render",e=>{e.target===document.documentElement&&e.detail.newFrame?.id===a.id&&e.stopPropagation()},{capture:!0,once:!0}),a.addEventListener("turbo:frame-load",o,{once:!0}))}function ef(){for(let e of this.listItems){let t=e.querySelector(".js-item-avatar-stack"),i=e.querySelectorAll(".avatar:not(.avatar-template)");if(t)switch(i.length){case 1:t.classList.remove("AvatarStack--two","AvatarStack--three-plus");break;case 2:t.classList.add("AvatarStack--two");break;case 3:t.classList.add("AvatarStack--three-plus")}}}function eb(){for(let e in k){let t=this.querySelector(`[data-item-uuid="${e}"]`);if(!e||!t||!k[e])return;let{assignees:i,labels:n}=k[e];i&&p(this,M,ey).call(this,t,i),n&&p(this,I,ek).call(this,t,n)}}function eg(e){let t=e.querySelector("form");t&&t.addEventListener("submit:complete",e=>{let{detail:t}=e,i=this.querySelector(t?.error?".js-edit-metadata-error-toast":".js-edit-metadata-success-toast");i&&(i.addEventListener("animationend",()=>{i.hidden=!0},{once:!0}),i.hidden=!1)},{once:!0})}function ey(e,t){let i=e?.querySelector(".empty-avatar-icon"),n=e?.querySelector(".js-item-avatar-stack"),r=e?.querySelector(".avatar-template");if(i&&n&&t&&r){for(let e of(i.toggleAttribute("hidden",t.length>0),n.querySelectorAll(".avatar")))e!==r&&e.remove();switch(n.classList.remove("AvatarStack--two","AvatarStack--three-plus"),t.length){case 0:n.hidden=!0;break;case 1:n.hidden=!1;break;case 2:n.hidden=!1,n.classList.add("AvatarStack--two");break;default:n.hidden=!1,n.classList.add("AvatarStack--three-plus")}for(let e of t){let t=r.cloneNode(!0),i=t.querySelector("img"),{alt:n,src:a}=e;t.classList.remove("avatar-template"),i&&(i.setAttribute("data-hovercard-url",`/users/${n}/hovercard`),i.alt=n,i.src=a),r.before(t)}}}function ek(e,t){let i=e?.querySelector(".js-label-assignee-container"),n=i?.querySelector(".label-template"),r=i?.querySelector(".label-popover-template");if(e&&i&&t&&n&&r){for(let e of i.querySelectorAll(".js-item-label:not(.label-template)"))e.remove();for(let e of i.querySelectorAll(".js-item-label-in-popover:not(.label-popover-template)"))e.remove();for(let e of t){let t=n.cloneNode(!0),i=t.querySelector("span"),{name:a,color:o}=e;o&&p(this,_,ev).call(this,t,o),a&&(t.setAttribute("data-name",a),i&&(i.innerHTML=a)),t.classList.remove("label-template"),n.before(t);let l=r.cloneNode(!0),s=l.querySelector("span");o&&p(this,_,ev).call(this,l,o),a&&(l.setAttribute("data-name",a),s&&(s.innerHTML=a)),l.classList.remove("label-popover-template"),r.before(l)}p(this,H,eM).call(this,e)}}function ev(e,t){let i=d().hex.rgb(t);e.style.setProperty("--label-r",i[0].toString()),e.style.setProperty("--label-g",i[1].toString()),e.style.setProperty("--label-b",i[2].toString());let n=d().rgb.hsl(i);e.style.setProperty("--label-h",n[0].toString()),e.style.setProperty("--label-s",n[1].toString()),e.style.setProperty("--label-l",n[2].toString())}function ew(e){let t=e?.querySelector(".js-title-text-field-wrapper"),i=e.querySelector("textarea"),n=e.querySelector(".js-draft-title");if(!t||!i||!n)return;t.hidden=!1,n.hidden=!0;let r=i.value.length;i.setSelectionRange(r,r),setTimeout(()=>{i.focus(),i.dispatchEvent(new Event("input"))},10)}function eS(){let{list:e}=this;if(e)for(let e of this.listItems){let t=e.querySelector(".js-title-text-field-wrapper"),i=e.querySelector(".js-draft-title");t&&(t.hidden=!0),i&&(i.hidden=!1)}}function eT(){let{list:e}=this;!this.sortable&&e&&(this.sortable=a().create(e,{group:"tracking-block",animation:150,chosenClass:"tasklist-issue-chosen-item",item:".js-tasklist-draggable-issue",handle:".js-tasklist-drag-handle",onStart:()=>e.classList.add("js-tasklist-dragging"),onEnd:t=>{p(this,X,eD).call(this,t),e.classList.remove("js-tasklist-dragging")},ghostClass:"tasklist-issue-ghost-item"}))}function eE(){this.sortable&&(this.sortable._onDrop=()=>{},this.sortable.destroy(),this.sortable=null)}function eA(){let e=this.omnibar?.querySelector("input");e?.addEventListener("focus",this,!0),e?.addEventListener("blur",this),e?.addEventListener("keydown",this),e?.setAttribute("data-default-value","")}function eC(){let e=this.omnibar?.querySelector("input");e?.removeEventListener("focus",this,!0),e?.removeEventListener("blur",this),e?.removeEventListener("keydown",this)}function eq(){for(let e of this.listItems)p(this,H,eM).call(this,e)}function eL(e,t){let i=e.querySelector(".js-label-assignee-container"),n=e.querySelector(".js-label-loading-container");i&&i.classList.toggle("hide-labels",t),n&&(n.hidden=!t)}function eM(e){let t=e.querySelector(".js-hidden-label-counter"),i=Array.from(e.querySelectorAll(".js-item-label-in-popover:not(.label-popover-template)"));if(!t)return;p(this,F,eL).call(this,e,!0),t.hidden=!1;let n=p(this,N,eI).call(this,e),r=[];for(let e of n){e.hidden=!0;let t=e.textContent?.trim();if(t){let e=i.findIndex(e=>e.textContent?.trim()===t),n=i[e];e>-1&&n&&(n.hidden=!1,r.push(t))}}let a=r.length;a>0?(t.textContent=`+${a}`,t.setAttribute("aria-label",r.join(", ")),t.hidden=!1):t.hidden=!0,p(this,F,eL).call(this,e,!1)}function eI(e){let t=Array.from(e.querySelectorAll(".js-item-label:not(.label-template)")),i=e.querySelector(".js-item-avatar-stack"),n=e.querySelector(".js-item-title"),r=e.querySelector(".js-hidden-label-counter"),a=e.querySelector(".js-item-dropdown"),o=e.clientWidth,[l,s,c,d]=[n,r,i,a].map(e=>e&&e.offsetWidth+parseInt(window.getComputedStyle(e).marginLeft,10)+parseInt(window.getComputedStyle(e).marginRight,10)||0),u=o-c-l-s-d,h=0,m=[];for(let e=0;e<t.length;e++){let i=t[e];h+=i?.offsetWidth||0,0!==e&&i&&(e>=3||h>u)&&m.push(i)}return m}function e_(e){this.appendTaskItem(e.detail)}function ej(e){this.updateTasklistTitle(e.detail)}function ex(e){"Escape"===e.key&&this.omnibar&&(e.stopPropagation(),this.omnibar.toggleAttribute("hidden",!0),this.omnibarToggleButton?.toggleAttribute("hidden",!1),this.omnibarToggleButton?.focus())}function eD(e){(e.from!==e.to||e.newIndex!==e.oldIndex)&&this.updateItemPosition(e)}function eB(e){let t=e.currentTarget;e.target===t&&"Enter"===e.key&&(e.preventDefault(),t?.blur())}function eW(){this.omnibar&&(this.omnibarToggleButton?.toggleAttribute("hidden",!0),this.omnibar.toggleAttribute("hidden",!1),this.omnibar.focus())}function eP(){if(null==TrackingBlockElement.refocusOmnibarIndex||this.hasAttribute("data-precache"))return;let{comment:e}=this.findFormAndCommentElements();Array.from(e.querySelectorAll("tracking-block")).indexOf(this)===TrackingBlockElement.refocusOmnibarIndex&&(TrackingBlockElement.refocusOmnibarIndex=null,setTimeout(()=>p(this,U,eW).call(this),0))}function eO(e){return e.hasAttribute(g.draftIssueType)}function eF(e){return e.hasAttribute(g.issueType)}function eH(e){return e instanceof HTMLElement&&"menuitem"===e.getAttribute("role")}function eN(e){if(document.activeElement===e)return;for(let t of e.querySelectorAll("anchored-position"))t?.hidePopover();let t=e.querySelector(".tracking-block-item-menu-btn");t?.setAttribute("aria-expanded","false")}function eR(e){if(e){for(let t of(this.completionCompleted=e.completed??this.completionCompleted,this.completionTotal=e.total??this.completionTotal,document.querySelectorAll("tracked-issues-progress[data-type=tasklist_block]")))t.setAttribute("data-completed",String(this.completionCompleted)),t.setAttribute("data-total",String(this.completionTotal)),null!=e.dirty&&t.classList.toggle("is-dirty",e.dirty);p(this,et,eK).call(this)}}function eK(){let e=this.querySelector(".js-tracking-block-completion-icon"),t=e?.parentElement;if(!e||!t)return;let i=0!==this.listItems.length;for(let e of this.listItems){let t=e.getAttribute(g.itemState);if("closed"!==t&&"draftClosed"!==t&&"merged"!==t){i=!1;break}}i?(t.classList.remove("color-bg-open","color-fg-open"),t.classList.add("color-bg-done","color-fg-done"),e.classList.remove("color-fg-open"),e.classList.add("color-fg-done")):(t.classList.remove("color-bg-done","color-fg-done"),t.classList.add("color-bg-open","color-fg-open"),e.classList.remove("color-fg-done"),e.classList.add("color-fg-open"))}function e$(){let e=p(this,el,eJ).call(this);for(let t of this.inputs)t.disabled=!e;for(let t of this.itemMenus)t.style.display=e?"":"none";p(this,en,eX).call(this)}function eX(){this.omnibar&&(p(this,el,eJ).call(this)?(this.omnibar.style.display="",this.omnibar.disabled=!1):this.readonly||!p(this,es,eG).call(this)?this.omnibar.style.display="none":this.omnibar.disabled=!0)}function eV(e){return y[e]}function eU(e,t){if(!e)return null;let i=p(this,er,eV).call(this,t);return e.matches(i)?e:e.closest(i)}function ez(e,t,i){if(!e)return null;let n=p(this,ea,eU).call(this,e,t);return n?n.querySelector(i):null}function eJ(){return!this.readonly&&!this.disabled}function eG(){return this.apiComponent?.canSync??!1}function eQ(){let{comment:e}=this.findFormAndCommentElements();this.apiComponent=new l.A(e,this).init(),this.apiComponent.canSync||(this.readonly=!0)}TrackingBlockElement.refocusOmnibarIndex=null,b([n.CF],TrackingBlockElement.prototype,"id",void 0),b([n.CF],TrackingBlockElement.prototype,"readonly",void 0),b([n.CF],TrackingBlockElement.prototype,"disabled",void 0),b([n.CF],TrackingBlockElement.prototype,"queryType",void 0),b([n.CF],TrackingBlockElement.prototype,"responseSourceType",void 0),b([n.CF],TrackingBlockElement.prototype,"completionCompleted",void 0),b([n.CF],TrackingBlockElement.prototype,"completionTotal",void 0),b([n.CF],TrackingBlockElement.prototype,"state",void 0),b([n.CF],TrackingBlockElement.prototype,"precache",void 0),b([n.aC],TrackingBlockElement.prototype,"list",void 0),b([n.aC],TrackingBlockElement.prototype,"omnibar",void 0),b([n.aC],TrackingBlockElement.prototype,"omnibarToggleButton",void 0),b([n.aC],TrackingBlockElement.prototype,"dropdownMenu",void 0),b([n.aC],TrackingBlockElement.prototype,"titleEditMode",void 0),b([n.aC],TrackingBlockElement.prototype,"titleViewMode",void 0),b([n.zV],TrackingBlockElement.prototype,"inputs",void 0),b([n.zV],TrackingBlockElement.prototype,"renderedTitles",void 0),b([n.zV],TrackingBlockElement.prototype,"listItems",void 0),b([n.aC],TrackingBlockElement.prototype,"emptyItemTemplate",void 0),b([n.aC],TrackingBlockElement.prototype,"emptyIssueTemplate",void 0),b([n.zV],TrackingBlockElement.prototype,"itemMenus",void 0),b([n.aC],TrackingBlockElement.prototype,"staleBanner",void 0),b([n.aC],TrackingBlockElement.prototype,"isSavingIcon",void 0),TrackingBlockElement=b([n.p_],TrackingBlockElement)},11113:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(39595);function r(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function a(e,t){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function o(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}var l=new WeakSet,s=new WeakSet,c=new WeakSet;let d=class TrackingBlockOmnibarElement extends HTMLElement{get input(){return(0,n.FB)(this,"input")||this.autocomplete?.querySelector("input")}connectedCallback(){r(this,c,m).call(this)}adoptedCallback(){r(this,c,m).call(this)}attributeChangedCallback(e){"data-disabled"===e&&r(this,c,m).call(this)}handleAutoCompleteSelect(e){let t=e.target;if(!t)return;let i=t.value.trim();if(!i.length)return;let n=r(this,l,u).call(this,t,i);r(this,s,h).call(this,n),e.target.value="",e.relatedTarget.focus()}handleSubmit(e){e.preventDefault();let t=e.currentTarget,i=new FormData(e.currentTarget).get("tasklist_omnibar"),n=i?.toString().trim()??"";if(n){let e=r(this,l,u).call(this,t,n);r(this,s,h).call(this,e)}this.input&&(this.input.value="",this.input.focus())}focus(){this.input&&this.input.focus()}constructor(...e){super(...e),a(this,l),a(this,s),a(this,c),this.disabled=!1}};function u(e,t){let i=e.closest(".js-comment"),n=null;i?n=i.querySelector(".js-comment-update"):i=e.closest(".markdown-body");let r=e.closest("tracking-block");return{operation:"append_item",position:Array.from(i.querySelectorAll("tracking-block")).findIndex(e=>e===r),value:t,formId:n?.id||""}}function h(e){this.dispatchEvent(new CustomEvent("tracking-block-omnibar-append",{bubbles:!0,detail:e}))}function m(){this.input&&(this.input.disabled=this.disabled)}o([n.CF],d.prototype,"disabled",void 0),o([n.aC],d.prototype,"autocomplete",void 0),d=o([n.p_],d)},27756:(e,t,i)=>{let n;function r(){if(!n)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return n}function a(){return n?.locale??"en-US"}i.d(t,{JK:()=>a,_$:()=>r}),function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{n=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},5728:(e,t,i)=>{i.d(t,{G:()=>r,K:()=>a});var n=i(97156);let r=n.XC?.readyState==="interactive"||n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),a=n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.cg?.addEventListener("load",e)})},97564:(e,t,i)=>{i.d(t,{G7:()=>s,XY:()=>c,fQ:()=>l});var n=i(5225),r=i(27756);function a(){return new Set((0,r._$)().featureFlags.map(e=>e.toLowerCase()))}let o=i(97156).X3?a:(0,n.A)(a);function l(){return Array.from(o())}function s(e){return o().has(e.toLowerCase())}let c={isFeatureEnabled:s}},78350:(e,t,i)=>{i.d(t,{Cy:()=>l,K3:()=>d,Z8:()=>s,k_:()=>a,lK:()=>u,m$:()=>o});var n=i(41695);function r(e,t,i){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:i}))}function a(e,t){t&&(function(e,t){if(!(e instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw Error("The specified element is not owned by the form element.")}(e,t),(0,n.A)(t)),r(e,"submit",!0)&&e.submit()}function o(e,t){if("boolean"==typeof t){if(e instanceof HTMLInputElement)e.checked=t;else throw TypeError("only checkboxes can be set to boolean value")}else{if("checkbox"===e.type)throw TypeError("checkbox can't be set to string value");e.value=t}r(e,"change",!1)}function l(e,t){for(let i in t){let n=t[i],r=e.elements.namedItem(i);r instanceof HTMLInputElement?r.value=n:r instanceof HTMLTextAreaElement&&(r.value=n)}}function s(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),i=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==i&&"reset"!==i||e.isContentEditable}function c(e){return new URLSearchParams(e)}function d(e,t){let i=new URLSearchParams(e.search);for(let[e,n]of c(t))i.append(e,n);return i.toString()}function u(e){return c(new FormData(e)).toString()}},41695:(e,t,i)=>{function n(e){let t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let i=r(t);if(e.name){let n=e.matches("input[type=submit]")?"Submit":"",r=e.value||n;i||((i=document.createElement("input")).type="hidden",i.classList.add("js-submit-button-value"),t.prepend(i)),i.name=e.name,i.value=r}else i&&i.remove()}function r(e){let t=e.querySelector("input.js-submit-button-value");return t instanceof HTMLInputElement?t:null}i.d(t,{A:()=>n,C:()=>r})},59017:(e,t,i)=>{i.d(t,{Eu:()=>l,l_:()=>a,r9:()=>o});var n=i(83770);function r(e){return{getNodeKey:()=>null,onBeforeElUpdated:(t,i)=>{if("TURBO-FRAME"===i.tagName||i.matches(".js-task-list-field, .contains-task-list")||"false"===i.getAttribute("data-morpheus-enabled"))return t.replaceWith(i),!1;if(t.hasAttribute("data-catalyst")&&i.setAttribute("data-catalyst",t.getAttribute("data-catalyst")||""),t.hasAttribute("data-morpheus-ignore"))for(let e of(t.getAttribute("data-morpheus-ignore")||"").trim().split(/\s+/))t.hasAttribute(e)?i.setAttribute(e,t.getAttribute(e)||""):i.removeAttribute(e);return e?.keepInputValues&&(i instanceof HTMLInputElement&&i.type===t.type||i instanceof HTMLTextAreaElement)&&(i instanceof HTMLInputElement&&("checkbox"===i.type||"radio"===i.type)?i.checked=t.checked:i.value=t.value),!0},onBeforeElChildrenUpdated:(e,t)=>{for(let i of[...e.childNodes,...t.childNodes])i.nodeType===Node.COMMENT_NODE&&i.remove();return!0},onElUpdated:e=>{e.connectedCallback&&queueMicrotask(()=>{e.disconnectedCallback?.(),e.connectedCallback?.()})}}}function a(e){let t=e.closest("[data-morpheus-enabled]");return null!=t&&"false"!==t.getAttribute("data-morpheus-enabled")}function o(e,t,i){if("string"==typeof t){let e=document.createElement("template");e.innerHTML=t,t=e.content}if(!a(e)){e.replaceWith(t);return}if(t instanceof DocumentFragment){let a=Array.from(t.children);a.length?((0,n.A)(e,a[0],r(i)),e.after(...a.slice(1))):e.replaceWith(t)}else(0,n.A)(e,t,r(i))}function l(e,t,i){if(!a(e)){e.innerHTML=t;return}let o="",l="";e.firstChild?.nodeType===Node.TEXT_NODE&&(o=e.firstChild.nodeValue?.match(/^\s+/)?.[0]||""),e.lastChild?.nodeType===Node.TEXT_NODE&&(l=e.lastChild.nodeValue?.match(/\s+$/)?.[0]||"");let s=e.cloneNode(!1);s.innerHTML=`${o}${t.trim()}${l}`,(0,n.A)(e,s,r(i))}},14740:(e,t,i)=>{i.d(t,{k:()=>o,v:()=>l});var n=i(5225),r=i(97156);let a=(0,n.A)(function(){return r.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,n.A)(function(){return"enterprise"===a()}),l="webpack"},97156:(e,t,i)=>{i.d(t,{KJ:()=>n.KJ,Kn:()=>r.Kn,X3:()=>n.X3,XC:()=>r.XC,cg:()=>r.cg,fV:()=>r.fV,g5:()=>n.g5});var n=i(15572),r=i(86733)},86733:(e,t,i)=>{i.d(t,{Kn:()=>a,XC:()=>n,cg:()=>r,fV:()=>o});let n="undefined"==typeof document?void 0:document,r="undefined"==typeof window?void 0:window,a="undefined"==typeof history?void 0:history,o="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:"",href:""}:location},15572:(e,t,i)=>{i.d(t,{KJ:()=>a,X3:()=>r,g5:()=>o});var n=i(86733);let r=void 0===n.XC,a=!r;function o(){return!!r||!!n.XC.querySelector('react-app[data-ssr="true"]')}},51528:(e,t,i)=>{i.d(t,{X:()=>m,i:()=>c});var n=i(97156),r=i(5728),a=i(14740),o=i(97564),l=i(70170);let s=[];function c(e,t=!1,i=.5){if(!0!==(0,o.G7)("BROWSER_STATS_DISABLED")){if(i<0||i>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!n.XC?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=m(),e.bundler=a.v,Math.random()<i&&s.push(e),t?h():u()}}let d=null,u=(0,l.n)(async function(){await r.K,null==d&&(d=window.requestIdleCallback(h))},5e3);function h(){if(d=null,!s.length)return;let e=n.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],i=e.map(e=>JSON.stringify(e));for(;i.length>0;)t.push(function(e){let t=e.shift(),i=[t],n=t.length;for(;e.length>0&&n<=65536;){let t=e[0].length;if(n+t<=65536){let r=e.shift();i.push(r),n+=t}else break}return i}(i));return t}(s))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);s=[]}}function m(){return!!n.XC?.head?.querySelector('meta[name="user-staff"]')?.content}n.XC?.addEventListener("pagehide",h),n.XC?.addEventListener("visibilitychange",h)},85971:(e,t,i)=>{async function n(e,t){let{appendItem:n,removeItem:r,removeTasklistBlock:a,updateItemPosition:o,updateItemState:l,updateItemTitle:s,updateTasklistTitle:c}=await Promise.all([i.e("vendors-node_modules_micromark_index_js-node_modules_remark-gfm_index_js-node_modules_remark_-2e1650"),i.e("ui_packages_tasklist-block-operations_operations_ts")]).then(i.bind(i,77914));if("append_item"===t.operation){if(!/^\s*(https?:|#)/.test(t.value))return n(e,t.position,t.value)}else if("update_item_title"===t.operation)return s(e,t.position,t.value);else if("update_item_state"===t.operation)return l(e,t.position,t.closed);else if("update_item_position"===t.operation)return o(e,t.src,t.dst);else if("remove_item"===t.operation)return r(e,t.position);else if("remove_tasklist_block"===t.operation)return a(e,t.position);else if("update_tasklist_title"===t.operation)return c(e,t.position,t.name);return null}async function r(e){let{transformToHTML:t}=await Promise.all([i.e("vendors-node_modules_micromark_index_js-node_modules_remark-gfm_index_js-node_modules_remark_-2e1650"),i.e("ui_packages_tasklist-block-operations_operations_ts")]).then(i.bind(i,77914));return t(e)}function a(e){return"append_item"===e.operation}i.d(t,{Oh:()=>r,hJ:()=>a,nj:()=>n})}}]);
//# sourceMappingURL=app_components_tracking_blocks_tracking-block-element_ts-6af76b31f0c9.js.map